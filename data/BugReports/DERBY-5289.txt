<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|925f7e976455d176b336bbf6d33b84cb883fdc72|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"a76f733d5b522\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-5289"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-5289] Unable to boot 10.5.1.1 database - fails during soft/hard upgrade process for a new version number while trying to drop jdbc metadata - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-5289] Unable to boot 10.5.1.1 database - fails during soft/hard upgrade process for a new version number while trying to drop jdbc metadata - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-5289">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-5289" href="/jira/browse/DERBY-5289" id="key-val" rel="12511021">DERBY-5289</a></li>
                </ol>
                <h1 id="summary-val">Unable to boot 10.5.1.1 database - fails during soft/hard upgrade process for a new version number while trying to drop jdbc metadata</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-5289"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-5289/DERBY-5289.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-5289/DERBY-5289.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-5289/DERBY-5289.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-5289/DERBY-5289.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.1.3.1 ">10.1.3.1</span>, <span title="10.2.2.0 ">10.2.2.0</span>, <span title="10.3.3.0 ">10.3.3.0</span>, <span title="10.4.2.0 ">10.4.2.0</span>, <span title="10.5.3.0 Next release after 10.5.2.0 release candidate #1">10.5.3.0</span>, <span title="10.6.2.1 Derby 10.6.2.1 Release">10.6.2.1</span>, <span title="10.7.1.1 First release on the 10.7 branch.">10.7.1.1</span>, <span title="10.8.1.2 First release on the 10.8 branch">10.8.1.2</span>, <span title="10.9.1.0 First release on the 10.9 branch">10.9.1.0</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.1.3.3" title="10.1.3.3 Head of 10.1 branch. Maintenance version bump for sps update ">10.1.3.3</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.2.2.1" title="10.2.2.1 Head of 10.2 branch">10.2.2.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.3.3.1" title="10.3.3.1 Head of 10.3 branch">10.3.3.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.2.1" title="10.4.2.1 Head of 10.4 branch">10.4.2.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.5.3.1" title="10.5.3.1 Old head of 10.5 branch">10.5.3.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.6.2.2" title="10.6.2.2 Old head of 10.6 branch">10.6.2.2</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.7.1.4" title="10.7.1.4 Head of 10.7 branch as of 2010-11-29">10.7.1.4</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.8.2.2" title="10.8.2.2 second release on the 10.8 branch">10.8.2.2</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.9.1.0" title="10.9.1.0 First release on the 10.9 branch">10.9.1.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12511021-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value"> 
                    <div id="field-environment" class="twixi-block twixi-block-inverted collapsed "> 
                     <div class="twixi-wrap verbose"> 
                      <a href="#" class="twixi "><span class="icon-default aui-icon aui-icon-small aui-iconfont-expanded"><span>Hide</span></span></a> 
                      <div class="flooded">
                        &gt;sysinfo
                       <br> ------------------ Java Information ------------------
                       <br> Java Version: 1.6.0_26
                       <br> Java Vendor: Sun Microsystems Inc.
                       <br> Java home: C:\Program Files (x86)\Java\jre6
                       <br> Java classpath: .;C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derby.jar;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derbynet.jar;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derbyclient.jar;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derbytools.jar
                       <br> OS name: Windows 7
                       <br> OS architecture: x86
                       <br> OS version: 6.1
                       <br> Java user name: bmason
                       <br> Java user home: C:\Users\BMASON
                       <br> Java user dir: C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin
                       <br> java.specification.name: Java Platform API Specification
                       <br> java.specification.version: 1.6
                       <br> java.runtime.version: 1.6.0_26-b03
                       <br> --------- Derby Information --------
                       <br> JRE - JDBC: Java SE 6 - JDBC 4.0
                       <br> [C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derby.jar] 10.8.1.2 - (1095077)
                       <br> [C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derbytools.jar] 10.8.1.2 - (1095077)
                       <br> [C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derbynet.jar] 10.8.1.2 - (1095077)
                       <br> [C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derbyclient.jar] 10.8.1.2 - (1095077)
                       <br> ------------------------------------------------------
                       <br> ----------------- Locale Information -----------------
                       <br> Current Locale : [English/New Zealand [en_NZ]]
                       <br> Found support for locale: [cs]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [de_DE]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [es]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [fr]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [hu]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [it]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [ja_JP]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [ko_KR]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [pl]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [pt_BR]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [ru]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [zh_CN]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> Found support for locale: [zh_TW]
                       <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077)
                       <br> ------------------------------------------------------ 
                      </div> 
                     </div> 
                     <div class="twixi-wrap concise"> 
                      <a href="#" class="twixi "><span class="icon-default aui-icon aui-icon-small aui-iconfont-collapsed"><span>Show</span></span></a> 
                      <div class="flooded">
                        &gt;sysinfo ------------------ Java Information ------------------ Java Version: 1.6.0_26 Java Vendor: Sun Microsystems Inc. Java home: C:\Program Files (x86)\Java\jre6 Java classpath: .;C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derby.jar;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derbynet.jar;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derbyclient.jar;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derbytools.jar OS name: Windows 7 OS architecture: x86 OS version: 6.1 Java user name: bmason Java user home: C:\Users\BMASON Java user dir: C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin java.specification.name: Java Platform API Specification java.specification.version: 1.6 java.runtime.version: 1.6.0_26-b03 --------- Derby Information -------- JRE - JDBC: Java SE 6 - JDBC 4.0 [C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derby.jar] 10.8.1.2 - (1095077) [C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derbytools.jar] 10.8.1.2 - (1095077) [C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derbynet.jar] 10.8.1.2 - (1095077) [C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derbyclient.jar] 10.8.1.2 - (1095077) ------------------------------------------------------ ----------------- Locale Information ----------------- Current Locale : [English/New Zealand [en_NZ]] Found support for locale: [cs] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [de_DE] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [es] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [fr] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [hu] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [it] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [ja_JP] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [ko_KR] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [pl] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [pt_BR] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [ru] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [zh_CN] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) Found support for locale: [zh_TW] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: 10.8.1.2 - (1095077) ------------------------------------------------------ 
                      </div> 
                     </div> 
                    </div> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>Repro attached</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Regression</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>I have been unable to get Derby 10.7.1.1 and 10.8.1.2 to boot the attached 10.5.1.1 database. Derby 10.6.1.0 is however able to use the DB.</p> 
                  <p>I'm not sure if this is a backwards compatibility bug or the result of corruption to the database. Running SYSCS_CHECK_TABLE and SYSCS_COMPRESS_TABLE under 10.6.1.0 found no problems with the database.</p> 
                  <p>NOTE: I have had to remove all data and non-essential tables/columns/triggers/etc prior to attaching this database.</p> 
                  <p>Output when connecting to the DB using ij:<br> ERROR XJ040: Failed to start database 'C:\Users\BMASON\Sandbox\InternalDB' with class loader sun.misc.Launcher$AppClassLoader@11b86e7, see the next exception for details.<br> ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored</p> 
                  <p>Full exception from our application:<br> java.sql.SQLException: Failed to start database 'C:\Users\BMASON\Sandbox\InternalDB' with class loader sun.misc.Launcher$AppClassLoader@93dee9, see the next exception for details.<br> at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)<br> at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)<br> at org.apache.derby.impl.jdbc.Util.seeNextException(Unknown Source)<br> at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(Unknown Source)<br> at org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(Unknown Source)<br> at org.apache.derby.impl.jdbc.EmbedConnection30.&lt;init&gt;(Unknown Source)<br> at org.apache.derby.impl.jdbc.EmbedConnection40.&lt;init&gt;(Unknown Source)<br> at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)<br> at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)<br> at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)<br> at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)<br> at com.ADInstruments.LTS.util.DerbyUtils.exists(DerbyUtils.java:86)<br> at com.ADInstruments.LTS.InternalDB.InternalDbUtilities.cacheInternalDbVersion(InternalDbUtilities.java:117)<br> at com.ADInstruments.LTCS.InternalDB.InternalDbStartup.initialiseDatabase(InternalDbStartup.java:23)<br> at com.ADInstruments.LTCS.StartupTasks$StartupRunnable.initDatabases(StartupTasks.java:35)<br> at com.ADInstruments.LTCS.StartupTasks$StartupRunnable.run(StartupTasks.java:52)<br> at java.lang.Thread.run(Thread.java:662)<br> Caused by: java.sql.SQLException: Failed to start database 'C:\Users\BMASON\Sandbox\InternalDB' with class loader sun.misc.Launcher$AppClassLoader@93dee9, see the next exception for details.<br> at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)<br> at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)<br> ... 17 more<br> Caused by: java.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored<br> at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)<br> at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)<br> at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)<br> at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)<br> ... 14 more<br> Caused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored<br> at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)<br> at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(Unknown Source)<br> at org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(Unknown Source)<br> at org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(Unknown Source)<br> at org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(Unknown Source)<br> at org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(Unknown Source)<br> at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(Unknown Source)<br> at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(Unknown Source)<br> at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(Unknown Source)<br> at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(Unknown Source)<br> at org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(Unknown Source)<br> at org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(Unknown Source)<br> at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(Unknown Source)<br> at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)<br> at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source)<br> at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source)<br> at org.apache.derby.impl.db.BasicDatabase.boot(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)<br> at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(Unknown Source)<br> at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Unknown Source)<br> ... 14 more<br> Caused by: java.io.EOFException<br> at java.io.DataInputStream.readInt(DataInputStream.java:375)<br> at org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(Unknown Source)<br> at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(Unknown Source)<br> at org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(Unknown Source)<br> at org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(Unknown Source)<br> at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(Unknown Source)<br> at org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(Unknown Source)<br> at org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(Unknown Source)<br> at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(Unknown Source)<br> at org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(Unknown Source)<br> at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(Unknown Source)<br> at org.apache.derby.iapi.types.UserType.readExternal(Unknown Source)<br> ... 39 more</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-5289?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-5289?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-5289?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-5289?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12483460" data-issue-id="12511021" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12483460/DERBY5269_patch1_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY5269_patch1_diff.txt:https://issues.apache.org/jira/secure/attachment/12483460/DERBY5269_patch1_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12483460/DERBY5269_patch1_diff.txt" title="Latest  22/Jun/11 17:03 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5269_patch1_diff.txt:https://issues.apache.org/jira/secure/attachment/12483460/DERBY5269_patch1_diff.txt">DERBY5269_patch1_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-06-22T17:03:23.948Z">22/Jun/11 17:03</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12483993" data-issue-id="12511021" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12483993/derby-5289_10_7_diff.txt" draggable="true" data-downloadurl="text/plain:derby-5289_10_7_diff.txt:https://issues.apache.org/jira/secure/attachment/12483993/derby-5289_10_7_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12483993/derby-5289_10_7_diff.txt" title="Latest  27/Jun/11 19:40 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-5289_10_7_diff.txt:https://issues.apache.org/jira/secure/attachment/12483993/derby-5289_10_7_diff.txt">derby-5289_10_7_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-06-27T19:40:36.028Z">27/Jun/11 19:40</time>
                   </dd>
                   <dd class="attachment-size">
                    12 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12483762" data-issue-id="12511021" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12483762/derby-5289_test_diff.txt" draggable="true" data-downloadurl="text/plain:derby-5289_test_diff.txt:https://issues.apache.org/jira/secure/attachment/12483762/derby-5289_test_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12483762/derby-5289_test_diff.txt" title="Latest  24/Jun/11 19:53 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-5289_test_diff.txt:https://issues.apache.org/jira/secure/attachment/12483762/derby-5289_test_diff.txt">derby-5289_test_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-06-24T19:53:06.160Z">24/Jun/11 19:53</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12483224" data-issue-id="12511021" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12483224/InternalDB%20-%20broken%20for%2010.8.zip" draggable="true" data-downloadurl="application/zip:InternalDB - broken for 10.8.zip:https://issues.apache.org/jira/secure/attachment/12483224/InternalDB%20-%20broken%20for%2010.8.zip"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-zip" title="Zip Archive"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12483224/InternalDB%20-%20broken%20for%2010.8.zip" title="Latest  21/Jun/11 00:24 - Brett Mason" draggable="true" data-downloadurl="application/zip:InternalDB - broken for 10.8.zip:https://issues.apache.org/jira/secure/attachment/12483224/InternalDB%20-%20broken%20for%2010.8.zip">InternalDB - broken for 10.8.zip</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-06-21T00:24:50.730Z">21/Jun/11 00:24</time>
                   </dd>
                   <dd class="attachment-size">
                    315 kB
                   </dd>
                   <dd class="attachment-author">
                    Brett Mason
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12483504" data-issue-id="12511021" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12483504/repro.sql" draggable="true" data-downloadurl="application/octet-stream:repro.sql:https://issues.apache.org/jira/secure/attachment/12483504/repro.sql"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12483504/repro.sql" title="Latest  22/Jun/11 20:35 - Brett Mason" draggable="true" data-downloadurl="application/octet-stream:repro.sql:https://issues.apache.org/jira/secure/attachment/12483504/repro.sql">repro.sql</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-06-22T20:35:06.949Z">22/Jun/11 20:35</time>
                   </dd>
                   <dd class="attachment-size">
                    0.5 kB
                   </dd>
                   <dd class="attachment-author">
                    Brett Mason
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_kmarsden" rel="kmarsden" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Kathey Marsden&quot;,&quot;emailAddress&quot;:&quot;kmarsdenderby@sbcglobal.net&quot;,&quot;username&quot;:&quot;kmarsden&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="kmarsden"></span></span> Kathey Marsden </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_b.mason@adinstruments.com" rel="b.mason@adinstruments.com" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Brett Mason&quot;,&quot;emailAddress&quot;:&quot;b.mason@adinstruments.com&quot;,&quot;username&quot;:&quot;b.mason@adinstruments.com&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="b.mason@adinstruments.com"></span></span> Brett Mason </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">2</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="21/Jun/11 00:21"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2011-06-21T00:21:57+0000">21/Jun/11 00:21</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="17/Jun/13 09:19"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2013-06-17T09:19:43+0000">17/Jun/13 09:19</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="29/Jun/11 16:49"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2011-06-29T16:49:10+0000">29/Jun/11 16:49</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-5289?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-5289?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-13052289\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052289&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052289\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13052289_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052289_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 00:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T00:24:50+0000\'\u003e21\\/Jun\\/11 00:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTrimmed down database which exhibits the problem.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13052289_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052289_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 00:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T00:24:50+0000\'\u003e21\\/Jun\\/11 00:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Trimmed down database which exhibits the problem.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052291\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052291&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052291\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13052291_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052291_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 00:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T00:28:36+0000\'\u003e21\\/Jun\\/11 00:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe database can be booted with 10.8 if the trigger ADMIN_LIST_UPDATE_MARKERS is dropped.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13052291_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052291_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 00:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T00:28:36+0000\'\u003e21\\/Jun\\/11 00:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The database can be booted with 10.8 if the trigger ADMIN_LIST_UPDATE_MARKERS is dropped.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052335\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052335&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052335\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13052335_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052335_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 03:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T03:03:20+0000\'\u003e21\\/Jun\\/11 03:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJust checked and 10.6.2.1 works as expected.\u003c\\/p\u003e\\n\\n\u003cp\u003eLet me know if there is any more information I can provide.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13052335_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052335_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 03:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T03:03:20+0000\'\u003e21\\/Jun\\/11 03:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Just checked and 10.6.2.1 works as expected. \\n\\n Let me know if there is any more information I can provide.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052750\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052750&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052750\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052750_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052750_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T18:35:32+0000\'\u003e21\\/Jun\\/11 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 21\\/Jun\\/11 21:13\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI tried the attached db with 10.7.1.1 release and ran into same problem as Brett. I tried it with 10.8 codeline(not the released 10.8.1.2) and the database upgraded fine. I will try it with 10.8.1.2 and with the current trunk codeline to see how it behaves there. It looks like the trigger definition for ADMIN_LIST_UPDATE_MARKERS is as follows\u003cbr\\/\u003e\\nUPDATE EXP_RUNS SET MARKER_USERCODE = LOWER(NEW.USER_CODE) WHERE MARKER_USERCODE = LOWER(OLD.USER_CODE)\u003c\\/p\u003e\\n\\n\u003cp\u003eBrett, I wondered if you could post a simple repro to create the database which shows the problem, It can be an ij script or java program, whichever is easy for you. In the mean time, I will investigate the db attached by you. Thanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052750_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052750_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T18:35:32+0000\'\u003e21\\/Jun\\/11 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 21\\/Jun\\/11 21:13\\\"\u003eedited\u003c\\/span\u003e                   I tried the attached db with 10.7.1.1 release and ran into same problem as Brett. I tried it with 10.8 codeline(not the released 10.8.1.2) and the database upgraded fine. I will try it with 10.8.1.2 and with the current trunk codeline to see how it behaves there. It looks like the trigger definition for ADMIN_LIST_UPDATE_MARKERS is as follows \\nUPDATE EXP_RUNS SET MARKER_USERCODE = LOWER(NEW.USER_CODE) WHERE MARKER_USERCODE = LOWER(OLD.USER_CODE) \\n\\n Brett, I wondered if you could post a simple repro to create the database which shows the problem, It can be an ij script or java program, whichever is easy for you. In the mean time, I will investigate the db attached by you. Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052821\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052821&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052821\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13052821_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052821_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 20:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T20:55:00+0000\'\u003e21\\/Jun\\/11 20:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003emamta, did you try a sane server on the 10.7 codeline?  Could you post a complete stack from derby.log as the posted stack is incomplete.\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom the stack it looks like this is a hard upgrade issue.  Is soft upgrade a problem?\u003c\\/p\u003e\\n\\n\u003cp\u003eIs it correct that on upgrade we are reading anything out of the system catlogs for the triggers?  With full stack it probably will be clearer where\u003cbr\\/\u003e\\nthe problem is.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13052821_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052821_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 20:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T20:55:00+0000\'\u003e21\\/Jun\\/11 20:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    mamta, did you try a sane server on the 10.7 codeline?  Could you post a complete stack from derby.log as the posted stack is incomplete. \\n\\n From the stack it looks like this is a hard upgrade issue.  Is soft upgrade a problem? \\n\\n Is it correct that on upgrade we are reading anything out of the system catlogs for the triggers?  With full stack it probably will be clearer where \\nthe problem is.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052873\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052873&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052873\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052873_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052873_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 21:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T21:59:59+0000\'\u003e21\\/Jun\\/11 21:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMike write \\\"From the stack it looks like this is a hard upgrade issue. Is soft upgrade a problem? \\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eYes, the stack trace appears to be for hard upgrade. I tried the soft upgrade on the attached db to 10.7.1.1 and saw the same problem.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052873_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052873_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 21:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T21:59:59+0000\'\u003e21\\/Jun\\/11 21:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mike write \\\"From the stack it looks like this is a hard upgrade issue. Is soft upgrade a problem? \\\" \\n\\n Yes, the stack trace appears to be for hard upgrade. I tried the soft upgrade on the attached db to 10.7.1.1 and saw the same problem.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052876\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052876&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052876\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052876_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052876_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 22:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T22:02:23+0000\'\u003e21\\/Jun\\/11 22:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am attaching derby.log with complete stack trace and also copying it here (it is rather long)\u003cbr\\/\u003e\\njava.sql.SQLException: Failed to start database \'InternalDB\' with class loader sun.misc.Launcher$AppClassLoader@5ca65ca6, see the next exception for details.\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.Util.seeNextException(Util.java:278)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2725)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:384)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:322)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:297)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\u003cbr\\/\u003e\\n\\tat org.apache.derby.tools.ij.main(ij.java:59)\u003cbr\\/\u003e\\nCaused by: java.sql.SQLException: Failed to start database \'InternalDB\' with class loader sun.misc.Launcher$AppClassLoader@5ca65ca6, see the next exception for details.\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)\u003cbr\\/\u003e\\n\\t... 18 more\u003cbr\\/\u003e\\nCaused by: java.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2719)\u003cbr\\/\u003e\\n\\t... 15 more\u003cbr\\/\u003e\\nCaused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686)\u003cbr\\/\u003e\\n\\t... 15 more\u003cbr\\/\u003e\\nCaused by: java.io.EOFException\u003cbr\\/\u003e\\n\\tat java.io.DataInputStream.readInt(DataInputStream.java:386)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639)\u003cbr\\/\u003e\\n\\t... 40 more\u003cbr\\/\u003e\\n============= begin nested exception, level (1) ===========\u003cbr\\/\u003e\\njava.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2719)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:384)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:322)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:297)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\u003cbr\\/\u003e\\n\\tat org.apache.derby.tools.ij.main(ij.java:59)\u003cbr\\/\u003e\\nCaused by: java.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)\u003cbr\\/\u003e\\n\\t... 17 more\u003cbr\\/\u003e\\nCaused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686)\u003cbr\\/\u003e\\n\\t... 15 more\u003cbr\\/\u003e\\nCaused by: java.io.EOFException\u003cbr\\/\u003e\\n\\tat java.io.DataInputStream.readInt(DataInputStream.java:386)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639)\u003cbr\\/\u003e\\n\\t... 40 more\u003cbr\\/\u003e\\n============= end nested exception, level (1) ===========\u003cbr\\/\u003e\\n============= begin nested exception, level (2) ===========\u003cbr\\/\u003e\\njava.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2719)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:384)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:322)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:297)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\u003cbr\\/\u003e\\n\\tat org.apache.derby.tools.ij.main(ij.java:59)\u003cbr\\/\u003e\\nCaused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686)\u003cbr\\/\u003e\\n\\t... 15 more\u003cbr\\/\u003e\\nCaused by: java.io.EOFException\u003cbr\\/\u003e\\n\\tat java.io.DataInputStream.readInt(DataInputStream.java:386)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639)\u003cbr\\/\u003e\\n\\t... 40 more\u003cbr\\/\u003e\\n============= end nested exception, level (2) ===========\u003cbr\\/\u003e\\n============= begin nested exception, level (3) ===========\u003cbr\\/\u003e\\nERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:384)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:322)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:297)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\u003cbr\\/\u003e\\n\\tat org.apache.derby.tools.ij.main(ij.java:59)\u003cbr\\/\u003e\\nCaused by: java.io.EOFException\u003cbr\\/\u003e\\n\\tat java.io.DataInputStream.readInt(DataInputStream.java:386)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639)\u003cbr\\/\u003e\\n\\t... 40 more\u003cbr\\/\u003e\\n============= end nested exception, level (3) ===========\u003cbr\\/\u003e\\n============= begin nested exception, level (4) ===========\u003cbr\\/\u003e\\njava.io.EOFException\u003cbr\\/\u003e\\n\\tat java.io.DataInputStream.readInt(DataInputStream.java:386)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:384)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:322)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:297)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\u003cbr\\/\u003e\\n\\tat org.apache.derby.tools.ij.main(ij.java:59)\u003cbr\\/\u003e\\n============= end nested exception, level (4) ===========\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052876_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052876_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 22:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T22:02:23+0000\'\u003e21\\/Jun\\/11 22:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am attaching derby.log with complete stack trace and also copying it here (it is rather long) \\njava.sql.SQLException: Failed to start database \'InternalDB\' with class loader sun.misc.Launcher$AppClassLoader@5ca65ca6, see the next exception for details. \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95) \\n\\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142) \\n\\tat org.apache.derby.impl.jdbc.Util.seeNextException(Util.java:278) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2725) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:384) \\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68) \\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238) \\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:322) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:297) \\n\\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503) \\n\\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333) \\n\\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261) \\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229) \\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184) \\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75) \\n\\tat org.apache.derby.tools.ij.main(ij.java:59) \\nCaused by: java.sql.SQLException: Failed to start database \'InternalDB\' with class loader sun.misc.Launcher$AppClassLoader@5ca65ca6, see the next exception for details. \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70) \\n\\t... 18 more \\nCaused by: java.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70) \\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2719) \\n\\t... 15 more \\nCaused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored \\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495) \\n\\tat org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438) \\n\\tat org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759) \\n\\tat org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860) \\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520) \\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686) \\n\\t... 15 more \\nCaused by: java.io.EOFException \\n\\tat java.io.DataInputStream.readInt(DataInputStream.java:386) \\n\\tat org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115) \\n\\tat org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244) \\n\\tat org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639) \\n\\t... 40 more \\n============= begin nested exception, level (1) =========== \\njava.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95) \\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2719) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:384) \\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68) \\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238) \\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:322) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:297) \\n\\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503) \\n\\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333) \\n\\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261) \\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229) \\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184) \\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75) \\n\\tat org.apache.derby.tools.ij.main(ij.java:59) \\nCaused by: java.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70) \\n\\t... 17 more \\nCaused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored \\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495) \\n\\tat org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438) \\n\\tat org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759) \\n\\tat org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860) \\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520) \\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686) \\n\\t... 15 more \\nCaused by: java.io.EOFException \\n\\tat java.io.DataInputStream.readInt(DataInputStream.java:386) \\n\\tat org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115) \\n\\tat org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244) \\n\\tat org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639) \\n\\t... 40 more \\n============= end nested exception, level (1) =========== \\n============= begin nested exception, level (2) =========== \\njava.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70) \\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2719) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:384) \\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68) \\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238) \\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:322) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:297) \\n\\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503) \\n\\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333) \\n\\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261) \\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229) \\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184) \\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75) \\n\\tat org.apache.derby.tools.ij.main(ij.java:59) \\nCaused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored \\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495) \\n\\tat org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438) \\n\\tat org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759) \\n\\tat org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860) \\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520) \\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686) \\n\\t... 15 more \\nCaused by: java.io.EOFException \\n\\tat java.io.DataInputStream.readInt(DataInputStream.java:386) \\n\\tat org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115) \\n\\tat org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244) \\n\\tat org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639) \\n\\t... 40 more \\n============= end nested exception, level (2) =========== \\n============= begin nested exception, level (3) =========== \\nERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored \\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495) \\n\\tat org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438) \\n\\tat org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759) \\n\\tat org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860) \\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520) \\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:384) \\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68) \\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238) \\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:322) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:297) \\n\\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503) \\n\\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333) \\n\\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261) \\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229) \\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184) \\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75) \\n\\tat org.apache.derby.tools.ij.main(ij.java:59) \\nCaused by: java.io.EOFException \\n\\tat java.io.DataInputStream.readInt(DataInputStream.java:386) \\n\\tat org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115) \\n\\tat org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244) \\n\\tat org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639) \\n\\t... 40 more \\n============= end nested exception, level (3) =========== \\n============= begin nested exception, level (4) =========== \\njava.io.EOFException \\n\\tat java.io.DataInputStream.readInt(DataInputStream.java:386) \\n\\tat org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115) \\n\\tat org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244) \\n\\tat org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226) \\n\\tat org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125) \\n\\tat org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639) \\n\\tat org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495) \\n\\tat org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438) \\n\\tat org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759) \\n\\tat org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860) \\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520) \\n\\tat org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124) \\n\\tat org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:384) \\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68) \\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238) \\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:322) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:297) \\n\\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503) \\n\\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333) \\n\\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261) \\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229) \\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184) \\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75) \\n\\tat org.apache.derby.tools.ij.main(ij.java:59) \\n============= end nested exception, level (4) ===========              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052889\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052889&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052889\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13052889_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052889_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 22:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T22:18:36+0000\'\u003e21\\/Jun\\/11 22:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for taking a look so quickly. I haven\'t been able to reproduce the issue with a fresh DB so far but I will keep trying. I will also try upgrading a range of other databases we have available to see if any others exhibit the problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe attached database was a development database I used for load testing so it would have had quite a bit of use, particularly the EXP_RUNS table.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13052889_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052889_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 22:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T22:18:36+0000\'\u003e21\\/Jun\\/11 22:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for taking a look so quickly. I haven\'t been able to reproduce the issue with a fresh DB so far but I will keep trying. I will also try upgrading a range of other databases we have available to see if any others exhibit the problem. \\n\\n The attached database was a development database I used for load testing so it would have had quite a bit of use, particularly the EXP_RUNS table.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052909\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052909&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052909\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052909_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052909_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 22:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T22:36:50+0000\'\u003e21\\/Jun\\/11 22:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI tried dblook on the attached db and got following\u003cbr\\/\u003e\\n$ java org.apache.derby.tools.dblook -d \'jdbc:derby:InternalDB\'\u003cbr\\/\u003e\\n&#8211; Timestamp: 2011-06-21 13:26:02.351\u003cbr\\/\u003e\\n&#8211; Source database is: InternalDB\u003cbr\\/\u003e\\n&#8211; Connection URL is: jdbc:derby:InternalDB\u003cbr\\/\u003e\\n&#8211; appendLogs: false\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; ----------------------------------------------\u003cbr\\/\u003e\\n&#8211; DDL Statements for schemas\u003cbr\\/\u003e\\n&#8211; ----------------------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE SCHEMA \\\"SYNC\\\";\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; ----------------------------------------------\u003cbr\\/\u003e\\n&#8211; DDL Statements for functions\u003cbr\\/\u003e\\n&#8211; ----------------------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"STR\\\" VARCHAR(32672)) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ;\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE_CHAR\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"VAL\\\" CHAR(1)) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ;\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE_INT\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"VAL\\\" INTEGER) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ;\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE_BIGINT\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"VAL\\\" BIGINT) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ;\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE_DOUBLE\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"VAL\\\" DOUBLE) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ;\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE_TIMESTAMP\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"VAL\\\" TIMESTAMP) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ;\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE FUNCTION \\\"SYNC\\\".\\\"RANDOM_UUID\\\" () RETURNS VARCHAR(100) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL RETURNS NULL ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.randomUUID\' ;\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; ----------------------------------------------\u003cbr\\/\u003e\\n&#8211; DDL Statements for tables\u003cbr\\/\u003e\\n&#8211; ----------------------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" (\\\"ADMIN_ID\\\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), \\\"USER_CODE\\\" VARCHAR(255) NOT NULL);\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE TABLE \\\"APP\\\".\\\"EXP_RUNS\\\" (\\\"RUN_ID\\\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), \\\"MARKER_USERCODE\\\" VARCHAR(255));\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; ----------------------------------------------\u003cbr\\/\u003e\\n&#8211; DDL Statements for keys\u003cbr\\/\u003e\\n&#8211; ----------------------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; primary\\/unique\u003cbr\\/\u003e\\nALTER TABLE \\\"APP\\\".\\\"EXP_RUNS\\\" ADD CONSTRAINT \\\"RUN_PK\\\" PRIMARY KEY (\\\"RUN_ID\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003eALTER TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" ADD CONSTRAINT \\\"ADMIN_LIST_USER_CODE_UC\\\" UNIQUE (\\\"USER_CODE\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003eALTER TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" ADD CONSTRAINT \\\"ADMIN_PK\\\" PRIMARY KEY (\\\"ADMIN_ID\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; ----------------------------------------------\u003cbr\\/\u003e\\n&#8211; DDL Statements for triggers\u003cbr\\/\u003e\\n&#8211; ----------------------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE TRIGGER \\\"APP\\\".\\\"ADMIN_LIST_UPDATE_MARKERS\\\" AFTER UPDATE ON \\\"APP\\\".\\\"ADMIN_LIST\\\" REFERENCING OLD AS OLD NEW AS NEW FOR EACH ROW UPDATE EXP_RUNS SET MARKER_USERCODE = LOWER(NEW.USER_CODE) WHERE MARKER_USERCODE = LOWER(OLD.USER_CODE);\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052909_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052909_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 22:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T22:36:50+0000\'\u003e21\\/Jun\\/11 22:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I tried dblook on the attached db and got following \\n$ java org.apache.derby.tools.dblook -d \'jdbc:derby:InternalDB\' \\n&#8211; Timestamp: 2011-06-21 13:26:02.351 \\n&#8211; Source database is: InternalDB \\n&#8211; Connection URL is: jdbc:derby:InternalDB \\n&#8211; appendLogs: false \\n\\n &#8211; ---------------------------------------------- \\n&#8211; DDL Statements for schemas \\n&#8211; ---------------------------------------------- \\n\\n CREATE SCHEMA \\\"SYNC\\\"; \\n\\n &#8211; ---------------------------------------------- \\n&#8211; DDL Statements for functions \\n&#8211; ---------------------------------------------- \\n\\n CREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"STR\\\" VARCHAR(32672)) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ; \\n\\n CREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE_CHAR\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"VAL\\\" CHAR(1)) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ; \\n\\n CREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE_INT\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"VAL\\\" INTEGER) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ; \\n\\n CREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE_BIGINT\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"VAL\\\" BIGINT) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ; \\n\\n CREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE_DOUBLE\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"VAL\\\" DOUBLE) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ; \\n\\n CREATE FUNCTION \\\"SYNC\\\".\\\"XML_ENCODE_TIMESTAMP\\\" (\\\"ELEM_NAME\\\" VARCHAR(100),\\\"VAL\\\" TIMESTAMP) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode\' ; \\n\\n CREATE FUNCTION \\\"SYNC\\\".\\\"RANDOM_UUID\\\" () RETURNS VARCHAR(100) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL RETURNS NULL ON NULL INPUT EXTERNAL NAME \'com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.randomUUID\' ; \\n\\n &#8211; ---------------------------------------------- \\n&#8211; DDL Statements for tables \\n&#8211; ---------------------------------------------- \\n\\n CREATE TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" (\\\"ADMIN_ID\\\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), \\\"USER_CODE\\\" VARCHAR(255) NOT NULL); \\n\\n CREATE TABLE \\\"APP\\\".\\\"EXP_RUNS\\\" (\\\"RUN_ID\\\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), \\\"MARKER_USERCODE\\\" VARCHAR(255)); \\n\\n &#8211; ---------------------------------------------- \\n&#8211; DDL Statements for keys \\n&#8211; ---------------------------------------------- \\n\\n &#8211; primary\\/unique \\nALTER TABLE \\\"APP\\\".\\\"EXP_RUNS\\\" ADD CONSTRAINT \\\"RUN_PK\\\" PRIMARY KEY (\\\"RUN_ID\\\"); \\n\\n ALTER TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" ADD CONSTRAINT \\\"ADMIN_LIST_USER_CODE_UC\\\" UNIQUE (\\\"USER_CODE\\\"); \\n\\n ALTER TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" ADD CONSTRAINT \\\"ADMIN_PK\\\" PRIMARY KEY (\\\"ADMIN_ID\\\"); \\n\\n &#8211; ---------------------------------------------- \\n&#8211; DDL Statements for triggers \\n&#8211; ---------------------------------------------- \\n\\n CREATE TRIGGER \\\"APP\\\".\\\"ADMIN_LIST_UPDATE_MARKERS\\\" AFTER UPDATE ON \\\"APP\\\".\\\"ADMIN_LIST\\\" REFERENCING OLD AS OLD NEW AS NEW FOR EACH ROW UPDATE EXP_RUNS SET MARKER_USERCODE = LOWER(NEW.USER_CODE) WHERE MARKER_USERCODE = LOWER(OLD.USER_CODE);              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052913\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052913&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052913\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052913_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052913_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 22:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T22:39:40+0000\'\u003e21\\/Jun\\/11 22:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFrom the above output from dblook, I took out the trigger related stuff as follows to see if I could reproduce the problem and I couldn\'t. Following is what I tried to repro the bug. I created a db in 10.5 codeline and took the db to 10.7.1.1 codeline and did upgrade on it and it didn\'t fail. I do not have any data in the tables. I will try to insert some data and make the trigger fire and see if that makes the problem show up\u003c\\/p\u003e\\n\\n\u003cp\u003ejava -Dij.exceptionTrace=true org.apache.derby.tools.ij\u003cbr\\/\u003e\\nconnect \'jdbc:derby:DB105;create=true\';\u003cbr\\/\u003e\\nCREATE TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" (\\\"ADMIN_ID\\\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), \u003cbr\\/\u003e\\n\\t\\\"USER_CODE\\\" VARCHAR(255) NOT NULL);\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE TABLE \\\"APP\\\".\\\"EXP_RUNS\\\" (\\\"RUN_ID\\\" INTEGER NOT NULL GENERATED BY DEFAULT AS\u003cbr\\/\u003e\\n IDENTITY (START WITH 1, INCREMENT BY 1), \\\"MARKER_USERCODE\\\" VARCHAR(255));\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; ----------------------------------------------\u003cbr\\/\u003e\\n&#8211; DDL Statements for keys\u003cbr\\/\u003e\\n&#8211; ----------------------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; primary\\/unique\u003cbr\\/\u003e\\nALTER TABLE \\\"APP\\\".\\\"EXP_RUNS\\\" ADD CONSTRAINT \\\"RUN_PK\\\" PRIMARY KEY (\\\"RUN_ID\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003eALTER TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" ADD CONSTRAINT \\\"ADMIN_LIST_USER_CODE_UC\\\" UNIQUE (\\\"USER_CODE\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003eALTER TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" ADD CONSTRAINT \\\"ADMIN_PK\\\" PRIMARY KEY (\\\"ADMIN_ID\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; ----------------------------------------------\u003cbr\\/\u003e\\n&#8211; DDL Statements for triggers\u003cbr\\/\u003e\\n&#8211; ----------------------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE TRIGGER \\\"APP\\\".\\\"ADMIN_LIST_UPDATE_MARKERS\\\" AFTER UPDATE ON \\\"APP\\\".\\\"ADMIN_LIST\\\"\u003cbr\\/\u003e\\n\\tREFERENCING OLD AS OLD NEW AS NEW FOR EACH ROW \u003cbr\\/\u003e\\n\\tUPDATE EXP_RUNS SET MARKER_USERCODE = LOWER(NEW.USER_CODE) \u003cbr\\/\u003e\\n\\t\\tWHERE MARKER_USERCODE = LOWER(OLD.USER_CODE);\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052913_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052913_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 22:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T22:39:40+0000\'\u003e21\\/Jun\\/11 22:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    From the above output from dblook, I took out the trigger related stuff as follows to see if I could reproduce the problem and I couldn\'t. Following is what I tried to repro the bug. I created a db in 10.5 codeline and took the db to 10.7.1.1 codeline and did upgrade on it and it didn\'t fail. I do not have any data in the tables. I will try to insert some data and make the trigger fire and see if that makes the problem show up \\n\\n java -Dij.exceptionTrace=true org.apache.derby.tools.ij \\nconnect \'jdbc:derby:DB105;create=true\'; \\nCREATE TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" (\\\"ADMIN_ID\\\" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),  \\n\\t\\\"USER_CODE\\\" VARCHAR(255) NOT NULL); \\n\\n CREATE TABLE \\\"APP\\\".\\\"EXP_RUNS\\\" (\\\"RUN_ID\\\" INTEGER NOT NULL GENERATED BY DEFAULT AS \\n IDENTITY (START WITH 1, INCREMENT BY 1), \\\"MARKER_USERCODE\\\" VARCHAR(255)); \\n\\n &#8211; ---------------------------------------------- \\n&#8211; DDL Statements for keys \\n&#8211; ---------------------------------------------- \\n\\n &#8211; primary\\/unique \\nALTER TABLE \\\"APP\\\".\\\"EXP_RUNS\\\" ADD CONSTRAINT \\\"RUN_PK\\\" PRIMARY KEY (\\\"RUN_ID\\\"); \\n\\n ALTER TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" ADD CONSTRAINT \\\"ADMIN_LIST_USER_CODE_UC\\\" UNIQUE (\\\"USER_CODE\\\"); \\n\\n ALTER TABLE \\\"APP\\\".\\\"ADMIN_LIST\\\" ADD CONSTRAINT \\\"ADMIN_PK\\\" PRIMARY KEY (\\\"ADMIN_ID\\\"); \\n\\n &#8211; ---------------------------------------------- \\n&#8211; DDL Statements for triggers \\n&#8211; ---------------------------------------------- \\n\\n CREATE TRIGGER \\\"APP\\\".\\\"ADMIN_LIST_UPDATE_MARKERS\\\" AFTER UPDATE ON \\\"APP\\\".\\\"ADMIN_LIST\\\" \\n\\tREFERENCING OLD AS OLD NEW AS NEW FOR EACH ROW  \\n\\tUPDATE EXP_RUNS SET MARKER_USERCODE = LOWER(NEW.USER_CODE)  \\n\\t\\tWHERE MARKER_USERCODE = LOWER(OLD.USER_CODE);              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052920\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052920&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052920\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13052920_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052920_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 22:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T22:52:21+0000\'\u003e21\\/Jun\\/11 22:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ebrett, can you comment on the \\\"history\\\" of the database that is having the problem as far as you know.  Do you know what\u003cbr\\/\u003e\\nversion derby created it?  From the db itself we can only tell what version the database is currently at.  So it is possible it\u003cbr\\/\u003e\\ncould have been hard upgraded to the current version it is at.   The best chance to get a fix is to somehow reproduce it.  more\u003cbr\\/\u003e\\ninfo might help.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13052920_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052920_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 22:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T22:52:21+0000\'\u003e21\\/Jun\\/11 22:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    brett, can you comment on the \\\"history\\\" of the database that is having the problem as far as you know.  Do you know what \\nversion derby created it?  From the db itself we can only tell what version the database is currently at.  So it is possible it \\ncould have been hard upgraded to the current version it is at.   The best chance to get a fix is to somehow reproduce it.  more \\ninfo might help.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052934\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052934&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052934\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052934_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052934_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 23:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T23:19:38+0000\'\u003e21\\/Jun\\/11 23:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e added code to have extra information about triggers collected and saved persistently. These changes went in 10.7 codeline. In \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e, there was a lot of discussion about how this should be handled to provide upgradability from releases prior to 10.7 to 10.7 and higher releases(The discussion about serialization can be found at \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e with the comments starting at date 02\\/Apr\\/10 through 28\\/May\\/10.). Despite what was agreed on for serialization of the new information, I see that with revision 956763, I have (accidentally) added incorrect serialization code rather than what was discussed and agreed on in the jira. I am pretty certain that is the cause of the problem. I will look into developing a small test case to demonstrate the problem. I think the fix to this would be to change the serialization code to what was agreed upon in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e. At this point, I would like to first work on a simple test case which shows the problem and then try the new serialization code to see if that fixes the problem.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052934_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052934_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 23:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T23:19:38+0000\'\u003e21\\/Jun\\/11 23:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                      DERBY-1482   added code to have extra information about triggers collected and saved persistently. These changes went in 10.7 codeline. In   DERBY-1482  , there was a lot of discussion about how this should be handled to provide upgradability from releases prior to 10.7 to 10.7 and higher releases(The discussion about serialization can be found at   DERBY-1482   with the comments starting at date 02\\/Apr\\/10 through 28\\/May\\/10.). Despite what was agreed on for serialization of the new information, I see that with revision 956763, I have (accidentally) added incorrect serialization code rather than what was discussed and agreed on in the jira. I am pretty certain that is the cause of the problem. I will look into developing a small test case to demonstrate the problem. I think the fix to this would be to change the serialization code to what was agreed upon in   DERBY-1482  . At this point, I would like to first work on a simple test case which shows the problem and then try the new serialization code to see if that fixes the problem.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052937\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052937&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052937\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052937_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052937_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 23:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T23:28:29+0000\'\u003e21\\/Jun\\/11 23:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBrett, I will work on a repro on my own but it will be great help if you happen to have a simple repro script for your db showing the problem. Thanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052937_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052937_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/11 23:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-21T23:28:29+0000\'\u003e21\\/Jun\\/11 23:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Brett, I will work on a repro on my own but it will be great help if you happen to have a simple repro script for your db showing the problem. Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052957\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052957&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052957\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13052957_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052957_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 00:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T00:06:25+0000\'\u003e22\\/Jun\\/11 00:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI still think there may be an architectural problem.  I believe we are counting on upgrade getting rid of invalid SPS\'s during the code that is\u003cbr\\/\u003e\\nexecuting on the stack of this issue.  But it seems that in order to do it, it is reading all the SPS\'s from disk and possibly using bad read\\/write\u003cbr\\/\u003e\\ncode to do so.   At least that is what it looks like for the stacks shown, have not debugged this.  \u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13052957_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052957_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 00:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T00:06:25+0000\'\u003e22\\/Jun\\/11 00:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I still think there may be an architectural problem.  I believe we are counting on upgrade getting rid of invalid SPS\'s during the code that is \\nexecuting on the stack of this issue.  But it seems that in order to do it, it is reading all the SPS\'s from disk and possibly using bad read\\/write \\ncode to do so.   At least that is what it looks like for the stacks shown, have not debugged this.   \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052972\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052972&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052972\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13052972_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052972_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 00:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T00:33:21+0000\'\u003e22\\/Jun\\/11 00:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGood news, I can reproduce the problem fairly easily from a clean install of our application. I have done a run through with \\\"derby.language.logStatementText\\\" turned on so I should be able to supply an ij script to reproduce the problem. Will just take a while to work through the 2.5mb of logs \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eMike, the attached DB has only ever been used with 10.5.1.1.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13052972_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052972_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 00:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T00:33:21+0000\'\u003e22\\/Jun\\/11 00:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Good news, I can reproduce the problem fairly easily from a clean install of our application. I have done a run through with \\\"derby.language.logStatementText\\\" turned on so I should be able to supply an ij script to reproduce the problem. Will just take a while to work through the 2.5mb of logs  . \\n\\n Mike, the attached DB has only ever been used with 10.5.1.1.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052987\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052987&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052987\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052987_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052987_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 01:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T01:33:12+0000\'\u003e22\\/Jun\\/11 01:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI took Brett\'s db and tried upgrading it with 10.7 latest codeline and I see the problem there too. Brett\'s db also failed when I upgraded it to 10.8.1.2\u003c\\/p\u003e\\n\\n\u003cp\u003eIn short, following is where the attached db upgrades without problem\u003cbr\\/\u003e\\ntrunk \u003cbr\\/\u003e\\n10.8 codeline\u003c\\/p\u003e\\n\\n\u003cp\u003eThe upgrade failled with following\u003cbr\\/\u003e\\n10.7.1.1\u003cbr\\/\u003e\\n10.8.1.2\u003cbr\\/\u003e\\n10.7 codeline\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13052987_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052987_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 01:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T01:33:12+0000\'\u003e22\\/Jun\\/11 01:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I took Brett\'s db and tried upgrading it with 10.7 latest codeline and I see the problem there too. Brett\'s db also failed when I upgraded it to 10.8.1.2 \\n\\n In short, following is where the attached db upgrades without problem \\ntrunk  \\n10.8 codeline \\n\\n The upgrade failled with following \\n10.7.1.1 \\n10.8.1.2 \\n10.7 codeline              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13052989\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13052989&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13052989\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13052989_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052989_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 01:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T01:42:20+0000\'\u003e22\\/Jun\\/11 01:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI don\'t think the problem is in the trigger synchonization code that was discussed as part of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e.  That discussion was about\u003cbr\\/\u003e\\nhandling upgrade to the SYSTRIGGERS system table, and that code looked right to me.  It is located in ReferencedColumnsDescriptorImpl .\u003c\\/p\u003e\\n\\n\u003cp\u003eThe overall architecture for handling upgrade problems in SYSSTATEMENTS stored query plans, is that basically we don\'t do any upgrade handling.\u003cbr\\/\u003e\\nCoders are free to change all the read and write routines of stuff that goes into a stored query plan and need not write upgrade dependent code.  What\u003cbr\\/\u003e\\nis supposed to happen is that if you do this you make sure the branch gets a version number bump, and then the upgrade code is supposed to \u003cbr\\/\u003e\\nrecognize the version number bump and invalidate all those stored dynamic query plans.  It looks to me like there is a problem in this area where\u003cbr\\/\u003e\\nin order to do this upgrade work we are actually reading in the \\\"BAD\\\" plans using code that is not ready to do it.  In the current case it looks like\u003cbr\\/\u003e\\nwe are reading in all SPS\'s to find the database metadata rows because we don\'t have a good index.  This code should not be reading the SPS portion\u003cbr\\/\u003e\\nof the row as it is not guaranteed to work.  \u003c\\/p\u003e\\n\\n\u003cp\u003eI think best way to understand this bug:\u003cbr\\/\u003e\\n1) get a repro that we can run through the full upgrade suite.\u003cbr\\/\u003e\\n2) figure out what change has happened to fix this and see if we can backport that to 10.7.  I looked around at the first level of upgrade code and\u003cbr\\/\u003e\\n    nothing jumped out at me in DD_VERSION.java between 10.7 and trunk.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13052989_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13052989_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 01:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T01:42:20+0000\'\u003e22\\/Jun\\/11 01:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I don\'t think the problem is in the trigger synchonization code that was discussed as part of   DERBY-1482  .  That discussion was about \\nhandling upgrade to the SYSTRIGGERS system table, and that code looked right to me.  It is located in ReferencedColumnsDescriptorImpl . \\n\\n The overall architecture for handling upgrade problems in SYSSTATEMENTS stored query plans, is that basically we don\'t do any upgrade handling. \\nCoders are free to change all the read and write routines of stuff that goes into a stored query plan and need not write upgrade dependent code.  What \\nis supposed to happen is that if you do this you make sure the branch gets a version number bump, and then the upgrade code is supposed to  \\nrecognize the version number bump and invalidate all those stored dynamic query plans.  It looks to me like there is a problem in this area where \\nin order to do this upgrade work we are actually reading in the \\\"BAD\\\" plans using code that is not ready to do it.  In the current case it looks like \\nwe are reading in all SPS\'s to find the database metadata rows because we don\'t have a good index.  This code should not be reading the SPS portion \\nof the row as it is not guaranteed to work.   \\n\\n I think best way to understand this bug: \\n1) get a repro that we can run through the full upgrade suite. \\n2) figure out what change has happened to fix this and see if we can backport that to 10.7.  I looked around at the first level of upgrade code and \\n    nothing jumped out at me in DD_VERSION.java between 10.7 and trunk.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13053004\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13053004&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13053004\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13053004_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053004_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 02:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T02:15:56+0000\'\u003e22\\/Jun\\/11 02:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI looked through the changes to the 10.8 branch and nothing looked like it would fix this from the description.  Seems like next step is to binary search 10.8 with builds to figure out what change fixed this.  There are not that many changes, only 28.  The release svn number of the 10.8 release is 1095077.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13053004_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053004_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 02:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T02:15:56+0000\'\u003e22\\/Jun\\/11 02:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I looked through the changes to the 10.8 branch and nothing looked like it would fix this from the description.  Seems like next step is to binary search 10.8 with builds to figure out what change fixed this.  There are not that many changes, only 28.  The release svn number of the 10.8 release is 1095077.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13053009\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13053009&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13053009\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13053009_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053009_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 02:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T02:41:31+0000\'\u003e22\\/Jun\\/11 02:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI looked closer after mamta posted the results for 10.8.  I think the fix to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e may have fixed this issue.  Maybe knut can say whether it is appropriate to backport that whole change to 10.7 or not.  But my guess is that we only need the following change in 10.7 (and probably should \u003cbr\\/\u003e\\nbackport it as far as possible as I think it could fix other issues for upgrade), should verify this one change fixes the problem in 10.7:\u003c\\/p\u003e\\n\\n\u003cp\u003eIn DataDictionaryImpl.java knut made the change I was saying was a problem with the architecture.  You should not be deserializing the\u003cbr\\/\u003e\\nSPS\'s during upgrade\'s attempt to drop\\/invalidate them:\u003cbr\\/\u003e\\n    public List getAllSPSDescriptors()\u003cbr\\/\u003e\\n        throws StandardException\u003cbr\\/\u003e\\n    {\u003cbr\\/\u003e\\n        TabInfoImpl                 ti = getNonCoreTI(SYSSTATEMENTS_CATALOG_NUM)\u003cbr\\/\u003e\\n;\u003c\\/p\u003e\\n\\n\u003cp\u003e        List list = newSList();\u003c\\/p\u003e\\n\\n\u003cp\u003e        \\/\\/ \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e: The compiled plan may not be possible to deserialize\u003cbr\\/\u003e\\n        \\/\\/ during upgrade. Skip the column that contains the compiled plan to\u003cbr\\/\u003e\\n        \\/\\/ prevent deserialization errors when reading the rows. We don\'t care\u003cbr\\/\u003e\\n        \\/\\/ about the value in that column, since this method is only called\u003cbr\\/\u003e\\n        \\/\\/ when we want to drop or invalidate rows in SYSSTATEMENTS.\u003cbr\\/\u003e\\n        FormatableBitSet cols = new FormatableBitSet(\u003cbr\\/\u003e\\n                ti.getCatalogRowFactory().getHeapColumnCount());\u003cbr\\/\u003e\\n        for (int i = 0; i &lt; cols.size(); i++) {\u003cbr\\/\u003e\\n            if (i + 1 == SYSSTATEMENTSRowFactory.SYSSTATEMENTS_CONSTANTSTATE) \u003c\\/p\u003e\\n{\\n                cols.clear(i);\\n            }\\n\u003cp\u003e else \u003c\\/p\u003e\\n{\\n                cols.set(i);\\n            }\\n\u003cp\u003e        }\u003c\\/p\u003e\\n\\n\u003cp\u003e        getDescriptorViaHeap(\u003cbr\\/\u003e\\n                        cols,\u003cbr\\/\u003e\\n                        (ScanQualifier[][]) null,\u003cbr\\/\u003e\\n                        ti,\u003cbr\\/\u003e\\n                        (TupleDescriptor) null,\u003cbr\\/\u003e\\n                        list);\u003c\\/p\u003e\\n\\n\u003cp\u003e        return list;\u003c\\/p\u003e\\n\\n\u003cp\u003e    }\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13053009_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053009_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 02:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T02:41:31+0000\'\u003e22\\/Jun\\/11 02:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I looked closer after mamta posted the results for 10.8.  I think the fix to   DERBY-3870   may have fixed this issue.  Maybe knut can say whether it is appropriate to backport that whole change to 10.7 or not.  But my guess is that we only need the following change in 10.7 (and probably should  \\nbackport it as far as possible as I think it could fix other issues for upgrade), should verify this one change fixes the problem in 10.7: \\n\\n In DataDictionaryImpl.java knut made the change I was saying was a problem with the architecture.  You should not be deserializing the \\nSPS\'s during upgrade\'s attempt to drop\\/invalidate them: \\n    public List getAllSPSDescriptors() \\n        throws StandardException \\n    { \\n        TabInfoImpl                 ti = getNonCoreTI(SYSSTATEMENTS_CATALOG_NUM) \\n; \\n\\n         List list = newSList(); \\n\\n         \\/\\/   DERBY-3870  : The compiled plan may not be possible to deserialize \\n        \\/\\/ during upgrade. Skip the column that contains the compiled plan to \\n        \\/\\/ prevent deserialization errors when reading the rows. We don\'t care \\n        \\/\\/ about the value in that column, since this method is only called \\n        \\/\\/ when we want to drop or invalidate rows in SYSSTATEMENTS. \\n        FormatableBitSet cols = new FormatableBitSet( \\n                ti.getCatalogRowFactory().getHeapColumnCount()); \\n        for (int i = 0; i &lt; cols.size(); i++) { \\n            if (i + 1 == SYSSTATEMENTSRowFactory.SYSSTATEMENTS_CONSTANTSTATE)  \\n{\\n                cols.clear(i);\\n            }\\n  else  \\n{\\n                cols.set(i);\\n            }\\n         } \\n\\n         getDescriptorViaHeap( \\n                        cols, \\n                        (ScanQualifier[][]) null, \\n                        ti, \\n                        (TupleDescriptor) null, \\n                        list); \\n\\n         return list; \\n\\n     }              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13053014\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13053014&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13053014\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13053014_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053014_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 03:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T03:05:51+0000\'\u003e22\\/Jun\\/11 03:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI made the code change suggested by Mike(along with that, had to make couple other minor changes since the signature of getDescriptorViaHeap has been changed by the code) and the upgrade works fine. I am running the existing upgrade suite to see how it runs. Once it\'s done, I will fire the regular junit and derbyall tests. Like Mike said, it will be great to have a repro for this problem which we can add to our upgrade suite which will ensure that this test works fine with various upgrades.Also, it seems like it will be good to backport this to older releases as well. Thanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13053014_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053014_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 03:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T03:05:51+0000\'\u003e22\\/Jun\\/11 03:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I made the code change suggested by Mike(along with that, had to make couple other minor changes since the signature of getDescriptorViaHeap has been changed by the code) and the upgrade works fine. I am running the existing upgrade suite to see how it runs. Once it\'s done, I will fire the regular junit and derbyall tests. Like Mike said, it will be great to have a repro for this problem which we can add to our upgrade suite which will ensure that this test works fine with various upgrades.Also, it seems like it will be good to backport this to older releases as well. Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13053119\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13053119&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13053119\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13053119_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053119_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 08:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T08:17:41+0000\'\u003e22\\/Jun\\/11 08:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYes, this sounds similar to the upgrade problem we came across in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e. I think it\'s safe to backport the whole fix to 10.7, as long as we remember to bump the version number on the branch. If the whole fix cannot be backported, the DataDictionaryImpl changes should be sufficient for this issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13053119_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053119_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 08:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T08:17:41+0000\'\u003e22\\/Jun\\/11 08:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yes, this sounds similar to the upgrade problem we came across in   DERBY-3870  . I think it\'s safe to backport the whole fix to 10.7, as long as we remember to bump the version number on the branch. If the whole fix cannot be backported, the DataDictionaryImpl changes should be sufficient for this issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13053343\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13053343&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13053343\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13053343_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053343_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 16:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T16:59:38+0000\'\u003e22\\/Jun\\/11 16:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI did the partial backport of Knut\'s changes to my 10,7 codeline and with that backport, the full upgrade, junit suite and derbyall suite ran fine. I will attach this partial backport to jira. We do not have a standalone test case yet which we can be added to upgrade suite to test the problem as part of our regression suites.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13053343_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053343_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 16:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T16:59:38+0000\'\u003e22\\/Jun\\/11 16:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I did the partial backport of Knut\'s changes to my 10,7 codeline and with that backport, the full upgrade, junit suite and derbyall suite ran fine. I will attach this partial backport to jira. We do not have a standalone test case yet which we can be added to upgrade suite to test the problem as part of our regression suites.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13053458\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13053458&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13053458\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13053458_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053458_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 20:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T20:35:06+0000\'\u003e22\\/Jun\\/11 20:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTook a while but I\'ve managed to isolate a test case which can be added to the test suite. Appears to come down to triggers which fire other triggers.\u003c\\/p\u003e\\n\\n\u003cp\u003eSteps to reproduce:\u003cbr\\/\u003e\\n1) Run the attached repro.sql in ij using Derby 10.5.1.1 or 10.6.2.1. It will create a database called \\\"test\\\" in the current directory.\u003cbr\\/\u003e\\n2) Attempt to open the resulting database in Derby 10.7.1.1 or 10.8.1.2. With or without \\\"upgrade=true\\\".\u003cbr\\/\u003e\\n3) The error posted above is thrown.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe script is fairly short so I\'ll paste it here too:\u003c\\/p\u003e\\n\\n\u003cp\u003eCONNECT \'jdbc:derby:test;create=true\';\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE TABLE TABLE1 (COL1 VARCHAR(5));\u003cbr\\/\u003e\\nCREATE TABLE TABLE2 (COL2 VARCHAR(5));\u003cbr\\/\u003e\\nCREATE TABLE TABLE3 (COL3 VARCHAR(5));\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE TRIGGER TABLE1_UPDATED AFTER UPDATE ON TABLE1 REFERENCING OLD AS OLD NEW AS NEW FOR EACH ROW UPDATE TABLE2 SET COL2 = NEW.COL1 WHERE COL2 = OLD.COL1;\u003c\\/p\u003e\\n\\n\u003cp\u003eCREATE TRIGGER TABLE2_UPDATED AFTER UPDATE ON TABLE2 REFERENCING NEW AS NEW FOR EACH ROW INSERT INTO TABLE3(COL3) VALUES(\'ccc\');\u003c\\/p\u003e\\n\\n\u003cp\u003einsert into TABLE1(COL1) values (\'aaa\');\u003cbr\\/\u003e\\nUPDATE TABLE1 SET COL1 = \'bbb\';\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"b.mason@adinstruments.com\\\" id=\\\"commentauthor_13053458_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=b.mason%40adinstruments.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"b.mason@adinstruments.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Brett Mason\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053458_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 20:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T20:35:06+0000\'\u003e22\\/Jun\\/11 20:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Took a while but I\'ve managed to isolate a test case which can be added to the test suite. Appears to come down to triggers which fire other triggers. \\n\\n Steps to reproduce: \\n1) Run the attached repro.sql in ij using Derby 10.5.1.1 or 10.6.2.1. It will create a database called \\\"test\\\" in the current directory. \\n2) Attempt to open the resulting database in Derby 10.7.1.1 or 10.8.1.2. With or without \\\"upgrade=true\\\". \\n3) The error posted above is thrown. \\n\\n The script is fairly short so I\'ll paste it here too: \\n\\n CONNECT \'jdbc:derby:test;create=true\'; \\n\\n CREATE TABLE TABLE1 (COL1 VARCHAR(5)); \\nCREATE TABLE TABLE2 (COL2 VARCHAR(5)); \\nCREATE TABLE TABLE3 (COL3 VARCHAR(5)); \\n\\n CREATE TRIGGER TABLE1_UPDATED AFTER UPDATE ON TABLE1 REFERENCING OLD AS OLD NEW AS NEW FOR EACH ROW UPDATE TABLE2 SET COL2 = NEW.COL1 WHERE COL2 = OLD.COL1; \\n\\n CREATE TRIGGER TABLE2_UPDATED AFTER UPDATE ON TABLE2 REFERENCING NEW AS NEW FOR EACH ROW INSERT INTO TABLE3(COL3) VALUES(\'ccc\'); \\n\\n insert into TABLE1(COL1) values (\'aaa\'); \\nUPDATE TABLE1 SET COL1 = \'bbb\';              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13053466\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13053466&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13053466\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13053466_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053466_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 20:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T20:55:30+0000\'\u003e22\\/Jun\\/11 20:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you very much Brett for the reproduction! I verified it in my environment.  I will pick up this issue, add the upgrade  test and look at back porting all or part of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e to the older branches where it may be an issue for other users.  Note: If you build the head of the 10.8 branch it already has the fix because \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e is already fixed in that branch.\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13053466_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13053466_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/11 20:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-22T20:55:30+0000\'\u003e22\\/Jun\\/11 20:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you very much Brett for the reproduction! I verified it in my environment.  I will pick up this issue, add the upgrade  test and look at back porting all or part of   DERBY-3870   to the older branches where it may be an issue for other users.  Note: If you build the head of the 10.8 branch it already has the fix because   DERBY-3870   is already fixed in that branch. \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13054646\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13054646&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13054646\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13054646_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13054646_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jun\\/11 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-24T19:53:06+0000\'\u003e24\\/Jun\\/11 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached is a new test case for this issue. I will go ahead and put it in trunk as the issue is fixed with \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e.  One complication with the test was that it cannot run any phase if the old version is affected by \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4385\\\" title=\\\"Comparision with ALL (subquery) may give wrong result if constant is selected\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4385\\\"\u003e\u003cdel\u003eDERBY-4385\u003c\\/del\u003e\u003c\\/a\u003e, because the database won\'t boot when booting in the post soft upgrade phase and other fixtures are affected.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor the older branches I think I will not backport all of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e, but just the relevant part based on the patch mamta provided for this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13054646_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13054646_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jun\\/11 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-24T19:53:06+0000\'\u003e24\\/Jun\\/11 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached is a new test case for this issue. I will go ahead and put it in trunk as the issue is fixed with   DERBY-3870  .  One complication with the test was that it cannot run any phase if the old version is affected by   DERBY-4385  , because the database won\'t boot when booting in the post soft upgrade phase and other fixtures are affected. \\n\\n For the older branches I think I will not backport all of   DERBY-3870  , but just the relevant part based on the patch mamta provided for this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13055715\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13055715&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13055715\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13055715_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13055715_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jun\\/11 19:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-27T19:40:36+0000\'\u003e27\\/Jun\\/11 19:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is a full patch for 10.7 with tests.  It combines Mamta\'s subset patch of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e, the test for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-5289\\\" title=\\\"Unable to boot 10.5.1.1 database - fails during soft\\/hard upgrade process for a new version number while trying to drop jdbc metadata\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-5289\\\"\u003e\u003cdel\u003eDERBY-5289\u003c\\/del\u003e\u003c\\/a\u003e and also needed to include the test fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-5105\\\" title=\\\"NoSuchMethodError in upgrade tests (testTriggerBasic)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-5105\\\"\u003e\u003cdel\u003eDERBY-5105\u003c\\/del\u003e\u003c\\/a\u003e. Running tests now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13055715_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13055715_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jun\\/11 19:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-27T19:40:36+0000\'\u003e27\\/Jun\\/11 19:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is a full patch for 10.7 with tests.  It combines Mamta\'s subset patch of   DERBY-3870  , the test for   DERBY-5289   and also needed to include the test fix for   DERBY-5105  . Running tests now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13056083\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13056083&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13056083\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13056083_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13056083_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jun\\/11 23:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-27T23:00:15+0000\'\u003e27\\/Jun\\/11 23:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI believe there should be a version bump to whatever version this fix is backported to.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13056083_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13056083_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jun\\/11 23:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-27T23:00:15+0000\'\u003e27\\/Jun\\/11 23:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I believe there should be a version bump to whatever version this fix is backported to.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13056197\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13056197&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13056197\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13056197_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13056197_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jun\\/11 23:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-27T23:31:04+0000\'\u003e27\\/Jun\\/11 23:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am not sure that is required for just this subset of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e as it doesn\'t actually change the compiled plans. The change to DataDictionaryImpl.getAllSPSDescriptiors()  is described with this comment:\u003cbr\\/\u003e\\n+        \\/\\/ \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-5289\\\" title=\\\"Unable to boot 10.5.1.1 database - fails during soft\\/hard upgrade process for a new version number while trying to drop jdbc metadata\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-5289\\\"\u003e\u003cdel\u003eDERBY-5289\u003c\\/del\u003e\u003c\\/a\u003e uses partial fix from\u003cbr\\/\u003e\\n+        \\/\\/ \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e: The compiled plan may not be possible to deserialize \u003cbr\\/\u003e\\n+        \\/\\/ during upgrade. Skip the column that contains the compiled plan to \u003cbr\\/\u003e\\n+        \\/\\/ prevent deserialization errors when reading the rows. We don\'t care \u003cbr\\/\u003e\\n+        \\/\\/ about the value in that column, since this method is only called \u003cbr\\/\u003e\\n+        \\/\\/ when we want to drop or invalidate rows in SYSSTATEMENTS. \u003c\\/p\u003e\\n\\n\u003cp\u003eSo, it is just skipping the compiled plan column in a situation where it is already in upgrade. \u003cbr\\/\u003e\\nAs I understand it, if I backported the full \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e it would contain some actual generated code change that would require a version bump, but this part just affects what happens when we have a version change already,\u003cbr\\/\u003e\\nPlease let me know if I read this incorrectly.\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13056197_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13056197_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jun\\/11 23:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-27T23:31:04+0000\'\u003e27\\/Jun\\/11 23:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am not sure that is required for just this subset of   DERBY-3870   as it doesn\'t actually change the compiled plans. The change to DataDictionaryImpl.getAllSPSDescriptiors()  is described with this comment: \\n+        \\/\\/   DERBY-5289   uses partial fix from \\n+        \\/\\/   DERBY-3870  : The compiled plan may not be possible to deserialize  \\n+        \\/\\/ during upgrade. Skip the column that contains the compiled plan to  \\n+        \\/\\/ prevent deserialization errors when reading the rows. We don\'t care  \\n+        \\/\\/ about the value in that column, since this method is only called  \\n+        \\/\\/ when we want to drop or invalidate rows in SYSSTATEMENTS.  \\n\\n So, it is just skipping the compiled plan column in a situation where it is already in upgrade.  \\nAs I understand it, if I backported the full   DERBY-3870   it would contain some actual generated code change that would require a version bump, but this part just affects what happens when we have a version change already, \\nPlease let me know if I read this incorrectly. \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13056412\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13056412&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13056412\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13056412_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13056412_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jun\\/11 09:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-28T09:30:48+0000\'\u003e28\\/Jun\\/11 09:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think your understanding is correct. The backported subset of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3870\\\" title=\\\"Concurrent Inserts of rows with XML data results in an exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3870\\\"\u003e\u003cdel\u003eDERBY-3870\u003c\\/del\u003e\u003c\\/a\u003e doesn\'t change the compiled plans, so a version bump shouldn\'t be required. If an upgrade fails because the fix is missing, booting again with the fix should make the upgrade code run again even if the version number hasn\'t changed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13056412_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13056412_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jun\\/11 09:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-28T09:30:48+0000\'\u003e28\\/Jun\\/11 09:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think your understanding is correct. The backported subset of   DERBY-3870   doesn\'t change the compiled plans, so a version bump shouldn\'t be required. If an upgrade fails because the fix is missing, booting again with the fix should make the upgrade code run again even if the version number hasn\'t changed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13057341\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13057341&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13057341\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13057341_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13057341_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jun\\/11 16:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-29T16:49:10+0000\'\u003e29\\/Jun\\/11 16:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eResolving this issue.  Backported the code fix all the way to 10.1 branch. Even though just recently exposed with the upgrade from 10.5 to 10.8 the code attempting to read in the stored plans on upgrade has always been there.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13057341_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13057341_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jun\\/11 16:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-29T16:49:10+0000\'\u003e29\\/Jun\\/11 16:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Resolving this issue.  Backported the code fix all the way to 10.1 branch. Even though just recently exposed with the upgrade from 10.5 to 10.8 the code attempting to read in the stored plans on upgrade has always been there.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13685338\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5289?focusedCommentId=13685338&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13685338\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13685338_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13685338_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/13 09:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-06-17T09:19:43+0000\'\u003e17\\/Jun\\/13 09:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;bulk update&#93;\u003c\\/span\u003e Close all resolved issues that haven\'t been updated for more than one year.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13685338_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13685338_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/13 09:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-06-17T09:19:43+0000\'\u003e17\\/Jun\\/13 09:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;bulk update&#93;  Close all resolved issues that haven\'t been updated for more than one year.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520240264236"> 
    <input type="hidden" title="jira.request.server.time" value="258"> 
    <input type="hidden" title="jira.request.id" value="537x94418755x14"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="9"> 
    <input type="hidden" title="db.reads.time.in.ms" value="42"> 
    <input type="hidden" title="db.conns.time.in.ms" value="49"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 537x94418755x14
	          REQUEST TIMESTAMP : [05/Mar/2018:08:57:44 +0000]
	               REQUEST TIME : 0.2580
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 9

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=25, elapsedTotal=42845309, elapsedMin=381196, elapsedMax=10048709, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=29, elapsedTotal=49122181, elapsedMin=402529, elapsedMax=10144272, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>