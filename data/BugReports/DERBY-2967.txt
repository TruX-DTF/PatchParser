<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|4dc3f22950e314540f8bafd9da932f161cf355b3|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"ebf9111f5f0a1d\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-2967"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-2967] Single character does not match high value unicode character with collation TERRITORY_BASED - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-2967] Single character does not match high value unicode character with collation TERRITORY_BASED - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2967">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-2967" href="/jira/browse/DERBY-2967" id="key-val" rel="12374390">DERBY-2967</a></li>
                </ol>
                <h1 id="summary-val">Single character does not match high value unicode character with collation TERRITORY_BASED</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2967"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-2967/DERBY-2967.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-2967/DERBY-2967.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-2967/DERBY-2967.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-2967/DERBY-2967.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.4.1.3 ">10.4.1.3</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.3.2.1" title="10.3.2.1 ">10.3.2.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.1.3" title="10.4.1.3 ">10.4.1.3</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12374390-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>Release Note Needed</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>With TERRITORY_BASED collation '_' does not match the character \uFA2D. It is the same for english or norwegian. FOR collation UCS_BASIC it matches fine. Could you tell me if this is a bug?<br> Here is a program to reproduce.</p> 
                  <p>import java.sql.*;</p> 
                  <p>public class HighCharacter {</p> 
                  <p> public static void main(String args[]) throws Exception</p> { System.out.println("\n Territory no_NO"); Class.forName("org.apache.derby.jdbc.EmbeddedDriver"); Connection conn = DriverManager.getConnection("jdbc:derby:nordb;create=true;territory=no_NO;collation=TERRITORY_BASED"); testLikeWithHighestValidCharacter(conn); conn.close(); System.out.println("\n Territory en_US"); conn = DriverManager.getConnection("jdbc:derby:endb;create=true;territory=en_US;collation=TERRITORY_BASED"); testLikeWithHighestValidCharacter(conn); conn.close(); System.out.println("\n Collation USC_BASIC"); conn = DriverManager.getConnection("jdbc:derby:basicdb;create=true"); testLikeWithHighestValidCharacter(conn); } 
                  <p>public static void testLikeWithHighestValidCharacter(Connection conn) throws SQLException {<br> Statement stmt = conn.createStatement();<br> try </p> { stmt.executeUpdate("drop table t1"); } 
                  <p>catch (SQLException se)</p> {// drop failure ok. } 
                  <p> stmt.executeUpdate("create table t1(c11 int)");<br> stmt.executeUpdate("insert into t1 values 1");</p> 
                  <p> // \uFA2D - the highest valid character according to<br> // Character.isDefined() of JDK 1.4;<br> PreparedStatement ps =<br> conn.prepareStatement("select 1 from t1 where '\uFA2D' like ?");<br> String[] match = </p> { "%", "_", "\uFA2D" } 
                  <p>;</p> 
                  <p> for (int i = 0; i &lt; match.length; i++) </p> { System.out.println("select 1 from t1 where '\\uFA2D' like " + match[i]); ps.setString(1, match[i]); ResultSet rs = ps.executeQuery(); if( rs.next() &amp;&amp; rs.getString(1).equals("1")) System.out.println("PASS"); else System.out.println("FAIL: no match"); rs.close(); } 
                  <p> }<br> }</p> 
                  <p>Mamta made some comments on this issue in the following thread:</p> 
                  <p><a href="http://www.nabble.com/Single-character-does-not-match-high-value-unicode-character-with-collation-TERRITORY_BASED.-Is-this-a-bug-tf4118767.html" class="external-link" rel="nofollow">http://www.nabble.com/Single-character-does-not-match-high-value-unicode-character-with-collation-TERRITORY_BASED.-Is-this-a-bug-tf4118767.html</a></p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-2967?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-2967?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-2967?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-2967?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12367589" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12367589/DERBY2967_Oct11_07_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY2967_Oct11_07_diff.txt:https://issues.apache.org/jira/secure/attachment/12367589/DERBY2967_Oct11_07_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12367589/DERBY2967_Oct11_07_diff.txt" title="Latest  11/Oct/07 18:20 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY2967_Oct11_07_diff.txt:https://issues.apache.org/jira/secure/attachment/12367589/DERBY2967_Oct11_07_diff.txt">DERBY2967_Oct11_07_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-10-11T18:20:50.493Z">11/Oct/07 18:20</time>
                   </dd>
                   <dd class="attachment-size">
                    33 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12367590" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12367590/DERBY2967_Oct11_07_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY2967_Oct11_07_stat.txt:https://issues.apache.org/jira/secure/attachment/12367590/DERBY2967_Oct11_07_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12367590/DERBY2967_Oct11_07_stat.txt" title="Latest  11/Oct/07 18:20 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY2967_Oct11_07_stat.txt:https://issues.apache.org/jira/secure/attachment/12367590/DERBY2967_Oct11_07_stat.txt">DERBY2967_Oct11_07_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-10-11T18:20:50.600Z">11/Oct/07 18:20</time>
                   </dd>
                   <dd class="attachment-size">
                    0.9 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366953" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366953/DERBY2967_offset_based_diff_Oct02_07.txt" draggable="true" data-downloadurl="text/plain:DERBY2967_offset_based_diff_Oct02_07.txt:https://issues.apache.org/jira/secure/attachment/12366953/DERBY2967_offset_based_diff_Oct02_07.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366953/DERBY2967_offset_based_diff_Oct02_07.txt" title="Latest  02/Oct/07 20:24 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY2967_offset_based_diff_Oct02_07.txt:https://issues.apache.org/jira/secure/attachment/12366953/DERBY2967_offset_based_diff_Oct02_07.txt">DERBY2967_offset_based_diff_Oct02_07.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-10-02T20:24:31.600Z">02/Oct/07 20:24</time>
                   </dd>
                   <dd class="attachment-size">
                    46 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366954" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366954/DERBY2967_offset_based_stat_Oct02_07.txt" draggable="true" data-downloadurl="text/plain:DERBY2967_offset_based_stat_Oct02_07.txt:https://issues.apache.org/jira/secure/attachment/12366954/DERBY2967_offset_based_stat_Oct02_07.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366954/DERBY2967_offset_based_stat_Oct02_07.txt" title="Latest  02/Oct/07 20:24 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY2967_offset_based_stat_Oct02_07.txt:https://issues.apache.org/jira/secure/attachment/12366954/DERBY2967_offset_based_stat_Oct02_07.txt">DERBY2967_offset_based_stat_Oct02_07.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-10-02T20:24:31.807Z">02/Oct/07 20:24</time>
                   </dd>
                   <dd class="attachment-size">
                    0.8 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366307" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366307/fullcoll.out" draggable="true" data-downloadurl="application/octet-stream:fullcoll.out:https://issues.apache.org/jira/secure/attachment/12366307/fullcoll.out"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366307/fullcoll.out" title="Latest  20/Sep/07 19:06 - Kathey Marsden" draggable="true" data-downloadurl="application/octet-stream:fullcoll.out:https://issues.apache.org/jira/secure/attachment/12366307/fullcoll.out">fullcoll.out</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-20T19:06:22.175Z">20/Sep/07 19:06</time>
                   </dd>
                   <dd class="attachment-size">
                    185 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366376" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366376/patch2_setOffset_fullcoll.out" draggable="true" data-downloadurl="application/octet-stream:patch2_setOffset_fullcoll.out:https://issues.apache.org/jira/secure/attachment/12366376/patch2_setOffset_fullcoll.out"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366376/patch2_setOffset_fullcoll.out" title="Latest  21/Sep/07 16:31 - Kathey Marsden" draggable="true" data-downloadurl="application/octet-stream:patch2_setOffset_fullcoll.out:https://issues.apache.org/jira/secure/attachment/12366376/patch2_setOffset_fullcoll.out">patch2_setOffset_fullcoll.out</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-21T16:31:28.140Z">21/Sep/07 16:31</time>
                   </dd>
                   <dd class="attachment-size">
                    1.54 MB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366320" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366320/patch2_with_setOffset_diff_Sep2007.txt" draggable="true" data-downloadurl="text/plain:patch2_with_setOffset_diff_Sep2007.txt:https://issues.apache.org/jira/secure/attachment/12366320/patch2_with_setOffset_diff_Sep2007.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366320/patch2_with_setOffset_diff_Sep2007.txt" title="Latest  21/Sep/07 00:11 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:patch2_with_setOffset_diff_Sep2007.txt:https://issues.apache.org/jira/secure/attachment/12366320/patch2_with_setOffset_diff_Sep2007.txt">patch2_with_setOffset_diff_Sep2007.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-21T00:11:32.706Z">21/Sep/07 00:11</time>
                   </dd>
                   <dd class="attachment-size">
                    31 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366321" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366321/patch2_with_setOffset_stat_Sep2007.txt" draggable="true" data-downloadurl="text/plain:patch2_with_setOffset_stat_Sep2007.txt:https://issues.apache.org/jira/secure/attachment/12366321/patch2_with_setOffset_stat_Sep2007.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366321/patch2_with_setOffset_stat_Sep2007.txt" title="Latest  21/Sep/07 00:11 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:patch2_with_setOffset_stat_Sep2007.txt:https://issues.apache.org/jira/secure/attachment/12366321/patch2_with_setOffset_stat_Sep2007.txt">patch2_with_setOffset_stat_Sep2007.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-21T00:11:32.873Z">21/Sep/07 00:11</time>
                   </dd>
                   <dd class="attachment-size">
                    0.5 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12370425" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12370425/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12370425/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12370425/releaseNote.html" title="Latest  28/Nov/07 17:48 - Kathey Marsden" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12370425/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-11-28T17:48:43.833Z">28/Nov/07 17:48</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12370238" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12370238/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12370238/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12370238/releaseNote.html" title=" 26/Nov/07 21:03 - Kathey Marsden" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12370238/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-11-26T21:03:27.311Z">26/Nov/07 21:03</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12365823" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12365823/step1_iteratorbased_Sep1507_diff.txt" draggable="true" data-downloadurl="text/plain:step1_iteratorbased_Sep1507_diff.txt:https://issues.apache.org/jira/secure/attachment/12365823/step1_iteratorbased_Sep1507_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12365823/step1_iteratorbased_Sep1507_diff.txt" title="Latest  14/Sep/07 08:25 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:step1_iteratorbased_Sep1507_diff.txt:https://issues.apache.org/jira/secure/attachment/12365823/step1_iteratorbased_Sep1507_diff.txt">step1_iteratorbased_Sep1507_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-14T08:25:06.368Z">14/Sep/07 08:25</time>
                   </dd>
                   <dd class="attachment-size">
                    26 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12365824" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12365824/step1_iteratorbased_Sep1507_stat.txt" draggable="true" data-downloadurl="text/plain:step1_iteratorbased_Sep1507_stat.txt:https://issues.apache.org/jira/secure/attachment/12365824/step1_iteratorbased_Sep1507_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12365824/step1_iteratorbased_Sep1507_stat.txt" title="Latest  14/Sep/07 08:25 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:step1_iteratorbased_Sep1507_stat.txt:https://issues.apache.org/jira/secure/attachment/12365824/step1_iteratorbased_Sep1507_stat.txt">step1_iteratorbased_Sep1507_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-14T08:25:06.505Z">14/Sep/07 08:25</time>
                   </dd>
                   <dd class="attachment-size">
                    0.3 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12365572" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12365572/temp_diff.txt" draggable="true" data-downloadurl="text/plain:temp_diff.txt:https://issues.apache.org/jira/secure/attachment/12365572/temp_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12365572/temp_diff.txt" title="Latest  11/Sep/07 16:11 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:temp_diff.txt:https://issues.apache.org/jira/secure/attachment/12365572/temp_diff.txt">temp_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-11T16:11:45.952Z">11/Sep/07 16:11</time>
                   </dd>
                   <dd class="attachment-size">
                    26 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12365573" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12365573/temp_stat.txt" draggable="true" data-downloadurl="text/plain:temp_stat.txt:https://issues.apache.org/jira/secure/attachment/12365573/temp_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12365573/temp_stat.txt" title="Latest  11/Sep/07 16:11 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:temp_stat.txt:https://issues.apache.org/jira/secure/attachment/12365573/temp_stat.txt">temp_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-11T16:11:46.113Z">11/Sep/07 16:11</time>
                   </dd>
                   <dd class="attachment-size">
                    0.3 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12363344" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12363344/TestFrench.java" draggable="true" data-downloadurl="text/plain:TestFrench.java:https://issues.apache.org/jira/secure/attachment/12363344/TestFrench.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12363344/TestFrench.java" title="Latest  07/Aug/07 17:48 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:TestFrench.java:https://issues.apache.org/jira/secure/attachment/12363344/TestFrench.java">TestFrench.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-08-07T17:48:52.839Z">07/Aug/07 17:48</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12363442" data-issue-id="12374390" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12363442/TestNorway.java" draggable="true" data-downloadurl="text/plain:TestNorway.java:https://issues.apache.org/jira/secure/attachment/12363442/TestNorway.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12363442/TestNorway.java" title="Latest  08/Aug/07 20:58 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:TestNorway.java:https://issues.apache.org/jira/secure/attachment/12363442/TestNorway.java">TestNorway.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-08-08T20:58:41.198Z">08/Aug/07 20:58</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12345445_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-1478: Add built in language based ordering and like processing to Derby"> <a href="/jira/browse/DERBY-1478" data-issue-key="DERBY-1478" class="issue-link link-title resolution">DERBY-1478</a> <span class="link-summary">Add built in language based ordering and like processing to Derby</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12381565_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3166: Update docs to address code improvments to LIKE (see Derby-2967)"> <a href="/jira/browse/DERBY-3166" data-issue-key="DERBY-3166" class="issue-link link-title resolution">DERBY-3166</a> <span class="link-summary">Update docs to address code improvments to LIKE (see Derby-2967)</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_mamtas" rel="mamtas" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mamta A. Satoor&quot;,&quot;emailAddress&quot;:&quot;msatoor@gmail.com&quot;,&quot;username&quot;:&quot;mamtas&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mamtas"></span></span> Mamta A. Satoor </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_kmarsden" rel="kmarsden" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Kathey Marsden&quot;,&quot;emailAddress&quot;:&quot;kmarsdenderby@sbcglobal.net&quot;,&quot;username&quot;:&quot;kmarsden&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="kmarsden"></span></span> Kathey Marsden </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="23/Jul/07 16:55"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2007-07-23T16:55:18+0000">23/Jul/07 16:55</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="28/Nov/07 18:34"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2007-11-28T18:34:18+0000">28/Nov/07 18:34</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="26/Nov/07 20:21"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2007-11-26T20:21:12+0000">26/Nov/07 20:21</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2967?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-2967?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12518204\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12518204&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12518204\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12518204_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518204_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/07 17:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-07T17:47:58+0000\'\u003e07\\/Aug\\/07 17:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am looking at the current behavior where _ matches a single collation element instead of a single character and trying to understand what the new behavior would be.    Here is an example of the current behavior:  I insert into a table two rows:\u003c\\/p\u003e\\n\\n\u003cp\u003e agrave = \\\"\\\\u00C0\\\";\u003cbr\\/\u003e\\nagraveCombined =\\\"A\\\\u0300\\\";\u003c\\/p\u003e\\n\\n\u003cp\u003eagrave is one character, agraveCombined is two but they match for = and like processing with a French TERRITORY_BASED database.  Here are some queries.\u003c\\/p\u003e\\n\\n\u003cp\u003ejdbc:derby:frdb (TERRITORY_BASED - current)\u003cbr\\/\u003e\\n2 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC = \\u00C0\u003cbr\\/\u003e\\n2 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE \\u00C0\u003cbr\\/\u003e\\n2 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE A_\u003cbr\\/\u003e\\n0 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE _\u003cbr\\/\u003e\\n2 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE __\u003c\\/p\u003e\\n\\n\u003cp\u003ejdbc:derby:regdb (UCS_BASIC)\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC = \\u00C0\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE \\u00C0\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE A_\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE _\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE __\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eSo if _ is really supposed to match a single character and not a single collation element,\u003cbr\\/\u003e\\nI think the results should be as follows:\u003cbr\\/\u003e\\njdbc:derby:frdb (TERRITORY_BASED)\u003cbr\\/\u003e\\n2 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC = \\u00C0\u003cbr\\/\u003e\\n2 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE \\u00C0\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE A_  (agraveCombined)\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE _  (agrave)\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE __ (agraveCombined)\u003c\\/p\u003e\\n\\n\u003cp\u003eDoes that sound right?  How I might implement this I have no idea but just trying to get my head around how it should behave.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n\\n\u003cp\u003eSee attached program TestFrench.java if you want to run.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12518204_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518204_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/07 17:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-07T17:47:58+0000\'\u003e07\\/Aug\\/07 17:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am looking at the current behavior where _ matches a single collation element instead of a single character and trying to understand what the new behavior would be.    Here is an example of the current behavior:  I insert into a table two rows: \\n\\n  agrave = \\\"\\\\u00C0\\\"; \\nagraveCombined =\\\"A\\\\u0300\\\"; \\n\\n agrave is one character, agraveCombined is two but they match for = and like processing with a French TERRITORY_BASED database.  Here are some queries. \\n\\n jdbc:derby:frdb (TERRITORY_BASED - current) \\n2 rows matching SELECT COUNT  FROM T WHERE VC = \\u00C0 \\n2 rows matching SELECT COUNT  FROM T WHERE VC LIKE \\u00C0 \\n2 rows matching SELECT COUNT  FROM T WHERE VC LIKE A_ \\n0 rows matching SELECT COUNT  FROM T WHERE VC LIKE _ \\n2 rows matching SELECT COUNT  FROM T WHERE VC LIKE __ \\n\\n jdbc:derby:regdb (UCS_BASIC) \\n1 rows matching SELECT COUNT  FROM T WHERE VC = \\u00C0 \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE \\u00C0 \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE A_ \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE _ \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE __ \\n\\n\\n So if _ is really supposed to match a single character and not a single collation element, \\nI think the results should be as follows: \\njdbc:derby:frdb (TERRITORY_BASED) \\n2 rows matching SELECT COUNT  FROM T WHERE VC = \\u00C0 \\n2 rows matching SELECT COUNT  FROM T WHERE VC LIKE \\u00C0 \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE A_  (agraveCombined) \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE _  (agrave) \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE __ (agraveCombined) \\n\\n Does that sound right?  How I might implement this I have no idea but just trying to get my head around how it should behave. \\n\\n Kathey \\n\\n See attached program TestFrench.java if you want to run.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12518262\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12518262&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12518262\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12518262_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518262_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/07 21:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-07T21:25:50+0000\'\u003e07\\/Aug\\/07 21:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI would say neither (existing or proposed)  is correct, though only after looking at your example.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe existing code is wrong because it is converting the \'_\' to a collation element then skipping that number of collation elements?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe proposed results are wrong because in the French locale agraveCombined =\\\"A\\\\u0300\\\" is a single character.\u003cbr\\/\u003e\\nI assume the \\\\u0300 is a \'Combining character\'.\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch03.pdf#G30602\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch03.pdf#G30602\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThus I think the results should be:\u003c\\/p\u003e\\n\\n\u003cp\u003e0 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE A_\u003cbr\\/\u003e\\n2 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE _ (agrave,agraveCombined)\u003cbr\\/\u003e\\n0 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE __\u003c\\/p\u003e\\n\\n\u003cp\u003eAs for implementing it, I think one has to use the getOffset\\/setOffset method on CollationElementIterator.\u003c\\/p\u003e\\n\\n\u003cp\u003eE.g. along the lines of this to skip a character. The real solution would be more than this but you get the idea.\u003c\\/p\u003e\\n\\n\u003cp\u003e   if (patternChar == \'_\')\u003cbr\\/\u003e\\n       iterator.setOffset(iterator.getOffset() + 1);\u003c\\/p\u003e\\n\\n\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12518262_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518262_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/07 21:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-07T21:25:50+0000\'\u003e07\\/Aug\\/07 21:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I would say neither (existing or proposed)  is correct, though only after looking at your example. \\n\\n The existing code is wrong because it is converting the \'_\' to a collation element then skipping that number of collation elements? \\n\\n The proposed results are wrong because in the French locale agraveCombined =\\\"A\\\\u0300\\\" is a single character. \\nI assume the \\\\u0300 is a \'Combining character\'. \\n\\n  http:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch03.pdf#G30602  \\n\\n Thus I think the results should be: \\n\\n 0 rows matching SELECT COUNT  FROM T WHERE VC LIKE A_ \\n2 rows matching SELECT COUNT  FROM T WHERE VC LIKE _ (agrave,agraveCombined) \\n0 rows matching SELECT COUNT  FROM T WHERE VC LIKE __ \\n\\n As for implementing it, I think one has to use the getOffset\\/setOffset method on CollationElementIterator. \\n\\n E.g. along the lines of this to skip a character. The real solution would be more than this but you get the idea. \\n\\n    if (patternChar == \'_\') \\n       iterator.setOffset(iterator.getOffset() + 1); \\n\\n\\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12518264\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12518264&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12518264\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12518264_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518264_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/07 21:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-07T21:41:38+0000\'\u003e07\\/Aug\\/07 21:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBoth String.length() and SQL LENGTH say agraveCombined =\\\"A\\\\u0300\\\" is two characters.  Is this result wrong?\u003cbr\\/\u003e\\nij&gt; select length(VC) from t;\u003cbr\\/\u003e\\n1\u003cbr\\/\u003e\\n-----------\u003cbr\\/\u003e\\n1\u003cbr\\/\u003e\\n2\u003c\\/p\u003e\\n\\n\u003cp\u003eDo you think SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC = \\u00C0  should still match two rows?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12518264_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518264_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/07 21:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-07T21:41:38+0000\'\u003e07\\/Aug\\/07 21:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Both String.length() and SQL LENGTH say agraveCombined =\\\"A\\\\u0300\\\" is two characters.  Is this result wrong? \\nij&gt; select length(VC) from t; \\n1 \\n----------- \\n1 \\n2 \\n\\n Do you think SELECT COUNT  FROM T WHERE VC = \\u00C0  should still match two rows?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12518269\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12518269&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12518269\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12518269_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518269_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/07 21:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-07T21:53:14+0000\'\u003e07\\/Aug\\/07 21:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eString.length() returning two matches its definition so it seems to be correct.\u003c\\/p\u003e\\n\\n\u003cp\u003eIs the SQL fLENGTH unction a standard function, does that say anything?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Do you think SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC = \\u00C0 should still match two rows? \u003cbr\\/\u003e\\nGiven what you said yes, I thought this issue was about LIKE and _ though.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12518269_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518269_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/07 21:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-07T21:53:14+0000\'\u003e07\\/Aug\\/07 21:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    String.length() returning two matches its definition so it seems to be correct. \\n\\n Is the SQL fLENGTH unction a standard function, does that say anything? \\n\\n &gt; Do you think SELECT COUNT  FROM T WHERE VC = \\u00C0 should still match two rows?  \\nGiven what you said yes, I thought this issue was about LIKE and _ though. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12518548\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12518548&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12518548\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12518548_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518548_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/07 20:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-08T20:58:14+0000\'\u003e08\\/Aug\\/07 20:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDan said:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;As for implementing it, I think one has to use the getOffset\\/setOffset method on CollationElementIterator.\u003cbr\\/\u003e\\n&gt;E.g. along the lines of this to skip a character. The real solution would be more than this but you get the idea.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;   if (patternChar == \'_\')\u003cbr\\/\u003e\\n&gt;       iterator.setOffset(iterator.getOffset() + 1);\u003c\\/p\u003e\\n\\n\u003cp\u003eSo for the Norwegian aa, which is one collation element but two characters, I think this code would set us back to the same offset where we started, since getOffset always returns the first character of the collation element.  That would leave us I think in an unpleasant loop.  \u003c\\/p\u003e\\n\\n\u003cp\u003eAttaching TestNorway.java showing current behavior for Norwegian aa.\u003c\\/p\u003e\\n\\n\u003cp\u003edefault strength:TERTIARY\u003cbr\\/\u003e\\ndefault decomposition:NO_DECOMPOSITION\u003cbr\\/\u003e\\naa.length()2\u003cbr\\/\u003e\\njdbc:derby:nordb\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC = aa\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE aa\u003cbr\\/\u003e\\n0 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE a_\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE _\u003cbr\\/\u003e\\n0 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE __\u003cbr\\/\u003e\\njdbc:derby:regdb\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC = aa\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE aa\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE a_\u003cbr\\/\u003e\\n0 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE _\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE __\u003c\\/p\u003e\\n\\n\u003cp\u003eI think the correct results for nordb should be:\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC = aa\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE aa\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE a_\u003cbr\\/\u003e\\n0 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE _\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE __\u003c\\/p\u003e\\n\\n\u003cp\u003eI am going to try to look at another database product to compare behavior so I can better understand what needs to be implemented, because I am still a bit fuzzy on all this.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12518548_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518548_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/07 20:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-08T20:58:14+0000\'\u003e08\\/Aug\\/07 20:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dan said: \\n\\n &gt;As for implementing it, I think one has to use the getOffset\\/setOffset method on CollationElementIterator. \\n&gt;E.g. along the lines of this to skip a character. The real solution would be more than this but you get the idea. \\n\\n &gt;   if (patternChar == \'_\') \\n&gt;       iterator.setOffset(iterator.getOffset() + 1); \\n\\n So for the Norwegian aa, which is one collation element but two characters, I think this code would set us back to the same offset where we started, since getOffset always returns the first character of the collation element.  That would leave us I think in an unpleasant loop.   \\n\\n Attaching TestNorway.java showing current behavior for Norwegian aa. \\n\\n default strength:TERTIARY \\ndefault decomposition:NO_DECOMPOSITION \\naa.length()2 \\njdbc:derby:nordb \\n1 rows matching SELECT COUNT  FROM T WHERE VC = aa \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE aa \\n0 rows matching SELECT COUNT  FROM T WHERE VC LIKE a_ \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE _ \\n0 rows matching SELECT COUNT  FROM T WHERE VC LIKE __ \\njdbc:derby:regdb \\n1 rows matching SELECT COUNT  FROM T WHERE VC = aa \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE aa \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE a_ \\n0 rows matching SELECT COUNT  FROM T WHERE VC LIKE _ \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE __ \\n\\n I think the correct results for nordb should be: \\n1 rows matching SELECT COUNT  FROM T WHERE VC = aa \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE aa \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE a_ \\n0 rows matching SELECT COUNT  FROM T WHERE VC LIKE _ \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE __ \\n\\n I am going to try to look at another database product to compare behavior so I can better understand what needs to be implemented, because I am still a bit fuzzy on all this. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12518575\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12518575&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12518575\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12518575_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518575_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/07 23:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-08T23:20:25+0000\'\u003e08\\/Aug\\/07 23:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHow about this to skip one logical character (not tested, just guessing from the apis)\u003c\\/p\u003e\\n\\n\u003cp\u003eint currentChar = iterator.getOffset();\u003cbr\\/\u003e\\ndo {\u003cbr\\/\u003e\\n  iterator.next();\u003cbr\\/\u003e\\n} while (iterator.getOffset() == currentChar)\u003c\\/p\u003e\\n\\n\u003cp\u003eE.g. Norwegian  \'aa\' maps to a single collation element so getOffset() can only point to one of the characters in the underlying String.\u003cbr\\/\u003e\\nOnce getPosition changes it must have moved past the aa\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12518575_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518575_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/07 23:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-08T23:20:25+0000\'\u003e08\\/Aug\\/07 23:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    How about this to skip one logical character (not tested, just guessing from the apis) \\n\\n int currentChar = iterator.getOffset(); \\ndo { \\n  iterator.next(); \\n} while (iterator.getOffset() == currentChar) \\n\\n E.g. Norwegian  \'aa\' maps to a single collation element so getOffset() can only point to one of the characters in the underlying String. \\nOnce getPosition changes it must have moved past the aa \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12519120\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12519120&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12519120\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12519120_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12519120_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Aug\\/07 21:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-10T21:08:06+0000\'\u003e10\\/Aug\\/07 21:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBelow are the results run against DB2 v8.2 with  UCA400_NO collation.  _ doesn\'t seem to match to a single character in DB2, but it doesn\'t quite seem to be collation element either.\u003c\\/p\u003e\\n\\n\u003cp\u003eHighCharacter.java\u003c\\/p\u003e\\n\\n\u003cp\u003e Territory no_NO\u003cbr\\/\u003e\\nselect 1 from t1 where \'\\\\uFA2D\' like %\u003cbr\\/\u003e\\nPASS\u003cbr\\/\u003e\\nselect 1 from t1 where \'\\\\uFA2D\' like _\u003cbr\\/\u003e\\nFAIL: no match\u003cbr\\/\u003e\\nselect 1 from t1 where \'\\\\uFA2D\' like ?\u003cbr\\/\u003e\\nPASS\u003c\\/p\u003e\\n\\n\u003cp\u003e Territory en_US\u003cbr\\/\u003e\\nselect 1 from t1 where \'\\\\uFA2D\' like %\u003cbr\\/\u003e\\nPASS\u003cbr\\/\u003e\\nselect 1 from t1 where \'\\\\uFA2D\' like _\u003cbr\\/\u003e\\nFAIL: no match\u003cbr\\/\u003e\\nselect 1 from t1 where \'\\\\uFA2D\' like ?\u003cbr\\/\u003e\\nPASS\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTestFrench.java\u003c\\/p\u003e\\n\\n\\n\u003cp\u003ejdbc:db2:\\/\\/localhost:50000\\/frdb\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC = \\u00C0\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE \\u00C0\u003cbr\\/\u003e\\n0 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE A_\u003cbr\\/\u003e\\n0 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE _\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE __\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTestNorway.java\u003c\\/p\u003e\\n\\n\u003cp\u003ejdbc:db2:\\/\\/localhost:50000\\/nordb\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC = aa\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE aa\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE a_\u003cbr\\/\u003e\\n0 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE _\u003cbr\\/\u003e\\n1 rows matching SELECT COUNT\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e FROM T WHERE VC LIKE __\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12519120_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12519120_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Aug\\/07 21:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-10T21:08:06+0000\'\u003e10\\/Aug\\/07 21:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Below are the results run against DB2 v8.2 with  UCA400_NO collation.  _ doesn\'t seem to match to a single character in DB2, but it doesn\'t quite seem to be collation element either. \\n\\n HighCharacter.java \\n\\n  Territory no_NO \\nselect 1 from t1 where \'\\\\uFA2D\' like % \\nPASS \\nselect 1 from t1 where \'\\\\uFA2D\' like _ \\nFAIL: no match \\nselect 1 from t1 where \'\\\\uFA2D\' like ? \\nPASS \\n\\n  Territory en_US \\nselect 1 from t1 where \'\\\\uFA2D\' like % \\nPASS \\nselect 1 from t1 where \'\\\\uFA2D\' like _ \\nFAIL: no match \\nselect 1 from t1 where \'\\\\uFA2D\' like ? \\nPASS \\n\\n\\n TestFrench.java \\n\\n\\n jdbc:db2:\\/\\/localhost:50000\\/frdb \\n1 rows matching SELECT COUNT  FROM T WHERE VC = \\u00C0 \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE \\u00C0 \\n0 rows matching SELECT COUNT  FROM T WHERE VC LIKE A_ \\n0 rows matching SELECT COUNT  FROM T WHERE VC LIKE _ \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE __ \\n\\n\\n TestNorway.java \\n\\n jdbc:db2:\\/\\/localhost:50000\\/nordb \\n1 rows matching SELECT COUNT  FROM T WHERE VC = aa \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE aa \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE a_ \\n0 rows matching SELECT COUNT  FROM T WHERE VC LIKE _ \\n1 rows matching SELECT COUNT  FROM T WHERE VC LIKE __ \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12519145\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12519145&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12519145\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12519145_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12519145_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Aug\\/07 22:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-10T22:28:18+0000\'\u003e10\\/Aug\\/07 22:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUnassigning myself from this issue for now.  It seems to me that the behavior is not all that straightforward.  I think I\'d rather leave to someone more familiar with collation to fix.  I hope the test cases are helpful.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12519145_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12519145_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Aug\\/07 22:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-10T22:28:18+0000\'\u003e10\\/Aug\\/07 22:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Unassigning myself from this issue for now.  It seems to me that the behavior is not all that straightforward.  I think I\'d rather leave to someone more familiar with collation to fix.  I hope the test cases are helpful. \\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12522039\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12522039&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12522039\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12522039_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12522039_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Aug\\/07 06:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-23T06:21:29+0000\'\u003e23\\/Aug\\/07 06:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI spent some time on this Jira entry to explore Dan\'s suggestion for _ search in a string\u003cbr\\/\u003e\\n*************\u003cbr\\/\u003e\\n--Note that the iterator object is of type CollationElementIterator. \u003cbr\\/\u003e\\nint currentChar = iterator.getOffset(); \u003cbr\\/\u003e\\ndo { \u003cbr\\/\u003e\\n  iterator.next(); \u003cbr\\/\u003e\\n} while (iterator.getOffset() == currentChar) \u003cbr\\/\u003e\\n*************\u003c\\/p\u003e\\n\\n\u003cp\u003eI believe the code suggested by Dan above will do the trick but I am not sure how to fit that logic in the current code inside the iapi.types.Like.like method (method starting at line 258) which is where the current implementation for _ resides. \u003c\\/p\u003e\\n\\n\u003cp\u003eSome background information on the classes and methods involved in this discussion: There are 2 like methods inside WorkHorseForCollatorDatatypes(which handles collation sensitive methods for character string types with territory based collation) and they only differ in the sense that one accepts the escape DVD while the other one does not. Both these methods call the like method(starting at line 96) in iapi.types.Like. This like method ends up calling another like method in the same class (starting at line 258) which provides the actual implementation. Notice, that this like method does not work with CollationElementIterator. Instead, it expects the caller to send the int array containing the collation elements for string to be searched into, pattern to be looked and escape sequence. This is done for performance reasons. We do not want to construct the collation element arrary for the strings during every call to like. Instead, we want to construct it once and reuse it every subsequent time. And hence, the current implementation does not work with CollationElementIterator.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs a solution, I am thinking that may be I should have another int array in WorkHorseForCollatorDatatypes, which will keep track of the starting position of the collation elements for each of the characters. We already have an int array, collationElementsForString, which holds the collation elements for all the characters that this WorkHorseForCollatorDatatypes holds. If we knew where the new collation elements start in collationElementsForString, we can just advance to the next character\'s collation element starting position when we find a _. \u003c\\/p\u003e\\n\\n\u003cp\u003eLet me know if anyone has any feedback on this approach or has any other suggestions on fixing the problem.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12522039_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12522039_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Aug\\/07 06:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-23T06:21:29+0000\'\u003e23\\/Aug\\/07 06:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I spent some time on this Jira entry to explore Dan\'s suggestion for _ search in a string \\n************* \\n--Note that the iterator object is of type CollationElementIterator.  \\nint currentChar = iterator.getOffset();  \\ndo {  \\n  iterator.next();  \\n} while (iterator.getOffset() == currentChar)  \\n************* \\n\\n I believe the code suggested by Dan above will do the trick but I am not sure how to fit that logic in the current code inside the iapi.types.Like.like method (method starting at line 258) which is where the current implementation for _ resides.  \\n\\n Some background information on the classes and methods involved in this discussion: There are 2 like methods inside WorkHorseForCollatorDatatypes(which handles collation sensitive methods for character string types with territory based collation) and they only differ in the sense that one accepts the escape DVD while the other one does not. Both these methods call the like method(starting at line 96) in iapi.types.Like. This like method ends up calling another like method in the same class (starting at line 258) which provides the actual implementation. Notice, that this like method does not work with CollationElementIterator. Instead, it expects the caller to send the int array containing the collation elements for string to be searched into, pattern to be looked and escape sequence. This is done for performance reasons. We do not want to construct the collation element arrary for the strings during every call to like. Instead, we want to construct it once and reuse it every subsequent time. And hence, the current implementation does not work with CollationElementIterator. \\n\\n As a solution, I am thinking that may be I should have another int array in WorkHorseForCollatorDatatypes, which will keep track of the starting position of the collation elements for each of the characters. We already have an int array, collationElementsForString, which holds the collation elements for all the characters that this WorkHorseForCollatorDatatypes holds. If we knew where the new collation elements start in collationElementsForString, we can just advance to the next character\'s collation element starting position when we find a _.  \\n\\n Let me know if anyone has any feedback on this approach or has any other suggestions on fixing the problem.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12523073\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12523073&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12523073\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12523073_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12523073_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Aug\\/07 18:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-27T18:07:58+0000\'\u003e27\\/Aug\\/07 18:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAre there any numbers for the performance benefit seen by using this int arrays over CollationElementIterator?\u003c\\/p\u003e\\n\\n\u003cp\u003eOne potential problem with the arrays is that the array is fully populated even if the value could be disqualified on the first character, that would seem to degrade performance, not improve it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12523073_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12523073_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Aug\\/07 18:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-27T18:07:58+0000\'\u003e27\\/Aug\\/07 18:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Are there any numbers for the performance benefit seen by using this int arrays over CollationElementIterator? \\n\\n One potential problem with the arrays is that the array is fully populated even if the value could be disqualified on the first character, that would seem to degrade performance, not improve it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12523324\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12523324&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12523324\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12523324_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12523324_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Aug\\/07 19:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-28T19:41:27+0000\'\u003e28\\/Aug\\/07 19:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI do not have any numbers for the performance results for int array vs CollationElementIterator. I searched Derby dev list and found few postings about how constructing an array before hand may not be not necessary for a check which would fail within say first few characters. I also found \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2699\\\" title=\\\"performance of like in territory based collation databases may be improved by changing way collation elements are calculated.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2699\\\"\u003e\u003cdel\u003eDERBY-2699\u003c\\/del\u003e\u003c\\/a\u003e (performance of like in territory based collation databases may be improved by changing way collation elements are calculated.) which also talks about the same issue as your comment \\\"One potential problem with the arrays is that the array is fully populated even if the value could be disqualified on the first character, that would seem to degrade performance, not improve it. \\\" \u003c\\/p\u003e\\n\\n\u003cp\u003eI will start investigating into using CollationElementIterator rather than an int array. This will fix both this Jira entry and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2699\\\" title=\\\"performance of like in territory based collation databases may be improved by changing way collation elements are calculated.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2699\\\"\u003e\u003cdel\u003eDERBY-2699\u003c\\/del\u003e\u003c\\/a\u003e and possibly \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2698\\\" title=\\\"caching collation elements in WorkHorseForCollatorDatatypes may improve performance.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2698\\\"\u003eDERBY-2698\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf anyone has any comments please let me know.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12523324_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12523324_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Aug\\/07 19:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-28T19:41:27+0000\'\u003e28\\/Aug\\/07 19:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I do not have any numbers for the performance results for int array vs CollationElementIterator. I searched Derby dev list and found few postings about how constructing an array before hand may not be not necessary for a check which would fail within say first few characters. I also found   DERBY-2699   (performance of like in territory based collation databases may be improved by changing way collation elements are calculated.) which also talks about the same issue as your comment \\\"One potential problem with the arrays is that the array is fully populated even if the value could be disqualified on the first character, that would seem to degrade performance, not improve it. \\\"  \\n\\n I will start investigating into using CollationElementIterator rather than an int array. This will fix both this Jira entry and   DERBY-2699   and possibly  DERBY-2698 . \\n\\n If anyone has any comments please let me know.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12526508\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12526508&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12526508\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12526508_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12526508_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Sep\\/07 16:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-11T16:11:46+0000\'\u003e11\\/Sep\\/07 16:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have attached an intermediate patch. This patch rather than building the collation elements in advance, builds it as needed. The crucial parts that are left are\u003cbr\\/\u003e\\n1)Implementing code for pattern \'%a\', ie when % (which is match 0\\/more characters) is found, match remaining pattern after it.\u003cbr\\/\u003e\\n2)The other item left is understanding the behavior of CollationElementIterator.next and previous. I have started a thread \\\"Question about next() and previous() on CollationElementIterator\\\" on that issue and hope to get some feedback on it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12526508_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12526508_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Sep\\/07 16:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-11T16:11:46+0000\'\u003e11\\/Sep\\/07 16:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have attached an intermediate patch. This patch rather than building the collation elements in advance, builds it as needed. The crucial parts that are left are \\n1)Implementing code for pattern \'%a\', ie when % (which is match 0\\/more characters) is found, match remaining pattern after it. \\n2)The other item left is understanding the behavior of CollationElementIterator.next and previous. I have started a thread \\\"Question about next() and previous() on CollationElementIterator\\\" on that issue and hope to get some feedback on it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12527398\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12527398&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12527398\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12527398_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12527398_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/07 08:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-14T08:13:02+0000\'\u003e14\\/Sep\\/07 08:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI talked with Dan briefly on my last patch(temp_diff.txt) and found that I was unaware of the fact that 2 or more different characters in a territory can have same collation element(s) value associated with them. \u003cbr\\/\u003e\\n***********************\\\\\u003cbr\\/\u003e\\n(\u003ca href=\\\"http:\\/\\/www.unicode.org\\/reports\\/tr10\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.unicode.org\\/reports\\/tr10\\/\u003c\\/a\u003e Section 1.9.2 Non-Goals The Default Unicode Collation Element Table explicitly does not provide for the following features:\u003cbr\\/\u003e\\nreversibility: from a Collation Element you are not guaranteed that you can recover the original character. \u003cbr\\/\u003e\\n***********************\\/\u003c\\/p\u003e\\n\\n\u003cp\u003eSo, taking a fictious territory as an eg, it is possible that metacharacter \'_\'\'s collation element could have same value as say character \'a\'. Because of this, my approach to construct a CollationElementIterator on the entire pattern string will not yield expected results. I have worked on a new patch based on this fact and will post it in another couple minutes. Please disregard the earlier patch temp_diff.txt and temp_stat.txt\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12527398_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12527398_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/07 08:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-14T08:13:02+0000\'\u003e14\\/Sep\\/07 08:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I talked with Dan briefly on my last patch(temp_diff.txt) and found that I was unaware of the fact that 2 or more different characters in a territory can have same collation element(s) value associated with them.  \\n***********************\\\\ \\n( http:\\/\\/www.unicode.org\\/reports\\/tr10\\/  Section 1.9.2 Non-Goals The Default Unicode Collation Element Table explicitly does not provide for the following features: \\nreversibility: from a Collation Element you are not guaranteed that you can recover the original character.  \\n***********************\\/ \\n\\n So, taking a fictious territory as an eg, it is possible that metacharacter \'_\'\'s collation element could have same value as say character \'a\'. Because of this, my approach to construct a CollationElementIterator on the entire pattern string will not yield expected results. I have worked on a new patch based on this fact and will post it in another couple minutes. Please disregard the earlier patch temp_diff.txt and temp_stat.txt              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12527405\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12527405&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12527405\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12527405_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12527405_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/07 08:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-14T08:25:06+0000\'\u003e14\\/Sep\\/07 08:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a new patch (svn diff is attached as step1_iteratorbased_Sep1507_diff.txt and svn stat -q is attached as step1_iteratorbased_Sep1507_stat.txt). This patch does not build the collation elements for the value string in advance, instead it fetches the collation element from the CollationElementIterator as needed for the value string. In addition, it does not build CollationElementIterator on entire pattern string. The metacharacters in pattern are compated using their unicode values. Rest of the characters in pattern will have CollationElementIterator associated with them. In other words, for the pattern string, collation elements are used only for non-metacharacters. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe new logic for LIKE implementation is as follows(This is really the javadoc for the iapi.types.Like:like(CollationElementIterator valueIterator, String pattern, String escape, RuleBasedCollator collator)). I do have 2 questions that I would appreciate help on. The 2 questions are at the end of the nice \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e javadoc below.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\/**\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eThis method will be called for character string types with territory\u003c\\/li\u003e\\n\\t\u003cli\u003ebased collation. The logic of the method is as follows\u003c\\/li\u003e\\n\\t\u003cli\u003eA)If pattern string or value Iterator is null, then this method will\u003c\\/li\u003e\\n\\t\u003cli\u003ereturn null. Because the results of LIKE can\'t be established in such\u003c\\/li\u003e\\n\\t\u003cli\u003ea situation.\u003c\\/li\u003e\\n\\t\u003cli\u003eB)Intialize the pointer into pattern string to 0\u003c\\/li\u003e\\n\\t\u003cli\u003eC)Start the loop\u003c\\/li\u003e\\n\\t\u003cli\u003ea)Check if we have reached the end of value Iterator. If yes\u003c\\/li\u003e\\n\\t\u003cli\u003e1)Check if we have reached the end of pattern string. If yes\u003c\\/li\u003e\\n\\t\u003cli\u003ereturn TRUE.\u003c\\/li\u003e\\n\\t\u003cli\u003e2)Check if we pattern string only has % left. If yes, then\u003c\\/li\u003e\\n\\t\u003cli\u003ereturn TRUE.\u003c\\/li\u003e\\n\\t\u003cli\u003e3)If a1) and a2) not true, then return FALSE.\u003c\\/li\u003e\\n\\t\u003cli\u003ec)Start looking at pattern where the pointer is pointing and keep\u003c\\/li\u003e\\n\\t\u003cli\u003egoing until you find end of pattern or one of the metacharacters\u003c\\/li\u003e\\n\\t\u003cli\u003eie %, * or escape character.\u003c\\/li\u003e\\n\\t\u003cli\u003ed)Get a CollationElementIterator for the non-metacharacters found in\u003c\\/li\u003e\\n\\t\u003cli\u003estep c(using the Collator passed to this method. The same Collator\u003c\\/li\u003e\\n\\t\u003cli\u003ewas used to construct a CollationElementIterator for value string).\u003c\\/li\u003e\\n\\t\u003cli\u003eand make sure that they match the collation elements found in\u003c\\/li\u003e\\n\\t\u003cli\u003evalue CollationElementIterator. A mismatch would require us to\u003c\\/li\u003e\\n\\t\u003cli\u003ereturn FALSE from this method.\u003c\\/li\u003e\\n\\t\u003cli\u003ee)Do the checks performed by step Ca).\u003c\\/li\u003e\\n\\t\u003cli\u003ef)Check what metacharacter is the offset in pattern pointing to\u003c\\/li\u003e\\n\\t\u003cli\u003e1)If it is escape character, then convert the next character in\u003c\\/li\u003e\\n\\t\u003cli\u003epattern to it\'s collation element(s) and compare those collation\u003c\\/li\u003e\\n\\t\u003cli\u003eelements to elements in valueIterator. If they do not match,\u003c\\/li\u003e\\n\\t\u003cli\u003ewe need to return FALSE.\u003c\\/li\u003e\\n\\t\u003cli\u003e2)If it is not escape character, then check if it is a _. If yes,\u003c\\/li\u003e\\n\\t\u003cli\u003ethen skip all the collation elements in valueIterator\u003c\\/li\u003e\\n\\t\u003cli\u003ecorresponding to the next character in value.\u003c\\/li\u003e\\n\\t\u003cli\u003e3)If it is not escape character or a \'_\' character, then check if\u003c\\/li\u003e\\n\\t\u003cli\u003eit is a \'%\'. If not, then go back to step C). If yes, then check\u003c\\/li\u003e\\n\\t\u003cli\u003eif we have reached the end of pattern. If end of pattern, then we\u003c\\/li\u003e\\n\\t\u003cli\u003ecan simply return from this method with TRUE return value. I have\u003c\\/li\u003e\\n\\t\u003cli\u003ea question Q1(written below). If the code in question in Q1 is not\u003c\\/li\u003e\\n\\t\u003cli\u003esatisified and we have not reached end of pattern, then check if\u003c\\/li\u003e\\n\\t\u003cli\u003erest of the characters in pattern are all \'%\'. If yes, then we\u003c\\/li\u003e\\n\\t\u003cli\u003ecan simply return from this method wil TRUE return value. I have\u003c\\/li\u003e\\n\\t\u003cli\u003equestion Q2 at this point\u003c\\/li\u003e\\n\\t\u003cli\u003eQ1)I copied the code from the old method implementation which at\u003c\\/li\u003e\\n\\t\u003cli\u003ethis point checks if we have reached the end of valueIterator\u003c\\/li\u003e\\n\\t\u003cli\u003ethen we should return TRUE value. I think that is incorrect\u003c\\/li\u003e\\n\\t\u003cli\u003ebecause we have reached the end of valueIterator, but there\u003c\\/li\u003e\\n\\t\u003cli\u003emight be more characters in the pattern that we have not\u003c\\/li\u003e\\n\\t\u003cli\u003ematched yet.\u003c\\/li\u003e\\n\\t\u003cli\u003eQ2)What would be the best way to implement the logic to handle\u003c\\/li\u003e\\n\\t\u003cli\u003evalueIterator for a % found in the pattern.\u003c\\/li\u003e\\n\\t\u003cli\u003eg)Go back to step C).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12527405_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12527405_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/07 08:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-14T08:25:06+0000\'\u003e14\\/Sep\\/07 08:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a new patch (svn diff is attached as step1_iteratorbased_Sep1507_diff.txt and svn stat -q is attached as step1_iteratorbased_Sep1507_stat.txt). This patch does not build the collation elements for the value string in advance, instead it fetches the collation element from the CollationElementIterator as needed for the value string. In addition, it does not build CollationElementIterator on entire pattern string. The metacharacters in pattern are compated using their unicode values. Rest of the characters in pattern will have CollationElementIterator associated with them. In other words, for the pattern string, collation elements are used only for non-metacharacters.  \\n\\n The new logic for LIKE implementation is as follows(This is really the javadoc for the iapi.types.Like:like(CollationElementIterator valueIterator, String pattern, String escape, RuleBasedCollator collator)). I do have 2 questions that I would appreciate help on. The 2 questions are at the end of the nice   javadoc below. \\n\\n \\t\\/** \\n \\n\\t This method will be called for character string types with territory \\n\\t based collation. The logic of the method is as follows \\n\\t A)If pattern string or value Iterator is null, then this method will \\n\\t return null. Because the results of LIKE can\'t be established in such \\n\\t a situation. \\n\\t B)Intialize the pointer into pattern string to 0 \\n\\t C)Start the loop \\n\\t a)Check if we have reached the end of value Iterator. If yes \\n\\t 1)Check if we have reached the end of pattern string. If yes \\n\\t return TRUE. \\n\\t 2)Check if we pattern string only has % left. If yes, then \\n\\t return TRUE. \\n\\t 3)If a1) and a2) not true, then return FALSE. \\n\\t c)Start looking at pattern where the pointer is pointing and keep \\n\\t going until you find end of pattern or one of the metacharacters \\n\\t ie %, * or escape character. \\n\\t d)Get a CollationElementIterator for the non-metacharacters found in \\n\\t step c(using the Collator passed to this method. The same Collator \\n\\t was used to construct a CollationElementIterator for value string). \\n\\t and make sure that they match the collation elements found in \\n\\t value CollationElementIterator. A mismatch would require us to \\n\\t return FALSE from this method. \\n\\t e)Do the checks performed by step Ca). \\n\\t f)Check what metacharacter is the offset in pattern pointing to \\n\\t 1)If it is escape character, then convert the next character in \\n\\t pattern to it\'s collation element(s) and compare those collation \\n\\t elements to elements in valueIterator. If they do not match, \\n\\t we need to return FALSE. \\n\\t 2)If it is not escape character, then check if it is a _. If yes, \\n\\t then skip all the collation elements in valueIterator \\n\\t corresponding to the next character in value. \\n\\t 3)If it is not escape character or a \'_\' character, then check if \\n\\t it is a \'%\'. If not, then go back to step C). If yes, then check \\n\\t if we have reached the end of pattern. If end of pattern, then we \\n\\t can simply return from this method with TRUE return value. I have \\n\\t a question Q1(written below). If the code in question in Q1 is not \\n\\t satisified and we have not reached end of pattern, then check if \\n\\t rest of the characters in pattern are all \'%\'. If yes, then we \\n\\t can simply return from this method wil TRUE return value. I have \\n\\t question Q2 at this point \\n\\t Q1)I copied the code from the old method implementation which at \\n\\t this point checks if we have reached the end of valueIterator \\n\\t then we should return TRUE value. I think that is incorrect \\n\\t because we have reached the end of valueIterator, but there \\n\\t might be more characters in the pattern that we have not \\n\\t matched yet. \\n\\t Q2)What would be the best way to implement the logic to handle \\n\\t valueIterator for a % found in the pattern. \\n\\t g)Go back to step C). \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12527628\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12527628&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12527628\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12527628_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12527628_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/07 20:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-14T20:44:55+0000\'\u003e14\\/Sep\\/07 20:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe patch submitted by me will not work on Sun\'s jdks (I have tested Sun jdk142 and jdk15) because of the issues found with next() and previous() calls on CollationElementIterator with Sun\'s jdks (more info about this can be found at \u003ca href=\\\"http:\\/\\/www.nabble.com\\/Question-about-next%28%29-and-previous%28%29-on-CollationElementIterator.-tf4418042.html#a12601408\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.nabble.com\\/Question-about-next%28%29-and-previous%28%29-on-CollationElementIterator.-tf4418042.html#a12601408\u003c\\/a\u003e)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12527628_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12527628_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/07 20:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-14T20:44:55+0000\'\u003e14\\/Sep\\/07 20:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The patch submitted by me will not work on Sun\'s jdks (I have tested Sun jdk142 and jdk15) because of the issues found with next() and previous() calls on CollationElementIterator with Sun\'s jdks (more info about this can be found at  http:\\/\\/www.nabble.com\\/Question-about-next%28%29-and-previous%28%29-on-CollationElementIterator.-tf4418042.html#a12601408 )              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12528131\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12528131&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12528131\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12528131_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12528131_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Sep\\/07 19:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-17T19:45:55+0000\'\u003e17\\/Sep\\/07 19:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMamta, will running with Sun JVM\'s cause the existing functionality to regress in some way or will it just mean that the bug you are fixing won\'t be fixed when running with Sun JVM\'s?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12528131_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12528131_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Sep\\/07 19:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-17T19:45:55+0000\'\u003e17\\/Sep\\/07 19:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mamta, will running with Sun JVM\'s cause the existing functionality to regress in some way or will it just mean that the bug you are fixing won\'t be fixed when running with Sun JVM\'s?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12528994\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12528994&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12528994\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12528994_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12528994_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Sep\\/07 06:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-20T06:09:40+0000\'\u003e20\\/Sep\\/07 06:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey, I am trying to see if I can rewrite my code using getOffset\\/setOffset rather than previous on CollationElementIterator. Assuming getOffset\\/setOffset work correctly with Sun JVM, we may be able to have a fix that works for Sun JVM as well. I am working on the changes right now and will post a patch if the changes seem to work fine.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12528994_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12528994_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Sep\\/07 06:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-20T06:09:40+0000\'\u003e20\\/Sep\\/07 06:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey, I am trying to see if I can rewrite my code using getOffset\\/setOffset rather than previous on CollationElementIterator. Assuming getOffset\\/setOffset work correctly with Sun JVM, we may be able to have a fix that works for Sun JVM as well. I am working on the changes right now and will post a patch if the changes seem to work fine.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12529212\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12529212&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12529212\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12529212_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529212_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Sep\\/07 19:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-20T19:06:22+0000\'\u003e20\\/Sep\\/07 19:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI ran lang\\/FullCollationTest with the existing patch. I did not do a full analysis because I know there is a new patch coming, but I did seem some null pointer exceptions and an error which look like they may be an issue with the patch. I am attaching the results for your reference.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12529212_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529212_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Sep\\/07 19:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-20T19:06:22+0000\'\u003e20\\/Sep\\/07 19:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I ran lang\\/FullCollationTest with the existing patch. I did not do a full analysis because I know there is a new patch coming, but I did seem some null pointer exceptions and an error which look like they may be an issue with the patch. I am attaching the results for your reference. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12529295\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12529295&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12529295\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12529295_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529295_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/07 00:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-21T00:11:32+0000\'\u003e21\\/Sep\\/07 00:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey, I am pretty certain that the patch(which I am attaching to this jira entry, patch name patch2_with_setOffset_diff_Sep2007.txt)  I am working on will take of quite a few null ptr exceptions if not all. This patch is an attempt to use getOffset\\/setOffset rather than next\\/previous on CollationElementIterator because of the bug in Sun\'s JVM. The patch is not ready for commit and has quite a few printlns but I think that should not interfere with junit run. I am running some tests of my own right now and will fire the full collation test once those tests are done. In the mean time, if you happen have some cycles to try the full collation test on your machine with this collation patch, I will greatly appreciate that. Thanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12529295_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529295_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/07 00:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-21T00:11:32+0000\'\u003e21\\/Sep\\/07 00:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey, I am pretty certain that the patch(which I am attaching to this jira entry, patch name patch2_with_setOffset_diff_Sep2007.txt)  I am working on will take of quite a few null ptr exceptions if not all. This patch is an attempt to use getOffset\\/setOffset rather than next\\/previous on CollationElementIterator because of the bug in Sun\'s JVM. The patch is not ready for commit and has quite a few printlns but I think that should not interfere with junit run. I am running some tests of my own right now and will fire the full collation test once those tests are done. In the mean time, if you happen have some cycles to try the full collation test on your machine with this collation patch, I will greatly appreciate that. Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12529483\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12529483&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12529483\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12529483_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529483_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/07 16:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-21T16:31:28+0000\'\u003e21\\/Sep\\/07 16:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMamta, thanks for all your work on this. You are right, the NPE\'s are gone!  I still see an exception:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) testWildcardAsEscape(org.apache.derbyTesting.functionTests.tests.lang.DynamicLikeOptimizationTest)java.sql.SQLException: Escape character must be followed by escape character, \'_\', or \'%\'. It cannot be followed by any other character or be at the end of the pattern.\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:202)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:391)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:1574)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:81)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1315)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:618)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeQuery(EmbedStatement.java:153)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.lang.DynamicLikeOptimizationTest.testWildcardAsEscape(DynamicLikeOptimizationTest.java:181)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:95)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\nCaused by: ERROR 22025: Escape character must be followed by escape character, \'_\', or \'%\'. It cannot be followed by any other character or be at the end of the pattern.\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:280)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.types.Like.like(Like.java:382)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.types.WorkHorseForCollatorDatatypes.like(WorkHorseForCollatorDatatypes.java:183)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.types.CollatorSQLChar.like(CollatorSQLChar.java:186)\u003cbr\\/\u003e\\n\\tat org.apache.derby.exe.ac9423444ax0115x2607x4835x00003dcd3cb40.e1(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.reflect.DirectCall.invoke(ReflectGeneratedClass.java:141)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.openCore(ProjectRestrictResultSet.java:156)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.openCore(ProjectRestrictResultSet.java:168)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.open(BasicNoPutResultSetImpl.java:248)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:370)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1225)\u003cbr\\/\u003e\\n\\t... 44 more\u003c\\/p\u003e\\n\\n\u003cp\u003eI have not reviewed the code yet. I will do that after you post the new patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12529483_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529483_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/07 16:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-21T16:31:28+0000\'\u003e21\\/Sep\\/07 16:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mamta, thanks for all your work on this. You are right, the NPE\'s are gone!  I still see an exception: \\n\\n 1) testWildcardAsEscape(org.apache.derbyTesting.functionTests.tests.lang.DynamicLikeOptimizationTest)java.sql.SQLException: Escape character must be followed by escape character, \'_\', or \'%\'. It cannot be followed by any other character or be at the end of the pattern. \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:202) \\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:391) \\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:1574) \\n\\tat org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:81) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1315) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:618) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeQuery(EmbedStatement.java:153) \\n\\tat org.apache.derbyTesting.functionTests.tests.lang.DynamicLikeOptimizationTest.testWildcardAsEscape(DynamicLikeOptimizationTest.java:181) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) \\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:95) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\nCaused by: ERROR 22025: Escape character must be followed by escape character, \'_\', or \'%\'. It cannot be followed by any other character or be at the end of the pattern. \\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:280) \\n\\tat org.apache.derby.iapi.types.Like.like(Like.java:382) \\n\\tat org.apache.derby.iapi.types.WorkHorseForCollatorDatatypes.like(WorkHorseForCollatorDatatypes.java:183) \\n\\tat org.apache.derby.iapi.types.CollatorSQLChar.like(CollatorSQLChar.java:186) \\n\\tat org.apache.derby.exe.ac9423444ax0115x2607x4835x00003dcd3cb40.e1(Unknown Source) \\n\\tat org.apache.derby.impl.services.reflect.DirectCall.invoke(ReflectGeneratedClass.java:141) \\n\\tat org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.openCore(ProjectRestrictResultSet.java:156) \\n\\tat org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.openCore(ProjectRestrictResultSet.java:168) \\n\\tat org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.open(BasicNoPutResultSetImpl.java:248) \\n\\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:370) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1225) \\n\\t... 44 more \\n\\n I have not reviewed the code yet. I will do that after you post the new patch. \\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12529493\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12529493&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12529493\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12529493_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529493_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/07 16:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-21T16:55:59+0000\'\u003e21\\/Sep\\/07 16:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey, I am looking at the escape character problem. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12529493_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529493_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/07 16:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-21T16:55:59+0000\'\u003e21\\/Sep\\/07 16:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey, I am looking at the escape character problem.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12531903\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12531903&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12531903\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12531903_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12531903_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Oct\\/07 20:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-02T20:24:31+0000\'\u003e02\\/Oct\\/07 20:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching patch DERBY2967_offset_based_diff_Oct02_07.txt which fixes \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2967\\\" title=\\\"Single character does not match high value unicode character with collation TERRITORY_BASED\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2967\\\"\u003e\u003cdel\u003eDERBY-2967\u003c\\/del\u003e\u003c\\/a\u003e for both IBM\'s jdks and Sun\'s jdks. The fix involves using CollationElementIterator to look through collation elements of a character string as needed rather than fetching them all into an array before hand. With the later approach, we may end up getting all the collation elements for a \u003cbr\\/\u003e\\nreally large string when we will be looking at say only first few of those collation elements because we have found a mismatch between value and pattern.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe majority of the changes have gone into iapi.types.Like class. This class has two different implementation of SQL LIKE clause. One implementation is for UCS_BASIC character strings and the other one is for territory based character strings. The territory based implementation of LIKE clause has been changed in this patch. From a top level, this method does one to one comparison of collation elements for string that is being searched and the pattern that is being searched in that string. This one-to-one comparison is done for non-metacharacters in the pattern. As soon as we find a metacharacter in the pattern string, we do special processing depending on what kind of metacharacter we are dealing with.\u003cbr\\/\u003e\\n1)Taking the simplest case of escape character as the metacharacter. If the user has provided an escape character, then as soon as we encounter the escape character in the pattern string, we check if the character following it is a metacharacter or\u003cbr\\/\u003e\\nnot. If not, we throw an exception. If the character indeed is a metacharacter, we convert that metacharacter into it\'s collation element(s) and look for the exact match of those collation element(s) into the CollationElementIterator for the value string.\u003cbr\\/\u003e\\n2)Taking the next simplest case of _. When we find a _ in the pattern string, we advance in the CollationElementIterator for the value string by one character. This is where it gets tricky ie what is defined as one character in a particular locale. In Norwegian locale, \'b\' is a single character and so are \'aa\'. Both of these character strings translate into single collation element. But in Norwegian locale, evne though \'\\\\uFA2D\' is one character, it translates into 2 collation elements. This advancing by one character and eating the right number of collation elements is implemented in a new method in Like.java class and the new method\'s name is advnaceByOne(CollationElementIterator).\u003cbr\\/\u003e\\n3)Moving on to metacharacter %. A % can be satisfied by 0 to any number of characters in the value string. In order to determine how many characters will satisfy %, we have to start with 0 character and keep eating more and more characters until we find a match for the remaining pattern string and value string or until we reach end of value string but still non % characters left in pattern string. In the later case, we know we have ended up with a mismatch and we return a FALSE from the method.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe javadoc(from Like.java\'s like(CollationElementIterator, int, String, int, String, RuleBasedCollator)) describes the implementation in little more detail and I have copied that here for reference. Note that in the following method, valueIterator is the CollationElementIterator for the character string that we are doing a search into.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e***************\u003cb\u003ebeginning of javadoc\u003c\\/b\u003e****************\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eThis method will be called for character string types with territory\u003c\\/li\u003e\\n\\t\u003cli\u003ebased collation to see if valueIterator matches the passed pattern\u003c\\/li\u003e\\n\\t\u003cli\u003estring. The logic of the method is described in following steps (I\u003c\\/li\u003e\\n\\t\u003cli\u003ehave tried to put the step identifiers in the code below for reference).\u003c\\/li\u003e\\n\\t\u003cli\u003eA)If pattern string or value Iterator is null, then this method will\u003c\\/li\u003e\\n\\t\u003cli\u003ereturn null because the results of LIKE can\'t be established in such\u003c\\/li\u003e\\n\\t\u003cli\u003ea situation.\u003c\\/li\u003e\\n\\t\u003cli\u003eB)Start the loop\u003c\\/li\u003e\\n\\t\u003cli\u003ea)Check the lengths of valueIterator and pattern string to see if it\u003c\\/li\u003e\\n\\t\u003cli\u003eis time to return with TRUE\\/FALSE. The exact details of these checks\u003c\\/li\u003e\\n\\t\u003cli\u003ecan be found in the javadoc method of\u003c\\/li\u003e\\n\\t\u003cli\u003echeckLengths(CollationElementIterator, String, int)\u003c\\/li\u003e\\n\\t\u003cli\u003eb)Start looking at pattern where the pointer is pointing and keep\u003c\\/li\u003e\\n\\t\u003cli\u003egoing until you find end of pattern or you find one of the\u003c\\/li\u003e\\n\\t\u003cli\u003emetacharacters ie %, * or optional escape character.\u003c\\/li\u003e\\n\\t\u003cli\u003ec)Get a CollationElementIterator for the non-metacharacters found in\u003c\\/li\u003e\\n\\t\u003cli\u003estep b(using the Collator passed to this method. The same Collator\u003c\\/li\u003e\\n\\t\u003cli\u003ewas used to construct valueIterator).\u003c\\/li\u003e\\n\\t\u003cli\u003ed)Make sure that collation elements found in step c) match the\u003c\\/li\u003e\\n\\t\u003cli\u003ecollation elements in valueIterator. A mismatch would require us to\u003c\\/li\u003e\\n\\t\u003cli\u003ereturn FALSE from this method.\u003c\\/li\u003e\\n\\t\u003cli\u003ee)Check again the lengths of valueIterator and pattern string to see\u003c\\/li\u003e\\n\\t\u003cli\u003eif it is time toreturn with TRUE\\/FALSE. The exact details of these\u003c\\/li\u003e\\n\\t\u003cli\u003echecks can be found in the javadoc method of\u003c\\/li\u003e\\n\\t\u003cli\u003echeckLengths(CollationElementIterator, String, int)\u003c\\/li\u003e\\n\\t\u003cli\u003ef)If we are still here and didn\'t return from this method as a result\u003c\\/li\u003e\\n\\t\u003cli\u003eof step Be) then it means that we have to deal with the\u003c\\/li\u003e\\n\\t\u003cli\u003emetacharacter found in step Bc). Check what metacharacter is the\u003c\\/li\u003e\\n\\t\u003cli\u003eoffset in pattern pointing to\u003c\\/li\u003e\\n\\t\u003cli\u003e1)If user has provided escape character and pattern is pointing to\u003c\\/li\u003e\\n\\t\u003cli\u003eone right now, then convert the next character in pattern to it\'s\u003c\\/li\u003e\\n\\t\u003cli\u003ecollation element(s) and compare those collation elements to\u003c\\/li\u003e\\n\\t\u003cli\u003eelements in valueIterator. If they do not match, we need to return\u003c\\/li\u003e\\n\\t\u003cli\u003eFALSE.\u003c\\/li\u003e\\n\\t\u003cli\u003e2)If it is not escape character, then check if it is a \'%\'. If it is,\u003c\\/li\u003e\\n\\t\u003cli\u003ethen increment the pointer in the pattern string by 1 and then\u003c\\/li\u003e\\n\\t\u003cli\u003efollow the involved algorithm below\u003c\\/li\u003e\\n\\t\u003cli\u003eFirst check if we have reached the end of pattern. If yes, then we\u003c\\/li\u003e\\n\\t\u003cli\u003ecan simply return from this method with TRUE return value. If we\u003c\\/li\u003e\\n\\t\u003cli\u003ehave not reached end of pattern, then check if rest of the\u003c\\/li\u003e\\n\\t\u003cli\u003echaracters in pattern are all \'%\'. If yes, then we can simply\u003c\\/li\u003e\\n\\t\u003cli\u003ereturn from this method wil TRUE return value. If not all %, then\u003c\\/li\u003e\\n\\t\u003cli\u003etake rest of the pattern string and see if it matches rest of the\u003c\\/li\u003e\\n\\t\u003cli\u003evalueIterator(will be implemented by recursively calling this\u003c\\/li\u003e\\n\\t\u003cli\u003emethod). If no match, then do the step Ba). If it is not time to\u003c\\/li\u003e\\n\\t\u003cli\u003ereturn because of step Ba), then advance the pointer in\u003c\\/li\u003e\\n\\t\u003cli\u003evalueIterator by one character and see if the valueIterator now\u003c\\/li\u003e\\n\\t\u003cli\u003ematches the rest of the pattern string. Keep going until we find\u003c\\/li\u003e\\n\\t\u003cli\u003ethe match or mismatch.\u003c\\/li\u003e\\n\\t\u003cli\u003e3)If it is not escape character or %, then check if it is a _. If\u003c\\/li\u003e\\n\\t\u003cli\u003eyes, then skip all the collation elements in valueIterator\u003c\\/li\u003e\\n\\t\u003cli\u003ecorresponding to the next character.\u003c\\/li\u003e\\n\\t\u003cli\u003eg)Go back to step B).\u003cbr\\/\u003e\\n***************\u003cb\u003eend of javadoc\u003c\\/b\u003e****************\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI have changed SQLChar and WorkHorseForCollatorDatatypes to call this new method for territory based character string types in Like rather than the old implementation (I have removed the old implementation code from Like.java)\u003c\\/p\u003e\\n\\n\u003cp\u003eI have added a new test in CollationTest. The existing tests for LIKE in CollationTest2 have been very handy during my testing of the code changes.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn addition to the above tests, I have run full collation test under Norwegian territory. Following is the analysis of some of the test failures and fixes to subset of them.\u003c\\/p\u003e\\n\\n\u003cp\u003e1)There are few existing tests that use character string \'aa\' in their testing. These existing test were written to run in UCS_BASIC collation and hence \'aa\' didn\'t cause a problem. But now when we run the full collation tests with say Norwegian territory based locale, the character string \'aa\' exhibit different behavior(because in Norwegian, it is treated as one character) and hence give the false impression of test failures. To avoid having to scan these false failures every time one runs full\u003cbr\\/\u003e\\ncollation tests with Norwegian territory, I have changed the test data in some tests. This has bring the test failures far lower when all the tests are run with territory based locale rather than UCS_BASIC.\u003c\\/p\u003e\\n\\n\u003cp\u003e2)Few other failures in full collation test will be the error message string mismatch when running the tests in UCS_BASIC \u003cbr\\/\u003e\\nvs territory based. For eg, LOB.out has error messages like following\u003cbr\\/\u003e\\nERROR 42818: Comparisons between \'CHAR (UCS_BASIC)\' and \'CLOB (UCS_BASIC)\' are not supported. Types must be comparable. String types must also have matching collation. If collation does not match, a possible solution is to cast operands to force them to the default collation (e.g. select tablename from sys.systables where CAST(tablename as VARCHAR(128)) = \'T1\')\u003cbr\\/\u003e\\nThis error message will have TERRITORY BASED rather than UCS_BASIC in it\'s text when the test is run in territory based. So even though it might look like a test failure when LOB test in run in territory based locale, it is really not a test failure. I think there are 2 tests which will show diffs for this reason. They are LOB.sql and implicitConversoins.\u003c\\/p\u003e\\n\\n\u003cp\u003e3)The diff in orderby.sql is also genuine because with UCS_BASIC database, \\\"Canada\\\" sorts before \\\"anaconda\\\" but with \u003cbr\\/\u003e\\nTERRITORY_BASED database, \\\"anaconda\\\" sorts before \\\"Canada\\\". \u003c\\/p\u003e\\n\\n\u003cp\u003e4)The diffs in Nist tests dml068 and dml079 look genuine too because data is getting sorted in different order with TERRITORY_BASED database and UCS_BASIC database.\u003c\\/p\u003e\\n\\n\u003cp\u003e5)DataSourceTest checks the format of Connection.toString and in case of a database created with terriotry based collation, the format of database string is alphabets\\/alphabets where as the test is looking for just alphabets for the database name.\u003c\\/p\u003e\\n\\n\u003cp\u003e6)The diff in InListMultiProbeTest is expected because in a territory based database _ sorts before \'1\' whereas in a UCS_BASIC database, _ sorts after \'1\'. eg create and load a table using following script in both kinds of databases.\u003cbr\\/\u003e\\ncreate table dellater(c1 char(1));\u003cbr\\/\u003e\\ninsert into dellater values(\'1\'),(\'_\'),(\'2\');\u003cbr\\/\u003e\\nNow, the result of following query differs in 2 kinds of databases\u003cbr\\/\u003e\\nselect * from dellater where c1 &gt;= \'_\' order by c1;\u003cbr\\/\u003e\\nTERRITORY BASED db\u003cbr\\/\u003e\\nC1\u003c\\/p\u003e\\n\u003chr \\/\u003e\\n\u003cp\u003e_\u003cbr\\/\u003e\\n1\u003cbr\\/\u003e\\n2\u003cbr\\/\u003e\\n3 rows selected\u003c\\/p\u003e\\n\\n\u003cp\u003eUCS_BASIC db\u003cbr\\/\u003e\\nC1\u003c\\/p\u003e\\n\u003chr \\/\u003e\\n\u003cp\u003e_\u003cbr\\/\u003e\\n1 row selected\u003c\\/p\u003e\\n\\n\u003cp\u003e7)Other than the ones mentioned above, there are few tests failing with assert exception but I do not think they are related to\u003cbr\\/\u003e\\nchanges that are in this patch. Kathey, I think you have run full collation tests in the past. I wonder if you had seen then \u003cbr\\/\u003e\\nassert failures even before applying this current patch of mine.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12531903_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12531903_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Oct\\/07 20:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-02T20:24:31+0000\'\u003e02\\/Oct\\/07 20:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching patch DERBY2967_offset_based_diff_Oct02_07.txt which fixes   DERBY-2967   for both IBM\'s jdks and Sun\'s jdks. The fix involves using CollationElementIterator to look through collation elements of a character string as needed rather than fetching them all into an array before hand. With the later approach, we may end up getting all the collation elements for a  \\nreally large string when we will be looking at say only first few of those collation elements because we have found a mismatch between value and pattern. \\n\\n The majority of the changes have gone into iapi.types.Like class. This class has two different implementation of SQL LIKE clause. One implementation is for UCS_BASIC character strings and the other one is for territory based character strings. The territory based implementation of LIKE clause has been changed in this patch. From a top level, this method does one to one comparison of collation elements for string that is being searched and the pattern that is being searched in that string. This one-to-one comparison is done for non-metacharacters in the pattern. As soon as we find a metacharacter in the pattern string, we do special processing depending on what kind of metacharacter we are dealing with. \\n1)Taking the simplest case of escape character as the metacharacter. If the user has provided an escape character, then as soon as we encounter the escape character in the pattern string, we check if the character following it is a metacharacter or \\nnot. If not, we throw an exception. If the character indeed is a metacharacter, we convert that metacharacter into it\'s collation element(s) and look for the exact match of those collation element(s) into the CollationElementIterator for the value string. \\n2)Taking the next simplest case of _. When we find a _ in the pattern string, we advance in the CollationElementIterator for the value string by one character. This is where it gets tricky ie what is defined as one character in a particular locale. In Norwegian locale, \'b\' is a single character and so are \'aa\'. Both of these character strings translate into single collation element. But in Norwegian locale, evne though \'\\\\uFA2D\' is one character, it translates into 2 collation elements. This advancing by one character and eating the right number of collation elements is implemented in a new method in Like.java class and the new method\'s name is advnaceByOne(CollationElementIterator). \\n3)Moving on to metacharacter %. A % can be satisfied by 0 to any number of characters in the value string. In order to determine how many characters will satisfy %, we have to start with 0 character and keep eating more and more characters until we find a match for the remaining pattern string and value string or until we reach end of value string but still non % characters left in pattern string. In the later case, we know we have ended up with a mismatch and we return a FALSE from the method. \\n\\n The javadoc(from Like.java\'s like(CollationElementIterator, int, String, int, String, RuleBasedCollator)) describes the implementation in little more detail and I have copied that here for reference. Note that in the following method, valueIterator is the CollationElementIterator for the character string that we are doing a search into. \\n\\n\\n *************** beginning of javadoc **************** \\n \\n\\t This method will be called for character string types with territory \\n\\t based collation to see if valueIterator matches the passed pattern \\n\\t string. The logic of the method is described in following steps (I \\n\\t have tried to put the step identifiers in the code below for reference). \\n\\t A)If pattern string or value Iterator is null, then this method will \\n\\t return null because the results of LIKE can\'t be established in such \\n\\t a situation. \\n\\t B)Start the loop \\n\\t a)Check the lengths of valueIterator and pattern string to see if it \\n\\t is time to return with TRUE\\/FALSE. The exact details of these checks \\n\\t can be found in the javadoc method of \\n\\t checkLengths(CollationElementIterator, String, int) \\n\\t b)Start looking at pattern where the pointer is pointing and keep \\n\\t going until you find end of pattern or you find one of the \\n\\t metacharacters ie %, * or optional escape character. \\n\\t c)Get a CollationElementIterator for the non-metacharacters found in \\n\\t step b(using the Collator passed to this method. The same Collator \\n\\t was used to construct valueIterator). \\n\\t d)Make sure that collation elements found in step c) match the \\n\\t collation elements in valueIterator. A mismatch would require us to \\n\\t return FALSE from this method. \\n\\t e)Check again the lengths of valueIterator and pattern string to see \\n\\t if it is time toreturn with TRUE\\/FALSE. The exact details of these \\n\\t checks can be found in the javadoc method of \\n\\t checkLengths(CollationElementIterator, String, int) \\n\\t f)If we are still here and didn\'t return from this method as a result \\n\\t of step Be) then it means that we have to deal with the \\n\\t metacharacter found in step Bc). Check what metacharacter is the \\n\\t offset in pattern pointing to \\n\\t 1)If user has provided escape character and pattern is pointing to \\n\\t one right now, then convert the next character in pattern to it\'s \\n\\t collation element(s) and compare those collation elements to \\n\\t elements in valueIterator. If they do not match, we need to return \\n\\t FALSE. \\n\\t 2)If it is not escape character, then check if it is a \'%\'. If it is, \\n\\t then increment the pointer in the pattern string by 1 and then \\n\\t follow the involved algorithm below \\n\\t First check if we have reached the end of pattern. If yes, then we \\n\\t can simply return from this method with TRUE return value. If we \\n\\t have not reached end of pattern, then check if rest of the \\n\\t characters in pattern are all \'%\'. If yes, then we can simply \\n\\t return from this method wil TRUE return value. If not all %, then \\n\\t take rest of the pattern string and see if it matches rest of the \\n\\t valueIterator(will be implemented by recursively calling this \\n\\t method). If no match, then do the step Ba). If it is not time to \\n\\t return because of step Ba), then advance the pointer in \\n\\t valueIterator by one character and see if the valueIterator now \\n\\t matches the rest of the pattern string. Keep going until we find \\n\\t the match or mismatch. \\n\\t 3)If it is not escape character or %, then check if it is a _. If \\n\\t yes, then skip all the collation elements in valueIterator \\n\\t corresponding to the next character. \\n\\t g)Go back to step B). \\n*************** end of javadoc **************** \\n \\n\\n\\n I have changed SQLChar and WorkHorseForCollatorDatatypes to call this new method for territory based character string types in Like rather than the old implementation (I have removed the old implementation code from Like.java) \\n\\n I have added a new test in CollationTest. The existing tests for LIKE in CollationTest2 have been very handy during my testing of the code changes. \\n\\n In addition to the above tests, I have run full collation test under Norwegian territory. Following is the analysis of some of the test failures and fixes to subset of them. \\n\\n 1)There are few existing tests that use character string \'aa\' in their testing. These existing test were written to run in UCS_BASIC collation and hence \'aa\' didn\'t cause a problem. But now when we run the full collation tests with say Norwegian territory based locale, the character string \'aa\' exhibit different behavior(because in Norwegian, it is treated as one character) and hence give the false impression of test failures. To avoid having to scan these false failures every time one runs full \\ncollation tests with Norwegian territory, I have changed the test data in some tests. This has bring the test failures far lower when all the tests are run with territory based locale rather than UCS_BASIC. \\n\\n 2)Few other failures in full collation test will be the error message string mismatch when running the tests in UCS_BASIC  \\nvs territory based. For eg, LOB.out has error messages like following \\nERROR 42818: Comparisons between \'CHAR (UCS_BASIC)\' and \'CLOB (UCS_BASIC)\' are not supported. Types must be comparable. String types must also have matching collation. If collation does not match, a possible solution is to cast operands to force them to the default collation (e.g. select tablename from sys.systables where CAST(tablename as VARCHAR(128)) = \'T1\') \\nThis error message will have TERRITORY BASED rather than UCS_BASIC in it\'s text when the test is run in territory based. So even though it might look like a test failure when LOB test in run in territory based locale, it is really not a test failure. I think there are 2 tests which will show diffs for this reason. They are LOB.sql and implicitConversoins. \\n\\n 3)The diff in orderby.sql is also genuine because with UCS_BASIC database, \\\"Canada\\\" sorts before \\\"anaconda\\\" but with  \\nTERRITORY_BASED database, \\\"anaconda\\\" sorts before \\\"Canada\\\".  \\n\\n 4)The diffs in Nist tests dml068 and dml079 look genuine too because data is getting sorted in different order with TERRITORY_BASED database and UCS_BASIC database. \\n\\n 5)DataSourceTest checks the format of Connection.toString and in case of a database created with terriotry based collation, the format of database string is alphabets\\/alphabets where as the test is looking for just alphabets for the database name. \\n\\n 6)The diff in InListMultiProbeTest is expected because in a territory based database _ sorts before \'1\' whereas in a UCS_BASIC database, _ sorts after \'1\'. eg create and load a table using following script in both kinds of databases. \\ncreate table dellater(c1 char(1)); \\ninsert into dellater values(\'1\'),(\'_\'),(\'2\'); \\nNow, the result of following query differs in 2 kinds of databases \\nselect * from dellater where c1 &gt;= \'_\' order by c1; \\nTERRITORY BASED db \\nC1 \\n \\n _ \\n1 \\n2 \\n3 rows selected \\n\\n UCS_BASIC db \\nC1 \\n \\n _ \\n1 row selected \\n\\n 7)Other than the ones mentioned above, there are few tests failing with assert exception but I do not think they are related to \\nchanges that are in this patch. Kathey, I think you have run full collation tests in the past. I wonder if you had seen then  \\nassert failures even before applying this current patch of mine.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12531956\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12531956&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12531956\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12531956_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12531956_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Oct\\/07 23:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-02T23:15:47+0000\'\u003e02\\/Oct\\/07 23:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLooking carefully at the SQL Standard - section 8.5 SR 3 c) ii) 4) then currently (I think) Derby\'s LIKE with TERRITORY_BASED collation is not being implemented correctly.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor a pattern like \'aa\' (norway) or \'ch\' (spain) then the SQL standard indicates that LIKE operates a character at a time. So the pattern is not the combination of \'aa\' or \'ch\', but two separate characters \'a\' \'a\' or \'c\' \'h\' . The collation is only used when comparing this single (  \'exactly 1 (one)\' ) character.\u003c\\/p\u003e\\n\\n\u003cp\u003eMySQL indicates this as well, stating LIKE performs matching on a per-character basis, thus it can produce different results to the = comparison operator.\u003c\\/p\u003e\\n\\n\u003cp\u003eE.g. \'AA\'  LIKE \'\\u00C5\'  is FALSE, but \'AA\' = \'\\u00C5\' is TRUE\u003c\\/p\u003e\\n\\n\u003cp\u003eThis would indicate that during LIKE processing a CollationElementIterator should only ever be created on a single character,\u003cbr\\/\u003e\\nthough this does go back to Kathey\'s question of what is a single character (see \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3080\\\" title=\\\"With TERRITORY_BASED collation, when multiple characters map to a single collation element &#39;_&#39;  matches a single collation element rather than a single character\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3080\\\"\u003e\u003cdel\u003eDERBY-3080\u003c\\/del\u003e\u003c\\/a\u003e). There seem to be three forms\u003cbr\\/\u003e\\nthat could be called a single character:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) A simple single Unicode codepoint such a \'\\u00C5\'   U+212B\u003c\\/p\u003e\\n\\n\u003cp\u003e2) A single Unicode codepoint followed by one or more combining marks, e.g. U+0041 U+030A\u003c\\/p\u003e\\n\\n\u003cp\u003e3) A contraction, where two or more characters \u003cb\u003esort as if\u003c\\/b\u003e they were a single base character (e.g. CH in spanish)\u003c\\/p\u003e\\n\\n\u003cp\u003eUnicode TR10 I think is saying that 1) and 2) are single characters, but 3) is not.\u003c\\/p\u003e\\n\\n\u003cp\u003e(MySQL reference: \u003ca href=\\\"http:\\/\\/dev.mysql.com\\/doc\\/refman\\/4.1\\/en\\/string-comparison-functions.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/dev.mysql.com\\/doc\\/refman\\/4.1\\/en\\/string-comparison-functions.html\u003c\\/a\u003e  )\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12531956_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12531956_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Oct\\/07 23:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-02T23:15:47+0000\'\u003e02\\/Oct\\/07 23:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Looking carefully at the SQL Standard - section 8.5 SR 3 c) ii) 4) then currently (I think) Derby\'s LIKE with TERRITORY_BASED collation is not being implemented correctly. \\n\\n For a pattern like \'aa\' (norway) or \'ch\' (spain) then the SQL standard indicates that LIKE operates a character at a time. So the pattern is not the combination of \'aa\' or \'ch\', but two separate characters \'a\' \'a\' or \'c\' \'h\' . The collation is only used when comparing this single (  \'exactly 1 (one)\' ) character. \\n\\n MySQL indicates this as well, stating LIKE performs matching on a per-character basis, thus it can produce different results to the = comparison operator. \\n\\n E.g. \'AA\'  LIKE \'\\u00C5\'  is FALSE, but \'AA\' = \'\\u00C5\' is TRUE \\n\\n This would indicate that during LIKE processing a CollationElementIterator should only ever be created on a single character, \\nthough this does go back to Kathey\'s question of what is a single character (see   DERBY-3080  ). There seem to be three forms \\nthat could be called a single character: \\n\\n 1) A simple single Unicode codepoint such a \'\\u00C5\'   U+212B \\n\\n 2) A single Unicode codepoint followed by one or more combining marks, e.g. U+0041 U+030A \\n\\n 3) A contraction, where two or more characters  sort as if  they were a single base character (e.g. CH in spanish) \\n\\n Unicode TR10 I think is saying that 1) and 2) are single characters, but 3) is not. \\n\\n (MySQL reference:  http:\\/\\/dev.mysql.com\\/doc\\/refman\\/4.1\\/en\\/string-comparison-functions.html   )              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12532155\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12532155&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12532155\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12532155_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12532155_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Oct\\/07 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-03T16:32:10+0000\'\u003e03\\/Oct\\/07 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe SQL Standard also specifies what a single  character is: Section 4.2.8 indicates all UCS strings should be normalized as Normalization Form C (NFC) as defined by Unicode technical report 15.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12532155_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12532155_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Oct\\/07 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-03T16:32:10+0000\'\u003e03\\/Oct\\/07 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The SQL Standard also specifies what a single  character is: Section 4.2.8 indicates all UCS strings should be normalized as Normalization Form C (NFC) as defined by Unicode technical report 15.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12532518\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12532518&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12532518\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12532518_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12532518_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Oct\\/07 20:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-04T20:25:11+0000\'\u003e04\\/Oct\\/07 20:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI spent some time on Unicode specification and SQL specification in regards to this Jira entry and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3080\\\" title=\\\"With TERRITORY_BASED collation, when multiple characters map to a single collation element &#39;_&#39;  matches a single collation element rather than a single character\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3080\\\"\u003e\u003cdel\u003eDERBY-3080\u003c\\/del\u003e\u003c\\/a\u003e. SQL specification, Section 3.1.1.1 says this for character \\\"This is identical to the Unicode definition of abstract character. In ISO\\/IEC 9075, when the relevant character repertoire is UCS, a character can be thought of as that which is represented by one code point.\\\" The Unicode standard specifies a numeric value (code point) and a name for each of its characters. \u003c\\/p\u003e\\n\\n\u003cp\u003eSo, the question is, in say Norwegian, what do we call \\\"AA\\\"? Is it a character or something else? Unicode specificaiton has a concept of text elemenets and characters (\u003ca href=\\\"http:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch02.pdf\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch02.pdf\u003c\\/a\u003e Unicode chapter 2 Section 2.1 subtopic \\\"Text Elements, Characters, and Text Processes\\\". Text elements are units in a text and there are several kinds of text elements, some of which are grapheme clusters(\\\"user-perceived characters\\\"), words, sentences etc. Characters are used to represent each of these different types of text elements. Grapheme clusters are what user perceives as a single character but they may or maynot be single characters underneath. For eg, \\\"ch\\\" in Slovakian is perceived by user as a single character (ie a grapheme cluster) but it is composed of 2 characters \\\"c\\\" and \\\"h\\\" as 2. Another eg would be \\\"AA\\\" in Norwegian. Unicode treats \\\"AA\\\" as a grapheme cluster which is composed of 2 characters \\\"A\\\" and \\\"A\\\". (Unicode chapter 2 Figure 2.1 and \u003ca href=\\\"http:\\/\\/unicode.org\\/reports\\/tr29\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/unicode.org\\/reports\\/tr29\\/\u003c\\/a\u003e Section 1). \u003c\\/p\u003e\\n\\n\u003cp\u003eSo, coming to our question of should \\\"AA\\\" be treated as 2 characters in like but as one character in = operation? \u003ca href=\\\"http:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch02.pdf\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch02.pdf\u003c\\/a\u003e chapter 2 Section 2.1 subtopic \\\"Text Elements, Characters, and Text Processes\\\" also talks about how something can be a text element for one kind of text processing but not for another kind of text processing. I think what we are discussing here is that for Norwegian, we want to treat \\\"AA\\\" as grapheme cluster when we are using an = operator eg \\\"AA\\\" = \'\\u00C5\' but \\\"AA\\\" is not a grapheme cluster when it is used in a LIKE operation eg \'AA\' LIKE \'\\u00C5\'. In other words, we want to use a CollationElementIterator on entire character string when we are dealing with = operator. But when working with LIKE operator, we want to generate a CollationElementIterator for one character at a time rather than one a grapheme cluster. This logic goes with what SQL spec wants us to do for = and LIKE. \u003c\\/p\u003e\\n\\n\u003cp\u003eQuoting SQL spec for = Section 8.2 &lt;comparison predicate&gt; General Rules 3d) \\\"Depending on the collation, two strings may compare as equal even if they are of different lengths or contain different sequences of characters\\\". \u003c\\/p\u003e\\n\\n\u003cp\u003eQuoting SQL spec fo LIKE General Rules 3cii)\u003cbr\\/\u003e\\n1) A substring of MCV(the string in which we are trying to find a match) is a sequence of 0 (zero) or more contiguous characters of MCV and each character of MCV is part of exactly one substring.\u003cbr\\/\u003e\\n2) If the i-th substring of PCV(the pattern that we are looking for in MCV) is an arbitrary character specifier, then the i-th substring of MCV is any single character.\u003cbr\\/\u003e\\n3) If the i-th substring of PCV is an arbitrary string specifier, then the i-th substring of MCV is any sequence of 0 (zero) or more characters.\u003cbr\\/\u003e\\n4) If the i-th substring of PCV is a single character specifier, then the i-th substring of MCV contains exactly 1 (one) character that is equal to the character represented by the single character specifier according to the collation of the &lt;like predicate&gt;.\u003cbr\\/\u003e\\n5) The number of substrings of MCV is equal to the number of substring specifiers of PCV.\u003c\\/p\u003e\\n\\n\u003cp\u003eBased on above, I think the like method for territory based character string types has to deal with one character at a time in pattern and in value string. If the character in pattern is not a metacharacter, then we should convert it into it\'s collation element(s) and compare it with the collation elements(s) of the next character in value string. If the character in pattern is _, then we should eat next element in value string. If the character in pattern is escape character, then we should look at next character in pattern and convert it into it\'s collation element(s) and compare it with the collation element(s) of the next character in value string. Finally, if the character in pattern is %, then we should eat 0 to n character in value string until we find a match for rest of the pattern characters or we find a mismatch following the algorithm in this paragraph.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12532518_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12532518_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Oct\\/07 20:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-04T20:25:11+0000\'\u003e04\\/Oct\\/07 20:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I spent some time on Unicode specification and SQL specification in regards to this Jira entry and   DERBY-3080  . SQL specification, Section 3.1.1.1 says this for character \\\"This is identical to the Unicode definition of abstract character. In ISO\\/IEC 9075, when the relevant character repertoire is UCS, a character can be thought of as that which is represented by one code point.\\\" The Unicode standard specifies a numeric value (code point) and a name for each of its characters.  \\n\\n So, the question is, in say Norwegian, what do we call \\\"AA\\\"? Is it a character or something else? Unicode specificaiton has a concept of text elemenets and characters ( http:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch02.pdf  Unicode chapter 2 Section 2.1 subtopic \\\"Text Elements, Characters, and Text Processes\\\". Text elements are units in a text and there are several kinds of text elements, some of which are grapheme clusters(\\\"user-perceived characters\\\"), words, sentences etc. Characters are used to represent each of these different types of text elements. Grapheme clusters are what user perceives as a single character but they may or maynot be single characters underneath. For eg, \\\"ch\\\" in Slovakian is perceived by user as a single character (ie a grapheme cluster) but it is composed of 2 characters \\\"c\\\" and \\\"h\\\" as 2. Another eg would be \\\"AA\\\" in Norwegian. Unicode treats \\\"AA\\\" as a grapheme cluster which is composed of 2 characters \\\"A\\\" and \\\"A\\\". (Unicode chapter 2 Figure 2.1 and  http:\\/\\/unicode.org\\/reports\\/tr29\\/  Section 1).  \\n\\n So, coming to our question of should \\\"AA\\\" be treated as 2 characters in like but as one character in = operation?  http:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch02.pdf  chapter 2 Section 2.1 subtopic \\\"Text Elements, Characters, and Text Processes\\\" also talks about how something can be a text element for one kind of text processing but not for another kind of text processing. I think what we are discussing here is that for Norwegian, we want to treat \\\"AA\\\" as grapheme cluster when we are using an = operator eg \\\"AA\\\" = \'\\u00C5\' but \\\"AA\\\" is not a grapheme cluster when it is used in a LIKE operation eg \'AA\' LIKE \'\\u00C5\'. In other words, we want to use a CollationElementIterator on entire character string when we are dealing with = operator. But when working with LIKE operator, we want to generate a CollationElementIterator for one character at a time rather than one a grapheme cluster. This logic goes with what SQL spec wants us to do for = and LIKE.  \\n\\n Quoting SQL spec for = Section 8.2 &lt;comparison predicate&gt; General Rules 3d) \\\"Depending on the collation, two strings may compare as equal even if they are of different lengths or contain different sequences of characters\\\".  \\n\\n Quoting SQL spec fo LIKE General Rules 3cii) \\n1) A substring of MCV(the string in which we are trying to find a match) is a sequence of 0 (zero) or more contiguous characters of MCV and each character of MCV is part of exactly one substring. \\n2) If the i-th substring of PCV(the pattern that we are looking for in MCV) is an arbitrary character specifier, then the i-th substring of MCV is any single character. \\n3) If the i-th substring of PCV is an arbitrary string specifier, then the i-th substring of MCV is any sequence of 0 (zero) or more characters. \\n4) If the i-th substring of PCV is a single character specifier, then the i-th substring of MCV contains exactly 1 (one) character that is equal to the character represented by the single character specifier according to the collation of the &lt;like predicate&gt;. \\n5) The number of substrings of MCV is equal to the number of substring specifiers of PCV. \\n\\n Based on above, I think the like method for territory based character string types has to deal with one character at a time in pattern and in value string. If the character in pattern is not a metacharacter, then we should convert it into it\'s collation element(s) and compare it with the collation elements(s) of the next character in value string. If the character in pattern is _, then we should eat next element in value string. If the character in pattern is escape character, then we should look at next character in pattern and convert it into it\'s collation element(s) and compare it with the collation element(s) of the next character in value string. Finally, if the character in pattern is %, then we should eat 0 to n character in value string until we find a match for rest of the pattern characters or we find a mismatch following the algorithm in this paragraph.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12533261\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12533261&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12533261\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12533261_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533261_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/07 04:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-09T04:37:21+0000\'\u003e09\\/Oct\\/07 04:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBernt Johnsen made following comments on the derby dev list\u003c\\/p\u003e\\n\\n\u003cp\u003e\\\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Mamta A. Satoor (JIRA) wrote (2007-10-04 13:25:50):\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;\u003cbr\\/\u003e\\n&gt; So, the question is, in say Norwegian, what do we call \\\"AA\\\"? Is it a\u003cbr\\/\u003e\\n&gt; character or something else? Unicode specificaiton has a concept of\u003cbr\\/\u003e\\n&gt; text elemenets and characters\u003cbr\\/\u003e\\n&gt; (\u003ca href=\\\"http:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch02.pdf\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch02.pdf\u003c\\/a\u003e Unicode\u003cbr\\/\u003e\\n&gt; chapter 2 Section 2.1 subtopic \\\"Text Elements, Characters, and Text\u003cbr\\/\u003e\\n&gt; Processes\\\". Text elements are units in a text and there are several\u003cbr\\/\u003e\\n&gt; kinds of text elements, some of which are grapheme\u003cbr\\/\u003e\\n&gt; clusters(\\\"user-perceived characters\\\"), words, sentences\u003cbr\\/\u003e\\n&gt; etc. Characters are used to represent each of these different types\u003cbr\\/\u003e\\n&gt; of text elements. Grapheme clusters are what user perceives as a\u003cbr\\/\u003e\\n&gt; single character but they may or maynot be single characters\u003cbr\\/\u003e\\n&gt; underneath. For eg, \\\"ch\\\" in Slovakian is perceived by user as a\u003cbr\\/\u003e\\n&gt; single character (ie a grapheme cluster) but it is composed of 2\u003cbr\\/\u003e\\n&gt; characters \\\"c\\\" and \\\"h\\\" as 2. Another eg would be \\\"AA\\\" in\u003cbr\\/\u003e\\n&gt; Norwegian. Unicode treats \\\"AA\\\" as a grapheme cluster which is\u003cbr\\/\u003e\\n&gt; composed of 2 characters \\\"A\\\" and \\\"A\\\". (Unicode chapter 2 Figure 2.1\u003cbr\\/\u003e\\n&gt; and \u003ca href=\\\"http:\\/\\/unicode.org\\/reports\\/tr29\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/unicode.org\\/reports\\/tr29\\/\u003c\\/a\u003e Section 1).\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThe way I understand the Unicode standard, graphems and graphem\u003cbr\\/\u003e\\nclusters are solely there for rendering while characters and combining\u003cbr\\/\u003e\\ncharacters are there for text processing. Thus, we should not consider\u003cbr\\/\u003e\\ngraphemes when we are discussing SQL.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn Norwegian, there are no combining character which make up \\\"aa\\\" and\u003cbr\\/\u003e\\nthus \\\"aa\\\" is TWO characters. However, for sorting purposes, \\\"aa\\\" is\u003cbr\\/\u003e\\none text element. For all other purposes it is two text elements.\u003c\\/p\u003e\\n\\n\u003cp\u003eMy conclusion here is that \\\"aa\\\" = \\\"\\u00E5\\\" is false and \\\"aa\\\" LIKE \\\"\\u00E5\\\" is\u003cbr\\/\u003e\\nfalse too, and that CHARACTER_LENGTH(\\\"aa\\\") always gives 2.\u003c\\/p\u003e\\n\\n\u003cp\u003e(REMARK: A person with the name \\\"H\\u00E5kon\\\" may not write his name\u003cbr\\/\u003e\\n\\\"Haakon\\\" and vice versa. The strings are not equal, and it is not the\u003cbr\\/\u003e\\nsame name. They are, however, of the same origin (old Norse \\\"H\\u00E1konn\\\" I\u003cbr\\/\u003e\\nthink), pronounced the same way and they are sorted together).\u003c\\/p\u003e\\n\\n\u003cp\u003e(REMARK 2 (and not relevant for this discussion): \\\"AA\\\" is not used in\u003cbr\\/\u003e\\nmodern Norwegian language. You will only find it in names of persons,\u003cbr\\/\u003e\\ncompanies and organizations).\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eBernt\u003cbr\\/\u003e\\n\\\"\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12533261_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533261_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/07 04:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-09T04:37:21+0000\'\u003e09\\/Oct\\/07 04:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bernt Johnsen made following comments on the derby dev list \\n\\n \\\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Mamta A. Satoor (JIRA) wrote (2007-10-04 13:25:50): \\n\\n &gt; \\n&gt; So, the question is, in say Norwegian, what do we call \\\"AA\\\"? Is it a \\n&gt; character or something else? Unicode specificaiton has a concept of \\n&gt; text elemenets and characters \\n&gt; ( http:\\/\\/www.unicode.org\\/versions\\/Unicode5.0.0\\/ch02.pdf  Unicode \\n&gt; chapter 2 Section 2.1 subtopic \\\"Text Elements, Characters, and Text \\n&gt; Processes\\\". Text elements are units in a text and there are several \\n&gt; kinds of text elements, some of which are grapheme \\n&gt; clusters(\\\"user-perceived characters\\\"), words, sentences \\n&gt; etc. Characters are used to represent each of these different types \\n&gt; of text elements. Grapheme clusters are what user perceives as a \\n&gt; single character but they may or maynot be single characters \\n&gt; underneath. For eg, \\\"ch\\\" in Slovakian is perceived by user as a \\n&gt; single character (ie a grapheme cluster) but it is composed of 2 \\n&gt; characters \\\"c\\\" and \\\"h\\\" as 2. Another eg would be \\\"AA\\\" in \\n&gt; Norwegian. Unicode treats \\\"AA\\\" as a grapheme cluster which is \\n&gt; composed of 2 characters \\\"A\\\" and \\\"A\\\". (Unicode chapter 2 Figure 2.1 \\n&gt; and  http:\\/\\/unicode.org\\/reports\\/tr29\\/  Section 1). \\n\\n\\n The way I understand the Unicode standard, graphems and graphem \\nclusters are solely there for rendering while characters and combining \\ncharacters are there for text processing. Thus, we should not consider \\ngraphemes when we are discussing SQL. \\n\\n In Norwegian, there are no combining character which make up \\\"aa\\\" and \\nthus \\\"aa\\\" is TWO characters. However, for sorting purposes, \\\"aa\\\" is \\none text element. For all other purposes it is two text elements. \\n\\n My conclusion here is that \\\"aa\\\" = \\\"\\u00E5\\\" is false and \\\"aa\\\" LIKE \\\"\\u00E5\\\" is \\nfalse too, and that CHARACTER_LENGTH(\\\"aa\\\") always gives 2. \\n\\n (REMARK: A person with the name \\\"H\\u00E5kon\\\" may not write his name \\n\\\"Haakon\\\" and vice versa. The strings are not equal, and it is not the \\nsame name. They are, however, of the same origin (old Norse \\\"H\\u00E1konn\\\" I \\nthink), pronounced the same way and they are sorted together). \\n\\n (REMARK 2 (and not relevant for this discussion): \\\"AA\\\" is not used in \\nmodern Norwegian language. You will only find it in names of persons, \\ncompanies and organizations). \\n\\n\\n Bernt \\n\\\"              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12533263\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12533263&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12533263\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12533263_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533263_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/07 04:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-09T04:48:20+0000\'\u003e09\\/Oct\\/07 04:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBernt, I tend to disagree with \'aa\'=\'\\u00E5\' is false statement based on my understanding of SQL spec Section 8.2 &lt;comparison predicate&gt; General Rules 3c) and 3d). \u003cbr\\/\u003e\\n3c) The result of the comparison of X and Y is given by the collation CS.\u003cbr\\/\u003e\\n3d) Depending on the collation, two strings may compare as equal even if they are of different lengths or contain different sequences of characters.\u003c\\/p\u003e\\n\\n\u003cp\u003eBased on these 2 rules, if the collation CS for Norwegian compares \'aa\' and \'\\u00E5\' as true, then the result of \'aa\'=\'\\u00E5\' will be true. In other words, if the collation elements for \'aa\' matches \'\\u00E5\', then it means that collation CS compares them equal.\u003c\\/p\u003e\\n\\n\u003cp\u003eI can see how a person with name \\\"H\\u00E5kon\\\" may not write his name \\\"Haakon\\\" or vice versa but I think if my interpretation of SQL spec is right, then SQL is going to treat \\\"H\\u00E5kon\\\"=\\\"Haakon\\\" depending on the collation CS. Do let me know if my understanding of SQL spec in this area is incorrect.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12533263_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533263_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/07 04:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-09T04:48:20+0000\'\u003e09\\/Oct\\/07 04:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bernt, I tend to disagree with \'aa\'=\'\\u00E5\' is false statement based on my understanding of SQL spec Section 8.2 &lt;comparison predicate&gt; General Rules 3c) and 3d).  \\n3c) The result of the comparison of X and Y is given by the collation CS. \\n3d) Depending on the collation, two strings may compare as equal even if they are of different lengths or contain different sequences of characters. \\n\\n Based on these 2 rules, if the collation CS for Norwegian compares \'aa\' and \'\\u00E5\' as true, then the result of \'aa\'=\'\\u00E5\' will be true. In other words, if the collation elements for \'aa\' matches \'\\u00E5\', then it means that collation CS compares them equal. \\n\\n I can see how a person with name \\\"H\\u00E5kon\\\" may not write his name \\\"Haakon\\\" or vice versa but I think if my interpretation of SQL spec is right, then SQL is going to treat \\\"H\\u00E5kon\\\"=\\\"Haakon\\\" depending on the collation CS. Do let me know if my understanding of SQL spec in this area is incorrect.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12533306\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12533306&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12533306\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bernt\\\" id=\\\"commentauthor_12533306_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bernt\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bernt\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bernt M. Johnsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533306_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/07 09:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-09T09:03:54+0000\'\u003e09\\/Oct\\/07 09:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMamta, you are right. SQL spec Section 4.2.2 also defines the relation between collation and comparision very clear. The downside is that most applications using collation must be very careful in the use of collation to get the correct semantics. Since \\\"H\\u00E5kon\\\" and \\\"Haakon\\\" as alternate ways of spelling the same name will be considered equal while \\\"Christian\\\" and \\\"Kristian\\\" which also is alternate spellings of another name will not. But, that is beside the point. The SQL standard is very clear.\u003c\\/p\u003e\\n\\n\u003cp\u003eThen, to use the lingo from Unicode. \\\"aa\\\" will be one \u003cb\u003etext element\u003c\\/b\u003e (not a grapheme cluser) with regards to both sorting and comparision.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bernt\\\" id=\\\"commentauthor_12533306_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bernt\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bernt\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bernt M. Johnsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533306_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/07 09:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-09T09:03:54+0000\'\u003e09\\/Oct\\/07 09:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mamta, you are right. SQL spec Section 4.2.2 also defines the relation between collation and comparision very clear. The downside is that most applications using collation must be very careful in the use of collation to get the correct semantics. Since \\\"H\\u00E5kon\\\" and \\\"Haakon\\\" as alternate ways of spelling the same name will be considered equal while \\\"Christian\\\" and \\\"Kristian\\\" which also is alternate spellings of another name will not. But, that is beside the point. The SQL standard is very clear. \\n\\n Then, to use the lingo from Unicode. \\\"aa\\\" will be one  text element  (not a grapheme cluser) with regards to both sorting and comparision.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12533310\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12533310&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12533310\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bernt\\\" id=\\\"commentauthor_12533310_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bernt\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bernt\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bernt M. Johnsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533310_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/07 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-09T09:12:38+0000\'\u003e09\\/Oct\\/07 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI also agree that even if \'aa\'=\'\\u00E5\' should be true with Norwegian collation, \'aa\' LIKE \'\\u00E5\' should give false according to secion 8.5 which says that LIKE is done on a character by character comparision. \'aa\' is two characters while \'\\u00E5\' is one.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bernt\\\" id=\\\"commentauthor_12533310_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bernt\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bernt\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bernt M. Johnsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533310_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/07 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-09T09:12:38+0000\'\u003e09\\/Oct\\/07 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I also agree that even if \'aa\'=\'\\u00E5\' should be true with Norwegian collation, \'aa\' LIKE \'\\u00E5\' should give false according to secion 8.5 which says that LIKE is done on a character by character comparision. \'aa\' is two characters while \'\\u00E5\' is one.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12533401\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12533401&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12533401\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12533401_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533401_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/07 16:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-09T16:08:55+0000\'\u003e09\\/Oct\\/07 16:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eActually I think the correct terminology for this is Contractions, from Unicode TR10 which is the specification for collation. The example given there (which avoids the \'aa\' not in use issue), is \'ch\' for Spanish.\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/unicode.org\\/reports\\/tr10\\/#Contractions\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/unicode.org\\/reports\\/tr10\\/#Contractions\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12533401_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533401_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/07 16:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-09T16:08:55+0000\'\u003e09\\/Oct\\/07 16:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Actually I think the correct terminology for this is Contractions, from Unicode TR10 which is the specification for collation. The example given there (which avoids the \'aa\' not in use issue), is \'ch\' for Spanish. \\n\\n  http:\\/\\/unicode.org\\/reports\\/tr10\\/#Contractions               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12534114\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12534114&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12534114\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12534114_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12534114_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Oct\\/07 18:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-11T18:20:50+0000\'\u003e11\\/Oct\\/07 18:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am attaching a new patch (DERBY2967_Oct11_07_diff.txt) which is much simpler than earlier patches because the implementation of LIKE for UCS_BASIC and territory based character string types do not differ much(based on SQL standard as explained in earlier few comments to this Jira entry). I have been able to change the existing code for LIKE (in Like.java) for UCS_BASIC character strings to support territory based character strings. The existing method in Like.java now gets a new parameter and it is RuleBasedCollator. For UCS_BASIC strings, this will be passed as NULL. We check if the RuleBasedCollator is NULL and if so then we do simple one character equality check for non-metacharacters in pattern and correspnding characters in value string. But if RuleBasedCollator is not NULL, then we use it to get collation element(s) for one character at a time for non-metacharacters in patterns and corresponding characters in value string and do the collation element(s) comparison to establish equality. \u003c\\/p\u003e\\n\\n\u003cp\u003eIn addition to the above mentioned change in Like.java, I have changed the callers of the method in Like.java to pass correct value for the RuleBasedCollator. \u003c\\/p\u003e\\n\\n\u003cp\u003eAdditionally, I have added a test to CollationTest.java for the code changes. Existing like tests in CollationTest2.java were very useful in the testing of my changes. And lastly, I changed few of the existing tests to use different character string values so that when we run the full collation tests, we do not see some of the test failures which are genuine because of the nature of their data. \u003c\\/p\u003e\\n\\n\u003cp\u003eWould appreciate if someone has time to review the patch for me. I will plan on committing this early next week if there are no issues.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12534114_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12534114_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Oct\\/07 18:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-11T18:20:50+0000\'\u003e11\\/Oct\\/07 18:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am attaching a new patch (DERBY2967_Oct11_07_diff.txt) which is much simpler than earlier patches because the implementation of LIKE for UCS_BASIC and territory based character string types do not differ much(based on SQL standard as explained in earlier few comments to this Jira entry). I have been able to change the existing code for LIKE (in Like.java) for UCS_BASIC character strings to support territory based character strings. The existing method in Like.java now gets a new parameter and it is RuleBasedCollator. For UCS_BASIC strings, this will be passed as NULL. We check if the RuleBasedCollator is NULL and if so then we do simple one character equality check for non-metacharacters in pattern and correspnding characters in value string. But if RuleBasedCollator is not NULL, then we use it to get collation element(s) for one character at a time for non-metacharacters in patterns and corresponding characters in value string and do the collation element(s) comparison to establish equality.  \\n\\n In addition to the above mentioned change in Like.java, I have changed the callers of the method in Like.java to pass correct value for the RuleBasedCollator.  \\n\\n Additionally, I have added a test to CollationTest.java for the code changes. Existing like tests in CollationTest2.java were very useful in the testing of my changes. And lastly, I changed few of the existing tests to use different character string values so that when we run the full collation tests, we do not see some of the test failures which are genuine because of the nature of their data.  \\n\\n Would appreciate if someone has time to review the patch for me. I will plan on committing this early next week if there are no issues.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12535339\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12535339&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12535339\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12535339_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535339_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Oct\\/07 20:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-16T20:48:24+0000\'\u003e16\\/Oct\\/07 20:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted(revision 585261) DERBY2967_Oct11_07_diff.txt into main codeline with following commit comments\u003c\\/p\u003e\\n\\n\u003cp\u003eCommiting the patch (DERBY2967_Oct11_07_diff.txt) attached to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2967\\\" title=\\\"Single character does not match high value unicode character with collation TERRITORY_BASED\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2967\\\"\u003e\u003cdel\u003eDERBY-2967\u003c\\/del\u003e\u003c\\/a\u003e. The implementation of LIKE for UCS_BASIC and territory based character string types do not differ much(based on SQL standard as explained in comments to this Jira entry). I have been able to change the existing code for LIKE (in Like.java) for UCS_BASIC character strings to support territory based character strings. The existing method in Like.java now gets a new parameter and it is RuleBasedCollator. For UCS_BASIC strings, this will be passed as NULL. We check if the RuleBasedCollator is NULL and if so then we do simple one character equality check for non-metacharacters in pattern and correspnding characters in value string. But if RuleBasedCollator is not NULL, then we use it to get collation element(s) for one character at a time for non-metacharacters in patterns and corresponding characters in value string and do the collation element(s) comparison to establish equality. \u003c\\/p\u003e\\n\\n\u003cp\u003eIn addition to the above mentioned change in Like.java, I have changed the callers of the method in Like.java to pass correct value for the RuleBasedCollator. \u003c\\/p\u003e\\n\\n\u003cp\u003eAdditionally, I have added a test to CollationTest.java for the code changes. Existing like tests in CollationTest2.java were very useful in the testing of my changes. And lastly, I changed few of the existing tests to use different character string values so that when we run the full collation tests, we do not see some of the test failures which are genuine because of the nature of their data. \u003c\\/p\u003e\\n\\n\u003cp\u003eFile committed are as follows\u003cbr\\/\u003e\\nM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/Like.java\u003cbr\\/\u003e\\nM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/SQLChar.java\u003cbr\\/\u003e\\nM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/WorkHorseForCollatorDatatypes.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/unitTests\\/lang\\/T_Like.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/CollationTest.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/CollationTest2.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/DynamicLikeOptimizationTest.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/StreamsTest.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/nist\\/dml068.sql\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/nist\\/xts729.sql\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/dml068.out\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/xts729.out\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12535339_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535339_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Oct\\/07 20:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-16T20:48:24+0000\'\u003e16\\/Oct\\/07 20:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed(revision 585261) DERBY2967_Oct11_07_diff.txt into main codeline with following commit comments \\n\\n Commiting the patch (DERBY2967_Oct11_07_diff.txt) attached to   DERBY-2967  . The implementation of LIKE for UCS_BASIC and territory based character string types do not differ much(based on SQL standard as explained in comments to this Jira entry). I have been able to change the existing code for LIKE (in Like.java) for UCS_BASIC character strings to support territory based character strings. The existing method in Like.java now gets a new parameter and it is RuleBasedCollator. For UCS_BASIC strings, this will be passed as NULL. We check if the RuleBasedCollator is NULL and if so then we do simple one character equality check for non-metacharacters in pattern and correspnding characters in value string. But if RuleBasedCollator is not NULL, then we use it to get collation element(s) for one character at a time for non-metacharacters in patterns and corresponding characters in value string and do the collation element(s) comparison to establish equality.  \\n\\n In addition to the above mentioned change in Like.java, I have changed the callers of the method in Like.java to pass correct value for the RuleBasedCollator.  \\n\\n Additionally, I have added a test to CollationTest.java for the code changes. Existing like tests in CollationTest2.java were very useful in the testing of my changes. And lastly, I changed few of the existing tests to use different character string values so that when we run the full collation tests, we do not see some of the test failures which are genuine because of the nature of their data.  \\n\\n File committed are as follows \\nM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/Like.java \\nM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/SQLChar.java \\nM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/WorkHorseForCollatorDatatypes.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/unitTests\\/lang\\/T_Like.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/CollationTest.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/CollationTest2.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/DynamicLikeOptimizationTest.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/StreamsTest.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/nist\\/dml068.sql \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/nist\\/xts729.sql \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/dml068.out \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/xts729.out              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12535479\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12535479&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12535479\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12535479_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535479_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Oct\\/07 08:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-17T08:54:02+0000\'\u003e17\\/Oct\\/07 08:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI read the Oct 11 patch in the commit log and I have a question about checkEquality(). Sorry that I didn\'t comment before.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt looks like checkEquality() will create two String objects and two CollationElementIterator objects per character we want to check. This sounds overly expensive to me. Do you think there is a cheaper way to achieve the same?\u003c\\/p\u003e\\n\\n\u003cp\u003eI have a couple of ideas which may or may not work:\u003c\\/p\u003e\\n\\n\u003cp\u003ea) We could use the compare() method instead of iterators. It caches and reuses the iterators across calls and therefore it might be more efficient. It would also simplify the code, since the else clause in checkEquality() could be rewritten to:\u003c\\/p\u003e\\n\\n\u003cp\u003e} else {\\/\\/dealing with territory based character string\u003cbr\\/\u003e\\n    return collator.compare(new String(pat, pLoc, 1), new String(val, vLoc, 1)) == 0:\u003cbr\\/\u003e\\n}\u003c\\/p\u003e\\n\\n\u003cp\u003eb) To eliminate \u003cb\u003eboth\u003c\\/b\u003e the String allocations and the CollationElementIterator allocations, I think we could allocate one CollationElementIterator for each string (as opposed to each character) and use setOffset()\\/getOffset() to ensure that we work on one character at a time.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12535479_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535479_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Oct\\/07 08:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-17T08:54:02+0000\'\u003e17\\/Oct\\/07 08:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I read the Oct 11 patch in the commit log and I have a question about checkEquality(). Sorry that I didn\'t comment before. \\n\\n It looks like checkEquality() will create two String objects and two CollationElementIterator objects per character we want to check. This sounds overly expensive to me. Do you think there is a cheaper way to achieve the same? \\n\\n I have a couple of ideas which may or may not work: \\n\\n a) We could use the compare() method instead of iterators. It caches and reuses the iterators across calls and therefore it might be more efficient. It would also simplify the code, since the else clause in checkEquality() could be rewritten to: \\n\\n } else {\\/\\/dealing with territory based character string \\n    return collator.compare(new String(pat, pLoc, 1), new String(val, vLoc, 1)) == 0: \\n} \\n\\n b) To eliminate  both  the String allocations and the CollationElementIterator allocations, I think we could allocate one CollationElementIterator for each string (as opposed to each character) and use setOffset()\\/getOffset() to ensure that we work on one character at a time.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12535953\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12535953&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12535953\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12535953_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535953_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 15:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T15:57:58+0000\'\u003e18\\/Oct\\/07 15:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMigrated changes from trunk(revision 585261) into 10.3(revision 586019) codeline with following commit comments\u003c\\/p\u003e\\n\\n\u003cp\u003eMigrating changes (revision 585261) from trunk into 10.3 codeline. I had to make some manual changes after merging because CollationTest had few changes in main which were not part of 10.3 codeline. The commit comments for the trunk codeline checkin were as follows\u003c\\/p\u003e\\n\\n\u003cp\u003eCommiting the patch (DERBY2967_Oct11_07_diff.txt) attached to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2967\\\" title=\\\"Single character does not match high value unicode character with collation TERRITORY_BASED\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2967\\\"\u003e\u003cdel\u003eDERBY-2967\u003c\\/del\u003e\u003c\\/a\u003e. The implementation of LIKE for UCS_BASIC and territory based character string types do not differ much(based on SQL standard as explained in comments to this Jira entry). I have been able to change the existing code for LIKE (in Like.java) for UCS_BASIC character strings to support territory based character strings. The existing method in Like.java now gets a new parameter and it is RuleBasedCollator. For UCS_BASIC strings, this will be passed as NULL. We check if the RuleBasedCollator is NULL and if so then we do simple one character equality check for non-metacharacters in pattern and correspnding characters in value string. But if RuleBasedCollator is not NULL, then we use it to get collation element(s) for one character at a time for non-metacharacters in patterns and corresponding characters in value string and do the collation element(s) comparison to establish equality. \u003c\\/p\u003e\\n\\n\u003cp\u003eIn addition to the above mentioned change in Like.java, I have changed the callers of the method in Like.java to pass correct value for the RuleBasedCollator. \u003c\\/p\u003e\\n\\n\u003cp\u003eAdditionally, I have added a test to CollationTest.java for the code changes. Existing like tests in CollationTest2.java were very useful in the testing of my changes. And lastly, I changed few of the existing tests to use different character string values so that when we run the full collation tests, we do not see some of the test failures which are genuine because of the nature of their data. \u003c\\/p\u003e\\n\\n\u003cp\u003eM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/Like.java\u003cbr\\/\u003e\\nM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/SQLChar.java\u003cbr\\/\u003e\\nM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/WorkHorseForCollatorDatatypes.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/unitTests\\/lang\\/T_Like.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/CollationTest.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/CollationTest2.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/DynamicLikeOptimizationTest.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/StreamsTest.java\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/nist\\/dml068.sql\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/nist\\/xts729.sql\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/dml068.out\u003cbr\\/\u003e\\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/xts729.out\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12535953_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535953_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 15:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T15:57:58+0000\'\u003e18\\/Oct\\/07 15:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Migrated changes from trunk(revision 585261) into 10.3(revision 586019) codeline with following commit comments \\n\\n Migrating changes (revision 585261) from trunk into 10.3 codeline. I had to make some manual changes after merging because CollationTest had few changes in main which were not part of 10.3 codeline. The commit comments for the trunk codeline checkin were as follows \\n\\n Commiting the patch (DERBY2967_Oct11_07_diff.txt) attached to   DERBY-2967  . The implementation of LIKE for UCS_BASIC and territory based character string types do not differ much(based on SQL standard as explained in comments to this Jira entry). I have been able to change the existing code for LIKE (in Like.java) for UCS_BASIC character strings to support territory based character strings. The existing method in Like.java now gets a new parameter and it is RuleBasedCollator. For UCS_BASIC strings, this will be passed as NULL. We check if the RuleBasedCollator is NULL and if so then we do simple one character equality check for non-metacharacters in pattern and correspnding characters in value string. But if RuleBasedCollator is not NULL, then we use it to get collation element(s) for one character at a time for non-metacharacters in patterns and corresponding characters in value string and do the collation element(s) comparison to establish equality.  \\n\\n In addition to the above mentioned change in Like.java, I have changed the callers of the method in Like.java to pass correct value for the RuleBasedCollator.  \\n\\n Additionally, I have added a test to CollationTest.java for the code changes. Existing like tests in CollationTest2.java were very useful in the testing of my changes. And lastly, I changed few of the existing tests to use different character string values so that when we run the full collation tests, we do not see some of the test failures which are genuine because of the nature of their data.  \\n\\n M    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/Like.java \\nM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/SQLChar.java \\nM    java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/WorkHorseForCollatorDatatypes.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/unitTests\\/lang\\/T_Like.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/CollationTest.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/CollationTest2.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/DynamicLikeOptimizationTest.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/StreamsTest.java \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/nist\\/dml068.sql \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/nist\\/xts729.sql \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/dml068.out \\nM    java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/xts729.out              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12535958\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12535958&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12535958\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12535958_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535958_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 16:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T16:09:46+0000\'\u003e18\\/Oct\\/07 16:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks, Knut,  for checking my commit. I was hesitant too about all the objects creations.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think we can definitely make the first change suggested by you. I will go ahead and give it a try\u003cbr\\/\u003e\\n************\u003cb\u003epart of the change suggested by Knut\u003c\\/b\u003e***************\u003cbr\\/\u003e\\na) We could use the compare() method instead of iterators. It caches and reuses the iterators across calls and therefore it might be more efficient. It would also simplify the code, since the else clause in checkEquality() could be rewritten to: \u003c\\/p\u003e\\n\\n\u003cp\u003e} else {\\/\\/dealing with territory based character string \u003cbr\\/\u003e\\n    return collator.compare(new String(pat, pLoc, 1), new String(val, vLoc, 1)) == 0: \u003cbr\\/\u003e\\n} \u003cbr\\/\u003e\\n************\u003cb\u003eend of part of the change suggested by Knut\u003c\\/b\u003e********\u003c\\/p\u003e\\n\\n\u003cp\u003eBut as for the second alternative, we can\'t create a CollationElementIerator for the entire string ahead of time for LIKE operation. Let me use an example to illustrate why. In Norway, the collation element(s) returned for string \'aa\' is not same as collation element(s) return for one \'a\' at a time. So, when the user has a WHERE clause  \'caad\' LIKE \'%a%\', SQL spec requires us to return a TRUE for this WHERE clause. We will not implement that behavior if we generated collation elements for entire string \'caad\' at one shot. We need to break \'caad\' into four characters and have collation element for each one of those 4 characters. In Norway, if we generated collation elements for string \'caad\', it will find only 3 characters in that string and those 3 characters will be \'c\', \'aa\' and \'d\'.  Because of this, we have to generate collation element(s) one character at a time.\u003c\\/p\u003e\\n\\n\u003cp\u003eWould love to hear if there are any other ideas to cut down on object creation.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12535958_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535958_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 16:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T16:09:46+0000\'\u003e18\\/Oct\\/07 16:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks, Knut,  for checking my commit. I was hesitant too about all the objects creations. \\n\\n I think we can definitely make the first change suggested by you. I will go ahead and give it a try \\n************ part of the change suggested by Knut *************** \\na) We could use the compare() method instead of iterators. It caches and reuses the iterators across calls and therefore it might be more efficient. It would also simplify the code, since the else clause in checkEquality() could be rewritten to:  \\n\\n } else {\\/\\/dealing with territory based character string  \\n    return collator.compare(new String(pat, pLoc, 1), new String(val, vLoc, 1)) == 0:  \\n}  \\n************ end of part of the change suggested by Knut ******** \\n\\n But as for the second alternative, we can\'t create a CollationElementIerator for the entire string ahead of time for LIKE operation. Let me use an example to illustrate why. In Norway, the collation element(s) returned for string \'aa\' is not same as collation element(s) return for one \'a\' at a time. So, when the user has a WHERE clause  \'caad\' LIKE \'%a%\', SQL spec requires us to return a TRUE for this WHERE clause. We will not implement that behavior if we generated collation elements for entire string \'caad\' at one shot. We need to break \'caad\' into four characters and have collation element for each one of those 4 characters. In Norway, if we generated collation elements for string \'caad\', it will find only 3 characters in that string and those 3 characters will be \'c\', \'aa\' and \'d\'.  Because of this, we have to generate collation element(s) one character at a time. \\n\\n Would love to hear if there are any other ideas to cut down on object creation.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12535972\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12535972&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12535972\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12535972_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535972_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 17:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T17:00:08+0000\'\u003e18\\/Oct\\/07 17:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAccording to the javadoc for CollationElementIterator, setOffset() and getOffset() work on characters, not on collation elements, so I think you can use those methods to detect the aa case. If you have this code in locale no_NO:\u003c\\/p\u003e\\n\\n\u003cp\u003e  CollationElementIterator it = collator.getCollationElementIterator(\\\"aa\\\");\u003cbr\\/\u003e\\n  int coll = it.next();\u003c\\/p\u003e\\n\\n\u003cp\u003eI think it.getOffset() will return 0 before the call to next() and 2 after the call. So you\'ll notice that there are more than one character, and, if required, use a heavier test for that character.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12535972_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535972_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 17:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T17:00:08+0000\'\u003e18\\/Oct\\/07 17:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    According to the javadoc for CollationElementIterator, setOffset() and getOffset() work on characters, not on collation elements, so I think you can use those methods to detect the aa case. If you have this code in locale no_NO: \\n\\n   CollationElementIterator it = collator.getCollationElementIterator(\\\"aa\\\"); \\n  int coll = it.next(); \\n\\n I think it.getOffset() will return 0 before the call to next() and 2 after the call. So you\'ll notice that there are more than one character, and, if required, use a heavier test for that character.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12535974\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12535974&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12535974\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12535974_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535974_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T17:08:59+0000\'\u003e18\\/Oct\\/07 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnother simple way to cut down the string allocations... I think you could express checkEquality() like this:\u003c\\/p\u003e\\n\\n\u003cp\u003e    if (val\u003cspan class=\\\"error\\\"\u003e&#91;vLoc&#93;\u003c\\/span\u003e == pat\u003cspan class=\\\"error\\\"\u003e&#91;pLoc&#93;\u003c\\/span\u003e) \u003c\\/p\u003e\\n{\\n        \\/\\/ same character, so two strings consisting of this\\n        \\/\\/ single character must be equal regardless of territory\\n        return true;\\n    }\\n\u003cp\u003e else if (collator == null) \u003c\\/p\u003e\\n{\\n        \\/\\/ not same character, must be unequal in UCS_BASIC\\n        return false;\\n    }\\n\\n\u003cp\u003e    String s1 = new String(val, vLoc, 1);\u003cbr\\/\u003e\\n    String s1 = new String(pat, pLoc, 1);\u003c\\/p\u003e\\n\\n\u003cp\u003e    return collator.compare(s1, s2) == 0;\u003c\\/p\u003e\\n\\n\u003cp\u003eThis would only allocate new objects if the characters are not equal.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12535974_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535974_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T17:08:59+0000\'\u003e18\\/Oct\\/07 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Another simple way to cut down the string allocations... I think you could express checkEquality() like this: \\n\\n     if (val &#91;vLoc&#93;  == pat &#91;pLoc&#93; )  \\n{\\n        \\/\\/ same character, so two strings consisting of this\\n        \\/\\/ single character must be equal regardless of territory\\n        return true;\\n    }\\n  else if (collator == null)  \\n{\\n        \\/\\/ not same character, must be unequal in UCS_BASIC\\n        return false;\\n    }\\n\\n     String s1 = new String(val, vLoc, 1); \\n    String s1 = new String(pat, pLoc, 1); \\n\\n     return collator.compare(s1, s2) == 0; \\n\\n This would only allocate new objects if the characters are not equal.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12535975\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12535975&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12535975\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12535975_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535975_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 17:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T17:14:29+0000\'\u003e18\\/Oct\\/07 17:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKnut, I really like the last suggestion because it will keep the code easy to understand. I think the earlier suggestion about using getOffset and setOffset will complicate the code and make it hard to understand and maintain.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will work on your last suggestion.\u003c\\/p\u003e\\n\\n\u003cp\u003e*****\u003cb\u003egreat suggestion by Knut to cut down on unnecessary objection creations\u003c\\/b\u003e***\u003cbr\\/\u003e\\nAnother simple way to cut down the string allocations... I think you could express checkEquality() like this: \u003c\\/p\u003e\\n\\n\u003cp\u003e    if (val\u003cspan class=\\\"error\\\"\u003e&#91;vLoc&#93;\u003c\\/span\u003e == pat\u003cspan class=\\\"error\\\"\u003e&#91;pLoc&#93;\u003c\\/span\u003e) \u003c\\/p\u003e\\n{ \\n        \\/\\/ same character, so two strings consisting of this \\n        \\/\\/ single character must be equal regardless of territory \\n        return true; \\n    }\\n\u003cp\u003e else if (collator == null) \u003c\\/p\u003e\\n{ \\n        \\/\\/ not same character, must be unequal in UCS_BASIC \\n        return false; \\n    }\\n\u003cp\u003e \u003c\\/p\u003e\\n\\n\u003cp\u003e    String s1 = new String(val, vLoc, 1); \u003cbr\\/\u003e\\n    String s1 = new String(pat, pLoc, 1); \u003c\\/p\u003e\\n\\n\u003cp\u003e    return collator.compare(s1, s2) == 0; \u003c\\/p\u003e\\n\\n\u003cp\u003eThis would only allocate new objects if the characters are not equal. \u003cbr\\/\u003e\\n******************************************************************************************\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12535975_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535975_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 17:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T17:14:29+0000\'\u003e18\\/Oct\\/07 17:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Knut, I really like the last suggestion because it will keep the code easy to understand. I think the earlier suggestion about using getOffset and setOffset will complicate the code and make it hard to understand and maintain. \\n\\n I will work on your last suggestion. \\n\\n ***** great suggestion by Knut to cut down on unnecessary objection creations *** \\nAnother simple way to cut down the string allocations... I think you could express checkEquality() like this:  \\n\\n     if (val &#91;vLoc&#93;  == pat &#91;pLoc&#93; )  \\n{ \\n        \\/\\/ same character, so two strings consisting of this \\n        \\/\\/ single character must be equal regardless of territory \\n        return true; \\n    }\\n  else if (collator == null)  \\n{ \\n        \\/\\/ not same character, must be unequal in UCS_BASIC \\n        return false; \\n    }\\n   \\n\\n     String s1 = new String(val, vLoc, 1);  \\n    String s1 = new String(pat, pLoc, 1);  \\n\\n     return collator.compare(s1, s2) == 0;  \\n\\n This would only allocate new objects if the characters are not equal.  \\n******************************************************************************************              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12535987\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12535987&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12535987\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12535987_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535987_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 17:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T17:36:14+0000\'\u003e18\\/Oct\\/07 17:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOne more question: In the discussion above, I see that the special case where two strings of different length map to the same sequence of collation elements, has been discussed. What about two characters, c1 and c2, which have different Unicode codepoints, but map to the same sequence of collation elements. Should both c1 = c2 and c1 LIKE c2 be true? That\'s how it\'s implemented, but I\'m not sure whether c1 LIKE c2 should be true or false. I haven\'t checked what the standard says (and I\'m not sure I want to... \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e ), but it feels a bit strange that two different characters should be LIKE because they have the same collation elements, when \'aa\' is not LIKE \'\\u00E5\' because they are not the same single character. I understand how we can split the character sequence \'aa\' into the single characters \'a\' and \'a\'. I don\'t understand how we can take a single collation element \'aa\' and split it into two separate collation elements \'a\' and \'a\'. I\'m sure the standard says it\'s correctly implemented, and I guess its wording will make it quite clear, perhaps even logical, that it has to be that way. I just wanted to double check that we had verified it...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12535987_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535987_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 17:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T17:36:14+0000\'\u003e18\\/Oct\\/07 17:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    One more question: In the discussion above, I see that the special case where two strings of different length map to the same sequence of collation elements, has been discussed. What about two characters, c1 and c2, which have different Unicode codepoints, but map to the same sequence of collation elements. Should both c1 = c2 and c1 LIKE c2 be true? That\'s how it\'s implemented, but I\'m not sure whether c1 LIKE c2 should be true or false. I haven\'t checked what the standard says (and I\'m not sure I want to...   ), but it feels a bit strange that two different characters should be LIKE because they have the same collation elements, when \'aa\' is not LIKE \'\\u00E5\' because they are not the same single character. I understand how we can split the character sequence \'aa\' into the single characters \'a\' and \'a\'. I don\'t understand how we can take a single collation element \'aa\' and split it into two separate collation elements \'a\' and \'a\'. I\'m sure the standard says it\'s correctly implemented, and I guess its wording will make it quite clear, perhaps even logical, that it has to be that way. I just wanted to double check that we had verified it...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12535993\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12535993&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12535993\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12535993_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535993_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 17:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T17:53:59+0000\'\u003e18\\/Oct\\/07 17:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI just realized how confusing my comment must have been... \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m not questioning whether it\'s correct that \'aa\' LIKE \'\\u00E5\' is false. What I\'m questioning is whether we can split a string into its separate characters, possibly splitting a single collation element into multiple different elements, and then do a comparison of the collation elements on each single character. To me it feels like we should forget about the collation elements once we have split the string into characters, since the information about collation elements got lost in the process of splitting, and just do a simple codepoint comparison on the character level. Again, I\'m sure the standard says I\'m wrong...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12535993_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535993_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 17:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T17:53:59+0000\'\u003e18\\/Oct\\/07 17:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I just realized how confusing my comment must have been...   \\n\\n I\'m not questioning whether it\'s correct that \'aa\' LIKE \'\\u00E5\' is false. What I\'m questioning is whether we can split a string into its separate characters, possibly splitting a single collation element into multiple different elements, and then do a comparison of the collation elements on each single character. To me it feels like we should forget about the collation elements once we have split the string into characters, since the information about collation elements got lost in the process of splitting, and just do a simple codepoint comparison on the character level. Again, I\'m sure the standard says I\'m wrong...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12536004\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12536004&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12536004\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12536004_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536004_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 18:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T18:36:12+0000\'\u003e18\\/Oct\\/07 18:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKnut, we can not ignore the collation and just compare the codepoint for territory based characters involved in LIKE operaiton. This is based of SQL spec for LIKE(Section 8.5) General Rules 3cii4) \u003cbr\\/\u003e\\n4) If the i-th substring of PCV is a single character specifier, then the i-th substring of MCV contains exactly 1 (one) character that is equal to the character represented by the single character specifier according to the collation of the &lt;like predicate&gt;. \u003c\\/p\u003e\\n\\n\u003cp\u003eHere it says that we need to establish the equality according to the collation of the &lt;like predicate&gt;.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs always, let me know if I interpretation of SQL is incorrect.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12536004_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536004_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/07 18:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-18T18:36:12+0000\'\u003e18\\/Oct\\/07 18:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Knut, we can not ignore the collation and just compare the codepoint for territory based characters involved in LIKE operaiton. This is based of SQL spec for LIKE(Section 8.5) General Rules 3cii4)  \\n4) If the i-th substring of PCV is a single character specifier, then the i-th substring of MCV contains exactly 1 (one) character that is equal to the character represented by the single character specifier according to the collation of the &lt;like predicate&gt;.  \\n\\n Here it says that we need to establish the equality according to the collation of the &lt;like predicate&gt;. \\n\\n As always, let me know if I interpretation of SQL is incorrect.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12536105\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12536105&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12536105\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12536105_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536105_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Oct\\/07 04:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-19T04:54:57+0000\'\u003e19\\/Oct\\/07 04:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have entered jira entry \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3136\\\" title=\\\"Cut down on object creations in LIKE clause implementation of territory based characters.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3136\\\"\u003e\u003cdel\u003eDERBY-3136\u003c\\/del\u003e\u003c\\/a\u003e to improve on object creations.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12536105_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536105_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Oct\\/07 04:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-19T04:54:57+0000\'\u003e19\\/Oct\\/07 04:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have entered jira entry   DERBY-3136   to improve on object creations.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12536170\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12536170&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12536170\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12536170_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536170_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Oct\\/07 10:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-19T10:12:57+0000\'\u003e19\\/Oct\\/07 10:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for pointing me to the right part of the standard, Mamta. I interpret general rule 3cii the same way as you do.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12536170_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536170_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Oct\\/07 10:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-19T10:12:57+0000\'\u003e19\\/Oct\\/07 10:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for pointing me to the right part of the standard, Mamta. I interpret general rule 3cii the same way as you do.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12536570\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12536570&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12536570\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12536570_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536570_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/07 05:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-22T05:39:01+0000\'\u003e22\\/Oct\\/07 05:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe coding for this jira entry is over(I have created a new jira entry \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3136\\\" title=\\\"Cut down on object creations in LIKE clause implementation of territory based characters.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3136\\\"\u003e\u003cdel\u003eDERBY-3136\u003c\\/del\u003e\u003c\\/a\u003e to improve on object creations). \u003c\\/p\u003e\\n\\n\u003cp\u003eI am wondering though if we should include something in our documentation to show the difference between = and LIKE in a territory based database. For eg, even though \'aa\' = \'\\u00E5\' in Norwegian territory, \'aa\' LIKE \'\\u00E5\'  will not return true in Norwegian territory. That is, we probably should document somewhere that LIKE is entirely collation comparison of one character at a time in a territory based database.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12536570_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536570_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/07 05:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-22T05:39:01+0000\'\u003e22\\/Oct\\/07 05:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The coding for this jira entry is over(I have created a new jira entry   DERBY-3136   to improve on object creations).  \\n\\n I am wondering though if we should include something in our documentation to show the difference between = and LIKE in a territory based database. For eg, even though \'aa\' = \'\\u00E5\' in Norwegian territory, \'aa\' LIKE \'\\u00E5\'  will not return true in Norwegian territory. That is, we probably should document somewhere that LIKE is entirely collation comparison of one character at a time in a territory based database.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12536705\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12536705&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12536705\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12536705_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536705_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/07 15:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-22T15:21:22+0000\'\u003e22\\/Oct\\/07 15:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhen you said \\\"even though \'aa\' = \'\\u00E5\' in Norwegian territory\\\", do you mean the SQL = operator? That doesn\'t seem to work on trunk. Is there a JIRA issue I have missed?\u003c\\/p\u003e\\n\\n\u003cp\u003eij&gt; connect \'jdbc:derby:nodb;create=true;territory=no_NO;collation=TERRITORY_BASED\';\u003cbr\\/\u003e\\nij&gt; select * from sysibm.sysdummy1 where \'\\u00E5\' = \'aa\';\u003cbr\\/\u003e\\nIBM&amp;\u003c\\/p\u003e\\n\u003chr \\/\u003e\\n\\n\u003cp\u003e0 rows selected\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12536705_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536705_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/07 15:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-22T15:21:22+0000\'\u003e22\\/Oct\\/07 15:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    When you said \\\"even though \'aa\' = \'\\u00E5\' in Norwegian territory\\\", do you mean the SQL = operator? That doesn\'t seem to work on trunk. Is there a JIRA issue I have missed? \\n\\n ij&gt; connect \'jdbc:derby:nodb;create=true;territory=no_NO;collation=TERRITORY_BASED\'; \\nij&gt; select * from sysibm.sysdummy1 where \'\\u00E5\' = \'aa\'; \\nIBM&amp; \\n \\n\\n 0 rows selected              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12536768\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12536768&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12536768\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12536768_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536768_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/07 17:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-22T17:59:43+0000\'\u003e22\\/Oct\\/07 17:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKnut, yes, I did mean the SQL = operation. Also, thanks for your testing.\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom various discussions in the past on Derby list about aa and \\u00E5 in Norwegian, I made the assumption that the JVM\'s collation table for Norwegian must have same collation element for aa and \\u00E5. But that is not the case as shwon by your test case inside ij. I also wrote a very simple test case outside of Derby(copied below) which shows the collation elements for aa and \\u00E5 are different in Norwegian and that is why the SQL operation \'aa\'=\'\\u00E5\' is returning false.\u003c\\/p\u003e\\n\\n\u003cp\u003eRuleBasedCollator myCollator = (RuleBasedCollator)Collator.getInstance(new Locale(\\\"da\\\",\\\"DK\\\"));\u003c\\/p\u003e\\n\\n\u003cp\u003eSystem.out.println(\\\"what happens if iterator is on aa string\\\");\u003cbr\\/\u003e\\nCollationElementIterator aIterator = myCollator.getCollationElementIterator(\\\"aa\\\");\u003cbr\\/\u003e\\nSystem.out.println(\\\"next is \\\" + aIterator.next());\u003cbr\\/\u003e\\nSystem.out.println(\\\"offset is \\\" + aIterator.getOffset());\u003cbr\\/\u003e\\nSystem.out.println(\\\"next is \\\" + aIterator.next());\u003cbr\\/\u003e\\nSystem.out.println(\\\"offset is \\\" + aIterator.getOffset());\u003c\\/p\u003e\\n\\n\u003cp\u003eSystem.out.println(\\\"what happens if iterator is on \\u00E5 string\\\");\u003cbr\\/\u003e\\naIterator = myCollator.getCollationElementIterator(\\\"\\u00E5\\\");\u003cbr\\/\u003e\\nSystem.out.println(\\\"next is \\\" + aIterator.next());\u003cbr\\/\u003e\\nSystem.out.println(\\\"offset is \\\" + aIterator.getOffset());\u003cbr\\/\u003e\\nSystem.out.println(\\\"next is \\\" + aIterator.next());\u003cbr\\/\u003e\\nSystem.out.println(\\\"offset is \\\" + aIterator.getOffset());\u003c\\/p\u003e\\n\\n\u003cp\u003eOutput of the code above\u003cbr\\/\u003e\\nwhat happens if iterator is on aa string\u003cbr\\/\u003e\\nnext is 7405570\u003cbr\\/\u003e\\noffset is 2\u003cbr\\/\u003e\\nnext is -1\u003cbr\\/\u003e\\noffset is 2\u003cbr\\/\u003e\\nwhat happens if iterator is on \\u03C3 string\u003cbr\\/\u003e\\nnext is 7405568\u003cbr\\/\u003e\\noffset is 1\u003cbr\\/\u003e\\nnext is -1\u003cbr\\/\u003e\\noffset is 1\u003c\\/p\u003e\\n\\n\u003cp\u003eSo, my example to show different behavior of SQL LIKE and SQL = is not correct. \u003c\\/p\u003e\\n\\n\u003cp\u003eI am wondering if anyone knows of any characters in a language where the characters are different but they have the same collation elements in that language. The test case is going to require different \u003cb\u003enumber\u003c\\/b\u003e of characters in each side of =. Having different \u003cb\u003enumber\u003c\\/b\u003e of characters(but same collation element(s)) is crucial to show the difference between = and LIKE.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12536768_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536768_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/07 17:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-22T17:59:43+0000\'\u003e22\\/Oct\\/07 17:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Knut, yes, I did mean the SQL = operation. Also, thanks for your testing. \\n\\n From various discussions in the past on Derby list about aa and \\u00E5 in Norwegian, I made the assumption that the JVM\'s collation table for Norwegian must have same collation element for aa and \\u00E5. But that is not the case as shwon by your test case inside ij. I also wrote a very simple test case outside of Derby(copied below) which shows the collation elements for aa and \\u00E5 are different in Norwegian and that is why the SQL operation \'aa\'=\'\\u00E5\' is returning false. \\n\\n RuleBasedCollator myCollator = (RuleBasedCollator)Collator.getInstance(new Locale(\\\"da\\\",\\\"DK\\\")); \\n\\n System.out.println(\\\"what happens if iterator is on aa string\\\"); \\nCollationElementIterator aIterator = myCollator.getCollationElementIterator(\\\"aa\\\"); \\nSystem.out.println(\\\"next is \\\" + aIterator.next()); \\nSystem.out.println(\\\"offset is \\\" + aIterator.getOffset()); \\nSystem.out.println(\\\"next is \\\" + aIterator.next()); \\nSystem.out.println(\\\"offset is \\\" + aIterator.getOffset()); \\n\\n System.out.println(\\\"what happens if iterator is on \\u00E5 string\\\"); \\naIterator = myCollator.getCollationElementIterator(\\\"\\u00E5\\\"); \\nSystem.out.println(\\\"next is \\\" + aIterator.next()); \\nSystem.out.println(\\\"offset is \\\" + aIterator.getOffset()); \\nSystem.out.println(\\\"next is \\\" + aIterator.next()); \\nSystem.out.println(\\\"offset is \\\" + aIterator.getOffset()); \\n\\n Output of the code above \\nwhat happens if iterator is on aa string \\nnext is 7405570 \\noffset is 2 \\nnext is -1 \\noffset is 2 \\nwhat happens if iterator is on \\u03C3 string \\nnext is 7405568 \\noffset is 1 \\nnext is -1 \\noffset is 1 \\n\\n So, my example to show different behavior of SQL LIKE and SQL = is not correct.  \\n\\n I am wondering if anyone knows of any characters in a language where the characters are different but they have the same collation elements in that language. The test case is going to require different  number  of characters in each side of =. Having different  number  of characters(but same collation element(s)) is crucial to show the difference between = and LIKE.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12536792\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12536792&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12536792\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12536792_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536792_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/07 18:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-22T18:59:37+0000\'\u003e22\\/Oct\\/07 18:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Mamta, that makes sense.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I am wondering if anyone knows of any characters in a language where\u003cbr\\/\u003e\\n&gt; the characters are different but they have the same collation\u003cbr\\/\u003e\\n&gt; elements in that language.\u003c\\/p\u003e\\n\\n\u003cp\u003eFWIW, I grepped for \'=\' in the CollationData classes (they contain the\u003cbr\\/\u003e\\nrules used by the locale-specific RuleBasedCollators) in OpenJDK but I\u003cbr\\/\u003e\\ndidn\'t find any multi-character sequences that had the same collation\u003cbr\\/\u003e\\nelements as another character or sequence of characters.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12536792_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12536792_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/07 18:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-22T18:59:37+0000\'\u003e22\\/Oct\\/07 18:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Mamta, that makes sense. \\n\\n &gt; I am wondering if anyone knows of any characters in a language where \\n&gt; the characters are different but they have the same collation \\n&gt; elements in that language. \\n\\n FWIW, I grepped for \'=\' in the CollationData classes (they contain the \\nrules used by the locale-specific RuleBasedCollators) in OpenJDK but I \\ndidn\'t find any multi-character sequences that had the same collation \\nelements as another character or sequence of characters.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12539108\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12539108&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12539108\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"scotsmatrix\\\" id=\\\"commentauthor_12539108_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=scotsmatrix\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"scotsmatrix\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Laura Stewart\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12539108_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Oct\\/07 15:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-31T15:52:27+0000\'\u003e31\\/Oct\\/07 15:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have opened Derby-3166 as a doc issue for this dev issue.  My impression is that LIKE only compares single characters and contractions (aa or ch) are not compared. Is there anything else that needs to be documented?  Please add any comments that you have about what needs to be updated in the docs to the new doc issue Derby-3166.  Thanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"scotsmatrix\\\" id=\\\"commentauthor_12539108_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=scotsmatrix\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"scotsmatrix\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Laura Stewart\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12539108_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Oct\\/07 15:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-31T15:52:27+0000\'\u003e31\\/Oct\\/07 15:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have opened Derby-3166 as a doc issue for this dev issue.  My impression is that LIKE only compares single characters and contractions (aa or ch) are not compared. Is there anything else that needs to be documented?  Please add any comments that you have about what needs to be updated in the docs to the new doc issue Derby-3166.  Thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12540281\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12540281&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12540281\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12540281_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12540281_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Nov\\/07 21:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-05T21:27:44+0000\'\u003e05\\/Nov\\/07 21:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached, please find the release notes for this Jira entry. I tend to be verbose with my notes, so please feel free to condense them or offer any other suggestions.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, when I tried using \u003cbr\\/\u003e\\njava org.apache.derbyBuild.ReleaseNoteReader releaseNotes.html\u003cbr\\/\u003e\\nI kept getting following error\u003cbr\\/\u003e\\nException in thread \\\"main\\\" java.io.UTFDataFormatException: Invalid byte 1 of 1-byte UTF-8 sequence.\u003cbr\\/\u003e\\n        at org.apache.xerces.impl.io.UTF8Reader.invalidByte(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.impl.io.UTF8Reader.read(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.impl.XMLEntityScanner.load(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.impl.XMLEntityScanner.scanContent(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanContent(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)\u003cbr\\/\u003e\\n        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:98)\u003cbr\\/\u003e\\n        at org.apache.derbyBuild.ReleaseNoteReader.getReleaseNote(ReleaseNoteReader.java:130)\u003cbr\\/\u003e\\n        at org.apache.derbyBuild.ReleaseNoteReader.main(ReleaseNoteReader.java:107)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12540281_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12540281_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Nov\\/07 21:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-05T21:27:44+0000\'\u003e05\\/Nov\\/07 21:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached, please find the release notes for this Jira entry. I tend to be verbose with my notes, so please feel free to condense them or offer any other suggestions. \\n\\n Also, when I tried using  \\njava org.apache.derbyBuild.ReleaseNoteReader releaseNotes.html \\nI kept getting following error \\nException in thread \\\"main\\\" java.io.UTFDataFormatException: Invalid byte 1 of 1-byte UTF-8 sequence. \\n        at org.apache.xerces.impl.io.UTF8Reader.invalidByte(Unknown Source) \\n        at org.apache.xerces.impl.io.UTF8Reader.read(Unknown Source) \\n        at org.apache.xerces.impl.XMLEntityScanner.load(Unknown Source) \\n        at org.apache.xerces.impl.XMLEntityScanner.scanContent(Unknown Source) \\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanContent(Unknown Source) \\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source) \\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source) \\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) \\n        at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source) \\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) \\n        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source) \\n        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source) \\n        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:98) \\n        at org.apache.derbyBuild.ReleaseNoteReader.getReleaseNote(ReleaseNoteReader.java:130) \\n        at org.apache.derbyBuild.ReleaseNoteReader.main(ReleaseNoteReader.java:107)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12540291\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12540291&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12540291\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12540291_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12540291_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Nov\\/07 22:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-05T22:45:05+0000\'\u003e05\\/Nov\\/07 22:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching the release notes with proper name.  Kathey mentioned that \\\"I think the name should be releaseNote.html to get picked up by the release notes tool. Kathey\\\"\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12540291_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12540291_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Nov\\/07 22:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-05T22:45:05+0000\'\u003e05\\/Nov\\/07 22:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching the release notes with proper name.  Kathey mentioned that \\\"I think the name should be releaseNote.html to get picked up by the release notes tool. Kathey\\\"              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12542846\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12542846&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12542846\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12542846_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12542846_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/07 18:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-15T18:54:40+0000\'\u003e15\\/Nov\\/07 18:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCan this issue be resolved?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12542846_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12542846_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/07 18:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-15T18:54:40+0000\'\u003e15\\/Nov\\/07 18:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Can this issue be resolved?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12545588\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12545588&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12545588\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12545588_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12545588_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/07 20:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-26T20:21:12+0000\'\u003e26\\/Nov\\/07 20:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have created a new jira entry \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3228\\\" title=\\\"Add a test case for collation where in some territory, more than one character sequence(say n characters and it is seq1) has same collation elements as some other character sequence(with &gt;n or &lt;n characters and say it is seq2) \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3228\\\"\u003eDERBY-3228\u003c\\/a\u003e for the only remaining item for this jira entry which is adding a specific test case. (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3228\\\" title=\\\"Add a test case for collation where in some territory, more than one character sequence(say n characters and it is seq1) has same collation elements as some other character sequence(with &gt;n or &lt;n characters and say it is seq2) \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3228\\\"\u003eDERBY-3228\u003c\\/a\u003e\'s description reads as \\\"Add a test case for collation where in some territory, more than one character sequence(say n characters and say that character sequence is seq1) has same collation elements as some other character sequence(with &gt;n or &lt;n characters and say that character sequence is seq2) so we can demonstrate that for that territory the predicate seq1=seq2 will return TRUE but predicate seq1 LIKE seq2 will return FALSE. The engine code changes for this test case went in as part of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2967\\\" title=\\\"Single character does not match high value unicode character with collation TERRITORY_BASED\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2967\\\"\u003e\u003cdel\u003eDERBY-2967\u003c\\/del\u003e\u003c\\/a\u003e. More info if needed can be found there).\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eWill go ahead and close this jira entry so that the release notes attached to it can be included as part of 10.3.2 release.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12545588_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12545588_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/07 20:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-26T20:21:12+0000\'\u003e26\\/Nov\\/07 20:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have created a new jira entry  DERBY-3228  for the only remaining item for this jira entry which is adding a specific test case. ( DERBY-3228 \'s description reads as \\\"Add a test case for collation where in some territory, more than one character sequence(say n characters and say that character sequence is seq1) has same collation elements as some other character sequence(with &gt;n or &lt;n characters and say that character sequence is seq2) so we can demonstrate that for that territory the predicate seq1=seq2 will return TRUE but predicate seq1 LIKE seq2 will return FALSE. The engine code changes for this test case went in as part of   DERBY-2967  . More info if needed can be found there).\\\" \\n\\n Will go ahead and close this jira entry so that the release notes attached to it can be included as part of 10.3.2 release.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12545603\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12545603&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12545603\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12545603_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12545603_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/07 21:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-26T21:03:27+0000\'\u003e26\\/Nov\\/07 21:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ereattaching release note. There was some sort of problem with the original release note. It gave:\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;generateReleaseNotes&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;generateReleaseNotes&#93;\u003c\\/span\u003e Unable to read or parse release note for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2967\\\" title=\\\"Single character does not match high value unicode character with collation TERRITORY_BASED\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2967\\\"\u003e\u003cdel\u003eDERBY-2967\u003c\\/del\u003e\u003c\\/a\u003e: org.xml.sax.SAXParseException: Invalid byte\u003cbr\\/\u003e\\n1 of 1-byte UTF-8 sequence.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;generateReleaseNotes&#93;\u003c\\/span\u003e org.xml.sax.SAXParseException: Invalid byte 1 of 1-byte UTF-8 sequence.\u003c\\/p\u003e\\n\\n\u003cp\u003eContent has not changed\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12545603_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12545603_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/07 21:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-26T21:03:27+0000\'\u003e26\\/Nov\\/07 21:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    reattaching release note. There was some sort of problem with the original release note. It gave: \\n &#91;generateReleaseNotes&#93;  \\n &#91;generateReleaseNotes&#93;  Unable to read or parse release note for   DERBY-2967  : org.xml.sax.SAXParseException: Invalid byte \\n1 of 1-byte UTF-8 sequence. \\n &#91;generateReleaseNotes&#93;  org.xml.sax.SAXParseException: Invalid byte 1 of 1-byte UTF-8 sequence. \\n\\n Content has not changed              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12545630\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12545630&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12545630\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12545630_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12545630_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/07 22:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-26T22:26:40+0000\'\u003e26\\/Nov\\/07 22:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey, thanks for trying to resolve the problem with release notes for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2967\\\" title=\\\"Single character does not match high value unicode character with collation TERRITORY_BASED\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2967\\\"\u003e\u003cdel\u003eDERBY-2967\u003c\\/del\u003e\u003c\\/a\u003e. \u003c\\/p\u003e\\n\\n\u003cp\u003eI had not intended to use any unprintable characters in the release notes. I noticed that you mail to derby-dev about release notes has ? characters(I guess those are the unprintable characters) in the \\\"Symptoms Seen by Applications Affected by Change\\\" section for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2967\\\" title=\\\"Single character does not match high value unicode character with collation TERRITORY_BASED\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2967\\\"\u003e\u003cdel\u003eDERBY-2967\u003c\\/del\u003e\u003c\\/a\u003e. Those ? characters should really be just \'. I see that there are other places in \\\"Symptoms Seen by Applications Affected by Change\\\" where \' didn\'t get changed to unprintable characters. I am not sure why some of \' are getting treated as unprintable character. So, in short, wherever we see ? in the \\\"Symptoms Seen by Applications Affected by Change\\\" section for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2967\\\" title=\\\"Single character does not match high value unicode character with collation TERRITORY_BASED\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2967\\\"\u003e\u003cdel\u003eDERBY-2967\u003c\\/del\u003e\u003c\\/a\u003e, we should really have \' there. \u003c\\/p\u003e\\n\\n\u003cp\u003eHope this is clear,\u003cbr\\/\u003e\\nMamta\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12545630_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12545630_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/07 22:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-26T22:26:40+0000\'\u003e26\\/Nov\\/07 22:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey, thanks for trying to resolve the problem with release notes for   DERBY-2967  .  \\n\\n I had not intended to use any unprintable characters in the release notes. I noticed that you mail to derby-dev about release notes has ? characters(I guess those are the unprintable characters) in the \\\"Symptoms Seen by Applications Affected by Change\\\" section for   DERBY-2967  . Those ? characters should really be just \'. I see that there are other places in \\\"Symptoms Seen by Applications Affected by Change\\\" where \' didn\'t get changed to unprintable characters. I am not sure why some of \' are getting treated as unprintable character. So, in short, wherever we see ? in the \\\"Symptoms Seen by Applications Affected by Change\\\" section for   DERBY-2967  , we should really have \' there.  \\n\\n Hope this is clear, \\nMamta              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12546315\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12546315&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12546315\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12546315_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12546315_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Nov\\/07 17:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-28T17:48:43+0000\'\u003e28\\/Nov\\/07 17:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttach release note with \' instead of ? to try to get release note generator working.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12546315_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12546315_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Nov\\/07 17:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-28T17:48:43+0000\'\u003e28\\/Nov\\/07 17:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attach release note with \' instead of ? to try to get release note generator working.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12546341\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2967?focusedCommentId=12546341&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12546341\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12546341_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12546341_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Nov\\/07 18:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-28T18:34:18+0000\'\u003e28\\/Nov\\/07 18:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey, I did a quick review of the release note and it looks good. Hope the release note generator works with it. Thanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12546341_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12546341_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Nov\\/07 18:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-28T18:34:18+0000\'\u003e28\\/Nov\\/07 18:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey, I did a quick review of the release note and it looks good. Hope the release note generator works with it. Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520239097214"> 
    <input type="hidden" title="jira.request.server.time" value="361"> 
    <input type="hidden" title="jira.request.id" value="518x94378951x5"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="8"> 
    <input type="hidden" title="db.reads.time.in.ms" value="59"> 
    <input type="hidden" title="db.conns.time.in.ms" value="67"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 518x94378951x5
	          REQUEST TIMESTAMP : [05/Mar/2018:08:38:17 +0000]
	               REQUEST TIME : 0.3610
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 8

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=32, elapsedTotal=59966687, elapsedMin=514447, elapsedMax=17992782, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=36, elapsedTotal=67308023, elapsedMin=550314, elapsedMax=18034279, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>