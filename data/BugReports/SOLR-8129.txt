<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|77077a4882b30c01db085a1d9312a53e6aa92bc5|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"4b09302952fa98\"";
WRM._unparsedData["project-id"]="12310230";
WRM._unparsedData["project-key"]="\"SOLR\"";
WRM._unparsedData["project-name"]="\"Solr\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310230";
WRM._unparsedData["projectKey"]="\"SOLR\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="SOLR-8129"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[SOLR-8129] HdfsChaosMonkeyNothingIsSafeTest failures - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[SOLR-8129] HdfsChaosMonkeyNothingIsSafeTest failures - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/SOLR" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-8129">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310230" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Solr'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310230&amp;avatarId=22151"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/SOLR">Solr</a></li>
                 <li><a class="issue-link" data-issue-key="SOLR-8129" href="/jira/browse/SOLR-8129" id="key-val" rel="12902452">SOLR-8129</a></li>
                </ol>
                <h1 id="summary-val">HdfsChaosMonkeyNothingIsSafeTest failures</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-8129"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/SOLR-8129/SOLR-8129.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/SOLR-8129/SOLR-8129.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/SOLR-8129/SOLR-8129.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/SOLR-8129/SOLR-8129.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+6.5" title="6.5 Minor release after 6.4">6.5</a>, <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+7.0" title="7.0 First 7x release, major release after 6.6">7.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+component+%3D+SolrCloud" title="SolrCloud ">SolrCloud</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12902452-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>New HDFS chaos test in <a href="https://issues.apache.org/jira/browse/SOLR-8123" title="Add HdfsChaosMonkeyNothingIsSafeTest test." class="issue-link" data-issue-key="SOLR-8123"><del>SOLR-8123</del></a> hits a number of types of failures, including shard inconsistency.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/SOLR-8129?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/SOLR-8129?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/SOLR-8129?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/SOLR-8129?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12768337" data-issue-id="12902452" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12768337/fail.151005_064958" draggable="true" data-downloadurl="application/octet-stream:fail.151005_064958:https://issues.apache.org/jira/secure/attachment/12768337/fail.151005_064958"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12768337/fail.151005_064958" title="Latest  23/Oct/15 16:48 - Yonik Seeley" draggable="true" data-downloadurl="application/octet-stream:fail.151005_064958:https://issues.apache.org/jira/secure/attachment/12768337/fail.151005_064958">fail.151005_064958</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-10-23T16:48:45.305Z">23/Oct/15 16:48</time>
                   </dd>
                   <dd class="attachment-size">
                    11.25 MB
                   </dd>
                   <dd class="attachment-author">
                    Yonik Seeley
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12765192" data-issue-id="12902452" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12765192/fail.151005_080319" draggable="true" data-downloadurl="application/octet-stream:fail.151005_080319:https://issues.apache.org/jira/secure/attachment/12765192/fail.151005_080319"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12765192/fail.151005_080319" title="Latest  06/Oct/15 15:59 - Yonik Seeley" draggable="true" data-downloadurl="application/octet-stream:fail.151005_080319:https://issues.apache.org/jira/secure/attachment/12765192/fail.151005_080319">fail.151005_080319</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-10-06T15:59:33.565Z">06/Oct/15 15:59</time>
                   </dd>
                   <dd class="attachment-size">
                    13.68 MB
                   </dd>
                   <dd class="attachment-author">
                    Yonik Seeley
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12933397_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="SOLR-8586: Implement hash over all documents to check for shard synchronization"> <a href="/jira/browse/SOLR-8586" data-issue-key="SOLR-8586" class="issue-link link-title resolution">SOLR-8586</a> <span class="link-summary">Implement hash over all documents to check for shard synchronization</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12736076_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="SOLR-6406: ConcurrentUpdateSolrServer hang in blockUntilFinished."> <a href="/jira/browse/SOLR-6406" data-issue-key="SOLR-6406" class="issue-link link-title resolution">SOLR-6406</a> <span class="link-summary">ConcurrentUpdateSolrServer hang in blockUntilFinished.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12907664_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="SOLR-8203: Stop processing updates more quickly on shutdown"> <a href="/jira/browse/SOLR-8203" data-issue-key="SOLR-8203" class="issue-link link-title resolution">SOLR-8203</a> <span class="link-summary">Stop processing updates more quickly on shutdown</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_markrmiller@gmail.com" rel="markrmiller@gmail.com" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mark Miller&quot;,&quot;emailAddress&quot;:&quot;markrmiller@gmail.com&quot;,&quot;username&quot;:&quot;markrmiller@gmail.com&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="markrmiller@gmail.com"></span></span> Mark Miller </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_yseeley@gmail.com" rel="yseeley@gmail.com" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Yonik Seeley&quot;,&quot;emailAddress&quot;:&quot;yseeley@gmail.com&quot;,&quot;username&quot;:&quot;yseeley@gmail.com&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="yseeley@gmail.com"></span></span> Yonik Seeley </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">9</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="05/Oct/15 16:51"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2015-10-05T16:51:30+0000">05/Oct/15 16:51</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="27/Mar/17 09:08"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-03-27T09:08:50+0000">27/Mar/17 09:08</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="22/Feb/17 15:20"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-02-22T15:20:46+0000">22/Feb/17 15:20</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-8129?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/SOLR-8129?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-14945248\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14945248&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14945248\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14945248_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14945248_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Oct\\/15 15:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-06T15:59:33+0000\'\u003e06\\/Oct\\/15 15:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere\'s the smallest log file that I\'ve been able to generate with a large number of descrepancies:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003efail.151005_080319:   &gt; Throwable #1: java.lang.AssertionError: shard2 is not consistent.  Got 2076 from http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:43897\\/collection1 (previous client) and got 2103 from http:\\/\\/127.0.0.1:36605\\/collection1\u003c\\/span\u003e\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThis was without deletes (if I managed to configure that correctly).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14945248_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14945248_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Oct\\/15 15:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-06T15:59:33+0000\'\u003e06\\/Oct\\/15 15:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here\'s the smallest log file that I\'ve been able to generate with a large number of descrepancies: \\n  \\n fail.151005_080319:   &gt; Throwable #1: java.lang.AssertionError: shard2 is not consistent.  Got 2076 from http: \\/\\/127.0.0.1:43897\\/collection1 (previous client) and got 2103 from http:\\/\\/127.0.0.1:36605\\/collection1 \\n \\n  \\n\\n This was without deletes (if I managed to configure that correctly).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14949872\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14949872&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14949872\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14949872_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14949872_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/15 04:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-09T04:21:04+0000\'\u003e09\\/Oct\\/15 04:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis seems to be a case of extreme reordering of updates due to thread scheduling or whatever.\u003cbr\\/\u003e\\nThe leader is selected by the chaos monkey to be killed, and there are a bunch of updates that are sent to one shard but not another (i.e. they may have been waiting to be sent, but didn\'t make it before the leader was killed).\u003cbr\\/\u003e\\nA bunch more updates flood in, and when a leader election is held and peersync is done, everyone thinks they are up-to-date because the most recent updates do match.\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e43897 has fewer docs than 36605: missing: {_version_=1514192462261780480, id=ft1-1715} ... {_version_=1514192462057308160, id=ft1-1700} ... {_version_=1514192462056259585, id=ft1-1698}\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ Port 43897 is recovering and begins buffering updates\\n\u003c\\/span\u003e  2&gt; 31048 INFO  (RecoveryThread-collection1) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.c.RecoveryStrategy Starting recovery process. recoveringAfterStartup=\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e\\n  2&gt; 31049 INFO  (RecoveryThread-collection1) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.c.RecoveryStrategy ###### startupVersions=[]\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ going \u003cspan class=\\\"code-quote\\\"\u003e\\\"active\\\"\u003c\\/span\u003e\\n\u003c\\/span\u003e  2&gt; 38552 INFO  (RecoveryThread-collection1) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.c.RecoveryStrategy Registering as Active after recovery.\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ example of a normal add\\n\u003c\\/span\u003e  2&gt; 55692 INFO  (qtp1287419856-309) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-48 (1514192447743197184)]} 0 188\\n\u003c\\/span\u003e  \\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ The leader is going to be killed\\n\u003c\\/span\u003e  2&gt; 68281 INFO  (\u003cspan class=\\\"code-object\\\"\u003eThread\u003c\\/span\u003e-378) [    ] o.a.s.c.ChaosMonkey monkey: stop shard! 49240\\n \\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ This is presumably where 43897 see the leader marked as \u003cspan class=\\\"code-quote\\\"\u003e\\\"down\\\"\u003c\\/span\u003e in the clusterstate\\n\u003c\\/span\u003e  2&gt; 68347 INFO  (zkCallback-25-thread-1-processing-n:127.0.0.1:43897_) [n:127.0.0.1:43897_    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:\\/collections\\/collection1\\/state.json \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e collection collection1 has occurred - updating... (live nodes size: 9)\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ updates are still being processed by the leader\\n\u003c\\/span\u003e  2&gt; 68743 DEBUG (qtp139680011-202) [n:127.0.0.1:49240_ c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-1700} {wt=javabin&amp;version=2}\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ Replica 36605 receives and processes the update, but 43897 never does (\u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e may be normal as the leader is being killed)\\n\u003c\\/span\u003e  2&gt; 69010 DEBUG (qtp33344819-419) [n:127.0.0.1:36605_ c:collection1 s:shard2 r:core_node7 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-1700} {update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2}\\n\u003c\\/span\u003e  2&gt; 69015 INFO  (qtp33344819-419) [n:127.0.0.1:36605_ c:collection1 s:shard2 r:core_node7 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-1656 (1514192461610614784), ft1-1670 (1514192462015365120), ft1-1679 (1514192462052065280), ft1-1682 (1514192462053113856), ft1-1688 (1514192462055211008), ft1-1695 (1514192462056259584), ft1-1698 (1514192462056259585), ft1-1700 (1514192462057308160), ft1-1702 (1514192462058356736)]} 0 224\\n\u003c\\/span\u003e\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ a ton of more update flood in\\n\u003c\\/span\u003e  2&gt; 69710 INFO  (qtp1287419856-654) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-1516 (1514192460689965056), ft1-1518 (1514192460829425664), ft1-1519 (1514192460867174400), ft1-1539 (1514192460868222976), ft1-1540 (1514192460868222977), ft1-1542 (1514192460868222978), ft1-1546 (1514192460869271552), ft1-1552 (1514192460869271553), ft1-1563 (1514192460871368704), ft1-1564 (1514192460871368705), ... (41 adds)]} 0 992\\n\u003c\\/span\u003e  2&gt; 70571 INFO  (qtp1287419856-655) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-1790 (1514192462017462272), ft1-1791 (1514192462035288064), ft1-1803 (1514192462036336640), ft1-1810 (1514192462037385216), ft1-1813 (1514192462042628096), ft1-1814 (1514192462043676672), ft1-1815 (1514192462043676673), ft1-1818 (1514192462044725248), ft1-1819 (1514192462044725249), ft1-1820 (1514192462303723520), ... (45 adds)]} 0 856\\n\u003c\\/span\u003e 2&gt; 70911 INFO  (qtp1287419856-309) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-1998 (1514192463049261056), ft1-1999 (1514192463084912640), ft1-2001 (1514192463085961216), ft1-2003 (1514192463085961217), ft1-2011 (1514192463087009792), ft1-2012 (1514192463088058368), ft1-2016 (1514192463099592704), ft1-2020 (1514192463101689856), ft1-2022 (1514192463102738432), ft1-2023 (1514192463392145408), ... (35 adds)]} 0 325\\n\u003c\\/span\u003e  2&gt; 71386 INFO  (qtp1287419856-653) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-2203 (1514192463788507136), ft1-2206 (1514192464060088320), ft1-2217 (1514192464074768384), ft1-2219 (1514192464074768385), ft1-2224 (1514192464075816960), ft1-2229 (1514192464075816961), ft1-2231 (1514192464075816962), ft1-2239 (1514192464076865536), ft1-2249 (1514192464077914112), ft1-2268 (1514192464077914113), ... (27 adds)]} 0 471\\n\u003c\\/span\u003e  \\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ the most 100 recent versions match \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e both replicas\\n\u003c\\/span\u003e  2&gt; 76191 DEBUG (zkCallback-25-thread-1-processing-n:127.0.0.1:43897_) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.PeerSync PeerSync: core=collection1 url=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:43897  sorted versions from http:\\/\\/127.0.0.1:36605\\/collection1\\/ = [1514192465046798337, 1514192465046798336, ... , 1514192463538946050, 1514192463538946049]\\n\u003c\\/span\u003e  2&gt; 76241 DEBUG (qtp33344819-419) [n:127.0.0.1:36605_ c:collection1 s:shard2 r:core_node7 x:collection1] o.a.s.u.PeerSync PeerSync: core=collection1 url=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:36605  sorted versions from http:\\/\\/127.0.0.1:43897\\/collection1\\/ = [1514192465046798337, 1514192465046798336, ... , 1514192463538946050, 1514192463538946049]\\n\u003c\\/span\u003e\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ 43897 becomes the \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e leader\\n\u003c\\/span\u003e  2&gt; 76242 INFO  (zkCallback-25-thread-1-processing-n:127.0.0.1:43897_) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.c.ShardLeaderElectionContext I am the \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e leader: http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:43897\\/collection1\\/ shard2\\n\u003c\\/span\u003e\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ end of test\\n\u003c\\/span\u003e  2&gt; ######shard2 is not consistent.  Got 2076 from http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:43897\\/collection1 (previous client) and got 2103 from http:\\/\\/127.0.0.1:36605\\/collection1\\n\u003c\\/span\u003e  2&gt; 129545 INFO  (qtp1287419856-653) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.c.S.Request [collection1] webapp= path=\\/select params={q=*:*&amp;distrib=\u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e&amp;tests=checkShardConsistency\\/showDiff&amp;fl=id,_version_&amp;sort=id+asc&amp;rows=100000&amp;wt=javabin&amp;version=2} hits=2076 status=0 QTime=114 \\n  2&gt; 129656 INFO  (qtp33344819-422) [n:127.0.0.1:36605_ c:collection1 s:shard2 r:core_node7 x:collection1] o.a.s.c.S.Request [collection1] webapp= path=\\/select params={q=*:*&amp;distrib=\u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e&amp;tests=checkShardConsistency\\/showDiff&amp;fl=id,_version_&amp;sort=id+asc&amp;rows=100000&amp;wt=javabin&amp;version=2} hits=2103 status=0 QTime=4 \\n  2&gt; ######http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:43897\\/collection1: SolrDocumentList[sz=2076]=[SolrDocument{id=0-0, _version_=1514192448210862080}, SolrDocument{id=0-100, _version_=1514192469996077056}, SolrDocument{id=0-1000, _version_=1514192493627834368}, SolrDocument{id=0-1006, _version_=1514192493742129152}, SolrDocument{id=0-1008, _version_=1514192493795606528}] , [...] , [SolrDocument{id=ft1-984, _version_=1514192458787848193}, SolrDocument{id=ft1-991, _version_=1514192459077255168}, SolrDocument{id=ft1-992, _version_=1514192459148558336}, SolrDocument{id=ft1-994, _version_=1514192459149606912}, SolrDocument{id=ft1-997, _version_=1514192459150655488}]\\n\u003c\\/span\u003e  2&gt; ######http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:36605\\/collection1: SolrDocumentList[sz=2103]=[SolrDocument{id=0-0, _version_=1514192448210862080}, SolrDocument{id=0-100, _version_=1514192469996077056}, SolrDocument{id=0-1000, _version_=1514192493627834368}, SolrDocument{id=0-1006, _version_=1514192493742129152}, SolrDocument{id=0-1008, _version_=1514192493795606528}] , [...] , [SolrDocument{id=ft1-984, _version_=1514192458787848193}, SolrDocument{id=ft1-991, _version_=1514192459077255168}, SolrDocument{id=ft1-992, _version_=1514192459148558336}, SolrDocument{id=ft1-994, _version_=1514192459149606912}, SolrDocument{id=ft1-997, _version_=1514192459150655488}]\\n\u003c\\/span\u003e  2&gt; ###### sizes=2076,2103\\n  2&gt; ###### Only in http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:36605\\/collection1: [{_version_=1514192462261780480, id=ft1-1715}, {_version_=1514192462260731904, id=ft1-1711}, {_version_=1514192462263877632, id=ft1-1719}, {_version_=1514192462262829056, id=ft1-1718}, {_version_=1514192462264926208, id=ft1-1720}, {_version_=1514192462015365120, id=ft1-1670}, {_version_=1514192462276460544, id=ft1-1722}, {_version_=1514192462415921152, id=ft1-1844}, {_version_=1514192462413824000, id=ft1-1840}, {_version_=1514192462230323200, id=ft1-1709}, {_version_=1514192462414872576, id=ft1-1841}, {_version_=1514192462412775424, id=ft1-1838}, {_version_=1514192462412775425, id=ft1-1839}, {_version_=1514192462411726848, id=ft1-1837}, {_version_=1514192462230323201, id=ft1-1710}, {_version_=1514192462057308160, id=ft1-1700}, {_version_=1514192462058356737, id=ft1-1703}, {_version_=1514192462058356736, id=ft1-1702}, {_version_=1514192462375026688, id=ft1-1796}, {_version_=1514192462400192512, id=ft1-1798}, {_version_=1514192462399143936, id=ft1-1797}, {_version_=1514192462193623040, id=ft1-1707}, {_version_=1514192462052065280, id=ft1-1679}, {_version_=1514192462055211008, id=ft1-1688}, {_version_=1514192462053113856, id=ft1-1682}, {_version_=1514192462056259584, id=ft1-1695}, {_version_=1514192462056259585, id=ft1-1698}]\\n\u003c\\/span\u003e \u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14949872_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14949872_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/15 04:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-09T04:21:04+0000\'\u003e09\\/Oct\\/15 04:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This seems to be a case of extreme reordering of updates due to thread scheduling or whatever. \\nThe leader is selected by the chaos monkey to be killed, and there are a bunch of updates that are sent to one shard but not another (i.e. they may have been waiting to be sent, but didn\'t make it before the leader was killed). \\nA bunch more updates flood in, and when a leader election is held and peersync is done, everyone thinks they are up-to-date because the most recent updates do match. \\n\\n  \\n 43897 has fewer docs than 36605: missing: {_version_=1514192462261780480, id=ft1-1715} ... {_version_=1514192462057308160, id=ft1-1700} ... {_version_=1514192462056259585, id=ft1-1698}\\n\\n \\/\\/ Port 43897 is recovering and begins buffering updates\\n   2&gt; 31048 INFO  (RecoveryThread-collection1) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.c.RecoveryStrategy Starting recovery process. recoveringAfterStartup= true \\n  2&gt; 31049 INFO  (RecoveryThread-collection1) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.c.RecoveryStrategy ###### startupVersions=[]\\n\\n \\/\\/ going  \\\"active\\\" \\n   2&gt; 38552 INFO  (RecoveryThread-collection1) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.c.RecoveryStrategy Registering as Active after recovery.\\n\\n \\/\\/ example of a normal add\\n   2&gt; 55692 INFO  (qtp1287419856-309) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-48 (1514192447743197184)]} 0 188\\n   \\n \\/\\/ The leader is going to be killed\\n   2&gt; 68281 INFO  ( Thread -378) [    ] o.a.s.c.ChaosMonkey monkey: stop shard! 49240\\n \\n \\/\\/ This is presumably where 43897 see the leader marked as  \\\"down\\\"  in the clusterstate\\n   2&gt; 68347 INFO  (zkCallback-25-thread-1-processing-n:127.0.0.1:43897_) [n:127.0.0.1:43897_    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:\\/collections\\/collection1\\/state.json  for  collection collection1 has occurred - updating... (live nodes size: 9)\\n\\n \\/\\/ updates are still being processed by the leader\\n   2&gt; 68743 DEBUG (qtp139680011-202) [n:127.0.0.1:49240_ c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-1700} {wt=javabin&amp;version=2}\\n\\n \\/\\/ Replica 36605 receives and processes the update, but 43897 never does ( this  may be normal as the leader is being killed)\\n   2&gt; 69010 DEBUG (qtp33344819-419) [n:127.0.0.1:36605_ c:collection1 s:shard2 r:core_node7 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-1700} {update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2}\\n   2&gt; 69015 INFO  (qtp33344819-419) [n:127.0.0.1:36605_ c:collection1 s:shard2 r:core_node7 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-1656 (1514192461610614784), ft1-1670 (1514192462015365120), ft1-1679 (1514192462052065280), ft1-1682 (1514192462053113856), ft1-1688 (1514192462055211008), ft1-1695 (1514192462056259584), ft1-1698 (1514192462056259585), ft1-1700 (1514192462057308160), ft1-1702 (1514192462058356736)]} 0 224\\n \\n \\/\\/ a ton of more update flood in\\n   2&gt; 69710 INFO  (qtp1287419856-654) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-1516 (1514192460689965056), ft1-1518 (1514192460829425664), ft1-1519 (1514192460867174400), ft1-1539 (1514192460868222976), ft1-1540 (1514192460868222977), ft1-1542 (1514192460868222978), ft1-1546 (1514192460869271552), ft1-1552 (1514192460869271553), ft1-1563 (1514192460871368704), ft1-1564 (1514192460871368705), ... (41 adds)]} 0 992\\n   2&gt; 70571 INFO  (qtp1287419856-655) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-1790 (1514192462017462272), ft1-1791 (1514192462035288064), ft1-1803 (1514192462036336640), ft1-1810 (1514192462037385216), ft1-1813 (1514192462042628096), ft1-1814 (1514192462043676672), ft1-1815 (1514192462043676673), ft1-1818 (1514192462044725248), ft1-1819 (1514192462044725249), ft1-1820 (1514192462303723520), ... (45 adds)]} 0 856\\n  2&gt; 70911 INFO  (qtp1287419856-309) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-1998 (1514192463049261056), ft1-1999 (1514192463084912640), ft1-2001 (1514192463085961216), ft1-2003 (1514192463085961217), ft1-2011 (1514192463087009792), ft1-2012 (1514192463088058368), ft1-2016 (1514192463099592704), ft1-2020 (1514192463101689856), ft1-2022 (1514192463102738432), ft1-2023 (1514192463392145408), ... (35 adds)]} 0 325\\n   2&gt; 71386 INFO  (qtp1287419856-653) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp= path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:49240\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-2203 (1514192463788507136), ft1-2206 (1514192464060088320), ft1-2217 (1514192464074768384), ft1-2219 (1514192464074768385), ft1-2224 (1514192464075816960), ft1-2229 (1514192464075816961), ft1-2231 (1514192464075816962), ft1-2239 (1514192464076865536), ft1-2249 (1514192464077914112), ft1-2268 (1514192464077914113), ... (27 adds)]} 0 471\\n   \\n\\n \\/\\/ the most 100 recent versions match  for  both replicas\\n   2&gt; 76191 DEBUG (zkCallback-25-thread-1-processing-n:127.0.0.1:43897_) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.u.PeerSync PeerSync: core=collection1 url=http: \\/\\/127.0.0.1:43897  sorted versions from http:\\/\\/127.0.0.1:36605\\/collection1\\/ = [1514192465046798337, 1514192465046798336, ... , 1514192463538946050, 1514192463538946049]\\n   2&gt; 76241 DEBUG (qtp33344819-419) [n:127.0.0.1:36605_ c:collection1 s:shard2 r:core_node7 x:collection1] o.a.s.u.PeerSync PeerSync: core=collection1 url=http: \\/\\/127.0.0.1:36605  sorted versions from http:\\/\\/127.0.0.1:43897\\/collection1\\/ = [1514192465046798337, 1514192465046798336, ... , 1514192463538946050, 1514192463538946049]\\n \\n \\/\\/ 43897 becomes the  new  leader\\n   2&gt; 76242 INFO  (zkCallback-25-thread-1-processing-n:127.0.0.1:43897_) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.c.ShardLeaderElectionContext I am the  new  leader: http: \\/\\/127.0.0.1:43897\\/collection1\\/ shard2\\n \\n\\n \\/\\/ end of test\\n   2&gt; ######shard2 is not consistent.  Got 2076 from http: \\/\\/127.0.0.1:43897\\/collection1 (previous client) and got 2103 from http:\\/\\/127.0.0.1:36605\\/collection1\\n   2&gt; 129545 INFO  (qtp1287419856-653) [n:127.0.0.1:43897_ c:collection1 s:shard2 r:core_node4 x:collection1] o.a.s.c.S.Request [collection1] webapp= path=\\/select params={q=*:*&amp;distrib= false &amp;tests=checkShardConsistency\\/showDiff&amp;fl=id,_version_&amp;sort=id+asc&amp;rows=100000&amp;wt=javabin&amp;version=2} hits=2076 status=0 QTime=114 \\n  2&gt; 129656 INFO  (qtp33344819-422) [n:127.0.0.1:36605_ c:collection1 s:shard2 r:core_node7 x:collection1] o.a.s.c.S.Request [collection1] webapp= path=\\/select params={q=*:*&amp;distrib= false &amp;tests=checkShardConsistency\\/showDiff&amp;fl=id,_version_&amp;sort=id+asc&amp;rows=100000&amp;wt=javabin&amp;version=2} hits=2103 status=0 QTime=4 \\n  2&gt; ######http: \\/\\/127.0.0.1:43897\\/collection1: SolrDocumentList[sz=2076]=[SolrDocument{id=0-0, _version_=1514192448210862080}, SolrDocument{id=0-100, _version_=1514192469996077056}, SolrDocument{id=0-1000, _version_=1514192493627834368}, SolrDocument{id=0-1006, _version_=1514192493742129152}, SolrDocument{id=0-1008, _version_=1514192493795606528}] , [...] , [SolrDocument{id=ft1-984, _version_=1514192458787848193}, SolrDocument{id=ft1-991, _version_=1514192459077255168}, SolrDocument{id=ft1-992, _version_=1514192459148558336}, SolrDocument{id=ft1-994, _version_=1514192459149606912}, SolrDocument{id=ft1-997, _version_=1514192459150655488}]\\n   2&gt; ######http: \\/\\/127.0.0.1:36605\\/collection1: SolrDocumentList[sz=2103]=[SolrDocument{id=0-0, _version_=1514192448210862080}, SolrDocument{id=0-100, _version_=1514192469996077056}, SolrDocument{id=0-1000, _version_=1514192493627834368}, SolrDocument{id=0-1006, _version_=1514192493742129152}, SolrDocument{id=0-1008, _version_=1514192493795606528}] , [...] , [SolrDocument{id=ft1-984, _version_=1514192458787848193}, SolrDocument{id=ft1-991, _version_=1514192459077255168}, SolrDocument{id=ft1-992, _version_=1514192459148558336}, SolrDocument{id=ft1-994, _version_=1514192459149606912}, SolrDocument{id=ft1-997, _version_=1514192459150655488}]\\n   2&gt; ###### sizes=2076,2103\\n  2&gt; ###### Only in http: \\/\\/127.0.0.1:36605\\/collection1: [{_version_=1514192462261780480, id=ft1-1715}, {_version_=1514192462260731904, id=ft1-1711}, {_version_=1514192462263877632, id=ft1-1719}, {_version_=1514192462262829056, id=ft1-1718}, {_version_=1514192462264926208, id=ft1-1720}, {_version_=1514192462015365120, id=ft1-1670}, {_version_=1514192462276460544, id=ft1-1722}, {_version_=1514192462415921152, id=ft1-1844}, {_version_=1514192462413824000, id=ft1-1840}, {_version_=1514192462230323200, id=ft1-1709}, {_version_=1514192462414872576, id=ft1-1841}, {_version_=1514192462412775424, id=ft1-1838}, {_version_=1514192462412775425, id=ft1-1839}, {_version_=1514192462411726848, id=ft1-1837}, {_version_=1514192462230323201, id=ft1-1710}, {_version_=1514192462057308160, id=ft1-1700}, {_version_=1514192462058356737, id=ft1-1703}, {_version_=1514192462058356736, id=ft1-1702}, {_version_=1514192462375026688, id=ft1-1796}, {_version_=1514192462400192512, id=ft1-1798}, {_version_=1514192462399143936, id=ft1-1797}, {_version_=1514192462193623040, id=ft1-1707}, {_version_=1514192462052065280, id=ft1-1679}, {_version_=1514192462055211008, id=ft1-1688}, {_version_=1514192462053113856, id=ft1-1682}, {_version_=1514192462056259584, id=ft1-1695}, {_version_=1514192462056259585, id=ft1-1698}]\\n   \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14971347\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14971347&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14971347\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14971347_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14971347_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 16:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T16:48:45+0000\'\u003e23\\/Oct\\/15 16:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK, here\'s another failure I\'ve been analyzing.\u003cbr\\/\u003e\\nIt comes down to this:\u003cbr\\/\u003e\\n1) leader is shutdown (CoreContainer.shutdown is called)\u003cbr\\/\u003e\\n2) a single doc is sent from the leader to one replica successfully, but unsuccessfully to a different replica (rejected task from shutdown executor that the client is using to send)\u003cbr\\/\u003e\\n3) tons of other updates are still being accepted and sent by the leader\u003cbr\\/\u003e\\n4) much later, a peersync sees everything as OK since recent versions match up.\u003c\\/p\u003e\\n\\n\u003cp\u003eOne mystery is why ConcurrentUpdateSolrClient is trying to create a new Runner when there is obviously another runner already running (since it still accepts and sends new updates after that point).\u003c\\/p\u003e\\n\\n\u003cp\u003eA general way to fix this is to make sure that shutdown happens much more quickly... we should stop reading and processing updates.\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ good-doc comes into leader 53975\\n\u003c\\/span\u003e  2&gt; 43204 DEBUG (qtp1536362844-206) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-476} {wt=javabin&amp;version=2}\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ bad-doc comes into leader 53975\\n\u003c\\/span\u003e  2&gt; 43204 DEBUG (qtp1536362844-206) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-477} {wt=javabin&amp;version=2}\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ good-doc added to shard 57414\\n\u003c\\/span\u003e  2&gt; 43273 DEBUG (qtp702407469-354) [n:127.0.0.1:57414__%2Fzl c:collection1 s:shard2 r:core_node5 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-476} {update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2}\\n\u003c\\/span\u003e  2&gt; 43280 INFO  (qtp702407469-354) [n:127.0.0.1:57414__%2Fzl c:collection1 s:shard2 r:core_node5 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp=\\/_\\/zl path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-467 (1514187847514456064), ft1-470 (1514187847746191360), ft1-473 (1514187847754579968), ft1-476 (1514187847755628544)]} 0 42\\n\u003c\\/span\u003e\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ the leader is going to be stopped in the \u003cspan class=\\\"code-keyword\\\"\u003efuture\u003c\\/span\u003e\\n\u003c\\/span\u003e  2&gt; 43345 INFO  (\u003cspan class=\\\"code-object\\\"\u003eThread\u003c\\/span\u003e-272) [    ] o.a.s.c.ChaosMonkey monkey: stop shard! 53975\\n  2&gt; 43345 INFO  (\u003cspan class=\\\"code-object\\\"\u003eThread\u003c\\/span\u003e-272) [    ] o.a.s.c.CoreContainer Shutting down CoreContainer instance=171681388\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ overseer gets state:down \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e leader 53975 \\n\u003c\\/span\u003e  2&gt; 43378 INFO  (OverseerStateUpdate-94636738141945860-127.0.0.1:49439__%2Fzl-n_0000000000) [n:127.0.0.1:49439__%2Fzl    ] o.a.s.c.Overseer processMessage: queueSize: 1, message = {\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ BUT... 53975 appears to keep processing updates... there are ~736 more updates like the following, continuing another couple of seconds through to time 45555\\n\u003c\\/span\u003efail.151005_064958:  2&gt; 43381 DEBUG (qtp1536362844-204) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-1165} {wt=javabin&amp;version=2}\\n\\n\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ good-doc is added to replica 44323\\n\u003c\\/span\u003e  2&gt; 43449 DEBUG (qtp1776514246-272) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-476} {update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2}\\n\u003c\\/span\u003e  2&gt; 43456 INFO  (qtp1776514246-272) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp=\\/_\\/zl path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-473 (1514187847754579968), ft1-476 (1514187847755628544)]} 0 108\\n\u003c\\/span\u003e\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ more signs of node being stopped\\n\u003c\\/span\u003e  2&gt; 43453 WARN  (qtp1536362844-205) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.e.j.s.ServletHandler \\/_\\/zl\\/collection1\\/update\\n  2&gt; org.apache.solr.common.SolrException: Error processing the request. CoreContainer is either not initialized or shutting down.\\n\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ bad-doc is added to replica 44323\\n\u003c\\/span\u003e  2&gt; 43471 DEBUG (qtp1776514246-273) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-477} {update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2}\\n\u003c\\/span\u003e  2&gt; 43501 INFO  (qtp1776514246-273) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp=\\/_\\/zl path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-477 (1514187847778697216)]} 0 30\\n\u003c\\/span\u003e\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ This is the same update thread that has our bad-doc on the leader... it can\'t send because the update executor has been shut down\\n\u003c\\/span\u003e  2&gt; 43472 ERROR (qtp1536362844-206) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.SolrCmdDistributor java.util.concurrent.RejectedExecutionException: Task org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor$1@183e1649 rejected from org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor@7552e28d[Shutting down, pool size = 5, active threads = 5, queued tasks = 0, completed tasks = 62]\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ Takes a \u003cspan class=\\\"code-keyword\\\"\u003ewhile\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e other executors to be shut down\\n\u003c\\/span\u003e  2&gt; 45288 ERROR (qtp1536362844-204) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.SolrCmdDistributor java.util.concurrent.RejectedExecutionException: Task org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor$1@4dbd9a35 rejected from org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor@7552e28d[Shutting down, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 65]\\n\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ Peer sync... the versions show that 44323 is ahead by 14 updates, but everything \u003cspan class=\\\"code-keyword\\\"\u003eelse\u003c\\/span\u003e matches up after that point.\\n\u003c\\/span\u003e\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ Our missing update (1514187848796864512) is older than the oldest update of either list.\\n\u003c\\/span\u003e  2&gt; 49313 DEBUG (zkCallback-21-thread-2-processing-n:127.0.0.1:44323__%2Fzl) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.PeerSync PeerSync: core=collection1 url=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:44323\\/_\\/zl  sorted versions from http:\\/\\/127.0.0.1:57414\\/_\\/zl\\/collection1\\/ = [1514187849851731968, ...\\n\u003c\\/span\u003e  2&gt; 49313 INFO  (zkCallback-21-thread-2-processing-n:127.0.0.1:44323__%2Fzl) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.PeerSync PeerSync: core=collection1 url=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:44323\\/_\\/zl  Our versions are newer. ourLowThreshold=1514187848979316736 otherHigh=1514187849717514240\\n\u003c\\/span\u003e\\n\\n  2&gt; 49567 DEBUG (qtp702407469-351) [n:127.0.0.1:57414__%2Fzl c:collection1 s:shard2 r:core_node5 x:collection1] o.a.s.u.PeerSync PeerSync: core=collection1 url=http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:57414\\/_\\/zl  sorted versions from http:\\/\\/127.0.0.1:44323\\/_\\/zl\\/collection1\\/ = [1514187849932472320, ...\\n\u003c\\/span\u003e\\n\\n  2&gt; 50327 ERROR (qtp1776514246-274) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.c.SolrCore org.apache.solr.common.SolrException: No registered leader was found after waiting \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e 4000ms , collection: collection1 slice: shard2\\n\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ the leader is still not all the way shut down... \\n\u003c\\/span\u003e  2&gt; 62700 ERROR (qtp1536362844-206) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.c.s.i.ConcurrentUpdateSolrClient interrupted\\n\\n\\n\\n\\n\\n  2&gt; ######shard2 is not consistent.  Got 2456 from http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:44323\\/_\\/zl\\/collection1 (previous client) and got 2455 from http:\\/\\/127.0.0.1:57414\\/_\\/zl\\/collection1\\n\u003c\\/span\u003e  2&gt; 110640 INFO  (qtp1776514246-276) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.c.S.Request [collection1] webapp=\\/_\\/zl path=\\/select params={q=*:*&amp;distrib=\u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e&amp;tests=checkShardConsistency\\/showDiff&amp;fl=id,_version_&amp;sort=id+asc&amp;rows=100000&amp;wt=javabin&amp;version=2} hits=2456 status=0 QTime=91 \\n  2&gt; 110762 INFO  (qtp702407469-354) [n:127.0.0.1:57414__%2Fzl c:collection1 s:shard2 r:core_node5 x:collection1] o.a.s.c.S.Request [collection1] webapp=\\/_\\/zl path=\\/select params={q=*:*&amp;distrib=\u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e&amp;tests=checkShardConsistency\\/showDiff&amp;fl=id,_version_&amp;sort=id+asc&amp;rows=100000&amp;wt=javabin&amp;version=2} hits=2455 status=0 QTime=9 \\n  2&gt; ######http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:44323\\/_\\/zl\\/collection1: SolrDocumentList[sz=2456]=[SolrDocument{id=0-100, _version_=1514187858469978112}, SolrDocument{id=0-1000, _version_=1514187879861977089}, SolrDocument{id=0-1005, _version_=1514187879928037376}, SolrDocument{id=0-1009, _version_=1514187879977320448}, SolrDocument{id=0-1011, _version_=1514187880001437696}] , [...] , [SolrDocument{id=ft1-92, _version_=1514187844608851968}, SolrDocument{id=ft1-95, _version_=1514187844616192000}, SolrDocument{id=ft1-96, _version_=1514187844623532032}, SolrDocument{id=ft1-985, _version_=1514187847262797824}, SolrDocument{id=ft1-99, _version_=1514187844641357824}]\\n\u003c\\/span\u003e  2&gt; ######http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:57414\\/_\\/zl\\/collection1: SolrDocumentList[sz=2455]=[SolrDocument{id=0-100, _version_=1514187858469978112}, SolrDocument{id=0-1000, _version_=1514187879861977089}, SolrDocument{id=0-1005, _version_=1514187879928037376}, SolrDocument{id=0-1009, _version_=1514187879977320448}, SolrDocument{id=0-1011, _version_=1514187880001437696}] , [...] , [SolrDocument{id=ft1-92, _version_=1514187844608851968}, SolrDocument{id=ft1-95, _version_=1514187844616192000}, SolrDocument{id=ft1-96, _version_=1514187844623532032}, SolrDocument{id=ft1-985, _version_=1514187847262797824}, SolrDocument{id=ft1-99, _version_=1514187844641357824}]\\n\u003c\\/span\u003e  2&gt; ###### sizes=2456,2455\\n  2&gt; ###### Only in http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/127.0.0.1:44323\\/_\\/zl\\/collection1: [{_version_=1514187847778697216, id=ft1-477}]\u003c\\/span\u003e\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14971347_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14971347_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 16:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T16:48:45+0000\'\u003e23\\/Oct\\/15 16:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK, here\'s another failure I\'ve been analyzing. \\nIt comes down to this: \\n1) leader is shutdown (CoreContainer.shutdown is called) \\n2) a single doc is sent from the leader to one replica successfully, but unsuccessfully to a different replica (rejected task from shutdown executor that the client is using to send) \\n3) tons of other updates are still being accepted and sent by the leader \\n4) much later, a peersync sees everything as OK since recent versions match up. \\n\\n One mystery is why ConcurrentUpdateSolrClient is trying to create a new Runner when there is obviously another runner already running (since it still accepts and sends new updates after that point). \\n\\n A general way to fix this is to make sure that shutdown happens much more quickly... we should stop reading and processing updates. \\n\\n  \\n \\n \\/\\/ good-doc comes into leader 53975\\n   2&gt; 43204 DEBUG (qtp1536362844-206) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-476} {wt=javabin&amp;version=2}\\n\\n \\/\\/ bad-doc comes into leader 53975\\n   2&gt; 43204 DEBUG (qtp1536362844-206) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-477} {wt=javabin&amp;version=2}\\n\\n \\/\\/ good-doc added to shard 57414\\n   2&gt; 43273 DEBUG (qtp702407469-354) [n:127.0.0.1:57414__%2Fzl c:collection1 s:shard2 r:core_node5 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-476} {update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2}\\n   2&gt; 43280 INFO  (qtp702407469-354) [n:127.0.0.1:57414__%2Fzl c:collection1 s:shard2 r:core_node5 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp=\\/_\\/zl path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-467 (1514187847514456064), ft1-470 (1514187847746191360), ft1-473 (1514187847754579968), ft1-476 (1514187847755628544)]} 0 42\\n \\n\\n \\/\\/ the leader is going to be stopped in the  future \\n   2&gt; 43345 INFO  ( Thread -272) [    ] o.a.s.c.ChaosMonkey monkey: stop shard! 53975\\n  2&gt; 43345 INFO  ( Thread -272) [    ] o.a.s.c.CoreContainer Shutting down CoreContainer instance=171681388\\n\\n \\/\\/ overseer gets state:down  for  leader 53975 \\n   2&gt; 43378 INFO  (OverseerStateUpdate-94636738141945860-127.0.0.1:49439__%2Fzl-n_0000000000) [n:127.0.0.1:49439__%2Fzl    ] o.a.s.c.Overseer processMessage: queueSize: 1, message = {\\n\\n \\/\\/ BUT... 53975 appears to keep processing updates... there are ~736 more updates like the following, continuing another couple of seconds through to time 45555\\n fail.151005_064958:  2&gt; 43381 DEBUG (qtp1536362844-204) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-1165} {wt=javabin&amp;version=2}\\n\\n\\n\\n \\/\\/ good-doc is added to replica 44323\\n   2&gt; 43449 DEBUG (qtp1776514246-272) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-476} {update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2}\\n   2&gt; 43456 INFO  (qtp1776514246-272) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp=\\/_\\/zl path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-473 (1514187847754579968), ft1-476 (1514187847755628544)]} 0 108\\n \\n \\/\\/ more signs of node being stopped\\n   2&gt; 43453 WARN  (qtp1536362844-205) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.e.j.s.ServletHandler \\/_\\/zl\\/collection1\\/update\\n  2&gt; org.apache.solr.common.SolrException: Error processing the request. CoreContainer is either not initialized or shutting down.\\n\\n\\n \\/\\/ bad-doc is added to replica 44323\\n   2&gt; 43471 DEBUG (qtp1776514246-273) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.p.LogUpdateProcessor PRE_UPDATE add{,id=ft1-477} {update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2}\\n   2&gt; 43501 INFO  (qtp1776514246-273) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.p.LogUpdateProcessor [collection1] webapp=\\/_\\/zl path=\\/update params={update.distrib=FROMLEADER&amp;distrib.from=http: \\/\\/127.0.0.1:53975\\/_\\/zl\\/collection1\\/&amp;wt=javabin&amp;version=2} {add=[ft1-477 (1514187847778697216)]} 0 30\\n \\n \\/\\/ This is the same update thread that has our bad-doc on the leader... it can\'t send because the update executor has been shut down\\n   2&gt; 43472 ERROR (qtp1536362844-206) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.SolrCmdDistributor java.util.concurrent.RejectedExecutionException: Task org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor$1@183e1649 rejected from org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor@7552e28d[Shutting down, pool size = 5, active threads = 5, queued tasks = 0, completed tasks = 62]\\n\\n \\/\\/ Takes a  while   for  other executors to be shut down\\n   2&gt; 45288 ERROR (qtp1536362844-204) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.u.SolrCmdDistributor java.util.concurrent.RejectedExecutionException: Task org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor$1@4dbd9a35 rejected from org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor@7552e28d[Shutting down, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 65]\\n\\n\\n \\/\\/ Peer sync... the versions show that 44323 is ahead by 14 updates, but everything  else  matches up after that point.\\n  \\/\\/ Our missing update (1514187848796864512) is older than the oldest update of either list.\\n   2&gt; 49313 DEBUG (zkCallback-21-thread-2-processing-n:127.0.0.1:44323__%2Fzl) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.PeerSync PeerSync: core=collection1 url=http: \\/\\/127.0.0.1:44323\\/_\\/zl  sorted versions from http:\\/\\/127.0.0.1:57414\\/_\\/zl\\/collection1\\/ = [1514187849851731968, ...\\n   2&gt; 49313 INFO  (zkCallback-21-thread-2-processing-n:127.0.0.1:44323__%2Fzl) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.u.PeerSync PeerSync: core=collection1 url=http: \\/\\/127.0.0.1:44323\\/_\\/zl  Our versions are newer. ourLowThreshold=1514187848979316736 otherHigh=1514187849717514240\\n \\n\\n  2&gt; 49567 DEBUG (qtp702407469-351) [n:127.0.0.1:57414__%2Fzl c:collection1 s:shard2 r:core_node5 x:collection1] o.a.s.u.PeerSync PeerSync: core=collection1 url=http: \\/\\/127.0.0.1:57414\\/_\\/zl  sorted versions from http:\\/\\/127.0.0.1:44323\\/_\\/zl\\/collection1\\/ = [1514187849932472320, ...\\n \\n\\n  2&gt; 50327 ERROR (qtp1776514246-274) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.c.SolrCore org.apache.solr.common.SolrException: No registered leader was found after waiting  for  4000ms , collection: collection1 slice: shard2\\n\\n \\/\\/ the leader is still not all the way shut down... \\n   2&gt; 62700 ERROR (qtp1536362844-206) [n:127.0.0.1:53975__%2Fzl c:collection1 s:shard2 r:core_node1 x:collection1] o.a.s.c.s.i.ConcurrentUpdateSolrClient interrupted\\n\\n\\n\\n\\n\\n  2&gt; ######shard2 is not consistent.  Got 2456 from http: \\/\\/127.0.0.1:44323\\/_\\/zl\\/collection1 (previous client) and got 2455 from http:\\/\\/127.0.0.1:57414\\/_\\/zl\\/collection1\\n   2&gt; 110640 INFO  (qtp1776514246-276) [n:127.0.0.1:44323__%2Fzl c:collection1 s:shard2 r:core_node3 x:collection1] o.a.s.c.S.Request [collection1] webapp=\\/_\\/zl path=\\/select params={q=*:*&amp;distrib= false &amp;tests=checkShardConsistency\\/showDiff&amp;fl=id,_version_&amp;sort=id+asc&amp;rows=100000&amp;wt=javabin&amp;version=2} hits=2456 status=0 QTime=91 \\n  2&gt; 110762 INFO  (qtp702407469-354) [n:127.0.0.1:57414__%2Fzl c:collection1 s:shard2 r:core_node5 x:collection1] o.a.s.c.S.Request [collection1] webapp=\\/_\\/zl path=\\/select params={q=*:*&amp;distrib= false &amp;tests=checkShardConsistency\\/showDiff&amp;fl=id,_version_&amp;sort=id+asc&amp;rows=100000&amp;wt=javabin&amp;version=2} hits=2455 status=0 QTime=9 \\n  2&gt; ######http: \\/\\/127.0.0.1:44323\\/_\\/zl\\/collection1: SolrDocumentList[sz=2456]=[SolrDocument{id=0-100, _version_=1514187858469978112}, SolrDocument{id=0-1000, _version_=1514187879861977089}, SolrDocument{id=0-1005, _version_=1514187879928037376}, SolrDocument{id=0-1009, _version_=1514187879977320448}, SolrDocument{id=0-1011, _version_=1514187880001437696}] , [...] , [SolrDocument{id=ft1-92, _version_=1514187844608851968}, SolrDocument{id=ft1-95, _version_=1514187844616192000}, SolrDocument{id=ft1-96, _version_=1514187844623532032}, SolrDocument{id=ft1-985, _version_=1514187847262797824}, SolrDocument{id=ft1-99, _version_=1514187844641357824}]\\n   2&gt; ######http: \\/\\/127.0.0.1:57414\\/_\\/zl\\/collection1: SolrDocumentList[sz=2455]=[SolrDocument{id=0-100, _version_=1514187858469978112}, SolrDocument{id=0-1000, _version_=1514187879861977089}, SolrDocument{id=0-1005, _version_=1514187879928037376}, SolrDocument{id=0-1009, _version_=1514187879977320448}, SolrDocument{id=0-1011, _version_=1514187880001437696}] , [...] , [SolrDocument{id=ft1-92, _version_=1514187844608851968}, SolrDocument{id=ft1-95, _version_=1514187844616192000}, SolrDocument{id=ft1-96, _version_=1514187844623532032}, SolrDocument{id=ft1-985, _version_=1514187847262797824}, SolrDocument{id=ft1-99, _version_=1514187844641357824}]\\n   2&gt; ###### sizes=2456,2455\\n  2&gt; ###### Only in http: \\/\\/127.0.0.1:44323\\/_\\/zl\\/collection1: [{_version_=1514187847778697216, id=ft1-477}] \\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14971436\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14971436&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14971436\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14971436_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14971436_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 17:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T17:41:00+0000\'\u003e23\\/Oct\\/15 17:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eOne mystery is why ConcurrentUpdateSolrClient is trying to create a new Runner when there is obviously another runner already running (since it still accepts and sends new updates after that point).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eMark pointed me at this comment in ConcurrentUpdateSolrClient:\u003cbr\\/\u003e\\n          \\/\\/ see if queue is half full and we can add more runners\u003cbr\\/\u003e\\n          \\/\\/ special case: if only using a threadCount of 1 and the queue\u003cbr\\/\u003e\\n          \\/\\/ is filling up, allow 1 add\'l runner to help process the queue\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=thelabdude\\\" class=\\\"user-hover\\\" rel=\\\"thelabdude\\\"\u003eTimothy Potter\u003c\\/a\u003e It looks like you added that comment... but it\'s not clear to me how the code implements that special case.  Thoughts?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14971436_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14971436_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 17:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T17:41:00+0000\'\u003e23\\/Oct\\/15 17:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n One mystery is why ConcurrentUpdateSolrClient is trying to create a new Runner when there is obviously another runner already running (since it still accepts and sends new updates after that point).  \\n\\n Mark pointed me at this comment in ConcurrentUpdateSolrClient: \\n          \\/\\/ see if queue is half full and we can add more runners \\n          \\/\\/ special case: if only using a threadCount of 1 and the queue \\n          \\/\\/ is filling up, allow 1 add\'l runner to help process the queue \\n\\n  Timothy Potter  It looks like you added that comment... but it\'s not clear to me how the code implements that special case.  Thoughts?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14971564\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14971564&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14971564\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thelabdude\\\" id=\\\"commentauthor_14971564_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thelabdude\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thelabdude\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Timothy Potter\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14971564_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 18:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T18:34:47+0000\'\u003e23\\/Oct\\/15 18:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eheh - yeah, that\'s my bad ... I think I had that in there at one point when I was dealing with the perf improvements but it didn\'t actually help or at least I had other changes that masked it\'s benefit. I\'ll revisit that idea ... for now, the comment is misleading and should be removed. Sorry \'bout that!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thelabdude\\\" id=\\\"commentauthor_14971564_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thelabdude\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thelabdude\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Timothy Potter\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14971564_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 18:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T18:34:47+0000\'\u003e23\\/Oct\\/15 18:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    heh - yeah, that\'s my bad ... I think I had that in there at one point when I was dealing with the perf improvements but it didn\'t actually help or at least I had other changes that masked it\'s benefit. I\'ll revisit that idea ... for now, the comment is misleading and should be removed. Sorry \'bout that!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14971697\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14971697&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14971697\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_14971697_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14971697_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 19:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T19:38:03+0000\'\u003e23\\/Oct\\/15 19:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the details, Yonik.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eA general way to fix this is to make sure that shutdown happens much more quickly... we should stop reading and processing updates.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003emaybe HttpSolrCall can return an error immediately if container has been shutdown?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_14971697_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14971697_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 19:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T19:38:03+0000\'\u003e23\\/Oct\\/15 19:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the details, Yonik. \\n\\n  A general way to fix this is to make sure that shutdown happens much more quickly... we should stop reading and processing updates.  \\n\\n maybe HttpSolrCall can return an error immediately if container has been shutdown?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14971917\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14971917&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14971917\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14971917_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14971917_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 21:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T21:38:24+0000\'\u003e23\\/Oct\\/15 21:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for clarifying Tim, it had me wondering what I was missing.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003emaybe HttpSolrCall can return an error immediately if container has been shutdown?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYeah, I think there are a lot of places we could check if the container has been shut down... not sure yet what is the best place.  I think \u003cb\u003enew\u003c\\/b\u003e calls would be rejected already... it\'s really existing streaming calls that are the issue I think.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m still first trying to find out why one update was rejected and then updates that happened after that were still processed though.  This particular failure would not have happened without that piece as well.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14971917_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14971917_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 21:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T21:38:24+0000\'\u003e23\\/Oct\\/15 21:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for clarifying Tim, it had me wondering what I was missing. \\n\\n  maybe HttpSolrCall can return an error immediately if container has been shutdown?  \\n\\n Yeah, I think there are a lot of places we could check if the container has been shut down... not sure yet what is the best place.  I think  new  calls would be rejected already... it\'s really existing streaming calls that are the issue I think. \\n\\n I\'m still first trying to find out why one update was rejected and then updates that happened after that were still processed though.  This particular failure would not have happened without that piece as well.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972038\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972038&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972038\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14972038_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972038_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 22:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T22:57:13+0000\'\u003e23\\/Oct\\/15 22:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think the first thing I\'ll try to track down is if it\'s the same ConcurrentUpdateSolrClient instance or not.  If it is, that points to a race condition somewhere in that class.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14972038_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972038_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/15 22:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-23T22:57:13+0000\'\u003e23\\/Oct\\/15 22:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think the first thing I\'ll try to track down is if it\'s the same ConcurrentUpdateSolrClient instance or not.  If it is, that points to a race condition somewhere in that class.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972633\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972633&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972633\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14972633_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972633_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 14:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T14:53:50+0000\'\u003e24\\/Oct\\/15 14:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI\'m still first trying to find out why one update was rejected and then updates that happened after that were still processed though.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOK, figured it out... it was my incorrect mental model assuming that there was a single ConcurrentUpdateSolrClient between a leader and a replica.\u003cbr\\/\u003e\\nI made that leap looking at StreamingSolrClients.getSolrClient called from SolrCmdDistributor.  But there is a different SolrCmdDistributor created per update request to Solr.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo there is no longer any mystery around the reject followed by many other updates.  Different client objects (and once they have runners going, they can keep going processing updates).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14972633_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972633_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 14:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T14:53:50+0000\'\u003e24\\/Oct\\/15 14:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I\'m still first trying to find out why one update was rejected and then updates that happened after that were still processed though.  \\n\\n OK, figured it out... it was my incorrect mental model assuming that there was a single ConcurrentUpdateSolrClient between a leader and a replica. \\nI made that leap looking at StreamingSolrClients.getSolrClient called from SolrCmdDistributor.  But there is a different SolrCmdDistributor created per update request to Solr. \\n\\n So there is no longer any mystery around the reject followed by many other updates.  Different client objects (and once they have runners going, they can keep going processing updates).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972652\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972652&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972652\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14972652_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972652_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 15:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T15:31:00+0000\'\u003e24\\/Oct\\/15 15:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003emaybe HttpSolrCall can return an error immediately if container has been shutdown?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think somewhere in the dispatch filter path may already reject new requests when things are shutting down.  The issue in this last fail was existing update requests that were streaming via ConcurrentUpdateSolrClient.\u003c\\/p\u003e\\n\\n\u003cp\u003eMark is investigating using a more aggressive shutdown (i.e. interrupt) of the update executor (it\'s just used to talk to other nodes).\u003cbr\\/\u003e\\nWe could also check the core container status anywhere in the update path as well and throw an error that would stop processing the update streams.  Thoughts?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14972652_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972652_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 15:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T15:31:00+0000\'\u003e24\\/Oct\\/15 15:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     maybe HttpSolrCall can return an error immediately if container has been shutdown?  \\n\\n I think somewhere in the dispatch filter path may already reject new requests when things are shutting down.  The issue in this last fail was existing update requests that were streaming via ConcurrentUpdateSolrClient. \\n\\n Mark is investigating using a more aggressive shutdown (i.e. interrupt) of the update executor (it\'s just used to talk to other nodes). \\nWe could also check the core container status anywhere in the update path as well and throw an error that would stop processing the update streams.  Thoughts?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972658\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972658&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972658\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14972658_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972658_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 15:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T15:44:11+0000\'\u003e24\\/Oct\\/15 15:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve just finished beasting HdfsChaosMonkeyNothingIsSafeTest for 100 runs. The only change I made was to interrupt the update executor on shutdown. Mostly this was just a test to see if this helped and what else might still pop up.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn 100 runs, I saw 4 or 5 fails, but no replica inconsistency.\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eI saw control off with cloud, by 1 and by more than 1. (There is a known test issue here, but we don\'t know it covers all cases)\u003c\\/li\u003e\\n\\t\u003cli\u003eI saw a hang in CUSC#blockUntilFinished - I think I already have an open JIRA issue for something like that.\u003c\\/li\u003e\\n\\t\u003cli\u003eBefore this 100 runs I saw a strange fail where the connection pool for the test client is shutdown while we still try and use - I removed the try, finally that wraps the test prints the zklayout on failure - I saw that printout but could not work out the real issue - just hanging threads because we didn\'t actually wait for indexing threads to stop. Since removing that, have not seen this, but could just be lucky. It seemed like somehow the true fail reason was being swallowed somehow.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI\'ll keep it running for now, while we work out the best way to cut things off faster.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14972658_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972658_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 15:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T15:44:11+0000\'\u003e24\\/Oct\\/15 15:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve just finished beasting HdfsChaosMonkeyNothingIsSafeTest for 100 runs. The only change I made was to interrupt the update executor on shutdown. Mostly this was just a test to see if this helped and what else might still pop up. \\n\\n In 100 runs, I saw 4 or 5 fails, but no replica inconsistency. \\n\\n \\n\\t I saw control off with cloud, by 1 and by more than 1. (There is a known test issue here, but we don\'t know it covers all cases) \\n\\t I saw a hang in CUSC#blockUntilFinished - I think I already have an open JIRA issue for something like that. \\n\\t Before this 100 runs I saw a strange fail where the connection pool for the test client is shutdown while we still try and use - I removed the try, finally that wraps the test prints the zklayout on failure - I saw that printout but could not work out the real issue - just hanging threads because we didn\'t actually wait for indexing threads to stop. Since removing that, have not seen this, but could just be lucky. It seemed like somehow the true fail reason was being swallowed somehow. \\n \\n\\n\\n I\'ll keep it running for now, while we work out the best way to cut things off faster.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972668\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972668&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972668\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14972668_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972668_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T16:13:35+0000\'\u003e24\\/Oct\\/15 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFor now, I\'m going to try and run with this:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eIndex: solr\\/core\\/src\\/java\\/org\\/apache\\/solr\\/update\\/processor\\/DistributedUpdateProcessor.java\\n===================================================================\\n--- solr\\/core\\/src\\/java\\/org\\/apache\\/solr\\/update\\/processor\\/DistributedUpdateProcessor.java\\t(revision 1710343)\\n+++ solr\\/core\\/src\\/java\\/org\\/apache\\/solr\\/update\\/processor\\/DistributedUpdateProcessor.java\\t(working copy)\\n@@ -1443,6 +1443,10 @@\\n   }\\n \\n   \u003cspan class=\\\"code-keyword\\\"\u003eprivate\u003c\\/span\u003e void zkCheck() {\\n+    \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (req.getCore().getCoreDescriptor().getCoreContainer().isShutDown()) {\\n+      \u003cspan class=\\\"code-keyword\\\"\u003ethrow\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e SolrException(ErrorCode.SERVICE_UNAVAILABLE, \u003cspan class=\\\"code-quote\\\"\u003e\\\"CoreContainer is shutting down.\\\"\u003c\\/span\u003e);\\n+    }\\n+\\n     \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e ((updateCommand.getFlags() &amp; (UpdateCommand.REPLAY | UpdateCommand.PEER_SYNC)) != 0) {\\n       \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e log reply or peer sync, we don\'t need to be connected to ZK\\n\u003c\\/span\u003e       \u003cspan class=\\\"code-keyword\\\"\u003ereturn\u003c\\/span\u003e;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14972668_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972668_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T16:13:35+0000\'\u003e24\\/Oct\\/15 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    For now, I\'m going to try and run with this: \\n\\n  \\n Index: solr\\/core\\/src\\/java\\/org\\/apache\\/solr\\/update\\/processor\\/DistributedUpdateProcessor.java\\n===================================================================\\n--- solr\\/core\\/src\\/java\\/org\\/apache\\/solr\\/update\\/processor\\/DistributedUpdateProcessor.java\\t(revision 1710343)\\n+++ solr\\/core\\/src\\/java\\/org\\/apache\\/solr\\/update\\/processor\\/DistributedUpdateProcessor.java\\t(working copy)\\n@@ -1443,6 +1443,10 @@\\n   }\\n \\n    private  void zkCheck() {\\n+     if  (req.getCore().getCoreDescriptor().getCoreContainer().isShutDown()) {\\n+       throw   new  SolrException(ErrorCode.SERVICE_UNAVAILABLE,  \\\"CoreContainer is shutting down.\\\" );\\n+    }\\n+\\n      if  ((updateCommand.getFlags() &amp; (UpdateCommand.REPLAY | UpdateCommand.PEER_SYNC)) != 0) {\\n        \\/\\/  for  log reply or peer sync, we don\'t need to be connected to ZK\\n         return ;\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972695\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972695&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972695\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14972695_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972695_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T16:46:10+0000\'\u003e24\\/Oct\\/15 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI opened \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8203\\\" title=\\\"Stop processing updates more quickly on shutdown\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8203\\\"\u003e\u003cdel\u003eSOLR-8203\u003c\\/del\u003e\u003c\\/a\u003e to handle these \\\"let\'s shutdown faster\\\" changes.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14972695_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972695_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T16:46:10+0000\'\u003e24\\/Oct\\/15 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I opened   SOLR-8203   to handle these \\\"let\'s shutdown faster\\\" changes.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972741\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972741&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972741\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14972741_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972741_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 17:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T17:16:31+0000\'\u003e24\\/Oct\\/15 17:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI saw a strange fail where the connection pool for the test client is shutdown while we still try and use\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOkay, this looks like it is the result of: Throwable #1: java.lang.AssertionError: The Monkey ran for over 30 seconds and no jetties were stopped - this is worth investigating!\u003c\\/p\u003e\\n\\n\u003cp\u003eThis causes the test to bail before stopping the indexing threads.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14972741_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972741_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 17:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T17:16:31+0000\'\u003e24\\/Oct\\/15 17:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I saw a strange fail where the connection pool for the test client is shutdown while we still try and use  \\n\\n Okay, this looks like it is the result of: Throwable #1: java.lang.AssertionError: The Monkey ran for over 30 seconds and no jetties were stopped - this is worth investigating! \\n\\n This causes the test to bail before stopping the indexing threads.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972759\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972759&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972759\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14972759_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972759_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 17:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T17:33:15+0000\'\u003e24\\/Oct\\/15 17:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mark Miller - 24\\/Oct\\/15 17:35\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSeems the above happens because we only have one Solr instance and nothing to kill. The logic to make sure we have at least 2 is is not correct and needs to be fixed.\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e      \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ we make sure that there\'s at least one shard with more than one replica\\n\u003c\\/span\u003e      \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ so that the ChaosMonkey has something to kill\\n\u003c\\/span\u003e      numShards = sliceCount + random().nextInt(TEST_NIGHTLY ? 12 : 2) + 1;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eshould be \u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e      \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ we make sure that there\'s at least one shard with more than one replica\\n\u003c\\/span\u003e      \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ so that the ChaosMonkey has something to kill\\n\u003c\\/span\u003e      numShards = sliceCount + random().nextInt(TEST_NIGHTLY ? 12 : 2) + 2;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eThat\'s actually probably not the right fix it looks - but something like this.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14972759_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972759_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 17:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T17:33:15+0000\'\u003e24\\/Oct\\/15 17:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mark Miller - 24\\/Oct\\/15 17:35\\\"\u003eedited\u003c\\/span\u003e                   Seems the above happens because we only have one Solr instance and nothing to kill. The logic to make sure we have at least 2 is is not correct and needs to be fixed. \\n\\n  \\n        \\/\\/ we make sure that there\'s at least one shard with more than one replica\\n        \\/\\/ so that the ChaosMonkey has something to kill\\n       numShards = sliceCount + random().nextInt(TEST_NIGHTLY ? 12 : 2) + 1;\\n \\n  \\n\\n should be  \\n\\n  \\n        \\/\\/ we make sure that there\'s at least one shard with more than one replica\\n        \\/\\/ so that the ChaosMonkey has something to kill\\n       numShards = sliceCount + random().nextInt(TEST_NIGHTLY ? 12 : 2) + 2;\\n \\n  \\n\\n \\n\\t That\'s actually probably not the right fix it looks - but something like this. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972773\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972773&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972773\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14972773_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972773_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 17:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T17:53:17+0000\'\u003e24\\/Oct\\/15 17:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eActually, it appears to just be really bad luck for the monkey. The fail is reproducible, but it\'s actually with numSlices = 2 and numShards = 3.\u003c\\/p\u003e\\n\\n\u003cp\u003eI was seeing:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e  [junit4]   2&gt; 55703 INFO  (Thread-219) [    ] o.a.s.c.ChaosMonkey monkey: only one active node in shard - monkey cannot kill :(\\n   [junit4]   2&gt; 57863 INFO  (Thread-219) [    ] o.a.s.c.ChaosMonkey monkey: only one active node in shard - monkey cannot kill :(\\n   [junit4]   2&gt; 63113 INFO  (Thread-219) [    ] o.a.s.c.ChaosMonkey monkey: only one active node in shard - monkey cannot kill :(\\n   [junit4]   2&gt; 69451 INFO  (Thread-219) [    ] o.a.s.c.ChaosMonkey monkey: only one active node in shard - monkey cannot kill :(\\n   [junit4]   2&gt; 78330 INFO  (Thread-219) [    ] o.a.s.c.ChaosMonkey monkey: only one active node in shard - monkey cannot kill :(\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eBut apparently it just keeps randomly picking the shard with only a single replica in it. With the same numShards and slices and a different seed, the test passes.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14972773_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972773_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 17:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T17:53:17+0000\'\u003e24\\/Oct\\/15 17:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Actually, it appears to just be really bad luck for the monkey. The fail is reproducible, but it\'s actually with numSlices = 2 and numShards = 3. \\n\\n I was seeing: \\n\\n  \\n   [junit4]   2&gt; 55703 INFO  (Thread-219) [    ] o.a.s.c.ChaosMonkey monkey: only one active node in shard - monkey cannot kill :(\\n   [junit4]   2&gt; 57863 INFO  (Thread-219) [    ] o.a.s.c.ChaosMonkey monkey: only one active node in shard - monkey cannot kill :(\\n   [junit4]   2&gt; 63113 INFO  (Thread-219) [    ] o.a.s.c.ChaosMonkey monkey: only one active node in shard - monkey cannot kill :(\\n   [junit4]   2&gt; 69451 INFO  (Thread-219) [    ] o.a.s.c.ChaosMonkey monkey: only one active node in shard - monkey cannot kill :(\\n   [junit4]   2&gt; 78330 INFO  (Thread-219) [    ] o.a.s.c.ChaosMonkey monkey: only one active node in shard - monkey cannot kill :(\\n \\n  \\n\\n But apparently it just keeps randomly picking the shard with only a single replica in it. With the same numShards and slices and a different seed, the test passes.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972790\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972790&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972790\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14972790_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972790_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 18:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T18:22:24+0000\'\u003e24\\/Oct\\/15 18:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1710371 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\" class=\\\"user-hover\\\" rel=\\\"markrmiller@gmail.com\\\"\u003eMark Miller\u003c\\/a\u003e in branch \'dev\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1710371\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1710371\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8129\\\" title=\\\"HdfsChaosMonkeyNothingIsSafeTest failures\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8129\\\"\u003e\u003cdel\u003eSOLR-8129\u003c\\/del\u003e\u003c\\/a\u003e: Raise no kill by monkey warning from 30 to 45.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14972790_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972790_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 18:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T18:22:24+0000\'\u003e24\\/Oct\\/15 18:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1710371 from  Mark Miller  in branch \'dev\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1710371  ] \\n\\n   SOLR-8129  : Raise no kill by monkey warning from 30 to 45.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972802\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972802&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972802\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14972802_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972802_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 18:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T18:33:59+0000\'\u003e24\\/Oct\\/15 18:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1710375 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\" class=\\\"user-hover\\\" rel=\\\"markrmiller@gmail.com\\\"\u003eMark Miller\u003c\\/a\u003e in branch \'dev\\/branches\\/branch_5x\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1710375\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1710375\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8129\\\" title=\\\"HdfsChaosMonkeyNothingIsSafeTest failures\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8129\\\"\u003e\u003cdel\u003eSOLR-8129\u003c\\/del\u003e\u003c\\/a\u003e: Raise no kill by monkey warning from 30 to 45.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14972802_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972802_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/15 18:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-24T18:33:59+0000\'\u003e24\\/Oct\\/15 18:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1710375 from  Mark Miller  in branch \'dev\\/branches\\/branch_5x\' \\n[  https:\\/\\/svn.apache.org\\/r1710375  ] \\n\\n   SOLR-8129  : Raise no kill by monkey warning from 30 to 45.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14972967\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14972967&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14972967\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14972967_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972967_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Oct\\/15 02:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-25T02:55:01+0000\'\u003e25\\/Oct\\/15 02:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMan, manyy hundreds of runs and I still have not seen a replica out of sync issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eHave not seen the above issue since the above commit either.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14972967_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14972967_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Oct\\/15 02:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-25T02:55:01+0000\'\u003e25\\/Oct\\/15 02:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Man, manyy hundreds of runs and I still have not seen a replica out of sync issue. \\n\\n Have not seen the above issue since the above commit either.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14973223\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=14973223&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14973223\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14973223_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14973223_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Oct\\/15 12:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-25T12:46:12+0000\'\u003e25\\/Oct\\/15 12:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI ran another 500 runs overnight. No new fails. Still saw one fail where the monkey did not kill anything even after the new 45 second limit. Should probably try 60 next.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14973223_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14973223_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Oct\\/15 12:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-25T12:46:12+0000\'\u003e25\\/Oct\\/15 12:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I ran another 500 runs overnight. No new fails. Still saw one fail where the monkey did not kill anything even after the new 45 second limit. Should probably try 60 next.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15111065\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15111065&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15111065\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15111065_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111065_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/16 18:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-21T18:39:23+0000\'\u003e21\\/Jan\\/16 18:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere\'s a visualization of a recent fail:\u003c\\/p\u003e\\n\\n\u003cp\u003eNode A starts off as the leader, gets a bunch of updates that it ever sends to node B before it is killed.\u003cbr\\/\u003e\\nNode B becomes the leader.\u003cbr\\/\u003e\\nNode A comes up, does a PeerSync and the lists pretty much overlap in time (looking at low threshold \\/ high threshold only), so node A asks node B for the docs it\'s missing (and ends up with a lot more docs than node B).\u003c\\/p\u003e\\n\\n\u003cp\u003eThe list below is ordered from oldest to newest:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e1523440456046739456    B \\n1523440456047788032    B \\n1523440456049885184    B \\n1523440456050933760    B \\n1523440456051982336    B \\n1523440456053030912    B \\n1523440456053030913    B \\n1523440456053030914    B \\n1523440456054079488    B \\n1523440456055128064    B \\n1523440456059322368    B \\n1523440456314126336    B \\n1523440456314126337    B \\n1523440456315174912    B \\n1523440456316223488    B \\n1523440456318320640    B \\n1523440456342437888    B \\n1523440456343486464    B \\n1523440456343486465    B \\n1523440456344535040    B \\n1523440456362360832    B \\n1523440456363409408  A \\n1523440456372846592  A B \\n1523440456375992320  A B \\n1523440456375992321  A B \\n1523440456379138048  A \\n1523440456381235200  A \\n1523440456382283776  A B \\n1523440456392769536  A \\n1523440456401158144  A \\n1523440456403255296  A B \\n1523440456437858304  A \\n1523440456463024128  A \\n1523440456472461312  A \\n1523440456480849920  A \\n1523440456531181568  A \\n1523440456543764480  A \\n1523440456544813056  A \\n1523440456544813057  A \\n1523440456545861632  A \\n1523440456550055936  A B \\n1523440456552153088  A B \\n1523440456552153089  A \\n1523440456559493120  A B \\n1523440456561590272  A B \\n1523440456561590273  A B \\n1523440456562638848  A B \\n1523440456563687424  A B \\n1523440456565784576  A \\n1523440456609824768  A \\n1523440456610873344  A \\n1523440456610873345  A \\n1523440456611921920  A \\n1523440456669593600  A \\n1523440456669593601  A \\n1523440456669593602  A \\n1523440456670642176  A \\n1523440456671690752  A B \\n1523440456672739328  A \\n1523440456673787904  A \\n1523440456674836480  A \\n1523440456675885056  A \\n1523440456686370816  A \\n1523440456690565120  A \\n1523440456702099456  A B \\n1523440456726216704  A B \\n1523440456772354048  A B \\n1523440456785985536  A B \\n1523440456826880000  A B \\n1523440456857288704  A B \\n1523440456858337280  A B \\n1523440456921251840  A \\n1523440456921251841  A \\n1523440456922300416  A \\n1523440456926494720  A B \\n1523440456926494721  A B \\n1523440456927543296  A \\n1523440456927543297  A \\n1523440456929640448  A B \\n1523440456929640449  A \\n1523440456934883328  A \\n1523440456944320512  A \\n1523440456950611968  A \\n1523440456975777792  A \\n1523440456975777793  A \\n1523440456975777794  A \\n1523440456976826368  A \\n1523440456976826369  A \\n1523440456976826370  A \\n1523440456999895040  A \\n1523440457004089344  A \\n1523440457008283648  A \\n1523440457009332224  A \\n1523440457009332225  A \\n1523440457010380800  A \\n1523440457056518144  A B \\n1523440457064906752  A B \\n1523440457065955328  A B \\n1523440457067003904  A B \\n1523440457070149632  A B \\n1523440457071198208  A B \\n1523440457071198209  A B \\n1523440457074343936  A B \\n1523440457077489664  A B \\n1523440457078538240  A B \\n1523440457079586816  A B \\n1523440457080635392  A B \\n1523440457116286976  A \\n1523440457116286977  A \\n1523440457117335552  A \\n1523440457138307072  A \\n1523440457149841408  A \\n1523440457170812928  A \\n1523440457172910080  A \\n1523440457173958656  A \\n1523440457173958657  A \\n1523440457175007232  A \\n1523440457175007233  A \\n1523440457180250112  A \\n1523440457181298688  A \\n1523440457181298689  A \\n1523440460638453760    B \\n1523440460641599488    B \\n1523440460641599489    B \\n1523440460653133824    B \\n1523440460708708352    B \\n1523440460881723392    B \\n1523440460915277824    B \\n1523440461056835584    B \\n1523440461057884160    B \\n1523440461145964544    B \\n1523440461206781952    B \\n1523440461227753472    B \\n1523440461237190656    B \\n1523440461259210752    B \\n1523440461272842240    B \\n1523440461370359808    B \\n1523440461379796992    B \\n1523440461486751744    B \\n1523440461550714880    B \\n1523440461615726592    B \\n1523440461659766784    B \\n1523440461713244160    B \\n1523440461754138624    B \\n1523440461787693056    B \\n1523440461817053184    B \\n1523440461862141952    B \\n1523440461881016320    B \\n1523440461917716480    B \\n1523440461939736576    B \\n1523440461953368064    B \\n1523440461987971072    B \\n1523440462001602560    B \\n1523440462224949248    B \\n1523440462292058112    B \\n1523440462313029632    B \\n1523440462325612544    B \\n1523440462379089920    B \\n1523440462421032960    B \\n1523440462461927424    B \\n1523440462486044672    B \\n1523440462501773312    B \\n1523440462545813504    B \\n1523440474431422464    B\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eMassive reorders, which PeerSync was not designed for.\u003cbr\\/\u003e\\nPossible remedies:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003egreatly lower the probability of these big reorders\u003c\\/li\u003e\\n\\t\u003cli\u003ewhere there is overlap in versions, make PeerSync check that it is \\\"dense\\\" (both shards have all docs in the overlap)\\n\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\u003cli\u003ethis seems extremely strict and could cause peersync to fail due to a missing doc right at the end of an overlap... \u003cb\u003ewhich\u003c\\/b\u003e end matters a lot.\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\\t\u003cli\u003eexpand PeerSync to cover complete index\\n\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\u003cli\u003euse hashes over \u003cb\u003eall\u003c\\/b\u003e versions in the index\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15111065_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111065_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/16 18:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-21T18:39:23+0000\'\u003e21\\/Jan\\/16 18:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here\'s a visualization of a recent fail: \\n\\n Node A starts off as the leader, gets a bunch of updates that it ever sends to node B before it is killed. \\nNode B becomes the leader. \\nNode A comes up, does a PeerSync and the lists pretty much overlap in time (looking at low threshold \\/ high threshold only), so node A asks node B for the docs it\'s missing (and ends up with a lot more docs than node B). \\n\\n The list below is ordered from oldest to newest: \\n  \\n 1523440456046739456    B \\n1523440456047788032    B \\n1523440456049885184    B \\n1523440456050933760    B \\n1523440456051982336    B \\n1523440456053030912    B \\n1523440456053030913    B \\n1523440456053030914    B \\n1523440456054079488    B \\n1523440456055128064    B \\n1523440456059322368    B \\n1523440456314126336    B \\n1523440456314126337    B \\n1523440456315174912    B \\n1523440456316223488    B \\n1523440456318320640    B \\n1523440456342437888    B \\n1523440456343486464    B \\n1523440456343486465    B \\n1523440456344535040    B \\n1523440456362360832    B \\n1523440456363409408  A \\n1523440456372846592  A B \\n1523440456375992320  A B \\n1523440456375992321  A B \\n1523440456379138048  A \\n1523440456381235200  A \\n1523440456382283776  A B \\n1523440456392769536  A \\n1523440456401158144  A \\n1523440456403255296  A B \\n1523440456437858304  A \\n1523440456463024128  A \\n1523440456472461312  A \\n1523440456480849920  A \\n1523440456531181568  A \\n1523440456543764480  A \\n1523440456544813056  A \\n1523440456544813057  A \\n1523440456545861632  A \\n1523440456550055936  A B \\n1523440456552153088  A B \\n1523440456552153089  A \\n1523440456559493120  A B \\n1523440456561590272  A B \\n1523440456561590273  A B \\n1523440456562638848  A B \\n1523440456563687424  A B \\n1523440456565784576  A \\n1523440456609824768  A \\n1523440456610873344  A \\n1523440456610873345  A \\n1523440456611921920  A \\n1523440456669593600  A \\n1523440456669593601  A \\n1523440456669593602  A \\n1523440456670642176  A \\n1523440456671690752  A B \\n1523440456672739328  A \\n1523440456673787904  A \\n1523440456674836480  A \\n1523440456675885056  A \\n1523440456686370816  A \\n1523440456690565120  A \\n1523440456702099456  A B \\n1523440456726216704  A B \\n1523440456772354048  A B \\n1523440456785985536  A B \\n1523440456826880000  A B \\n1523440456857288704  A B \\n1523440456858337280  A B \\n1523440456921251840  A \\n1523440456921251841  A \\n1523440456922300416  A \\n1523440456926494720  A B \\n1523440456926494721  A B \\n1523440456927543296  A \\n1523440456927543297  A \\n1523440456929640448  A B \\n1523440456929640449  A \\n1523440456934883328  A \\n1523440456944320512  A \\n1523440456950611968  A \\n1523440456975777792  A \\n1523440456975777793  A \\n1523440456975777794  A \\n1523440456976826368  A \\n1523440456976826369  A \\n1523440456976826370  A \\n1523440456999895040  A \\n1523440457004089344  A \\n1523440457008283648  A \\n1523440457009332224  A \\n1523440457009332225  A \\n1523440457010380800  A \\n1523440457056518144  A B \\n1523440457064906752  A B \\n1523440457065955328  A B \\n1523440457067003904  A B \\n1523440457070149632  A B \\n1523440457071198208  A B \\n1523440457071198209  A B \\n1523440457074343936  A B \\n1523440457077489664  A B \\n1523440457078538240  A B \\n1523440457079586816  A B \\n1523440457080635392  A B \\n1523440457116286976  A \\n1523440457116286977  A \\n1523440457117335552  A \\n1523440457138307072  A \\n1523440457149841408  A \\n1523440457170812928  A \\n1523440457172910080  A \\n1523440457173958656  A \\n1523440457173958657  A \\n1523440457175007232  A \\n1523440457175007233  A \\n1523440457180250112  A \\n1523440457181298688  A \\n1523440457181298689  A \\n1523440460638453760    B \\n1523440460641599488    B \\n1523440460641599489    B \\n1523440460653133824    B \\n1523440460708708352    B \\n1523440460881723392    B \\n1523440460915277824    B \\n1523440461056835584    B \\n1523440461057884160    B \\n1523440461145964544    B \\n1523440461206781952    B \\n1523440461227753472    B \\n1523440461237190656    B \\n1523440461259210752    B \\n1523440461272842240    B \\n1523440461370359808    B \\n1523440461379796992    B \\n1523440461486751744    B \\n1523440461550714880    B \\n1523440461615726592    B \\n1523440461659766784    B \\n1523440461713244160    B \\n1523440461754138624    B \\n1523440461787693056    B \\n1523440461817053184    B \\n1523440461862141952    B \\n1523440461881016320    B \\n1523440461917716480    B \\n1523440461939736576    B \\n1523440461953368064    B \\n1523440461987971072    B \\n1523440462001602560    B \\n1523440462224949248    B \\n1523440462292058112    B \\n1523440462313029632    B \\n1523440462325612544    B \\n1523440462379089920    B \\n1523440462421032960    B \\n1523440462461927424    B \\n1523440462486044672    B \\n1523440462501773312    B \\n1523440462545813504    B \\n1523440474431422464    B\\n \\n  \\n\\n Massive reorders, which PeerSync was not designed for. \\nPossible remedies: \\n \\n\\t greatly lower the probability of these big reorders \\n\\t where there is overlap in versions, make PeerSync check that it is \\\"dense\\\" (both shards have all docs in the overlap)\\n\\t \\n\\t\\t this seems extremely strict and could cause peersync to fail due to a missing doc right at the end of an overlap...  which  end matters a lot. \\n\\t \\n\\t \\n\\t expand PeerSync to cover complete index\\n\\t \\n\\t\\t use hashes over  all  versions in the index \\n\\t \\n\\t \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15111068\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15111068&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15111068\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_15111068_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111068_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/16 18:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-21T18:42:26+0000\'\u003e21\\/Jan\\/16 18:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mark Miller - 21\\/Jan\\/16 18:43\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eexpand PeerSync to cover complete index\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think this would be great if we could do it reasonably.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003egreatly lower the probability of these big reorders\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eMain reason I don\'t like this is that it just seems fragile over time, and will constrict things more.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_15111068_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111068_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/16 18:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-21T18:42:26+0000\'\u003e21\\/Jan\\/16 18:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mark Miller - 21\\/Jan\\/16 18:43\\\"\u003eedited\u003c\\/span\u003e                    expand PeerSync to cover complete index  \\n\\n I think this would be great if we could do it reasonably. \\n\\n  greatly lower the probability of these big reorders  \\n\\n Main reason I don\'t like this is that it just seems fragile over time, and will constrict things more.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15111192\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15111192&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15111192\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gchanan\\\" id=\\\"commentauthor_15111192_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gchanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gchanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Gregory Chanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111192_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/16 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-21T19:53:19+0000\'\u003e21\\/Jan\\/16 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e+1 for Mark\'s reasoning.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gchanan\\\" id=\\\"commentauthor_15111192_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gchanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gchanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Gregory Chanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111192_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/16 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-21T19:53:19+0000\'\u003e21\\/Jan\\/16 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    +1 for Mark\'s reasoning.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15111261\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15111261&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15111261\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15111261_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111261_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/16 20:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-21T20:45:21+0000\'\u003e21\\/Jan\\/16 20:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYep, but reducing the probability of big reorders will still be important, because if we do detect a big reorder (with hashes over the entire index), the only current general remedy we have is to fail peersync and copy the whole index.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15111261_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111261_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/16 20:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-21T20:45:21+0000\'\u003e21\\/Jan\\/16 20:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yep, but reducing the probability of big reorders will still be important, because if we do detect a big reorder (with hashes over the entire index), the only current general remedy we have is to fail peersync and copy the whole index.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15111508\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15111508&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15111508\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_15111508_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111508_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/16 22:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-21T22:29:25+0000\'\u003e21\\/Jan\\/16 22:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYeah, but I\'d prefer full replication over holes. Better that reducing reorders is an optimization than a bug.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_15111508_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111508_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/16 22:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-21T22:29:25+0000\'\u003e21\\/Jan\\/16 22:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yeah, but I\'d prefer full replication over holes. Better that reducing reorders is an optimization than a bug.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15111805\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15111805&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15111805\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15111805_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111805_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/16 02:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-22T02:26:24+0000\'\u003e22\\/Jan\\/16 02:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eYeah, but I\'d prefer full replication over holes. Better that reducing reorders is an optimization than a bug.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eSure, we\'re saying the same thing.  I was just pointing out that the reorders can still be very painful (and thus important) even if we improve\\/fix everything else.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15111805_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111805_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/16 02:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-22T02:26:24+0000\'\u003e22\\/Jan\\/16 02:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Yeah, but I\'d prefer full replication over holes. Better that reducing reorders is an optimization than a bug.  \\n\\n Sure, we\'re saying the same thing.  I was just pointing out that the reorders can still be very painful (and thus important) even if we improve\\/fix everything else.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15111833\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15111833&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15111833\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_15111833_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111833_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/16 02:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-22T02:58:22+0000\'\u003e22\\/Jan\\/16 02:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003ewe\'re saying the same thing. \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI just get the feeling you have been trying to avoid doing this full hash, but it seems so much more bulletproof than these quick window checks. I\'d rather recovery be a lot slower and get it right and worry about speeding that up later. \u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003ethe only current general remedy we have is to fail peersync and copy the whole index.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThese kind of reorders don\'t seem that common? And we have many other reasons you will probably have to replicate the whole index. 100 updates in peer sync means it\'s best simply for static indexes or low usage indexes. Sure, I\'d rather not replicate a full index, but I think it\'s pretty common to have to do already.\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_15111833_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15111833_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/16 02:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-22T02:58:22+0000\'\u003e22\\/Jan\\/16 02:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     we\'re saying the same thing.   \\n\\n I just get the feeling you have been trying to avoid doing this full hash, but it seems so much more bulletproof than these quick window checks. I\'d rather recovery be a lot slower and get it right and worry about speeding that up later.  \\n\\n  the only current general remedy we have is to fail peersync and copy the whole index.  \\n\\n These kind of reorders don\'t seem that common? And we have many other reasons you will probably have to replicate the whole index. 100 updates in peer sync means it\'s best simply for static indexes or low usage indexes. Sure, I\'d rather not replicate a full index, but I think it\'s pretty common to have to do already. \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15112775\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15112775&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15112775\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15112775_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15112775_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/16 17:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-22T17:50:50+0000\'\u003e22\\/Jan\\/16 17:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOpened \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8586\\\" title=\\\"Implement hash over all documents to check for shard synchronization\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8586\\\"\u003e\u003cdel\u003eSOLR-8586\u003c\\/del\u003e\u003c\\/a\u003e for hashing all versions.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eThese kind of reorders don\'t seem that common?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eSeems way too common on HDFS (on my linux box at least).  \u003c\\/p\u003e\\n\\n\u003cp\u003eEven with \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8586\\\" title=\\\"Implement hash over all documents to check for shard synchronization\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8586\\\"\u003e\u003cdel\u003eSOLR-8586\u003c\\/del\u003e\u003c\\/a\u003e, big enough reorders can still cause other issues, such as going beyond our delete window.  That would cause shards to get out-of-sync even when all the shards are up and live (and hence we wouldn\'t catch it until the next time we did a version-hash for some reason).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15112775_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15112775_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/16 17:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-22T17:50:50+0000\'\u003e22\\/Jan\\/16 17:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Opened   SOLR-8586   for hashing all versions. \\n\\n  These kind of reorders don\'t seem that common?  \\n\\n Seems way too common on HDFS (on my linux box at least).   \\n\\n Even with   SOLR-8586  , big enough reorders can still cause other issues, such as going beyond our delete window.  That would cause shards to get out-of-sync even when all the shards are up and live (and hence we wouldn\'t catch it until the next time we did a version-hash for some reason).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15119905\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15119905&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15119905\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jeremie.monsinjon@gmail.com\\\" id=\\\"commentauthor_15119905_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jeremie.monsinjon%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10432\\\" alt=\\\"jeremie.monsinjon@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00E9r\\u00E9mie MONSINJON\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15119905_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jan\\/16 18:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-27T18:09:00+0000\'\u003e27\\/Jan\\/16 18:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\\u2019m stressing a SolR cluster with Gatling for perf tests. 3 shards, 3 nodes per shard (1 leader, 2 replicas). \u003cbr\\/\u003e\\nAbout 300 updates per second using CloudSolrServer (about 100 per shard) and 40 qps.\u003cbr\\/\u003e\\nUsing round robin for select queries on each node.\u003cbr\\/\u003e\\nAfter 2 minutes playing the scenario, it seems that the leader of a shard can\\u2019t send an update to a replica.\u003c\\/p\u003e\\n\\n\u003cp\u003eREPLICA : 51\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:18:00.252 WARN  (qtp1057941451-128982) [   ] o.e.j.h.HttpParser badMessage: java.lang.IllegalStateException: too much data after closed for HttpChannelOverHttp@428e80f\u003c\\/p\u003e\\n\u003cdiv class=\\\"error\\\"\u003e\u003cspan class=\\\"error\\\"\u003eUnknown macro: {r=1098,c=false,a=IDLE,uri=-}\u003c\\/span\u003e \u003c\\/div\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eLEADER : 33\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:18:00.245 ERROR (updateExecutor-2-thread-3557-processing-\u003ca href=\\\"http:\\/\\/\\/\\/solrNode051:8983\\/\\/solr\\/\\/offers_full_shard3_replica1\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/\\/\\/solrNode051:8983\\/\\/solr\\/\\/offers_full_shard3_replica1\u003c\\/a\u003e x:offers_full_shard3_replica3 r:core_node10 n:solrNode033:8983_solr s:shard3 c:offers_full) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.u.StreamingSolrClients error\u003cbr\\/\u003e\\norg.apache.http.NoHttpResponseException: solrNode051:8983 failed to respond\u003cbr\\/\u003e\\n2016-01-27 15:18:00.267 INFO  (qtp1057941451-45551) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.ZkController Put replica core=offers_full_shard3_replica1 coreNodeName=core_node3 on solrNode051:8983_solr into leader-initiated recovery.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eREPLICA : 51\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:18:00.276 INFO  (qtp1057941451-129018) [   ] o.a.s.h.a.CoreAdminHandler It has been requested that we recover: core=offers_full_shard3_replica1\u003cbr\\/\u003e\\n2016-01-27 15:18:00.277 INFO  (Thread-117036) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;\u003c\\/span\u003e o.a.s.u.DefaultSolrCoreState Running recovery - first canceling any ongoing recovery\u003c\\/p\u003e\\n\\n\u003cp\u003e2016-01-27 15:18:08.296 INFO  (updateExecutor-2-thread-4594-processing-n:solrNode051:8983_solr x:offers_full_shard3_replica1 s:shard3 c:offers_full r:core_node3) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;\u003c\\/span\u003e o.a.s.c.RecoveryStrategy Attempting to PeerSync from \u003ca href=\\\"http:\\/\\/solrNode033:8983\\/solr\\/offers_full_shard3_replica3\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/solrNode033:8983\\/solr\\/offers_full_shard3_replica3\\/\u003c\\/a\u003e - recoveringAfterStartup=false\u003c\\/p\u003e\\n\\n\u003cp\u003e2016-01-27 15:18:08.296 ERROR (updateExecutor-2-thread-4594-processing-n:solrNode051:8983_solr x:offers_full_shard3_replica1 s:shard3 c:offers_full r:core_node3) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;\u003c\\/span\u003e o.a.s.u.PeerSync PeerSync: core=offers_full_shard3_replica1 url=\u003ca href=\\\"http:\\/\\/solrNode051:8983\\/solr\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/solrNode051:8983\\/solr\u003c\\/a\u003e ERROR, update log not in ACTIVE or REPLAY state. FSUpdateLog{state=BUFFERING, tlog=tlog{file=\\/var\\/lib\\/solr5\\/data\\/offers_full_shard3_replica1\\/data\\/tlog\\/tlog.0000000000000004550 refcount=1}}\u003cbr\\/\u003e\\n2016-01-27 15:18:08.297 WARN  (updateExecutor-2-thread-4594-processing-n:solrNode051:8983_solr x:offers_full_shard3_replica1 s:shard3 c:offers_full r:core_node3) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;\u003c\\/span\u003e o.a.s.u.PeerSync PeerSync: core=offers_full_shard3_replica1 url=\u003ca href=\\\"http:\\/\\/solrNode051:8983\\/solr\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/solrNode051:8983\\/solr\u003c\\/a\u003e too many updates received since start - startingUpdates no longer overlaps with our currentUpdates\u003c\\/p\u003e\\n\\n\u003cp\u003e2016-01-27 15:18:15.160 WARN  (updateExecutor-2-thread-4594-processing-n:solrNode051:8983_solr x:offers_full_shard3_replica1 s:shard3 c:offers_full r:core_node3) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;\u003c\\/span\u003e o.a.s.h.IndexFetcher File _d2r_1wk.liv did not match. expected checksum is 3620017595 and actual is checksum 442433238. expected length is 38405 and actual length is 38405\u003cbr\\/\u003e\\n2016-01-27 15:18:15.160 INFO  (updateExecutor-2-thread-4594-processing-n:solrNode051:8983_solr x:offers_full_shard3_replica1 s:shard3 c:offers_full r:core_node3) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;\u003c\\/span\u003e o.a.s.h.IndexFetcher Starting download (fullCopy=true) to NRTCachingDirectory(MMapDirectory@\\/var\\/lib\\/solr5\\/data\\/offers_full_shard3_replica1\\/data\\/index.20160127151815143 lockFactory=org.apache.lucene.store.NativeFSLockFactory@721552d5; maxCacheMB=48.0 maxMergeSizeMB=4.0)\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eREPLICA : 27\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:20:54.009 INFO  (zkCallback-3-thread-198-processing-n:solrNode027:8983_solr) [   ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:Sync\u003cbr\\/\u003e\\nConnected type:NodeChildrenChanged path:\\/live_nodes, has occurred - updating... (live nodes size: 11)\u003cbr\\/\u003e\\n2016-01-27 15:20:54.016 INFO  (zkCallback-3-thread-198-processing-n:solrNode027:8983_solr) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node7 x:offers_full_shard3_replica2&#93;\u003c\\/span\u003e o.a.s.c.ShardLeaderElectionContext Running the leader process for shard shard3\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eREPLICA : 51\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:20:54.011 INFO  (zkCallback-3-thread-110-processing-n:solrNode051:8983_solr) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;\u003c\\/span\u003e o.a.s.u.DefaultSolrCoreState Running recovery - first canceling any ongoing recovery\u003c\\/p\u003e\u003c\\/blockquote\u003e\\t\\n\\n\u003cp\u003eREPLICA : 27\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003eBECAME THE LEADER\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:20:56.525 INFO  (zkCallback-3-thread-198-processing-n:solrNode027:8983_solr) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node7 x:offers_full_shard3_replica2&#93;\u003c\\/span\u003e o.a.s.c.SyncStrategy Sync Success - now sync replicas to me\u003c\\/p\u003e\\n\\n\u003cp\u003e2016-01-27 15:21:08.793 ERROR (qtp1057941451-43187) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node7 x:offers_full_shard3_replica2&#93;\u003c\\/span\u003e o.a.s.u.p.DistributedUpdateProcessor Request says it is coming from leader, but we are the leader: update.distrib=FROMLEADER&amp;distrib.from=\u003ca href=\\\"http:\\/\\/solrNode033:8983\\/solr\\/offers_full_shard3_replica3\\/&amp;wt=javabin&amp;version=2\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/solrNode033:8983\\/solr\\/offers_full_shard3_replica3\\/&amp;wt=javabin&amp;version=2\u003c\\/a\u003e\u003c\\/p\u003e\u003c\\/blockquote\u003e\\t\\n\\n\u003cp\u003e(OLD) LEADER : 33\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:21:08.801 ERROR (qtp1057941451-45871) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.u.p.DistributedUpdateProcessor On core_node10, replica \u003ca href=\\\"http:\\/\\/solrNode027:8983\\/solr\\/offers_full_shard3_replica2\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/solrNode027:8983\\/solr\\/offers_full_shard3_replica2\\/\u003c\\/a\u003e now thinks it is the leader! Failing the request to let the client retry! org.apache.solr.common.SolrException:Service Unavailable\u003c\\/p\u003e\\n\\n\u003cp\u003e2016-01-27 15:21:09.712 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread) [   ] o.a.s.c.c.ConnectionManager Our previous ZooKeeper session was expired. Attempting to reconnect to recover relationship with ZooKeeper...\u003c\\/p\u003e\\n\\n\u003cp\u003e2016-01-27 15:21:09.747 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.ZkController publishing state=down\u003cbr\\/\u003e\\n2016-01-27 15:21:09.760 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.ZkController Replica core_node10 NOT in leader-initiated recovery, need to wait for leader to see down state.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e(NEW) LEADER : 27\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:21:10.137 INFO  (zkCallback-3-thread-199-processing-n:solrNode027:8983_solr) [   ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:\\/collections\\/offers_full\\/state.json for collection offers_full has occurred - updating... (live nodes size: 10)\u003cbr\\/\u003e\\n2016-01-27 15:21:10.139 INFO  (zkCallback-3-thread-199-processing-n:solrNode027:8983_solr) [   ] o.a.s.c.c.ZkStateReader Updating data for offers_full from 1344 to 1345\u003cbr\\/\u003e\\n2016-01-27 15:21:10.215 INFO  (qtp1057941451-43418) [   ] o.a.s.h.a.CoreAdminHandler Going to wait for coreNodeName: core_node10, state: down, checkLive: null, onlyIfLeader: null, onlyIfLeaderActive: null\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e(OLD) LEADER : 33\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:21:10.220 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.ElectionContext cancelElection did not find election node to remove \\/overseer_elect\\/election\\/238989758703863355-solrNode033:8983_solr-n_0000000158\u003cbr\\/\u003e\\n2016-01-27 15:21:10.221 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.LeaderElector Joined leadership election with path: \\/overseer_elect\\/election\\/238989758703863364-solrNode033:8983_solr-n_0000000175\u003cbr\\/\u003e\\n2016-01-27 15:21:10.238 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.ZkController Register node as live in ZooKeeper:\\/live_nodes\\/solrNode033:8983_solr\u003cbr\\/\u003e\\n2016-01-27 15:21:10.290 INFO  (updateExecutor-2-thread-3542-processing-n:solrNode033:8983_solr x:offers_full_shard3_replica3 s:shard3 c:offers_full r:core_node10) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.RecoveryStrategy Sending prep recovery command to \u003ca href=\\\"http:\\/\\/solrNode027:8983\\/solr\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/solrNode027:8983\\/solr\u003c\\/a\u003e; WaitForState: action=PREPRECOVERY&amp;core=offers_full_shard3_replica2&amp;nodeName=solrNode033:8983_solr&amp;coreNodeName=core_node10&amp;state=recovering&amp;checkLive=true&amp;onlyIfLeader=true&amp;onlyIfLeaderActive=true\u003c\\/p\u003e\u003c\\/blockquote\u003e\\t\\n\\n\u003cp\u003e(NEW) LEADER : 27\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:21:10.329 INFO  (qtp1057941451-43519) [   ] o.a.s.s.HttpSolrCall \u003cspan class=\\\"error\\\"\u003e&#91;admin&#93;\u003c\\/span\u003e webapp=null path=\\/admin\\/cores params=\u003c\\/p\u003e\\n\u003cdiv class=\\\"error\\\"\u003e\u003cspan class=\\\"error\\\"\u003eUnknown macro: {nodeName=solrNode033}\u003c\\/span\u003e \u003c\\/div\u003e\\n\u003cp\u003e status=0 QTime=2\u003c\\/p\u003e\u003c\\/blockquote\u003e\\t\\n\\n\u003cp\u003e(OLD) LEADER : 33\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003eProcess Recovering\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:21:52.007 INFO  (zkCallback-3-thread-211-processing-n:solrNode033:8983_solr) [   ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:\\/live_nodes, has occurred - updating... (live nodes size: 11)\u003cbr\\/\u003e\\n2016-01-27 15:21:52.008 INFO  (zkCallback-3-thread-210-processing-n:solrNode033:8983_solr) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.ActionThrottle The last leader attempt started 22366010ms ago.\u003cbr\\/\u003e\\n2016-01-27 15:21:52.008 INFO  (zkCallback-3-thread-210-processing-n:solrNode033:8983_solr) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.ShardLeaderElectionContext Running the leader process for shard shard3\u003cbr\\/\u003e\\n2016-01-27 15:21:52.007 INFO  (zkCallback-3-thread-211-processing-n:solrNode033:8983_solr) [   ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:\\/live_nodes, has occurred - updating... (live nodes size: 11)\u003cbr\\/\u003e\\n2016-01-27 15:21:52.011 INFO  (zkCallback-3-thread-210-processing-n:solrNode033:8983_solr) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.ShardLeaderElectionContext Checking if I should try and be the leader.\u003cbr\\/\u003e\\n2016-01-27 15:21:52.011 INFO  (zkCallback-3-thread-210-processing-n:solrNode033:8983_solr) \u003cspan class=\\\"error\\\"\u003e&#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;\u003c\\/span\u003e o.a.s.c.ShardLeaderElectionContext There may be a better leader candidate than us - going back into recovery\u003c\\/p\u003e\u003c\\/blockquote\u003e\\t\\n\\n\u003cp\u003e(NEW) LEADER : 27\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e2016-01-27 15:21:53.211 INFO  (zkCallback-3-thread-73-processing-n:solrNode027:8983_solr-EventThread) [   ] o.a.s.c.c.ConnectionManager Watcher org.apache.solr.common.cloud.ConnectionManager@478ca953 name:ZooKeeperConnection Watcher:solrNode013:2181,solrNode014:2181,solrNode015:2181 got event WatchedEvent state:Disconnected type:None path:null path:null type:None\u003cbr\\/\u003e\\n2016-01-27 15:21:53.211 INFO  (zkCallback-3-thread-73-processing-n:solrNode027:8983_solr-EventThread) [   ] o.a.s.c.c.ConnectionManager zkClient has disconnected\\t\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAll this time, the replica 51 can\'t catch up and stay in recovering\\tstate.\u003cbr\\/\u003e\\nThe old leader 33 stays in full recovering state because 27 is the new leader. During several minutes, the node 33 tries to download all the segments but fail on every checksum (\\\"expected length is 137136 and actual length is 2096582\\\" for example)\u003cbr\\/\u003e\\nBecause it cannot keep its zookeeper session, the 27 stays down because there are no leader for the shard...\u003c\\/p\u003e\\n\\n\u003cp\u003eThis behaviour happens every time I send too many QPS... Under 40 qps, we do not have any problems...\u003c\\/p\u003e\\n\\n\u003cp\u003eDoes it look similar to these ChaosMonkey failures ?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jeremie.monsinjon@gmail.com\\\" id=\\\"commentauthor_15119905_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jeremie.monsinjon%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10432\\\" alt=\\\"jeremie.monsinjon@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00E9r\\u00E9mie MONSINJON\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15119905_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jan\\/16 18:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-27T18:09:00+0000\'\u003e27\\/Jan\\/16 18:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\\u2019m stressing a SolR cluster with Gatling for perf tests. 3 shards, 3 nodes per shard (1 leader, 2 replicas).  \\nAbout 300 updates per second using CloudSolrServer (about 100 per shard) and 40 qps. \\nUsing round robin for select queries on each node. \\nAfter 2 minutes playing the scenario, it seems that the leader of a shard can\\u2019t send an update to a replica. \\n\\n REPLICA : 51 \\n \\n 2016-01-27 15:18:00.252 WARN  (qtp1057941451-128982) [   ] o.e.j.h.HttpParser badMessage: java.lang.IllegalStateException: too much data after closed for HttpChannelOverHttp@428e80f \\n  Unknown macro: {r=1098,c=false,a=IDLE,uri=-}    \\n\\n LEADER : 33 \\n \\n 2016-01-27 15:18:00.245 ERROR (updateExecutor-2-thread-3557-processing- http:\\/\\/\\/\\/solrNode051:8983\\/\\/solr\\/\\/offers_full_shard3_replica1  x:offers_full_shard3_replica3 r:core_node10 n:solrNode033:8983_solr s:shard3 c:offers_full)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.u.StreamingSolrClients error \\norg.apache.http.NoHttpResponseException: solrNode051:8983 failed to respond \\n2016-01-27 15:18:00.267 INFO  (qtp1057941451-45551)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.ZkController Put replica core=offers_full_shard3_replica1 coreNodeName=core_node3 on solrNode051:8983_solr into leader-initiated recovery.  \\n\\n REPLICA : 51 \\n \\n 2016-01-27 15:18:00.276 INFO  (qtp1057941451-129018) [   ] o.a.s.h.a.CoreAdminHandler It has been requested that we recover: core=offers_full_shard3_replica1 \\n2016-01-27 15:18:00.277 INFO  (Thread-117036)  &#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;  o.a.s.u.DefaultSolrCoreState Running recovery - first canceling any ongoing recovery \\n\\n 2016-01-27 15:18:08.296 INFO  (updateExecutor-2-thread-4594-processing-n:solrNode051:8983_solr x:offers_full_shard3_replica1 s:shard3 c:offers_full r:core_node3)  &#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;  o.a.s.c.RecoveryStrategy Attempting to PeerSync from  http:\\/\\/solrNode033:8983\\/solr\\/offers_full_shard3_replica3\\/  - recoveringAfterStartup=false \\n\\n 2016-01-27 15:18:08.296 ERROR (updateExecutor-2-thread-4594-processing-n:solrNode051:8983_solr x:offers_full_shard3_replica1 s:shard3 c:offers_full r:core_node3)  &#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;  o.a.s.u.PeerSync PeerSync: core=offers_full_shard3_replica1 url= http:\\/\\/solrNode051:8983\\/solr  ERROR, update log not in ACTIVE or REPLAY state. FSUpdateLog{state=BUFFERING, tlog=tlog{file=\\/var\\/lib\\/solr5\\/data\\/offers_full_shard3_replica1\\/data\\/tlog\\/tlog.0000000000000004550 refcount=1}} \\n2016-01-27 15:18:08.297 WARN  (updateExecutor-2-thread-4594-processing-n:solrNode051:8983_solr x:offers_full_shard3_replica1 s:shard3 c:offers_full r:core_node3)  &#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;  o.a.s.u.PeerSync PeerSync: core=offers_full_shard3_replica1 url= http:\\/\\/solrNode051:8983\\/solr  too many updates received since start - startingUpdates no longer overlaps with our currentUpdates \\n\\n 2016-01-27 15:18:15.160 WARN  (updateExecutor-2-thread-4594-processing-n:solrNode051:8983_solr x:offers_full_shard3_replica1 s:shard3 c:offers_full r:core_node3)  &#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;  o.a.s.h.IndexFetcher File _d2r_1wk.liv did not match. expected checksum is 3620017595 and actual is checksum 442433238. expected length is 38405 and actual length is 38405 \\n2016-01-27 15:18:15.160 INFO  (updateExecutor-2-thread-4594-processing-n:solrNode051:8983_solr x:offers_full_shard3_replica1 s:shard3 c:offers_full r:core_node3)  &#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;  o.a.s.h.IndexFetcher Starting download (fullCopy=true) to NRTCachingDirectory(MMapDirectory@\\/var\\/lib\\/solr5\\/data\\/offers_full_shard3_replica1\\/data\\/index.20160127151815143 lockFactory=org.apache.lucene.store.NativeFSLockFactory@721552d5; maxCacheMB=48.0 maxMergeSizeMB=4.0)  \\n\\n REPLICA : 27 \\n \\n 2016-01-27 15:20:54.009 INFO  (zkCallback-3-thread-198-processing-n:solrNode027:8983_solr) [   ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:Sync \\nConnected type:NodeChildrenChanged path:\\/live_nodes, has occurred - updating... (live nodes size: 11) \\n2016-01-27 15:20:54.016 INFO  (zkCallback-3-thread-198-processing-n:solrNode027:8983_solr)  &#91;c:offers_full s:shard3 r:core_node7 x:offers_full_shard3_replica2&#93;  o.a.s.c.ShardLeaderElectionContext Running the leader process for shard shard3  \\n\\n REPLICA : 51 \\n \\n 2016-01-27 15:20:54.011 INFO  (zkCallback-3-thread-110-processing-n:solrNode051:8983_solr)  &#91;c:offers_full s:shard3 r:core_node3 x:offers_full_shard3_replica1&#93;  o.a.s.u.DefaultSolrCoreState Running recovery - first canceling any ongoing recovery  \\t\\n\\n REPLICA : 27 \\n \\n BECAME THE LEADER  \\n \\n 2016-01-27 15:20:56.525 INFO  (zkCallback-3-thread-198-processing-n:solrNode027:8983_solr)  &#91;c:offers_full s:shard3 r:core_node7 x:offers_full_shard3_replica2&#93;  o.a.s.c.SyncStrategy Sync Success - now sync replicas to me \\n\\n 2016-01-27 15:21:08.793 ERROR (qtp1057941451-43187)  &#91;c:offers_full s:shard3 r:core_node7 x:offers_full_shard3_replica2&#93;  o.a.s.u.p.DistributedUpdateProcessor Request says it is coming from leader, but we are the leader: update.distrib=FROMLEADER&amp;distrib.from= http:\\/\\/solrNode033:8983\\/solr\\/offers_full_shard3_replica3\\/&amp;wt=javabin&amp;version=2   \\t\\n\\n (OLD) LEADER : 33 \\n \\n 2016-01-27 15:21:08.801 ERROR (qtp1057941451-45871)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.u.p.DistributedUpdateProcessor On core_node10, replica  http:\\/\\/solrNode027:8983\\/solr\\/offers_full_shard3_replica2\\/  now thinks it is the leader! Failing the request to let the client retry! org.apache.solr.common.SolrException:Service Unavailable \\n\\n 2016-01-27 15:21:09.712 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread) [   ] o.a.s.c.c.ConnectionManager Our previous ZooKeeper session was expired. Attempting to reconnect to recover relationship with ZooKeeper... \\n\\n 2016-01-27 15:21:09.747 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.ZkController publishing state=down \\n2016-01-27 15:21:09.760 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.ZkController Replica core_node10 NOT in leader-initiated recovery, need to wait for leader to see down state.  \\n\\n (NEW) LEADER : 27 \\n \\n 2016-01-27 15:21:10.137 INFO  (zkCallback-3-thread-199-processing-n:solrNode027:8983_solr) [   ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:\\/collections\\/offers_full\\/state.json for collection offers_full has occurred - updating... (live nodes size: 10) \\n2016-01-27 15:21:10.139 INFO  (zkCallback-3-thread-199-processing-n:solrNode027:8983_solr) [   ] o.a.s.c.c.ZkStateReader Updating data for offers_full from 1344 to 1345 \\n2016-01-27 15:21:10.215 INFO  (qtp1057941451-43418) [   ] o.a.s.h.a.CoreAdminHandler Going to wait for coreNodeName: core_node10, state: down, checkLive: null, onlyIfLeader: null, onlyIfLeaderActive: null  \\n\\n (OLD) LEADER : 33 \\n \\n 2016-01-27 15:21:10.220 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.ElectionContext cancelElection did not find election node to remove \\/overseer_elect\\/election\\/238989758703863355-solrNode033:8983_solr-n_0000000158 \\n2016-01-27 15:21:10.221 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.LeaderElector Joined leadership election with path: \\/overseer_elect\\/election\\/238989758703863364-solrNode033:8983_solr-n_0000000175 \\n2016-01-27 15:21:10.238 INFO  (zkCallback-3-thread-36-processing-n:solrNode033:8983_solr-EventThread)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.ZkController Register node as live in ZooKeeper:\\/live_nodes\\/solrNode033:8983_solr \\n2016-01-27 15:21:10.290 INFO  (updateExecutor-2-thread-3542-processing-n:solrNode033:8983_solr x:offers_full_shard3_replica3 s:shard3 c:offers_full r:core_node10)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.RecoveryStrategy Sending prep recovery command to  http:\\/\\/solrNode027:8983\\/solr ; WaitForState: action=PREPRECOVERY&amp;core=offers_full_shard3_replica2&amp;nodeName=solrNode033:8983_solr&amp;coreNodeName=core_node10&amp;state=recovering&amp;checkLive=true&amp;onlyIfLeader=true&amp;onlyIfLeaderActive=true  \\t\\n\\n (NEW) LEADER : 27 \\n \\n 2016-01-27 15:21:10.329 INFO  (qtp1057941451-43519) [   ] o.a.s.s.HttpSolrCall  &#91;admin&#93;  webapp=null path=\\/admin\\/cores params= \\n  Unknown macro: {nodeName=solrNode033}   \\n  status=0 QTime=2  \\t\\n\\n (OLD) LEADER : 33 \\n \\n Process Recovering  \\n \\n 2016-01-27 15:21:52.007 INFO  (zkCallback-3-thread-211-processing-n:solrNode033:8983_solr) [   ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:\\/live_nodes, has occurred - updating... (live nodes size: 11) \\n2016-01-27 15:21:52.008 INFO  (zkCallback-3-thread-210-processing-n:solrNode033:8983_solr)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.ActionThrottle The last leader attempt started 22366010ms ago. \\n2016-01-27 15:21:52.008 INFO  (zkCallback-3-thread-210-processing-n:solrNode033:8983_solr)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.ShardLeaderElectionContext Running the leader process for shard shard3 \\n2016-01-27 15:21:52.007 INFO  (zkCallback-3-thread-211-processing-n:solrNode033:8983_solr) [   ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:\\/live_nodes, has occurred - updating... (live nodes size: 11) \\n2016-01-27 15:21:52.011 INFO  (zkCallback-3-thread-210-processing-n:solrNode033:8983_solr)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.ShardLeaderElectionContext Checking if I should try and be the leader. \\n2016-01-27 15:21:52.011 INFO  (zkCallback-3-thread-210-processing-n:solrNode033:8983_solr)  &#91;c:offers_full s:shard3 r:core_node10 x:offers_full_shard3_replica3&#93;  o.a.s.c.ShardLeaderElectionContext There may be a better leader candidate than us - going back into recovery  \\t\\n\\n (NEW) LEADER : 27 \\n \\n 2016-01-27 15:21:53.211 INFO  (zkCallback-3-thread-73-processing-n:solrNode027:8983_solr-EventThread) [   ] o.a.s.c.c.ConnectionManager Watcher org.apache.solr.common.cloud.ConnectionManager@478ca953 name:ZooKeeperConnection Watcher:solrNode013:2181,solrNode014:2181,solrNode015:2181 got event WatchedEvent state:Disconnected type:None path:null path:null type:None \\n2016-01-27 15:21:53.211 INFO  (zkCallback-3-thread-73-processing-n:solrNode027:8983_solr-EventThread) [   ] o.a.s.c.c.ConnectionManager zkClient has disconnected\\t  \\n\\n All this time, the replica 51 can\'t catch up and stay in recovering\\tstate. \\nThe old leader 33 stays in full recovering state because 27 is the new leader. During several minutes, the node 33 tries to download all the segments but fail on every checksum (\\\"expected length is 137136 and actual length is 2096582\\\" for example) \\nBecause it cannot keep its zookeeper session, the 27 stays down because there are no leader for the shard... \\n\\n This behaviour happens every time I send too many QPS... Under 40 qps, we do not have any problems... \\n\\n Does it look similar to these ChaosMonkey failures ?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15126091\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15126091&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15126091\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"stephlag\\\" id=\\\"commentauthor_15126091_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=stephlag\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"stephlag\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Stephan Lagraulet\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15126091_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Feb\\/16 10:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-02-01T10:44:05+0000\'\u003e01\\/Feb\\/16 10:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m trying to gather all issues related to SolrCloud that affects Solr 5.4. Can you affect SolrCloud component to this issue ?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"stephlag\\\" id=\\\"commentauthor_15126091_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=stephlag\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"stephlag\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Stephan Lagraulet\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15126091_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Feb\\/16 10:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-02-01T10:44:05+0000\'\u003e01\\/Feb\\/16 10:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m trying to gather all issues related to SolrCloud that affects Solr 5.4. Can you affect SolrCloud component to this issue ?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15873937\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15873937&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15873937\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15873937_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15873937_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/17 01:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-02-20T01:41:05+0000\'\u003e20\\/Feb\\/17 01:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 72f71275b28635cc4383fa12923245aaba69d592 in lucene-solr\'s branch refs\\/heads\\/master from markrmiller\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=72f7127\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=72f7127\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8129\\\" title=\\\"HdfsChaosMonkeyNothingIsSafeTest failures\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8129\\\"\u003e\u003cdel\u003eSOLR-8129\u003c\\/del\u003e\u003c\\/a\u003e: Harden HdfsChaosMonkeyNothingIsSafeTest some\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15873937_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15873937_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/17 01:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-02-20T01:41:05+0000\'\u003e20\\/Feb\\/17 01:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 72f71275b28635cc4383fa12923245aaba69d592 in lucene-solr\'s branch refs\\/heads\\/master from markrmiller \\n[  https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=72f7127  ] \\n\\n   SOLR-8129  : Harden HdfsChaosMonkeyNothingIsSafeTest some              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15878458\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8129?focusedCommentId=15878458&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15878458\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_15878458_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15878458_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/17 15:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-02-22T15:20:23+0000\'\u003e22\\/Feb\\/17 15:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m going to close this and open a new issue for more recent failures.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_15878458_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15878458_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/17 15:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-02-22T15:20:23+0000\'\u003e22\\/Feb\\/17 15:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m going to close this and open a new issue for more recent failures.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310230";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310230&amp;avatarId=22151\\\" alt=\\\"Solr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\"\u003eSolr\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520341730879"> 
    <input type="hidden" title="jira.request.server.time" value="241"> 
    <input type="hidden" title="jira.request.id" value="788x97491612x4"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="4"> 
    <input type="hidden" title="db.reads.time.in.ms" value="37"> 
    <input type="hidden" title="db.conns.time.in.ms" value="45"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 788x97491612x4
	          REQUEST TIMESTAMP : [06/Mar/2018:13:08:50 +0000]
	               REQUEST TIME : 0.2410
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 4

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=24, elapsedTotal=37724471, elapsedMin=586717, elapsedMax=17487164, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=28, elapsedTotal=45160325, elapsedMin=647485, elapsedMax=17545969, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>