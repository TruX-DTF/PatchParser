<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|0fdfe463ce8411e1a94a1215bde18545a2eb5e15|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"33edb3611d4b05\"";
WRM._unparsedData["project-id"]="12310230";
WRM._unparsedData["project-key"]="\"SOLR\"";
WRM._unparsedData["project-name"]="\"Solr\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310230";
WRM._unparsedData["projectKey"]="\"SOLR\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="SOLR-3360"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[SOLR-3360] Problem with DataImportHandler multi-threaded - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[SOLR-3360] Problem with DataImportHandler multi-threaded - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/SOLR" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-3360">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310230" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Solr'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310230&amp;avatarId=22151"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/SOLR">Solr</a></li>
                 <li><a class="issue-link" data-issue-key="SOLR-3360" href="/jira/browse/SOLR-3360" id="key-val" rel="12551075">SOLR-3360</a></li>
                </ol>
                <h1 id="summary-val">Problem with DataImportHandler multi-threaded</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-3360"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/SOLR-3360/SOLR-3360.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/SOLR-3360/SOLR-3360.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/SOLR-3360/SOLR-3360.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/SOLR-3360/SOLR-3360.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="3.6 Major release after 3.5">3.6</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+3.6.1" title="3.6.1 Bug fix release after 3.6">3.6.1</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12551075-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value"> 
                    <p>Solr 3.6.0, Apache Tomcat 6.0.20, jdk1.6.0_15, Windows XP</p> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Hi,</p> 
                  <p>If I use dataimport with 1 thread, I got:</p> 
                  <p>&lt;lst name="statusMessages"&gt;<br> &lt;str name="Total Requests made to DataSource"&gt;5001&lt;/str&gt;<br> &lt;str name="Total Rows Fetched"&gt;1000&lt;/str&gt;<br> &lt;str name="Total Documents Skipped"&gt;0&lt;/str&gt;<br> &lt;str name="Full Dump Started"&gt;2012-04-16 11:21:57&lt;/str&gt;<br> &lt;str name=""&gt;Indexing completed. Added/Updated: 1000 documents. Deleted 0 documents.&lt;/str&gt;<br> &lt;str name="Committed"&gt;2012-04-16 11:23:19&lt;/str&gt;<br> &lt;str name="Total Documents Processed"&gt;1000&lt;/str&gt;<br> &lt;str name="Time taken"&gt;0:1:22.390&lt;/str&gt;<br> &lt;/lst&gt;</p> 
                  <p>If I use datamport with 10 threads, I got:</p> 
                  <p>&lt;lst name="statusMessages"&gt;<br> &lt;str name="Total Requests made to DataSource"&gt;0&lt;/str&gt;<br> &lt;str name="Total Rows Fetched"&gt;10000&lt;/str&gt;<br> &lt;str name="Total Documents Skipped"&gt;0&lt;/str&gt;<br> &lt;str name="Full Dump Started"&gt;2012-04-16 11:31:43&lt;/str&gt;<br> &lt;str name=""&gt;Indexing completed. Added/Updated: 10000 documents. Deleted 0 documents.&lt;/str&gt;<br> &lt;str name="Committed"&gt;2012-04-16 11:41:50&lt;/str&gt;<br> &lt;str name="Total Documents Processed"&gt;10000&lt;/str&gt;<br> &lt;str name="Time taken"&gt;0:10:7.586&lt;/str&gt;<br> &lt;/lst&gt;</p> 
                  <p>The configuration of 10 threads consumed 10 times longer than the configuration with 1 thread.<br> I have 1000 records in the database.<br> My db-data-config.xml is shown below:</p> 
                  <p>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;<br> &lt;dataConfig&gt;<br> &lt;dataSource driver="com.microsoft.sqlserver.jdbc.SQLServerDriver" url="jdbc:sqlserver://200.XXX.XXX.XXX:1433;databaseName=test" user="user" password="pass"/&gt;<br> &lt;document&gt;<br> &lt;entity name="indice" rootEntity="true" threads="10" transformer="RegexTransformer,TemplateTransformer" query="select top 1000 i.id_indice, i.a, i.b from indice i where i.status = 'I'" deltaImportQuery="i.id_indice, i.a, i.b from indice i where id_indice in ('${dataimporter.delta.id_indice}')" deltaQuery="select id_indice from indice where status='I' and data_hora_modificacao &gt;= convert(datetime, '${dataimporter.last_index_time}', 120)" deletedPkQuery="select id_indice from indice where status='D' and data_hora_modificacao &gt;= convert(datetime, '${dataimporter.last_index_time}', 120)"&gt; <br> &lt;field column="id_indice" name="id_indice" /&gt;<br> &lt;field column="a" name="a" /&gt;<br> &lt;field column="b" name="b" /&gt;<br> &lt;entity name="filtro" transformer="RegexTransformer,TemplateTransformer" query="select categoria, sub_categoria from filtro where indice_id_indice = '${indice.id_indice}'"&gt;<br> &lt;field name="filtro_categoria" column="categoria" /&gt;<br> &lt;field name="filtro_sub_categoria" column="sub_categoria" /&gt;<br> &lt;field name="nv_sub_categoria" column="nv_sub_categoria" template="${filtro.categoria}|${filtro.sub_categoria}" /&gt;<br> &lt;/entity&gt;<br> &lt;entity name="pagina_relacionada" query="select url from pagina_relacionada where indice_id_indice = '${indice.id_indice}'"&gt;<br> &lt;field name="pagina_relacionada_url" column="url" /&gt;<br> &lt;/entity&gt;<br> &lt;entity name="veja_mais" query="select chamada, url from veja_mais where indice_id_indice = '${indice.id_indice}'"&gt;<br> &lt;field name="veja_mais_chamada" column="chamada" /&gt;<br> &lt;field name="veja_mais_url" column="url" /&gt;<br> &lt;/entity&gt;<br> &lt;entity name="video" query="select url from video where indice_id_indice = '${indice.id_indice}'"&gt;<br> &lt;field name="video_url" column="url" /&gt;<br> &lt;/entity&gt;<br> &lt;entity name="galeria" query="select url from galeria where indice_id_indice = '${indice.id_indice}'"&gt;<br> &lt;field name="galeria_url" column="url" /&gt;<br> &lt;/entity&gt;<br> &lt;/entity&gt;<br> &lt;/document&gt;<br> &lt;/dataConfig&gt;</p> 
                  <p>Thanks.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/SOLR-3360?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/SOLR-3360?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/SOLR-3360?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/SOLR-3360?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12523720" data-issue-id="12551075" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12523720/SOLR-3360.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-3360.patch:https://issues.apache.org/jira/secure/attachment/12523720/SOLR-3360.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12523720/SOLR-3360.patch" title="Latest  22/Apr/12 21:20 - Mikhail Khludnev" draggable="true" data-downloadurl="text/x-patch:SOLR-3360.patch:https://issues.apache.org/jira/secure/attachment/12523720/SOLR-3360.patch">SOLR-3360.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-04-22T21:20:37.740Z">22/Apr/12 21:20</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Mikhail Khludnev
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12525879" data-issue-id="12551075" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12525879/SOLR-3360-test.patch" draggable="true" data-downloadurl="text/x-diff:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12525879/SOLR-3360-test.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12525879/SOLR-3360-test.patch" title="Latest  07/May/12 17:28 - James Dyer" draggable="true" data-downloadurl="text/x-diff:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12525879/SOLR-3360-test.patch">SOLR-3360-test.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-05-07T17:28:36.287Z">07/May/12 17:28</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    James Dyer
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12525874" data-issue-id="12551075" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12525874/SOLR-3360-test.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12525874/SOLR-3360-test.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12525874/SOLR-3360-test.patch" title=" 07/May/12 16:59 - Mikhail Khludnev" draggable="true" data-downloadurl="text/x-patch:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12525874/SOLR-3360-test.patch">SOLR-3360-test.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-05-07T16:59:54.570Z">07/May/12 16:59</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Mikhail Khludnev
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12525856" data-issue-id="12551075" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12525856/SOLR-3360-test.patch" draggable="true" data-downloadurl="text/x-diff:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12525856/SOLR-3360-test.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12525856/SOLR-3360-test.patch" title=" 07/May/12 14:58 - James Dyer" draggable="true" data-downloadurl="text/x-diff:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12525856/SOLR-3360-test.patch">SOLR-3360-test.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-05-07T14:58:23.494Z">07/May/12 14:58</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    James Dyer
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12525657" data-issue-id="12551075" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12525657/SOLR-3360-test.patch" draggable="true" data-downloadurl="text/x-diff:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12525657/SOLR-3360-test.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12525657/SOLR-3360-test.patch" title=" 04/May/12 18:10 - James Dyer" draggable="true" data-downloadurl="text/x-diff:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12525657/SOLR-3360-test.patch">SOLR-3360-test.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-05-04T18:10:44.186Z">04/May/12 18:10</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    James Dyer
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12523712" data-issue-id="12551075" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12523712/SOLR-3360-test.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12523712/SOLR-3360-test.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12523712/SOLR-3360-test.patch" title=" 22/Apr/12 20:01 - Mikhail Khludnev" draggable="true" data-downloadurl="text/x-patch:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12523712/SOLR-3360-test.patch">SOLR-3360-test.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-04-22T20:01:09.557Z">22/Apr/12 20:01</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Mikhail Khludnev
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12523647" data-issue-id="12551075" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12523647/SOLR-3360-test.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12523647/SOLR-3360-test.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12523647/SOLR-3360-test.patch" title=" 21/Apr/12 20:30 - Mikhail Khludnev" draggable="true" data-downloadurl="text/x-patch:SOLR-3360-test.patch:https://issues.apache.org/jira/secure/attachment/12523647/SOLR-3360-test.patch">SOLR-3360-test.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-04-21T20:30:08.115Z">21/Apr/12 20:30</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Mikhail Khludnev
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_jdyer" rel="jdyer" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;James Dyer&quot;,&quot;emailAddress&quot;:&quot;james.dyer@ingrambook.com&quot;,&quot;username&quot;:&quot;jdyer&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="jdyer"></span></span> James Dyer </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_claudio_br" rel="claudio_br" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Claudio R&quot;,&quot;emailAddress&quot;:&quot;usertec@yahoo.com.br&quot;,&quot;username&quot;:&quot;claudio_br&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="claudio_br"></span></span> Claudio R </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">3</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="16/Apr/12 15:14"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2012-04-16T15:14:29+0000">16/Apr/12 15:14</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="22/Jul/12 16:05"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2012-07-22T16:05:41+0000">22/Jul/12 16:05</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="23/Apr/12 21:07"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2012-04-23T21:07:13+0000">23/Apr/12 21:07</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-3360?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/SOLR-3360?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-13254765\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13254765&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13254765\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13254765_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13254765_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 15:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T15:37:00+0000\'\u003e16\\/Apr\\/12 15:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eClaudio,\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for reporting this.  Was this working prior with 3.5?  (We did some work with the \\\"threads\\\" feature in 3.6, so it\'d be helpful to know if this is a new bug).  \u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, can you try it (1) without any transformers and (2) with just the parent entity (take out the sub-entities).  Do you get 10,000 or 1,000 ?  This might help in diagnosing any maybe solving this problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eFinally, you may want to be aware that 3.6 is the last release that will support the DIH \\\"threads\\\" feature.  It simply had too many bugs and was too difficult to maintain to keep it in.  But we did try and fix as many bugs for 3.6 as we could.  Possibly in \\\"fixing\\\" what we could, we introduced this as a new problem?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13254765_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13254765_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 15:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T15:37:00+0000\'\u003e16\\/Apr\\/12 15:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Claudio, \\n\\n Thanks for reporting this.  Was this working prior with 3.5?  (We did some work with the \\\"threads\\\" feature in 3.6, so it\'d be helpful to know if this is a new bug).   \\n\\n Also, can you try it (1) without any transformers and (2) with just the parent entity (take out the sub-entities).  Do you get 10,000 or 1,000 ?  This might help in diagnosing any maybe solving this problem. \\n\\n Finally, you may want to be aware that 3.6 is the last release that will support the DIH \\\"threads\\\" feature.  It simply had too many bugs and was too difficult to maintain to keep it in.  But we did try and fix as many bugs for 3.6 as we could.  Possibly in \\\"fixing\\\" what we could, we introduced this as a new problem?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13254855\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13254855&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13254855\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13254855_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13254855_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 18:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T18:05:49+0000\'\u003e16\\/Apr\\/12 18:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi James,\u003c\\/p\u003e\\n\\n\u003cp\u003eAbout the version 3.5.0, I got unstable behavior with 10 threads. In first full-import, I got successful import:\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;lst name=\\\"statusMessages\\\"&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;1000&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-16 14:12:08&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"\\\"&gt;Indexing completed. Added\\/Updated: 1000 documents. Deleted 0 documents.&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Committed\\\"&gt;2012-04-16 14:13:21&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Optimized\\\"&gt;2012-04-16 14:13:21&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;1000&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Time taken \\\"&gt;0:1:12.875&lt;\\/str&gt;\u003cbr\\/\u003e\\n&lt;\\/lst&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eBut, in second, third full-import I got Indexing failed. Rolled back all changes.\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;lst name=\\\"statusMessages\\\"&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Time Elapsed\\\"&gt;0:0:6.906&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;12&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;11&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-16 14:15:38&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"\\\"&gt;Indexing failed. Rolled back all changes.&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Rolledback\\\"&gt;2012-04-16 14:15:43&lt;\\/str&gt;\u003cbr\\/\u003e\\n&lt;\\/lst&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eAt catalina.out, I got:\u003c\\/p\u003e\\n\\n\u003cp\u003eSEVERE: Full Import failed:java.lang.RuntimeException: Error in multi-threaded import\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:265)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:187)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:359)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:427)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:408)\u003cbr\\/\u003e\\nCaused by: org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: select categoria, sub_categoria from filtro where indice_id_indice = \'257346\'\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAndThrow(DataImportHandlerException.java:72)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.&lt;init&gt;(JdbcDataSource.java:253)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:210)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:39)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:59)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.SqlEntityProcessor.nextRow(SqlEntityProcessor.java:73)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.ThreadedEntityProcessorWrapper.nextRow(ThreadedEntityProcessorWrapper.java:84)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DocBuilder$EntityRunner.runAThread(DocBuilder.java:446)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DocBuilder$EntityRunner.run(DocBuilder.java:399)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DocBuilder$EntityRunner.runAThread(DocBuilder.java:466)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DocBuilder$EntityRunner.access$000(DocBuilder.java:353)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.DocBuilder$EntityRunner$1.run(DocBuilder.java:406)\u003cbr\\/\u003e\\n\\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\u003cbr\\/\u003e\\n\\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\u003cbr\\/\u003e\\n\\tat java.lang.Thread.run(Thread.java:619)\u003cbr\\/\u003e\\nCaused by: com.microsoft.sqlserver.jdbc.SQLServerException: socket closed\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:1368)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:1355)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.TDSChannel.read(IOBuffer.java:1532)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.TDSReader.readPacket(IOBuffer.java:3274)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.TDSCommand.startResponse(IOBuffer.java:4433)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:784)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:685)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4026)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1416)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:185)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:160)\u003cbr\\/\u003e\\n\\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.execute(SQLServerStatement.java:658)\u003cbr\\/\u003e\\n\\tat org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.&lt;init&gt;(JdbcDataSource.java:246)\u003cbr\\/\u003e\\n\\t... 13 more\u003c\\/p\u003e\\n\\n\u003cp\u003eIn version 3.6.0 I did not get unstable behavior as obtained in version 3.5.0 with 10 threads.\u003cbr\\/\u003e\\nIn version 3.6.0 I tried without transformers:\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;lst name=\\\"statusMessages\\\"&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;10000&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-16 14:30:39&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"\\\"&gt;Indexing completed. Added\\/Updated: 10000 documents. Deleted 0 documents.&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Committed\\\"&gt;2012-04-16 14:39:45&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;10000&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Time taken\\\"&gt;0:9:5.719&lt;\\/str&gt;\u003cbr\\/\u003e\\n&lt;\\/lst&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eIn version 3.6.0, with just parent entity:\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;lst name=\\\"statusMessages\\\"&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;10000&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-16 14:42:49&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"\\\"&gt;Indexing completed. Added\\/Updated: 10000 documents. Deleted 0 documents.&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Committed\\\"&gt;2012-04-16 14:49:05&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;10000&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Time taken\\\"&gt;0:6:16.0&lt;\\/str&gt;\u003cbr\\/\u003e\\n&lt;\\/lst&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s weird obtain 10000 documents processed. I only have 1000 records in the database.\u003cbr\\/\u003e\\nThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13254855_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13254855_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 18:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T18:05:49+0000\'\u003e16\\/Apr\\/12 18:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi James, \\n\\n About the version 3.5.0, I got unstable behavior with 10 threads. In first full-import, I got successful import: \\n\\n &lt;lst name=\\\"statusMessages\\\"&gt; \\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;1000&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-16 14:12:08&lt;\\/str&gt; \\n   &lt;str name=\\\"\\\"&gt;Indexing completed. Added\\/Updated: 1000 documents. Deleted 0 documents.&lt;\\/str&gt; \\n   &lt;str name=\\\"Committed\\\"&gt;2012-04-16 14:13:21&lt;\\/str&gt; \\n   &lt;str name=\\\"Optimized\\\"&gt;2012-04-16 14:13:21&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;1000&lt;\\/str&gt; \\n   &lt;str name=\\\"Time taken \\\"&gt;0:1:12.875&lt;\\/str&gt; \\n&lt;\\/lst&gt; \\n\\n But, in second, third full-import I got Indexing failed. Rolled back all changes. \\n\\n &lt;lst name=\\\"statusMessages\\\"&gt; \\n   &lt;str name=\\\"Time Elapsed\\\"&gt;0:0:6.906&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;12&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;11&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-16 14:15:38&lt;\\/str&gt; \\n   &lt;str name=\\\"\\\"&gt;Indexing failed. Rolled back all changes.&lt;\\/str&gt; \\n   &lt;str name=\\\"Rolledback\\\"&gt;2012-04-16 14:15:43&lt;\\/str&gt; \\n&lt;\\/lst&gt; \\n\\n At catalina.out, I got: \\n\\n SEVERE: Full Import failed:java.lang.RuntimeException: Error in multi-threaded import \\n\\tat org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:265) \\n\\tat org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:187) \\n\\tat org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:359) \\n\\tat org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:427) \\n\\tat org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:408) \\nCaused by: org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: select categoria, sub_categoria from filtro where indice_id_indice = \'257346\' \\n\\tat org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAndThrow(DataImportHandlerException.java:72) \\n\\tat org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.&lt;init&gt;(JdbcDataSource.java:253) \\n\\tat org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:210) \\n\\tat org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:39) \\n\\tat org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:59) \\n\\tat org.apache.solr.handler.dataimport.SqlEntityProcessor.nextRow(SqlEntityProcessor.java:73) \\n\\tat org.apache.solr.handler.dataimport.ThreadedEntityProcessorWrapper.nextRow(ThreadedEntityProcessorWrapper.java:84) \\n\\tat org.apache.solr.handler.dataimport.DocBuilder$EntityRunner.runAThread(DocBuilder.java:446) \\n\\tat org.apache.solr.handler.dataimport.DocBuilder$EntityRunner.run(DocBuilder.java:399) \\n\\tat org.apache.solr.handler.dataimport.DocBuilder$EntityRunner.runAThread(DocBuilder.java:466) \\n\\tat org.apache.solr.handler.dataimport.DocBuilder$EntityRunner.access$000(DocBuilder.java:353) \\n\\tat org.apache.solr.handler.dataimport.DocBuilder$EntityRunner$1.run(DocBuilder.java:406) \\n\\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) \\n\\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) \\n\\tat java.lang.Thread.run(Thread.java:619) \\nCaused by: com.microsoft.sqlserver.jdbc.SQLServerException: socket closed \\n\\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:1368) \\n\\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:1355) \\n\\tat com.microsoft.sqlserver.jdbc.TDSChannel.read(IOBuffer.java:1532) \\n\\tat com.microsoft.sqlserver.jdbc.TDSReader.readPacket(IOBuffer.java:3274) \\n\\tat com.microsoft.sqlserver.jdbc.TDSCommand.startResponse(IOBuffer.java:4433) \\n\\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:784) \\n\\tat com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:685) \\n\\tat com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4026) \\n\\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1416) \\n\\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:185) \\n\\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:160) \\n\\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.execute(SQLServerStatement.java:658) \\n\\tat org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.&lt;init&gt;(JdbcDataSource.java:246) \\n\\t... 13 more \\n\\n In version 3.6.0 I did not get unstable behavior as obtained in version 3.5.0 with 10 threads. \\nIn version 3.6.0 I tried without transformers: \\n\\n &lt;lst name=\\\"statusMessages\\\"&gt; \\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;10000&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-16 14:30:39&lt;\\/str&gt; \\n   &lt;str name=\\\"\\\"&gt;Indexing completed. Added\\/Updated: 10000 documents. Deleted 0 documents.&lt;\\/str&gt; \\n   &lt;str name=\\\"Committed\\\"&gt;2012-04-16 14:39:45&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;10000&lt;\\/str&gt; \\n   &lt;str name=\\\"Time taken\\\"&gt;0:9:5.719&lt;\\/str&gt; \\n&lt;\\/lst&gt; \\n\\n In version 3.6.0, with just parent entity: \\n\\n &lt;lst name=\\\"statusMessages\\\"&gt; \\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;10000&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-16 14:42:49&lt;\\/str&gt; \\n   &lt;str name=\\\"\\\"&gt;Indexing completed. Added\\/Updated: 10000 documents. Deleted 0 documents.&lt;\\/str&gt; \\n   &lt;str name=\\\"Committed\\\"&gt;2012-04-16 14:49:05&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;10000&lt;\\/str&gt; \\n   &lt;str name=\\\"Time taken\\\"&gt;0:6:16.0&lt;\\/str&gt; \\n&lt;\\/lst&gt; \\n\\n It\'s weird obtain 10000 documents processed. I only have 1000 records in the database. \\nThanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13254875\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13254875&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13254875\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13254875_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13254875_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 18:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T18:25:53+0000\'\u003e16\\/Apr\\/12 18:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI ran in version 3.6.0 with 20 threads and got 20000 documents processed:\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;lst name=\\\"statusMessages\\\"&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;20000&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-16 15:10:22&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"\\\"&gt;Indexing completed. Added\\/Updated: 20000 documents. Deleted 0 documents.&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Committed\\\"&gt;2012-04-16 15:24:04&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;20000&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Time taken\\\"&gt;0:13:42.110&lt;\\/str&gt;\u003cbr\\/\u003e\\n&lt;\\/lst&gt;\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13254875_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13254875_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 18:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T18:25:53+0000\'\u003e16\\/Apr\\/12 18:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I ran in version 3.6.0 with 20 threads and got 20000 documents processed: \\n\\n &lt;lst name=\\\"statusMessages\\\"&gt; \\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;20000&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-16 15:10:22&lt;\\/str&gt; \\n   &lt;str name=\\\"\\\"&gt;Indexing completed. Added\\/Updated: 20000 documents. Deleted 0 documents.&lt;\\/str&gt; \\n   &lt;str name=\\\"Committed\\\"&gt;2012-04-16 15:24:04&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;20000&lt;\\/str&gt; \\n   &lt;str name=\\\"Time taken\\\"&gt;0:13:42.110&lt;\\/str&gt; \\n&lt;\\/lst&gt;              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13254919\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13254919&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13254919\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13254919_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13254919_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 18:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T18:58:01+0000\'\u003e16\\/Apr\\/12 18:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eClaudio,\u003c\\/p\u003e\\n\\n\u003cp\u003eThank you for providing feedback. I have several considerations for your issue:\u003c\\/p\u003e\\n\\n\u003col\u003e\\n\\t\u003cli\u003eto be honest I didn\'t pay much attention to these counter when fixing threads, I didn\'t assert it. So, it might be a bug with counters. But the main subject is your index is it correct? Does it has expected number of docs? Are all master entities were properly connected to the details ones? Pls let us know your observations.\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003col\u003e\\n\\t\u003cli\u003eeven DIH code would be correct, you add too many threads. The reason of adding threads is get high CPU utilization, if you exceeds your IO limits you waste CPU time for contentions. Could you start from 2?\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003col\u003e\\n\\t\u003cli\u003eI suppose significant time were spend for obtaining JDBC connections, btw how many of them are avalable in parallel? If you are not happy how DIH scales you can check what does it spent time for. Logs with debug level for DIH enabled are appreciated. You also can take sampling by jconsole, or even manually run jstack &lt;JVMPID&gt;\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003cp\u003eThanks    \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13254919_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13254919_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 18:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T18:58:01+0000\'\u003e16\\/Apr\\/12 18:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Claudio, \\n\\n Thank you for providing feedback. I have several considerations for your issue: \\n\\n \\n\\t to be honest I didn\'t pay much attention to these counter when fixing threads, I didn\'t assert it. So, it might be a bug with counters. But the main subject is your index is it correct? Does it has expected number of docs? Are all master entities were properly connected to the details ones? Pls let us know your observations. \\n \\n\\n\\n \\n\\t even DIH code would be correct, you add too many threads. The reason of adding threads is get high CPU utilization, if you exceeds your IO limits you waste CPU time for contentions. Could you start from 2? \\n \\n\\n\\n \\n\\t I suppose significant time were spend for obtaining JDBC connections, btw how many of them are avalable in parallel? If you are not happy how DIH scales you can check what does it spent time for. Logs with debug level for DIH enabled are appreciated. You also can take sampling by jconsole, or even manually run jstack &lt;JVMPID&gt; \\n \\n\\n\\n Thanks                  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13254940\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13254940&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13254940\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13254940_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13254940_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 19:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T19:18:00+0000\'\u003e16\\/Apr\\/12 19:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think we need to verify whether or not it is adding the same 1000 documents 10x, or if its just counting each document 10x.  The fact that the successful 10-thread 3.5 run took 1:12 but that same 10-thread run on 3.6 took 14:15 makes me wonder if each thread is actually duplicating the work and not just doing extra counting?\u003c\\/p\u003e\\n\\n\u003cp\u003eBut then again the successful ONE-thread 3.6 run took 1:12 also... hmm...\u003c\\/p\u003e\\n\\n\u003cp\u003eProbably we need a unit test that does a simple SQL import with 2 threads and counts how many times SolrWriter#upload got called, then compares it both with the # of docs sent and the # docs reported to the user.  Then we\'d know what is actually broken.  It\'d be interesting to see what that same test against 3.5 does (if it can be made to run to completion).  Possibly this is broken in 3.5 too (except the counters) but nobody noticed because they always got synchronization problems and gave up??\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13254940_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13254940_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 19:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T19:18:00+0000\'\u003e16\\/Apr\\/12 19:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think we need to verify whether or not it is adding the same 1000 documents 10x, or if its just counting each document 10x.  The fact that the successful 10-thread 3.5 run took 1:12 but that same 10-thread run on 3.6 took 14:15 makes me wonder if each thread is actually duplicating the work and not just doing extra counting? \\n\\n But then again the successful ONE-thread 3.6 run took 1:12 also... hmm... \\n\\n Probably we need a unit test that does a simple SQL import with 2 threads and counts how many times SolrWriter#upload got called, then compares it both with the # of docs sent and the # docs reported to the user.  Then we\'d know what is actually broken.  It\'d be interesting to see what that same test against 3.5 does (if it can be made to run to completion).  Possibly this is broken in 3.5 too (except the counters) but nobody noticed because they always got synchronization problems and gave up??              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13255044\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13255044&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13255044\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13255044_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13255044_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 20:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T20:57:47+0000\'\u003e16\\/Apr\\/12 20:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi James Dyer and Mikhail Khludnev,\u003c\\/p\u003e\\n\\n\u003cp\u003eI added in logging.properties of tomcat the line below:\u003c\\/p\u003e\\n\\n\u003cp\u003eorg.apache.solr.handler.dataimport.JdbcDataSource.level=FINE\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd ran again in 3.6.0 with 10 threads.\u003cbr\\/\u003e\\nThe select below was performed 10 times\u003c\\/p\u003e\\n\\n\u003cp\u003eselect url from video where indice_id_indice = \'257933\'\u003c\\/p\u003e\\n\\n\u003cp\u003eThis select of sub-entity should have been executed only one time.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13255044_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13255044_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Apr\\/12 20:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-16T20:57:47+0000\'\u003e16\\/Apr\\/12 20:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi James Dyer and Mikhail Khludnev, \\n\\n I added in logging.properties of tomcat the line below: \\n\\n org.apache.solr.handler.dataimport.JdbcDataSource.level=FINE \\n\\n And ran again in 3.6.0 with 10 threads. \\nThe select below was performed 10 times \\n\\n select url from video where indice_id_indice = \'257933\' \\n\\n This select of sub-entity should have been executed only one time. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13258851\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13258851&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13258851\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13258851_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13258851_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Apr\\/12 13:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-21T13:19:03+0000\'\u003e21\\/Apr\\/12 13:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJames, \u003cbr\\/\u003e\\nI checked what was committed in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3011\\\" title=\\\"DIH MultiThreaded bug\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3011\\\"\u003e\u003cdel\u003eSOLR-3011\u003c\\/del\u003e\u003c\\/a\u003e. The problem is that all N+1 cases ( &lt;entity name=\\\\\\\"y\\\\\\\" query=\\\\\\\"select * from y where y.A=${x.id}\\\\\\\"&gt;\\\\n\\\") were dropped off from my patch for TestThreaded.java from 16th Mar. After they were not covered anymore, I suppose that \\\"halting\\\" problem (child entities selected again and again) were introduced by fix \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3307\\\" title=\\\"DIH FileListEntityProcessor not multi-threading after applying patch SOLR-3011\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3307\\\"\u003e\u003cdel\u003eSOLR-3307\u003c\\/del\u003e\u003c\\/a\u003e (shame on me I was out of the loop). My plan is bring N+1 cases back in TestThreaded.java, and provide correct fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3307\\\" title=\\\"DIH FileListEntityProcessor not multi-threading after applying patch SOLR-3011\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3307\\\"\u003e\u003cdel\u003eSOLR-3307\u003c\\/del\u003e\u003c\\/a\u003e. It\'s just first feeling. The worst case is \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3307\\\" title=\\\"DIH FileListEntityProcessor not multi-threading after applying patch SOLR-3011\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3307\\\"\u003e\u003cdel\u003eSOLR-3307\u003c\\/del\u003e\u003c\\/a\u003e can conflict with halting problem.   \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13258851_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13258851_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Apr\\/12 13:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-21T13:19:03+0000\'\u003e21\\/Apr\\/12 13:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    James,  \\nI checked what was committed in   SOLR-3011  . The problem is that all N+1 cases ( &lt;entity name=\\\\\\\"y\\\\\\\" query=\\\\\\\"select * from y where y.A=${x.id}\\\\\\\"&gt;\\\\n\\\") were dropped off from my patch for TestThreaded.java from 16th Mar. After they were not covered anymore, I suppose that \\\"halting\\\" problem (child entities selected again and again) were introduced by fix   SOLR-3307   (shame on me I was out of the loop). My plan is bring N+1 cases back in TestThreaded.java, and provide correct fix for   SOLR-3307  . It\'s just first feeling. The worst case is   SOLR-3307   can conflict with halting problem.                 \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13258940\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13258940&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13258940\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13258940_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13258940_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Apr\\/12 20:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-21T20:21:38+0000\'\u003e21\\/Apr\\/12 20:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOk.\u003c\\/p\u003e\\n\\n\u003cp\u003eI picked up old test \u003ca href=\\\"https:\\/\\/raw.github.com\\/m-khl\\/solr-patches\\/solr3011\\/solr\\/contrib\\/dataimporthandler\\/src\\/test\\/org\\/apache\\/solr\\/handler\\/dataimport\\/TestThreaded.java\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/raw.github.com\\/m-khl\\/solr-patches\\/solr3011\\/solr\\/contrib\\/dataimporthandler\\/src\\/test\\/org\\/apache\\/solr\\/handler\\/dataimport\\/TestThreaded.java\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003efor testNPlusOneTenThreads_FullImport I have \u003cbr\\/\u003e\\n21-04-2012 14:55:39 org.apache.solr.update.processor.LogUpdateProcessor finish\u003cbr\\/\u003e\\nINFO: \u003c\\/p\u003e\\n{deleteByQuery=*:*,add=[3, 2, 4, 2, 1, 1, 2, 2, ... (40 adds)],commit=}\\n\u003cp\u003e 0 2086\u003cbr\\/\u003e\\nwhich is what issue is about. \u003c\\/p\u003e\\n\\n\u003cp\u003esingle thread is fine\u003cbr\\/\u003e\\ntestNPlusOneSingleThread_FullImport()\u003cbr\\/\u003e\\n21.04.2012 13:08:21 org.apache.solr.update.processor.LogUpdateProcessor finish\u003cbr\\/\u003e\\nINFO: \u003c\\/p\u003e\\n{deleteByQuery=*:*,add=[2, 3, 4, 1],commit=}\\n\u003cp\u003e 0 1289\u003c\\/p\u003e\\n\\n\u003cp\u003eso, this test can reproduce the problem but not actually test it, I need to make it more restrictive. \u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13258940_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13258940_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Apr\\/12 20:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-21T20:21:38+0000\'\u003e21\\/Apr\\/12 20:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ok. \\n\\n I picked up old test  https:\\/\\/raw.github.com\\/m-khl\\/solr-patches\\/solr3011\\/solr\\/contrib\\/dataimporthandler\\/src\\/test\\/org\\/apache\\/solr\\/handler\\/dataimport\\/TestThreaded.java  \\n\\n for testNPlusOneTenThreads_FullImport I have  \\n21-04-2012 14:55:39 org.apache.solr.update.processor.LogUpdateProcessor finish \\nINFO:  \\n{deleteByQuery=*:*,add=[3, 2, 4, 2, 1, 1, 2, 2, ... (40 adds)],commit=}\\n  0 2086 \\nwhich is what issue is about.  \\n\\n single thread is fine \\ntestNPlusOneSingleThread_FullImport() \\n21.04.2012 13:08:21 org.apache.solr.update.processor.LogUpdateProcessor finish \\nINFO:  \\n{deleteByQuery=*:*,add=[2, 3, 4, 1],commit=}\\n  0 1289 \\n\\n so, this test can reproduce the problem but not actually test it, I need to make it more restrictive.  \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13258941\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13258941&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13258941\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13258941_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13258941_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Apr\\/12 20:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-21T20:30:08+0000\'\u003e21\\/Apr\\/12 20:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3360\\\" title=\\\"Problem with DataImportHandler multi-threaded\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3360\\\"\u003e\u003cdel\u003eSOLR-3360\u003c\\/del\u003e\u003c\\/a\u003e-test.patch I returned testNPlusOne* methods, and add restriction to retrieve the data only once from the MockDatasource. Then I rolled back changes for EntityProcessorBase in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3307\\\" title=\\\"DIH FileListEntityProcessor not multi-threading after applying patch SOLR-3011\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3307\\\"\u003e\u003cdel\u003eSOLR-3307\u003c\\/del\u003e\u003c\\/a\u003e.\u003cbr\\/\u003e\\nNow I have testNPlusOne* green (it means that the subj issue is resolved) but all testCached* fail due to \\\"only once\\\" datasource restriction (that\'s sad). \u003cbr\\/\u003e\\nStay tuned. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13258941_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13258941_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Apr\\/12 20:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-21T20:30:08+0000\'\u003e21\\/Apr\\/12 20:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                      SOLR-3360  -test.patch I returned testNPlusOne* methods, and add restriction to retrieve the data only once from the MockDatasource. Then I rolled back changes for EntityProcessorBase in   SOLR-3307  . \\nNow I have testNPlusOne* green (it means that the subj issue is resolved) but all testCached* fail due to \\\"only once\\\" datasource restriction (that\'s sad).  \\nStay tuned.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13259235\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13259235&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13259235\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13259235_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259235_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Apr\\/12 20:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-22T20:01:09+0000\'\u003e22\\/Apr\\/12 20:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOk. Fix is attached. But \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3307\\\" title=\\\"DIH FileListEntityProcessor not multi-threading after applying patch SOLR-3011\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3307\\\"\u003e\u003cdel\u003eSOLR-3307\u003c\\/del\u003e\u003c\\/a\u003e is broken by this patch. Work in progress\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13259235_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259235_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Apr\\/12 20:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-22T20:01:09+0000\'\u003e22\\/Apr\\/12 20:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ok. Fix is attached. But   SOLR-3307   is broken by this patch. Work in progress              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13259267\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13259267&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13259267\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13259267_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259267_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Apr\\/12 21:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-22T21:20:37+0000\'\u003e22\\/Apr\\/12 21:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003emy final solution is attached \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3360\\\" title=\\\"Problem with DataImportHandler multi-threaded\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3360\\\"\u003e\u003cdel\u003eSOLR-3360\u003c\\/del\u003e\u003c\\/a\u003e.patch. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3307\\\" title=\\\"DIH FileListEntityProcessor not multi-threading after applying patch SOLR-3011\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3307\\\"\u003e\u003cdel\u003eSOLR-3307\u003c\\/del\u003e\u003c\\/a\u003e is mostly rolled back, and fixed by slightly different way see change in XPathEntityProcessor.java \u003cbr\\/\u003e\\nAll tests are green\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13259267_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259267_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Apr\\/12 21:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-22T21:20:37+0000\'\u003e22\\/Apr\\/12 21:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    my final solution is attached   SOLR-3360  .patch.   SOLR-3307   is mostly rolled back, and fixed by slightly different way see change in XPathEntityProcessor.java  \\nAll tests are green              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13259333\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13259333&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13259333\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13259333_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259333_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 01:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T01:27:36+0000\'\u003e23\\/Apr\\/12 01:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mikhail and James,\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen I ran the test with only the root entity (without sub-entities) the problem also occurs. This problem does not appear to be related only to the sub-entities (N+1 case).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13259333_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259333_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 01:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T01:27:36+0000\'\u003e23\\/Apr\\/12 01:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mikhail and James, \\n\\n When I ran the test with only the root entity (without sub-entities) the problem also occurs. This problem does not appear to be related only to the sub-entities (N+1 case).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13259388\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13259388&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13259388\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13259388_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259388_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 05:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T05:26:36+0000\'\u003e23\\/Apr\\/12 05:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eClaudio,\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s not clear what you did. Have you applied \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3360\\\" title=\\\"Problem with DataImportHandler multi-threaded\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3360\\\"\u003e\u003cdel\u003eSOLR-3360\u003c\\/del\u003e\u003c\\/a\u003e.patch attached? \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13259388_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259388_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 05:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T05:26:36+0000\'\u003e23\\/Apr\\/12 05:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Claudio, \\n\\n It\'s not clear what you did. Have you applied   SOLR-3360  .patch attached?               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13259618\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13259618&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13259618\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13259618_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259618_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 14:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T14:13:05+0000\'\u003e23\\/Apr\\/12 14:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mikhail,\u003c\\/p\u003e\\n\\n\u003cp\u003eI didn\\u00B4t apply the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3360\\\" title=\\\"Problem with DataImportHandler multi-threaded\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3360\\\"\u003e\u003cdel\u003eSOLR-3360\u003c\\/del\u003e\u003c\\/a\u003e.path. The my test was over version 3.6.0 final\u003cbr\\/\u003e\\nWhich svn revision should I apply the patch?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13259618_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259618_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 14:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T14:13:05+0000\'\u003e23\\/Apr\\/12 14:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mikhail, \\n\\n I didn\\u00B4t apply the   SOLR-3360  .path. The my test was over version 3.6.0 final \\nWhich svn revision should I apply the patch?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13259843\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13259843&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13259843\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13259843_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259843_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 19:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T19:07:50+0000\'\u003e23\\/Apr\\/12 19:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eClaudio,\u003cbr\\/\u003e\\npatched sources are \u003ca href=\\\"https:\\/\\/github.com\\/m-khl\\/solr-patches\\/tree\\/solr3360\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/m-khl\\/solr-patches\\/tree\\/solr3360\u003c\\/a\u003e\u003cbr\\/\u003e\\npatched jar is \u003ca href=\\\"https:\\/\\/github.com\\/downloads\\/m-khl\\/solr-patches\\/apache-solr-dataimporthandler-3.6.1-SNAPSHOT.jar\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/downloads\\/m-khl\\/solr-patches\\/apache-solr-dataimporthandler-3.6.1-SNAPSHOT.jar\u003c\\/a\u003e\u003cbr\\/\u003e\\nI work with \u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc\\/lucene\\/dev\\/branches\\/lucene_solr_3_6\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc\\/lucene\\/dev\\/branches\\/lucene_solr_3_6\\/\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13259843_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259843_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 19:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T19:07:50+0000\'\u003e23\\/Apr\\/12 19:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Claudio, \\npatched sources are  https:\\/\\/github.com\\/m-khl\\/solr-patches\\/tree\\/solr3360  \\npatched jar is  https:\\/\\/github.com\\/downloads\\/m-khl\\/solr-patches\\/apache-solr-dataimporthandler-3.6.1-SNAPSHOT.jar  \\nI work with  http:\\/\\/svn.apache.org\\/viewvc\\/lucene\\/dev\\/branches\\/lucene_solr_3_6\\/               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13259868\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13259868&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13259868\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13259868_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259868_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 19:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T19:34:37+0000\'\u003e23\\/Apr\\/12 19:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Claudio R - 23\\/Apr\\/12 19:42\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mikhail,\u003c\\/p\u003e\\n\\n\u003cp\u003eI did checkout from: \u003ca href=\\\"http:\\/\\/svn.apache.org\\/repos\\/asf\\/lucene\\/dev\\/tags\\/lucene_solr_3_6_0\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/repos\\/asf\\/lucene\\/dev\\/tags\\/lucene_solr_3_6_0\u003c\\/a\u003e, applied the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3360\\\" title=\\\"Problem with DataImportHandler multi-threaded\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3360\\\"\u003e\u003cdel\u003eSOLR-3360\u003c\\/del\u003e\u003c\\/a\u003e.patch and compiled the dataimporthandler. The code worked correctly. In the log there is no repetition of queries as before.\u003c\\/p\u003e\\n\\n\u003cp\u003eI got:\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;lst name=\\\"statusMessages\\\"&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;1000&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-23 15:56:48&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"\\\"&gt;Indexing completed. Added\\/Updated: 1000 documents. Deleted 0 documents.&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Committed\\\"&gt;2012-04-23 15:57:29&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;1000&lt;\\/str&gt;\u003cbr\\/\u003e\\n   &lt;str name=\\\"Time taken\\\"&gt;0:0:41.390&lt;\\/str&gt;\u003cbr\\/\u003e\\n&lt;\\/lst&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eThe time spent decreased. \u003cbr\\/\u003e\\nBefore, with 1 thread I had obtained 0:1:22.390\u003cbr\\/\u003e\\nNow, with 10 threads I obtain 0:0:41.390\u003c\\/p\u003e\\n\\n\u003cp\u003eGreat job Mikhail.\u003cbr\\/\u003e\\nThank you very much.\u003cbr\\/\u003e\\nCould you tell me if this will be fix in version 3.6.1?\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"claudio_br\\\" id=\\\"commentauthor_13259868_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=claudio_br\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"claudio_br\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Claudio R\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259868_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 19:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T19:34:37+0000\'\u003e23\\/Apr\\/12 19:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Claudio R - 23\\/Apr\\/12 19:42\\\"\u003eedited\u003c\\/span\u003e                   Hi Mikhail, \\n\\n I did checkout from:  http:\\/\\/svn.apache.org\\/repos\\/asf\\/lucene\\/dev\\/tags\\/lucene_solr_3_6_0 , applied the   SOLR-3360  .patch and compiled the dataimporthandler. The code worked correctly. In the log there is no repetition of queries as before. \\n\\n I got: \\n\\n &lt;lst name=\\\"statusMessages\\\"&gt; \\n   &lt;str name=\\\"Total Requests made to DataSource\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Rows Fetched\\\"&gt;1000&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Skipped\\\"&gt;0&lt;\\/str&gt; \\n   &lt;str name=\\\"Full Dump Started\\\"&gt;2012-04-23 15:56:48&lt;\\/str&gt; \\n   &lt;str name=\\\"\\\"&gt;Indexing completed. Added\\/Updated: 1000 documents. Deleted 0 documents.&lt;\\/str&gt; \\n   &lt;str name=\\\"Committed\\\"&gt;2012-04-23 15:57:29&lt;\\/str&gt; \\n   &lt;str name=\\\"Total Documents Processed\\\"&gt;1000&lt;\\/str&gt; \\n   &lt;str name=\\\"Time taken\\\"&gt;0:0:41.390&lt;\\/str&gt; \\n&lt;\\/lst&gt; \\n\\n The time spent decreased.  \\nBefore, with 1 thread I had obtained 0:1:22.390 \\nNow, with 10 threads I obtain 0:0:41.390 \\n\\n Great job Mikhail. \\nThank you very much. \\nCould you tell me if this will be fix in version 3.6.1? \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13259954\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13259954&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13259954\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13259954_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259954_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 21:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T21:07:13+0000\'\u003e23\\/Apr\\/12 21:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted to 3.6 branch:  r1329444\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks Mikhail for staying on top of this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13259954_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13259954_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Apr\\/12 21:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-23T21:07:13+0000\'\u003e23\\/Apr\\/12 21:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed to 3.6 branch:  r1329444 \\n\\n Thanks Mikhail for staying on top of this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13260351\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13260351&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13260351\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13260351_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13260351_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/12 08:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-24T08:25:52+0000\'\u003e24\\/Apr\\/12 08:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJames,\u003c\\/p\u003e\\n\\n\u003cp\u003eI checked the commit \u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1329444\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1329444\u003c\\/a\u003e code changes looks ok. But I insist on comitting TestThreaded too. It asserts quite important N+1 cases and Once-Datasource semantic, pls have a look essential but not last test coverage improvements \u003ca href=\\\"https:\\/\\/github.com\\/m-khl\\/solr-patches\\/commit\\/0a98a827a2df6373ed7a227a240c822e2c150486#solr\\/contrib\\/dataimporthandler\\/src\\/test\\/org\\/apache\\/solr\\/handler\\/dataimport\\/TestThreaded.java\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/m-khl\\/solr-patches\\/commit\\/0a98a827a2df6373ed7a227a240c822e2c150486#solr\\/contrib\\/dataimporthandler\\/src\\/test\\/org\\/apache\\/solr\\/handler\\/dataimport\\/TestThreaded.java\u003c\\/a\u003e . Patch already has these changes for TestThreaded.java. Do you like me to raise separate issue for improving test coverage or you want me to polish them somehow? \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13260351_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13260351_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/12 08:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-24T08:25:52+0000\'\u003e24\\/Apr\\/12 08:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    James, \\n\\n I checked the commit  http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1329444  code changes looks ok. But I insist on comitting TestThreaded too. It asserts quite important N+1 cases and Once-Datasource semantic, pls have a look essential but not last test coverage improvements  https:\\/\\/github.com\\/m-khl\\/solr-patches\\/commit\\/0a98a827a2df6373ed7a227a240c822e2c150486#solr\\/contrib\\/dataimporthandler\\/src\\/test\\/org\\/apache\\/solr\\/handler\\/dataimport\\/TestThreaded.java  . Patch already has these changes for TestThreaded.java. Do you like me to raise separate issue for improving test coverage or you want me to polish them somehow?  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13268400\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13268400&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13268400\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13268400_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13268400_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/12 14:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-04T14:31:56+0000\'\u003e04\\/May\\/12 14:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMikhail,\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m looking over your \\\"n+1\\\" test and I don\'t see how it tests anything that isn\'t being covered in what I committed.  These three tests...\u003c\\/p\u003e\\n\\n\u003cp\u003etestCachedThreadless_FullImport()\u003cbr\\/\u003e\\ntestCachedSingleThread_FullImport()\u003cbr\\/\u003e\\ntestCachedThread_FullImport()\u003c\\/p\u003e\\n\\n\u003cp\u003e...they all randomly select (1) is the parent entity cached?, (2) is the child entity cached (or is it going to do an n+1 select)?, and (3) how many threads (2-10)? (for the third test).\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat is your version testing that this doesn\'t cover?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13268400_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13268400_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/12 14:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-04T14:31:56+0000\'\u003e04\\/May\\/12 14:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mikhail, \\n\\n I\'m looking over your \\\"n+1\\\" test and I don\'t see how it tests anything that isn\'t being covered in what I committed.  These three tests... \\n\\n testCachedThreadless_FullImport() \\ntestCachedSingleThread_FullImport() \\ntestCachedThread_FullImport() \\n\\n ...they all randomly select (1) is the parent entity cached?, (2) is the child entity cached (or is it going to do an n+1 select)?, and (3) how many threads (2-10)? (for the third test). \\n\\n What is your version testing that this doesn\'t cover?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13268557\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13268557&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13268557\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13268557_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13268557_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/12 17:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-04T17:33:48+0000\'\u003e04\\/May\\/12 17:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTestThreaded in a patch has the following significant additions:\u003c\\/p\u003e\\n\\n\u003cp\u003etestNPlusOneThreadless_FullImport()\u003cbr\\/\u003e\\ntestNPlusOneSingleThread_FullImport() \u003cbr\\/\u003e\\ntestNPlusOneTenThreads_FullImport()\u003c\\/p\u003e\\n\\n\u003cp\u003ethese guys use separate dataconfig called \u003cb\u003edataConfigNPulsOne\u003c\\/b\u003e which has \\\" where y.A=${x.id}\\\" as wells as the topic starter\'s config. Current tests covers only  where=\\\\\\\"xid=x.id\\\\\\\" in-mem join scenario.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso all data provided for MockDataSource are wrapped by  new Once(parentRow) that enforces the verification of the subject issue - halting or query repeating problem. \u003c\\/p\u003e\\n\\n\u003cp\u003eRegards\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13268557_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13268557_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/12 17:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-04T17:33:48+0000\'\u003e04\\/May\\/12 17:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    TestThreaded in a patch has the following significant additions: \\n\\n testNPlusOneThreadless_FullImport() \\ntestNPlusOneSingleThread_FullImport()  \\ntestNPlusOneTenThreads_FullImport() \\n\\n these guys use separate dataconfig called  dataConfigNPulsOne  which has \\\" where y.A=${x.id}\\\" as wells as the topic starter\'s config. Current tests covers only  where=\\\\\\\"xid=x.id\\\\\\\" in-mem join scenario. \\n\\n Also all data provided for MockDataSource are wrapped by  new Once(parentRow) that enforces the verification of the subject issue - halting or query repeating problem.  \\n\\n Regards              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13268593\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13268593&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13268593\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13268593_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13268593_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/12 18:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-04T18:10:44+0000\'\u003e04\\/May\\/12 18:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMikhail,\u003c\\/p\u003e\\n\\n\u003cp\u003eSee \\\"\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3360\\\" title=\\\"Problem with DataImportHandler multi-threaded\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3360\\\"\u003e\u003cdel\u003eSOLR-3360\u003c\\/del\u003e\u003c\\/a\u003e-test.patch\\\".  If you agree this covers everything your version does then I\'ll commit it shortly.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13268593_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13268593_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/12 18:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-04T18:10:44+0000\'\u003e04\\/May\\/12 18:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mikhail, \\n\\n See \\\"  SOLR-3360  -test.patch\\\".  If you agree this covers everything your version does then I\'ll commit it shortly.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13268704\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13268704&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13268704\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13268704_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13268704_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/12 21:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-04T21:01:49+0000\'\u003e04\\/May\\/12 21:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK. I check it and like your laconic approach. \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eI can suggest to rename Once class to something more easily gettable (I\'m sorry about that name).\u003c\\/li\u003e\\n\\t\u003cli\u003eAnd also I\'ve found that for N+1 case (where y.A=${x.id}\\\\\\\"&gt;\\\\n\\\") CachedSqlEntityProcessor makes no sense i.e. it should be\u003cbr\\/\u003e\\nprocessor=\\\\\\\"\\\"\u003cins\u003e((childCached &amp;&amp; !useWhereParam) ? \\\"Cached\\\":\\\"\\\")\u003c\\/ins\u003e\\\"SqlEntityProcessor\\\\\\\"&gt;\\\\n\\\". It didn\'t work for me at least.\u003cbr\\/\u003e\\nAnd it can be worth to warn user somehow if he configured CachedSqlEntityProcessor for N+1. Separate jira or YAGNI?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13268704_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13268704_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/12 21:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-04T21:01:49+0000\'\u003e04\\/May\\/12 21:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK. I check it and like your laconic approach.  \\n \\n\\t I can suggest to rename Once class to something more easily gettable (I\'m sorry about that name). \\n\\t And also I\'ve found that for N+1 case (where y.A=${x.id}\\\\\\\"&gt;\\\\n\\\") CachedSqlEntityProcessor makes no sense i.e. it should be \\nprocessor=\\\\\\\"\\\" ((childCached &amp;&amp; !useWhereParam) ? \\\"Cached\\\":\\\"\\\") \\\"SqlEntityProcessor\\\\\\\"&gt;\\\\n\\\". It didn\'t work for me at least. \\nAnd it can be worth to warn user somehow if he configured CachedSqlEntityProcessor for N+1. Separate jira or YAGNI? \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13269675\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13269675&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13269675\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13269675_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13269675_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/12 14:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-07T14:58:23+0000\'\u003e07\\/May\\/12 14:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMikhail,\u003c\\/p\u003e\\n\\n\u003cp\u003eHere is a patch incorporating your last comments.  One problem though the test fails for me with -Dtests.seed=4fe0e50054781418:4b35f2f982289e2f:-668154ae4e16ecdb\u003c\\/p\u003e\\n\\n\u003cp\u003eThis creates a configuration for the 1-thread test:\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;dataConfig&gt;\u003cbr\\/\u003e\\n&lt;dataSource  type=\\\"MockDataSource\\\"\\/&gt;\u003cbr\\/\u003e\\n       &lt;document&gt;\u003cbr\\/\u003e\\n               &lt;entity name=\\\"x\\\" threads=\\\"1\\\"                 query=\\\"select * from x\\\"                  processor=\\\"SqlEntityProcessor\\\"&gt;\u003cbr\\/\u003e\\n                       &lt;field column=\\\"id\\\" \\/&gt;\u003cbr\\/\u003e\\n                       &lt;entity name=\\\"y\\\" query=\\\"select * from y\\\" where=\\\"xid=x.id\\\"                          processor=\\\"SqlEntityProcessor\\\"&gt;\u003cbr\\/\u003e\\n                               &lt;field column=\\\"desc\\\" \\/&gt;\u003cbr\\/\u003e\\n                       &lt;\\/entity&gt;\u003cbr\\/\u003e\\n               &lt;\\/entity&gt;\u003cbr\\/\u003e\\n       &lt;\\/document&gt;\u003cbr\\/\u003e\\n&lt;\\/dataConfig&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eAny ideas?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13269675_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13269675_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/12 14:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-07T14:58:23+0000\'\u003e07\\/May\\/12 14:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mikhail, \\n\\n Here is a patch incorporating your last comments.  One problem though the test fails for me with -Dtests.seed=4fe0e50054781418:4b35f2f982289e2f:-668154ae4e16ecdb \\n\\n This creates a configuration for the 1-thread test: \\n\\n &lt;dataConfig&gt; \\n&lt;dataSource  type=\\\"MockDataSource\\\"\\/&gt; \\n       &lt;document&gt; \\n               &lt;entity name=\\\"x\\\" threads=\\\"1\\\"                 query=\\\"select * from x\\\"                  processor=\\\"SqlEntityProcessor\\\"&gt; \\n                       &lt;field column=\\\"id\\\" \\/&gt; \\n                       &lt;entity name=\\\"y\\\" query=\\\"select * from y\\\" where=\\\"xid=x.id\\\"                          processor=\\\"SqlEntityProcessor\\\"&gt; \\n                               &lt;field column=\\\"desc\\\" \\/&gt; \\n                       &lt;\\/entity&gt; \\n               &lt;\\/entity&gt; \\n       &lt;\\/document&gt; \\n&lt;\\/dataConfig&gt; \\n\\n Any ideas?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13269758\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13269758&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13269758\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13269758_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13269758_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/12 16:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-07T16:41:00+0000\'\u003e07\\/May\\/12 16:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJames,\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m looking into but how \\/where=\\\"xid=x.id\\\"\\/ is possible with  processor=\\\"SqlEntityProcessor\\\" ? It seems to me that your version of ternary operator is not so restrictive as mine. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13269758_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13269758_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/12 16:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-07T16:41:00+0000\'\u003e07\\/May\\/12 16:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    James, \\n\\n I\'m looking into but how \\/where=\\\"xid=x.id\\\"\\/ is possible with  processor=\\\"SqlEntityProcessor\\\" ? It seems to me that your version of ternary operator is not so restrictive as mine.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13269775\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13269775&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13269775\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13269775_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13269775_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/12 16:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-07T16:59:54+0000\'\u003e07\\/May\\/12 16:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi,\u003c\\/p\u003e\\n\\n\u003cp\u003eApplied a tiny modification:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e      + (useWhereParam\\n      ? \u003cspan class=\\\"code-quote\\\"\u003e\\\"                       &lt;entity name=\\\\\\\"\u003c\\/span\u003ey\\\\\u003cspan class=\\\"code-quote\\\"\u003e\\\" query=\\\\\\\"\u003c\\/span\u003eselect * from y\\\\\u003cspan class=\\\"code-quote\\\"\u003e\\\" where=\\\\\\\"\u003c\\/span\u003exid=x.id\\\\\u003cspan class=\\\"code-quote\\\"\u003e\\\" \\\"\u003c\\/span\u003e \\n      : \u003cspan class=\\\"code-quote\\\"\u003e\\\"                       &lt;entity name=\\\\\\\"\u003c\\/span\u003ey\\\\\u003cspan class=\\\"code-quote\\\"\u003e\\\" query=\\\\\\\"\u003c\\/span\u003eselect * from y where y.A=${x.id}\\\\\u003cspan class=\\\"code-quote\\\"\u003e\\\" \\\"\u003c\\/span\u003e \\n      )+\u003cspan class=\\\"code-quote\\\"\u003e\\\"                         processor=\\\\\\\"\u003c\\/span\u003e\u003cspan class=\\\"code-quote\\\"\u003e\\\"+(childCached || useWhereParam ? \\\"\u003c\\/span\u003eCached\u003cspan class=\\\"code-quote\\\"\u003e\\\":\\\"\u003c\\/span\u003e\u003cspan class=\\\"code-quote\\\"\u003e\\\")+\\\"\u003c\\/span\u003eSqlEntityProcessor\\\\\u003cspan class=\\\"code-quote\\\"\u003e\\\"&gt;\\\\n\\\"\u003c\\/span\u003e\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eto prevent where=\\\\\\\"xid=x.id\\\\\\\" with plain SqlEntityProcessor\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13269775_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13269775_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/12 16:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-07T16:59:54+0000\'\u003e07\\/May\\/12 16:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, \\n\\n Applied a tiny modification: \\n  \\n       + (useWhereParam\\n      ?  \\\"                       &lt;entity name=\\\\\\\" y\\\\ \\\" query=\\\\\\\" select * from y\\\\ \\\" where=\\\\\\\" xid=x.id\\\\ \\\" \\\"  \\n      :  \\\"                       &lt;entity name=\\\\\\\" y\\\\ \\\" query=\\\\\\\" select * from y where y.A=${x.id}\\\\ \\\" \\\"  \\n      )+ \\\"                         processor=\\\\\\\"  \\\"+(childCached || useWhereParam ? \\\" Cached \\\":\\\"  \\\")+\\\" SqlEntityProcessor\\\\ \\\"&gt;\\\\n\\\" \\n \\n  \\n\\n to prevent where=\\\\\\\"xid=x.id\\\\\\\" with plain SqlEntityProcessor              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13269796\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13269796&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13269796\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13269796_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13269796_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/12 17:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-07T17:28:36+0000\'\u003e07\\/May\\/12 17:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSee the latest \\\"\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-3360\\\" title=\\\"Problem with DataImportHandler multi-threaded\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-3360\\\"\u003e\u003cdel\u003eSOLR-3360\u003c\\/del\u003e\u003c\\/a\u003e-test.patch\\\".  I changed the ternary operator as you suggested.\u003c\\/p\u003e\\n\\n\u003cp\u003eI still get a failure with this:  -Dtests.seed=-55eeb72d0a16dfec:4e1a59f5738a6b25:4bf3cbf2bd3b659a\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jdyer\\\" id=\\\"commentauthor_13269796_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jdyer\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jdyer\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e James Dyer\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13269796_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/12 17:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-07T17:28:36+0000\'\u003e07\\/May\\/12 17:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    See the latest \\\"  SOLR-3360  -test.patch\\\".  I changed the ternary operator as you suggested. \\n\\n I still get a failure with this:  -Dtests.seed=-55eeb72d0a16dfec:4e1a59f5738a6b25:4bf3cbf2bd3b659a              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13269925\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13269925&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13269925\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13269925_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13269925_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/12 19:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-07T19:28:29+0000\'\u003e07\\/May\\/12 19:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJames,\u003c\\/p\u003e\\n\\n\u003cp\u003eI can\'t reproduce the failure. \u003cbr\\/\u003e\\nmkhl$ ant test-contrib -Dtests.seed=-55eeb72d0a16dfec:4e1a59f5738a6b25:4bf3cbf2bd3b659a -Dtestcase=TestThreaded\u003c\\/p\u003e\\n\\n\u003cp\u003ejunit report \u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e&lt;property name=\u003cspan class=\\\"code-quote\\\"\u003e\\\"tests.seed\\\"\u003c\\/span\u003e value=\u003cspan class=\\\"code-quote\\\"\u003e\\\"-55eeb72d0a16dfec:4e1a59f5738a6b25:4bf3cbf2bd3b659a\\\"\u003c\\/span\u003e \\/&gt;\\n\\n  &lt;testcase classname=\u003cspan class=\\\"code-quote\\\"\u003e\\\"org.apache.solr.handler.dataimport.TestThreaded\\\"\u003c\\/span\u003e name=\u003cspan class=\\\"code-quote\\\"\u003e\\\"testCachedThread_FullImport\\\"\u003c\\/span\u003e time=\u003cspan class=\\\"code-quote\\\"\u003e\\\"0.965\\\"\u003c\\/span\u003e \\/&gt;\\n  &lt;testcase classname=\u003cspan class=\\\"code-quote\\\"\u003e\\\"org.apache.solr.handler.dataimport.TestThreaded\\\"\u003c\\/span\u003e name=\u003cspan class=\\\"code-quote\\\"\u003e\\\"testCachedThreadless_FullImport\\\"\u003c\\/span\u003e time=\u003cspan class=\\\"code-quote\\\"\u003e\\\"0.055\\\"\u003c\\/span\u003e \\/&gt;\\n  &lt;testcase classname=\u003cspan class=\\\"code-quote\\\"\u003e\\\"org.apache.solr.handler.dataimport.TestThreaded\\\"\u003c\\/span\u003e name=\u003cspan class=\\\"code-quote\\\"\u003e\\\"testCachedSingleThread_FullImport\\\"\u003c\\/span\u003e time=\u003cspan class=\\\"code-quote\\\"\u003e\\\"0.053\\\"\u003c\\/span\u003e \\/&gt;\\n\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\\n\u003cp\u003eFinally I added _Total test which enumerates all test params \u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/github.com\\/m-khl\\/solr-patches\\/commit\\/0532e653a3319247519f90bd8987c84171ac6a56.diff\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/m-khl\\/solr-patches\\/commit\\/0532e653a3319247519f90bd8987c84171ac6a56.diff\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eat core i5 MacBook Pro\u003c\\/p\u003e\\n\\n\u003cp\u003e:solr mkhl$ ant test-contrib -Dtestcase=TestThreaded\u003cbr\\/\u003e\\njunit-sequential:\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e Testsuite: org.apache.solr.handler.dataimport.TestThreaded\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 3.899 sec\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e \u003c\\/p\u003e\\n\\n\u003cp\u003ejunit-parallel:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e &lt;\\/properties&gt;\\n  &lt;testcase classname=\u003cspan class=\\\"code-quote\\\"\u003e\\\"org.apache.solr.handler.dataimport.TestThreaded\\\"\u003c\\/span\u003e name=\u003cspan class=\\\"code-quote\\\"\u003e\\\"testCachedThread_FullImport\\\"\u003c\\/span\u003e time=\u003cspan class=\\\"code-quote\\\"\u003e\\\"1.042\\\"\u003c\\/span\u003e \\/&gt;\\n  &lt;testcase classname=\u003cspan class=\\\"code-quote\\\"\u003e\\\"org.apache.solr.handler.dataimport.TestThreaded\\\"\u003c\\/span\u003e name=\u003cspan class=\\\"code-quote\\\"\u003e\\\"testCachedThreadless_FullImport\\\"\u003c\\/span\u003e time=\u003cspan class=\\\"code-quote\\\"\u003e\\\"0.047\\\"\u003c\\/span\u003e \\/&gt;\\n  &lt;testcase classname=\u003cspan class=\\\"code-quote\\\"\u003e\\\"org.apache.solr.handler.dataimport.TestThreaded\\\"\u003c\\/span\u003e name=\u003cspan class=\\\"code-quote\\\"\u003e\\\"testCachedSingleThread_FullImport\\\"\u003c\\/span\u003e time=\u003cspan class=\\\"code-quote\\\"\u003e\\\"0.052\\\"\u003c\\/span\u003e \\/&gt;\\n  &lt;testcase classname=\u003cspan class=\\\"code-quote\\\"\u003e\\\"org.apache.solr.handler.dataimport.TestThreaded\\\"\u003c\\/span\u003e name=\u003cspan class=\\\"code-quote\\\"\u003e\\\"testCachedThread_Total\\\"\u003c\\/span\u003e time=\u003cspan class=\\\"code-quote\\\"\u003e\\\"0.898\\\"\u003c\\/span\u003e \\/&gt;\\n  &lt;system-out&gt;&lt;![CDATA[]]&gt;&lt;\\/system-out&gt;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\\n\u003cp\u003ePlease give me a clue how to reproduce the failure. What do you use IDE or script? Have you clean before test? Pls show me exact command, junit report, log\\/output, etc\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_13269925_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13269925_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/12 19:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-07T19:28:29+0000\'\u003e07\\/May\\/12 19:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    James, \\n\\n I can\'t reproduce the failure.  \\nmkhl$ ant test-contrib -Dtests.seed=-55eeb72d0a16dfec:4e1a59f5738a6b25:4bf3cbf2bd3b659a -Dtestcase=TestThreaded \\n\\n junit report  \\n\\n  \\n &lt;property name= \\\"tests.seed\\\"  value= \\\"-55eeb72d0a16dfec:4e1a59f5738a6b25:4bf3cbf2bd3b659a\\\"  \\/&gt;\\n\\n  &lt;testcase classname= \\\"org.apache.solr.handler.dataimport.TestThreaded\\\"  name= \\\"testCachedThread_FullImport\\\"  time= \\\"0.965\\\"  \\/&gt;\\n  &lt;testcase classname= \\\"org.apache.solr.handler.dataimport.TestThreaded\\\"  name= \\\"testCachedThreadless_FullImport\\\"  time= \\\"0.055\\\"  \\/&gt;\\n  &lt;testcase classname= \\\"org.apache.solr.handler.dataimport.TestThreaded\\\"  name= \\\"testCachedSingleThread_FullImport\\\"  time= \\\"0.053\\\"  \\/&gt;\\n\\n \\n  \\n\\n\\n Finally I added _Total test which enumerates all test params  \\n https:\\/\\/github.com\\/m-khl\\/solr-patches\\/commit\\/0532e653a3319247519f90bd8987c84171ac6a56.diff  \\n\\n at core i5 MacBook Pro \\n\\n :solr mkhl$ ant test-contrib -Dtestcase=TestThreaded \\njunit-sequential: \\n     &#91;junit&#93;  Testsuite: org.apache.solr.handler.dataimport.TestThreaded \\n     &#91;junit&#93;  Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 3.899 sec \\n     &#91;junit&#93;   \\n\\n junit-parallel: \\n\\n  \\n  &lt;\\/properties&gt;\\n  &lt;testcase classname= \\\"org.apache.solr.handler.dataimport.TestThreaded\\\"  name= \\\"testCachedThread_FullImport\\\"  time= \\\"1.042\\\"  \\/&gt;\\n  &lt;testcase classname= \\\"org.apache.solr.handler.dataimport.TestThreaded\\\"  name= \\\"testCachedThreadless_FullImport\\\"  time= \\\"0.047\\\"  \\/&gt;\\n  &lt;testcase classname= \\\"org.apache.solr.handler.dataimport.TestThreaded\\\"  name= \\\"testCachedSingleThread_FullImport\\\"  time= \\\"0.052\\\"  \\/&gt;\\n  &lt;testcase classname= \\\"org.apache.solr.handler.dataimport.TestThreaded\\\"  name= \\\"testCachedThread_Total\\\"  time= \\\"0.898\\\"  \\/&gt;\\n  &lt;system-out&gt;&lt;![CDATA[]]&gt;&lt;\\/system-out&gt;\\n \\n  \\n\\n\\n Please give me a clue how to reproduce the failure. What do you use IDE or script? Have you clean before test? Pls show me exact command, junit report, log\\/output, etc              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13420222\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-3360?focusedCommentId=13420222&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13420222\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13420222_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13420222_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jul\\/12 16:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-22T16:05:41+0000\'\u003e22\\/Jul\\/12 16:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBulk close for 3.6.1\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13420222_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13420222_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jul\\/12 16:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-22T16:05:41+0000\'\u003e22\\/Jul\\/12 16:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bulk close for 3.6.1              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310230";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310230&amp;avatarId=22151\\\" alt=\\\"Solr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\"\u003eSolr\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520268895154"> 
    <input type="hidden" title="jira.request.server.time" value="244"> 
    <input type="hidden" title="jira.request.id" value="1014x95423870x7"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="10"> 
    <input type="hidden" title="db.reads.time.in.ms" value="43"> 
    <input type="hidden" title="db.conns.time.in.ms" value="48"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 1014x95423870x7
	          REQUEST TIMESTAMP : [05/Mar/2018:16:54:55 +0000]
	               REQUEST TIME : 0.2440
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 10

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=23, elapsedTotal=43547978, elapsedMin=517738, elapsedMax=21466340, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=27, elapsedTotal=48835041, elapsedMin=539888, elapsedMax=21486489, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>