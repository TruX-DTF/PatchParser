<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|18b77d0a8be1e1f4a4804de6482b2db2820a802d|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"81d54689c9a42b\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-4443"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-4443] Wrap rollback in exception handlers in try-catch - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-4443] Wrap rollback in exception handlers in try-catch - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4443">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-4443" href="/jira/browse/DERBY-4443" id="key-val" rel="12440778">DERBY-4443</a></li>
                </ol>
                <h1 id="summary-val">Wrap rollback in exception handlers in try-catch</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4443"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-4443/DERBY-4443.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-4443/DERBY-4443.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-4443/DERBY-4443.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-4443/DERBY-4443.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.5.3.0 Next release after 10.5.2.0 release candidate #1">10.5.3.0</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.5.3.2" title="10.5.3.2 Head of 10.5 branch - version bump for DERBY-4835">10.5.3.2</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.6.2.4" title="10.6.2.4 Head of 10.6 branch as of 2014-01-13">10.6.2.4</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.7.1.4" title="10.7.1.4 Head of 10.7 branch as of 2010-11-29">10.7.1.4</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.8.2.2" title="10.8.2.2 second release on the 10.8 branch">10.8.2.2</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.9.1.0" title="10.9.1.0 First release on the 10.9 branch">10.9.1.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+%22Demos%2FScripts%22" title="Demos/Scripts ">Demos/Scripts</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Documentation" title="Documentation ">Documentation</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+%22Eclipse+Plug-in%22" title="Eclipse Plug-in ">Eclipse Plug-in</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+JDBC" title="JDBC ">JDBC</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+%22Network+Client%22" title="Network Client ">Network Client</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+%22Network+Server%22" title="Network Server ">Network Server</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Replication" title="Replication ">Replication</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Services" title="Services ">Services</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Test" title="Test ">Test</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Tools" title="Tools ">Tools</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <ul class="labels" id="labels-12440778-value"> 
                     <li><a class="lozenge" href="/jira/issues/?jql=labels+%3D+derby_triage10_8" title="derby_triage10_8"><span>derby_triage10_8</span></a></li> 
                    </ul> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310050" class="item"> 
                     <div class="wrap"> 
                      <strong title="Urgency" class="name">Urgency:</strong> 
                      <div id="customfield_12310050-val" class="value type-select" data-fieldtype="select" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        Low 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>Newcomer</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Avoid this pattern everywhere:</p> 
                  <p> }catch(SQLException se)</p> { //issue a rollback on any errors conn.rollback(); throw se; } 
                  <p>because an error in rollback will shadow the original exception.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-4443?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-4443?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-4443?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-4443?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12472768" data-issue-id="12440778" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12472768/DERBY-4443.patch" draggable="true" data-downloadurl="text/plain:DERBY-4443.patch:https://issues.apache.org/jira/secure/attachment/12472768/DERBY-4443.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12472768/DERBY-4443.patch" title="Latest  06/Mar/11 05:35 - Houx Zhang" draggable="true" data-downloadurl="text/plain:DERBY-4443.patch:https://issues.apache.org/jira/secure/attachment/12472768/DERBY-4443.patch">DERBY-4443.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-03-06T05:35:29.866Z">06/Mar/11 05:35</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Houx Zhang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12474112" data-issue-id="12440778" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12474112/DERBY-4443-1.patch" draggable="true" data-downloadurl="text/plain:DERBY-4443-1.patch:https://issues.apache.org/jira/secure/attachment/12474112/DERBY-4443-1.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12474112/DERBY-4443-1.patch" title="Latest  20/Mar/11 08:36 - Houx Zhang" draggable="true" data-downloadurl="text/plain:DERBY-4443-1.patch:https://issues.apache.org/jira/secure/attachment/12474112/DERBY-4443-1.patch">DERBY-4443-1.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-03-20T08:36:19.038Z">20/Mar/11 08:36</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Houx Zhang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12474393" data-issue-id="12440778" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12474393/DERBY-4443-2.patch" draggable="true" data-downloadurl="text/plain:DERBY-4443-2.patch:https://issues.apache.org/jira/secure/attachment/12474393/DERBY-4443-2.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12474393/DERBY-4443-2.patch" title="Latest  23/Mar/11 14:01 - Houx Zhang" draggable="true" data-downloadurl="text/plain:DERBY-4443-2.patch:https://issues.apache.org/jira/secure/attachment/12474393/DERBY-4443-2.patch">DERBY-4443-2.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-03-23T14:01:18.088Z">23/Mar/11 14:01</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Houx Zhang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12474519" data-issue-id="12440778" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12474519/DERBY-4443-3.patch" draggable="true" data-downloadurl="text/plain:DERBY-4443-3.patch:https://issues.apache.org/jira/secure/attachment/12474519/DERBY-4443-3.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12474519/DERBY-4443-3.patch" title="Latest  24/Mar/11 15:54 - Houx Zhang" draggable="true" data-downloadurl="text/plain:DERBY-4443-3.patch:https://issues.apache.org/jira/secure/attachment/12474519/DERBY-4443-3.patch">DERBY-4443-3.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-03-24T15:54:17.383Z">24/Mar/11 15:54</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Houx Zhang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12474703" data-issue-id="12440778" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12474703/DERBY-4443-4.patch" draggable="true" data-downloadurl="text/plain:DERBY-4443-4.patch:https://issues.apache.org/jira/secure/attachment/12474703/DERBY-4443-4.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12474703/DERBY-4443-4.patch" title="Latest  26/Mar/11 14:44 - Houx Zhang" draggable="true" data-downloadurl="text/plain:DERBY-4443-4.patch:https://issues.apache.org/jira/secure/attachment/12474703/DERBY-4443-4.patch">DERBY-4443-4.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-03-26T14:44:02.367Z">26/Mar/11 14:44</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Houx Zhang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12474719" data-issue-id="12440778" data-attachment-type="image" data-attachment-thumbnail="false">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12474719/DERBY-4443-4.png" draggable="true" data-downloadurl="image/png:DERBY-4443-4.png:https://issues.apache.org/jira/secure/attachment/12474719/DERBY-4443-4.png" file-preview-id="12474719" file-preview-title="DERBY-4443-4.png" file-preview-type="image"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-image" title="PNG File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12474719/DERBY-4443-4.png" title="Latest  27/Mar/11 05:13 - Houx Zhang" draggable="true" data-downloadurl="image/png:DERBY-4443-4.png:https://issues.apache.org/jira/secure/attachment/12474719/DERBY-4443-4.png" file-preview-id="12474719" file-preview-title="DERBY-4443-4.png" file-preview-type="image">DERBY-4443-4.png</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-03-27T05:13:19.272Z">27/Mar/11 05:13</time>
                   </dd>
                   <dd class="attachment-size">
                    15 kB
                   </dd>
                   <dd class="attachment-author">
                    Houx Zhang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12474887" data-issue-id="12440778" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12474887/DERBY-4443-5.patch" draggable="true" data-downloadurl="text/plain:DERBY-4443-5.patch:https://issues.apache.org/jira/secure/attachment/12474887/DERBY-4443-5.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12474887/DERBY-4443-5.patch" title="Latest  29/Mar/11 15:12 - Houx Zhang" draggable="true" data-downloadurl="text/plain:DERBY-4443-5.patch:https://issues.apache.org/jira/secure/attachment/12474887/DERBY-4443-5.patch">DERBY-4443-5.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-03-29T15:12:03.952Z">29/Mar/11 15:12</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Houx Zhang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12476900" data-issue-id="12440778" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12476900/DERBY-4443-6-tmp.patch" draggable="true" data-downloadurl="text/plain:DERBY-4443-6-tmp.patch:https://issues.apache.org/jira/secure/attachment/12476900/DERBY-4443-6-tmp.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12476900/DERBY-4443-6-tmp.patch" title="Latest  20/Apr/11 15:24 - Houx Zhang" draggable="true" data-downloadurl="text/plain:DERBY-4443-6-tmp.patch:https://issues.apache.org/jira/secure/attachment/12476900/DERBY-4443-6-tmp.patch">DERBY-4443-6-tmp.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-04-20T15:24:17.743Z">20/Apr/11 15:24</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Houx Zhang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12477004" data-issue-id="12440778" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12477004/derby-4443-7.patch" draggable="true" data-downloadurl="text/x-patch:derby-4443-7.patch:https://issues.apache.org/jira/secure/attachment/12477004/derby-4443-7.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12477004/derby-4443-7.patch" title="Latest  21/Apr/11 13:51 - Houx Zhang" draggable="true" data-downloadurl="text/x-patch:derby-4443-7.patch:https://issues.apache.org/jira/secure/attachment/12477004/derby-4443-7.patch">derby-4443-7.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-04-21T13:51:34.136Z">21/Apr/11 13:51</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Houx Zhang
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is required by">
                   is required by
                  </dt> 
                  <dd id="internal-12546430_12310040"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype" width="16" height="16" title="Task - A task that needs to be done." alt="Task - A task that needs to be done."> <span title="DERBY-5654: 10.5 Backport issue (2012)"> <a href="/jira/browse/DERBY-5654" data-issue-key="DERBY-5654" class="issue-link link-title resolution">DERBY-5654</a> <span class="link-summary">10.5 Backport issue (2012)</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_houxzhang" rel="houxzhang" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Houx Zhang&quot;,&quot;emailAddress&quot;:&quot;houxzhang@gmail.com&quot;,&quot;username&quot;:&quot;houxzhang&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="houxzhang"></span></span> Houx Zhang </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_digulla" rel="digulla" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Aaron Digulla&quot;,&quot;emailAddress&quot;:&quot;digulla@hepe.com&quot;,&quot;username&quot;:&quot;digulla&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="digulla"></span></span> Aaron Digulla </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="16/Nov/09 10:23"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2009-11-16T10:23:23+0000">16/Nov/09 10:23</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="23/Mar/12 22:43"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2012-03-23T22:43:31+0000">23/Mar/12 22:43</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="23/Mar/12 22:43"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2012-03-23T22:43:31+0000">23/Mar/12 22:43</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4443?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-4443?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12778286\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=12778286&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12778286\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"digulla\\\" id=\\\"commentauthor_12778286_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=digulla\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"digulla\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Aaron Digulla\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12778286_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/09 10:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-11-16T10:25:14+0000\'\u003e16\\/Nov\\/09 10:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOne place where I\'ve seen this is SystemProcedures. Every method in there uses this anti-pattern.\u003c\\/p\u003e\\n\\n\u003cp\u003eInstead of calling rollback directly, a utility function should be defined which either ignores any exceptions in rollback or, preferred, prints\\/logs the exception.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"digulla\\\" id=\\\"commentauthor_12778286_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=digulla\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"digulla\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Aaron Digulla\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12778286_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/09 10:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-11-16T10:25:14+0000\'\u003e16\\/Nov\\/09 10:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    One place where I\'ve seen this is SystemProcedures. Every method in there uses this anti-pattern. \\n\\n Instead of calling rollback directly, a utility function should be defined which either ignores any exceptions in rollback or, preferred, prints\\/logs the exception.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12883733\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=12883733&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12883733\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12883733_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12883733_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jun\\/10 22:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-06-29T22:26:23+0000\'\u003e29\\/Jun\\/10 22:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eremoving store, as it does not have access to the connection or to SQLException.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12883733_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12883733_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jun\\/10 22:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-06-29T22:26:23+0000\'\u003e29\\/Jun\\/10 22:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    removing store, as it does not have access to the connection or to SQLException.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12994473\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=12994473&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12994473\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12994473_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12994473_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Feb\\/11 20:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-14T20:28:17+0000\'\u003e14\\/Feb\\/11 20:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTriaged for 10.8.   A solution would be to chain the SQLExceptions so both would be returned to the user. Good newcomer issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12994473_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12994473_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Feb\\/11 20:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-14T20:28:17+0000\'\u003e14\\/Feb\\/11 20:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Triaged for 10.8.   A solution would be to chain the SQLExceptions so both would be returned to the user. Good newcomer issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13003098\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13003098&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13003098\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13003098_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13003098_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/11 05:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-06T05:35:29+0000\'\u003e06\\/Mar\\/11 05:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Houx Zhang - 06\\/Mar\\/11 05:37\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think it\'s a good point for a new comer. I have provided a patch. In my patch, a method named rollBackWhenSQLExceptionOccurs() is added. I\'m not sure there is any other place to use this method , if so, it\'s better to add this method in an independent util class.\u003c\\/p\u003e\\n\\n\u003cp\u003ePlease check it and give some advice, thanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13003098_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13003098_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/11 05:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-06T05:35:29+0000\'\u003e06\\/Mar\\/11 05:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Houx Zhang - 06\\/Mar\\/11 05:37\\\"\u003eedited\u003c\\/span\u003e                   I think it\'s a good point for a new comer. I have provided a patch. In my patch, a method named rollBackWhenSQLExceptionOccurs() is added. I\'m not sure there is any other place to use this method , if so, it\'s better to add this method in an independent util class. \\n\\n Please check it and give some advice, thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13003238\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13003238&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13003238\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13003238_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13003238_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Mar\\/11 02:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-07T02:22:50+0000\'\u003e07\\/Mar\\/11 02:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt would be nice if the patch could include a new test which demonstrates the modified behavior\u003cbr\\/\u003e\\nthat occurs with the patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13003238_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13003238_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Mar\\/11 02:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-07T02:22:50+0000\'\u003e07\\/Mar\\/11 02:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It would be nice if the patch could include a new test which demonstrates the modified behavior \\nthat occurs with the patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13003361\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13003361&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13003361\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13003361_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13003361_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Mar\\/11 14:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-07T14:16:09+0000\'\u003e07\\/Mar\\/11 14:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt\'s a good suggestion, Bryan.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn fact, I have tried to do some unit testing before submitting the patch. However, I\'ve found neither of the four methods which are affected in this patch is called through out the derby project. Furthermore there is not a test class named with \\\"SystemProceduresTest\\\". So, I\'m puzzled where to add the test cases.\u003c\\/p\u003e\\n\\n\u003cp\u003ePlease give a further advice to help me advance!\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks a lot!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13003361_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13003361_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Mar\\/11 14:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-07T14:16:09+0000\'\u003e07\\/Mar\\/11 14:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It\'s a good suggestion, Bryan. \\n\\n In fact, I have tried to do some unit testing before submitting the patch. However, I\'ve found neither of the four methods which are affected in this patch is called through out the derby project. Furthermore there is not a test class named with \\\"SystemProceduresTest\\\". So, I\'m puzzled where to add the test cases. \\n\\n Please give a further advice to help me advance! \\n\\n Thanks a lot!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13004365\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13004365&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13004365\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13004365_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13004365_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Mar\\/11 04:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-09T04:36:03+0000\'\u003e09\\/Mar\\/11 04:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think that the system procedures are called through a clever sort of reflection mechanism, which is why\u003cbr\\/\u003e\\nyou don\'t see a direct call mechanism in place. Here\'s a link to these procedures, showing how to\u003cbr\\/\u003e\\ninvoke them: \u003ca href=\\\"http:\\/\\/db.apache.org\\/derby\\/docs\\/10.7\\/ref\\/crefsqlbuiltinsystemprocedures.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/db.apache.org\\/derby\\/docs\\/10.7\\/ref\\/crefsqlbuiltinsystemprocedures.html\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eRegarding an existing test suite, I think that this test suite should run these procedures:\u003cbr\\/\u003e\\norg.apache.derbyTesting.functionTests.tests.tools.ImportExportProcedureTest\u003cbr\\/\u003e\\nThe code for that test is in \u003cbr\\/\u003e\\njava\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/tools\\/ImportExportProcedureTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13004365_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13004365_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Mar\\/11 04:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-09T04:36:03+0000\'\u003e09\\/Mar\\/11 04:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think that the system procedures are called through a clever sort of reflection mechanism, which is why \\nyou don\'t see a direct call mechanism in place. Here\'s a link to these procedures, showing how to \\ninvoke them:  http:\\/\\/db.apache.org\\/derby\\/docs\\/10.7\\/ref\\/crefsqlbuiltinsystemprocedures.html  \\n\\n Regarding an existing test suite, I think that this test suite should run these procedures: \\norg.apache.derbyTesting.functionTests.tests.tools.ImportExportProcedureTest \\nThe code for that test is in  \\njava\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/tools\\/ImportExportProcedureTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13007479\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13007479&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13007479\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13007479_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007479_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Mar\\/11 14:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-16T14:07:21+0000\'\u003e16\\/Mar\\/11 14:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks very much, Bryan! As I have been busy with my school affairs, I has just seen your advice, and it is valuable for me. I will go on, and provide a new patch some days later.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13007479_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007479_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Mar\\/11 14:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-16T14:07:21+0000\'\u003e16\\/Mar\\/11 14:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks very much, Bryan! As I have been busy with my school affairs, I has just seen your advice, and it is valuable for me. I will go on, and provide a new patch some days later.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13007483\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13007483&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13007483\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13007483_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007483_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Mar\\/11 14:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-16T14:23:37+0000\'\u003e16\\/Mar\\/11 14:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi, Bryan. I have still another question: How to invoke a failure of \\\"roll back\\\" in testing? I need to invoke failures of \\\"roll back\\\" to validate my checking. Thanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13007483_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007483_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Mar\\/11 14:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-16T14:23:37+0000\'\u003e16\\/Mar\\/11 14:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, Bryan. I have still another question: How to invoke a failure of \\\"roll back\\\" in testing? I need to invoke failures of \\\"roll back\\\" to validate my checking. Thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13007489\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13007489&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13007489\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13007489_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007489_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Mar\\/11 14:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-16T14:37:53+0000\'\u003e16\\/Mar\\/11 14:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think this may be rather tricky. Perhaps other developers have a good idea. One technique,\u003cbr\\/\u003e\\nwhich is artificial, is to deliberate modify the code for rolllback so that it fails. Of course,\u003cbr\\/\u003e\\nthat would not be a permanent change, just a temporary one so that you can exercise your\u003cbr\\/\u003e\\nother altered code paths.\u003c\\/p\u003e\\n\\n\u003cp\u003eI suspect that this modification may be rather a hard one to test, unfortunately, so you\u003cbr\\/\u003e\\nmay have to resort to some unusual techniques.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13007489_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007489_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Mar\\/11 14:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-16T14:37:53+0000\'\u003e16\\/Mar\\/11 14:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think this may be rather tricky. Perhaps other developers have a good idea. One technique, \\nwhich is artificial, is to deliberate modify the code for rolllback so that it fails. Of course, \\nthat would not be a permanent change, just a temporary one so that you can exercise your \\nother altered code paths. \\n\\n I suspect that this modification may be rather a hard one to test, unfortunately, so you \\nmay have to resort to some unusual techniques.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13007637\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13007637&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13007637\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"digulla\\\" id=\\\"commentauthor_13007637_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=digulla\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"digulla\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Aaron Digulla\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007637_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Mar\\/11 19:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-16T19:20:37+0000\'\u003e16\\/Mar\\/11 19:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe usual solution is to use a mock connection that throws Exceptions when rollback() is called.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf you look at the code, then you\'ll see that the connection is created with a call to getDefaultConn(). This will query the InternalDriver for a connection.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn your tests, extend InternalDriver and override connect() to return a connection object which throws exceptions for prepareStatement() and rollback():\u003c\\/p\u003e\\n\\n\u003cp\u003e@Override\u003cbr\\/\u003e\\npublic PreparedStatement prepareStatement(String sql) \u003c\\/p\u003e\\n{ throw SQLException( \\\"Error in prepareStatement\\\" ); }\\n\\n\u003cp\u003e@Override\u003cbr\\/\u003e\\npublic void rollback() \u003c\\/p\u003e\\n{ throw SQLException( \\\"Error in rollback\\\" ); }\\n\\n\u003cp\u003eMake sure that correct exception is visible outside.\u003c\\/p\u003e\\n\\n\u003cp\u003eNote that this messes with internal static variables. To fix that, you may need to create a new driver instance in the tearDown() of your tests.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"digulla\\\" id=\\\"commentauthor_13007637_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=digulla\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"digulla\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Aaron Digulla\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007637_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Mar\\/11 19:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-16T19:20:37+0000\'\u003e16\\/Mar\\/11 19:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The usual solution is to use a mock connection that throws Exceptions when rollback() is called. \\n\\n If you look at the code, then you\'ll see that the connection is created with a call to getDefaultConn(). This will query the InternalDriver for a connection. \\n\\n In your tests, extend InternalDriver and override connect() to return a connection object which throws exceptions for prepareStatement() and rollback(): \\n\\n @Override \\npublic PreparedStatement prepareStatement(String sql)  \\n{ throw SQLException( \\\"Error in prepareStatement\\\" ); }\\n\\n @Override \\npublic void rollback()  \\n{ throw SQLException( \\\"Error in rollback\\\" ); }\\n\\n Make sure that correct exception is visible outside. \\n\\n Note that this messes with internal static variables. To fix that, you may need to create a new driver instance in the tearDown() of your tests.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13007926\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13007926&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13007926\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13007926_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007926_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Mar\\/11 14:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-17T14:23:58+0000\'\u003e17\\/Mar\\/11 14:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for your advice, Aaron. \u003c\\/p\u003e\\n\\n\u003cp\u003eMock extending InternalDriver seems a good idea. Overriding prepareStatement(String sql) can throw a SQLException for invoking code for rollback, and overriding rollback() can test the new wrapping!\u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, I\'m still puzzled. It\'s related to a key problem---- How to inject the mock for SystemProcedures when testing? \u003c\\/p\u003e\\n\\n\u003cp\u003eWish for your reply!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13007926_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007926_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Mar\\/11 14:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-17T14:23:58+0000\'\u003e17\\/Mar\\/11 14:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for your advice, Aaron.  \\n\\n Mock extending InternalDriver seems a good idea. Overriding prepareStatement(String sql) can throw a SQLException for invoking code for rollback, and overriding rollback() can test the new wrapping! \\n\\n However, I\'m still puzzled. It\'s related to a key problem---- How to inject the mock for SystemProcedures when testing?  \\n\\n Wish for your reply!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13007930\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13007930&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13007930\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"digulla\\\" id=\\\"commentauthor_13007930_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=digulla\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"digulla\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Aaron Digulla\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007930_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Mar\\/11 14:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-17T14:34:53+0000\'\u003e17\\/Mar\\/11 14:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRun the code in a debugger. You will see that the static variable which contains the current InternalDriver is set in the constructor of InternalDriver. So you just need to extend the class, call new on your version and call the system procedure.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"digulla\\\" id=\\\"commentauthor_13007930_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=digulla\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"digulla\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Aaron Digulla\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13007930_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Mar\\/11 14:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-17T14:34:53+0000\'\u003e17\\/Mar\\/11 14:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Run the code in a debugger. You will see that the static variable which contains the current InternalDriver is set in the constructor of InternalDriver. So you just need to extend the class, call new on your version and call the system procedure.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13008780\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13008780&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13008780\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13008780_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13008780_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/11 14:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-19T14:44:09+0000\'\u003e19\\/Mar\\/11 14:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYes, Aaron, I have seen the static variable set in the constructor of InternalDriver in the prospective of debugging when Driver40 is installed. As I\'m not familiar with DERBY, could you tell me how to \\\"call new on your version\\\", please?  That is, how to install my mocking subclass of  InternalDriver in my testing.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks very much!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13008780_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13008780_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/11 14:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-19T14:44:09+0000\'\u003e19\\/Mar\\/11 14:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yes, Aaron, I have seen the static variable set in the constructor of InternalDriver in the prospective of debugging when Driver40 is installed. As I\'m not familiar with DERBY, could you tell me how to \\\"call new on your version\\\", please?  That is, how to install my mocking subclass of  InternalDriver in my testing. \\n\\n Thanks very much!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13008784\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13008784&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13008784\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"digulla\\\" id=\\\"commentauthor_13008784_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=digulla\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"digulla\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Aaron Digulla\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13008784_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/11 15:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-19T15:12:36+0000\'\u003e19\\/Mar\\/11 15:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think this is beyond the scope of the bug report. Please ask your questions on stackoverflow.com.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"digulla\\\" id=\\\"commentauthor_13008784_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=digulla\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"digulla\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Aaron Digulla\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13008784_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/11 15:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-19T15:12:36+0000\'\u003e19\\/Mar\\/11 15:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think this is beyond the scope of the bug report. Please ask your questions on stackoverflow.com.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13008786\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13008786&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13008786\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13008786_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13008786_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/11 15:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-19T15:53:14+0000\'\u003e19\\/Mar\\/11 15:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOften I find that the best way to move forward with a problem is to try writing the code that\u003cbr\\/\u003e\\nyou think you want to write (in this case, a class that would sub-class InternalDriver, perhaps\u003cbr\\/\u003e\\nnamed MockInternalDriver), try\u003cbr\\/\u003e\\nplacing a call to\u003cbr\\/\u003e\\n    InternalDriver myDriver = new MockInternalDriver();\u003cbr\\/\u003e\\nsomewhere in the setUp() method of ImportExportProcedureTest, try it out, and\u003cbr\\/\u003e\\nsee what happens.\u003c\\/p\u003e\\n\\n\u003cp\u003eYou can probably put the MockInternalDriver code directly into ImportExportProcedureTest,\u003cbr\\/\u003e\\nas a nested class, so you don\'t have to create any new source files to do this.\u003c\\/p\u003e\\n\\n\u003cp\u003ePut some System.out.println statements into your mock class, so you can see\u003cbr\\/\u003e\\nwhether it is getting run or not, and where it is being used.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt probably won\'t work. But, then you can attach an updated patch, containing the\u003cbr\\/\u003e\\nactual code that you tried, and describe what it did and what you wanted it to do instead.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn essence: try writing some code, see how far you get, atttach the code you tried, and\u003cbr\\/\u003e\\na description of where exactly you got stuck, and the community will offer some\u003cbr\\/\u003e\\nsuggestions about what to try next.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13008786_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13008786_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/11 15:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-19T15:53:14+0000\'\u003e19\\/Mar\\/11 15:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Often I find that the best way to move forward with a problem is to try writing the code that \\nyou think you want to write (in this case, a class that would sub-class InternalDriver, perhaps \\nnamed MockInternalDriver), try \\nplacing a call to \\n    InternalDriver myDriver = new MockInternalDriver(); \\nsomewhere in the setUp() method of ImportExportProcedureTest, try it out, and \\nsee what happens. \\n\\n You can probably put the MockInternalDriver code directly into ImportExportProcedureTest, \\nas a nested class, so you don\'t have to create any new source files to do this. \\n\\n Put some System.out.println statements into your mock class, so you can see \\nwhether it is getting run or not, and where it is being used. \\n\\n It probably won\'t work. But, then you can attach an updated patch, containing the \\nactual code that you tried, and describe what it did and what you wanted it to do instead. \\n\\n In essence: try writing some code, see how far you get, atttach the code you tried, and \\na description of where exactly you got stuck, and the community will offer some \\nsuggestions about what to try next.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13008891\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13008891&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13008891\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13008891_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13008891_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Mar\\/11 08:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-20T08:31:24+0000\'\u003e20\\/Mar\\/11 08:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOh, thanks, Bryan. Your advice is great! I will remember to give a patch before launch a discussion.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have written some testing code before, just like I do in the new patch. In the patch, I do \\\"new MockInternalDriver();\\\" in the setup() method of my junit test class, however, this sentence will throw a exception as InternalDriver() will check its contextServiceFactory is null.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think the key point is to decide where to install the mock of InternalDriver to give it a normal running circumstance, maybe it\'s related to some .\u003c\\/p\u003e\\n\\n\u003cp\u003eComments are welcome.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13008891_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13008891_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Mar\\/11 08:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-20T08:31:24+0000\'\u003e20\\/Mar\\/11 08:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Oh, thanks, Bryan. Your advice is great! I will remember to give a patch before launch a discussion. \\n\\n I have written some testing code before, just like I do in the new patch. In the patch, I do \\\"new MockInternalDriver();\\\" in the setup() method of my junit test class, however, this sentence will throw a exception as InternalDriver() will check its contextServiceFactory is null. \\n\\n I think the key point is to decide where to install the mock of InternalDriver to give it a normal running circumstance, maybe it\'s related to some . \\n\\n Comments are welcome. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13008910\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13008910&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13008910\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13008910_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13008910_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Mar\\/11 15:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-20T15:28:27+0000\'\u003e20\\/Mar\\/11 15:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI modified the setUp() method of your patch so that it looks like this:\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e    protected void setUp()\u003cbr\\/\u003e\\n        throws Exception\u003c\\/p\u003e\\n    {\\n        System.out.println(\\\"setUp is called!\\\");\\n        openDefaultConnection();\\n        MockInternalDriver dvr = new MockInternalDriver();\\n        dvr.stop();\\n        dvr.boot(false, null);\\n    }\\n\\n\\n\u003cp\u003eand now the test gets considerably further. It gets to the point where\u003cbr\\/\u003e\\nit tries to make a new connection, and then fails.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that your connect() method in your MockInternalDriver\u003cbr\\/\u003e\\nmust do more than just return an empty MockConnection().\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that you have to call super.connect(url, info), and then\u003cbr\\/\u003e\\ntake the real connection that the superclass creates and wrap\u003cbr\\/\u003e\\nthat connection in your MockConnection.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo your connect() method should probably look something like:\u003c\\/p\u003e\\n\\n\u003cp\u003e    return new MockConnection(super.connect(url, info));\u003c\\/p\u003e\\n\\n\u003cp\u003eand your MockConnection class will need to have a private\u003cbr\\/\u003e\\ninternal Connection object that it delegates to.\u003c\\/p\u003e\\n\\n\u003cp\u003eDoes that make sense? Hopefully this helps you get further\u003cbr\\/\u003e\\nin building your test case.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13008910_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13008910_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Mar\\/11 15:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-20T15:28:27+0000\'\u003e20\\/Mar\\/11 15:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I modified the setUp() method of your patch so that it looks like this: \\n\\n\\n     protected void setUp() \\n        throws Exception \\n    {\\n        System.out.println(\\\"setUp is called!\\\");\\n        openDefaultConnection();\\n        MockInternalDriver dvr = new MockInternalDriver();\\n        dvr.stop();\\n        dvr.boot(false, null);\\n    }\\n\\n\\n and now the test gets considerably further. It gets to the point where \\nit tries to make a new connection, and then fails. \\n\\n I think that your connect() method in your MockInternalDriver \\nmust do more than just return an empty MockConnection(). \\n\\n I think that you have to call super.connect(url, info), and then \\ntake the real connection that the superclass creates and wrap \\nthat connection in your MockConnection. \\n\\n So your connect() method should probably look something like: \\n\\n     return new MockConnection(super.connect(url, info)); \\n\\n and your MockConnection class will need to have a private \\ninternal Connection object that it delegates to. \\n\\n Does that make sense? Hopefully this helps you get further \\nin building your test case.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13010127\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13010127&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13010127\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13010127_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13010127_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Mar\\/11 14:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-23T14:01:18+0000\'\u003e23\\/Mar\\/11 14:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Bryan very much!\u003c\\/p\u003e\\n\\n\u003cp\u003eI have tried following your advice, now, in the new patch, the MockInternalDriver can be instanced and its connect(String url, Properties info) is called indeed, however, its super.connect(url, info) throws a NullException. It seems this way is not OK. I still faced the same question--how to mock a rollback as expected.\u003c\\/p\u003e\\n\\n\u003cp\u003eWish for your comments! \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13010127_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13010127_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Mar\\/11 14:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-23T14:01:18+0000\'\u003e23\\/Mar\\/11 14:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Bryan very much! \\n\\n I have tried following your advice, now, in the new patch, the MockInternalDriver can be instanced and its connect(String url, Properties info) is called indeed, however, its super.connect(url, info) throws a NullException. It seems this way is not OK. I still faced the same question--how to mock a rollback as expected. \\n\\n Wish for your comments!               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13010131\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13010131&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13010131\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13010131_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13010131_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Mar\\/11 14:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-23T14:13:57+0000\'\u003e23\\/Mar\\/11 14:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCan you paste in the NPE exception that you get, with its stack trace?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13010131_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13010131_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Mar\\/11 14:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-23T14:13:57+0000\'\u003e23\\/Mar\\/11 14:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Can you paste in the NPE exception that you get, with its stack trace?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13010155\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13010155&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13010155\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13010155_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13010155_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Mar\\/11 14:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-23T14:45:55+0000\'\u003e23\\/Mar\\/11 14:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCertainly, Bryan.\u003c\\/p\u003e\\n\\n\u003cp\u003esetUp is called!\u003cbr\\/\u003e\\n--------\u003cdel\u003etest\u003c\\/del\u003e--------\u003cbr\\/\u003e\\nMockInternalDriver.connect() is called!\u003cbr\\/\u003e\\njava.lang.NullPointerException\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.&lt;init&gt;(TransactionResourceImpl.java:161)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:234)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection30.&lt;init&gt;(EmbedConnection30.java:73)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.Driver30.getNewEmbedConnection(Driver30.java:80)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:248)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest$MockInternalDriver.connect(RollBackWrappingWhenFailOnImportTest.java:56)\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:144)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:582)\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:154)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:81)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:43)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.TestConfiguration.openDefaultConnection(TestConfiguration.java:1574)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.openDefaultConnection(BaseJDBCTestCase.java:428)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.getConnection(BaseJDBCTestCase.java:110)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.prepareCall(BaseJDBCTestCase.java:317)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest.testRollBackWhenFailOnImportTable(RollBackWrappingWhenFailOnImportTest.java:90)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\u003cbr\\/\u003e\\n\\tat java.lang.reflect.Method.invoke(Method.java:597)\u003cbr\\/\u003e\\n\\tat junit.framework.TestCase.runTest(TestCase.java:164)\u003cbr\\/\u003e\\n\\tat junit.framework.TestCase.runBare(TestCase.java:130)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112)\u003cbr\\/\u003e\\n\\tat junit.framework.TestResult$1.protect(TestResult.java:106)\u003cbr\\/\u003e\\n\\tat junit.framework.TestResult.runProtected(TestResult.java:124)\u003cbr\\/\u003e\\n\\tat junit.framework.TestResult.run(TestResult.java:109)\u003cbr\\/\u003e\\n\\tat junit.framework.TestCase.run(TestCase.java:120)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.run(TestSuite.java:225)\u003cbr\\/\u003e\\n\\tat org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)\u003cbr\\/\u003e\\n\\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\u003cbr\\/\u003e\\n\\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\u003cbr\\/\u003e\\n\\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\u003cbr\\/\u003e\\n\\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\u003cbr\\/\u003e\\n\\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13010155_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13010155_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Mar\\/11 14:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-23T14:45:55+0000\'\u003e23\\/Mar\\/11 14:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Certainly, Bryan. \\n\\n setUp is called! \\n-------- test -------- \\nMockInternalDriver.connect() is called! \\njava.lang.NullPointerException \\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.&lt;init&gt;(TransactionResourceImpl.java:161) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:234) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection30.&lt;init&gt;(EmbedConnection30.java:73) \\n\\tat org.apache.derby.jdbc.Driver30.getNewEmbedConnection(Driver30.java:80) \\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:248) \\n\\tat org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest$MockInternalDriver.connect(RollBackWrappingWhenFailOnImportTest.java:56) \\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:144) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:582) \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:154) \\n\\tat org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:81) \\n\\tat org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:43) \\n\\tat org.apache.derbyTesting.junit.TestConfiguration.openDefaultConnection(TestConfiguration.java:1574) \\n\\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.openDefaultConnection(BaseJDBCTestCase.java:428) \\n\\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.getConnection(BaseJDBCTestCase.java:110) \\n\\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.prepareCall(BaseJDBCTestCase.java:317) \\n\\tat org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest.testRollBackWhenFailOnImportTable(RollBackWrappingWhenFailOnImportTest.java:90) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) \\n\\tat java.lang.reflect.Method.invoke(Method.java:597) \\n\\tat junit.framework.TestCase.runTest(TestCase.java:164) \\n\\tat junit.framework.TestCase.runBare(TestCase.java:130) \\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112) \\n\\tat junit.framework.TestResult$1.protect(TestResult.java:106) \\n\\tat junit.framework.TestResult.runProtected(TestResult.java:124) \\n\\tat junit.framework.TestResult.run(TestResult.java:109) \\n\\tat junit.framework.TestCase.run(TestCase.java:120) \\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:230) \\n\\tat junit.framework.TestSuite.run(TestSuite.java:225) \\n\\tat org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130) \\n\\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) \\n\\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) \\n\\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) \\n\\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) \\n\\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13010546\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13010546&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13010546\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13010546_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13010546_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Mar\\/11 03:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-24T03:37:09+0000\'\u003e24\\/Mar\\/11 03:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think that the suggestion I made in an earlier comment, about including the lines\u003c\\/p\u003e\\n\\n\u003cp\u003e    dvr.stop();\u003cbr\\/\u003e\\n    dvr.boot(false, null);\u003c\\/p\u003e\\n\\n\u003cp\u003ewas not good advice. Those lines are what is causing your current NPE.\u003c\\/p\u003e\\n\\n\u003cp\u003eI removed the calls to dvr.stop() and dvr.boot() from the setUp() method of\u003cbr\\/\u003e\\nthe test, and I get much further.\u003c\\/p\u003e\\n\\n\u003cp\u003eCan you try making that change in your copy, and see if that gets you further?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13010546_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13010546_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Mar\\/11 03:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-24T03:37:09+0000\'\u003e24\\/Mar\\/11 03:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think that the suggestion I made in an earlier comment, about including the lines \\n\\n     dvr.stop(); \\n    dvr.boot(false, null); \\n\\n was not good advice. Those lines are what is causing your current NPE. \\n\\n I removed the calls to dvr.stop() and dvr.boot() from the setUp() method of \\nthe test, and I get much further. \\n\\n Can you try making that change in your copy, and see if that gets you further?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13010726\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13010726&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13010726\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13010726_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13010726_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Mar\\/11 15:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-24T15:54:17+0000\'\u003e24\\/Mar\\/11 15:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOh, good message, Bryan! Thanks to your patient advice, I think we have get closer to the aim.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have remove the lines \u003c\\/p\u003e\\n\\n\u003cp\u003e    dvr.stop();\u003cbr\\/\u003e\\n    dvr.boot(false, null); \u003cbr\\/\u003e\\n, yes the test can run further, but the MockInternalDriver.connect() is not called nay more.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf keep the \\\"dvr.boot(false, null); \\\", we get what we want just like in patch-3, the MockConnection is created and rollBack() failed as expected.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have sumbitted the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4443\\\" title=\\\"Wrap rollback in exception handlers in try-catch\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4443\\\"\u003e\u003cdel\u003eDERBY-4443\u003c\\/del\u003e\u003c\\/a\u003e-3.patch. Please check it. If it\'s OK, I will add more test cases, clean code and give a final version.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13010726_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13010726_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Mar\\/11 15:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-24T15:54:17+0000\'\u003e24\\/Mar\\/11 15:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Oh, good message, Bryan! Thanks to your patient advice, I think we have get closer to the aim. \\n\\n I have remove the lines  \\n\\n     dvr.stop(); \\n    dvr.boot(false, null);  \\n, yes the test can run further, but the MockInternalDriver.connect() is not called nay more. \\n\\n If keep the \\\"dvr.boot(false, null); \\\", we get what we want just like in patch-3, the MockConnection is created and rollBack() failed as expected. \\n\\n I have sumbitted the   DERBY-4443  -3.patch. Please check it. If it\'s OK, I will add more test cases, clean code and give a final version.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13011014\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13011014&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13011014\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13011014_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011014_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Mar\\/11 23:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-24T23:40:35+0000\'\u003e24\\/Mar\\/11 23:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eExcellent! I am pleased that this approach appears to work. I think that we will\u003cbr\\/\u003e\\nwant to include some comments in the header of the new test to describe the\u003cbr\\/\u003e\\nuse of the Mock testing objects, and to briefly outline the use of the \'dvr.boot\'\u003cbr\\/\u003e\\nmethod to install our new mock driver into the test.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think you should proceed with this work; it will be great to have the fix, and\u003cbr\\/\u003e\\neven better that we\'ll have a regression test.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13011014_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011014_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Mar\\/11 23:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-24T23:40:35+0000\'\u003e24\\/Mar\\/11 23:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Excellent! I am pleased that this approach appears to work. I think that we will \\nwant to include some comments in the header of the new test to describe the \\nuse of the Mock testing objects, and to briefly outline the use of the \'dvr.boot\' \\nmethod to install our new mock driver into the test. \\n\\n I think you should proceed with this work; it will be great to have the fix, and \\neven better that we\'ll have a regression test.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13011637\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13011637&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13011637\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13011637_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011637_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Mar\\/11 14:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-26T14:44:02+0000\'\u003e26\\/Mar\\/11 14:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi, Bryan. Thanks for your great encourage!\u003c\\/p\u003e\\n\\n\u003cp\u003eI have finished the other test cases on importing, cleaned the code, added anotation. Please check it. Thanks again!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13011637_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011637_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Mar\\/11 14:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-26T14:44:02+0000\'\u003e26\\/Mar\\/11 14:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, Bryan. Thanks for your great encourage! \\n\\n I have finished the other test cases on importing, cleaned the code, added anotation. Please check it. Thanks again!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13011647\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13011647&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13011647\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13011647_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011647_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Mar\\/11 15:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-26T15:42:34+0000\'\u003e26\\/Mar\\/11 15:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis latest patch is looking pretty good to me: the code changes look clear and\u003cbr\\/\u003e\\nstraightforward, the test looks clear and to-the-point. The test passes for me\u003cbr\\/\u003e\\nwith the patch applied; it also fails as I expect when the code change to\u003cbr\\/\u003e\\nSystemProjects.java is reverted, so the test seems to be testing the change\u003cbr\\/\u003e\\nsuccessfully.\u003c\\/p\u003e\\n\\n\u003cp\u003eAaron, you mentioned in the original issue description that we might need to\u003cbr\\/\u003e\\nmake this change in multiple places in Derby; are you aware of any places\u003cbr\\/\u003e\\nbesides SystemProcedures.java where we issue unprotected rollback()\u003cbr\\/\u003e\\ncalls like this?\u003c\\/p\u003e\\n\\n\u003cp\u003eI suppose I\'m trying to figure out whether this patch would resolve this issue\u003cbr\\/\u003e\\ncompletely, or whether it is a partial solution, and we will need to make\u003cbr\\/\u003e\\nsimilar changes in subsequent patches.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13011647_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011647_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Mar\\/11 15:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-26T15:42:34+0000\'\u003e26\\/Mar\\/11 15:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This latest patch is looking pretty good to me: the code changes look clear and \\nstraightforward, the test looks clear and to-the-point. The test passes for me \\nwith the patch applied; it also fails as I expect when the code change to \\nSystemProjects.java is reverted, so the test seems to be testing the change \\nsuccessfully. \\n\\n Aaron, you mentioned in the original issue description that we might need to \\nmake this change in multiple places in Derby; are you aware of any places \\nbesides SystemProcedures.java where we issue unprotected rollback() \\ncalls like this? \\n\\n I suppose I\'m trying to figure out whether this patch would resolve this issue \\ncompletely, or whether it is a partial solution, and we will need to make \\nsimilar changes in subsequent patches.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13011707\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13011707&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13011707\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13011707_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011707_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/11 00:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-27T00:22:57+0000\'\u003e27\\/Mar\\/11 00:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhen I run the new test as part of the complete JUnit suite, I see the following exception in my output:\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e..........java.sql.SQLException: Derby system shutdown.\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:98)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:158)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:222)\u003cbr\\/\u003e\\n        at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:243)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest$MockInternalDriver.connect(RollBackWrappingWhenFailOnImportTest.java:63)\u003cbr\\/\u003e\\n        at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:144)\u003cbr\\/\u003e\\n        at java.sql.DriverManager.getConnection(DriverManager.java:582)\u003cbr\\/\u003e\\n        at java.sql.DriverManager.getConnection(DriverManager.java:154)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.DriverManagerConnector.getConnectionByAttributes(DriverManagerConnector.java:143)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.DriverManagerConnector.shutEngine(DriverManagerConnector.java:120)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.TestConfiguration.shutdownEngine(TestConfiguration.java:1635)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.functionTests.tests.engine.ErrorStreamTest.setUp(ErrorStreamTest.java:101)\u003cbr\\/\u003e\\n        at junit.framework.TestCase.runBare(TestCase.java:125)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112)\u003cbr\\/\u003e\\n        at junit.framework.TestResult$1.protect(TestResult.java:106)\u003cbr\\/\u003e\\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\u003cbr\\/\u003e\\n        at junit.framework.TestResult.run(TestResult.java:109)\u003cbr\\/\u003e\\n        at junit.framework.TestCase.run(TestCase.java:118)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.run(TestSuite.java:203)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.run(TestSuite.java:203)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.run(TestSuite.java:203)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.run(TestSuite.java:203)\u003cbr\\/\u003e\\n        at junit.textui.TestRunner.doRun(TestRunner.java:116)\u003cbr\\/\u003e\\n        at junit.textui.TestRunner.start(TestRunner.java:172)\u003cbr\\/\u003e\\n        at junit.textui.TestRunner.main(TestRunner.java:138)\u003cbr\\/\u003e\\nCaused by: java.sql.SQLException: Derby system shutdown.\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:122)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71)\u003cbr\\/\u003e\\n        ... 29 more\u003cbr\\/\u003e\\nE...............................\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that possibly the test needs to be run with a configuration that says it should only be\u003cbr\\/\u003e\\nrun when we are using the embedded driver, not in the network server configuration?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13011707_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011707_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/11 00:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-27T00:22:57+0000\'\u003e27\\/Mar\\/11 00:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    When I run the new test as part of the complete JUnit suite, I see the following exception in my output: \\n\\n\\n ..........java.sql.SQLException: Derby system shutdown. \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:98) \\n        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142) \\n        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:158) \\n        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:222) \\n        at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:243) \\n        at org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest$MockInternalDriver.connect(RollBackWrappingWhenFailOnImportTest.java:63) \\n        at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:144) \\n        at java.sql.DriverManager.getConnection(DriverManager.java:582) \\n        at java.sql.DriverManager.getConnection(DriverManager.java:154) \\n        at org.apache.derbyTesting.junit.DriverManagerConnector.getConnectionByAttributes(DriverManagerConnector.java:143) \\n        at org.apache.derbyTesting.junit.DriverManagerConnector.shutEngine(DriverManagerConnector.java:120) \\n        at org.apache.derbyTesting.junit.TestConfiguration.shutdownEngine(TestConfiguration.java:1635) \\n        at org.apache.derbyTesting.functionTests.tests.engine.ErrorStreamTest.setUp(ErrorStreamTest.java:101) \\n        at junit.framework.TestCase.runBare(TestCase.java:125) \\n        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112) \\n        at junit.framework.TestResult$1.protect(TestResult.java:106) \\n        at junit.framework.TestResult.runProtected(TestResult.java:124) \\n        at junit.framework.TestResult.run(TestResult.java:109) \\n        at junit.framework.TestCase.run(TestCase.java:118) \\n        at junit.framework.TestSuite.runTest(TestSuite.java:208) \\n        at junit.framework.TestSuite.run(TestSuite.java:203) \\n        at junit.framework.TestSuite.runTest(TestSuite.java:208) \\n        at junit.framework.TestSuite.run(TestSuite.java:203) \\n        at junit.framework.TestSuite.runTest(TestSuite.java:208) \\n        at junit.framework.TestSuite.run(TestSuite.java:203) \\n        at junit.framework.TestSuite.runTest(TestSuite.java:208) \\n        at junit.framework.TestSuite.run(TestSuite.java:203) \\n        at junit.textui.TestRunner.doRun(TestRunner.java:116) \\n        at junit.textui.TestRunner.start(TestRunner.java:172) \\n        at junit.textui.TestRunner.main(TestRunner.java:138) \\nCaused by: java.sql.SQLException: Derby system shutdown. \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:122) \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71) \\n        ... 29 more \\nE............................... \\n\\n I think that possibly the test needs to be run with a configuration that says it should only be \\nrun when we are using the embedded driver, not in the network server configuration?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13011728\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13011728&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13011728\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13011728_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011728_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/11 05:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-27T05:13:19+0000\'\u003e27\\/Mar\\/11 05:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt seems strange. How do your mean by \\\"run the new test as part of the complete JUnit suite\\\", Bryan?\u003c\\/p\u003e\\n\\n\u003cp\u003eI have run the new TestCase both in Eclipse and DOS, they are all OK, just like shown in \\\"Derby-4443-4.png\\\". Even in tools._Suite, it can pass tool.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13011728_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011728_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/11 05:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-27T05:13:19+0000\'\u003e27\\/Mar\\/11 05:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It seems strange. How do your mean by \\\"run the new test as part of the complete JUnit suite\\\", Bryan? \\n\\n I have run the new TestCase both in Eclipse and DOS, they are all OK, just like shown in \\\"Derby-4443-4.png\\\". Even in tools._Suite, it can pass tool.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13011800\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13011800&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13011800\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13011800_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011800_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/11 14:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-27T14:15:23+0000\'\u003e27\\/Mar\\/11 14:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI did\u003cbr\\/\u003e\\n          java -Xmx512m -XX:MaxPermSize=128m junit.textui.TestRunner org.apache.derbyTesting.functionTests.suites.All &gt;junitAll.out 2&gt;&amp;1\u003c\\/p\u003e\\n\\n\u003cp\u003eand the exception was in the junitAll.out.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13011800_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13011800_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/11 14:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-27T14:15:23+0000\'\u003e27\\/Mar\\/11 14:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I did \\n          java -Xmx512m -XX:MaxPermSize=128m junit.textui.TestRunner org.apache.derbyTesting.functionTests.suites.All &gt;junitAll.out 2&gt;&amp;1 \\n\\n and the exception was in the junitAll.out.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13012073\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13012073&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13012073\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13012073_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012073_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/11 14:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-28T14:22:18+0000\'\u003e28\\/Mar\\/11 14:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI agree that the approach looks fine. Some minor comments:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eWhen calling printStackTrace() on the thrown exception, only the rollback exception is thrown. To see the real problem, you either need to call getNextException() or look in derby.log. Would it make sense to change the order here? That is, in rollBackAndThrowSQLException(), change\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e            e.setNextException(se);\u003cbr\\/\u003e\\n            throw e;\u003c\\/p\u003e\\n\\n\u003cp\u003eto\u003c\\/p\u003e\\n\\n\u003cp\u003e            se.setNextException(e);\u003cbr\\/\u003e\\n            throw se;\u003cbr\\/\u003e\\n?\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThere are three calls to printStackTrace() in the test code. It would probably be better to throw the exceptions so that JUnit can report them properly. If the exceptions are expected, it would be better to ignore them (with a comment saying why they should be ignored) or to have some asserts to verify that they are the exceptions we expect.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13012073_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012073_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/11 14:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-28T14:22:18+0000\'\u003e28\\/Mar\\/11 14:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I agree that the approach looks fine. Some minor comments: \\n\\n \\n\\t When calling printStackTrace() on the thrown exception, only the rollback exception is thrown. To see the real problem, you either need to call getNextException() or look in derby.log. Would it make sense to change the order here? That is, in rollBackAndThrowSQLException(), change \\n \\n\\n\\n             e.setNextException(se); \\n            throw e; \\n\\n to \\n\\n             se.setNextException(e); \\n            throw se; \\n? \\n\\n \\n\\t There are three calls to printStackTrace() in the test code. It would probably be better to throw the exceptions so that JUnit can report them properly. If the exceptions are expected, it would be better to ignore them (with a comment saying why they should be ignored) or to have some asserts to verify that they are the exceptions we expect. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13012169\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13012169&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13012169\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13012169_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012169_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/11 18:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-28T18:31:09+0000\'\u003e28\\/Mar\\/11 18:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOne thing I forgot to mention... The test uses EmbedConnection30, so it won\'t work on platforms that don\'t support at least JDBC 3.0 (for example Java ME with the JSR-169 driver). So the suite() method will have to check JDBC.vmSupportsJDBC3() and return an empty suite if JDBC 3.0 isn\'t supported by the JVM.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13012169_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012169_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/11 18:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-28T18:31:09+0000\'\u003e28\\/Mar\\/11 18:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    One thing I forgot to mention... The test uses EmbedConnection30, so it won\'t work on platforms that don\'t support at least JDBC 3.0 (for example Java ME with the JSR-169 driver). So the suite() method will have to check JDBC.vmSupportsJDBC3() and return an empty suite if JDBC 3.0 isn\'t supported by the JVM.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13012515\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13012515&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13012515\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13012515_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012515_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Mar\\/11 15:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-29T15:12:03+0000\'\u003e29\\/Mar\\/11 15:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for your advice, Knut and Bryan. It\'s valuable for me to make progress.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have recreated the error with Bryan\'s command. Here is why it\'s caused:\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the new test class \'RollBackWrappingWhenFailOnImportTest\', a mock driver has been loaded, but it has not been shut down any more. In setup() method of engine.ErrorStreamTest which is closed in the completed test, a shutdownEngine() is called, it\'s used to shut down the current engine. The shutdown operation invokes a call to MockInternalDriver.connect(), which throw a mock connection(not valid here), so a SQLException of \\\"Derby system shutdown\\\" is thrown.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s obvious that, \'RollBackWrappingWhenFailOnImportTest\' has made a marginal influence on other test cases, so in patch-5, I shut down the mock driver on tearDown(), -----the exception can be ignored safely. Now, everything works well.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn patch-5, Knut\'s advices on printStackTrace() and vmSupportsJDBC3() are adopted. Thanks!\u003c\\/p\u003e\\n\\n\u003cp\u003ePlease check the new patch-5!\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13012515_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012515_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Mar\\/11 15:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-29T15:12:03+0000\'\u003e29\\/Mar\\/11 15:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for your advice, Knut and Bryan. It\'s valuable for me to make progress. \\n\\n I have recreated the error with Bryan\'s command. Here is why it\'s caused: \\n\\n In the new test class \'RollBackWrappingWhenFailOnImportTest\', a mock driver has been loaded, but it has not been shut down any more. In setup() method of engine.ErrorStreamTest which is closed in the completed test, a shutdownEngine() is called, it\'s used to shut down the current engine. The shutdown operation invokes a call to MockInternalDriver.connect(), which throw a mock connection(not valid here), so a SQLException of \\\"Derby system shutdown\\\" is thrown. \\n\\n It\'s obvious that, \'RollBackWrappingWhenFailOnImportTest\' has made a marginal influence on other test cases, so in patch-5, I shut down the mock driver on tearDown(), -----the exception can be ignored safely. Now, everything works well. \\n\\n In patch-5, Knut\'s advices on printStackTrace() and vmSupportsJDBC3() are adopted. Thanks! \\n\\n Please check the new patch-5! \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13012835\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13012835&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13012835\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13012835_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012835_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/11 03:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-30T03:58:35+0000\'\u003e30\\/Mar\\/11 03:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe tests pass successfully in my environment now.\u003c\\/p\u003e\\n\\n\u003cp\u003eI intend to commit this patch in the next few days, thanks for all the hard work on it!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13012835_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012835_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/11 03:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-30T03:58:35+0000\'\u003e30\\/Mar\\/11 03:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The tests pass successfully in my environment now. \\n\\n I intend to commit this patch in the next few days, thanks for all the hard work on it!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13012859\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13012859&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13012859\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13012859_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012859_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/11 07:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-30T07:03:17+0000\'\u003e30\\/Mar\\/11 07:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for making these changes. I didn\'t see any response to my question about the order of the exception chain. If I print the exception thrown by rollBackAndThrowSQLException(), I see this:\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.sql.SQLException: The exception \'java.sql.SQLException: error in roll back\' was thrown while evaluating an expression.\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:98)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.Util.seeNextException(Util.java:278)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:403)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:348)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2290)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:82)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1334)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(EmbedPreparedStatement.java:1686)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedCallableStatement.executeStatement(EmbedCallableStatement.java:117)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(EmbedPreparedStatement.java:308)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest.realTestRollBackWhenImportOnNonexistentFile(RollBackWrappingWhenFailOnImportTest.java:152)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest.testRollBackWhenFailOnImportTable(RollBackWrappingWhenFailOnImportTest.java:119)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\u003cbr\\/\u003e\\n\\tat java.lang.reflect.Method.invoke(Method.java:597)\u003cbr\\/\u003e\\n\\tat junit.framework.TestCase.runTest(TestCase.java:168)\u003cbr\\/\u003e\\n\\tat junit.framework.TestCase.runBare(TestCase.java:134)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112)\u003cbr\\/\u003e\\n\\tat junit.framework.TestResult$1.protect(TestResult.java:110)\u003cbr\\/\u003e\\n\\tat junit.framework.TestResult.runProtected(TestResult.java:128)\u003cbr\\/\u003e\\n\\tat junit.framework.TestResult.run(TestResult.java:113)\u003cbr\\/\u003e\\n\\tat junit.framework.TestCase.run(TestCase.java:124)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:232)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.run(TestSuite.java:227)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat junit.framework.TestResult.runProtected(TestResult.java:128)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:27)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:232)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.run(TestSuite.java:227)\u003cbr\\/\u003e\\n\\tat junit.textui.TestRunner.doRun(TestRunner.java:116)\u003cbr\\/\u003e\\n\\tat junit.textui.TestRunner.start(TestRunner.java:180)\u003cbr\\/\u003e\\n\\tat junit.textui.TestRunner.main(TestRunner.java:138)\u003cbr\\/\u003e\\nCaused by: java.sql.SQLException: The exception \'java.sql.SQLException: error in roll back\' was thrown while evaluating an expression.\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:122)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71)\u003cbr\\/\u003e\\n\\t... 35 more\u003cbr\\/\u003e\\nCaused by: java.sql.SQLException: error in roll back\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest$MockInternalDriver$MockConnectionFailWhenRollBack.rollback(RollBackWrappingWhenFailOnImportTest.java:59)\u003cbr\\/\u003e\\n\\tat org.apache.derby.catalog.SystemProcedures.rollBackAndThrowSQLException(SystemProcedures.java:1479)\u003cbr\\/\u003e\\n\\tat org.apache.derby.catalog.SystemProcedures.SYSCS_IMPORT_TABLE(SystemProcedures.java:1466)\u003cbr\\/\u003e\\n\\tat org.apache.derby.exe.aceaa980c4x012fx0589x77eaxffffbc38504a0.g0(Unknown Source)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\u003cbr\\/\u003e\\n\\tat java.lang.reflect.Method.invoke(Method.java:597)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.reflect.ReflectMethod.invoke(ReflectMethod.java:46)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.CallStatementResultSet.open(CallStatementResultSet.java:75)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:436)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:317)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1242)\u003cbr\\/\u003e\\n\\t... 28 more\u003c\\/p\u003e\\n\\n\u003cp\u003eFor a naive user, this looks like a problem in rollback(), like it did before the fix, and there\'s no trace of the original \\\"table not found\\\" exception without doing some digging in the logs or traversing the getNextException() chain. Any thoughts on whether this is the exception we should report as the primary exception?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13012859_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012859_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/11 07:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-30T07:03:17+0000\'\u003e30\\/Mar\\/11 07:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for making these changes. I didn\'t see any response to my question about the order of the exception chain. If I print the exception thrown by rollBackAndThrowSQLException(), I see this: \\n\\n java.sql.SQLException: The exception \'java.sql.SQLException: error in roll back\' was thrown while evaluating an expression. \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:98) \\n\\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142) \\n\\tat org.apache.derby.impl.jdbc.Util.seeNextException(Util.java:278) \\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:403) \\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:348) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2290) \\n\\tat org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:82) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1334) \\n\\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(EmbedPreparedStatement.java:1686) \\n\\tat org.apache.derby.impl.jdbc.EmbedCallableStatement.executeStatement(EmbedCallableStatement.java:117) \\n\\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(EmbedPreparedStatement.java:308) \\n\\tat org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest.realTestRollBackWhenImportOnNonexistentFile(RollBackWrappingWhenFailOnImportTest.java:152) \\n\\tat org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest.testRollBackWhenFailOnImportTable(RollBackWrappingWhenFailOnImportTest.java:119) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) \\n\\tat java.lang.reflect.Method.invoke(Method.java:597) \\n\\tat junit.framework.TestCase.runTest(TestCase.java:168) \\n\\tat junit.framework.TestCase.runBare(TestCase.java:134) \\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112) \\n\\tat junit.framework.TestResult$1.protect(TestResult.java:110) \\n\\tat junit.framework.TestResult.runProtected(TestResult.java:128) \\n\\tat junit.framework.TestResult.run(TestResult.java:113) \\n\\tat junit.framework.TestCase.run(TestCase.java:124) \\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:232) \\n\\tat junit.framework.TestSuite.run(TestSuite.java:227) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:23) \\n\\tat junit.framework.TestResult.runProtected(TestResult.java:128) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:27) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:232) \\n\\tat junit.framework.TestSuite.run(TestSuite.java:227) \\n\\tat junit.textui.TestRunner.doRun(TestRunner.java:116) \\n\\tat junit.textui.TestRunner.start(TestRunner.java:180) \\n\\tat junit.textui.TestRunner.main(TestRunner.java:138) \\nCaused by: java.sql.SQLException: The exception \'java.sql.SQLException: error in roll back\' was thrown while evaluating an expression. \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:122) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71) \\n\\t... 35 more \\nCaused by: java.sql.SQLException: error in roll back \\n\\tat org.apache.derbyTesting.functionTests.tests.tools.RollBackWrappingWhenFailOnImportTest$MockInternalDriver$MockConnectionFailWhenRollBack.rollback(RollBackWrappingWhenFailOnImportTest.java:59) \\n\\tat org.apache.derby.catalog.SystemProcedures.rollBackAndThrowSQLException(SystemProcedures.java:1479) \\n\\tat org.apache.derby.catalog.SystemProcedures.SYSCS_IMPORT_TABLE(SystemProcedures.java:1466) \\n\\tat org.apache.derby.exe.aceaa980c4x012fx0589x77eaxffffbc38504a0.g0(Unknown Source) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) \\n\\tat java.lang.reflect.Method.invoke(Method.java:597) \\n\\tat org.apache.derby.impl.services.reflect.ReflectMethod.invoke(ReflectMethod.java:46) \\n\\tat org.apache.derby.impl.sql.execute.CallStatementResultSet.open(CallStatementResultSet.java:75) \\n\\tat org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:436) \\n\\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:317) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1242) \\n\\t... 28 more \\n\\n For a naive user, this looks like a problem in rollback(), like it did before the fix, and there\'s no trace of the original \\\"table not found\\\" exception without doing some digging in the logs or traversing the getNextException() chain. Any thoughts on whether this is the exception we should report as the primary exception?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13012955\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13012955&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13012955\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13012955_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012955_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/11 13:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-30T13:37:40+0000\'\u003e30\\/Mar\\/11 13:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Knut Anders, thanks for double-checking that.\u003c\\/p\u003e\\n\\n\u003cp\u003eI agree that we would prefer to have the original exception lead the stack\u003cbr\\/\u003e\\ntrace, with the rollback exception chained on afterwards.\u003c\\/p\u003e\\n\\n\u003cp\u003eI made your suggested change to rollbackAndThrowSQLException,\u003cbr\\/\u003e\\nand indeed the exception in the stack trace is more relevant to the\u003cbr\\/\u003e\\noriginal problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, this will require adjusting the test, since now the stack trace\u003cbr\\/\u003e\\nlooks different to the assertions in the test code.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll hold off on committing while we discuss this further.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13012955_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13012955_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/11 13:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-30T13:37:40+0000\'\u003e30\\/Mar\\/11 13:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Knut Anders, thanks for double-checking that. \\n\\n I agree that we would prefer to have the original exception lead the stack \\ntrace, with the rollback exception chained on afterwards. \\n\\n I made your suggested change to rollbackAndThrowSQLException, \\nand indeed the exception in the stack trace is more relevant to the \\noriginal problem. \\n\\n However, this will require adjusting the test, since now the stack trace \\nlooks different to the assertions in the test code. \\n\\n I\'ll hold off on committing while we discuss this further.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13014032\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13014032&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13014032\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13014032_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13014032_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/11 15:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-31T15:49:23+0000\'\u003e31\\/Mar\\/11 15:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for your checking, Knut.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis problem has perplexed me for some days. After checking again, I accept that \u003c\\/p\u003e\\n\\n\u003cp\u003e    private static void rollBackAndThrowSQLException(Connection conn,\u003cbr\\/\u003e\\n            SQLException se) throws SQLException {\u003cbr\\/\u003e\\n        try \u003c\\/p\u003e\\n{\\n            conn.rollback();\\n        }\\n\u003cp\u003e catch (SQLException e) \u003c\\/p\u003e\\n{\\n            se.setNextException(e);\\n        }\\n\\n\u003cp\u003e        throw se;\u003cbr\\/\u003e\\n    }\u003c\\/p\u003e\\n\\n\u003cp\u003eis better, we will get the full SQLException chain. However, it\'s very strange that when debugging in this situation, the chain will be broken down before thrown to EmbedPreparedStatement.executeUpdate() in Line 309 of EmbedPreparedStatement, and the rollback exception will be lost.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eIs this situation normal, or is there something special for SQLException launched by rollback(), please?\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13014032_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13014032_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/11 15:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-31T15:49:23+0000\'\u003e31\\/Mar\\/11 15:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for your checking, Knut. \\n\\n This problem has perplexed me for some days. After checking again, I accept that  \\n\\n     private static void rollBackAndThrowSQLException(Connection conn, \\n            SQLException se) throws SQLException { \\n        try  \\n{\\n            conn.rollback();\\n        }\\n  catch (SQLException e)  \\n{\\n            se.setNextException(e);\\n        }\\n\\n         throw se; \\n    } \\n\\n is better, we will get the full SQLException chain. However, it\'s very strange that when debugging in this situation, the chain will be broken down before thrown to EmbedPreparedStatement.executeUpdate() in Line 309 of EmbedPreparedStatement, and the rollback exception will be lost. \\n\\n\\n Is this situation normal, or is there something special for SQLException launched by rollback(), please? \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13014088\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13014088&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13014088\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13014088_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13014088_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/11 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-31T17:32:40+0000\'\u003e31\\/Mar\\/11 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDoes the rollback exception appear if you call getNextException() on the thrown SQLException? You may need to call getNextException() multiple times before you get to the rollback exception. Derby typically adds a next exception for all errors, so the chain may consist of more than two exceptions in this case.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13014088_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13014088_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/11 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-31T17:32:40+0000\'\u003e31\\/Mar\\/11 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Does the rollback exception appear if you call getNextException() on the thrown SQLException? You may need to call getNextException() multiple times before you get to the rollback exception. Derby typically adds a next exception for all errors, so the chain may consist of more than two exceptions in this case.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13014639\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13014639&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13014639\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13014639_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13014639_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Apr\\/11 14:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-01T14:59:12+0000\'\u003e01\\/Apr\\/11 14:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKnut, I have called getNextException() in several places, such as EmbedPreparedStatement.executeUpdate() in Line 309 of EmbedPreparedStatement, and each of they returned null. I also looked into the trace stack when debugging, and haven\'t seen rollback exception in it.\u003c\\/p\u003e\\n\\n\u003cp\u003eMaybe it relates to the simple mocking of InternalDriver and Connection? \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13014639_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13014639_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Apr\\/11 14:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-01T14:59:12+0000\'\u003e01\\/Apr\\/11 14:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Knut, I have called getNextException() in several places, such as EmbedPreparedStatement.executeUpdate() in Line 309 of EmbedPreparedStatement, and each of they returned null. I also looked into the trace stack when debugging, and haven\'t seen rollback exception in it. \\n\\n Maybe it relates to the simple mocking of InternalDriver and Connection?  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13015356\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13015356&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13015356\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13015356_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13015356_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/11 11:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-04T11:17:32+0000\'\u003e04\\/Apr\\/11 11:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt looks like the rollback exception is stripped off by this piece of code in StandardException.unexpectedUserException():\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\t\\/\\/ Look for simple wrappers for 3.0.1 - will be cleaned up in main\u003cbr\\/\u003e\\n\\t\\tif (ferry != null) {\u003cbr\\/\u003e\\n\\t\\t\\tif (ferry.isSimpleWrapper()) \u003c\\/p\u003e\\n{\\n\\t\\t\\t\\tThrowable wrapped = ((SQLException)ferry).getCause();\\n\\t\\t\\t\\tif (wrapped instanceof StandardException)\\n\\t\\t\\t\\t\\treturn (StandardException) wrapped;\\n\\t\\t\\t}\\n\u003cp\u003e\\t\\t}\u003c\\/p\u003e\\n\\n\u003cp\u003eThis happens when the SQLException needs to be re-thrown as a StandardException, and the error handler finds that it\'s simpler to remove the top-level SQLException than it is to wrap it in yet another exception. Normally, an SQLException that wraps a StandardException doesn\'t provide any extra information, so removing it doesn\'t harm. But in our case the top-level exception carries extra information (the next exception), and it\'s not really a simple wrapper anymore. Perhaps we need to override setNextException() in EmbedSQLException and clear the simpleWrapper flag if it\'s called. The comments in the StandardException class give the impression that this \\\"simple wrapper\\\" code was a temporary hack that was supposed to be reworked, but they don\'t give any details on how.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13015356_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13015356_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/11 11:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-04T11:17:32+0000\'\u003e04\\/Apr\\/11 11:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It looks like the rollback exception is stripped off by this piece of code in StandardException.unexpectedUserException(): \\n\\n \\t\\t\\/\\/ Look for simple wrappers for 3.0.1 - will be cleaned up in main \\n\\t\\tif (ferry != null) { \\n\\t\\t\\tif (ferry.isSimpleWrapper())  \\n{\\n\\t\\t\\t\\tThrowable wrapped = ((SQLException)ferry).getCause();\\n\\t\\t\\t\\tif (wrapped instanceof StandardException)\\n\\t\\t\\t\\t\\treturn (StandardException) wrapped;\\n\\t\\t\\t}\\n \\t\\t} \\n\\n This happens when the SQLException needs to be re-thrown as a StandardException, and the error handler finds that it\'s simpler to remove the top-level SQLException than it is to wrap it in yet another exception. Normally, an SQLException that wraps a StandardException doesn\'t provide any extra information, so removing it doesn\'t harm. But in our case the top-level exception carries extra information (the next exception), and it\'s not really a simple wrapper anymore. Perhaps we need to override setNextException() in EmbedSQLException and clear the simpleWrapper flag if it\'s called. The comments in the StandardException class give the impression that this \\\"simple wrapper\\\" code was a temporary hack that was supposed to be reworked, but they don\'t give any details on how.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13015423\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13015423&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13015423\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13015423_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13015423_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/11 14:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-04T14:03:41+0000\'\u003e04\\/Apr\\/11 14:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWould it help if we made rollBackAndThrowSQLException throw \u003cbr\\/\u003e\\nsomething other than a SQLException when it caught a rollback() exception?\u003c\\/p\u003e\\n\\n\u003cp\u003eFor example, would it help if that catch() block threw a StandardException instead?\u003c\\/p\u003e\\n\\n\u003cp\u003eI guess I\'m not quite sure I understand what rule StandardException is\u003cbr\\/\u003e\\nenforcing. Is it OK for a StandardException to wrap a StandardException, but\u003cbr\\/\u003e\\nif a SQLException wraps a StandardException than it gets automatically unwrapped?\u003c\\/p\u003e\\n\\n\u003cp\u003eI suspect this has to do with improving the external user experience for the\u003cbr\\/\u003e\\ncaller; particularly in client\\/server scenarios the exceptions that travel from\u003cbr\\/\u003e\\nserver to client tend to get wrapped along the way with uninteresting and not-so-useful\u003cbr\\/\u003e\\nouter exceptions, and so perhaps this code is trying to undo that and get\u003cbr\\/\u003e\\nmore quickly to the underlying exception since it is more likely to reveal the real problem.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13015423_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13015423_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/11 14:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-04T14:03:41+0000\'\u003e04\\/Apr\\/11 14:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Would it help if we made rollBackAndThrowSQLException throw  \\nsomething other than a SQLException when it caught a rollback() exception? \\n\\n For example, would it help if that catch() block threw a StandardException instead? \\n\\n I guess I\'m not quite sure I understand what rule StandardException is \\nenforcing. Is it OK for a StandardException to wrap a StandardException, but \\nif a SQLException wraps a StandardException than it gets automatically unwrapped? \\n\\n I suspect this has to do with improving the external user experience for the \\ncaller; particularly in client\\/server scenarios the exceptions that travel from \\nserver to client tend to get wrapped along the way with uninteresting and not-so-useful \\nouter exceptions, and so perhaps this code is trying to undo that and get \\nmore quickly to the underlying exception since it is more likely to reveal the real problem.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13015456\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13015456&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13015456\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13015456_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13015456_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/11 15:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-04T15:16:18+0000\'\u003e04\\/Apr\\/11 15:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; I guess I\'m not quite sure I understand what rule StandardException is\u003cbr\\/\u003e\\n&gt; enforcing. Is it OK for a StandardException to wrap a StandardException, but\u003cbr\\/\u003e\\n&gt; if a SQLException wraps a StandardException than it gets automatically unwrapped?\u003c\\/p\u003e\\n\\n\u003cp\u003eIt typically only gets unwrapped if it has been thrown inside a stored\u003cbr\\/\u003e\\nprocedure (only exceptions generated by\u003cbr\\/\u003e\\nPublicAPI.wrapStandardException() are marked as \\\"simple wrappers\\\").\u003cbr\\/\u003e\\nWhat it attempts to solve is the problem of passing exceptions through\u003cbr\\/\u003e\\nmultiple layers. Inside the language layer and store, exceptions have\u003cbr\\/\u003e\\nto be passed as StandardExceptions, whereas in the JDBC layer they\u003cbr\\/\u003e\\nhave to be passed as SQLExceptions.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the common case, an exception is generated inside the engine as a\u003cbr\\/\u003e\\nStandardException, and it gets wrapped in an SQLException on its way\u003cbr\\/\u003e\\nout through the JDBC layer. But in the case of stored procedures, the\u003cbr\\/\u003e\\nJDBC layer is reentered from the language layer. The exceptions that\u003cbr\\/\u003e\\nhappen inside the stored procedure are returned to the language layer\u003cbr\\/\u003e\\nas SQLExceptions, but have to be transported as StandardExceptions\u003cbr\\/\u003e\\nthrough the language layer up to the outer JDBC layer. This could be\u003cbr\\/\u003e\\ndone by wrapping the SQLException in a StandardException, but then the\u003cbr\\/\u003e\\nend result would be an SQLException wrapping a StandardException\u003cbr\\/\u003e\\nwrapping an SQLException wrapping a StandardException. By just passing\u003cbr\\/\u003e\\nthe underlying StandardException, we save two layers of indirection.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13015456_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13015456_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/11 15:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-04T15:16:18+0000\'\u003e04\\/Apr\\/11 15:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; I guess I\'m not quite sure I understand what rule StandardException is \\n&gt; enforcing. Is it OK for a StandardException to wrap a StandardException, but \\n&gt; if a SQLException wraps a StandardException than it gets automatically unwrapped? \\n\\n It typically only gets unwrapped if it has been thrown inside a stored \\nprocedure (only exceptions generated by \\nPublicAPI.wrapStandardException() are marked as \\\"simple wrappers\\\"). \\nWhat it attempts to solve is the problem of passing exceptions through \\nmultiple layers. Inside the language layer and store, exceptions have \\nto be passed as StandardExceptions, whereas in the JDBC layer they \\nhave to be passed as SQLExceptions. \\n\\n In the common case, an exception is generated inside the engine as a \\nStandardException, and it gets wrapped in an SQLException on its way \\nout through the JDBC layer. But in the case of stored procedures, the \\nJDBC layer is reentered from the language layer. The exceptions that \\nhappen inside the stored procedure are returned to the language layer \\nas SQLExceptions, but have to be transported as StandardExceptions \\nthrough the language layer up to the outer JDBC layer. This could be \\ndone by wrapping the SQLException in a StandardException, but then the \\nend result would be an SQLException wrapping a StandardException \\nwrapping an SQLException wrapping a StandardException. By just passing \\nthe underlying StandardException, we save two layers of indirection.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13022168\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13022168&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13022168\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13022168_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13022168_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/11 15:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-20T15:24:17+0000\'\u003e20\\/Apr\\/11 15:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHello, I have provided \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4443\\\" title=\\\"Wrap rollback in exception handlers in try-catch\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4443\\\"\u003e\u003cdel\u003eDERBY-4443\u003c\\/del\u003e\u003c\\/a\u003e-6-tmp.patch.\u003c\\/p\u003e\\n\\n\u003cp\u003e private static void rollBackAndThrowSQLException(Connection conn,\u003cbr\\/\u003e\\n            SQLException se) throws SQLException {\u003cbr\\/\u003e\\n        try \u003c\\/p\u003e\\n{\\n            conn.rollback();\\n        }\\n\u003cp\u003e catch (SQLException e) \u003c\\/p\u003e\\n{\\n            se.setNextException(e);            \\n        }\\n\\n\u003cp\u003e        StandardException ste = StandardException.newException(\u003cbr\\/\u003e\\n                se.getSQLState(), (Throwable)se);\u003cbr\\/\u003e\\n        SQLException sqle = new SQLException((Throwable)ste); \\/\\/this line can not pass compilation\u003c\\/p\u003e\\n\\n\u003cp\u003e        throw sqle;\u003cbr\\/\u003e\\n    }\u003c\\/p\u003e\\n\\n\u003cp\u003eIn rollBackAndThrowSQLException() of this patch, SQLException has been wrapped in StandardException, which is wrapped in another SQLException. However, the patch can not pass compilation, and says \\\"constructor SQLException(java.lang.Throwable) can not be found\\\". I\'m puzzled about it. Please give an advice, thanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13022168_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13022168_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/11 15:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-20T15:24:17+0000\'\u003e20\\/Apr\\/11 15:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hello, I have provided   DERBY-4443  -6-tmp.patch. \\n\\n  private static void rollBackAndThrowSQLException(Connection conn, \\n            SQLException se) throws SQLException { \\n        try  \\n{\\n            conn.rollback();\\n        }\\n  catch (SQLException e)  \\n{\\n            se.setNextException(e);            \\n        }\\n\\n         StandardException ste = StandardException.newException( \\n                se.getSQLState(), (Throwable)se); \\n        SQLException sqle = new SQLException((Throwable)ste); \\/\\/this line can not pass compilation \\n\\n         throw sqle; \\n    } \\n\\n In rollBackAndThrowSQLException() of this patch, SQLException has been wrapped in StandardException, which is wrapped in another SQLException. However, the patch can not pass compilation, and says \\\"constructor SQLException(java.lang.Throwable) can not be found\\\". I\'m puzzled about it. Please give an advice, thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13022175\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13022175&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13022175\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13022175_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13022175_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/11 15:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-20T15:33:52+0000\'\u003e20\\/Apr\\/11 15:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think that the compilation error is because this particular class (SystemProcedures.java) is\u003cbr\\/\u003e\\ncompiled against the JSR169 version of SQLException, which you can find in\u003cbr\\/\u003e\\n.\\/java\\/stubs\\/jsr169\\/java\\/sql\\/SQLException.java, and that version of SQLException does\u003cbr\\/\u003e\\nnot have a constructor which takes a Throwable.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat did you think about Knut Anders\'s suggestion of going back to your earlier patch,\u003cbr\\/\u003e\\nand overriding setNextException in EmbedSQLException to clear the simpleWrapper flag?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13022175_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13022175_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/11 15:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-20T15:33:52+0000\'\u003e20\\/Apr\\/11 15:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think that the compilation error is because this particular class (SystemProcedures.java) is \\ncompiled against the JSR169 version of SQLException, which you can find in \\n.\\/java\\/stubs\\/jsr169\\/java\\/sql\\/SQLException.java, and that version of SQLException does \\nnot have a constructor which takes a Throwable. \\n\\n What did you think about Knut Anders\'s suggestion of going back to your earlier patch, \\nand overriding setNextException in EmbedSQLException to clear the simpleWrapper flag?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13022749\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13022749&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13022749\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13022749_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13022749_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Apr\\/11 13:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-21T13:51:34+0000\'\u003e21\\/Apr\\/11 13:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi, Bryan, thanks for your reminding, I think the new patch 4443-7 can work well now. Please check it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13022749_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13022749_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Apr\\/11 13:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-21T13:51:34+0000\'\u003e21\\/Apr\\/11 13:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, Bryan, thanks for your reminding, I think the new patch 4443-7 can work well now. Please check it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13023074\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13023074&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13023074\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13023074_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13023074_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Apr\\/11 01:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-22T01:44:32+0000\'\u003e22\\/Apr\\/11 01:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch 7 builds fine for me and the new test passes cleanly. I also verified that if\u003cbr\\/\u003e\\nI take out the change to EmbedSQLException, the test then fails with the expected\u003cbr\\/\u003e\\nfailure, so I think this is looking very good.\u003c\\/p\u003e\\n\\n\u003cp\u003eHoux, have you run the complete test suite with this patch? Or have you just run the new test?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13023074_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13023074_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Apr\\/11 01:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-22T01:44:32+0000\'\u003e22\\/Apr\\/11 01:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch 7 builds fine for me and the new test passes cleanly. I also verified that if \\nI take out the change to EmbedSQLException, the test then fails with the expected \\nfailure, so I think this is looking very good. \\n\\n Houx, have you run the complete test suite with this patch? Or have you just run the new test?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13025266\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13025266&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13025266\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13025266_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13025266_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/11 15:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-26T15:04:02+0000\'\u003e26\\/Apr\\/11 15:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi, Bryan. I have only run the tools.Suite, but not suites.All. \u003c\\/p\u003e\\n\\n\u003cp\u003eAfter saw your adivce, I have run the complete test (org.apache.derbyTesting.functionTests.suites.All. Is that right ?) sometimes for several times, as been broken down by accident.  The complete test suite takes me more than 5 hours for one run.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have seen the result containing some failures, but after run the complete test suite and dividual tests on the original state, I believe they are not caused by the new patch. So the new patch is OK.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13025266_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13025266_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/11 15:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-26T15:04:02+0000\'\u003e26\\/Apr\\/11 15:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, Bryan. I have only run the tools.Suite, but not suites.All.  \\n\\n After saw your adivce, I have run the complete test (org.apache.derbyTesting.functionTests.suites.All. Is that right ?) sometimes for several times, as been broken down by accident.  The complete test suite takes me more than 5 hours for one run. \\n\\n I have seen the result containing some failures, but after run the complete test suite and dividual tests on the original state, I believe they are not caused by the new patch. So the new patch is OK.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13025584\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13025584&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13025584\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13025584_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13025584_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/11 03:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-27T03:29:35+0000\'\u003e27\\/Apr\\/11 03:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you Houx for the update.\u003c\\/p\u003e\\n\\n\u003cp\u003eI understand about the tests; they take a very long time for me, too. I am hoping to\u003cbr\\/\u003e\\nset up a faster machine for running the tests sometime over the summer, but for\u003cbr\\/\u003e\\nnow I am like you, it is quite hard to run the tests. So I don\'t run the full suite very\u003cbr\\/\u003e\\noften, but I do like to run it on a patch whenever I can.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am going to move ahead with committing patch 7.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13025584_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13025584_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/11 03:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-27T03:29:35+0000\'\u003e27\\/Apr\\/11 03:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you Houx for the update. \\n\\n I understand about the tests; they take a very long time for me, too. I am hoping to \\nset up a faster machine for running the tests sometime over the summer, but for \\nnow I am like you, it is quite hard to run the tests. So I don\'t run the full suite very \\noften, but I do like to run it on a patch whenever I can. \\n\\n I am going to move ahead with committing patch 7.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13025601\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13025601&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13025601\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13025601_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13025601_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/11 04:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-27T04:29:29+0000\'\u003e27\\/Apr\\/11 04:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI committed patch 7 to the trunk as revision 1096991.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for all the hard work on this change; the testing was\u003cbr\\/\u003e\\na bit tricky but I\'m pleased that we worked through the issues\u003cbr\\/\u003e\\nto get a test case that solidly demonstrates the new functionality.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13025601_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13025601_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/11 04:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-27T04:29:29+0000\'\u003e27\\/Apr\\/11 04:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I committed patch 7 to the trunk as revision 1096991. \\n\\n Thanks for all the hard work on this change; the testing was \\na bit tricky but I\'m pleased that we worked through the issues \\nto get a test case that solidly demonstrates the new functionality.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13025771\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13025771&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13025771\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13025771_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13025771_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/11 12:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-27T12:38:00+0000\'\u003e27\\/Apr\\/11 12:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHehe, I have harvested a lot on this issue, thanks very much for your and Knut\'s patient help!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"houxzhang\\\" id=\\\"commentauthor_13025771_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=houxzhang\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"houxzhang\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Houx Zhang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13025771_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/11 12:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-04-27T12:38:00+0000\'\u003e27\\/Apr\\/11 12:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hehe, I have harvested a lot on this issue, thanks very much for your and Knut\'s patient help!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13090398\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13090398&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13090398\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_13090398_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13090398_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/11 18:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-08-24T18:43:45+0000\'\u003e24\\/Aug\\/11 18:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ereopening for backport to 10.8\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_13090398_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13090398_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/11 18:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-08-24T18:43:45+0000\'\u003e24\\/Aug\\/11 18:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    reopening for backport to 10.8              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13090400\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13090400&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13090400\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_13090400_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13090400_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/11 18:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-08-24T18:46:42+0000\'\u003e24\\/Aug\\/11 18:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ecommitted backport to 10.8 with revision 1161226.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_13090400_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13090400_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/11 18:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-08-24T18:46:42+0000\'\u003e24\\/Aug\\/11 18:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    committed backport to 10.8 with revision 1161226.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13229378\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13229378&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13229378\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13229378_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13229378_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Mar\\/12 17:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-14T17:19:46+0000\'\u003e14\\/Mar\\/12 17:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReopen for 10.5 backport consideration. If working on the backport for this issue. Temporarily assign yourself and add a comment that you are working on it. When finished, reresolve with the new fix versions or label backport_reject_10_x as appropriate.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13229378_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13229378_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Mar\\/12 17:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-14T17:19:46+0000\'\u003e14\\/Mar\\/12 17:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Reopen for 10.5 backport consideration. If working on the backport for this issue. Temporarily assign yourself and add a comment that you are working on it. When finished, reresolve with the new fix versions or label backport_reject_10_x as appropriate.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13233754\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13233754&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13233754\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_13233754_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13233754_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Mar\\/12 21:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-20T21:11:32+0000\'\u003e20\\/Mar\\/12 21:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ll attempt backport of this to 10.5.\u003cbr\\/\u003e\\nTemporarily assigned to me.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_13233754_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13233754_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Mar\\/12 21:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-20T21:11:32+0000\'\u003e20\\/Mar\\/12 21:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ll attempt backport of this to 10.5. \\nTemporarily assigned to me.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13237239\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4443?focusedCommentId=13237239&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13237239\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_13237239_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13237239_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Mar\\/12 22:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-23T22:43:31+0000\'\u003e23\\/Mar\\/12 22:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ebackported to 10.7 with revision 1304630, to 10.6 with revision 1304632, and to 10.5 with revision 1304636. Resetting assignee and closing again.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_13237239_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13237239_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Mar\\/12 22:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-23T22:43:31+0000\'\u003e23\\/Mar\\/12 22:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    backported to 10.7 with revision 1304630, to 10.6 with revision 1304632, and to 10.5 with revision 1304636. Resetting assignee and closing again.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520239844122"> 
    <input type="hidden" title="jira.request.server.time" value="296"> 
    <input type="hidden" title="jira.request.id" value="530x94405773x2"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="2"> 
    <input type="hidden" title="db.reads.time.in.ms" value="45"> 
    <input type="hidden" title="db.conns.time.in.ms" value="52"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 530x94405773x2
	          REQUEST TIMESTAMP : [05/Mar/2018:08:50:44 +0000]
	               REQUEST TIME : 0.2960
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 2

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=20, elapsedTotal=45257396, elapsedMin=629316, elapsedMax=11800822, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=24, elapsedTotal=52692750, elapsedMin=661966, elapsedMax=11953982, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>