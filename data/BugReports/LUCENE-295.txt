<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|33f19f2fd2d3897b71c05f540abdc096574ac3a8|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"622d7dca379615\"";
WRM._unparsedData["project-id"]="12310110";
WRM._unparsedData["project-key"]="\"LUCENE\"";
WRM._unparsedData["project-name"]="\"Lucene - Core\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310110";
WRM._unparsedData["projectKey"]="\"LUCENE\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="LUCENE-295"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[LUCENE-295] [PATCH] MultiSearcher problems with Similarity.docFreq() - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[LUCENE-295] [PATCH] MultiSearcher problems with Similarity.docFreq() - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/LUCENE" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-295">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310110" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Lucene - Core'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310110&amp;avatarId=10061"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/LUCENE">Lucene - Core</a></li>
                 <li><a class="issue-link" data-issue-key="LUCENE-295" href="/jira/browse/LUCENE-295" id="key-val" rel="12314445">LUCENE-295</a></li>
                </ol>
                <h1 id="summary-val">[PATCH] MultiSearcher problems with Similarity.docFreq()</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-295"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/LUCENE-295/LUCENE-295.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/LUCENE-295/LUCENE-295.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/LUCENE-295/LUCENE-295.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/LUCENE-295/LUCENE-295.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="1.4 ">1.4</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+component+%3D+%22core%2Fsearch%22" title="core/search issues with search code">core/search</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12314445-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value"> 
                    <p>Operating System: other<br> Platform: All</p> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_10010" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bugzilla Id" class="name">Bugzilla Id:</strong> 
                      <div id="customfield_10010-val" class="value type-importid" data-fieldtype="importid" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        31841 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>When MultiSearcher invokes its subsearchers, it is the subsearchers' docFreq()<br> that is accessed by Similarity.docFreq(). This causes idf's to be computed<br> local to each index rather than globally, which causes ranking across multiple<br> indices to not be equivalent to ranking across the entire global collection.</p> 
                  <p>The attached files (if I can figure out how to attach them) provide a potential<br> partial solution for this. They properly fix a simple test case, RankingTest,<br> that was provided by Daniel Naber.</p> 
                  <p>The changes are:<br> 1. Searcher: Add topmostSearcher() field with getter and setter to record<br> the outermost Searcher. Default to this.<br> 2. MultiSearcher: Pass down the topmostSearcher when creating the subsearchers.<br> 3. IndexSearcher: Call Query.weight() everywhere with the topmostSearcher<br> instead of this.<br> 4. Query: Provide a default implementation of Query.combine() so that<br> MultiSearcher works with all queries.</p> 
                  <p>Problems or possible problems I see:<br> 1. This does not address the same issue with RemoteSearchable. <br> RemoteSearchable is not a Searcher, nor can it be due to lack of multiple<br> inheritance in Java, but Query.weight() requires a Searcher. Perhaps<br> Query.weight() should be changed to take a Searchable, but this requires<br> changing many places and I suspect would break apps.<br> 2. There may be other places that topmostSearcher should be used instead of this.<br> 3. The default implementation for Query.combine() is a guess on my part - it<br> works for TermQuery. It's fragile in that the default implementation will hide<br> bugs caused by queries that inadvertently omit a more precise Query.combine()<br> method.<br> 4. The prior comment on Query.combine() indicates that whoever wrote it was<br> fully aware of this problem and so probably had another usage in mind, so the<br> whole issue may just be Daniel's usage in the test case. It's not apparent to<br> me, so I probably don't understand something.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/LUCENE-295?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/LUCENE-295?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/LUCENE-295?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/LUCENE-295?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312429" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312429/ASF.LICENSE.NOT.GRANTED--combine-fix.patch" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--combine-fix.patch:https://issues.apache.org/jira/secure/attachment/12312429/ASF.LICENSE.NOT.GRANTED--combine-fix.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312429/ASF.LICENSE.NOT.GRANTED--combine-fix.patch" title="Latest  27/Apr/05 05:51 - Chuck Williams" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--combine-fix.patch:https://issues.apache.org/jira/secure/attachment/12312429/ASF.LICENSE.NOT.GRANTED--combine-fix.patch">ASF.LICENSE.NOT.GRANTED--combine-fix.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-04-27T05:51:02.000Z">27/Apr/05 05:51</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Chuck Williams
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312430" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312430/ASF.LICENSE.NOT.GRANTED--combine-fix2.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--combine-fix2.diff:https://issues.apache.org/jira/secure/attachment/12312430/ASF.LICENSE.NOT.GRANTED--combine-fix2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312430/ASF.LICENSE.NOT.GRANTED--combine-fix2.diff" title="Latest  27/Apr/05 19:03 - Wolf Siberski" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--combine-fix2.diff:https://issues.apache.org/jira/secure/attachment/12312430/ASF.LICENSE.NOT.GRANTED--combine-fix2.diff">ASF.LICENSE.NOT.GRANTED--combine-fix2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-04-27T19:03:13.000Z">27/Apr/05 19:03</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Wolf Siberski
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312431" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312431/ASF.LICENSE.NOT.GRANTED--multisearcher.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher.diff:https://issues.apache.org/jira/secure/attachment/12312431/ASF.LICENSE.NOT.GRANTED--multisearcher.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312431/ASF.LICENSE.NOT.GRANTED--multisearcher.diff" title="Latest  21/Jun/05 16:44 - Wolf Siberski" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher.diff:https://issues.apache.org/jira/secure/attachment/12312431/ASF.LICENSE.NOT.GRANTED--multisearcher.diff">ASF.LICENSE.NOT.GRANTED--multisearcher.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-06-21T16:44:30.000Z">21/Jun/05 16:44</time>
                   </dd>
                   <dd class="attachment-size">
                    14 kB
                   </dd>
                   <dd class="attachment-author">
                    Wolf Siberski
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12312423" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312423/ASF.LICENSE.NOT.GRANTED--multisearcher.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher.diff:https://issues.apache.org/jira/secure/attachment/12312423/ASF.LICENSE.NOT.GRANTED--multisearcher.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312423/ASF.LICENSE.NOT.GRANTED--multisearcher.diff" title=" 10/Feb/05 19:33 - Wolf Siberski" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher.diff:https://issues.apache.org/jira/secure/attachment/12312423/ASF.LICENSE.NOT.GRANTED--multisearcher.diff">ASF.LICENSE.NOT.GRANTED--multisearcher.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-02-10T19:33:34.000Z">10/Feb/05 19:33</time>
                   </dd>
                   <dd class="attachment-size">
                    20 kB
                   </dd>
                   <dd class="attachment-author">
                    Wolf Siberski
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12312421" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312421/ASF.LICENSE.NOT.GRANTED--multisearcher.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher.diff:https://issues.apache.org/jira/secure/attachment/12312421/ASF.LICENSE.NOT.GRANTED--multisearcher.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312421/ASF.LICENSE.NOT.GRANTED--multisearcher.diff" title=" 12/Nov/04 17:39 - Wolf Siberski" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher.diff:https://issues.apache.org/jira/secure/attachment/12312421/ASF.LICENSE.NOT.GRANTED--multisearcher.diff">ASF.LICENSE.NOT.GRANTED--multisearcher.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2004-11-12T17:39:11.000Z">12/Nov/04 17:39</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Wolf Siberski
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312422" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312422/ASF.LICENSE.NOT.GRANTED--multisearcher2.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher2.diff:https://issues.apache.org/jira/secure/attachment/12312422/ASF.LICENSE.NOT.GRANTED--multisearcher2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312422/ASF.LICENSE.NOT.GRANTED--multisearcher2.diff" title="Latest  15/Nov/04 21:24 - Wolf Siberski" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher2.diff:https://issues.apache.org/jira/secure/attachment/12312422/ASF.LICENSE.NOT.GRANTED--multisearcher2.diff">ASF.LICENSE.NOT.GRANTED--multisearcher2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2004-11-15T21:24:32.000Z">15/Nov/04 21:24</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Wolf Siberski
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312424" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312424/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-18b.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-18b.diff:https://issues.apache.org/jira/secure/attachment/12312424/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-18b.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312424/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-18b.diff" title="Latest  18/Feb/05 20:33 - Wolf Siberski" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-18b.diff:https://issues.apache.org/jira/secure/attachment/12312424/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-18b.diff">ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-18b.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-02-18T20:33:09.000Z">18/Feb/05 20:33</time>
                   </dd>
                   <dd class="attachment-size">
                    47 kB
                   </dd>
                   <dd class="attachment-author">
                    Wolf Siberski
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312425" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312425/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-22c.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-22c.diff:https://issues.apache.org/jira/secure/attachment/12312425/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-22c.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312425/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-22c.diff" title="Latest  23/Feb/05 00:33 - Wolf Siberski" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-22c.diff:https://issues.apache.org/jira/secure/attachment/12312425/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-22c.diff">ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-22c.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-02-23T00:33:00.000Z">23/Feb/05 00:33</time>
                   </dd>
                   <dd class="attachment-size">
                    48 kB
                   </dd>
                   <dd class="attachment-author">
                    Wolf Siberski
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312426" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312426/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-04-19.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher-2005-04-19.diff:https://issues.apache.org/jira/secure/attachment/12312426/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-04-19.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312426/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-04-19.diff" title="Latest  20/Apr/05 12:13 - Otis Gospodnetic" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher-2005-04-19.diff:https://issues.apache.org/jira/secure/attachment/12312426/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-04-19.diff">ASF.LICENSE.NOT.GRANTED--multisearcher-2005-04-19.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-04-20T12:13:46.000Z">20/Apr/05 12:13</time>
                   </dd>
                   <dd class="attachment-size">
                    43 kB
                   </dd>
                   <dd class="attachment-author">
                    Otis Gospodnetic
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312428" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312428/ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff:https://issues.apache.org/jira/secure/attachment/12312428/ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312428/ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff" title="Latest  26/Apr/05 16:34 - Wolf Siberski" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff:https://issues.apache.org/jira/secure/attachment/12312428/ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff">ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-04-26T16:34:50.000Z">26/Apr/05 16:34</time>
                   </dd>
                   <dd class="attachment-size">
                    19 kB
                   </dd>
                   <dd class="attachment-author">
                    Wolf Siberski
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12312427" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312427/ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff:https://issues.apache.org/jira/secure/attachment/12312427/ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312427/ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff" title=" 22/Apr/05 17:08 - Wolf Siberski" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff:https://issues.apache.org/jira/secure/attachment/12312427/ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff">ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-04-22T17:08:05.000Z">22/Apr/05 17:08</time>
                   </dd>
                   <dd class="attachment-size">
                    20 kB
                   </dd>
                   <dd class="attachment-author">
                    Wolf Siberski
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312419" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312419/ASF.LICENSE.NOT.GRANTED--MultiSearcherPatch.zip" draggable="true" data-downloadurl="application/octet-stream:ASF.LICENSE.NOT.GRANTED--MultiSearcherPatch.zip:https://issues.apache.org/jira/secure/attachment/12312419/ASF.LICENSE.NOT.GRANTED--MultiSearcherPatch.zip"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312419/ASF.LICENSE.NOT.GRANTED--MultiSearcherPatch.zip" title="Latest  22/Oct/04 08:15 - Chuck Williams" draggable="true" data-downloadurl="application/octet-stream:ASF.LICENSE.NOT.GRANTED--MultiSearcherPatch.zip:https://issues.apache.org/jira/secure/attachment/12312419/ASF.LICENSE.NOT.GRANTED--MultiSearcherPatch.zip">ASF.LICENSE.NOT.GRANTED--MultiSearcherPatch.zip</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2004-10-22T08:15:01.000Z">22/Oct/04 08:15</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Chuck Williams
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312420" data-issue-id="12314445" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312420/ASF.LICENSE.NOT.GRANTED--patch.diff" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--patch.diff:https://issues.apache.org/jira/secure/attachment/12312420/ASF.LICENSE.NOT.GRANTED--patch.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312420/ASF.LICENSE.NOT.GRANTED--patch.diff" title="Latest  23/Oct/04 01:58 - Daniel Naber" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--patch.diff:https://issues.apache.org/jira/secure/attachment/12312420/ASF.LICENSE.NOT.GRANTED--patch.diff">ASF.LICENSE.NOT.GRANTED--patch.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2004-10-23T01:58:40.000Z">23/Oct/04 01:58</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Daniel Naber
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_java-dev@lucene.apache.org" rel="java-dev@lucene.apache.org" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Lucene Developers&quot;,&quot;emailAddress&quot;:&quot;noreply@example.com&quot;,&quot;username&quot;:&quot;java-dev@lucene.apache.org&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="java-dev@lucene.apache.org"></span></span> Lucene Developers </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_chuck@manawiz.com" rel="chuck@manawiz.com" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Chuck Williams&quot;,&quot;emailAddress&quot;:&quot;chuck@manawiz.com&quot;,&quot;username&quot;:&quot;chuck@manawiz.com&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="chuck@manawiz.com"></span></span> Chuck Williams </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="22/Oct/04 08:11"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2004-10-22T08:11:33+0000">22/Oct/04 08:11</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="27/May/06 01:38"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-05-27T01:38:39+0000">27/May/06 01:38</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="27/May/06 01:38"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-05-27T01:38:39+0000">27/May/06 01:38</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-295?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/LUCENE-295?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12321963\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321963&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321963\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321963_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321963_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/04 08:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-10-22T08:15:01+0000\'\u003e22\\/Oct\\/04 08:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=13175)\u003cbr\\/\u003e\\nModified files for MultiSearcher \\/ Similarity incompatibility\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321963_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321963_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/04 08:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-10-22T08:15:01+0000\'\u003e22\\/Oct\\/04 08:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=13175) \\nModified files for MultiSearcher \\/ Similarity incompatibility              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321964\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321964&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321964\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"daniel.naber@t-online.de\\\" id=\\\"commentauthor_12321964_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=daniel.naber%40t-online.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"daniel.naber@t-online.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321964_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/04 01:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-10-23T01:58:40+0000\'\u003e23\\/Oct\\/04 01:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=13194)\u003cbr\\/\u003e\\nChuck\'s changes as a diff\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"daniel.naber@t-online.de\\\" id=\\\"commentauthor_12321964_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=daniel.naber%40t-online.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"daniel.naber@t-online.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321964_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/04 01:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-10-23T01:58:40+0000\'\u003e23\\/Oct\\/04 01:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=13194) \\nChuck\'s changes as a diff              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321965\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321965&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321965\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"daniel.naber@t-online.de\\\" id=\\\"commentauthor_12321965_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=daniel.naber%40t-online.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"daniel.naber@t-online.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321965_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/04 02:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-10-23T02:00:22+0000\'\u003e23\\/Oct\\/04 02:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eChuck, thanks for the files. I cannot judge if that\'s the correct\\/best way to \u003cbr\\/\u003e\\nfix the problem. I\'ve attached a diff built from your new files so that \u003cbr\\/\u003e\\nsomeone will hopefully review your changes. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"daniel.naber@t-online.de\\\" id=\\\"commentauthor_12321965_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=daniel.naber%40t-online.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"daniel.naber@t-online.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321965_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/04 02:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-10-23T02:00:22+0000\'\u003e23\\/Oct\\/04 02:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Chuck, thanks for the files. I cannot judge if that\'s the correct\\/best way to  \\nfix the problem. I\'ve attached a diff built from your new files so that  \\nsomeone will hopefully review your changes.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321966\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321966&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321966\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321966_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321966_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/04 17:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-11-12T17:39:11+0000\'\u003e12\\/Nov\\/04 17:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=13413)\u003cbr\\/\u003e\\nPatch to MultiSearcher.java to correct idf calculation\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321966_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321966_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/04 17:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-11-12T17:39:11+0000\'\u003e12\\/Nov\\/04 17:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=13413) \\nPatch to MultiSearcher.java to correct idf calculation              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321967\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321967&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321967\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321967_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321967_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/04 17:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-11-12T17:55:04+0000\'\u003e12\\/Nov\\/04 17:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is another patch to correct the idf calculation. This patch currently is\u003cbr\\/\u003e\\nkind of proof of concept (fixes Daniel Nabers test case), but not ready for\u003cbr\\/\u003e\\ncommitment, as it breaks ParallelMultiSearcher.java and several test cases. \u003c\\/p\u003e\\n\\n\u003cp\u003eInstead of Chucks Williams patch, this one relies on a specialized Similarity\u003cbr\\/\u003e\\nobject which is passed to the searchers. This causes less changes (only\u003cbr\\/\u003e\\nMultiSearcher is affected), and IMHO fits better into Lucene\'s design, because\u003cbr\\/\u003e\\nSimilarity is responsible for idf calculation anyway, but the Searchers aren\'t.\u003c\\/p\u003e\\n\\n\u003cp\u003eProblems:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe Similarity object can\'t be passed to RemoteSearchables, so the patch works\u003cbr\\/\u003e\\nonly for Searchers.\u003c\\/li\u003e\\n\\t\u003cli\u003eMultiSearcher.search() methods aren\'t thread-safe anymore. The only way to\u003cbr\\/\u003e\\nprovide the Searches with the new Similarity object is to use setSimilarity().\u003cbr\\/\u003e\\nThis causes \u003cb\u003eall\u003c\\/b\u003e searches to use it, not only the search which is currently\u003cbr\\/\u003e\\nrunning.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eA better solution would be to add the Similarity object to the Query. While ther\u003cbr\\/\u003e\\ne is already a similarity attribute in the Query, there is no Method to set it,\u003cbr\\/\u003e\\nand also interaction with subqueries is unclear. Such a change would therefore\u003cbr\\/\u003e\\nrequire a major redesign of similarity handling. If we make Similarity\u003cbr\\/\u003e\\nserializable, then we could pass the object to RemoteSearchers too, as part of\u003cbr\\/\u003e\\nthe query. If I find time, I\'ll submit a complete patch in the future.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321967_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321967_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/04 17:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-11-12T17:55:04+0000\'\u003e12\\/Nov\\/04 17:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is another patch to correct the idf calculation. This patch currently is \\nkind of proof of concept (fixes Daniel Nabers test case), but not ready for \\ncommitment, as it breaks ParallelMultiSearcher.java and several test cases.  \\n\\n Instead of Chucks Williams patch, this one relies on a specialized Similarity \\nobject which is passed to the searchers. This causes less changes (only \\nMultiSearcher is affected), and IMHO fits better into Lucene\'s design, because \\nSimilarity is responsible for idf calculation anyway, but the Searchers aren\'t. \\n\\n Problems: \\n \\n\\t The Similarity object can\'t be passed to RemoteSearchables, so the patch works \\nonly for Searchers. \\n\\t MultiSearcher.search() methods aren\'t thread-safe anymore. The only way to \\nprovide the Searches with the new Similarity object is to use setSimilarity(). \\nThis causes  all  searches to use it, not only the search which is currently \\nrunning. \\n \\n\\n\\n A better solution would be to add the Similarity object to the Query. While ther \\ne is already a similarity attribute in the Query, there is no Method to set it, \\nand also interaction with subqueries is unclear. Such a change would therefore \\nrequire a major redesign of similarity handling. If we make Similarity \\nserializable, then we could pass the object to RemoteSearchers too, as part of \\nthe query. If I find time, I\'ll submit a complete patch in the future.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321968\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321968&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321968\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321968_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321968_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/04 21:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-11-15T21:24:32+0000\'\u003e15\\/Nov\\/04 21:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=13464)\u003cbr\\/\u003e\\nComplete patch to allow specification the Similarity on a query-by-query case\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is a followup on my patch\\/comment from 2004-11-12. The patch attached now\u003cbr\\/\u003e\\nis complete, i.e. everything compiles and no test case is broken by it.\u003cbr\\/\u003e\\nThe main idea is that a setSimilarity() method and a similarity attributed is\u003cbr\\/\u003e\\nadded to Query. If the similarity is not set, the query uses the Searcher\'s\u003cbr\\/\u003e\\nsimilarity as before. However, if one sets the Similarity on the query, this\u003cbr\\/\u003e\\none takes precedence.\u003cbr\\/\u003e\\nTo solve the MultiSearcher issue, I have provided two different Similarities:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eMultiSimilarity delegates the docFreq() and maxDoc() calls to the\u003cbr\\/\u003e\\nMultiSearcher, thus retrieving the sum over all registered searchers.\u003cbr\\/\u003e\\nThis Similarity always \'gets it right\', but obviously doesn\'t work with\u003cbr\\/\u003e\\nRemoteSearchables.\u003c\\/li\u003e\\n\\t\u003cli\u003eDfMapSimilarity analyses a query and caches all necessary docFreq values.\u003cbr\\/\u003e\\nThis Similarity is Serializable and therefore works with RemoteSearchables,\u003cbr\\/\u003e\\ntoo. However, it is not able to handle queries where the term set is not known\u003cbr\\/\u003e\\nbeforehand, e.g. wildcard queries.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eBoth problems mentioned in my previous comment (thread-safety and remote\u003cbr\\/\u003e\\nsearcher compatibility) are solved by this patch. All test cases work\u003cbr\\/\u003e\\nunchanged with the exception of one test case which had been tweaked\u003cbr\\/\u003e\\npreviously due to the incorrect MultiSearcher and now works as expected\u003cbr\\/\u003e\\n(TestSort.testNormalizedScores()).\u003c\\/p\u003e\\n\\n\u003cp\u003eProblems:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eDfMapSimilarity.collectDfs() contains a lot of ugly casts to Query\u003cbr\\/\u003e\\nsubclasses.\u003cbr\\/\u003e\\n  This could be avoided by adding another abstract method to Query, but it is\u003cbr\\/\u003e\\n  unclear if this is really the better solution.\u003c\\/li\u003e\\n\\t\u003cli\u003eIn this patch the choice for DfMapSimilarity is hard-coded into\u003cbr\\/\u003e\\nMultiSearcher. This should be made configurable.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321968_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321968_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/04 21:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2004-11-15T21:24:32+0000\'\u003e15\\/Nov\\/04 21:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=13464) \\nComplete patch to allow specification the Similarity on a query-by-query case \\n\\n This is a followup on my patch\\/comment from 2004-11-12. The patch attached now \\nis complete, i.e. everything compiles and no test case is broken by it. \\nThe main idea is that a setSimilarity() method and a similarity attributed is \\nadded to Query. If the similarity is not set, the query uses the Searcher\'s \\nsimilarity as before. However, if one sets the Similarity on the query, this \\none takes precedence. \\nTo solve the MultiSearcher issue, I have provided two different Similarities: \\n \\n\\t MultiSimilarity delegates the docFreq() and maxDoc() calls to the \\nMultiSearcher, thus retrieving the sum over all registered searchers. \\nThis Similarity always \'gets it right\', but obviously doesn\'t work with \\nRemoteSearchables. \\n\\t DfMapSimilarity analyses a query and caches all necessary docFreq values. \\nThis Similarity is Serializable and therefore works with RemoteSearchables, \\ntoo. However, it is not able to handle queries where the term set is not known \\nbeforehand, e.g. wildcard queries. \\n \\n\\n\\n Both problems mentioned in my previous comment (thread-safety and remote \\nsearcher compatibility) are solved by this patch. All test cases work \\nunchanged with the exception of one test case which had been tweaked \\npreviously due to the incorrect MultiSearcher and now works as expected \\n(TestSort.testNormalizedScores()). \\n\\n Problems: \\n \\n\\t DfMapSimilarity.collectDfs() contains a lot of ugly casts to Query \\nsubclasses. \\n  This could be avoided by adding another abstract method to Query, but it is \\n  unclear if this is really the better solution. \\n\\t In this patch the choice for DfMapSimilarity is hard-coded into \\nMultiSearcher. This should be made configurable. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321969\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321969&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321969\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"daniel.naber@t-online.de\\\" id=\\\"commentauthor_12321969_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=daniel.naber%40t-online.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"daniel.naber@t-online.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321969_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/05 07:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-01-05T07:49:23+0000\'\u003e05\\/Jan\\/05 07:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eBug 32053 has been marked as a duplicate of this bug. ***\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"daniel.naber@t-online.de\\\" id=\\\"commentauthor_12321969_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=daniel.naber%40t-online.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"daniel.naber@t-online.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321969_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/05 07:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-01-05T07:49:23+0000\'\u003e05\\/Jan\\/05 07:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t Bug 32053 has been marked as a duplicate of this bug. *** \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321970\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321970&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321970\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321970_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321970_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/05 19:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-02-10T19:33:34+0000\'\u003e10\\/Feb\\/05 19:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=14242)\u003cbr\\/\u003e\\nNew patch based on the discussion on lucene-dev (intermediate version)\u003c\\/p\u003e\\n\\n\u003cp\u003eAccording to my understanding of our dev-lucene discussion Multisearcher should\u003cbr\\/\u003e\\nevaluate queries in the following way:\u003cbr\\/\u003e\\n1. rewrite queries using the Multisearch Similarity\u003cbr\\/\u003e\\n2. extract necessary terms\u003cbr\\/\u003e\\n3. collect idfs for these terms from the Searchables\u003cbr\\/\u003e\\n4. adjust query boosts according to collected idfs\u003cbr\\/\u003e\\n5. distribute re-written and re-boosted query to Searchables\u003cbr\\/\u003e\\n6. merge results\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch implements all steps except 4, where it uses a modified Similarity\u003cbr\\/\u003e\\nclass instead. Thus it is fully functional, but not yet ready for commit.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321970_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321970_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/05 19:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-02-10T19:33:34+0000\'\u003e10\\/Feb\\/05 19:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=14242) \\nNew patch based on the discussion on lucene-dev (intermediate version) \\n\\n According to my understanding of our dev-lucene discussion Multisearcher should \\nevaluate queries in the following way: \\n1. rewrite queries using the Multisearch Similarity \\n2. extract necessary terms \\n3. collect idfs for these terms from the Searchables \\n4. adjust query boosts according to collected idfs \\n5. distribute re-written and re-boosted query to Searchables \\n6. merge results \\n\\n This patch implements all steps except 4, where it uses a modified Similarity \\nclass instead. Thus it is fully functional, but not yet ready for commit.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321971\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321971&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321971\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321971_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321971_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/05 20:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-02-18T20:33:09+0000\'\u003e18\\/Feb\\/05 20:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=14312)\u003cbr\\/\u003e\\nNew patch based on the discussion on lucene-dev (complete)\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is a complete version, from my point of view ready for prime time.\u003c\\/p\u003e\\n\\n\u003cp\u003eNow a query can be \'frozen\'. A frozen query always returns the most\u003cbr\\/\u003e\\nrecently created Weight when calling Query.weight().\u003c\\/p\u003e\\n\\n\u003cp\u003eMultiSearcher query processing is now done in the following steps:\u003cbr\\/\u003e\\n   1. rewrite query\u003cbr\\/\u003e\\n   2. extract necessary terms\u003cbr\\/\u003e\\n   3. collect dfs for these terms from the Searchables\u003cbr\\/\u003e\\n   4. create query weights using aggregate dfs and \u003cb\u003efreeze query\u003c\\/b\u003e.\u003cbr\\/\u003e\\n   5. distribute weighted and frozen query to Searchables\u003cbr\\/\u003e\\n   6. merge results\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321971_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321971_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/05 20:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-02-18T20:33:09+0000\'\u003e18\\/Feb\\/05 20:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=14312) \\nNew patch based on the discussion on lucene-dev (complete) \\n\\n This is a complete version, from my point of view ready for prime time. \\n\\n Now a query can be \'frozen\'. A frozen query always returns the most \\nrecently created Weight when calling Query.weight(). \\n\\n MultiSearcher query processing is now done in the following steps: \\n   1. rewrite query \\n   2. extract necessary terms \\n   3. collect dfs for these terms from the Searchables \\n   4. create query weights using aggregate dfs and  freeze query . \\n   5. distribute weighted and frozen query to Searchables \\n   6. merge results              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321972\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321972&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321972\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003cspan class=\\\"user-hover user-avatar\\\" rel=\\\"cutting@apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10453\\\" alt=\\\"cutting@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e cutting@apache.org\u003c\\/span\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321972_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/05 02:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-02-22T02:49:14+0000\'\u003e22\\/Feb\\/05 02:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis looks good.  Thanks!\u003c\\/p\u003e\\n\\n\u003cp\u003eA few comments:\u003c\\/p\u003e\\n\\n\u003cp\u003eOrignally there was no Weight in Lucene, only Query and Scorer.  Weight was\u003cbr\\/\u003e\\nadded in order to make it so that searching did not modify a Query, so that a\u003cbr\\/\u003e\\nQuery instance could be reused.  Searcher-dependent state of the query is meant\u003cbr\\/\u003e\\nto reside in the Weight.  IndexReader dependent state resides in the Scorer. \u003cbr\\/\u003e\\nYour \\\"freezing\\\" a query violates this.  Can\'t we create the weight once in\u003cbr\\/\u003e\\nSearcher.search?\u003c\\/p\u003e\\n\\n\u003cp\u003eCachedDfSource does not need to be public does it?\u003c\\/p\u003e\\n\\n\u003cp\u003eWe need to think about back-compatibliity.  Folks have implementations of Query,\u003cbr\\/\u003e\\nWeight, Similarity and Scorer.  So, when a public API changes we need to\u003cbr\\/\u003e\\ndeprecate, not remove, old methods, and try hard to make the old version still\u003cbr\\/\u003e\\nwork.  So, for example, we need to figure out how to handle the case where folks\u003cbr\\/\u003e\\nhave implemented the old Similarity.idf() methods.\u003c\\/p\u003e\\n\\n\u003cp\u003eYou no longer call Query.getSimilarity(Searcher).  That method permits queries\u003cbr\\/\u003e\\nto override the Searcher\'s Similarity implementation.  Is there a reason you do\u003cbr\\/\u003e\\nthis?  We should be computing DFs once for the whole query tree, but it should\u003cbr\\/\u003e\\nstill be possible to compute, e.g., IDFs independently per node, no?\u003c\\/p\u003e\\n\\n\u003cp\u003eI also wonder if, instead of adding DocFreqSource we could instead still use the\u003cbr\\/\u003e\\nSearcher.  MultiSearcher could keep an LRU cache of total doc freqs, implemented\u003cbr\\/\u003e\\nwith LinkedHashMap, for the last few thousand search terms.  That would be a far\u003cbr\\/\u003e\\nless invasive change, and hence less likely to break folks.  Or am I missing\u003cbr\\/\u003e\\nsomething?\u003c\\/p\u003e\\n\\n\u003cp\u003eSorry if I seem picky, but this is core stuff in Lucene and affects a lot of people.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003cspan class=\\\"user-hover user-avatar\\\" rel=\\\"cutting@apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10453\\\" alt=\\\"cutting@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e cutting@apache.org\u003c\\/span\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321972_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/05 02:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-02-22T02:49:14+0000\'\u003e22\\/Feb\\/05 02:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This looks good.  Thanks! \\n\\n A few comments: \\n\\n Orignally there was no Weight in Lucene, only Query and Scorer.  Weight was \\nadded in order to make it so that searching did not modify a Query, so that a \\nQuery instance could be reused.  Searcher-dependent state of the query is meant \\nto reside in the Weight.  IndexReader dependent state resides in the Scorer.  \\nYour \\\"freezing\\\" a query violates this.  Can\'t we create the weight once in \\nSearcher.search? \\n\\n CachedDfSource does not need to be public does it? \\n\\n We need to think about back-compatibliity.  Folks have implementations of Query, \\nWeight, Similarity and Scorer.  So, when a public API changes we need to \\ndeprecate, not remove, old methods, and try hard to make the old version still \\nwork.  So, for example, we need to figure out how to handle the case where folks \\nhave implemented the old Similarity.idf() methods. \\n\\n You no longer call Query.getSimilarity(Searcher).  That method permits queries \\nto override the Searcher\'s Similarity implementation.  Is there a reason you do \\nthis?  We should be computing DFs once for the whole query tree, but it should \\nstill be possible to compute, e.g., IDFs independently per node, no? \\n\\n I also wonder if, instead of adding DocFreqSource we could instead still use the \\nSearcher.  MultiSearcher could keep an LRU cache of total doc freqs, implemented \\nwith LinkedHashMap, for the last few thousand search terms.  That would be a far \\nless invasive change, and hence less likely to break folks.  Or am I missing \\nsomething? \\n\\n Sorry if I seem picky, but this is core stuff in Lucene and affects a lot of people.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321973\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321973&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321973\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321973_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321973_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Feb\\/05 00:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-02-23T00:33:00+0000\'\u003e23\\/Feb\\/05 00:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=14344)\u003cbr\\/\u003e\\nNext version - sends weights instead of queries\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for the valuable feedback which has resulted in this new version. Now\u003cbr\\/\u003e\\nthe query freezing approach is avoided by sending weights to the searchables\u003cbr\\/\u003e\\ninstead of queries. Thus queries are still resusable, but the Searchable\u003cbr\\/\u003e\\ninterface had to be extended. Also, previous API and behavior modifications\u003cbr\\/\u003e\\nhave been reverted as far as possible.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321973_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321973_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Feb\\/05 00:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-02-23T00:33:00+0000\'\u003e23\\/Feb\\/05 00:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=14344) \\nNext version - sends weights instead of queries \\n\\n Thanks for the valuable feedback which has resulted in this new version. Now \\nthe query freezing approach is avoided by sending weights to the searchables \\ninstead of queries. Thus queries are still resusable, but the Searchable \\ninterface had to be extended. Also, previous API and behavior modifications \\nhave been reverted as far as possible.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321974\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321974&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321974\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003cspan class=\\\"user-hover user-avatar\\\" rel=\\\"cutting@apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10453\\\" alt=\\\"cutting@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e cutting@apache.org\u003c\\/span\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321974_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Feb\\/05 03:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-02-23T03:17:20+0000\'\u003e23\\/Feb\\/05 03:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis looks great to me!\u003c\\/p\u003e\\n\\n\u003cp\u003e+1\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks again for patiently working through this rather extensive change.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003cspan class=\\\"user-hover user-avatar\\\" rel=\\\"cutting@apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10453\\\" alt=\\\"cutting@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e cutting@apache.org\u003c\\/span\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321974_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Feb\\/05 03:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-02-23T03:17:20+0000\'\u003e23\\/Feb\\/05 03:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This looks great to me! \\n\\n +1 \\n\\n Thanks again for patiently working through this rather extensive change.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321975\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321975&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321975\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"otis@apache.org\\\" id=\\\"commentauthor_12321975_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=otis%40apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"otis@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Otis Gospodnetic\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321975_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Apr\\/05 11:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-05T11:31:57+0000\'\u003e05\\/Apr\\/05 11:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI applied this patch (2005-02-22 version) locally, but it doesn\'t compile as is.\u003cbr\\/\u003e\\n It looks like I need to add \\\"throws IOException\\\" to\u003cbr\\/\u003e\\nBooleanQuery.BooleanWeight2.createWeight(Searcher) methods, and also to\u003cbr\\/\u003e\\nMultiPhraseQuery.createWeight(Searcher) method.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt looks like I also need to modify TermQuery.TermWeight and add a searcher\u003cbr\\/\u003e\\ndeclaration (private Searcher searcher\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e, plus the searcher assignment to the\u003cbr\\/\u003e\\nconstructor (this.searcher = searcher).\u003c\\/p\u003e\\n\\n\u003cp\u003eAfter these 2-3 changes Lucene compile.  Are my changes OK?\u003c\\/p\u003e\\n\\n\u003cp\u003eUnfortunately, unit tests fail in a few places, and it looks like all failures\u003cbr\\/\u003e\\nhave to do with RemoteSearchable.  Re-reading the comments in this bug entry, it\u003cbr\\/\u003e\\nlooks like this was a known issue at one point, but Wolf noted the following on\u003cbr\\/\u003e\\n2004-11-15:\u003c\\/p\u003e\\n\\n\u003cp\u003e\\\"Both problems mentioned in my previous comment (thread-safety and remote\u003cbr\\/\u003e\\nsearcher compatibility) are solved by this patch. All test cases work\u003cbr\\/\u003e\\nunchanged with the exception of one test case which had been tweaked\u003cbr\\/\u003e\\npreviously due to the incorrect MultiSearcher and now works as expected\u003cbr\\/\u003e\\n(TestSort.testNormalizedScores()).\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eThis sounds like tests involving RemoteSearchable should pass now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"otis@apache.org\\\" id=\\\"commentauthor_12321975_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=otis%40apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"otis@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Otis Gospodnetic\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321975_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Apr\\/05 11:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-05T11:31:57+0000\'\u003e05\\/Apr\\/05 11:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I applied this patch (2005-02-22 version) locally, but it doesn\'t compile as is. \\n It looks like I need to add \\\"throws IOException\\\" to \\nBooleanQuery.BooleanWeight2.createWeight(Searcher) methods, and also to \\nMultiPhraseQuery.createWeight(Searcher) method. \\n\\n It looks like I also need to modify TermQuery.TermWeight and add a searcher \\ndeclaration (private Searcher searcher , plus the searcher assignment to the \\nconstructor (this.searcher = searcher). \\n\\n After these 2-3 changes Lucene compile.  Are my changes OK? \\n\\n Unfortunately, unit tests fail in a few places, and it looks like all failures \\nhave to do with RemoteSearchable.  Re-reading the comments in this bug entry, it \\nlooks like this was a known issue at one point, but Wolf noted the following on \\n2004-11-15: \\n\\n \\\"Both problems mentioned in my previous comment (thread-safety and remote \\nsearcher compatibility) are solved by this patch. All test cases work \\nunchanged with the exception of one test case which had been tweaked \\npreviously due to the incorrect MultiSearcher and now works as expected \\n(TestSort.testNormalizedScores()).\\\" \\n\\n This sounds like tests involving RemoteSearchable should pass now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321976\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321976&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321976\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"otis@apache.org\\\" id=\\\"commentauthor_12321976_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=otis%40apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"otis@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Otis Gospodnetic\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321976_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Apr\\/05 11:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-05T11:50:20+0000\'\u003e05\\/Apr\\/05 11:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eChanging MultiSearcher to implement Serializable makes all unit tests pass again.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll wait a bit more before committing this in order to give people time to comment.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"otis@apache.org\\\" id=\\\"commentauthor_12321976_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=otis%40apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"otis@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Otis Gospodnetic\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321976_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Apr\\/05 11:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-05T11:50:20+0000\'\u003e05\\/Apr\\/05 11:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Changing MultiSearcher to implement Serializable makes all unit tests pass again. \\n\\n I\'ll wait a bit more before committing this in order to give people time to comment.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321977\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321977&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321977\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12321977_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321977_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Apr\\/05 01:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-06T01:03:34+0000\'\u003e06\\/Apr\\/05 01:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e(In reply to comment #13) \u003cbr\\/\u003e\\n&gt; I applied this patch (2005-02-22 version) locally, but it doesn\'t compile as \u003cbr\\/\u003e\\nis. \u003cbr\\/\u003e\\n&gt;  It looks like I need to add \\\"throws IOException\\\" to \u003cbr\\/\u003e\\n&gt; BooleanQuery.BooleanWeight2.createWeight(Searcher) methods, and also to \u003cbr\\/\u003e\\n&gt; MultiPhraseQuery.createWeight(Searcher) method. \u003c\\/p\u003e\\n\\n\u003cp\u003eThat should be no problem for BooleanWeight2.createWeight(Searcher). \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; It looks like I also need to modify TermQuery.TermWeight and add a searcher \u003cbr\\/\u003e\\n&gt; declaration (private Searcher searcher\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e, plus the searcher assignment to the \u003cbr\\/\u003e\\n&gt; constructor (this.searcher = searcher). \u003cbr\\/\u003e\\n&gt;  \u003cbr\\/\u003e\\n&gt; After these 2-3 changes Lucene compile.  Are my changes OK? \u003c\\/p\u003e\\n\\n\u003cp\u003eI think so. \u003c\\/p\u003e\\n\\n\u003cp\u003eRegards, \u003cbr\\/\u003e\\nPaul Elschot \u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12321977_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321977_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Apr\\/05 01:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-06T01:03:34+0000\'\u003e06\\/Apr\\/05 01:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    (In reply to comment #13)  \\n&gt; I applied this patch (2005-02-22 version) locally, but it doesn\'t compile as  \\nis.  \\n&gt;  It looks like I need to add \\\"throws IOException\\\" to  \\n&gt; BooleanQuery.BooleanWeight2.createWeight(Searcher) methods, and also to  \\n&gt; MultiPhraseQuery.createWeight(Searcher) method.  \\n\\n That should be no problem for BooleanWeight2.createWeight(Searcher).  \\n\\n &gt; It looks like I also need to modify TermQuery.TermWeight and add a searcher  \\n&gt; declaration (private Searcher searcher , plus the searcher assignment to the  \\n&gt; constructor (this.searcher = searcher).  \\n&gt;   \\n&gt; After these 2-3 changes Lucene compile.  Are my changes OK?  \\n\\n I think so.  \\n\\n Regards,  \\nPaul Elschot  \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321978\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321978&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321978\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321978_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321978_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Apr\\/05 01:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-06T01:16:45+0000\'\u003e06\\/Apr\\/05 01:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI made these comments last night, but somehow they aren\'t here.  Sorry if a\u003cbr\\/\u003e\\nduplicate pops up in the wrong place somewhere...\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t think all of the changes are correct and feel we need Wolf to comment on\u003cbr\\/\u003e\\nthis as his message states that he ran the unit tests successfully on his code\u003cbr\\/\u003e\\nas submitted.  Specifically, it looks to me like:\u003cbr\\/\u003e\\n  1.  The additions of throws IOException to Weights are correct, and due to new\u003cbr\\/\u003e\\nWeights added in parallel to Wolf\'s work.\u003cbr\\/\u003e\\n  2.  I do not believe adding the searcher field back to TermWeight is correct.\u003cbr\\/\u003e\\n Wolf explicitly pulled this field out and replaced all references to it with\u003cbr\\/\u003e\\nreferences to similarity or idf.  What caused the field to be added back?\u003cbr\\/\u003e\\n  3.  Making MultiSearcher implement Serializable seems strange &#8211; I don\'t\u003cbr\\/\u003e\\nunderstand why in the protocol this would be requried.  It does not seem right.\u003c\\/p\u003e\\n\\n\u003cp\u003eChuck\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321978_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321978_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Apr\\/05 01:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-06T01:16:45+0000\'\u003e06\\/Apr\\/05 01:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I made these comments last night, but somehow they aren\'t here.  Sorry if a \\nduplicate pops up in the wrong place somewhere... \\n\\n I don\'t think all of the changes are correct and feel we need Wolf to comment on \\nthis as his message states that he ran the unit tests successfully on his code \\nas submitted.  Specifically, it looks to me like: \\n  1.  The additions of throws IOException to Weights are correct, and due to new \\nWeights added in parallel to Wolf\'s work. \\n  2.  I do not believe adding the searcher field back to TermWeight is correct. \\n Wolf explicitly pulled this field out and replaced all references to it with \\nreferences to similarity or idf.  What caused the field to be added back? \\n  3.  Making MultiSearcher implement Serializable seems strange &#8211; I don\'t \\nunderstand why in the protocol this would be requried.  It does not seem right. \\n\\n Chuck              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321979\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321979&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321979\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321979_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321979_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Apr\\/05 03:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-06T03:34:13+0000\'\u003e06\\/Apr\\/05 03:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is what I think happened and, if so, the correct fix:\u003cbr\\/\u003e\\n  1.  MultiPhraseQuery and the new BooleanQuery were both added in parallel to\u003cbr\\/\u003e\\nWolf\'s work.  We now have a merge conflict.\u003cbr\\/\u003e\\n  2.  The addition of the throws IOException to these two classes is now\u003cbr\\/\u003e\\nrequired for Weights, and so the change is correct.\u003cbr\\/\u003e\\n  3.  The new protocol for Weight\'s is to NOT have a searcher field.  Instead,\u003cbr\\/\u003e\\nthey should keep a Similarity field.  Just like the other Weight\'s that Wolf\'s\u003cbr\\/\u003e\\npatch addresses, these two classes only use the searcher field to access the\u003cbr\\/\u003e\\nSimilarity and\\/or the idf.  MultiPhraseQuery, which needs the idf, already has\u003cbr\\/\u003e\\nan idf field.  So, identical to Wolf\'s other changes it is straightforward to\u003cbr\\/\u003e\\nmodify these two classes to eliminate the searcher field.\u003cbr\\/\u003e\\n  4.  Eliminating the searcher field will elimninate the need for MultiSearcher\u003cbr\\/\u003e\\nto be Serializable, therefore retracting that change.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that\'s right, and that the best fix is too conform the new Weights to\u003cbr\\/\u003e\\nthe new protocol for MultiSearcher compatibility.  I\'ve also sent a message\u003cbr\\/\u003e\\ndirectly to Wolf asking him to review this.\u003c\\/p\u003e\\n\\n\u003cp\u003eChuck\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321979_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321979_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Apr\\/05 03:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-06T03:34:13+0000\'\u003e06\\/Apr\\/05 03:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is what I think happened and, if so, the correct fix: \\n  1.  MultiPhraseQuery and the new BooleanQuery were both added in parallel to \\nWolf\'s work.  We now have a merge conflict. \\n  2.  The addition of the throws IOException to these two classes is now \\nrequired for Weights, and so the change is correct. \\n  3.  The new protocol for Weight\'s is to NOT have a searcher field.  Instead, \\nthey should keep a Similarity field.  Just like the other Weight\'s that Wolf\'s \\npatch addresses, these two classes only use the searcher field to access the \\nSimilarity and\\/or the idf.  MultiPhraseQuery, which needs the idf, already has \\nan idf field.  So, identical to Wolf\'s other changes it is straightforward to \\nmodify these two classes to eliminate the searcher field. \\n  4.  Eliminating the searcher field will elimninate the need for MultiSearcher \\nto be Serializable, therefore retracting that change. \\n\\n I think that\'s right, and that the best fix is too conform the new Weights to \\nthe new protocol for MultiSearcher compatibility.  I\'ve also sent a message \\ndirectly to Wolf asking him to review this. \\n\\n Chuck              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321980\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321980&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321980\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321980_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321980_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Apr\\/05 04:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-06T04:09:02+0000\'\u003e06\\/Apr\\/05 04:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOne more note on this.  I think conforming to the new Weight protocol, i.e.\u003cbr\\/\u003e\\neliminating the searcher field from BooleanWeight, BooleanWeight2, and\u003cbr\\/\u003e\\nMultiPhraseWeight, is quite important.  This is because the Weight is now sent\u003cbr\\/\u003e\\nto RemoteSearchables instead of the Query.  If Weights have a searcher field,\u003cbr\\/\u003e\\nthen this could be quite expensive.\u003c\\/p\u003e\\n\\n\u003cp\u003eChuck\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321980_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321980_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Apr\\/05 04:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-06T04:09:02+0000\'\u003e06\\/Apr\\/05 04:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    One more note on this.  I think conforming to the new Weight protocol, i.e. \\neliminating the searcher field from BooleanWeight, BooleanWeight2, and \\nMultiPhraseWeight, is quite important.  This is because the Weight is now sent \\nto RemoteSearchables instead of the Query.  If Weights have a searcher field, \\nthen this could be quite expensive. \\n\\n Chuck              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321981\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321981&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321981\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12321981_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321981_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Apr\\/05 06:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-06T06:49:00+0000\'\u003e06\\/Apr\\/05 06:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e(In reply to comment #17) \u003cbr\\/\u003e\\n&gt; Here is what I think happened and, if so, the correct fix: \u003cbr\\/\u003e\\n&gt;   1.  MultiPhraseQuery and the new BooleanQuery were both added in parallel \u003cbr\\/\u003e\\nto \u003cbr\\/\u003e\\n&gt; Wolf\'s work.  We now have a merge conflict. \u003cbr\\/\u003e\\n&gt;   2.  The addition of the throws IOException to these two classes is now \u003cbr\\/\u003e\\n&gt; required for Weights, and so the change is correct. \u003c\\/p\u003e\\n\\n\u003cp\u003eIt could well be that there is a conflict with the new BooleanQuery and \u003cbr\\/\u003e\\nBooleanScorer. Given the backward compatibility goal of this new code, I\'d be \u003cbr\\/\u003e\\nhappy to resolve that possible conflict. \u003c\\/p\u003e\\n\\n\u003cp\u003eOver the last months, I have kept all the changes to BooleanQuery\\/BooleanScorer \u003cbr\\/\u003e\\nin a local working copy, and I had only one or two conflicts. These were \u003cbr\\/\u003e\\nvery easy to resolve. Bugzilla works well in this respect: all changes have \u003cbr\\/\u003e\\nsome comments associated with them, and, from what I have read so far, \u003cbr\\/\u003e\\nthere are no conflicting intentions for the functionality of this code. \u003cbr\\/\u003e\\nSo, please go ahead as you see fit for the MultiSearcher. I think you  \u003cbr\\/\u003e\\ncan safely ignore evt. conflicts with new code for BooleanQuery\\/BooleanScorer. \u003c\\/p\u003e\\n\\n\u003cp\u003eRegards, \u003cbr\\/\u003e\\nPaul Elschot \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12321981_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321981_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Apr\\/05 06:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-06T06:49:00+0000\'\u003e06\\/Apr\\/05 06:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    (In reply to comment #17)  \\n&gt; Here is what I think happened and, if so, the correct fix:  \\n&gt;   1.  MultiPhraseQuery and the new BooleanQuery were both added in parallel  \\nto  \\n&gt; Wolf\'s work.  We now have a merge conflict.  \\n&gt;   2.  The addition of the throws IOException to these two classes is now  \\n&gt; required for Weights, and so the change is correct.  \\n\\n It could well be that there is a conflict with the new BooleanQuery and  \\nBooleanScorer. Given the backward compatibility goal of this new code, I\'d be  \\nhappy to resolve that possible conflict.  \\n\\n Over the last months, I have kept all the changes to BooleanQuery\\/BooleanScorer  \\nin a local working copy, and I had only one or two conflicts. These were  \\nvery easy to resolve. Bugzilla works well in this respect: all changes have  \\nsome comments associated with them, and, from what I have read so far,  \\nthere are no conflicting intentions for the functionality of this code.  \\nSo, please go ahead as you see fit for the MultiSearcher. I think you   \\ncan safely ignore evt. conflicts with new code for BooleanQuery\\/BooleanScorer.  \\n\\n Regards,  \\nPaul Elschot               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321982\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321982&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321982\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321982_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321982_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Apr\\/05 01:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-07T01:41:26+0000\'\u003e07\\/Apr\\/05 01:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSorry for the late reply; I\'m currently traveling and had no Internet access.\u003cbr\\/\u003e\\nChucks analysis is completely correct. Serializing a (Multi-)Searcher doesn\'t\u003cbr\\/\u003e\\nmake sense, instead the Similarity has to be passed with the weight.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat I don\'t understand is why the patch failed. I checked the diff file again,\u003cbr\\/\u003e\\nand the necessary changes appear to be in it. For example, line 89 of the diff\u003cbr\\/\u003e\\ncontains the addition of \'throws IOException\' to BooleanWeight2.createWeight(),\u003cbr\\/\u003e\\nand the corresponding change for MultiPhraseQueryWeight is on line 346. The\u003cbr\\/\u003e\\nchanges required for TermWeight are at starting at line 1187. Could you please\u003cbr\\/\u003e\\ncheck if everything went ok when applying the patch, by comparing manually to\u003cbr\\/\u003e\\nthe diff file when errors occur somewhere?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321982_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321982_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Apr\\/05 01:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-07T01:41:26+0000\'\u003e07\\/Apr\\/05 01:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Sorry for the late reply; I\'m currently traveling and had no Internet access. \\nChucks analysis is completely correct. Serializing a (Multi-)Searcher doesn\'t \\nmake sense, instead the Similarity has to be passed with the weight. \\n\\n What I don\'t understand is why the patch failed. I checked the diff file again, \\nand the necessary changes appear to be in it. For example, line 89 of the diff \\ncontains the addition of \'throws IOException\' to BooleanWeight2.createWeight(), \\nand the corresponding change for MultiPhraseQueryWeight is on line 346. The \\nchanges required for TermWeight are at starting at line 1187. Could you please \\ncheck if everything went ok when applying the patch, by comparing manually to \\nthe diff file when errors occur somewhere?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321983\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321983&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321983\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"otis@apache.org\\\" id=\\\"commentauthor_12321983_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=otis%40apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"otis@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Otis Gospodnetic\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321983_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/05 12:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-20T12:13:46+0000\'\u003e20\\/Apr\\/05 12:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=14767)\u003cbr\\/\u003e\\nlocal diffs that I\'ll apply\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is what the final diff is like.  I\'ll apply it shortly.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"otis@apache.org\\\" id=\\\"commentauthor_12321983_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=otis%40apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"otis@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Otis Gospodnetic\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321983_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/05 12:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-20T12:13:46+0000\'\u003e20\\/Apr\\/05 12:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=14767) \\nlocal diffs that I\'ll apply \\n\\n This is what the final diff is like.  I\'ll apply it shortly.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321984\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321984&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321984\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"otis@apache.org\\\" id=\\\"commentauthor_12321984_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=otis%40apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"otis@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Otis Gospodnetic\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321984_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/05 13:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-20T13:01:45+0000\'\u003e20\\/Apr\\/05 13:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted, unit tests pass.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"otis@apache.org\\\" id=\\\"commentauthor_12321984_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=otis%40apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"otis@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Otis Gospodnetic\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321984_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/05 13:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-20T13:01:45+0000\'\u003e20\\/Apr\\/05 13:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed, unit tests pass.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321985\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321985&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321985\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321985_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321985_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Apr\\/05 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-22T17:08:05+0000\'\u003e22\\/Apr\\/05 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=14784)\u003cbr\\/\u003e\\nAdditional patch for deprecation issue\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch removes all references to deprecated methods in Searchable,\u003cbr\\/\u003e\\nand fixes some other minor issues.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321985_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321985_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Apr\\/05 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-22T17:08:05+0000\'\u003e22\\/Apr\\/05 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=14784) \\nAdditional patch for deprecation issue \\n\\n This patch removes all references to deprecated methods in Searchable, \\nand fixes some other minor issues.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321986\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321986&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321986\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003cspan class=\\\"user-hover user-avatar\\\" rel=\\\"cutting@apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10453\\\" alt=\\\"cutting@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e cutting@apache.org\u003c\\/span\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321986_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/05 05:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-26T05:06:47+0000\'\u003e26\\/Apr\\/05 05:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am now confused by the changes in Searcher.java.  Why is sometimes\u003cbr\\/\u003e\\nquery.weight(Searcher) called and other times query.createWeight()?  The latter\u003cbr\\/\u003e\\nis meant only to only construct a Weight, and the former to construct and\u003cbr\\/\u003e\\ninitialize it.  Shouldn\'t it always be initialized?\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, it was difficult to apply your patch.  It uses CRLF instead of LF, which\u003cbr\\/\u003e\\nconfuses patch on Linux.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003cspan class=\\\"user-hover user-avatar\\\" rel=\\\"cutting@apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10453\\\" alt=\\\"cutting@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e cutting@apache.org\u003c\\/span\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321986_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/05 05:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-26T05:06:47+0000\'\u003e26\\/Apr\\/05 05:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am now confused by the changes in Searcher.java.  Why is sometimes \\nquery.weight(Searcher) called and other times query.createWeight()?  The latter \\nis meant only to only construct a Weight, and the former to construct and \\ninitialize it.  Shouldn\'t it always be initialized? \\n\\n Also, it was difficult to apply your patch.  It uses CRLF instead of LF, which \\nconfuses patch on Linux.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321987\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321987&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321987\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321987_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321987_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/05 16:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-26T16:34:50+0000\'\u003e26\\/Apr\\/05 16:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=14841)\u003cbr\\/\u003e\\nAdditional patch for deprecation issue - corrected\u003c\\/p\u003e\\n\\n\u003cp\u003eThis was just an oversight. I\'ve replaced the remaining calls to query.weight()\u003cbr\\/\u003e\\nin Searcher with Searcher.createWeight() and corrected that method so that it\u003cbr\\/\u003e\\ncalls query.weight() now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321987_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321987_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/05 16:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-26T16:34:50+0000\'\u003e26\\/Apr\\/05 16:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=14841) \\nAdditional patch for deprecation issue - corrected \\n\\n This was just an oversight. I\'ve replaced the remaining calls to query.weight() \\nin Searcher with Searcher.createWeight() and corrected that method so that it \\ncalls query.weight() now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321988\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321988&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321988\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003cspan class=\\\"user-hover user-avatar\\\" rel=\\\"cutting@apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10453\\\" alt=\\\"cutting@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e cutting@apache.org\u003c\\/span\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321988_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/05 04:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-27T04:30:32+0000\'\u003e27\\/Apr\\/05 04:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have applied the deprecation patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe solution to my patch difficulties was to use \'patch -l -F 4\'.  This gets\u003cbr\\/\u003e\\naround the end-of-line issues.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks again, Wolf!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003cspan class=\\\"user-hover user-avatar\\\" rel=\\\"cutting@apache.org\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10453\\\" alt=\\\"cutting@apache.org\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e cutting@apache.org\u003c\\/span\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321988_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/05 04:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-27T04:30:32+0000\'\u003e27\\/Apr\\/05 04:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have applied the deprecation patch. \\n\\n The solution to my patch difficulties was to use \'patch -l -F 4\'.  This gets \\naround the end-of-line issues. \\n\\n Thanks again, Wolf!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321989\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321989&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321989\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321989_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321989_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/05 05:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-27T05:51:02+0000\'\u003e27\\/Apr\\/05 05:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=14846)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;PATCH&#93;\u003c\\/span\u003e Fix to Query.combine() method and all specializations\u003c\\/p\u003e\\n\\n\u003cp\u003eThis fixes the bugs in Query.combine() that were uncovered by the failing test\u003cbr\\/\u003e\\nin the Highlighter.  Only Query.combine() remains &#8211; all overrides in\u003cbr\\/\u003e\\nBooleanQuery, RangeQuery, MultiTermQuery and PrefixQuery are deleted.  I\u003cbr\\/\u003e\\nbelieve this fix is correct, robust realtive to possible user Query\u003cbr\\/\u003e\\nimplementations, and generates optimal queries for at least the cases that are\u003cbr\\/\u003e\\nbuilt-in to Lucene (query rewriting of MultTermQuery\'s and RangeQuery\'s).  This\u003cbr\\/\u003e\\nis more robust relative to possible user Query implementations and covers more\u003cbr\\/\u003e\\noptimizations cases than the version I sent via email last night.  With this\u003cbr\\/\u003e\\npatch, all Lucene and Highlighter tests pass (with the exception of the buggy\u003cbr\\/\u003e\\nTestSort.testNormalizedScores() which should be fixed by Wolf\'s patch).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321989_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321989_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/05 05:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-27T05:51:02+0000\'\u003e27\\/Apr\\/05 05:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=14846) \\n &#91;PATCH&#93;  Fix to Query.combine() method and all specializations \\n\\n This fixes the bugs in Query.combine() that were uncovered by the failing test \\nin the Highlighter.  Only Query.combine() remains &#8211; all overrides in \\nBooleanQuery, RangeQuery, MultiTermQuery and PrefixQuery are deleted.  I \\nbelieve this fix is correct, robust realtive to possible user Query \\nimplementations, and generates optimal queries for at least the cases that are \\nbuilt-in to Lucene (query rewriting of MultTermQuery\'s and RangeQuery\'s).  This \\nis more robust relative to possible user Query implementations and covers more \\noptimizations cases than the version I sent via email last night.  With this \\npatch, all Lucene and Highlighter tests pass (with the exception of the buggy \\nTestSort.testNormalizedScores() which should be fixed by Wolf\'s patch).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321990\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321990&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321990\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321990_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321990_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/05 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-27T19:03:13+0000\'\u003e27\\/Apr\\/05 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=14854)\u003cbr\\/\u003e\\nSlightly extended Fix to Query.combine()\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is an extension\\/modification of Chucks patch.\u003cbr\\/\u003e\\nBesides his changes, it contains more test cases (in TestMultiSearcherRanking)\u003cbr\\/\u003e\\nand minor additional modifications to make these tests work:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eif the resulting query consists of only one clause, return that clause\u003cbr\\/\u003e\\n  directly instead of wrapping it into a BooleanQuery.\u003c\\/li\u003e\\n\\t\u003cli\u003eBooleanQuery.equals doesn\'t take clause order into account anymore\u003cbr\\/\u003e\\nI also have rewritten the loop logic of Query.combine to use a flag instead \u003cbr\\/\u003e\\nof a labeled break, but this is more a matter of taste.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321990_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321990_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/05 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-27T19:03:13+0000\'\u003e27\\/Apr\\/05 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=14854) \\nSlightly extended Fix to Query.combine() \\n\\n This is an extension\\/modification of Chucks patch. \\nBesides his changes, it contains more test cases (in TestMultiSearcherRanking) \\nand minor additional modifications to make these tests work: \\n \\n\\t if the resulting query consists of only one clause, return that clause \\n  directly instead of wrapping it into a BooleanQuery. \\n\\t BooleanQuery.equals doesn\'t take clause order into account anymore \\nI also have rewritten the loop logic of Query.combine to use a flag instead  \\nof a labeled break, but this is more a matter of taste. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321991\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321991&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321991\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321991_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321991_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/05 00:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-28T00:15:53+0000\'\u003e28\\/Apr\\/05 00:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWolf\'s revisions to my changes to Query.combine() look fine.  The single-query\u003cbr\\/\u003e\\noptimization is good &#8211; my oversight to have not included it originally.  I\u003cbr\\/\u003e\\ndon\'t believe either of the other two changes is necessary, but they are correct:\u003cbr\\/\u003e\\n  1.  Using a flag instead of the labelled loop is a matter of style as Wolf\u003cbr\\/\u003e\\nsays, and it\'s a little less efficent (the biggest effect could be remedied by\u003cbr\\/\u003e\\none more if (splittable) to avoid unnecessarily copying the clauses of a\u003cbr\\/\u003e\\nBooleanQuery where coord is not disabled).\u003cbr\\/\u003e\\n  2.  Changing BooleanQuery equality to be independent of clause order is\u003cbr\\/\u003e\\nsemantically correct, although again it is a little less efficient.  It\'s only\u003cbr\\/\u003e\\npurpose is to stop a false-negative in the new tests.\u003c\\/p\u003e\\n\\n\u003cp\u003eRegarding additional test cases, it would be helpful to add the cases I was\u003cbr\\/\u003e\\nconcerned about, which are situations where a query can rewrite into different\u003cbr\\/\u003e\\nkinds of fundamental queries depending on the reader.  I believe the only case\u003cbr\\/\u003e\\nwhere this occurs with the built-in queries is with MultiTermQuery\'s and\u003cbr\\/\u003e\\nRangeQuery\'s (where the rewrite depends on how many query clauses are generated\u003cbr\\/\u003e\\nby each reader), and we have covered those cases.  The coord testing in\u003cbr\\/\u003e\\nQuery.combine() is designed to handle the case where some query rewrites into a\u003cbr\\/\u003e\\ndifferent kind of BooleanQuery (e.g., an AND), in some readers and not others. \u003cbr\\/\u003e\\nNothing tests this at present.  A single-term BooleanQuery OR could rewrite into\u003cbr\\/\u003e\\na BooleanQuery AND, but this would be independent of reader.\u003c\\/p\u003e\\n\\n\u003cp\u003eMany additional optimizations could be added.  It seems redundant to have\u003cbr\\/\u003e\\noptimizations here and in the rewrite mechanism.  Since we are down to just\u003cbr\\/\u003e\\nQuery.combine(), only called from one place, I think a better fix is to change\u003cbr\\/\u003e\\nMultiSearcher to pass the reader as well.  Then Query.combine() could construct\u003cbr\\/\u003e\\nthe straightforward BooleanQuery and rewrite it.  All the optimizations would\u003cbr\\/\u003e\\nthen go into a single place, the rewrite methods.  Wolf, what do you think of\u003cbr\\/\u003e\\nthat approach?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chuck@manawiz.com\\\" id=\\\"commentauthor_12321991_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chuck%40manawiz.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chuck@manawiz.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chuck Williams\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321991_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/05 00:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-04-28T00:15:53+0000\'\u003e28\\/Apr\\/05 00:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Wolf\'s revisions to my changes to Query.combine() look fine.  The single-query \\noptimization is good &#8211; my oversight to have not included it originally.  I \\ndon\'t believe either of the other two changes is necessary, but they are correct: \\n  1.  Using a flag instead of the labelled loop is a matter of style as Wolf \\nsays, and it\'s a little less efficent (the biggest effect could be remedied by \\none more if (splittable) to avoid unnecessarily copying the clauses of a \\nBooleanQuery where coord is not disabled). \\n  2.  Changing BooleanQuery equality to be independent of clause order is \\nsemantically correct, although again it is a little less efficient.  It\'s only \\npurpose is to stop a false-negative in the new tests. \\n\\n Regarding additional test cases, it would be helpful to add the cases I was \\nconcerned about, which are situations where a query can rewrite into different \\nkinds of fundamental queries depending on the reader.  I believe the only case \\nwhere this occurs with the built-in queries is with MultiTermQuery\'s and \\nRangeQuery\'s (where the rewrite depends on how many query clauses are generated \\nby each reader), and we have covered those cases.  The coord testing in \\nQuery.combine() is designed to handle the case where some query rewrites into a \\ndifferent kind of BooleanQuery (e.g., an AND), in some readers and not others.  \\nNothing tests this at present.  A single-term BooleanQuery OR could rewrite into \\na BooleanQuery AND, but this would be independent of reader. \\n\\n Many additional optimizations could be added.  It seems redundant to have \\noptimizations here and in the rewrite mechanism.  Since we are down to just \\nQuery.combine(), only called from one place, I think a better fix is to change \\nMultiSearcher to pass the reader as well.  Then Query.combine() could construct \\nthe straightforward BooleanQuery and rewrite it.  All the optimizations would \\nthen go into a single place, the rewrite methods.  Wolf, what do you think of \\nthat approach?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321992\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321992&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321992\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321992_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321992_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/05 16:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-21T16:44:30+0000\'\u003e21\\/Jun\\/05 16:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=15481)\u003cbr\\/\u003e\\nUpdated fix to Query.combine()\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is a slightly updated version of my previous patch, taking Chucks comments\u003cbr\\/\u003e\\ninto account and based on the current HEAD.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321992_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321992_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/05 16:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-21T16:44:30+0000\'\u003e21\\/Jun\\/05 16:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=15481) \\nUpdated fix to Query.combine() \\n\\n This is a slightly updated version of my previous patch, taking Chucks comments \\ninto account and based on the current HEAD.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321993\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321993&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321993\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321993_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321993_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/05 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-21T16:46:12+0000\'\u003e21\\/Jun\\/05 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eBug 35241 has been marked as a duplicate of this bug. ***\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321993_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321993_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/05 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-21T16:46:12+0000\'\u003e21\\/Jun\\/05 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t Bug 35241 has been marked as a duplicate of this bug. *** \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321994\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321994&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321994\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lucenebugs@danielnaber.de\\\" id=\\\"commentauthor_12321994_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lucenebugs%40danielnaber.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lucenebugs@danielnaber.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321994_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/05 06:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-22T06:08:33+0000\'\u003e22\\/Jun\\/05 06:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere might be one corner case that your change in equals doesn\'t get right \u003cbr\\/\u003e\\n(not tested): a query \\\"a b a\\\" (i.e. one clause occuring twice &#8211; doesn\'t make \u003cbr\\/\u003e\\nmuch sense, but has an influence on the result order) would equal \\\"a b b\\\", \u003cbr\\/\u003e\\nwouldn\'t it? Is that a problem? \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lucenebugs@danielnaber.de\\\" id=\\\"commentauthor_12321994_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lucenebugs%40danielnaber.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lucenebugs@danielnaber.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321994_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/05 06:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-22T06:08:33+0000\'\u003e22\\/Jun\\/05 06:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There might be one corner case that your change in equals doesn\'t get right  \\n(not tested): a query \\\"a b a\\\" (i.e. one clause occuring twice &#8211; doesn\'t make  \\nmuch sense, but has an influence on the result order) would equal \\\"a b b\\\",  \\nwouldn\'t it? Is that a problem?  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321995\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321995&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321995\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321995_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321995_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/05 18:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-22T18:12:00+0000\'\u003e22\\/Jun\\/05 18:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve started a separate thread on BooleanQuery semantics on the dev mailing\u003cbr\\/\u003e\\nlist. You could still apply the patch and omit the change to\u003cbr\\/\u003e\\nBooleanQuery.equals(). This just leads to warning outputs in\u003cbr\\/\u003e\\nTestMultiSearcherRanking.checkQuery(), and if you want to avoid these, simply\u003cbr\\/\u003e\\ndelete the last 10 lines of TestMultiSearcherRanking.checkQuery(). They contain\u003cbr\\/\u003e\\nan additional, not really necessary test.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321995_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321995_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/05 18:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-22T18:12:00+0000\'\u003e22\\/Jun\\/05 18:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve started a separate thread on BooleanQuery semantics on the dev mailing \\nlist. You could still apply the patch and omit the change to \\nBooleanQuery.equals(). This just leads to warning outputs in \\nTestMultiSearcherRanking.checkQuery(), and if you want to avoid these, simply \\ndelete the last 10 lines of TestMultiSearcherRanking.checkQuery(). They contain \\nan additional, not really necessary test.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321996\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321996&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321996\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lucenebugs@danielnaber.de\\\" id=\\\"commentauthor_12321996_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lucenebugs%40danielnaber.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lucenebugs@danielnaber.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321996_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jun\\/05 05:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-24T05:57:02+0000\'\u003e24\\/Jun\\/05 05:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks, I\'ve committed your patch, leaving out the change to equals() and not \u003cbr\\/\u003e\\nremoving mergeBooleanQueries() as that is a public method which someone might \u003cbr\\/\u003e\\nbe using. Also, could you please check if the test case is correct now? I \u003cbr\\/\u003e\\ncouldn\'t apply that part of your patch cleanly and something might have been \u003cbr\\/\u003e\\nbroken. \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lucenebugs@danielnaber.de\\\" id=\\\"commentauthor_12321996_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lucenebugs%40danielnaber.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lucenebugs@danielnaber.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321996_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jun\\/05 05:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-24T05:57:02+0000\'\u003e24\\/Jun\\/05 05:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks, I\'ve committed your patch, leaving out the change to equals() and not  \\nremoving mergeBooleanQueries() as that is a public method which someone might  \\nbe using. Also, could you please check if the test case is correct now? I  \\ncouldn\'t apply that part of your patch cleanly and something might have been  \\nbroken.  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321997\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321997&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321997\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321997_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321997_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jun\\/05 16:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-24T16:37:45+0000\'\u003e24\\/Jun\\/05 16:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for applying the patch. Everything is fine from my point of view, except\u003cbr\\/\u003e\\none minor issue: You are right that Query.mergeBooleanQueries() can\'t just be\u003cbr\\/\u003e\\nremoved, as it is public. However, I doubt if it is still useful. Could we mark\u003cbr\\/\u003e\\nit as deprecated, and suggest a call to super.combine() as replacement?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12321997_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321997_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jun\\/05 16:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-24T16:37:45+0000\'\u003e24\\/Jun\\/05 16:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for applying the patch. Everything is fine from my point of view, except \\none minor issue: You are right that Query.mergeBooleanQueries() can\'t just be \\nremoved, as it is public. However, I doubt if it is still useful. Could we mark \\nit as deprecated, and suggest a call to super.combine() as replacement?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321998\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321998&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321998\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lucenebugs@danielnaber.de\\\" id=\\\"commentauthor_12321998_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lucenebugs%40danielnaber.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lucenebugs@danielnaber.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321998_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jun\\/05 07:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-25T07:23:34+0000\'\u003e25\\/Jun\\/05 07:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eShould combine() maybe be static? Then deprecating mergeBooleanQueries() seems \u003cbr\\/\u003e\\nto be the obvious way to go. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lucenebugs@danielnaber.de\\\" id=\\\"commentauthor_12321998_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lucenebugs%40danielnaber.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lucenebugs@danielnaber.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321998_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jun\\/05 07:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-06-25T07:23:34+0000\'\u003e25\\/Jun\\/05 07:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Should combine() maybe be static? Then deprecating mergeBooleanQueries() seems  \\nto be the obvious way to go.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12321999\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12321999&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12321999\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lucenebugs@danielnaber.de\\\" id=\\\"commentauthor_12321999_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lucenebugs%40danielnaber.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lucenebugs@danielnaber.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321999_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jul\\/05 03:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-05T03:10:49+0000\'\u003e05\\/Jul\\/05 03:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOkay, I see that there are errors in the test cases if one makes \u003cbr\\/\u003e\\nQuery.combine() static. But does it have to be public? \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lucenebugs@danielnaber.de\\\" id=\\\"commentauthor_12321999_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lucenebugs%40danielnaber.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lucenebugs@danielnaber.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel Naber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12321999_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jul\\/05 03:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-05T03:10:49+0000\'\u003e05\\/Jul\\/05 03:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Okay, I see that there are errors in the test cases if one makes  \\nQuery.combine() static. But does it have to be public?               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322000\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-295?focusedCommentId=12322000&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322000\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12322000_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322000_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jul\\/05 18:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-05T18:19:43+0000\'\u003e05\\/Jul\\/05 18:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCurrently, Query.combine() is only called by MultiSearcher and a Highlighter\u003cbr\\/\u003e\\ntest case. If I understand it correctly, the intent of this method was to give\u003cbr\\/\u003e\\nQuery subclasses a hook to modify the combination algorithm. This hook is not\u003cbr\\/\u003e\\nused by Query subclasses which are part of the Lucene distribution, and I would\u003cbr\\/\u003e\\nbe very astonished if someone used it outside of Lucene. Such an implementation\u003cbr\\/\u003e\\nwould break now anyway, because BooleanQueries are only handled correctly in the\u003cbr\\/\u003e\\nnew Query.combine[] method, but not in mergeBooleanQueries() (which\u003cbr\\/\u003e\\nreimplementations are supposed to call as helper method).\u003c\\/p\u003e\\n\\n\u003cp\u003eIMHO the cleanest solution would be to remove combine() and\u003cbr\\/\u003e\\nmergeBooleanQueries() from Query and move the query combination logic to\u003cbr\\/\u003e\\nMultiSearcher. Of course, that would be an incompatible API change, and we can\'t\u003cbr\\/\u003e\\nbe 100% sure that no one needs the combine() hook. On the other hand, we now\u003cbr\\/\u003e\\nhave useless code in mergeBooleanQueries() and code which is only used by\u003cbr\\/\u003e\\nMultiSearcher in combine(), and that also isn\'t a desirable situation.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"siberski@learninglab.de\\\" id=\\\"commentauthor_12322000_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=siberski%40learninglab.de\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"siberski@learninglab.de\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Wolf Siberski\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322000_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jul\\/05 18:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-05T18:19:43+0000\'\u003e05\\/Jul\\/05 18:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Currently, Query.combine() is only called by MultiSearcher and a Highlighter \\ntest case. If I understand it correctly, the intent of this method was to give \\nQuery subclasses a hook to modify the combination algorithm. This hook is not \\nused by Query subclasses which are part of the Lucene distribution, and I would \\nbe very astonished if someone used it outside of Lucene. Such an implementation \\nwould break now anyway, because BooleanQueries are only handled correctly in the \\nnew Query.combine[] method, but not in mergeBooleanQueries() (which \\nreimplementations are supposed to call as helper method). \\n\\n IMHO the cleanest solution would be to remove combine() and \\nmergeBooleanQueries() from Query and move the query combination logic to \\nMultiSearcher. Of course, that would be an incompatible API change, and we can\'t \\nbe 100% sure that no one needs the combine() hook. On the other hand, we now \\nhave useless code in mergeBooleanQueries() and code which is only used by \\nMultiSearcher in combine(), and that also isn\'t a desirable situation.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310110";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310110&amp;avatarId=10061\\\" alt=\\\"Lucene - Core\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\"\u003eLucene - Core\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520241821297"> 
    <input type="hidden" title="jira.request.server.time" value="191"> 
    <input type="hidden" title="jira.request.id" value="563x94479202x2"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="4"> 
    <input type="hidden" title="db.reads.time.in.ms" value="25"> 
    <input type="hidden" title="db.conns.time.in.ms" value="33"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 563x94479202x2
	          REQUEST TIMESTAMP : [05/Mar/2018:09:23:41 +0000]
	               REQUEST TIME : 0.1910
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 4

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=16, elapsedTotal=25292330, elapsedMin=621240, elapsedMax=11067047, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=21, elapsedTotal=33803336, elapsedMin=645815, elapsedMax=11098535, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>