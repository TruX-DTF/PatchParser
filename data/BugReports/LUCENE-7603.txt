<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|c4329f3b8e588a29cfdea5133e98a7cc87fbb733|lout"> 
  <link rel="shortcut icon" href="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"sd.customer.profile.multi.languages\":true,\"sd.customer.portal.transitions\":true,\"sd.customer.portal.transitions.config\":true,\"sd.custom.email.stripping.rules\":false,\"sd.sla.lucene.issue.id.callback.performance\":true,\"sd.new.settings.sidebar.location\":true,\"sd.workload.report.paginator\":true,\"sd.experimental.portal.search.algorithm.default.1\":false,\"sd.customer.portal.help.center.agent.announcement\":true,\"sd.sla.improved.rendering\":false,\"sd.experimental.portal.search.algorithm.default.2\":false,\"sd.customer.feedback.validate.reporter.on.token\":true,\"sd.custom.email.notifications.utf8.csat.star\":true,\"sd.who.create.customers.by.email.setting\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.renderer.consider.variable.format\":true,\"sd.stats.event.tracking\":true,\"sd.password.helper.dialog\":true,\"sd.canned.responses\":false,\"sd.portal.help.center.customer.signup.secondary.email\":true,\"sd.custom.email.notifications.manage.language\":true,\"sd.use.search.by.permissions\":true,\"sd.slavalue.record.updated.date\":false,\"sd.report.custom.date.range\":false,\"sd.kb.article.helpfulness.report\":false,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"sd.custom.email.notifications.styling\":true,\"sd.workinghours.new.page.bulldog.1\":false,\"sd.customer.portal.two.step.login\":false,\"sd.automation.psmq.async.executor\":true,\"sd.customer.org.list.page.lazy.search\":true,\"sd.approval.requested.when.handler\":true,\"sd.request.type.field.rest.api.filtering.bugfix\":true,\"sd.automation.then.action.auto.answer.approval\":true,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"sla.will.only.be.paused.if.they.are.already.started\":true,\"sd.kb.comment.share.stats.collection\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"sd.customer.orgs.group.participants\":true,\"sd.portal.help.center.customer.signup\":true,\"sd.sla.agent.jql.security.restricted\":true,\"sd.test.feature.flag.x\":true,\"sd.test.feature.flag.y\":false,\"sd.cluster.safe.mail.channel.shutdown\":true,\"sd.email.channel.folders\":false,\"sd.email.analytics.open\":false,\"sd.kb.project.creation.create.link.space\":true,\"sd.workinghours.new.page\":false,\"sd.confluence.anonymous.permission.fix\":true,\"com.atlassian.jira.issuetable.draggable\":true,\"sd.customer.portal.project.agent.announcement\":true,\"sd.automation.audit.log\":true,\"jira.jql.suggestrecentfields\":false,\"sd.canned.responses.check.index.startup\":false,\"sd.new.project.templates\":true,\"sd.custom.email.notifications.custom.rules.simple.ui\":false,\"sd.custom.email.notifications.cut.over\":true,\"sd.dismiss.all.misconfiguration.warnings.setting\":true,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"sd.sla.configurations.export\":true,\"sd.canned.responses.variable.substitution\":true,\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"sd.customer.portal.prioties.per.project.fix\":true,\"jira.instrumentation.laas\":false,\"sd.kb.self.service.report\":false,\"sla.improved.request.handling\":true,\"sd.no.schedule.async.upgrade.tasks\":true,\"sd.kb.primary.nav\":true,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"sd.kb.issueview.panel.phase2\":true,\"sd.email.outsider.comments\":true,\"jira.create.linked.issue\":true,\"sd.kb.issueview.panel\":true,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"sd.approvals.light.weight\":false,\"sd.automation.then.webhook\":true,\"sd.respect.inline.edit.issue.off\":true,\"jira.jql.smartautoselectfirst\":false,\"sd.global.portal.search.atlassian.only.tracking\":false,\"sd.automation.if.condition.comment.primary.action\":true,\"jira.priorities.per.project\":true,\"sd.inline.noformat.renderer\":true,\"sd.customer.request.type.create.edit.screens\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/png,image/vnd.wap.wbmp,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.servicedesk.servicedesk-canned-responses-plugin:canned-responses-data-provider.data"]="{\"substitutionVariables\":{\"issue.summary\":\"Issue summary\",\"issue.description\":\"Issue description\",\"issue.key\":\"Issue key\",\"issue.reporter.name\":\"Issue reporter\",\"issue.resolution\":\"Issue resolution\",\"request.url\":\"Request URL\",\"request.status\":\"Request status\"}}";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-help-links.help-links"]="{\"help\":{\"email.settings\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"managing.queues\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+queues+for+your+team\",\"email.setup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"request.settings.help.bubble\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\",\"email.settings.suitablerequest\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email#Receivingrequestsbyemail-suitablerequest\",\"sla.import.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Importing+SLAs\",\"documentation.home\":\"https://docs.atlassian.com/jira/jsd-docs-039/JIRA+Service+Desk+Documentation\",\"default\":\"https://docs.atlassian.com/jira/jsd-docs-039/\",\"create.space.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base#serving-customers-with-a-knowledge-base-createpermission\",\"email.settings.troubleshooting\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+the+email+channel\",\"admin.notifications.config\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+service+desk+notifications\",\"troubleshoot.requesttype\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+request+types\",\"approvals.configuration\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+JIRA+Service+Desk+approvals\",\"setting.up.reports\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+service+desk+reports\",\"public.signup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+public+signup\",\"knowledge.base\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base\",\"resolve.permission.scheme.errors\":\"https://docs.atlassian.com/jira/jsd-docs-039/Resolving+permission+scheme+errors\",\"getting.started\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+with+JIRA+Service+Desk\",\"getting.started.agent\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+for+service+desk+agents\",\"invite.customers\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\"},\"kb\":{\"default\":\"https://confluence.atlassian.com/display/SDKB/\",\"troubleshooting.user.management.issues\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\",\"legacytransition\":\"https://confluence.atlassian.com/display/SDKB/Replacing+legacy+automatic+transitions+with+automation+rules\",\"umtroubleshoot\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\"}}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-base-url.base-url"]="\"https://issues.apache.org/jira\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"7504f5aed41ba0\"";
WRM._unparsedData["project-id"]="12310110";
WRM._unparsedData["project-key"]="\"LUCENE\"";
WRM._unparsedData["project-name"]="\"Lucene - Core\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310110";
WRM._unparsedData["projectKey"]="\"LUCENE\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/1a6b21131945f6f49ff48336b49ca3fe-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/d8484c9183f546511a8e336a8779bcd9-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d3b35d835f8f46fc3b53bb4db7f85158-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/71d42e74136d842a3ef4d5d136484843-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/95a4826c265852f4904f1e0e7300df68-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/944bb39eced1b35cfc7194aa02eb5a5a/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/5a8f0f8b8aa8f96a4f0f7e9e248d62f3-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="LUCENE-7603"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[LUCENE-7603] Support Graph Token Streams in QueryBuilder - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[LUCENE-7603] Support Graph Token Streams in QueryBuilder - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/LUCENE" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-7603">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310110" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Lucene - Core'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310110&amp;avatarId=10061"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/LUCENE">Lucene - Core</a></li>
                 <li><a class="issue-link" data-issue-key="LUCENE-7603" href="/jira/browse/LUCENE-7603" id="key-val" rel="13030610">LUCENE-7603</a></li>
                </ol>
                <h1 id="summary-val">Support Graph Token Streams in QueryBuilder</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-7603"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/LUCENE-7603/LUCENE-7603.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/LUCENE-7603/LUCENE-7603.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/LUCENE-7603/LUCENE-7603.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/LUCENE-7603/LUCENE-7603.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"> Improvement </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+fixVersion+%3D+6.4" title="6.4 Minor release after 6.3">6.4</a>, <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+fixVersion+%3D+7.0" title="7.0 First 7x release, major release after 6.6">7.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+component+%3D+%22core%2Fqueryparser%22" title="core/queryparser issues with QueryParser code under core">core/queryparser</a>, <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+component+%3D+%22core%2Fsearch%22" title="core/search issues with search code">core/search</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-13030610-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310120" class="item"> 
                     <div class="wrap"> 
                      <strong title="Lucene Fields" class="name">Lucene Fields:</strong> 
                      <div id="customfield_12310120-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310120-field"> 
                        <span>New</span>, 
                        <span>Patch Available</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310250" class="item"> 
                     <div class="wrap"> 
                      <strong title="Flags" class="name">Flags:</strong> 
                      <div id="customfield_12310250-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310250-field"> 
                        <span>Patch</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>With <a href="https://issues.apache.org/jira/browse/LUCENE-6664" class="external-link" rel="nofollow">LUCENE-6664</a> we can use multi-term synonyms query time. A "graph token stream" will be created which which is nothing more than using the position length attribute on stacked tokens to indicate how many positions a token should span. Currently the position length attribute on tokens is ignored during query parsing. This issue will add support for handling these graph token streams inside the QueryBuilder utility class used by query parsers.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="breaks">
                   breaks
                  </dt> 
                  <dd id="internal-13043903_12310050"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="LUCENE-7698: CommonGramsQueryFilter in the query analyzer chain breaks phrase queries"> <a href="/jira/browse/LUCENE-7698" data-issue-key="LUCENE-7698" class="issue-link link-title resolution">LUCENE-7698</a> <span class="link-summary">CommonGramsQueryFilter in the query analyzer chain breaks phrase queries</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/blocker.svg" width="16" height="16" title="Blocker - Blocks development and/or testing work, production could not run" alt="Blocker - Blocks development and/or testing work, production could not run"> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="links to">
                   links to
                  </dt> 
                  <dd id="remote-65460" data-remote-link-id="65460" class="
                        remote-link                                            "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/images/icons/generic_link_16.png" width="16" height="16" title="Web Link" alt="Web Link"> <span title="GitHub Pull Request #129"> <a href="https://github.com/apache/lucene-solr/pull/129" class="link-title">GitHub Pull Request #129</a> <span class="link-summary"></span> </span> </p> 
                    <ul class="link-snapshot"> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="remote-65621" data-remote-link-id="65621" class="
                        remote-link                                            "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/images/icons/generic_link_16.png" width="16" height="16" title="Web Link" alt="Web Link"> <span title="GitHub Pull Request #130"> <a href="https://github.com/apache/lucene-solr/pull/130" class="link-title">GitHub Pull Request #130</a> <span class="link-summary"></span> </span> </p> 
                    <ul class="link-snapshot"> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10453"></span></span> Unassigned </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_mattweber" rel="mattweber" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Matt Weber&quot;,&quot;emailAddress&quot;:&quot;matt@mattweber.org&quot;,&quot;username&quot;:&quot;mattweber&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mattweber"></span></span> Matt Weber </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">6</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="26/Dec/16 17:08"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2016-12-26T17:08:04+0000">26/Dec/16 17:08</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="17/Feb/17 09:59"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-02-17T09:59:30+0000">17/Feb/17 09:59</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="03/Jan/17 10:40"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-01-03T10:40:20+0000">03/Jan/17 10:40</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for n/a, Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-7603?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/LUCENE-7603?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-15778672\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15778672&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15778672\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15778672_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15778672_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/16 17:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-26T17:09:31+0000\'\u003e26\\/Dec\\/16 17:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGitHub user mattweber opened a pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-7603\\\" title=\\\"Support Graph Token Streams in QueryBuilder\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-7603\\\"\u003e\u003cdel\u003eLUCENE-7603\u003c\\/del\u003e\u003c\\/a\u003e: Support Graph Token Streams in QueryBuilder\u003c\\/p\u003e\\n\\n\u003cp\u003e    Adds support for handling graph token streams inside the\u003cbr\\/\u003e\\n    QueryBuilder util class used by query parsers.\u003c\\/p\u003e\\n\\n\u003cp\u003eYou can merge this pull request into a Git repository by running:\u003c\\/p\u003e\\n\\n\u003cp\u003e    $ git pull \u003ca href=\\\"https:\\/\\/github.com\\/mattweber\\/lucene-solr\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/mattweber\\/lucene-solr\u003c\\/a\u003e \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-7603\\\" title=\\\"Support Graph Token Streams in QueryBuilder\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-7603\\\"\u003e\u003cdel\u003eLUCENE-7603\u003c\\/del\u003e\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eAlternatively you can review and apply these changes as the patch at:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129.patch\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129.patch\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eTo close this pull request, make a commit to your master\\/trunk branch\u003cbr\\/\u003e\\nwith (at least) the following in the commit message:\u003c\\/p\u003e\\n\\n\u003cp\u003e    This closes #129\u003c\\/p\u003e\\n\\n\u003chr \\/\u003e\\n\u003cp\u003ecommit 568cb43d6af1aeef96cc7b6cabb7237de9058f36\u003cbr\\/\u003e\\nAuthor: Matt Weber &lt;matt@mattweber.org&gt;\u003cbr\\/\u003e\\nDate:   2016-12-26T15:50:58Z\u003c\\/p\u003e\\n\\n\u003cp\u003e    Support Graph Token Streams in QueryBuilder\u003c\\/p\u003e\\n\\n\u003cp\u003e    Adds support for handling graph token streams inside the\u003cbr\\/\u003e\\n    QueryBuilder util class used by query parsers.\u003c\\/p\u003e\\n\\n\u003chr \\/\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15778672_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15778672_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/16 17:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-26T17:09:31+0000\'\u003e26\\/Dec\\/16 17:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    GitHub user mattweber opened a pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129  \\n\\n       LUCENE-7603  : Support Graph Token Streams in QueryBuilder \\n\\n     Adds support for handling graph token streams inside the \\n    QueryBuilder util class used by query parsers. \\n\\n You can merge this pull request into a Git repository by running: \\n\\n     $ git pull  https:\\/\\/github.com\\/mattweber\\/lucene-solr    LUCENE-7603   \\n\\n Alternatively you can review and apply these changes as the patch at: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129.patch  \\n\\n To close this pull request, make a commit to your master\\/trunk branch \\nwith (at least) the following in the commit message: \\n\\n     This closes #129 \\n\\n \\n commit 568cb43d6af1aeef96cc7b6cabb7237de9058f36 \\nAuthor: Matt Weber &lt;matt@mattweber.org&gt; \\nDate:   2016-12-26T15:50:58Z \\n\\n     Support Graph Token Streams in QueryBuilder \\n\\n     Adds support for handling graph token streams inside the \\n    QueryBuilder util class used by query parsers. \\n\\n              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15779150\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15779150&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15779150\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_15779150_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15779150_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/16 23:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-26T23:03:09+0000\'\u003e26\\/Dec\\/16 23:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhoa, thanks \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mattweber\\\" class=\\\"user-hover\\\" rel=\\\"mattweber\\\"\u003eMatt Weber\u003c\\/a\u003e, I\'ll have a look, but likely not until I\'m back from vacation next year!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_15779150_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15779150_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/16 23:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-26T23:03:09+0000\'\u003e26\\/Dec\\/16 23:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Whoa, thanks  Matt Weber , I\'ll have a look, but likely not until I\'m back from vacation next year!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15782609\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15782609&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15782609\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_15782609_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15782609_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/16 10:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-28T10:36:31+0000\'\u003e28\\/Dec\\/16 10:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis change looks great; I think it\'s ready!  The new \u003ctt\u003eTestGraphTokenStreamFiniteStrings\u003c\\/tt\u003e is just missing the copyright header; I\'ll fix that before pushing.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe gist of the change is when query parsing detects that the analyzer produced a graph (any token with \u003ctt\u003ePositionLengthAttribute\u003c\\/tt\u003e &gt; 1), e.g. because \u003ctt\u003eSynonymGraphFilter\u003c\\/tt\u003e matched or inserted a multi-token synonym, then it creates a \u003ctt\u003eGraphQuery\u003c\\/tt\u003e which just a wrapper around sub-queries that traverse each path of the graph.\u003c\\/p\u003e\\n\\n\u003cp\u003eAt search time, this query is currently rewritten to \u003ctt\u003eBooleanQuery\u003c\\/tt\u003e with one clause for each path, but that is maybe something we can improve in the future, e.g. if it\'s a phrase query we could use \u003ctt\u003eTermAutomatonQuery\u003c\\/tt\u003e ... but we should tackle that separately.\u003c\\/p\u003e\\n\\n\u003cp\u003eAt long last, this (along with using \u003ctt\u003eSynonymGraphFilter\u003c\\/tt\u003e at search time) finally fixes the long-standing bugs around multi-token synonyms, e.g. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-4499\\\" title=\\\"Multi-word synonym filter (synonym expansion)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-4499\\\"\u003e\u003cdel\u003eLUCENE-4499\u003c\\/del\u003e\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-1622\\\" title=\\\"Multi-word synonym filter (synonym expansion at indexing time).\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-1622\\\"\u003e\u003cdel\u003eLUCENE-1622\u003c\\/del\u003e\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/lucidworks.com\\/blog\\/2014\\/07\\/12\\/solution-for-multi-term-synonyms-in-lucenesolr-using-the-auto-phrasing-tokenfilter\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/lucidworks.com\\/blog\\/2014\\/07\\/12\\/solution-for-multi-term-synonyms-in-lucenesolr-using-the-auto-phrasing-tokenfilter\u003c\\/a\u003e ...\u003c\\/p\u003e\\n\\n\u003cp\u003eThis will also be useful for other tokenizers\\/token filters as well, e.g. I\'m working on having \u003ctt\u003eWordDelimiterFilter\u003c\\/tt\u003e set position length correctly and Kuromoji (\u003ctt\u003eJapaneseTokenizer\u003c\\/tt\u003e) already produces graph tokens.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_15782609_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15782609_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/16 10:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-28T10:36:31+0000\'\u003e28\\/Dec\\/16 10:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This change looks great; I think it\'s ready!  The new  TestGraphTokenStreamFiniteStrings  is just missing the copyright header; I\'ll fix that before pushing. \\n\\n The gist of the change is when query parsing detects that the analyzer produced a graph (any token with  PositionLengthAttribute  &gt; 1), e.g. because  SynonymGraphFilter  matched or inserted a multi-token synonym, then it creates a  GraphQuery  which just a wrapper around sub-queries that traverse each path of the graph. \\n\\n At search time, this query is currently rewritten to  BooleanQuery  with one clause for each path, but that is maybe something we can improve in the future, e.g. if it\'s a phrase query we could use  TermAutomatonQuery  ... but we should tackle that separately. \\n\\n At long last, this (along with using  SynonymGraphFilter  at search time) finally fixes the long-standing bugs around multi-token synonyms, e.g.   LUCENE-4499  ,   LUCENE-1622  ,  https:\\/\\/lucidworks.com\\/blog\\/2014\\/07\\/12\\/solution-for-multi-term-synonyms-in-lucenesolr-using-the-auto-phrasing-tokenfilter  ... \\n\\n This will also be useful for other tokenizers\\/token filters as well, e.g. I\'m working on having  WordDelimiterFilter  set position length correctly and Kuromoji ( JapaneseTokenizer ) already produces graph tokens.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15783425\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15783425&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15783425\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15783425_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15783425_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/16 18:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-28T18:20:49+0000\'\u003e28\\/Dec\\/16 18:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mattweber commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    Rebased against master, added missing ASF header.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15783425_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15783425_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/16 18:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-28T18:20:49+0000\'\u003e28\\/Dec\\/16 18:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mattweber commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129  \\n\\n     Rebased against master, added missing ASF header.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15783452\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15783452&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15783452\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15783452_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15783452_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/16 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-28T18:35:48+0000\'\u003e28\\/Dec\\/16 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGitHub user mattweber opened a pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-7603\\\" title=\\\"Support Graph Token Streams in QueryBuilder\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-7603\\\"\u003e\u003cdel\u003eLUCENE-7603\u003c\\/del\u003e\u003c\\/a\u003e: branch_6x Support Graph Token Streams in QueryBuilder\u003c\\/p\u003e\\n\\n\u003cp\u003e    Adds support for handling graph token streams inside the\u003cbr\\/\u003e\\n    QueryBuilder util class used by query parsers.  This is a backport to `branch_6x`.\u003c\\/p\u003e\\n\\n\u003cp\u003eYou can merge this pull request into a Git repository by running:\u003c\\/p\u003e\\n\\n\u003cp\u003e    $ git pull \u003ca href=\\\"https:\\/\\/github.com\\/mattweber\\/lucene-solr\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/mattweber\\/lucene-solr\u003c\\/a\u003e \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-7603\\\" title=\\\"Support Graph Token Streams in QueryBuilder\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-7603\\\"\u003e\u003cdel\u003eLUCENE-7603\u003c\\/del\u003e\u003c\\/a\u003e_6x\u003c\\/p\u003e\\n\\n\u003cp\u003eAlternatively you can review and apply these changes as the patch at:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130.patch\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130.patch\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eTo close this pull request, make a commit to your master\\/trunk branch\u003cbr\\/\u003e\\nwith (at least) the following in the commit message:\u003c\\/p\u003e\\n\\n\u003cp\u003e    This closes #130\u003c\\/p\u003e\\n\\n\u003chr \\/\u003e\\n\u003cp\u003ecommit 7ab1638a3da002113e939b316d04ef9e58e38a0b\u003cbr\\/\u003e\\nAuthor: Matt Weber &lt;matt@mattweber.org&gt;\u003cbr\\/\u003e\\nDate:   2016-12-26T15:50:58Z\u003c\\/p\u003e\\n\\n\u003cp\u003e    Support Graph Token Streams in QueryBuilder\u003c\\/p\u003e\\n\\n\u003cp\u003e    Adds support for handling graph token streams inside the\u003cbr\\/\u003e\\n    QueryBuilder util class used by query parsers.\u003c\\/p\u003e\\n\\n\u003chr \\/\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15783452_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15783452_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/16 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-28T18:35:48+0000\'\u003e28\\/Dec\\/16 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    GitHub user mattweber opened a pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130  \\n\\n       LUCENE-7603  : branch_6x Support Graph Token Streams in QueryBuilder \\n\\n     Adds support for handling graph token streams inside the \\n    QueryBuilder util class used by query parsers.  This is a backport to `branch_6x`. \\n\\n You can merge this pull request into a Git repository by running: \\n\\n     $ git pull  https:\\/\\/github.com\\/mattweber\\/lucene-solr    LUCENE-7603  _6x \\n\\n Alternatively you can review and apply these changes as the patch at: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130.patch  \\n\\n To close this pull request, make a commit to your master\\/trunk branch \\nwith (at least) the following in the commit message: \\n\\n     This closes #130 \\n\\n \\n commit 7ab1638a3da002113e939b316d04ef9e58e38a0b \\nAuthor: Matt Weber &lt;matt@mattweber.org&gt; \\nDate:   2016-12-26T15:50:58Z \\n\\n     Support Graph Token Streams in QueryBuilder \\n\\n     Adds support for handling graph token streams inside the \\n    QueryBuilder util class used by query parsers. \\n\\n              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15783462\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15783462&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15783462\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mattweber\\\" id=\\\"commentauthor_15783462_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mattweber\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mattweber\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Matt Weber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15783462_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/16 18:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-28T18:40:05+0000\'\u003e28\\/Dec\\/16 18:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for reviewing \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e!  I have added the missing ASF header and moved the test into the proper package.  I have also backported this to 6x and opened a new PR for that.  The only difference in the 6x backport is disabling coord on the rewritten boolean query.  Some of the tests are slightly different as well due to the fact that splitOnWhitespace defaults to true in 6x.\u003c\\/p\u003e\\n\\n\u003cp\u003ePlease let me know if you need me to change anything!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mattweber\\\" id=\\\"commentauthor_15783462_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mattweber\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mattweber\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Matt Weber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15783462_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/16 18:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-28T18:40:05+0000\'\u003e28\\/Dec\\/16 18:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for reviewing  Michael McCandless !  I have added the missing ASF header and moved the test into the proper package.  I have also backported this to 6x and opened a new PR for that.  The only difference in the 6x backport is disabling coord on the rewritten boolean query.  Some of the tests are slightly different as well due to the fact that splitOnWhitespace defaults to true in 6x. \\n\\n Please let me know if you need me to change anything!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15785544\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15785544&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15785544\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15785544_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15785544_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/16 15:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-29T15:41:49+0000\'\u003e29\\/Dec\\/16 15:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user dsmiley commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94148633\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94148633\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -0,0 +1,294 @@\u003cbr\\/\u003e\\n    +\\/*\u003cbr\\/\u003e\\n    + * Licensed to the Apache Software Foundation (ASF) under one or more\u003cbr\\/\u003e\\n    + * contributor license agreements.  See the NOTICE file distributed with\u003cbr\\/\u003e\\n    + * this work for additional information regarding copyright ownership.\u003cbr\\/\u003e\\n    + * The ASF licenses this file to You under the Apache License, Version 2.0\u003cbr\\/\u003e\\n    + * (the \\\"License\\\"); you may not use this file except in compliance with\u003cbr\\/\u003e\\n    + * the License.  You may obtain a copy of the License at\u003cbr\\/\u003e\\n    + *\u003cbr\\/\u003e\\n    + *     \u003ca href=\\\"http:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0\u003c\\/a\u003e\u003cbr\\/\u003e\\n    + *\u003cbr\\/\u003e\\n    + * Unless required by applicable law or agreed to in writing, software\u003cbr\\/\u003e\\n    + * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\u003cbr\\/\u003e\\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\u003cbr\\/\u003e\\n    + * See the License for the specific language governing permissions and\u003cbr\\/\u003e\\n    + * limitations under the License.\u003cbr\\/\u003e\\n    + *\\/\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +package org.apache.lucene.util.graph;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import java.io.IOException;\u003cbr\\/\u003e\\n    +import java.util.ArrayList;\u003cbr\\/\u003e\\n    +import java.util.HashMap;\u003cbr\\/\u003e\\n    +import java.util.List;\u003cbr\\/\u003e\\n    +import java.util.Map;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.TokenStream;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.BytesTermAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.OffsetAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.PositionLengthAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.TermToBytesRefAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.BytesRef;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.IntsRef;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.Automaton;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.FiniteStringsIterator;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.Operations;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.Transition;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import static org.apache.lucene.util.automaton.Operations.DEFAULT_MAX_DETERMINIZED_STATES;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +\\/**\u003cbr\\/\u003e\\n    + * Creates a list of \u003c\\/p\u003e\\n{@link TokenStream}\\n\u003cp\u003e where each stream is the tokens that make up a finite string in graph token stream.  To do this,\u003cbr\\/\u003e\\n    + * the graph token stream is converted to an \u003c\\/p\u003e\\n{@link Automaton}\\n\u003cp\u003e and from there we use a \u003c\\/p\u003e\\n{@link FiniteStringsIterator}\\n\u003cp\u003e to collect the various\u003cbr\\/\u003e\\n    + * token streams for each finite string.\u003cbr\\/\u003e\\n    + *\\/\u003cbr\\/\u003e\\n    +public class GraphTokenStreamFiniteStrings {\u003cbr\\/\u003e\\n    +  \\/* TODO:\u003cbr\\/\u003e\\n    +     Most of this is a combination of code from TermAutomatonQuery and TokenStreamToTermAutomatonQuery. Would be\u003cbr\\/\u003e\\n    +     good to make this so it could be shared. *\\/\u003cbr\\/\u003e\\n    +  private final Automaton.Builder builder;\u003cbr\\/\u003e\\n    +  Automaton det;\u003cbr\\/\u003e\\n    +  private final Map&lt;BytesRef, Integer&gt; termToID = new HashMap&lt;&gt;();\u003cbr\\/\u003e\\n    +  private final Map&lt;Integer, BytesRef&gt; idToTerm = new HashMap&lt;&gt;();\u003cbr\\/\u003e\\n    +  private int anyTermID = -1;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  public GraphTokenStreamFiniteStrings() \u003c\\/p\u003e\\n{\\n    +    this.builder = new Automaton.Builder();\\n    +  }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +  private static class BytesRefArrayTokenStream extends TokenStream {\u003cbr\\/\u003e\\n    +    private final BytesTermAttribute termAtt = addAttribute(BytesTermAttribute.class);\u003cbr\\/\u003e\\n    +    private final BytesRef[] terms;\u003cbr\\/\u003e\\n    +    private int offset;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    BytesRefArrayTokenStream(BytesRef[] terms) \u003c\\/p\u003e\\n{\\n    +      this.terms = terms;\\n    +      offset = 0;\\n    +    }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +    @Override\u003cbr\\/\u003e\\n    +    public boolean incrementToken() throws IOException {\u003cbr\\/\u003e\\n    +      if (offset &lt; terms.length) \u003c\\/p\u003e\\n{\\n    +        clearAttributes();\\n    +        termAtt.setBytesRef(terms[offset]);\\n    +        offset = offset + 1;\\n    +        return true;\\n    +      }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +      return false;\u003cbr\\/\u003e\\n    +    }\u003cbr\\/\u003e\\n    +  }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  \\/**\u003cbr\\/\u003e\\n    +   * Gets the list of finite string token streams from the given input graph token stream.\u003cbr\\/\u003e\\n    +   *\\/\u003cbr\\/\u003e\\n    +  public List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException {\u003cbr\\/\u003e\\n    +    \\/\\/ build automation\u003cbr\\/\u003e\\n    +    build(in);\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    List&lt;TokenStream&gt; tokenStreams = new ArrayList&lt;&gt;();\u003cbr\\/\u003e\\n    +    final FiniteStringsIterator finiteStrings = new FiniteStringsIterator(det);\u003cbr\\/\u003e\\n    +    for (IntsRef string; (string = finiteStrings.next()) != null; ) {\u003cbr\\/\u003e\\n    +      final BytesRef[] tokens = new BytesRef\u003cspan class=\\\"error\\\"\u003e&#91;string.length&#93;\u003c\\/span\u003e;\u003cbr\\/\u003e\\n    +      for (int idx = string.offset, len = string.offset + string.length; idx &lt; len; idx++) \u003c\\/p\u003e\\n{\\n    +        tokens[idx - string.offset] = idToTerm.get(string.ints[idx]);\\n    +      }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +      tokenStreams.add(new BytesRefArrayTokenStream(tokens));\u003cbr\\/\u003e\\n    +    }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    return tokenStreams;\u003cbr\\/\u003e\\n    +  }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  private void build(final TokenStream in) throws IOException {\u003cbr\\/\u003e\\n    +    if (det != null) \u003c\\/p\u003e\\n{\\n    +      throw new IllegalStateException(\\\"Automation already built\\\");\\n    +    }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +    final TermToBytesRefAttribute termBytesAtt = in.addAttribute(TermToBytesRefAttribute.class);\u003cbr\\/\u003e\\n    +    final PositionIncrementAttribute posIncAtt = in.addAttribute(PositionIncrementAttribute.class);\u003cbr\\/\u003e\\n    +    final PositionLengthAttribute posLengthAtt = in.addAttribute(PositionLengthAttribute.class);\u003cbr\\/\u003e\\n    +    final OffsetAttribute offsetAtt = in.addAttribute(OffsetAttribute.class);\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    in.reset();\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    int pos = -1;\u003cbr\\/\u003e\\n    +    int lastPos = 0;\u003cbr\\/\u003e\\n    +    int maxOffset = 0;\u003cbr\\/\u003e\\n    +    int maxPos = -1;\u003cbr\\/\u003e\\n    +    int state = -1;\u003cbr\\/\u003e\\n    +    while (in.incrementToken()) {\u003cbr\\/\u003e\\n    +      int posInc = posIncAtt.getPositionIncrement();\u003cbr\\/\u003e\\n    +      assert pos &gt; -1 || posInc &gt; 0;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +      if (posInc &gt; 1) {\u003cbr\\/\u003e\\n    &#8212; End diff &#8211;\u003c\\/p\u003e\\n\\n\u003cp\u003e    This seems like a notable limitation that should be documented in javadocs somewhere.  Can\'t we support holes without demanding the stream use \'*\' ?  And might there be a test for this?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15785544_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15785544_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/16 15:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-29T15:41:49+0000\'\u003e29\\/Dec\\/16 15:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user dsmiley commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94148633  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -0,0 +1,294 @@ \\n    +\\/* \\n    + * Licensed to the Apache Software Foundation (ASF) under one or more \\n    + * contributor license agreements.  See the NOTICE file distributed with \\n    + * this work for additional information regarding copyright ownership. \\n    + * The ASF licenses this file to You under the Apache License, Version 2.0 \\n    + * (the \\\"License\\\"); you may not use this file except in compliance with \\n    + * the License.  You may obtain a copy of the License at \\n    + * \\n    + *      http:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0  \\n    + * \\n    + * Unless required by applicable law or agreed to in writing, software \\n    + * distributed under the License is distributed on an \\\"AS IS\\\" BASIS, \\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. \\n    + * See the License for the specific language governing permissions and \\n    + * limitations under the License. \\n    + *\\/ \\n    + \\n    +package org.apache.lucene.util.graph; \\n    + \\n    +import java.io.IOException; \\n    +import java.util.ArrayList; \\n    +import java.util.HashMap; \\n    +import java.util.List; \\n    +import java.util.Map; \\n    + \\n    +import org.apache.lucene.analysis.TokenStream; \\n    +import org.apache.lucene.analysis.tokenattributes.BytesTermAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.OffsetAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.PositionLengthAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.TermToBytesRefAttribute; \\n    +import org.apache.lucene.util.BytesRef; \\n    +import org.apache.lucene.util.IntsRef; \\n    +import org.apache.lucene.util.automaton.Automaton; \\n    +import org.apache.lucene.util.automaton.FiniteStringsIterator; \\n    +import org.apache.lucene.util.automaton.Operations; \\n    +import org.apache.lucene.util.automaton.Transition; \\n    + \\n    +import static org.apache.lucene.util.automaton.Operations.DEFAULT_MAX_DETERMINIZED_STATES; \\n    + \\n    +\\/** \\n    + * Creates a list of  \\n{@link TokenStream}\\n  where each stream is the tokens that make up a finite string in graph token stream.  To do this, \\n    + * the graph token stream is converted to an  \\n{@link Automaton}\\n  and from there we use a  \\n{@link FiniteStringsIterator}\\n  to collect the various \\n    + * token streams for each finite string. \\n    + *\\/ \\n    +public class GraphTokenStreamFiniteStrings { \\n    +  \\/* TODO: \\n    +     Most of this is a combination of code from TermAutomatonQuery and TokenStreamToTermAutomatonQuery. Would be \\n    +     good to make this so it could be shared. *\\/ \\n    +  private final Automaton.Builder builder; \\n    +  Automaton det; \\n    +  private final Map&lt;BytesRef, Integer&gt; termToID = new HashMap&lt;&gt;(); \\n    +  private final Map&lt;Integer, BytesRef&gt; idToTerm = new HashMap&lt;&gt;(); \\n    +  private int anyTermID = -1; \\n    + \\n    +  public GraphTokenStreamFiniteStrings()  \\n{\\n    +    this.builder = new Automaton.Builder();\\n    +  }\\n     + \\n    +  private static class BytesRefArrayTokenStream extends TokenStream { \\n    +    private final BytesTermAttribute termAtt = addAttribute(BytesTermAttribute.class); \\n    +    private final BytesRef[] terms; \\n    +    private int offset; \\n    + \\n    +    BytesRefArrayTokenStream(BytesRef[] terms)  \\n{\\n    +      this.terms = terms;\\n    +      offset = 0;\\n    +    }\\n     + \\n    +    @Override \\n    +    public boolean incrementToken() throws IOException { \\n    +      if (offset &lt; terms.length)  \\n{\\n    +        clearAttributes();\\n    +        termAtt.setBytesRef(terms[offset]);\\n    +        offset = offset + 1;\\n    +        return true;\\n    +      }\\n     + \\n    +      return false; \\n    +    } \\n    +  } \\n    + \\n    +  \\/** \\n    +   * Gets the list of finite string token streams from the given input graph token stream. \\n    +   *\\/ \\n    +  public List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException { \\n    +    \\/\\/ build automation \\n    +    build(in); \\n    + \\n    +    List&lt;TokenStream&gt; tokenStreams = new ArrayList&lt;&gt;(); \\n    +    final FiniteStringsIterator finiteStrings = new FiniteStringsIterator(det); \\n    +    for (IntsRef string; (string = finiteStrings.next()) != null; ) { \\n    +      final BytesRef[] tokens = new BytesRef &#91;string.length&#93; ; \\n    +      for (int idx = string.offset, len = string.offset + string.length; idx &lt; len; idx++)  \\n{\\n    +        tokens[idx - string.offset] = idToTerm.get(string.ints[idx]);\\n    +      }\\n     + \\n    +      tokenStreams.add(new BytesRefArrayTokenStream(tokens)); \\n    +    } \\n    + \\n    +    return tokenStreams; \\n    +  } \\n    + \\n    +  private void build(final TokenStream in) throws IOException { \\n    +    if (det != null)  \\n{\\n    +      throw new IllegalStateException(\\\"Automation already built\\\");\\n    +    }\\n     + \\n    +    final TermToBytesRefAttribute termBytesAtt = in.addAttribute(TermToBytesRefAttribute.class); \\n    +    final PositionIncrementAttribute posIncAtt = in.addAttribute(PositionIncrementAttribute.class); \\n    +    final PositionLengthAttribute posLengthAtt = in.addAttribute(PositionLengthAttribute.class); \\n    +    final OffsetAttribute offsetAtt = in.addAttribute(OffsetAttribute.class); \\n    + \\n    +    in.reset(); \\n    + \\n    +    int pos = -1; \\n    +    int lastPos = 0; \\n    +    int maxOffset = 0; \\n    +    int maxPos = -1; \\n    +    int state = -1; \\n    +    while (in.incrementToken()) { \\n    +      int posInc = posIncAtt.getPositionIncrement(); \\n    +      assert pos &gt; -1 || posInc &gt; 0; \\n    + \\n    +      if (posInc &gt; 1) { \\n    &#8212; End diff &#8211; \\n\\n     This seems like a notable limitation that should be documented in javadocs somewhere.  Can\'t we support holes without demanding the stream use \'*\' ?  And might there be a test for this?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15785941\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15785941&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15785941\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15785941_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15785941_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/16 19:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-29T19:28:05+0000\'\u003e29\\/Dec\\/16 19:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mattweber commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94171262\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94171262\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -0,0 +1,294 @@\u003cbr\\/\u003e\\n    +\\/*\u003cbr\\/\u003e\\n    + * Licensed to the Apache Software Foundation (ASF) under one or more\u003cbr\\/\u003e\\n    + * contributor license agreements.  See the NOTICE file distributed with\u003cbr\\/\u003e\\n    + * this work for additional information regarding copyright ownership.\u003cbr\\/\u003e\\n    + * The ASF licenses this file to You under the Apache License, Version 2.0\u003cbr\\/\u003e\\n    + * (the \\\"License\\\"); you may not use this file except in compliance with\u003cbr\\/\u003e\\n    + * the License.  You may obtain a copy of the License at\u003cbr\\/\u003e\\n    + *\u003cbr\\/\u003e\\n    + *     \u003ca href=\\\"http:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0\u003c\\/a\u003e\u003cbr\\/\u003e\\n    + *\u003cbr\\/\u003e\\n    + * Unless required by applicable law or agreed to in writing, software\u003cbr\\/\u003e\\n    + * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\u003cbr\\/\u003e\\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\u003cbr\\/\u003e\\n    + * See the License for the specific language governing permissions and\u003cbr\\/\u003e\\n    + * limitations under the License.\u003cbr\\/\u003e\\n    + *\\/\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +package org.apache.lucene.util.graph;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import java.io.IOException;\u003cbr\\/\u003e\\n    +import java.util.ArrayList;\u003cbr\\/\u003e\\n    +import java.util.HashMap;\u003cbr\\/\u003e\\n    +import java.util.List;\u003cbr\\/\u003e\\n    +import java.util.Map;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.TokenStream;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.BytesTermAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.OffsetAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.PositionLengthAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.TermToBytesRefAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.BytesRef;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.IntsRef;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.Automaton;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.FiniteStringsIterator;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.Operations;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.Transition;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import static org.apache.lucene.util.automaton.Operations.DEFAULT_MAX_DETERMINIZED_STATES;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +\\/**\u003cbr\\/\u003e\\n    + * Creates a list of \u003c\\/p\u003e\\n{@link TokenStream}\\n\u003cp\u003e where each stream is the tokens that make up a finite string in graph token stream.  To do this,\u003cbr\\/\u003e\\n    + * the graph token stream is converted to an \u003c\\/p\u003e\\n{@link Automaton}\\n\u003cp\u003e and from there we use a \u003c\\/p\u003e\\n{@link FiniteStringsIterator}\\n\u003cp\u003e to collect the various\u003cbr\\/\u003e\\n    + * token streams for each finite string.\u003cbr\\/\u003e\\n    + *\\/\u003cbr\\/\u003e\\n    +public class GraphTokenStreamFiniteStrings {\u003cbr\\/\u003e\\n    +  \\/* TODO:\u003cbr\\/\u003e\\n    +     Most of this is a combination of code from TermAutomatonQuery and TokenStreamToTermAutomatonQuery. Would be\u003cbr\\/\u003e\\n    +     good to make this so it could be shared. *\\/\u003cbr\\/\u003e\\n    +  private final Automaton.Builder builder;\u003cbr\\/\u003e\\n    +  Automaton det;\u003cbr\\/\u003e\\n    +  private final Map&lt;BytesRef, Integer&gt; termToID = new HashMap&lt;&gt;();\u003cbr\\/\u003e\\n    +  private final Map&lt;Integer, BytesRef&gt; idToTerm = new HashMap&lt;&gt;();\u003cbr\\/\u003e\\n    +  private int anyTermID = -1;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  public GraphTokenStreamFiniteStrings() \u003c\\/p\u003e\\n{\\n    +    this.builder = new Automaton.Builder();\\n    +  }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +  private static class BytesRefArrayTokenStream extends TokenStream {\u003cbr\\/\u003e\\n    +    private final BytesTermAttribute termAtt = addAttribute(BytesTermAttribute.class);\u003cbr\\/\u003e\\n    +    private final BytesRef[] terms;\u003cbr\\/\u003e\\n    +    private int offset;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    BytesRefArrayTokenStream(BytesRef[] terms) \u003c\\/p\u003e\\n{\\n    +      this.terms = terms;\\n    +      offset = 0;\\n    +    }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +    @Override\u003cbr\\/\u003e\\n    +    public boolean incrementToken() throws IOException {\u003cbr\\/\u003e\\n    +      if (offset &lt; terms.length) \u003c\\/p\u003e\\n{\\n    +        clearAttributes();\\n    +        termAtt.setBytesRef(terms[offset]);\\n    +        offset = offset + 1;\\n    +        return true;\\n    +      }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +      return false;\u003cbr\\/\u003e\\n    +    }\u003cbr\\/\u003e\\n    +  }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  \\/**\u003cbr\\/\u003e\\n    +   * Gets the list of finite string token streams from the given input graph token stream.\u003cbr\\/\u003e\\n    +   *\\/\u003cbr\\/\u003e\\n    +  public List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException {\u003cbr\\/\u003e\\n    +    \\/\\/ build automation\u003cbr\\/\u003e\\n    +    build(in);\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    List&lt;TokenStream&gt; tokenStreams = new ArrayList&lt;&gt;();\u003cbr\\/\u003e\\n    +    final FiniteStringsIterator finiteStrings = new FiniteStringsIterator(det);\u003cbr\\/\u003e\\n    +    for (IntsRef string; (string = finiteStrings.next()) != null; ) {\u003cbr\\/\u003e\\n    +      final BytesRef[] tokens = new BytesRef\u003cspan class=\\\"error\\\"\u003e&#91;string.length&#93;\u003c\\/span\u003e;\u003cbr\\/\u003e\\n    +      for (int idx = string.offset, len = string.offset + string.length; idx &lt; len; idx++) \u003c\\/p\u003e\\n{\\n    +        tokens[idx - string.offset] = idToTerm.get(string.ints[idx]);\\n    +      }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +      tokenStreams.add(new BytesRefArrayTokenStream(tokens));\u003cbr\\/\u003e\\n    +    }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    return tokenStreams;\u003cbr\\/\u003e\\n    +  }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  private void build(final TokenStream in) throws IOException {\u003cbr\\/\u003e\\n    +    if (det != null) \u003c\\/p\u003e\\n{\\n    +      throw new IllegalStateException(\\\"Automation already built\\\");\\n    +    }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +    final TermToBytesRefAttribute termBytesAtt = in.addAttribute(TermToBytesRefAttribute.class);\u003cbr\\/\u003e\\n    +    final PositionIncrementAttribute posIncAtt = in.addAttribute(PositionIncrementAttribute.class);\u003cbr\\/\u003e\\n    +    final PositionLengthAttribute posLengthAtt = in.addAttribute(PositionLengthAttribute.class);\u003cbr\\/\u003e\\n    +    final OffsetAttribute offsetAtt = in.addAttribute(OffsetAttribute.class);\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    in.reset();\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    int pos = -1;\u003cbr\\/\u003e\\n    +    int lastPos = 0;\u003cbr\\/\u003e\\n    +    int maxOffset = 0;\u003cbr\\/\u003e\\n    +    int maxPos = -1;\u003cbr\\/\u003e\\n    +    int state = -1;\u003cbr\\/\u003e\\n    +    while (in.incrementToken()) {\u003cbr\\/\u003e\\n    +      int posInc = posIncAtt.getPositionIncrement();\u003cbr\\/\u003e\\n    +      assert pos &gt; -1 || posInc &gt; 0;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +      if (posInc &gt; 1) {\u003cbr\\/\u003e\\n    &#8212; End diff &#8211;\u003c\\/p\u003e\\n\\n\u003cp\u003e    @dsmiley That was actually pulled out of the existing \u003cspan class=\\\"error\\\"\u003e&#91;TokenStreamToTermAutomatonQuery.java&#93;\u003c\\/span\u003e(\u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/master\\/lucene\\/sandbox\\/src\\/java\\/org\\/apache\\/lucene\\/search\\/TokenStreamToTermAutomatonQuery.java#L77\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/master\\/lucene\\/sandbox\\/src\\/java\\/org\\/apache\\/lucene\\/search\\/TokenStreamToTermAutomatonQuery.java#L77\u003c\\/a\u003e).  Let me look into it more.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15785941_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15785941_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/16 19:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-29T19:28:05+0000\'\u003e29\\/Dec\\/16 19:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mattweber commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94171262  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -0,0 +1,294 @@ \\n    +\\/* \\n    + * Licensed to the Apache Software Foundation (ASF) under one or more \\n    + * contributor license agreements.  See the NOTICE file distributed with \\n    + * this work for additional information regarding copyright ownership. \\n    + * The ASF licenses this file to You under the Apache License, Version 2.0 \\n    + * (the \\\"License\\\"); you may not use this file except in compliance with \\n    + * the License.  You may obtain a copy of the License at \\n    + * \\n    + *      http:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0  \\n    + * \\n    + * Unless required by applicable law or agreed to in writing, software \\n    + * distributed under the License is distributed on an \\\"AS IS\\\" BASIS, \\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. \\n    + * See the License for the specific language governing permissions and \\n    + * limitations under the License. \\n    + *\\/ \\n    + \\n    +package org.apache.lucene.util.graph; \\n    + \\n    +import java.io.IOException; \\n    +import java.util.ArrayList; \\n    +import java.util.HashMap; \\n    +import java.util.List; \\n    +import java.util.Map; \\n    + \\n    +import org.apache.lucene.analysis.TokenStream; \\n    +import org.apache.lucene.analysis.tokenattributes.BytesTermAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.OffsetAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.PositionLengthAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.TermToBytesRefAttribute; \\n    +import org.apache.lucene.util.BytesRef; \\n    +import org.apache.lucene.util.IntsRef; \\n    +import org.apache.lucene.util.automaton.Automaton; \\n    +import org.apache.lucene.util.automaton.FiniteStringsIterator; \\n    +import org.apache.lucene.util.automaton.Operations; \\n    +import org.apache.lucene.util.automaton.Transition; \\n    + \\n    +import static org.apache.lucene.util.automaton.Operations.DEFAULT_MAX_DETERMINIZED_STATES; \\n    + \\n    +\\/** \\n    + * Creates a list of  \\n{@link TokenStream}\\n  where each stream is the tokens that make up a finite string in graph token stream.  To do this, \\n    + * the graph token stream is converted to an  \\n{@link Automaton}\\n  and from there we use a  \\n{@link FiniteStringsIterator}\\n  to collect the various \\n    + * token streams for each finite string. \\n    + *\\/ \\n    +public class GraphTokenStreamFiniteStrings { \\n    +  \\/* TODO: \\n    +     Most of this is a combination of code from TermAutomatonQuery and TokenStreamToTermAutomatonQuery. Would be \\n    +     good to make this so it could be shared. *\\/ \\n    +  private final Automaton.Builder builder; \\n    +  Automaton det; \\n    +  private final Map&lt;BytesRef, Integer&gt; termToID = new HashMap&lt;&gt;(); \\n    +  private final Map&lt;Integer, BytesRef&gt; idToTerm = new HashMap&lt;&gt;(); \\n    +  private int anyTermID = -1; \\n    + \\n    +  public GraphTokenStreamFiniteStrings()  \\n{\\n    +    this.builder = new Automaton.Builder();\\n    +  }\\n     + \\n    +  private static class BytesRefArrayTokenStream extends TokenStream { \\n    +    private final BytesTermAttribute termAtt = addAttribute(BytesTermAttribute.class); \\n    +    private final BytesRef[] terms; \\n    +    private int offset; \\n    + \\n    +    BytesRefArrayTokenStream(BytesRef[] terms)  \\n{\\n    +      this.terms = terms;\\n    +      offset = 0;\\n    +    }\\n     + \\n    +    @Override \\n    +    public boolean incrementToken() throws IOException { \\n    +      if (offset &lt; terms.length)  \\n{\\n    +        clearAttributes();\\n    +        termAtt.setBytesRef(terms[offset]);\\n    +        offset = offset + 1;\\n    +        return true;\\n    +      }\\n     + \\n    +      return false; \\n    +    } \\n    +  } \\n    + \\n    +  \\/** \\n    +   * Gets the list of finite string token streams from the given input graph token stream. \\n    +   *\\/ \\n    +  public List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException { \\n    +    \\/\\/ build automation \\n    +    build(in); \\n    + \\n    +    List&lt;TokenStream&gt; tokenStreams = new ArrayList&lt;&gt;(); \\n    +    final FiniteStringsIterator finiteStrings = new FiniteStringsIterator(det); \\n    +    for (IntsRef string; (string = finiteStrings.next()) != null; ) { \\n    +      final BytesRef[] tokens = new BytesRef &#91;string.length&#93; ; \\n    +      for (int idx = string.offset, len = string.offset + string.length; idx &lt; len; idx++)  \\n{\\n    +        tokens[idx - string.offset] = idToTerm.get(string.ints[idx]);\\n    +      }\\n     + \\n    +      tokenStreams.add(new BytesRefArrayTokenStream(tokens)); \\n    +    } \\n    + \\n    +    return tokenStreams; \\n    +  } \\n    + \\n    +  private void build(final TokenStream in) throws IOException { \\n    +    if (det != null)  \\n{\\n    +      throw new IllegalStateException(\\\"Automation already built\\\");\\n    +    }\\n     + \\n    +    final TermToBytesRefAttribute termBytesAtt = in.addAttribute(TermToBytesRefAttribute.class); \\n    +    final PositionIncrementAttribute posIncAtt = in.addAttribute(PositionIncrementAttribute.class); \\n    +    final PositionLengthAttribute posLengthAtt = in.addAttribute(PositionLengthAttribute.class); \\n    +    final OffsetAttribute offsetAtt = in.addAttribute(OffsetAttribute.class); \\n    + \\n    +    in.reset(); \\n    + \\n    +    int pos = -1; \\n    +    int lastPos = 0; \\n    +    int maxOffset = 0; \\n    +    int maxPos = -1; \\n    +    int state = -1; \\n    +    while (in.incrementToken()) { \\n    +      int posInc = posIncAtt.getPositionIncrement(); \\n    +      assert pos &gt; -1 || posInc &gt; 0; \\n    + \\n    +      if (posInc &gt; 1) { \\n    &#8212; End diff &#8211; \\n\\n     @dsmiley That was actually pulled out of the existing  &#91;TokenStreamToTermAutomatonQuery.java&#93; ( https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/master\\/lucene\\/sandbox\\/src\\/java\\/org\\/apache\\/lucene\\/search\\/TokenStreamToTermAutomatonQuery.java#L77 ).  Let me look into it more.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15786980\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15786980&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15786980\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mattweber\\\" id=\\\"commentauthor_15786980_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mattweber\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mattweber\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Matt Weber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15786980_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 05:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T05:59:34+0000\'\u003e30\\/Dec\\/16 05:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\" class=\\\"user-hover\\\" rel=\\\"dsmiley\\\"\u003eDavid Smiley\u003c\\/a\u003e . Thank you for the review!  I was able to come up with a way to preserve position increment gaps.  Can you please take another look?  \u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e Can you please have another look as well?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mattweber\\\" id=\\\"commentauthor_15786980_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mattweber\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mattweber\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Matt Weber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15786980_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 05:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T05:59:34+0000\'\u003e30\\/Dec\\/16 05:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     David Smiley  . Thank you for the review!  I was able to come up with a way to preserve position increment gaps.  Can you please take another look?   \\n\\n  Michael McCandless  Can you please have another look as well?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15787319\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15787319&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15787319\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_15787319_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787319_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 09:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T09:37:46+0000\'\u003e30\\/Dec\\/16 09:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mattweber\\\" class=\\\"user-hover\\\" rel=\\\"mattweber\\\"\u003eMatt Weber\u003c\\/a\u003e; I will have a look, probably once back from vacation next year.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_15787319_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787319_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 09:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T09:37:46+0000\'\u003e30\\/Dec\\/16 09:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks  Matt Weber ; I will have a look, probably once back from vacation next year.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15787395\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15787395&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15787395\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787395_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787395_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 10:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T10:19:38+0000\'\u003e30\\/Dec\\/16 10:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mikemccand commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94216469\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94216469\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -210,82 +215,20 @@ private void finish() {\u003cbr\\/\u003e\\n        *\\/\u003cbr\\/\u003e\\n       private void finish(int maxDeterminizedStates) {\u003cbr\\/\u003e\\n         Automaton automaton = builder.finish();\u003cbr\\/\u003e\\n    -\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003e\\/\\/ System.out.println(\\\"before det:\\\\n\\\" + automaton.toDot());\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003eTransition t = new Transition();\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ TODO: should we add \\\"eps back to initial node\\\" for all states,\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ and det that?  then we don\'t need to revisit initial node at\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ every position?  but automaton could blow up?  And, this makes it\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ harder to skip useless positions at search time?\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003eif (anyTermID != -1) {\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ Make sure there are no leading or trailing ANY:\u003c\\/li\u003e\\n\\t\u003cli\u003eint count = automaton.initTransition(0, t);\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int i = 0; i &lt; count; i++) {\u003c\\/li\u003e\\n\\t\u003cli\u003eautomaton.getNextTransition(t);\u003c\\/li\u003e\\n\\t\u003cli\u003eif (anyTermID &gt;= t.min &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -          throw new IllegalStateException(\\\"automaton cannot lead with an ANY transition\\\");\\n    -        }\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003eint numStates = automaton.getNumStates();\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int i = 0; i &lt; numStates; i++) {\u003c\\/li\u003e\\n\\t\u003cli\u003ecount = automaton.initTransition(i, t);\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int j = 0; j &lt; count; j++) {\u003c\\/li\u003e\\n\\t\u003cli\u003eautomaton.getNextTransition(t);\u003c\\/li\u003e\\n\\t\u003cli\u003eif (automaton.isAccept(t.dest) &amp;&amp; anyTermID &gt;= t.min &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -            throw new IllegalStateException(\\\"automaton cannot end with an ANY transition\\\");\\n    -          }\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003eint termCount = termToID.size();\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ We have to carefully translate these transitions so automaton\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ realizes they also match all other terms:\u003c\\/li\u003e\\n\\t\u003cli\u003eAutomaton newAutomaton = new Automaton();\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int i = 0; i &lt; numStates; i++) \\n{\\n    -        newAutomaton.createState();\\n    -        newAutomaton.setAccept(i, automaton.isAccept(i));\\n    -      }\\n\u003cp\u003e    -\u003c\\/p\u003e\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int i = 0; i &lt; numStates; i++) {\u003c\\/li\u003e\\n\\t\u003cli\u003ecount = automaton.initTransition(i, t);\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int j = 0; j &lt; count; j++) {\u003c\\/li\u003e\\n\\t\u003cli\u003eautomaton.getNextTransition(t);\u003c\\/li\u003e\\n\\t\u003cli\u003eint min, max;\u003c\\/li\u003e\\n\\t\u003cli\u003eif (t.min &lt;= anyTermID &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -            \\/\\/ Match any term\\n    -            min = 0;\\n    -            max = termCount - 1;\\n    -          }\\n\u003cp\u003e else \u003c\\/p\u003e\\n{\\n    -            min = t.min;\\n    -            max = t.max;\\n    -          }\u003c\\/li\u003e\\n\\t\u003cli\u003enewAutomaton.addTransition(t.source, t.dest, min, max);\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003c\\/li\u003e\\n\\t\u003cli\u003enewAutomaton.finishState();\u003c\\/li\u003e\\n\\t\u003cli\u003eautomaton = newAutomaton;\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003cbr\\/\u003e\\n    -\u003cbr\\/\u003e\\n         det = Operations.removeDeadStates(Operations.determinize(automaton, maxDeterminizedStates));\u003cbr\\/\u003e\\n       }\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eprivate int getTermID(BytesRef term) {\u003cbr\\/\u003e\\n    +  private int getTermID(int incr, BytesRef term) {\u003cbr\\/\u003e\\n         Integer id = termToID.get(term);\u003c\\/li\u003e\\n\\t\u003cli\u003eif (id == null) {\u003cbr\\/\u003e\\n    +    if (incr &gt; 1 || id == null) {\\n\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\\t\u003cli\u003eEnd diff &#8211;\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e    Hmm doesn\'t this mean that if the same term shows up, but with different `incr`, that it will get different `id` assigned?  But I think that is actually fine, since nowhere here do we depend on \\/ expect that the same term must have the same id.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787395_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787395_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 10:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T10:19:38+0000\'\u003e30\\/Dec\\/16 10:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mikemccand commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94216469  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -210,82 +215,20 @@ private void finish() { \\n        *\\/ \\n       private void finish(int maxDeterminizedStates) { \\n         Automaton automaton = builder.finish(); \\n    - \\n \\n\\t \\/\\/ System.out.println(\\\"before det:\\\\n\\\" + automaton.toDot()); \\n    - \\n\\t Transition t = new Transition(); \\n    - \\n\\t \\/\\/ TODO: should we add \\\"eps back to initial node\\\" for all states, \\n\\t \\/\\/ and det that?  then we don\'t need to revisit initial node at \\n\\t \\/\\/ every position?  but automaton could blow up?  And, this makes it \\n\\t \\/\\/ harder to skip useless positions at search time? \\n    - \\n\\t if (anyTermID != -1) { \\n    - \\n\\t \\/\\/ Make sure there are no leading or trailing ANY: \\n\\t int count = automaton.initTransition(0, t); \\n\\t for (int i = 0; i &lt; count; i++) { \\n\\t automaton.getNextTransition(t); \\n\\t if (anyTermID &gt;= t.min &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -          throw new IllegalStateException(\\\"automaton cannot lead with an ANY transition\\\");\\n    -        } \\n\\t } \\n    - \\n\\t int numStates = automaton.getNumStates(); \\n\\t for (int i = 0; i &lt; numStates; i++) { \\n\\t count = automaton.initTransition(i, t); \\n\\t for (int j = 0; j &lt; count; j++) { \\n\\t automaton.getNextTransition(t); \\n\\t if (automaton.isAccept(t.dest) &amp;&amp; anyTermID &gt;= t.min &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -            throw new IllegalStateException(\\\"automaton cannot end with an ANY transition\\\");\\n    -          } \\n\\t } \\n\\t } \\n    - \\n\\t int termCount = termToID.size(); \\n    - \\n\\t \\/\\/ We have to carefully translate these transitions so automaton \\n\\t \\/\\/ realizes they also match all other terms: \\n\\t Automaton newAutomaton = new Automaton(); \\n\\t for (int i = 0; i &lt; numStates; i++) \\n{\\n    -        newAutomaton.createState();\\n    -        newAutomaton.setAccept(i, automaton.isAccept(i));\\n    -      }\\n     -  \\n\\t for (int i = 0; i &lt; numStates; i++) { \\n\\t count = automaton.initTransition(i, t); \\n\\t for (int j = 0; j &lt; count; j++) { \\n\\t automaton.getNextTransition(t); \\n\\t int min, max; \\n\\t if (t.min &lt;= anyTermID &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -            \\/\\/ Match any term\\n    -            min = 0;\\n    -            max = termCount - 1;\\n    -          }\\n  else  \\n{\\n    -            min = t.min;\\n    -            max = t.max;\\n    -          } \\n\\t newAutomaton.addTransition(t.source, t.dest, min, max); \\n\\t } \\n\\t } \\n\\t newAutomaton.finishState(); \\n\\t automaton = newAutomaton; \\n\\t } \\n    - \\n         det = Operations.removeDeadStates(Operations.determinize(automaton, maxDeterminizedStates)); \\n       } \\n \\n\\n\\n \\n\\t private int getTermID(BytesRef term) { \\n    +  private int getTermID(int incr, BytesRef term) { \\n         Integer id = termToID.get(term); \\n\\t if (id == null) { \\n    +    if (incr &gt; 1 || id == null) {\\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t End diff &#8211; \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n     Hmm doesn\'t this mean that if the same term shows up, but with different `incr`, that it will get different `id` assigned?  But I think that is actually fine, since nowhere here do we depend on \\/ expect that the same term must have the same id.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15787396\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15787396&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15787396\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787396_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787396_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 10:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T10:19:38+0000\'\u003e30\\/Dec\\/16 10:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mikemccand commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94215751\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94215751\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -114,21 +127,20 @@ private void build(final TokenStream in) throws IOException {\u003cbr\\/\u003e\\n         in.reset();\u003c\\/p\u003e\\n\\n\u003cp\u003e         int pos = -1;\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eint lastPos = 0;\u003cbr\\/\u003e\\n    +    int lastIncr = 1;\u003cbr\\/\u003e\\n         int maxOffset = 0;\u003cbr\\/\u003e\\n         int maxPos = -1;\u003cbr\\/\u003e\\n         int state = -1;\u003cbr\\/\u003e\\n         while (in.incrementToken()) {\u003cbr\\/\u003e\\n           int posInc = posIncAtt.getPositionIncrement();\u003c\\/li\u003e\\n\\t\u003cli\u003eassert pos &gt; -1 || posInc &gt; 0;\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eif (posInc &gt; 1) \\n{\\n    -        throw new IllegalArgumentException(\\\"cannot handle holes; to accept any term, use \'*\' term\\\");\\n    -      }\\n\u003cp\u003e    +      \\/\\/ always use inc 1 while building, but save original increment\u003cbr\\/\u003e\\n    +      int fakePosInc = posInc &gt; 1 ? 1 : posInc;\u003c\\/p\u003e\\n\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\\t\u003cli\u003eEnd diff &#8211;\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e    Maybe just `Math.min(1, posInc)` instead?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787396_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787396_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 10:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T10:19:38+0000\'\u003e30\\/Dec\\/16 10:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mikemccand commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94215751  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -114,21 +127,20 @@ private void build(final TokenStream in) throws IOException { \\n         in.reset(); \\n\\n          int pos = -1; \\n \\n\\t int lastPos = 0; \\n    +    int lastIncr = 1; \\n         int maxOffset = 0; \\n         int maxPos = -1; \\n         int state = -1; \\n         while (in.incrementToken()) { \\n           int posInc = posIncAtt.getPositionIncrement(); \\n\\t assert pos &gt; -1 || posInc &gt; 0; \\n \\n\\n\\n \\n\\t if (posInc &gt; 1) \\n{\\n    -        throw new IllegalArgumentException(\\\"cannot handle holes; to accept any term, use \'*\' term\\\");\\n    -      }\\n     +      \\/\\/ always use inc 1 while building, but save original increment \\n    +      int fakePosInc = posInc &gt; 1 ? 1 : posInc; \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t End diff &#8211; \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n     Maybe just `Math.min(1, posInc)` instead?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15787397\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15787397&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15787397\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787397_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787397_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 10:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T10:19:38+0000\'\u003e30\\/Dec\\/16 10:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mikemccand commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94216511\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94216511\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -174,25 +191,13 @@ private void setAccept(int state, boolean accept) {\u003cbr\\/\u003e\\n       \\/**\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eAdds a transition to the automaton.\u003cbr\\/\u003e\\n        *\\/\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eprivate void addTransition(int source, int dest, String term) \\n{\\n    -    addTransition(source, dest, new BytesRef(term));\\n    -  }\\n\u003cp\u003e    -\u003c\\/p\u003e\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/**\u003c\\/li\u003e\\n\\t\u003cli\u003e* Adds a transition to the automaton.\u003c\\/li\u003e\\n\\t\u003cli\u003e*\\/\u003c\\/li\u003e\\n\\t\u003cli\u003eprivate void addTransition(int source, int dest, BytesRef term) {\u003cbr\\/\u003e\\n    +  private int addTransition(int source, int dest, int incr, BytesRef term) {\u003cbr\\/\u003e\\n         if (term == null) {\\n\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\\t\u003cli\u003eEnd diff &#8211;\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e    This can become an assert?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787397_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787397_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 10:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T10:19:38+0000\'\u003e30\\/Dec\\/16 10:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mikemccand commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94216511  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -174,25 +191,13 @@ private void setAccept(int state, boolean accept) { \\n       \\/** \\n \\n\\t Adds a transition to the automaton. \\n        *\\/ \\n \\n \\n\\t private void addTransition(int source, int dest, String term) \\n{\\n    -    addTransition(source, dest, new BytesRef(term));\\n    -  }\\n     -  \\n\\t \\/** \\n\\t * Adds a transition to the automaton. \\n\\t *\\/ \\n\\t private void addTransition(int source, int dest, BytesRef term) { \\n    +  private int addTransition(int source, int dest, int incr, BytesRef term) { \\n         if (term == null) {\\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t End diff &#8211; \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n     This can become an assert?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15787413\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15787413&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15787413\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787413_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787413_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 10:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T10:26:58+0000\'\u003e30\\/Dec\\/16 10:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mikemccand commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94217160\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94217160\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -0,0 +1,237 @@\u003cbr\\/\u003e\\n    +\\/*\u003cbr\\/\u003e\\n    + * Licensed to the Apache Software Foundation (ASF) under one or more\u003cbr\\/\u003e\\n    + * contributor license agreements.  See the NOTICE file distributed with\u003cbr\\/\u003e\\n    + * this work for additional information regarding copyright ownership.\u003cbr\\/\u003e\\n    + * The ASF licenses this file to You under the Apache License, Version 2.0\u003cbr\\/\u003e\\n    + * (the \\\"License\\\"); you may not use this file except in compliance with\u003cbr\\/\u003e\\n    + * the License.  You may obtain a copy of the License at\u003cbr\\/\u003e\\n    + *\u003cbr\\/\u003e\\n    + *     \u003ca href=\\\"http:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0\u003c\\/a\u003e\u003cbr\\/\u003e\\n    + *\u003cbr\\/\u003e\\n    + * Unless required by applicable law or agreed to in writing, software\u003cbr\\/\u003e\\n    + * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\u003cbr\\/\u003e\\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\u003cbr\\/\u003e\\n    + * See the License for the specific language governing permissions and\u003cbr\\/\u003e\\n    + * limitations under the License.\u003cbr\\/\u003e\\n    + *\\/\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +package org.apache.lucene.util.graph;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import java.io.IOException;\u003cbr\\/\u003e\\n    +import java.util.ArrayList;\u003cbr\\/\u003e\\n    +import java.util.HashMap;\u003cbr\\/\u003e\\n    +import java.util.List;\u003cbr\\/\u003e\\n    +import java.util.Map;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.TokenStream;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.BytesTermAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.OffsetAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.PositionLengthAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.TermToBytesRefAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.BytesRef;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.IntsRef;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.Automaton;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.FiniteStringsIterator;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.Operations;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import static org.apache.lucene.util.automaton.Operations.DEFAULT_MAX_DETERMINIZED_STATES;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +\\/**\u003cbr\\/\u003e\\n    + * Creates a list of \u003c\\/p\u003e\\n{@link TokenStream}\\n\u003cp\u003e where each stream is the tokens that make up a finite string in graph token stream.  To do this,\u003cbr\\/\u003e\\n    + * the graph token stream is converted to an \u003c\\/p\u003e\\n{@link Automaton}\\n\u003cp\u003e and from there we use a \u003c\\/p\u003e\\n{@link FiniteStringsIterator}\\n\u003cp\u003e to collect the various\u003cbr\\/\u003e\\n    + * token streams for each finite string.\u003cbr\\/\u003e\\n    + *\\/\u003cbr\\/\u003e\\n    +public class GraphTokenStreamFiniteStrings {\u003cbr\\/\u003e\\n    +  \\/* TODO:\u003cbr\\/\u003e\\n    +     Most of this is a combination of code from TermAutomatonQuery and TokenStreamToTermAutomatonQuery. Would be\u003cbr\\/\u003e\\n    +     good to make this so it could be shared. *\\/\u003cbr\\/\u003e\\n    +  private final Automaton.Builder builder;\u003cbr\\/\u003e\\n    +  Automaton det;\u003cbr\\/\u003e\\n    +  private final Map&lt;BytesRef, Integer&gt; termToID = new HashMap&lt;&gt;();\u003cbr\\/\u003e\\n    +  private final Map&lt;Integer, BytesRef&gt; idToTerm = new HashMap&lt;&gt;();\u003cbr\\/\u003e\\n    +  private final Map&lt;Integer, Integer&gt; idToInc = new HashMap&lt;&gt;();\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  public GraphTokenStreamFiniteStrings() \u003c\\/p\u003e\\n{\\n    +    this.builder = new Automaton.Builder();\\n    +  }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +  private static class BytesRefArrayTokenStream extends TokenStream {\u003cbr\\/\u003e\\n    +    private final BytesTermAttribute termAtt = addAttribute(BytesTermAttribute.class);\u003cbr\\/\u003e\\n    +    private final PositionIncrementAttribute posIncAtt = addAttribute(PositionIncrementAttribute.class);\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    private final BytesRef[] terms;\u003cbr\\/\u003e\\n    +    private final int[] increments;\u003cbr\\/\u003e\\n    +    private int offset;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    BytesRefArrayTokenStream(BytesRef[] terms, int[] increments) \u003c\\/p\u003e\\n{\\n    +      this.terms = terms;\\n    +      this.increments = increments;\\n    +      assert terms.length == increments.length;\\n    +      offset = 0;\\n    +    }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +    @Override\u003cbr\\/\u003e\\n    +    public boolean incrementToken() throws IOException {\u003cbr\\/\u003e\\n    +      if (offset &lt; terms.length) \u003c\\/p\u003e\\n{\\n    +        clearAttributes();\\n    +        termAtt.setBytesRef(terms[offset]);\\n    +        posIncAtt.setPositionIncrement(increments[offset]);\\n    +        offset = offset + 1;\\n    +        return true;\\n    +      }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +      return false;\u003cbr\\/\u003e\\n    +    }\u003cbr\\/\u003e\\n    +  }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  \\/**\u003cbr\\/\u003e\\n    +   * Gets the list of finite string token streams from the given input graph token stream.\u003cbr\\/\u003e\\n    +   *\\/\u003cbr\\/\u003e\\n    +  public List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException {\u003cbr\\/\u003e\\n    &#8212; End diff &#8211;\u003c\\/p\u003e\\n\\n\u003cp\u003e    Could we make this method private, make this class\'s constructor private, and add a `static` method here, the sole public method on this class, that receives the incoming `TokenStream` and returns the resulting `TokenStream[]`?  Otherwise the API is sort of awkard, since e.g. this method seems like a getter yet it\'s doing lots of side-effects under the hood ...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787413_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787413_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 10:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T10:26:58+0000\'\u003e30\\/Dec\\/16 10:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mikemccand commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94217160  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -0,0 +1,237 @@ \\n    +\\/* \\n    + * Licensed to the Apache Software Foundation (ASF) under one or more \\n    + * contributor license agreements.  See the NOTICE file distributed with \\n    + * this work for additional information regarding copyright ownership. \\n    + * The ASF licenses this file to You under the Apache License, Version 2.0 \\n    + * (the \\\"License\\\"); you may not use this file except in compliance with \\n    + * the License.  You may obtain a copy of the License at \\n    + * \\n    + *      http:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0  \\n    + * \\n    + * Unless required by applicable law or agreed to in writing, software \\n    + * distributed under the License is distributed on an \\\"AS IS\\\" BASIS, \\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. \\n    + * See the License for the specific language governing permissions and \\n    + * limitations under the License. \\n    + *\\/ \\n    + \\n    +package org.apache.lucene.util.graph; \\n    + \\n    +import java.io.IOException; \\n    +import java.util.ArrayList; \\n    +import java.util.HashMap; \\n    +import java.util.List; \\n    +import java.util.Map; \\n    + \\n    +import org.apache.lucene.analysis.TokenStream; \\n    +import org.apache.lucene.analysis.tokenattributes.BytesTermAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.OffsetAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.PositionLengthAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.TermToBytesRefAttribute; \\n    +import org.apache.lucene.util.BytesRef; \\n    +import org.apache.lucene.util.IntsRef; \\n    +import org.apache.lucene.util.automaton.Automaton; \\n    +import org.apache.lucene.util.automaton.FiniteStringsIterator; \\n    +import org.apache.lucene.util.automaton.Operations; \\n    + \\n    +import static org.apache.lucene.util.automaton.Operations.DEFAULT_MAX_DETERMINIZED_STATES; \\n    + \\n    +\\/** \\n    + * Creates a list of  \\n{@link TokenStream}\\n  where each stream is the tokens that make up a finite string in graph token stream.  To do this, \\n    + * the graph token stream is converted to an  \\n{@link Automaton}\\n  and from there we use a  \\n{@link FiniteStringsIterator}\\n  to collect the various \\n    + * token streams for each finite string. \\n    + *\\/ \\n    +public class GraphTokenStreamFiniteStrings { \\n    +  \\/* TODO: \\n    +     Most of this is a combination of code from TermAutomatonQuery and TokenStreamToTermAutomatonQuery. Would be \\n    +     good to make this so it could be shared. *\\/ \\n    +  private final Automaton.Builder builder; \\n    +  Automaton det; \\n    +  private final Map&lt;BytesRef, Integer&gt; termToID = new HashMap&lt;&gt;(); \\n    +  private final Map&lt;Integer, BytesRef&gt; idToTerm = new HashMap&lt;&gt;(); \\n    +  private final Map&lt;Integer, Integer&gt; idToInc = new HashMap&lt;&gt;(); \\n    + \\n    +  public GraphTokenStreamFiniteStrings()  \\n{\\n    +    this.builder = new Automaton.Builder();\\n    +  }\\n     + \\n    +  private static class BytesRefArrayTokenStream extends TokenStream { \\n    +    private final BytesTermAttribute termAtt = addAttribute(BytesTermAttribute.class); \\n    +    private final PositionIncrementAttribute posIncAtt = addAttribute(PositionIncrementAttribute.class); \\n    + \\n    +    private final BytesRef[] terms; \\n    +    private final int[] increments; \\n    +    private int offset; \\n    + \\n    +    BytesRefArrayTokenStream(BytesRef[] terms, int[] increments)  \\n{\\n    +      this.terms = terms;\\n    +      this.increments = increments;\\n    +      assert terms.length == increments.length;\\n    +      offset = 0;\\n    +    }\\n     + \\n    +    @Override \\n    +    public boolean incrementToken() throws IOException { \\n    +      if (offset &lt; terms.length)  \\n{\\n    +        clearAttributes();\\n    +        termAtt.setBytesRef(terms[offset]);\\n    +        posIncAtt.setPositionIncrement(increments[offset]);\\n    +        offset = offset + 1;\\n    +        return true;\\n    +      }\\n     + \\n    +      return false; \\n    +    } \\n    +  } \\n    + \\n    +  \\/** \\n    +   * Gets the list of finite string token streams from the given input graph token stream. \\n    +   *\\/ \\n    +  public List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException { \\n    &#8212; End diff &#8211; \\n\\n     Could we make this method private, make this class\'s constructor private, and add a `static` method here, the sole public method on this class, that receives the incoming `TokenStream` and returns the resulting `TokenStream[]`?  Otherwise the API is sort of awkard, since e.g. this method seems like a getter yet it\'s doing lots of side-effects under the hood ...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15787421\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15787421&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15787421\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787421_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787421_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 10:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T10:31:47+0000\'\u003e30\\/Dec\\/16 10:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mikemccand commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94217475\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94217475\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -0,0 +1,237 @@\u003cbr\\/\u003e\\n    +\\/*\u003cbr\\/\u003e\\n    + * Licensed to the Apache Software Foundation (ASF) under one or more\u003cbr\\/\u003e\\n    + * contributor license agreements.  See the NOTICE file distributed with\u003cbr\\/\u003e\\n    + * this work for additional information regarding copyright ownership.\u003cbr\\/\u003e\\n    + * The ASF licenses this file to You under the Apache License, Version 2.0\u003cbr\\/\u003e\\n    + * (the \\\"License\\\"); you may not use this file except in compliance with\u003cbr\\/\u003e\\n    + * the License.  You may obtain a copy of the License at\u003cbr\\/\u003e\\n    + *\u003cbr\\/\u003e\\n    + *     \u003ca href=\\\"http:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0\u003c\\/a\u003e\u003cbr\\/\u003e\\n    + *\u003cbr\\/\u003e\\n    + * Unless required by applicable law or agreed to in writing, software\u003cbr\\/\u003e\\n    + * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\u003cbr\\/\u003e\\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\u003cbr\\/\u003e\\n    + * See the License for the specific language governing permissions and\u003cbr\\/\u003e\\n    + * limitations under the License.\u003cbr\\/\u003e\\n    + *\\/\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +package org.apache.lucene.util.graph;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import java.io.IOException;\u003cbr\\/\u003e\\n    +import java.util.ArrayList;\u003cbr\\/\u003e\\n    +import java.util.HashMap;\u003cbr\\/\u003e\\n    +import java.util.List;\u003cbr\\/\u003e\\n    +import java.util.Map;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.TokenStream;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.BytesTermAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.OffsetAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.PositionLengthAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.analysis.tokenattributes.TermToBytesRefAttribute;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.BytesRef;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.IntsRef;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.Automaton;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.FiniteStringsIterator;\u003cbr\\/\u003e\\n    +import org.apache.lucene.util.automaton.Operations;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +import static org.apache.lucene.util.automaton.Operations.DEFAULT_MAX_DETERMINIZED_STATES;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +\\/**\u003cbr\\/\u003e\\n    + * Creates a list of \u003c\\/p\u003e\\n{@link TokenStream}\\n\u003cp\u003e where each stream is the tokens that make up a finite string in graph token stream.  To do this,\u003cbr\\/\u003e\\n    + * the graph token stream is converted to an \u003c\\/p\u003e\\n{@link Automaton}\\n\u003cp\u003e and from there we use a \u003c\\/p\u003e\\n{@link FiniteStringsIterator}\\n\u003cp\u003e to collect the various\u003cbr\\/\u003e\\n    + * token streams for each finite string.\u003cbr\\/\u003e\\n    + *\\/\u003cbr\\/\u003e\\n    +public class GraphTokenStreamFiniteStrings {\u003cbr\\/\u003e\\n    +  \\/* TODO:\u003cbr\\/\u003e\\n    +     Most of this is a combination of code from TermAutomatonQuery and TokenStreamToTermAutomatonQuery. Would be\u003cbr\\/\u003e\\n    +     good to make this so it could be shared. *\\/\u003cbr\\/\u003e\\n    +  private final Automaton.Builder builder;\u003cbr\\/\u003e\\n    +  Automaton det;\u003cbr\\/\u003e\\n    +  private final Map&lt;BytesRef, Integer&gt; termToID = new HashMap&lt;&gt;();\u003cbr\\/\u003e\\n    +  private final Map&lt;Integer, BytesRef&gt; idToTerm = new HashMap&lt;&gt;();\u003cbr\\/\u003e\\n    +  private final Map&lt;Integer, Integer&gt; idToInc = new HashMap&lt;&gt;();\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  public GraphTokenStreamFiniteStrings() \u003c\\/p\u003e\\n{\\n    +    this.builder = new Automaton.Builder();\\n    +  }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +  private static class BytesRefArrayTokenStream extends TokenStream {\u003cbr\\/\u003e\\n    +    private final BytesTermAttribute termAtt = addAttribute(BytesTermAttribute.class);\u003cbr\\/\u003e\\n    +    private final PositionIncrementAttribute posIncAtt = addAttribute(PositionIncrementAttribute.class);\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    private final BytesRef[] terms;\u003cbr\\/\u003e\\n    +    private final int[] increments;\u003cbr\\/\u003e\\n    +    private int offset;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    BytesRefArrayTokenStream(BytesRef[] terms, int[] increments) \u003c\\/p\u003e\\n{\\n    +      this.terms = terms;\\n    +      this.increments = increments;\\n    +      assert terms.length == increments.length;\\n    +      offset = 0;\\n    +    }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +    @Override\u003cbr\\/\u003e\\n    +    public boolean incrementToken() throws IOException {\u003cbr\\/\u003e\\n    +      if (offset &lt; terms.length) \u003c\\/p\u003e\\n{\\n    +        clearAttributes();\\n    +        termAtt.setBytesRef(terms[offset]);\\n    +        posIncAtt.setPositionIncrement(increments[offset]);\\n    +        offset = offset + 1;\\n    +        return true;\\n    +      }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +      return false;\u003cbr\\/\u003e\\n    +    }\u003cbr\\/\u003e\\n    +  }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  \\/**\u003cbr\\/\u003e\\n    +   * Gets the list of finite string token streams from the given input graph token stream.\u003cbr\\/\u003e\\n    +   *\\/\u003cbr\\/\u003e\\n    +  public List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException {\u003cbr\\/\u003e\\n    +    \\/\\/ build automation\u003cbr\\/\u003e\\n    +    build(in);\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    List&lt;TokenStream&gt; tokenStreams = new ArrayList&lt;&gt;();\u003cbr\\/\u003e\\n    +    final FiniteStringsIterator finiteStrings = new FiniteStringsIterator(det);\u003cbr\\/\u003e\\n    +    for (IntsRef string; (string = finiteStrings.next()) != null; ) {\u003cbr\\/\u003e\\n    +      final BytesRef[] tokens = new BytesRef\u003cspan class=\\\"error\\\"\u003e&#91;string.length&#93;\u003c\\/span\u003e;\u003cbr\\/\u003e\\n    +      final int[] increments = new int\u003cspan class=\\\"error\\\"\u003e&#91;string.length&#93;\u003c\\/span\u003e;\u003cbr\\/\u003e\\n    +      for (int idx = string.offset, len = string.offset + string.length; idx &lt; len; idx++) {\u003cbr\\/\u003e\\n    +        int id = string.ints\u003cspan class=\\\"error\\\"\u003e&#91;idx&#93;\u003c\\/span\u003e;\u003cbr\\/\u003e\\n    +        int offset = idx - string.offset;\u003cbr\\/\u003e\\n    +        tokens\u003cspan class=\\\"error\\\"\u003e&#91;offset&#93;\u003c\\/span\u003e = idToTerm.get(id);\u003cbr\\/\u003e\\n    +        if (idToInc.containsKey(id)) \u003c\\/p\u003e\\n{\\n    +          increments[offset] = idToInc.get(id);\\n    +        }\\n\u003cp\u003e else \u003c\\/p\u003e\\n{\\n    +          increments[offset] = 1;\\n    +        }\\n\u003cp\u003e    +      }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +      tokenStreams.add(new BytesRefArrayTokenStream(tokens, increments));\u003cbr\\/\u003e\\n    +    }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    return tokenStreams;\u003cbr\\/\u003e\\n    +  }\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +  private void build(final TokenStream in) throws IOException {\u003cbr\\/\u003e\\n    +    if (det != null) \u003c\\/p\u003e\\n{\\n    +      throw new IllegalStateException(\\\"Automation already built\\\");\\n    +    }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +    final TermToBytesRefAttribute termBytesAtt = in.addAttribute(TermToBytesRefAttribute.class);\u003cbr\\/\u003e\\n    +    final PositionIncrementAttribute posIncAtt = in.addAttribute(PositionIncrementAttribute.class);\u003cbr\\/\u003e\\n    +    final PositionLengthAttribute posLengthAtt = in.addAttribute(PositionLengthAttribute.class);\u003cbr\\/\u003e\\n    +    final OffsetAttribute offsetAtt = in.addAttribute(OffsetAttribute.class);\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    in.reset();\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +    int pos = -1;\u003cbr\\/\u003e\\n    +    int lastIncr = 1;\u003cbr\\/\u003e\\n    +    int maxOffset = 0;\u003cbr\\/\u003e\\n    +    int maxPos = -1;\u003cbr\\/\u003e\\n    +    int state = -1;\u003cbr\\/\u003e\\n    +    while (in.incrementToken()) {\u003cbr\\/\u003e\\n    +      int posInc = posIncAtt.getPositionIncrement();\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +      \\/\\/ always use inc 1 while building, but save original increment\u003cbr\\/\u003e\\n    +      int fakePosInc = posInc &gt; 1 ? 1 : posInc;\u003cbr\\/\u003e\\n    +\u003cbr\\/\u003e\\n    +      assert pos &gt; -1 || fakePosInc &gt; 0;\u003cbr\\/\u003e\\n    &#8212; End diff &#8211;\u003c\\/p\u003e\\n\\n\u003cp\u003e    Can we upgrade this to a real `if`?  I.e. we need a well-formed `TokenStream` input ... it cannot have `posInc=0` on its first token.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787421_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787421_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 10:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T10:31:47+0000\'\u003e30\\/Dec\\/16 10:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mikemccand commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94217475  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -0,0 +1,237 @@ \\n    +\\/* \\n    + * Licensed to the Apache Software Foundation (ASF) under one or more \\n    + * contributor license agreements.  See the NOTICE file distributed with \\n    + * this work for additional information regarding copyright ownership. \\n    + * The ASF licenses this file to You under the Apache License, Version 2.0 \\n    + * (the \\\"License\\\"); you may not use this file except in compliance with \\n    + * the License.  You may obtain a copy of the License at \\n    + * \\n    + *      http:\\/\\/www.apache.org\\/licenses\\/LICENSE-2.0  \\n    + * \\n    + * Unless required by applicable law or agreed to in writing, software \\n    + * distributed under the License is distributed on an \\\"AS IS\\\" BASIS, \\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. \\n    + * See the License for the specific language governing permissions and \\n    + * limitations under the License. \\n    + *\\/ \\n    + \\n    +package org.apache.lucene.util.graph; \\n    + \\n    +import java.io.IOException; \\n    +import java.util.ArrayList; \\n    +import java.util.HashMap; \\n    +import java.util.List; \\n    +import java.util.Map; \\n    + \\n    +import org.apache.lucene.analysis.TokenStream; \\n    +import org.apache.lucene.analysis.tokenattributes.BytesTermAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.OffsetAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.PositionLengthAttribute; \\n    +import org.apache.lucene.analysis.tokenattributes.TermToBytesRefAttribute; \\n    +import org.apache.lucene.util.BytesRef; \\n    +import org.apache.lucene.util.IntsRef; \\n    +import org.apache.lucene.util.automaton.Automaton; \\n    +import org.apache.lucene.util.automaton.FiniteStringsIterator; \\n    +import org.apache.lucene.util.automaton.Operations; \\n    + \\n    +import static org.apache.lucene.util.automaton.Operations.DEFAULT_MAX_DETERMINIZED_STATES; \\n    + \\n    +\\/** \\n    + * Creates a list of  \\n{@link TokenStream}\\n  where each stream is the tokens that make up a finite string in graph token stream.  To do this, \\n    + * the graph token stream is converted to an  \\n{@link Automaton}\\n  and from there we use a  \\n{@link FiniteStringsIterator}\\n  to collect the various \\n    + * token streams for each finite string. \\n    + *\\/ \\n    +public class GraphTokenStreamFiniteStrings { \\n    +  \\/* TODO: \\n    +     Most of this is a combination of code from TermAutomatonQuery and TokenStreamToTermAutomatonQuery. Would be \\n    +     good to make this so it could be shared. *\\/ \\n    +  private final Automaton.Builder builder; \\n    +  Automaton det; \\n    +  private final Map&lt;BytesRef, Integer&gt; termToID = new HashMap&lt;&gt;(); \\n    +  private final Map&lt;Integer, BytesRef&gt; idToTerm = new HashMap&lt;&gt;(); \\n    +  private final Map&lt;Integer, Integer&gt; idToInc = new HashMap&lt;&gt;(); \\n    + \\n    +  public GraphTokenStreamFiniteStrings()  \\n{\\n    +    this.builder = new Automaton.Builder();\\n    +  }\\n     + \\n    +  private static class BytesRefArrayTokenStream extends TokenStream { \\n    +    private final BytesTermAttribute termAtt = addAttribute(BytesTermAttribute.class); \\n    +    private final PositionIncrementAttribute posIncAtt = addAttribute(PositionIncrementAttribute.class); \\n    + \\n    +    private final BytesRef[] terms; \\n    +    private final int[] increments; \\n    +    private int offset; \\n    + \\n    +    BytesRefArrayTokenStream(BytesRef[] terms, int[] increments)  \\n{\\n    +      this.terms = terms;\\n    +      this.increments = increments;\\n    +      assert terms.length == increments.length;\\n    +      offset = 0;\\n    +    }\\n     + \\n    +    @Override \\n    +    public boolean incrementToken() throws IOException { \\n    +      if (offset &lt; terms.length)  \\n{\\n    +        clearAttributes();\\n    +        termAtt.setBytesRef(terms[offset]);\\n    +        posIncAtt.setPositionIncrement(increments[offset]);\\n    +        offset = offset + 1;\\n    +        return true;\\n    +      }\\n     + \\n    +      return false; \\n    +    } \\n    +  } \\n    + \\n    +  \\/** \\n    +   * Gets the list of finite string token streams from the given input graph token stream. \\n    +   *\\/ \\n    +  public List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException { \\n    +    \\/\\/ build automation \\n    +    build(in); \\n    + \\n    +    List&lt;TokenStream&gt; tokenStreams = new ArrayList&lt;&gt;(); \\n    +    final FiniteStringsIterator finiteStrings = new FiniteStringsIterator(det); \\n    +    for (IntsRef string; (string = finiteStrings.next()) != null; ) { \\n    +      final BytesRef[] tokens = new BytesRef &#91;string.length&#93; ; \\n    +      final int[] increments = new int &#91;string.length&#93; ; \\n    +      for (int idx = string.offset, len = string.offset + string.length; idx &lt; len; idx++) { \\n    +        int id = string.ints &#91;idx&#93; ; \\n    +        int offset = idx - string.offset; \\n    +        tokens &#91;offset&#93;  = idToTerm.get(id); \\n    +        if (idToInc.containsKey(id))  \\n{\\n    +          increments[offset] = idToInc.get(id);\\n    +        }\\n  else  \\n{\\n    +          increments[offset] = 1;\\n    +        }\\n     +      } \\n    + \\n    +      tokenStreams.add(new BytesRefArrayTokenStream(tokens, increments)); \\n    +    } \\n    + \\n    +    return tokenStreams; \\n    +  } \\n    + \\n    +  private void build(final TokenStream in) throws IOException { \\n    +    if (det != null)  \\n{\\n    +      throw new IllegalStateException(\\\"Automation already built\\\");\\n    +    }\\n     + \\n    +    final TermToBytesRefAttribute termBytesAtt = in.addAttribute(TermToBytesRefAttribute.class); \\n    +    final PositionIncrementAttribute posIncAtt = in.addAttribute(PositionIncrementAttribute.class); \\n    +    final PositionLengthAttribute posLengthAtt = in.addAttribute(PositionLengthAttribute.class); \\n    +    final OffsetAttribute offsetAtt = in.addAttribute(OffsetAttribute.class); \\n    + \\n    +    in.reset(); \\n    + \\n    +    int pos = -1; \\n    +    int lastIncr = 1; \\n    +    int maxOffset = 0; \\n    +    int maxPos = -1; \\n    +    int state = -1; \\n    +    while (in.incrementToken()) { \\n    +      int posInc = posIncAtt.getPositionIncrement(); \\n    + \\n    +      \\/\\/ always use inc 1 while building, but save original increment \\n    +      int fakePosInc = posInc &gt; 1 ? 1 : posInc; \\n    + \\n    +      assert pos &gt; -1 || fakePosInc &gt; 0; \\n    &#8212; End diff &#8211; \\n\\n     Can we upgrade this to a real `if`?  I.e. we need a well-formed `TokenStream` input ... it cannot have `posInc=0` on its first token.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15787983\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15787983&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15787983\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787983_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787983_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T16:50:58+0000\'\u003e30\\/Dec\\/16 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mattweber commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    @mikemccand I addressed you comments.  I also added some more tests and fixed a bug that would yield wrong increment when a term that had previously been seen was found again with an increment of 0.  Tests were added.  I have squashed these changes with the previous commit so it is clear to see the difference between the original PR which did not support position increments and the new one that does.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15787983_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15787983_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T16:50:58+0000\'\u003e30\\/Dec\\/16 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mattweber commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129  \\n\\n     @mikemccand I addressed you comments.  I also added some more tests and fixed a bug that would yield wrong increment when a term that had previously been seen was found again with an increment of 0.  Tests were added.  I have squashed these changes with the previous commit so it is clear to see the difference between the original PR which did not support position increments and the new one that does.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15788035\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15788035&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15788035\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15788035_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15788035_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T17:26:53+0000\'\u003e30\\/Dec\\/16 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user dsmiley commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94243375\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94243375\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -210,85 +199,41 @@ private void finish() {\u003cbr\\/\u003e\\n        *\\/\u003cbr\\/\u003e\\n       private void finish(int maxDeterminizedStates) {\u003cbr\\/\u003e\\n         Automaton automaton = builder.finish();\u003cbr\\/\u003e\\n    -\u003cbr\\/\u003e\\n    &#8212; End diff &#8211;\u003c\\/p\u003e\\n\\n\u003cp\u003e    So all this code here removed wasn\'t needed after all?  It\'s nice to see it all go away (less to maintain \\/ less complexity) \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15788035_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15788035_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T17:26:53+0000\'\u003e30\\/Dec\\/16 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user dsmiley commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94243375  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -210,85 +199,41 @@ private void finish() { \\n        *\\/ \\n       private void finish(int maxDeterminizedStates) { \\n         Automaton automaton = builder.finish(); \\n    - \\n    &#8212; End diff &#8211; \\n\\n     So all this code here removed wasn\'t needed after all?  It\'s nice to see it all go away (less to maintain \\/ less complexity)                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15788036\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15788036&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15788036\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15788036_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15788036_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T17:26:53+0000\'\u003e30\\/Dec\\/16 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user dsmiley commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94243010\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94243010\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -210,85 +199,41 @@ private void finish() {\u003cbr\\/\u003e\\n        *\\/\u003cbr\\/\u003e\\n       private void finish(int maxDeterminizedStates) {\u003cbr\\/\u003e\\n         Automaton automaton = builder.finish();\u003cbr\\/\u003e\\n    -\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003e\\/\\/ System.out.println(\\\"before det:\\\\n\\\" + automaton.toDot());\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003eTransition t = new Transition();\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ TODO: should we add \\\"eps back to initial node\\\" for all states,\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ and det that?  then we don\'t need to revisit initial node at\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ every position?  but automaton could blow up?  And, this makes it\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ harder to skip useless positions at search time?\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003eif (anyTermID != -1) {\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ Make sure there are no leading or trailing ANY:\u003c\\/li\u003e\\n\\t\u003cli\u003eint count = automaton.initTransition(0, t);\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int i = 0; i &lt; count; i++) {\u003c\\/li\u003e\\n\\t\u003cli\u003eautomaton.getNextTransition(t);\u003c\\/li\u003e\\n\\t\u003cli\u003eif (anyTermID &gt;= t.min &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -          throw new IllegalStateException(\\\"automaton cannot lead with an ANY transition\\\");\\n    -        }\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003eint numStates = automaton.getNumStates();\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int i = 0; i &lt; numStates; i++) {\u003c\\/li\u003e\\n\\t\u003cli\u003ecount = automaton.initTransition(i, t);\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int j = 0; j &lt; count; j++) {\u003c\\/li\u003e\\n\\t\u003cli\u003eautomaton.getNextTransition(t);\u003c\\/li\u003e\\n\\t\u003cli\u003eif (automaton.isAccept(t.dest) &amp;&amp; anyTermID &gt;= t.min &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -            throw new IllegalStateException(\\\"automaton cannot end with an ANY transition\\\");\\n    -          }\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003eint termCount = termToID.size();\u003cbr\\/\u003e\\n    -\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ We have to carefully translate these transitions so automaton\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ realizes they also match all other terms:\u003c\\/li\u003e\\n\\t\u003cli\u003eAutomaton newAutomaton = new Automaton();\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int i = 0; i &lt; numStates; i++) \\n{\\n    -        newAutomaton.createState();\\n    -        newAutomaton.setAccept(i, automaton.isAccept(i));\\n    -      }\\n\u003cp\u003e    -\u003c\\/p\u003e\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int i = 0; i &lt; numStates; i++) {\u003c\\/li\u003e\\n\\t\u003cli\u003ecount = automaton.initTransition(i, t);\u003c\\/li\u003e\\n\\t\u003cli\u003efor (int j = 0; j &lt; count; j++) {\u003c\\/li\u003e\\n\\t\u003cli\u003eautomaton.getNextTransition(t);\u003c\\/li\u003e\\n\\t\u003cli\u003eint min, max;\u003c\\/li\u003e\\n\\t\u003cli\u003eif (t.min &lt;= anyTermID &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -            \\/\\/ Match any term\\n    -            min = 0;\\n    -            max = termCount - 1;\\n    -          }\\n\u003cp\u003e else \u003c\\/p\u003e\\n{\\n    -            min = t.min;\\n    -            max = t.max;\\n    -          }\u003c\\/li\u003e\\n\\t\u003cli\u003enewAutomaton.addTransition(t.source, t.dest, min, max);\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003c\\/li\u003e\\n\\t\u003cli\u003enewAutomaton.finishState();\u003c\\/li\u003e\\n\\t\u003cli\u003eautomaton = newAutomaton;\u003c\\/li\u003e\\n\\t\u003cli\u003e}\u003cbr\\/\u003e\\n    -\u003cbr\\/\u003e\\n         det = Operations.removeDeadStates(Operations.determinize(automaton, maxDeterminizedStates));\u003cbr\\/\u003e\\n       }\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eprivate int getTermID(BytesRef term) {\u003c\\/li\u003e\\n\\t\u003cli\u003eInteger id = termToID.get(term);\u003c\\/li\u003e\\n\\t\u003cli\u003eif (id == null) {\u003c\\/li\u003e\\n\\t\u003cli\u003eid = termToID.size();\u003c\\/li\u003e\\n\\t\u003cli\u003eif (term != null) \\n{\\n    -        term = BytesRef.deepCopyOf(term);\\n    -      }\u003c\\/li\u003e\\n\\t\u003cli\u003etermToID.put(term, id);\u003cbr\\/\u003e\\n    +  \\/**\u003cbr\\/\u003e\\n    +   * Gets an integer id for a given term.\u003cbr\\/\u003e\\n    +   *\u003cbr\\/\u003e\\n    +   * If there is no position gaps for this token then we can reuse the id for the same term if it appeared at another\u003cbr\\/\u003e\\n    +   * position without a gap.  If we have a position gap generate a new id so we can keep track of the position\u003cbr\\/\u003e\\n    +   * increment.\u003cbr\\/\u003e\\n    +   *\\/\u003cbr\\/\u003e\\n    +  private int getTermID(int incr, int prevIncr, BytesRef term) {\u003cbr\\/\u003e\\n    +    assert term != null;\u003cbr\\/\u003e\\n    +    boolean isStackedGap = incr == 0 &amp;&amp; prevIncr &gt; 1;\u003cbr\\/\u003e\\n    +    boolean hasGap = incr &gt; 1;\u003cbr\\/\u003e\\n    +    term = BytesRef.deepCopyOf(term);\\n\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\\t\u003cli\u003eEnd diff &#8211;\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e    The deepCopyOf is only needed if you generate a new ID, not for an existing one.  \u003c\\/p\u003e\\n\\n\u003cp\u003e    BTW... have you seen BytesRefHash?  I think re-using that could minimize the code here to deal with this stuff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15788036_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15788036_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T17:26:53+0000\'\u003e30\\/Dec\\/16 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user dsmiley commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94243010  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -210,85 +199,41 @@ private void finish() { \\n        *\\/ \\n       private void finish(int maxDeterminizedStates) { \\n         Automaton automaton = builder.finish(); \\n    - \\n \\n\\t \\/\\/ System.out.println(\\\"before det:\\\\n\\\" + automaton.toDot()); \\n    - \\n\\t Transition t = new Transition(); \\n    - \\n\\t \\/\\/ TODO: should we add \\\"eps back to initial node\\\" for all states, \\n\\t \\/\\/ and det that?  then we don\'t need to revisit initial node at \\n\\t \\/\\/ every position?  but automaton could blow up?  And, this makes it \\n\\t \\/\\/ harder to skip useless positions at search time? \\n    - \\n\\t if (anyTermID != -1) { \\n    - \\n\\t \\/\\/ Make sure there are no leading or trailing ANY: \\n\\t int count = automaton.initTransition(0, t); \\n\\t for (int i = 0; i &lt; count; i++) { \\n\\t automaton.getNextTransition(t); \\n\\t if (anyTermID &gt;= t.min &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -          throw new IllegalStateException(\\\"automaton cannot lead with an ANY transition\\\");\\n    -        } \\n\\t } \\n    - \\n\\t int numStates = automaton.getNumStates(); \\n\\t for (int i = 0; i &lt; numStates; i++) { \\n\\t count = automaton.initTransition(i, t); \\n\\t for (int j = 0; j &lt; count; j++) { \\n\\t automaton.getNextTransition(t); \\n\\t if (automaton.isAccept(t.dest) &amp;&amp; anyTermID &gt;= t.min &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -            throw new IllegalStateException(\\\"automaton cannot end with an ANY transition\\\");\\n    -          } \\n\\t } \\n\\t } \\n    - \\n\\t int termCount = termToID.size(); \\n    - \\n\\t \\/\\/ We have to carefully translate these transitions so automaton \\n\\t \\/\\/ realizes they also match all other terms: \\n\\t Automaton newAutomaton = new Automaton(); \\n\\t for (int i = 0; i &lt; numStates; i++) \\n{\\n    -        newAutomaton.createState();\\n    -        newAutomaton.setAccept(i, automaton.isAccept(i));\\n    -      }\\n     -  \\n\\t for (int i = 0; i &lt; numStates; i++) { \\n\\t count = automaton.initTransition(i, t); \\n\\t for (int j = 0; j &lt; count; j++) { \\n\\t automaton.getNextTransition(t); \\n\\t int min, max; \\n\\t if (t.min &lt;= anyTermID &amp;&amp; anyTermID &lt;= t.max) \\n{\\n    -            \\/\\/ Match any term\\n    -            min = 0;\\n    -            max = termCount - 1;\\n    -          }\\n  else  \\n{\\n    -            min = t.min;\\n    -            max = t.max;\\n    -          } \\n\\t newAutomaton.addTransition(t.source, t.dest, min, max); \\n\\t } \\n\\t } \\n\\t newAutomaton.finishState(); \\n\\t automaton = newAutomaton; \\n\\t } \\n    - \\n         det = Operations.removeDeadStates(Operations.determinize(automaton, maxDeterminizedStates)); \\n       } \\n \\n\\n\\n \\n\\t private int getTermID(BytesRef term) { \\n\\t Integer id = termToID.get(term); \\n\\t if (id == null) { \\n\\t id = termToID.size(); \\n\\t if (term != null) \\n{\\n    -        term = BytesRef.deepCopyOf(term);\\n    -      } \\n\\t termToID.put(term, id); \\n    +  \\/** \\n    +   * Gets an integer id for a given term. \\n    +   * \\n    +   * If there is no position gaps for this token then we can reuse the id for the same term if it appeared at another \\n    +   * position without a gap.  If we have a position gap generate a new id so we can keep track of the position \\n    +   * increment. \\n    +   *\\/ \\n    +  private int getTermID(int incr, int prevIncr, BytesRef term) { \\n    +    assert term != null; \\n    +    boolean isStackedGap = incr == 0 &amp;&amp; prevIncr &gt; 1; \\n    +    boolean hasGap = incr &gt; 1; \\n    +    term = BytesRef.deepCopyOf(term);\\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t End diff &#8211; \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n     The deepCopyOf is only needed if you generate a new ID, not for an existing one.   \\n\\n     BTW... have you seen BytesRefHash?  I think re-using that could minimize the code here to deal with this stuff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15788037\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15788037&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15788037\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15788037_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15788037_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T17:26:53+0000\'\u003e30\\/Dec\\/16 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user dsmiley commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94244009\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94244009\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -80,22 +77,41 @@ public boolean incrementToken() throws IOException {\u003cbr\\/\u003e\\n         }\u003cbr\\/\u003e\\n       }\u003c\\/p\u003e\\n\\n\u003cp\u003e    +  private GraphTokenStreamFiniteStrings() \u003c\\/p\u003e\\n{\\n    +    this.builder = new Automaton.Builder();\\n    +  }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n       \\/**\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eGets the list of finite string token streams from the given input graph token stream.\u003cbr\\/\u003e\\n        *\\/\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003epublic List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException {\u003c\\/li\u003e\\n\\t\u003cli\u003e\\/\\/ build automation\u003cbr\\/\u003e\\n    +  public static List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException \\n{\\n    +    GraphTokenStreamFiniteStrings gfs = new GraphTokenStreamFiniteStrings();\\n    +    return gfs.process(in);\\n    +  }\\n\u003cp\u003e    +\u003cbr\\/\u003e\\n    +  \\/**\u003cbr\\/\u003e\\n    +   * Builds automaton and builds the finite string token streams.\u003cbr\\/\u003e\\n    +   *\\/\u003cbr\\/\u003e\\n    +  private List&lt;TokenStream&gt; process(final TokenStream in) throws IOException {\u003cbr\\/\u003e\\n         build(in);\u003c\\/p\u003e\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e         List&lt;TokenStream&gt; tokenStreams = new ArrayList&lt;&gt;();\u003cbr\\/\u003e\\n         final FiniteStringsIterator finiteStrings = new FiniteStringsIterator(det);\u003cbr\\/\u003e\\n         for (IntsRef string; (string = finiteStrings.next()) != null; ) {\u003cbr\\/\u003e\\n           final BytesRef[] tokens = new BytesRef\u003cspan class=\\\"error\\\"\u003e&#91;string.length&#93;\u003c\\/span\u003e;\u003cbr\\/\u003e\\n    &#8212; End diff &#8211;\u003c\\/p\u003e\\n\\n\u003cp\u003e    Hmm; rather than materializing an array of tokens and increments, maybe you could simply give the IntsRefString  to BytesRefArrayTokenStream (and make BRATS not static) so that it could do this on the fly?  Not a big deal either way (current or my proposal).  If you do as I suggest then BRATS would no longer be a suitable name; maybe simply FiniteStringTokenStream or CustomTokenStream.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15788037_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15788037_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T17:26:53+0000\'\u003e30\\/Dec\\/16 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user dsmiley commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94244009  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -80,22 +77,41 @@ public boolean incrementToken() throws IOException { \\n         } \\n       } \\n\\n     +  private GraphTokenStreamFiniteStrings()  \\n{\\n    +    this.builder = new Automaton.Builder();\\n    +  }\\n     + \\n       \\/** \\n \\n\\t Gets the list of finite string token streams from the given input graph token stream. \\n        *\\/ \\n \\n \\n\\t public List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException { \\n\\t \\/\\/ build automation \\n    +  public static List&lt;TokenStream&gt; getTokenStreams(final TokenStream in) throws IOException \\n{\\n    +    GraphTokenStreamFiniteStrings gfs = new GraphTokenStreamFiniteStrings();\\n    +    return gfs.process(in);\\n    +  }\\n     + \\n    +  \\/** \\n    +   * Builds automaton and builds the finite string token streams. \\n    +   *\\/ \\n    +  private List&lt;TokenStream&gt; process(final TokenStream in) throws IOException { \\n         build(in);  \\n \\n\\n\\n          List&lt;TokenStream&gt; tokenStreams = new ArrayList&lt;&gt;(); \\n         final FiniteStringsIterator finiteStrings = new FiniteStringsIterator(det); \\n         for (IntsRef string; (string = finiteStrings.next()) != null; ) { \\n           final BytesRef[] tokens = new BytesRef &#91;string.length&#93; ; \\n    &#8212; End diff &#8211; \\n\\n     Hmm; rather than materializing an array of tokens and increments, maybe you could simply give the IntsRefString  to BytesRefArrayTokenStream (and make BRATS not static) so that it could do this on the fly?  Not a big deal either way (current or my proposal).  If you do as I suggest then BRATS would no longer be a suitable name; maybe simply FiniteStringTokenStream or CustomTokenStream.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15788038\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15788038&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15788038\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15788038_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15788038_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T17:26:53+0000\'\u003e30\\/Dec\\/16 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user dsmiley commented on a diff in the pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94241922\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94241922\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212;\u003cbr\\/\u003e\\n    @@ -80,22 +77,41 @@ public boolean incrementToken() throws IOException {\u003cbr\\/\u003e\\n         }\u003cbr\\/\u003e\\n       }\u003c\\/p\u003e\\n\\n\u003cp\u003e    +  private GraphTokenStreamFiniteStrings() {\u003cbr\\/\u003e\\n    +    this.builder = new Automaton.Builder();\u003cbr\\/\u003e\\n    &#8212; End diff &#8211;\u003c\\/p\u003e\\n\\n\u003cp\u003e    The other fields are initialized at the declaration; might as well move this here too?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15788038_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15788038_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T17:26:53+0000\'\u003e30\\/Dec\\/16 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user dsmiley commented on a diff in the pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129#discussion_r94241922  \\n\\n     &#8212; Diff: lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/util\\/graph\\/GraphTokenStreamFiniteStrings.java &#8212; \\n    @@ -80,22 +77,41 @@ public boolean incrementToken() throws IOException { \\n         } \\n       } \\n\\n     +  private GraphTokenStreamFiniteStrings() { \\n    +    this.builder = new Automaton.Builder(); \\n    &#8212; End diff &#8211; \\n\\n     The other fields are initialized at the declaration; might as well move this here too?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15788263\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15788263&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15788263\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15788263_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15788263_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 20:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T20:14:07+0000\'\u003e30\\/Dec\\/16 20:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mattweber commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    Thanks @dsmiley!  I have just pushed up code with your suggestions except for using `BytesRefHash` due to the fact we might have the same `BytesRef` but need a different id because we have position gap.\u003c\\/p\u003e\\n\\n\u003cp\u003e    This has been great, love the feedback!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15788263_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15788263_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/16 20:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-30T20:14:07+0000\'\u003e30\\/Dec\\/16 20:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mattweber commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129  \\n\\n     Thanks @dsmiley!  I have just pushed up code with your suggestions except for using `BytesRefHash` due to the fact we might have the same `BytesRef` but need a different id because we have position gap. \\n\\n     This has been great, love the feedback!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15789338\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15789338&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15789338\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15789338_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15789338_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/16 10:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-31T10:59:57+0000\'\u003e31\\/Dec\\/16 10:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mikemccand commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    This change looks great to me!  What an awesome improvement, to properly use graph token streams at search time so multi-token synonyms are correct.\u003c\\/p\u003e\\n\\n\u003cp\u003e    I\'ll push this in a few days once I\'m back home unless someone pushes first (@dsmiley feel free)...\u003c\\/p\u003e\\n\\n\u003cp\u003e    Thank you @mattweber!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15789338_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15789338_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/16 10:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-31T10:59:57+0000\'\u003e31\\/Dec\\/16 10:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mikemccand commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129  \\n\\n     This change looks great to me!  What an awesome improvement, to properly use graph token streams at search time so multi-token synonyms are correct. \\n\\n     I\'ll push this in a few days once I\'m back home unless someone pushes first (@dsmiley feel free)... \\n\\n     Thank you @mattweber!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15789729\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15789729&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15789729\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mattweber\\\" id=\\\"commentauthor_15789729_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mattweber\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mattweber\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Matt Weber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15789729_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/16 16:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-31T16:41:10+0000\'\u003e31\\/Dec\\/16 16:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGreat thank you both!  I have updated the brach_6x PR with the latest changes as well as rebased+squashed both.  Happy New Year!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mattweber\\\" id=\\\"commentauthor_15789729_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mattweber\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mattweber\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Matt Weber\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15789729_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/16 16:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-12-31T16:41:10+0000\'\u003e31\\/Dec\\/16 16:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Great thank you both!  I have updated the brach_6x PR with the latest changes as well as rebased+squashed both.  Happy New Year!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15794693\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15794693&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15794693\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15794693_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794693_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:15:52+0000\'\u003e03\\/Jan\\/17 10:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1bcf9a251d597cdc029295325b287ce5ce661bec in lucene-solr\'s branch refs\\/heads\\/master from Mike McCandless\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=1bcf9a2\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=1bcf9a2\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-7603\\\" title=\\\"Support Graph Token Streams in QueryBuilder\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-7603\\\"\u003e\u003cdel\u003eLUCENE-7603\u003c\\/del\u003e\u003c\\/a\u003e: add CHANGES entry\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15794693_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794693_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:15:52+0000\'\u003e03\\/Jan\\/17 10:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1bcf9a251d597cdc029295325b287ce5ce661bec in lucene-solr\'s branch refs\\/heads\\/master from Mike McCandless \\n[  https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=1bcf9a2  ] \\n\\n   LUCENE-7603  : add CHANGES entry              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15794706\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15794706&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15794706\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15794706_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794706_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:22:37+0000\'\u003e03\\/Jan\\/17 10:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mikemccand commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    I\'ve merged this into Lucene\'s master (7.0), and I\'m working on 6.x (#130) now.  Thanks @mattweber! Can you close this?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15794706_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794706_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:22:37+0000\'\u003e03\\/Jan\\/17 10:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mikemccand commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129  \\n\\n     I\'ve merged this into Lucene\'s master (7.0), and I\'m working on 6.x (#130) now.  Thanks @mattweber! Can you close this?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15794725\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15794725&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15794725\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15794725_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794725_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:32:27+0000\'\u003e03\\/Jan\\/17 10:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 018df31da8b6b5beeb767c90d7ef2a784eca354a in lucene-solr\'s branch refs\\/heads\\/master from Mike McCandless\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=018df31\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=018df31\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-7603\\\" title=\\\"Support Graph Token Streams in QueryBuilder\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-7603\\\"\u003e\u003cdel\u003eLUCENE-7603\u003c\\/del\u003e\u003c\\/a\u003e: add package-info.java for new package\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15794725_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794725_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:32:27+0000\'\u003e03\\/Jan\\/17 10:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 018df31da8b6b5beeb767c90d7ef2a784eca354a in lucene-solr\'s branch refs\\/heads\\/master from Mike McCandless \\n[  https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=018df31  ] \\n\\n   LUCENE-7603  : add package-info.java for new package              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15794739\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15794739&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15794739\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15794739_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794739_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:38:57+0000\'\u003e03\\/Jan\\/17 10:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit c980f6a1c2a33a039d09a83cd5b9b95a58fa784f in lucene-solr\'s branch refs\\/heads\\/branch_6x from Mike McCandless\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=c980f6a\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=c980f6a\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-7603\\\" title=\\\"Support Graph Token Streams in QueryBuilder\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-7603\\\"\u003e\u003cdel\u003eLUCENE-7603\u003c\\/del\u003e\u003c\\/a\u003e: handle graph token streams in query parsers\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15794739_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794739_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:38:57+0000\'\u003e03\\/Jan\\/17 10:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit c980f6a1c2a33a039d09a83cd5b9b95a58fa784f in lucene-solr\'s branch refs\\/heads\\/branch_6x from Mike McCandless \\n[  https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=c980f6a  ] \\n\\n   LUCENE-7603  : handle graph token streams in query parsers              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15794741\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15794741&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15794741\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15794741_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794741_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:39:32+0000\'\u003e03\\/Jan\\/17 10:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mikemccand commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    I\'ve merged this into Lucene\'s branch_6x; thank you @mattweber!  Can you please close this now?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15794741_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794741_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:39:32+0000\'\u003e03\\/Jan\\/17 10:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mikemccand commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130  \\n\\n     I\'ve merged this into Lucene\'s branch_6x; thank you @mattweber!  Can you please close this now?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15794743\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15794743&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15794743\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15794743_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794743_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:39:45+0000\'\u003e03\\/Jan\\/17 10:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user asfgit closed the pull request at:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15794743_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794743_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:39:45+0000\'\u003e03\\/Jan\\/17 10:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user asfgit closed the pull request at: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15794745\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15794745&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15794745\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_15794745_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794745_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:40:20+0000\'\u003e03\\/Jan\\/17 10:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mattweber\\\" class=\\\"user-hover\\\" rel=\\\"mattweber\\\"\u003eMatt Weber\u003c\\/a\u003e!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_15794745_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15794745_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 10:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T10:40:20+0000\'\u003e03\\/Jan\\/17 10:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you  Matt Weber !              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15795128\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15795128&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15795128\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15795128_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15795128_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 14:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T14:02:32+0000\'\u003e03\\/Jan\\/17 14:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user mattweber closed the pull request at:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15795128_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15795128_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/17 14:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-01-03T14:02:32+0000\'\u003e03\\/Jan\\/17 14:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user mattweber closed the pull request at: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/129               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15871563\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-7603?focusedCommentId=15871563&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15871563\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15871563_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15871563_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Feb\\/17 09:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-02-17T09:53:54+0000\'\u003e17\\/Feb\\/17 09:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user EreMaijala commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    I believe this has caused \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-7698\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-7698\u003c\\/a\u003e.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15871563_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15871563_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Feb\\/17 09:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-02-17T09:53:54+0000\'\u003e17\\/Feb\\/17 09:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user EreMaijala commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/130  \\n\\n     I believe this has caused  https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-7698 .              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310110";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310110&amp;avatarId=10061\\\" alt=\\\"Lucene - Core\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\"\u003eLucene - Core\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1516206855461"> 
    <input type="hidden" title="jira.request.server.time" value="643"> 
    <input type="hidden" title="jira.request.id" value="994x7860118x3"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="4"> 
    <input type="hidden" title="db.reads.time.in.ms" value="40"> 
    <input type="hidden" title="db.conns.time.in.ms" value="50"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 994x7860118x3
	          REQUEST TIMESTAMP : [17/Jan/2018:16:34:15 +0000]
	               REQUEST TIME : 0.6430
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 4

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=21, elapsedTotal=40813296, elapsedMin=760497, elapsedMax=14676808, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=25, elapsedTotal=50115549, elapsedMin=844543, elapsedMax=14754256, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>