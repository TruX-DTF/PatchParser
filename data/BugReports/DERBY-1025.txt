<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|ed534992bbb093958eb7e1d5f2e58615c86baa28|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"5ba065bcfa4da3\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-1025"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-1025] [xa] client XAResource.start() does not commit an active local transaction when auto commit is true - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-1025] [xa] client XAResource.start() does not commit an active local transaction when auto commit is true - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-1025">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-1025" href="/jira/browse/DERBY-1025" id="key-val" rel="12329302">DERBY-1025</a></li>
                </ol>
                <h1 id="summary-val">[xa] client XAResource.start() does not commit an active local transaction when auto commit is true</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-1025"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-1025/DERBY-1025.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-1025/DERBY-1025.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-1025/DERBY-1025.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-1025/DERBY-1025.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.1.3.1" title="10.1.3.1 ">10.1.3.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.2.1.6" title="10.2.1.6 ">10.2.1.6</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+%22Network+Client%22" title="Network Client ">Network Client</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12329302-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Embedded XAResource.start() implementation commits the active local transaction on the Connection associated with the XAResource if the connection is auto-commit mode.</p> 
                  <p>Client incorrectly throws an XAException with the XAER_RMFAIL error code (see <a href="https://issues.apache.org/jira/browse/DERBY-1024" title="Client's XAResource.start throws XAException with XAER_RMFAIL when local transaction is active" class="issue-link" data-issue-key="DERBY-1024"><del>DERBY-1024</del></a>)</p> 
                  <p>XATest contains a work-around for client (calling commit) with a comment with this bug number.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-1025?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-1025?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-1025?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-1025?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12325360" data-issue-id="12329302" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12325360/derby-1025-10.1.diff" draggable="true" data-downloadurl="text/x-patch:derby-1025-10.1.diff:https://issues.apache.org/jira/secure/attachment/12325360/derby-1025-10.1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12325360/derby-1025-10.1.diff" title="Latest  15/Apr/06 06:33 - Deepa Remesh" draggable="true" data-downloadurl="text/x-patch:derby-1025-10.1.diff:https://issues.apache.org/jira/secure/attachment/12325360/derby-1025-10.1.diff">derby-1025-10.1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-15T06:33:53.000Z">15/Apr/06 06:33</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Deepa Remesh
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12325361" data-issue-id="12329302" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12325361/derby-1025-10.1.status" draggable="true" data-downloadurl="application/octet-stream:derby-1025-10.1.status:https://issues.apache.org/jira/secure/attachment/12325361/derby-1025-10.1.status"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12325361/derby-1025-10.1.status" title="Latest  15/Apr/06 06:33 - Deepa Remesh" draggable="true" data-downloadurl="application/octet-stream:derby-1025-10.1.status:https://issues.apache.org/jira/secure/attachment/12325361/derby-1025-10.1.status">derby-1025-10.1.status</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-15T06:33:53.000Z">15/Apr/06 06:33</time>
                   </dd>
                   <dd class="attachment-size">
                    0.2 kB
                   </dd>
                   <dd class="attachment-author">
                    Deepa Remesh
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12325326" data-issue-id="12329302" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12325326/derby-1025-draft1.diff" draggable="true" data-downloadurl="text/x-patch:derby-1025-draft1.diff:https://issues.apache.org/jira/secure/attachment/12325326/derby-1025-draft1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12325326/derby-1025-draft1.diff" title="Latest  14/Apr/06 06:38 - Deepa Remesh" draggable="true" data-downloadurl="text/x-patch:derby-1025-draft1.diff:https://issues.apache.org/jira/secure/attachment/12325326/derby-1025-draft1.diff">derby-1025-draft1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-14T06:38:21.000Z">14/Apr/06 06:38</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Deepa Remesh
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12325327" data-issue-id="12329302" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12325327/derby-1025-draft1.status" draggable="true" data-downloadurl="application/octet-stream:derby-1025-draft1.status:https://issues.apache.org/jira/secure/attachment/12325327/derby-1025-draft1.status"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12325327/derby-1025-draft1.status" title="Latest  14/Apr/06 06:38 - Deepa Remesh" draggable="true" data-downloadurl="application/octet-stream:derby-1025-draft1.status:https://issues.apache.org/jira/secure/attachment/12325327/derby-1025-draft1.status">derby-1025-draft1.status</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-14T06:38:21.000Z">14/Apr/06 06:38</time>
                   </dd>
                   <dd class="attachment-size">
                    0.5 kB
                   </dd>
                   <dd class="attachment-author">
                    Deepa Remesh
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12325336" data-issue-id="12329302" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12325336/derby-1025-patch1-v1.diff" draggable="true" data-downloadurl="text/x-patch:derby-1025-patch1-v1.diff:https://issues.apache.org/jira/secure/attachment/12325336/derby-1025-patch1-v1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12325336/derby-1025-patch1-v1.diff" title="Latest  14/Apr/06 21:23 - Deepa Remesh" draggable="true" data-downloadurl="text/x-patch:derby-1025-patch1-v1.diff:https://issues.apache.org/jira/secure/attachment/12325336/derby-1025-patch1-v1.diff">derby-1025-patch1-v1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-14T21:23:33.000Z">14/Apr/06 21:23</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Deepa Remesh
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12325337" data-issue-id="12329302" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12325337/derby-1025-patch1-v1.status" draggable="true" data-downloadurl="application/octet-stream:derby-1025-patch1-v1.status:https://issues.apache.org/jira/secure/attachment/12325337/derby-1025-patch1-v1.status"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12325337/derby-1025-patch1-v1.status" title="Latest  14/Apr/06 21:23 - Deepa Remesh" draggable="true" data-downloadurl="application/octet-stream:derby-1025-patch1-v1.status:https://issues.apache.org/jira/secure/attachment/12325337/derby-1025-patch1-v1.status">derby-1025-patch1-v1.status</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-14T21:23:33.000Z">14/Apr/06 21:23</time>
                   </dd>
                   <dd class="attachment-size">
                    0.5 kB
                   </dd>
                   <dd class="attachment-author">
                    Deepa Remesh
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12325353" data-issue-id="12329302" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12325353/derby-1025-patch2-v1.diff" draggable="true" data-downloadurl="text/x-patch:derby-1025-patch2-v1.diff:https://issues.apache.org/jira/secure/attachment/12325353/derby-1025-patch2-v1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12325353/derby-1025-patch2-v1.diff" title="Latest  15/Apr/06 01:41 - Deepa Remesh" draggable="true" data-downloadurl="text/x-patch:derby-1025-patch2-v1.diff:https://issues.apache.org/jira/secure/attachment/12325353/derby-1025-patch2-v1.diff">derby-1025-patch2-v1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-15T01:41:56.000Z">15/Apr/06 01:41</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Deepa Remesh
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12325354" data-issue-id="12329302" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12325354/derby-1025-patch2-v1.status" draggable="true" data-downloadurl="application/octet-stream:derby-1025-patch2-v1.status:https://issues.apache.org/jira/secure/attachment/12325354/derby-1025-patch2-v1.status"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12325354/derby-1025-patch2-v1.status" title="Latest  15/Apr/06 01:41 - Deepa Remesh" draggable="true" data-downloadurl="application/octet-stream:derby-1025-patch2-v1.status:https://issues.apache.org/jira/secure/attachment/12325354/derby-1025-patch2-v1.status">derby-1025-patch2-v1.status</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-15T01:41:56.000Z">15/Apr/06 01:41</time>
                   </dd>
                   <dd class="attachment-size">
                    0.6 kB
                   </dd>
                   <dd class="attachment-author">
                    Deepa Remesh
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_deepa" rel="deepa" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=34050&quot;,&quot;displayName&quot;:&quot;Deepa Remesh&quot;,&quot;emailAddress&quot;:&quot;dremesh@gmail.com&quot;,&quot;username&quot;:&quot;deepa&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=34050" alt="deepa"></span></span> Deepa Remesh </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_djd" rel="djd" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Daniel John Debrunner&quot;,&quot;emailAddress&quot;:&quot;djd@apache.org&quot;,&quot;username&quot;:&quot;djd&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="djd"></span></span> Daniel John Debrunner </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">1</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="22/Feb/06 10:47"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-02-22T10:47:59+0000">22/Feb/06 10:47</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="08/May/07 00:49"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2007-05-08T00:49:38+0000">08/May/07 00:49</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="07/May/07 20:08"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2007-05-07T20:08:48+0000">07/May/07 20:08</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1025?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-1025?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12369590\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12369590&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12369590\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12369590_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12369590_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Mar\\/06 11:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-09T11:18:03+0000\'\u003e09\\/Mar\\/06 11:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\\n\u003cp\u003eSo on XAResource.start() we need to flowcommit if\u003cbr\\/\u003e\\n1) We are in autocommit mode. \u003cbr\\/\u003e\\n        conn_.autocommit_ == true\u003cbr\\/\u003e\\n2) We are in a an active local Transaction.\u003cbr\\/\u003e\\n   conn_getXAState() == XA_T0_NOT_ASSOCIATED\u003cbr\\/\u003e\\n   conn_.inUnitOfWork_ == true\u003c\\/p\u003e\\n\\n\u003cp\u003eFor my first shot at fixing this bug I added the folling code to \u003cbr\\/\u003e\\nNetXAResource.start()\u003cbr\\/\u003e\\n\\t\\/\\/ \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1025\\\" title=\\\"[xa] client XAResource.start() does not commit an active local transaction when auto commit is true\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1025\\\"\u003e\u003cdel\u003eDERBY-1025\u003c\\/del\u003e\u003c\\/a\u003e \u003cbr\\/\u003e\\n        \\/\\/ autocommit the local transaction before starting the global transaction\u003cbr\\/\u003e\\n        \\/\\/ if autocommit is set\u003cbr\\/\u003e\\n        if (conn_.autoCommit_  &amp;&amp; conn_.inActiveLocalTransaction())\u003c\\/p\u003e\\n        {\\n\\t\\tconn_.flowAutoCommit();\\n        }\\n\\n\\n\u003cp\u003eWhere in NetXAConnection we have\u003cbr\\/\u003e\\npublic boolean inActiveLocalTransaction() \u003c\\/p\u003e\\n{\\n\\t\\treturn (isInUnitOfWork_() &amp;&amp; \\n    \\t\\t\\t(getXAState() == XA_T0_NOT_ASSOCIATED));   \\n\\t\\t\\n\\t}\\n\\n\u003cp\u003eAnd in Connection.java\u003cbr\\/\u003e\\n\\t\\/**\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e@return Returns the inUnitOfWork_.\u003cbr\\/\u003e\\n\\t *\\/\u003cbr\\/\u003e\\n\\tpublic boolean isInUnitOfWork_() \\n{\\n\\t\\treturn inUnitOfWork_;\\n\\t}\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003eWith my change, putting this code in I found some very strange behaviour in this case in XATest\u003cbr\\/\u003e\\n1)  I got a commit on start when no local transaction was active after  a suspend\u003cbr\\/\u003e\\n2)  I seemed to lose a totally different suspended transaction in the process.\u003c\\/p\u003e\\n\\n\u003cp\u003eSee comments for behaviour:\u003cbr\\/\u003e\\n    private static void interleavingTransactions(XADataSource xads) {\u003cbr\\/\u003e\\n        System.out.println(\\\"interleavingTransactions\\\");\u003cbr\\/\u003e\\n        try {\u003cbr\\/\u003e\\n            XAConnection xac = xads.getXAConnection(\\\"sku\\\", \\\"testxa\\\");\u003cbr\\/\u003e\\n            XAResource xar = xac.getXAResource();\u003c\\/p\u003e\\n\\n\u003cp\u003e            Xid xid1 = XATestUtil.getXid(1, 93, 18);\u003cbr\\/\u003e\\n            Xid xid2 = XATestUtil.getXid(2, 45, 77);\u003c\\/p\u003e\\n\\n\u003cp\u003e            xar.start(xid1, XAResource.TMNOFLAGS);\u003c\\/p\u003e\\n\\n\u003cp\u003e            Connection conn = xac.getConnection();\u003c\\/p\u003e\\n\\n\u003cp\u003e            Statement s = conn.createStatement();\u003cbr\\/\u003e\\n            s.executeUpdate(\\\"insert into APP.foo values (1)\\\");\u003cbr\\/\u003e\\n            xar.end(xid1, XAResource.TMSUSPEND);\u003cbr\\/\u003e\\n            \\/\\/ commit occurred here because inUnitOfWork_ was true\u003cbr\\/\u003e\\n            \\/\\/ when it should be false.\u003cbr\\/\u003e\\n            xar.start(xid2, XAResource.TMNOFLAGS);\u003cbr\\/\u003e\\n            s.executeUpdate(\\\"insert into APP.foo values (2)\\\");\u003cbr\\/\u003e\\n            xar.end(xid2, XAResource.TMSUSPEND);\u003c\\/p\u003e\\n\\n\u003cp\u003e            xar.start(xid1, XAResource.TMRESUME);\u003cbr\\/\u003e\\n            s.executeUpdate(\\\"insert into APP.foo values (3)\\\");\u003cbr\\/\u003e\\n            \\/\\/ XAER_NOTA on suspend  of xid1.\u003cbr\\/\u003e\\n            \\/\\/ very strange because the resume worked ok.\u003cbr\\/\u003e\\n            \\/\\/ where did it go?\u003cbr\\/\u003e\\n            xar.end(xid1, XAResource.TMSUSPEND);\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eI am trying to understand:\u003c\\/p\u003e\\n\\n\u003cp\u003e1)  When and how inUnitOfWork_ is set and its relation to XA\u003cbr\\/\u003e\\n2)  Why the autocommit after the suspension of xid2 caused xid1 to go away after it resumed just fine.\u003c\\/p\u003e\\n\\n\u003cp\u003eAll very strange.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12369590_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12369590_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Mar\\/06 11:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-09T11:18:03+0000\'\u003e09\\/Mar\\/06 11:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                   \\n So on XAResource.start() we need to flowcommit if \\n1) We are in autocommit mode.  \\n        conn_.autocommit_ == true \\n2) We are in a an active local Transaction. \\n   conn_getXAState() == XA_T0_NOT_ASSOCIATED \\n   conn_.inUnitOfWork_ == true \\n\\n For my first shot at fixing this bug I added the folling code to  \\nNetXAResource.start() \\n\\t\\/\\/   DERBY-1025    \\n        \\/\\/ autocommit the local transaction before starting the global transaction \\n        \\/\\/ if autocommit is set \\n        if (conn_.autoCommit_  &amp;&amp; conn_.inActiveLocalTransaction()) \\n        {\\n\\t\\tconn_.flowAutoCommit();\\n        }\\n\\n\\n Where in NetXAConnection we have \\npublic boolean inActiveLocalTransaction()  \\n{\\n\\t\\treturn (isInUnitOfWork_() &amp;&amp; \\n    \\t\\t\\t(getXAState() == XA_T0_NOT_ASSOCIATED));   \\n\\t\\t\\n\\t}\\n\\n And in Connection.java \\n\\t\\/** \\n \\n\\t @return Returns the inUnitOfWork_. \\n\\t *\\/ \\n\\tpublic boolean isInUnitOfWork_() \\n{\\n\\t\\treturn inUnitOfWork_;\\n\\t} \\n \\n\\n\\n\\n With my change, putting this code in I found some very strange behaviour in this case in XATest \\n1)  I got a commit on start when no local transaction was active after  a suspend \\n2)  I seemed to lose a totally different suspended transaction in the process. \\n\\n See comments for behaviour: \\n    private static void interleavingTransactions(XADataSource xads) { \\n        System.out.println(\\\"interleavingTransactions\\\"); \\n        try { \\n            XAConnection xac = xads.getXAConnection(\\\"sku\\\", \\\"testxa\\\"); \\n            XAResource xar = xac.getXAResource(); \\n\\n             Xid xid1 = XATestUtil.getXid(1, 93, 18); \\n            Xid xid2 = XATestUtil.getXid(2, 45, 77); \\n\\n             xar.start(xid1, XAResource.TMNOFLAGS); \\n\\n             Connection conn = xac.getConnection(); \\n\\n             Statement s = conn.createStatement(); \\n            s.executeUpdate(\\\"insert into APP.foo values (1)\\\"); \\n            xar.end(xid1, XAResource.TMSUSPEND); \\n            \\/\\/ commit occurred here because inUnitOfWork_ was true \\n            \\/\\/ when it should be false. \\n            xar.start(xid2, XAResource.TMNOFLAGS); \\n            s.executeUpdate(\\\"insert into APP.foo values (2)\\\"); \\n            xar.end(xid2, XAResource.TMSUSPEND); \\n\\n             xar.start(xid1, XAResource.TMRESUME); \\n            s.executeUpdate(\\\"insert into APP.foo values (3)\\\"); \\n            \\/\\/ XAER_NOTA on suspend  of xid1. \\n            \\/\\/ very strange because the resume worked ok. \\n            \\/\\/ where did it go? \\n            xar.end(xid1, XAResource.TMSUSPEND); \\n\\n\\n I am trying to understand: \\n\\n 1)  When and how inUnitOfWork_ is set and its relation to XA \\n2)  Why the autocommit after the suspension of xid2 caused xid1 to go away after it resumed just fine. \\n\\n All very strange.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372170\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12372170&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372170\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12372170_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372170_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Mar\\/06 09:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-29T09:06:03+0000\'\u003e29\\/Mar\\/06 09:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI wonder if the problem you are seeing may be due to this code in DRDAStatement:\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\/**\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eGet prepared statement\u003cbr\\/\u003e\\n\\t *\u003c\\/li\u003e\\n\\t\u003cli\u003e@return prepared statement\u003cbr\\/\u003e\\n\\t *\\/\u003cbr\\/\u003e\\n\\tprotected PreparedStatement getPreparedStatement() throws SQLException\\n\\t{\\n\\t\\tif (ps instanceof BrokeredPreparedStatement)\\n\\t\\t\\treturn (PreparedStatement)(\\n\\t\\t\\t\\t\\t\\t   ((BrokeredPreparedStatement) ps).getStatement());\\n\\t\\telse\\n\\t\\t\\treturn ps;\\n\\t}\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003eThis code, for some unknown reason due to lack of comments, is getting the underlying embedded statement\u003cbr\\/\u003e\\nfrom a BrokeredPreparedStatement.  This should not be allowed, the BrokeredStatement wrappers are there to\u003cbr\\/\u003e\\nhide the embedded statement object as it can change under the covers of the wrapper.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt could be that the network server is getting the prepared statement and then hanging on too long and performing\u003cbr\\/\u003e\\nactions on the wrong object. Though it seems unlikely that auto-commit on a connection would go through the\u003cbr\\/\u003e\\nprepared statement.\u003c\\/p\u003e\\n\\n\u003cp\u003eI wonder why this code needs the inner statement\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12372170_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372170_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Mar\\/06 09:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-29T09:06:03+0000\'\u003e29\\/Mar\\/06 09:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I wonder if the problem you are seeing may be due to this code in DRDAStatement: \\n\\n \\t\\/** \\n \\n\\t Get prepared statement \\n\\t * \\n\\t @return prepared statement \\n\\t *\\/ \\n\\tprotected PreparedStatement getPreparedStatement() throws SQLException\\n\\t{\\n\\t\\tif (ps instanceof BrokeredPreparedStatement)\\n\\t\\t\\treturn (PreparedStatement)(\\n\\t\\t\\t\\t\\t\\t   ((BrokeredPreparedStatement) ps).getStatement());\\n\\t\\telse\\n\\t\\t\\treturn ps;\\n\\t} \\n \\n\\n\\n\\n This code, for some unknown reason due to lack of comments, is getting the underlying embedded statement \\nfrom a BrokeredPreparedStatement.  This should not be allowed, the BrokeredStatement wrappers are there to \\nhide the embedded statement object as it can change under the covers of the wrapper. \\n\\n It could be that the network server is getting the prepared statement and then hanging on too long and performing \\nactions on the wrong object. Though it seems unlikely that auto-commit on a connection would go through the \\nprepared statement. \\n\\n I wonder why this code needs the inner statement              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12374400\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12374400&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12374400\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374400_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374400_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 02:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T02:22:23+0000\'\u003e14\\/Apr\\/06 02:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI was looking at this and understanding the differences between embedded and client code. I see the client does not have code to commit in auto-commit mode. I was trying to test my changes when I found that this problem no longer reproduces with the latest trunk. \u003c\\/p\u003e\\n\\n\u003cp\u003eWhat I tried was - run jdbcapi\\/XATest.java in client framewrok by commenting out the following workaround in the test:\u003cbr\\/\u003e\\n            \\/\\/ \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1025\\\" title=\\\"[xa] client XAResource.start() does not commit an active local transaction when auto commit is true\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1025\\\"\u003e\u003cdel\u003eDERBY-1025\u003c\\/del\u003e\u003c\\/a\u003e Client only bug\u003cbr\\/\u003e\\n            \\/*if (TestUtil.isDerbyNetClientFramework()) \u003c\\/p\u003e\\n{\\n                System.out.println(\\\"DERBY-1025 Call conn.commit to avoid exception with client\\\");\\n                conn.commit();\\n            }\\n\u003cp\u003e            *\\/\u003c\\/p\u003e\\n\\n\u003cp\u003eI do not get any exceptions. I ran this about 10 times and the test passes without the explicit \\\"commit\\\" workaround. Can someone please confirm this is right way to repro this issue? If anyone knows any other repros, please let me know.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374400_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374400_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 02:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T02:22:23+0000\'\u003e14\\/Apr\\/06 02:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I was looking at this and understanding the differences between embedded and client code. I see the client does not have code to commit in auto-commit mode. I was trying to test my changes when I found that this problem no longer reproduces with the latest trunk.  \\n\\n What I tried was - run jdbcapi\\/XATest.java in client framewrok by commenting out the following workaround in the test: \\n            \\/\\/   DERBY-1025   Client only bug \\n            \\/*if (TestUtil.isDerbyNetClientFramework())  \\n{\\n                System.out.println(\\\"DERBY-1025 Call conn.commit to avoid exception with client\\\");\\n                conn.commit();\\n            }\\n             *\\/ \\n\\n I do not get any exceptions. I ran this about 10 times and the test passes without the explicit \\\"commit\\\" workaround. Can someone please confirm this is right way to repro this issue? If anyone knows any other repros, please let me know.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12374403\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12374403&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12374403\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12374403_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374403_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 02:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T02:38:44+0000\'\u003e14\\/Apr\\/06 02:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere\'s a chance that changes to the code preceeding that masked the issue, or maybe the pre-fetching changed behaviour by fetching\u003cbr\\/\u003e\\nrows and causing a commit..\u003c\\/p\u003e\\n\\n\u003cp\u003eI added this code just before the code you commented out and saw the issue again:\u003c\\/p\u003e\\n\\n\u003cp\u003e            rs.close(); \u003cbr\\/\u003e\\n             \\/\\/ ensure a transaction is active to test \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1025\\\" title=\\\"[xa] client XAResource.start() does not commit an active local transaction when auto commit is true\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1025\\\"\u003e\u003cdel\u003eDERBY-1025\u003c\\/del\u003e\u003c\\/a\u003e\u003cbr\\/\u003e\\n            rs = sdh.executeQuery(\\\"SELECT * FROM APP.FOO\\\");\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12374403_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374403_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 02:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T02:38:44+0000\'\u003e14\\/Apr\\/06 02:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There\'s a chance that changes to the code preceeding that masked the issue, or maybe the pre-fetching changed behaviour by fetching \\nrows and causing a commit.. \\n\\n I added this code just before the code you commented out and saw the issue again: \\n\\n             rs.close();  \\n             \\/\\/ ensure a transaction is active to test   DERBY-1025   \\n            rs = sdh.executeQuery(\\\"SELECT * FROM APP.FOO\\\");              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12374404\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12374404&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12374404\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12374404_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374404_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 02:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T02:53:38+0000\'\u003e14\\/Apr\\/06 02:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere is a case disabled for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1025\\\" title=\\\"[xa] client XAResource.start() does not commit an active local transaction when auto commit is true\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1025\\\"\u003e\u003cdel\u003eDERBY-1025\u003c\\/del\u003e\u003c\\/a\u003e in jdbcapi\\/checkDataSource.java  as well.  \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12374404_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374404_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 02:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T02:53:38+0000\'\u003e14\\/Apr\\/06 02:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There is a case disabled for   DERBY-1025   in jdbcapi\\/checkDataSource.java  as well.   \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12374439\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12374439&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12374439\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374439_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374439_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 06:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T06:38:21+0000\'\u003e14\\/Apr\\/06 06:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a draft patch \'derby-1025-draft1.diff\' which is only for review and not for commit. This fixes the repros in the tests XATest.java and checkDataSource.java.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have a question about the expected exceptions in the test checkDataSource.java. The exceptions thrown by the client are different from what is thrown by the embedded driver. Specifically, I want to make sure this is the expected exception in the following case:\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------------------------------------------------------------------------------------------------------------------------------------------\u003cbr\\/\u003e\\n\\t\\tconn4.setAutoCommit(false);\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\trs4 = s4.executeQuery(\\\"select i from autocommitxastart\\\");\u003cbr\\/\u003e\\n\\t\\trs4.next(); System.out.println(\\\"acxs \\\" + rs4.getInt(1));\u003cbr\\/\u003e\\n\\t\\trs4.next(); System.out.println(\\\"acxs \\\" + rs4.getInt(1));\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\ttry \u003c\\/p\u003e\\n{\\n\\t\\t\\txac4.getXAResource().start(xid4a, XAResource.TMNOFLAGS);\\n\\t\\t}\\n\u003cp\u003e catch (XAException xae) \u003c\\/p\u003e\\n{\\n\\t\\t\\tshowXAException(\\\"autocommitxastart expected \\\", xae);\\n\\t\\t}\\n\u003cp\u003e---------------------------------------------------------------------------------------------------------------------------------------------------\u003cbr\\/\u003e\\nException:\u003cbr\\/\u003e\\nautocommitxastart expected  : XAException - XAER_DUPID : Error executing a XAResource.start(), Server returned XAER_DUPID\u003cbr\\/\u003e\\n---------------------------------------------------------------------------------------------------------------------------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eWith the draft patch, I have only run jdbcapi\\/checkDataSource.java and jdbcapi\\/XATest.java in client framework. I will be running derbynetclientmats shortly. Also, for testing purposes, I have removed the test jdbcapi\\/checkDataSource.java from DerbyNetClient.exclude.\u003c\\/p\u003e\\n\\n\u003cp\u003eI would appreciate if someone can go through this patch quickly and let me know if the changes are okay. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374439_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374439_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 06:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T06:38:21+0000\'\u003e14\\/Apr\\/06 06:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a draft patch \'derby-1025-draft1.diff\' which is only for review and not for commit. This fixes the repros in the tests XATest.java and checkDataSource.java. \\n\\n I have a question about the expected exceptions in the test checkDataSource.java. The exceptions thrown by the client are different from what is thrown by the embedded driver. Specifically, I want to make sure this is the expected exception in the following case: \\n\\n --------------------------------------------------------------------------------------------------------------------------------------------------- \\n\\t\\tconn4.setAutoCommit(false); \\n\\n \\t\\trs4 = s4.executeQuery(\\\"select i from autocommitxastart\\\"); \\n\\t\\trs4.next(); System.out.println(\\\"acxs \\\" + rs4.getInt(1)); \\n\\t\\trs4.next(); System.out.println(\\\"acxs \\\" + rs4.getInt(1)); \\n\\n \\t\\ttry  \\n{\\n\\t\\t\\txac4.getXAResource().start(xid4a, XAResource.TMNOFLAGS);\\n\\t\\t}\\n  catch (XAException xae)  \\n{\\n\\t\\t\\tshowXAException(\\\"autocommitxastart expected \\\", xae);\\n\\t\\t}\\n --------------------------------------------------------------------------------------------------------------------------------------------------- \\nException: \\nautocommitxastart expected  : XAException - XAER_DUPID : Error executing a XAResource.start(), Server returned XAER_DUPID \\n--------------------------------------------------------------------------------------------------------------------------------------------------- \\n\\n With the draft patch, I have only run jdbcapi\\/checkDataSource.java and jdbcapi\\/XATest.java in client framework. I will be running derbynetclientmats shortly. Also, for testing purposes, I have removed the test jdbcapi\\/checkDataSource.java from DerbyNetClient.exclude. \\n\\n I would appreciate if someone can go through this patch quickly and let me know if the changes are okay.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12374440\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12374440&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12374440\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12374440_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374440_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 06:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T06:45:38+0000\'\u003e14\\/Apr\\/06 06:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe change in NetXAResource looks ok. The XAER_DUPID (duplicate xid) exception looks wrong though. The error code should match embedded.\u003cbr\\/\u003e\\nMake sure the rs4 result set has not closed and thus committed the transaction, maybe fetch less rows or no at all?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12374440_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374440_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 06:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T06:45:38+0000\'\u003e14\\/Apr\\/06 06:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The change in NetXAResource looks ok. The XAER_DUPID (duplicate xid) exception looks wrong though. The error code should match embedded. \\nMake sure the rs4 result set has not closed and thus committed the transaction, maybe fetch less rows or no at all?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12374444\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12374444&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12374444\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374444_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374444_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 07:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T07:56:17+0000\'\u003e14\\/Apr\\/06 07:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI looked into this a bit more and found that embedded and client are actually returning the same XA error code (XAER_DUPID). I printed out the error code in the test to verify this. The test just calls getMessage() on the XAException and prints it out. In case of embedded, I think the message is null. Whereas, in case of client, I see that the method NetXAResource.xaRetValErrorAccumSQL creates a message as follows: \u003cbr\\/\u003e\\n---------------------------------------------------------------------------------------------------------------------------------------------------\u003cbr\\/\u003e\\nif (rc != XAResource.XA_OK) { \\/\\/ error was detected\u003cbr\\/\u003e\\n            \\/\\/ create an SqlException to report this error within\u003cbr\\/\u003e\\n            String xaRetValStr = \\\"Error executing a \\\" +\u003cbr\\/\u003e\\n                    getXAFuncStr(callInfo.xaFunction_) + \\\", \\\" +\u003cbr\\/\u003e\\n                    \\\"Server returned \\\" + getXAExceptionText(rc);\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------------------------------------------------------------------------------------------------------------------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eThis accounts for the difference in embedded and client messages. \u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, it is not clear to me what the purpose of this test is. If it is meant to check for XAER_DUPID, it does not seem to fit into the remaining tests.  I need to look into this some more. \u003cbr\\/\u003e\\n---------------------------------------------------------------------------------------------------------------------------------------------------\u003cbr\\/\u003e\\n               try \u003c\\/p\u003e\\n{\\n\\t\\t\\txac4.getXAResource().start(xid4a, XAResource.TMNOFLAGS);\\n\\t\\t}\\n\u003cp\u003e catch (XAException xae) \u003c\\/p\u003e\\n{\\n\\t\\t\\tshowXAException(\\\"autocommitxastart expected \\\", xae);\\n\\t\\t}\\n\\n\u003cp\u003e---------------------------------------------------------------------------------------------------------------------------------------------------\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374444_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374444_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 07:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T07:56:17+0000\'\u003e14\\/Apr\\/06 07:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I looked into this a bit more and found that embedded and client are actually returning the same XA error code (XAER_DUPID). I printed out the error code in the test to verify this. The test just calls getMessage() on the XAException and prints it out. In case of embedded, I think the message is null. Whereas, in case of client, I see that the method NetXAResource.xaRetValErrorAccumSQL creates a message as follows:  \\n--------------------------------------------------------------------------------------------------------------------------------------------------- \\nif (rc != XAResource.XA_OK) { \\/\\/ error was detected \\n            \\/\\/ create an SqlException to report this error within \\n            String xaRetValStr = \\\"Error executing a \\\" + \\n                    getXAFuncStr(callInfo.xaFunction_) + \\\", \\\" + \\n                    \\\"Server returned \\\" + getXAExceptionText(rc); \\n\\n --------------------------------------------------------------------------------------------------------------------------------------------------- \\n\\n This accounts for the difference in embedded and client messages.  \\n\\n However, it is not clear to me what the purpose of this test is. If it is meant to check for XAER_DUPID, it does not seem to fit into the remaining tests.  I need to look into this some more.  \\n--------------------------------------------------------------------------------------------------------------------------------------------------- \\n               try  \\n{\\n\\t\\t\\txac4.getXAResource().start(xid4a, XAResource.TMNOFLAGS);\\n\\t\\t}\\n  catch (XAException xae)  \\n{\\n\\t\\t\\tshowXAException(\\\"autocommitxastart expected \\\", xae);\\n\\t\\t}\\n\\n ---------------------------------------------------------------------------------------------------------------------------------------------------              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12374524\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12374524&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12374524\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374524_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374524_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 21:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T21:23:33+0000\'\u003e14\\/Apr\\/06 21:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Dan and Kathey for replying to my questions. I am attaching a patch \'derby-1025-patch1-v1.diff\' which makes client\'s XAResource.start() to commit a local transaction when auto commit is true. \u003c\\/p\u003e\\n\\n\u003cp\u003e------------------------------------------------\u003cbr\\/\u003e\\nSummary:\u003cbr\\/\u003e\\n------------------------------------------------\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eModifies NetXAResource.start to check if the connection is in autocommit mode and flow an auto commit.\u003c\\/li\u003e\\n\\t\u003cli\u003eUncomments the tests for this issue in jdbcapi\\/XATest.java and jdbcapi\\/checkDataSource.java\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e------------------------------------------------\u003cbr\\/\u003e\\nTest:\u003cbr\\/\u003e\\n------------------------------------------------\u003cbr\\/\u003e\\nWith this patch, I ran derbynetclientmats using Sun JDK1.4.2 on Windows XP. I also ran checkDataSource test in client framework by temporarily removing it from the exclude file. \u003c\\/p\u003e\\n\\n\u003cp\u003e------------------------------------------------\u003cbr\\/\u003e\\nQuestions:\u003cbr\\/\u003e\\n------------------------------------------------\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eWhen working on this issue, I saw this piece of code in client\'s Connection.flowCommit method:\u003cbr\\/\u003e\\n        \\/\\/ Per JDBC specification (see javadoc for Connection.commit()):\u003cbr\\/\u003e\\n        \\/\\/   \\\"This method should be used only when auto-commit mode has been disabled.\\\"\u003cbr\\/\u003e\\n        \\/\\/ However, some applications do this anyway, it is harmless, so\u003cbr\\/\u003e\\n        \\/\\/ if they ask to commit, we could go ahead and flow a commit.\u003cbr\\/\u003e\\n        \\/\\/ But note that rollback() is less harmless, rollback() shouldn\'t be used in auto-commit mode.\u003cbr\\/\u003e\\n        \\/\\/ This behavior is subject to further review.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e        \\/\\/   if (!this.inUnitOfWork)\u003cbr\\/\u003e\\n        \\/\\/     return;\u003cbr\\/\u003e\\n        \\/\\/ We won\'t try to be \\\"too smart\\\", if the user requests a commit, we\'ll flow a commit,\u003cbr\\/\u003e\\n        \\/\\/ regardless of whether or not we\'re in a unit of work or in auto-commit mode.\u003cbr\\/\u003e\\n        \\/\\/\u003c\\/p\u003e\\n\\n\u003cp\u003eI saw that Kathey\'s trial patch was trying to check if we are in unit of work before calling flowAutoCommit. On looking at the flowAutoCommit method, I saw that this logic was planned to be in the commit method itself but currently it is commented out mentioning \\\"further review\\\". Should I open a JIRA issue for this so that we can pursue this later?\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eI think the test for derby-1025 in checkDataSource.java is wrongly testing XAER_DUPID because the second transaction uses the same xid. I think we want to test that we cannot start a global transaction when the resource manager is doing some work outside. I have changed the test to use a different xid. And now the test gives me XAER_OUTSIDE,which I think is what we want to test. If I\'m wrong here, please let me know. I\'ll submit a separate patch for this.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374524_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374524_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 21:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T21:23:33+0000\'\u003e14\\/Apr\\/06 21:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Dan and Kathey for replying to my questions. I am attaching a patch \'derby-1025-patch1-v1.diff\' which makes client\'s XAResource.start() to commit a local transaction when auto commit is true.  \\n\\n ------------------------------------------------ \\nSummary: \\n------------------------------------------------ \\n \\n\\t Modifies NetXAResource.start to check if the connection is in autocommit mode and flow an auto commit. \\n\\t Uncomments the tests for this issue in jdbcapi\\/XATest.java and jdbcapi\\/checkDataSource.java \\n \\n\\n\\n ------------------------------------------------ \\nTest: \\n------------------------------------------------ \\nWith this patch, I ran derbynetclientmats using Sun JDK1.4.2 on Windows XP. I also ran checkDataSource test in client framework by temporarily removing it from the exclude file.  \\n\\n ------------------------------------------------ \\nQuestions: \\n------------------------------------------------ \\n \\n\\t When working on this issue, I saw this piece of code in client\'s Connection.flowCommit method: \\n        \\/\\/ Per JDBC specification (see javadoc for Connection.commit()): \\n        \\/\\/   \\\"This method should be used only when auto-commit mode has been disabled.\\\" \\n        \\/\\/ However, some applications do this anyway, it is harmless, so \\n        \\/\\/ if they ask to commit, we could go ahead and flow a commit. \\n        \\/\\/ But note that rollback() is less harmless, rollback() shouldn\'t be used in auto-commit mode. \\n        \\/\\/ This behavior is subject to further review. \\n \\n\\n\\n         \\/\\/   if (!this.inUnitOfWork) \\n        \\/\\/     return; \\n        \\/\\/ We won\'t try to be \\\"too smart\\\", if the user requests a commit, we\'ll flow a commit, \\n        \\/\\/ regardless of whether or not we\'re in a unit of work or in auto-commit mode. \\n        \\/\\/ \\n\\n I saw that Kathey\'s trial patch was trying to check if we are in unit of work before calling flowAutoCommit. On looking at the flowAutoCommit method, I saw that this logic was planned to be in the commit method itself but currently it is commented out mentioning \\\"further review\\\". Should I open a JIRA issue for this so that we can pursue this later? \\n\\n \\n\\t I think the test for derby-1025 in checkDataSource.java is wrongly testing XAER_DUPID because the second transaction uses the same xid. I think we want to test that we cannot start a global transaction when the resource manager is doing some work outside. I have changed the test to use a different xid. And now the test gives me XAER_OUTSIDE,which I think is what we want to test. If I\'m wrong here, please let me know. I\'ll submit a separate patch for this. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12374540\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12374540&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12374540\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12374540_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374540_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 23:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T23:32:22+0000\'\u003e14\\/Apr\\/06 23:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI checked the patch into the trunk:\u003cbr\\/\u003e\\nDate: Fri Apr 14 09:30:00 2006\u003cbr\\/\u003e\\nNew Revision: 394134\u003c\\/p\u003e\\n\\n\u003cp\u003eURL: \u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewcvs?rev=394134&amp;view=rev\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewcvs?rev=394134&amp;view=rev\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThis change looks good to me but when I ran jdbcapi\\/checkDataSource.java  and jdbcapi\\/checkDataSource30.java and  with client I got these (expected I think) diffs.  I updated the masters and checked in.\u003cbr\\/\u003e\\nPlease check that the output difference is expected.\u003c\\/p\u003e\\n\\n\u003cp\u003eAttempt to shutdown framework: DerbyNetClient\u003cbr\\/\u003e\\n58 del\u003cbr\\/\u003e\\n&lt; expected java.sql.SQLException: Invalid operation: result set closed\u003cbr\\/\u003e\\n58a58\u003cbr\\/\u003e\\n&gt; expected java.sql.SQLException: \'ResultSet\' already closed.\u003cbr\\/\u003e\\n460 del\u003cbr\\/\u003e\\n&lt; autocommitxastart expected Invalid operation: result set closed\u003cbr\\/\u003e\\n460a460\u003cbr\\/\u003e\\n&gt; autocommitxastart expected \'ResultSet\' already closed.\u003cbr\\/\u003e\\nTest Failed.\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eEnd:   checkDataSource jdk1.4.2_07 DerbyNetClient 2006-04-14 09:04:19 ***\u003c\\/li\u003e\\n\\t\\t\\t\u003cli\u003eStart: checkDataSource30 jdk1.4.2_07 DerbyNetClient 2006-04-14 09:17:14 ***\u003cbr\\/\u003e\\nInitialize for framework: DerbyNetClient\u003cbr\\/\u003e\\njava -Dderby.system.home=D:\\\\testout\\\\DerbyNetClient\\\\checkDataSource30 -Djava.security.manager -Djava.security.policy=D:\\\\testout\\\\derby_tests.policy -DderbyTesting.codeclasses=\u003ca href=\\\"file:\\/D:\\/p4\\/marsden_patch\\/c\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003efile:\\/D:\\/p4\\/marsden_patch\\/c\u003c\\/a\u003e\u003cbr\\/\u003e\\nlasses\\/ -DderbyTesting.codedir=D:\\\\p4\\\\marsden_patch\\\\classes -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost -DderbyTesting.codejar=\u003ca href=\\\"file:\\/\\/unused\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003efile:\\/\\/unused\\/\u003c\\/a\u003e org.apache.derby.drda.NetworkSe\u003cbr\\/\u003e\\nrverControl start\u003cbr\\/\u003e\\nAttempt to shutdown framework: DerbyNetClient\u003cbr\\/\u003e\\n70 del\u003cbr\\/\u003e\\n&lt; expected java.sql.SQLException: Invalid operation: result set closed\u003cbr\\/\u003e\\n70a70\u003cbr\\/\u003e\\n&gt; expected java.sql.SQLException: \'ResultSet\' already closed.\u003cbr\\/\u003e\\n551a552,559\u003cbr\\/\u003e\\n&gt; conn4 autcommit true\u003cbr\\/\u003e\\n&gt; acxs 1\u003cbr\\/\u003e\\n&gt; acxs 2\u003cbr\\/\u003e\\n&gt; autocommitxastart expected \'ResultSet\' already closed.\u003cbr\\/\u003e\\n&gt; acxs 1\u003cbr\\/\u003e\\n&gt; acxs 2\u003cbr\\/\u003e\\n&gt; autocommitxastart expected  : XAException - XAER_DUPID : Error executing a XAResource.start(), Server returned XAER_DUPID\u003cbr\\/\u003e\\n&gt; acxs 3\u003cbr\\/\u003e\\n578 del\u003cbr\\/\u003e\\n&lt; Expected SQLException Invalid operation: result set closed\u003cbr\\/\u003e\\n578a586\u003cbr\\/\u003e\\n&gt; Expected SQLException \'ResultSet\' already closed.\u003cbr\\/\u003e\\n590 del\u003cbr\\/\u003e\\n&lt; Expected SQLException Invalid operation: result set closed\u003cbr\\/\u003e\\n591 del\u003cbr\\/\u003e\\n&lt; Expected SQLException Invalid operation: result set closed\u003cbr\\/\u003e\\n591a598,599\u003cbr\\/\u003e\\n&gt; Expected SQLException \'ResultSet\' already closed.\u003cbr\\/\u003e\\n&gt; Expected SQLException \'ResultSet\' already closed.\u003cbr\\/\u003e\\nTest Failed.\u003c\\/li\u003e\\n\\t\\t\\t\u003cli\u003eEnd:   checkDataSource30 jdk1.4.2_07 DerbyNetClient 2006-04-14 09:18:29 ***\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12374540_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374540_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/06 23:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-14T23:32:22+0000\'\u003e14\\/Apr\\/06 23:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I checked the patch into the trunk: \\nDate: Fri Apr 14 09:30:00 2006 \\nNew Revision: 394134 \\n\\n URL:  http:\\/\\/svn.apache.org\\/viewcvs?rev=394134&amp;view=rev  \\n\\n This change looks good to me but when I ran jdbcapi\\/checkDataSource.java  and jdbcapi\\/checkDataSource30.java and  with client I got these (expected I think) diffs.  I updated the masters and checked in. \\nPlease check that the output difference is expected. \\n\\n Attempt to shutdown framework: DerbyNetClient \\n58 del \\n&lt; expected java.sql.SQLException: Invalid operation: result set closed \\n58a58 \\n&gt; expected java.sql.SQLException: \'ResultSet\' already closed. \\n460 del \\n&lt; autocommitxastart expected Invalid operation: result set closed \\n460a460 \\n&gt; autocommitxastart expected \'ResultSet\' already closed. \\nTest Failed. \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t End:   checkDataSource jdk1.4.2_07 DerbyNetClient 2006-04-14 09:04:19 *** \\n\\t\\t\\t Start: checkDataSource30 jdk1.4.2_07 DerbyNetClient 2006-04-14 09:17:14 *** \\nInitialize for framework: DerbyNetClient \\njava -Dderby.system.home=D:\\\\testout\\\\DerbyNetClient\\\\checkDataSource30 -Djava.security.manager -Djava.security.policy=D:\\\\testout\\\\derby_tests.policy -DderbyTesting.codeclasses= file:\\/D:\\/p4\\/marsden_patch\\/c  \\nlasses\\/ -DderbyTesting.codedir=D:\\\\p4\\\\marsden_patch\\\\classes -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost -DderbyTesting.codejar= file:\\/\\/unused\\/  org.apache.derby.drda.NetworkSe \\nrverControl start \\nAttempt to shutdown framework: DerbyNetClient \\n70 del \\n&lt; expected java.sql.SQLException: Invalid operation: result set closed \\n70a70 \\n&gt; expected java.sql.SQLException: \'ResultSet\' already closed. \\n551a552,559 \\n&gt; conn4 autcommit true \\n&gt; acxs 1 \\n&gt; acxs 2 \\n&gt; autocommitxastart expected \'ResultSet\' already closed. \\n&gt; acxs 1 \\n&gt; acxs 2 \\n&gt; autocommitxastart expected  : XAException - XAER_DUPID : Error executing a XAResource.start(), Server returned XAER_DUPID \\n&gt; acxs 3 \\n578 del \\n&lt; Expected SQLException Invalid operation: result set closed \\n578a586 \\n&gt; Expected SQLException \'ResultSet\' already closed. \\n590 del \\n&lt; Expected SQLException Invalid operation: result set closed \\n591 del \\n&lt; Expected SQLException Invalid operation: result set closed \\n591a598,599 \\n&gt; Expected SQLException \'ResultSet\' already closed. \\n&gt; Expected SQLException \'ResultSet\' already closed. \\nTest Failed. \\n\\t\\t\\t End:   checkDataSource30 jdk1.4.2_07 DerbyNetClient 2006-04-14 09:18:29 *** \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12374556\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12374556&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12374556\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374556_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374556_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Apr\\/06 01:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-15T01:41:56+0000\'\u003e15\\/Apr\\/06 01:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Kathey for updating the master files. The diffs in the master file are expected. This is because the error messages were changed by commit for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-842\\\" title=\\\"Internationalize messages in PreparedStatement to Section in org.apache.derby.client.am\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-842\\\"\u003e\u003cdel\u003eDERBY-842\u003c\\/del\u003e\u003c\\/a\u003e, svn revision# 393967. I had my workspace synched up to a older revision when I created the patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am attaching \'derby-1025-patch2-v1.diff\' which changes checkDataSource test to test that starting a global transcation when a local transaction is active will give an exception. The XA error code is also printed out to verify that we get the expected exception. This patch will resolve this issue fully.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith this patch, I have run checkDataSource checkDataSource30 tests with embedded and client frameworks. Please take a look at this patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374556_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374556_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Apr\\/06 01:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-15T01:41:56+0000\'\u003e15\\/Apr\\/06 01:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Kathey for updating the master files. The diffs in the master file are expected. This is because the error messages were changed by commit for   DERBY-842  , svn revision# 393967. I had my workspace synched up to a older revision when I created the patch. \\n\\n I am attaching \'derby-1025-patch2-v1.diff\' which changes checkDataSource test to test that starting a global transcation when a local transaction is active will give an exception. The XA error code is also printed out to verify that we get the expected exception. This patch will resolve this issue fully. \\n\\n With this patch, I have run checkDataSource checkDataSource30 tests with embedded and client frameworks. Please take a look at this patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12374581\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12374581&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12374581\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374581_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374581_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Apr\\/06 06:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-15T06:33:53+0000\'\u003e15\\/Apr\\/06 06:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching \'derby-1025-10.1.diff\' for 10.1 branch. A direct merge does not work because the test checkDataSource is not enabled for client in 10.1. \u003c\\/p\u003e\\n\\n\u003cp\u003eI ran derbynetclientmats using Sun JDK 1.4.2 on Windows XP. I also ran the test jdbcapi\\/XATest on client and embedded frameworks. Please look at this patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eNOTE: \u003cbr\\/\u003e\\nThere are two pending patches attached to this issue:\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003ederby-1025-10.1.diff for 10.1 branch\u003c\\/li\u003e\\n\\t\u003cli\u003ederby-1025-patch2-v1.diff for trunk (changes to the test checkDataSource.java)\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12374581_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12374581_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Apr\\/06 06:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-15T06:33:53+0000\'\u003e15\\/Apr\\/06 06:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching \'derby-1025-10.1.diff\' for 10.1 branch. A direct merge does not work because the test checkDataSource is not enabled for client in 10.1.  \\n\\n I ran derbynetclientmats using Sun JDK 1.4.2 on Windows XP. I also ran the test jdbcapi\\/XATest on client and embedded frameworks. Please look at this patch. \\n\\n NOTE:  \\nThere are two pending patches attached to this issue: \\n \\n\\t derby-1025-10.1.diff for 10.1 branch \\n\\t derby-1025-patch2-v1.diff for trunk (changes to the test checkDataSource.java) \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12375139\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12375139&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12375139\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12375139_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12375139_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Apr\\/06 21:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-19T21:56:02+0000\'\u003e19\\/Apr\\/06 21:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatches committed as revision# 394134,394949 in trunk; revision# 394230 in 10.1 branch\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"deepa\\\" id=\\\"commentauthor_12375139_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=deepa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=34050\\\" alt=\\\"deepa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Deepa Remesh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12375139_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Apr\\/06 21:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-19T21:56:02+0000\'\u003e19\\/Apr\\/06 21:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patches committed as revision# 394134,394949 in trunk; revision# 394230 in 10.1 branch              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12485331\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12485331&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12485331\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12485331_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12485331_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Mar\\/07 20:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-29T20:07:18+0000\'\u003e29\\/Mar\\/07 20:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI believe this was incorrectly closed.\u003cbr\\/\u003e\\nAlthough I don\'t see the XAID_DUP error, so there was improvement, it seems to me the transaction is still active.\u003c\\/p\u003e\\n\\n\u003cp\u003echeckDataSource has I think a mistake in it that gave the impression this was fixed:\u003c\\/p\u003e\\n\\n\u003cp\u003e    try \u003c\\/p\u003e\\n{\\n         rs4.next(); System.out.println(\\\"acxs \\\" + rs.getInt(1))\\n    }\\n\u003cp\u003e catch (SQLException sqle) \u003c\\/p\u003e\\n{\\n         System.out.println(\\\"autocommitxastart expected \\\" + sqle.getMessage());\\n    }\\n\\n\u003cp\u003eWe\'re doing rs4.next(), but then attempt to get a value out of rs, rather than rs4. rs has been closed way before this point, so not surprisingly, this gives an sqlexception.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen I change rs.getInt(1) to rs4.getInt(1), things work unchanged for embedded. However, with DerbyNetClient, we get different behavior; we happily get a value returned (3). \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12485331_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12485331_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Mar\\/07 20:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-29T20:07:18+0000\'\u003e29\\/Mar\\/07 20:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I believe this was incorrectly closed. \\nAlthough I don\'t see the XAID_DUP error, so there was improvement, it seems to me the transaction is still active. \\n\\n checkDataSource has I think a mistake in it that gave the impression this was fixed: \\n\\n     try  \\n{\\n         rs4.next(); System.out.println(\\\"acxs \\\" + rs.getInt(1))\\n    }\\n  catch (SQLException sqle)  \\n{\\n         System.out.println(\\\"autocommitxastart expected \\\" + sqle.getMessage());\\n    }\\n\\n We\'re doing rs4.next(), but then attempt to get a value out of rs, rather than rs4. rs has been closed way before this point, so not surprisingly, this gives an sqlexception. \\n\\n When I change rs.getInt(1) to rs4.getInt(1), things work unchanged for embedded. However, with DerbyNetClient, we get different behavior; we happily get a value returned (3).               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12494117\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12494117&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12494117\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12494117_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12494117_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/07 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-07T19:53:07+0000\'\u003e07\\/May\\/07 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLooking at the test, I think to test whether the cursor is closed we needed to create the statement with CLOSE_CURSRS_AT_COMMIT.  Making that change, client seems to work as expected.  We get SQLState XCL16, but embedded is getting 08003 - No current connection, which I think is wrong. The connection should still be valid. It is only the resultset that is closed. I will open another issue for that and submit the test change.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12494117_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12494117_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/07 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-07T19:53:07+0000\'\u003e07\\/May\\/07 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Looking at the test, I think to test whether the cursor is closed we needed to create the statement with CLOSE_CURSRS_AT_COMMIT.  Making that change, client seems to work as expected.  We get SQLState XCL16, but embedded is getting 08003 - No current connection, which I think is wrong. The connection should still be valid. It is only the resultset that is closed. I will open another issue for that and submit the test change.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12494119\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12494119&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12494119\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12494119_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12494119_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/07 20:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-07T20:08:48+0000\'\u003e07\\/May\\/07 20:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFixed the test case to create the statement CLOSE_CURSORS_AT_COMMIT.  Filed \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2620\\\" title=\\\"embedded throws SQLState 8003 (No current connection) on rs.next() on closed resultSet in test for DERBY-1025 in DataSourceTest\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2620\\\"\u003eDERBY-2620\u003c\\/a\u003e for an issue with embedded losing the connection in this case.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12494119_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12494119_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/May\\/07 20:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-07T20:08:48+0000\'\u003e07\\/May\\/07 20:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Fixed the test case to create the statement CLOSE_CURSORS_AT_COMMIT.  Filed  DERBY-2620  for an issue with embedded losing the connection in this case.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12494167\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1025?focusedCommentId=12494167&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12494167\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12494167_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12494167_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/May\\/07 00:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-08T00:49:38+0000\'\u003e08\\/May\\/07 00:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIn jdbcapi.DataSourceTest there is a piece of code with this comment related to this bug:\u003c\\/p\u003e\\n\\n\u003cp\u003e        \\/\\/ \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1025\\\" title=\\\"[xa] client XAResource.start() does not commit an active local transaction when auto commit is true\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1025\\\"\u003e\u003cdel\u003eDERBY-1025\u003c\\/del\u003e\u003c\\/a\u003e.\u003cbr\\/\u003e\\n        \\/\\/ With Embedded, this will give error: 08003 - No current connection\u003cbr\\/\u003e\\n        \\/\\/ But with NetworkServer \\/ DerbyNetClient, the transaction does not\u003cbr\\/\u003e\\n        \\/\\/ appear to be closed, and we actually get a value.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThe comment related to the network server does not seem valid any more.\u003cbr\\/\u003e\\nAssuming the test passes since the path through the code that would result in getting a value back would result in fail() being called.\u003cbr\\/\u003e\\nShould the comment be cleaned up to reflect reality or am I missing something?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12494167_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12494167_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/May\\/07 00:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-08T00:49:38+0000\'\u003e08\\/May\\/07 00:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    In jdbcapi.DataSourceTest there is a piece of code with this comment related to this bug: \\n\\n         \\/\\/   DERBY-1025  . \\n        \\/\\/ With Embedded, this will give error: 08003 - No current connection \\n        \\/\\/ But with NetworkServer \\/ DerbyNetClient, the transaction does not \\n        \\/\\/ appear to be closed, and we actually get a value. \\n\\n\\n The comment related to the network server does not seem valid any more. \\nAssuming the test passes since the path through the code that would result in getting a value back would result in fail() being called. \\nShould the comment be cleaned up to reflect reality or am I missing something?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520238150770"> 
    <input type="hidden" title="jira.request.server.time" value="226"> 
    <input type="hidden" title="jira.request.id" value="502x94349178x6"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="6"> 
    <input type="hidden" title="db.reads.time.in.ms" value="29"> 
    <input type="hidden" title="db.conns.time.in.ms" value="35"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 502x94349178x6
	          REQUEST TIMESTAMP : [05/Mar/2018:08:22:30 +0000]
	               REQUEST TIME : 0.2260
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 6

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=23, elapsedTotal=29387499, elapsedMin=478747, elapsedMax=12022795, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=27, elapsedTotal=35075543, elapsedMin=467574, elapsedMax=12058120, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>