<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|03b7763a51d5de479b50d10b909812a31f8f477b|lout"> 
  <link rel="shortcut icon" href="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"sd.customer.profile.multi.languages\":true,\"sd.customer.portal.transitions\":true,\"sd.customer.portal.transitions.config\":true,\"sd.custom.email.stripping.rules\":false,\"sd.sla.lucene.issue.id.callback.performance\":true,\"sd.new.settings.sidebar.location\":true,\"sd.workload.report.paginator\":true,\"sd.experimental.portal.search.algorithm.default.1\":false,\"sd.customer.portal.help.center.agent.announcement\":true,\"sd.sla.improved.rendering\":false,\"sd.experimental.portal.search.algorithm.default.2\":false,\"sd.customer.feedback.validate.reporter.on.token\":true,\"sd.custom.email.notifications.utf8.csat.star\":true,\"sd.who.create.customers.by.email.setting\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.renderer.consider.variable.format\":true,\"sd.stats.event.tracking\":true,\"sd.password.helper.dialog\":true,\"sd.canned.responses\":false,\"sd.portal.help.center.customer.signup.secondary.email\":true,\"sd.custom.email.notifications.manage.language\":true,\"sd.use.search.by.permissions\":true,\"sd.slavalue.record.updated.date\":false,\"sd.report.custom.date.range\":false,\"sd.kb.article.helpfulness.report\":false,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"sd.custom.email.notifications.styling\":true,\"sd.workinghours.new.page.bulldog.1\":false,\"sd.customer.portal.two.step.login\":false,\"sd.automation.psmq.async.executor\":true,\"sd.customer.org.list.page.lazy.search\":true,\"sd.approval.requested.when.handler\":true,\"sd.request.type.field.rest.api.filtering.bugfix\":true,\"sd.automation.then.action.auto.answer.approval\":true,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"sla.will.only.be.paused.if.they.are.already.started\":true,\"sd.kb.comment.share.stats.collection\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"sd.customer.orgs.group.participants\":true,\"sd.portal.help.center.customer.signup\":true,\"sd.sla.agent.jql.security.restricted\":true,\"sd.test.feature.flag.x\":true,\"sd.test.feature.flag.y\":false,\"sd.cluster.safe.mail.channel.shutdown\":true,\"sd.email.channel.folders\":false,\"sd.email.analytics.open\":false,\"sd.kb.project.creation.create.link.space\":true,\"sd.workinghours.new.page\":false,\"sd.confluence.anonymous.permission.fix\":true,\"com.atlassian.jira.issuetable.draggable\":true,\"sd.customer.portal.project.agent.announcement\":true,\"sd.automation.audit.log\":true,\"jira.jql.suggestrecentfields\":false,\"sd.canned.responses.check.index.startup\":false,\"sd.new.project.templates\":true,\"sd.custom.email.notifications.custom.rules.simple.ui\":false,\"sd.custom.email.notifications.cut.over\":true,\"sd.dismiss.all.misconfiguration.warnings.setting\":true,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"sd.sla.configurations.export\":true,\"sd.canned.responses.variable.substitution\":true,\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"sd.customer.portal.prioties.per.project.fix\":true,\"jira.instrumentation.laas\":false,\"sd.kb.self.service.report\":false,\"sla.improved.request.handling\":true,\"sd.no.schedule.async.upgrade.tasks\":true,\"sd.kb.primary.nav\":true,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"sd.kb.issueview.panel.phase2\":true,\"sd.email.outsider.comments\":true,\"jira.create.linked.issue\":true,\"sd.kb.issueview.panel\":true,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"sd.approvals.light.weight\":false,\"sd.automation.then.webhook\":true,\"sd.respect.inline.edit.issue.off\":true,\"jira.jql.smartautoselectfirst\":false,\"sd.global.portal.search.atlassian.only.tracking\":false,\"sd.automation.if.condition.comment.primary.action\":true,\"jira.priorities.per.project\":true,\"sd.inline.noformat.renderer\":true,\"sd.customer.request.type.create.edit.screens\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/png,image/vnd.wap.wbmp,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.servicedesk.servicedesk-canned-responses-plugin:canned-responses-data-provider.data"]="{\"substitutionVariables\":{\"issue.summary\":\"Issue summary\",\"issue.description\":\"Issue description\",\"issue.key\":\"Issue key\",\"issue.reporter.name\":\"Issue reporter\",\"issue.resolution\":\"Issue resolution\",\"request.url\":\"Request URL\",\"request.status\":\"Request status\"}}";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-help-links.help-links"]="{\"help\":{\"email.settings\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"managing.queues\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+queues+for+your+team\",\"email.setup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"request.settings.help.bubble\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\",\"email.settings.suitablerequest\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email#Receivingrequestsbyemail-suitablerequest\",\"sla.import.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Importing+SLAs\",\"documentation.home\":\"https://docs.atlassian.com/jira/jsd-docs-039/JIRA+Service+Desk+Documentation\",\"default\":\"https://docs.atlassian.com/jira/jsd-docs-039/\",\"create.space.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base#serving-customers-with-a-knowledge-base-createpermission\",\"email.settings.troubleshooting\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+the+email+channel\",\"admin.notifications.config\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+service+desk+notifications\",\"troubleshoot.requesttype\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+request+types\",\"approvals.configuration\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+JIRA+Service+Desk+approvals\",\"setting.up.reports\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+service+desk+reports\",\"public.signup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+public+signup\",\"knowledge.base\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base\",\"resolve.permission.scheme.errors\":\"https://docs.atlassian.com/jira/jsd-docs-039/Resolving+permission+scheme+errors\",\"getting.started\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+with+JIRA+Service+Desk\",\"getting.started.agent\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+for+service+desk+agents\",\"invite.customers\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\"},\"kb\":{\"default\":\"https://confluence.atlassian.com/display/SDKB/\",\"troubleshooting.user.management.issues\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\",\"legacytransition\":\"https://confluence.atlassian.com/display/SDKB/Replacing+legacy+automatic+transitions+with+automation+rules\",\"umtroubleshoot\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\"}}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-base-url.base-url"]="\"https://issues.apache.org/jira\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"65db75cb870d2\"";
WRM._unparsedData["project-id"]="12310230";
WRM._unparsedData["project-key"]="\"SOLR\"";
WRM._unparsedData["project-name"]="\"Solr\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310230";
WRM._unparsedData["projectKey"]="\"SOLR\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/1a6b21131945f6f49ff48336b49ca3fe-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/d8484c9183f546511a8e336a8779bcd9-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d3b35d835f8f46fc3b53bb4db7f85158-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/71d42e74136d842a3ef4d5d136484843-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/95a4826c265852f4904f1e0e7300df68-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/944bb39eced1b35cfc7194aa02eb5a5a/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/5a8f0f8b8aa8f96a4f0f7e9e248d62f3-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="SOLR-1972"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[SOLR-1972] Need additional query stats in admin interface - median, 95th and 99th percentile - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[SOLR-1972] Need additional query stats in admin interface - median, 95th and 99th percentile - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/SOLR" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-1972">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310230" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Solr'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310230&amp;avatarId=22151"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/SOLR">Solr</a></li>
                 <li><a class="issue-link" data-issue-key="SOLR-1972" href="/jira/browse/SOLR-1972" id="key-val" rel="12467831">SOLR-1972</a></li>
                </ol>
                <h1 id="summary-val">Need additional query stats in admin interface - median, 95th and 99th percentile</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-1972"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/SOLR-1972/SOLR-1972.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/SOLR-1972/SOLR-1972.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/SOLR-1972/SOLR-1972.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/SOLR-1972/SOLR-1972.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"> Improvement </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/minor.svg" title="Minor - Minor loss of function, or other problem where easy workaround is present." width="16"> Minor </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="1.4 ">1.4</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+4.1" title="4.1 Major release after 4.0">4.1</a>, <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+6.0" title="6.0 First 6.x release, Major release after 5.5">6.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+component+%3D+%22Admin+UI%22" title="Admin UI Solr's Web Admin GUI (AngularJS)">Admin UI</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12467831-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>I would like to see more detailed query statistics from the admin GUI. This is what you can get now:</p> 
                  <p>requests : 809<br> errors : 0<br> timeouts : 0<br> totalTime : 70053<br> avgTimePerRequest : 86.59209<br> avgRequestsPerSecond : 0.8148785 </p> 
                  <p>I'd like to see more data on the time per request - median, 95th percentile, 99th percentile, and any other statistical function that makes sense to include. In my environment, the first bunch of queries after startup tend to take several seconds each. I find that the average value tends to be useless until it has several thousand queries under its belt and the caches are thoroughly warmed. The statistical functions I have mentioned would quickly eliminate the influence of those initial slow queries.</p> 
                  <p>The system will have to store individual data about each query. I don't know if this is something Solr does already. It would be nice to have a configurable count of how many of the most recent data points are kept, to control the amount of memory the feature uses. The default value could be something like 1024 or 4096.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/SOLR-1972?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/SOLR-1972?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/SOLR-1972?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/SOLR-1972?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12485788" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12485788/elyograg-1972-3.2.patch" draggable="true" data-downloadurl="text/x-patch:elyograg-1972-3.2.patch:https://issues.apache.org/jira/secure/attachment/12485788/elyograg-1972-3.2.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12485788/elyograg-1972-3.2.patch" title="Latest  08/Jul/11 21:51 - Shawn Heisey" draggable="true" data-downloadurl="text/x-patch:elyograg-1972-3.2.patch:https://issues.apache.org/jira/secure/attachment/12485788/elyograg-1972-3.2.patch">elyograg-1972-3.2.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-08T21:51:27.167Z">08/Jul/11 21:51</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12485678" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12485678/elyograg-1972-3.2.patch" draggable="true" data-downloadurl="text/plain:elyograg-1972-3.2.patch:https://issues.apache.org/jira/secure/attachment/12485678/elyograg-1972-3.2.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12485678/elyograg-1972-3.2.patch" title=" 08/Jul/11 02:29 - Shawn Heisey" draggable="true" data-downloadurl="text/plain:elyograg-1972-3.2.patch:https://issues.apache.org/jira/secure/attachment/12485678/elyograg-1972-3.2.patch">elyograg-1972-3.2.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-08T02:29:16.069Z">08/Jul/11 02:29</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12485789" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12485789/elyograg-1972-trunk.patch" draggable="true" data-downloadurl="text/x-patch:elyograg-1972-trunk.patch:https://issues.apache.org/jira/secure/attachment/12485789/elyograg-1972-trunk.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12485789/elyograg-1972-trunk.patch" title="Latest  08/Jul/11 21:51 - Shawn Heisey" draggable="true" data-downloadurl="text/x-patch:elyograg-1972-trunk.patch:https://issues.apache.org/jira/secure/attachment/12485789/elyograg-1972-trunk.patch">elyograg-1972-trunk.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-08T21:51:27.180Z">08/Jul/11 21:51</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12485679" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12485679/elyograg-1972-trunk.patch" draggable="true" data-downloadurl="text/plain:elyograg-1972-trunk.patch:https://issues.apache.org/jira/secure/attachment/12485679/elyograg-1972-trunk.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12485679/elyograg-1972-trunk.patch" title=" 08/Jul/11 02:29 - Shawn Heisey" draggable="true" data-downloadurl="text/plain:elyograg-1972-trunk.patch:https://issues.apache.org/jira/secure/attachment/12485679/elyograg-1972-trunk.patch">elyograg-1972-trunk.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-08T02:29:16.083Z">08/Jul/11 02:29</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12562853" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12562853/elyograg-closeable.patch" draggable="true" data-downloadurl="text/x-patch:elyograg-closeable.patch:https://issues.apache.org/jira/secure/attachment/12562853/elyograg-closeable.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12562853/elyograg-closeable.patch" title="Latest  01/Jan/13 19:40 - Shawn Heisey" draggable="true" data-downloadurl="text/x-patch:elyograg-closeable.patch:https://issues.apache.org/jira/secure/attachment/12562853/elyograg-closeable.patch">elyograg-closeable.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-01-01T19:40:24.992Z">01/Jan/13 19:40</time>
                   </dd>
                   <dd class="attachment-size">
                    37 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12562384" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12562384/leak.patch" draggable="true" data-downloadurl="text/plain:leak.patch:https://issues.apache.org/jira/secure/attachment/12562384/leak.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12562384/leak.patch" title="Latest  26/Dec/12 16:02 - Robert Muir" draggable="true" data-downloadurl="text/plain:leak.patch:https://issues.apache.org/jira/secure/attachment/12562384/leak.patch">leak.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-12-26T16:02:22.328Z">26/Dec/12 16:02</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Robert Muir
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12562393" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12562393/leak-closeable.patch" draggable="true" data-downloadurl="text/x-patch:leak-closeable.patch:https://issues.apache.org/jira/secure/attachment/12562393/leak-closeable.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12562393/leak-closeable.patch" title="Latest  26/Dec/12 19:11 - Shawn Heisey" draggable="true" data-downloadurl="text/x-patch:leak-closeable.patch:https://issues.apache.org/jira/secure/attachment/12562393/leak-closeable.patch">leak-closeable.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-12-26T19:11:23.461Z">26/Dec/12 19:11</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12562436" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12562436/revert-SOLR-1972.patch" draggable="true" data-downloadurl="text/x-patch:revert-SOLR-1972.patch:https://issues.apache.org/jira/secure/attachment/12562436/revert-SOLR-1972.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12562436/revert-SOLR-1972.patch" title="Latest  27/Dec/12 04:42 - Shawn Heisey" draggable="true" data-downloadurl="text/x-patch:revert-SOLR-1972.patch:https://issues.apache.org/jira/secure/attachment/12562436/revert-SOLR-1972.patch">revert-SOLR-1972.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-12-27T04:42:04.501Z">27/Dec/12 04:42</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12562910" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12562910/SOLR-1972_forked-metrics.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972_forked-metrics.patch:https://issues.apache.org/jira/secure/attachment/12562910/SOLR-1972_forked-metrics.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12562910/SOLR-1972_forked-metrics.patch" title="Latest  02/Jan/13 15:01 - Alan Woodward" draggable="true" data-downloadurl="text/plain:SOLR-1972_forked-metrics.patch:https://issues.apache.org/jira/secure/attachment/12562910/SOLR-1972_forked-metrics.patch">SOLR-1972_forked-metrics.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-01-02T15:01:24.266Z">02/Jan/13 15:01</time>
                   </dd>
                   <dd class="attachment-size">
                    53 kB
                   </dd>
                   <dd class="attachment-author">
                    Alan Woodward
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12562854" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12562854/SOLR-1972_forked-metrics.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972_forked-metrics.patch:https://issues.apache.org/jira/secure/attachment/12562854/SOLR-1972_forked-metrics.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12562854/SOLR-1972_forked-metrics.patch" title=" 01/Jan/13 19:42 - Alan Woodward" draggable="true" data-downloadurl="text/plain:SOLR-1972_forked-metrics.patch:https://issues.apache.org/jira/secure/attachment/12562854/SOLR-1972_forked-metrics.patch">SOLR-1972_forked-metrics.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-01-01T19:42:23.561Z">01/Jan/13 19:42</time>
                   </dd>
                   <dd class="attachment-size">
                    57 kB
                   </dd>
                   <dd class="attachment-author">
                    Alan Woodward
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12554876" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12554876/SOLR-1972_metrics.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12554876/SOLR-1972_metrics.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12554876/SOLR-1972_metrics.patch" title="Latest  26/Nov/12 16:50 - Shawn Heisey" draggable="true" data-downloadurl="text/x-patch:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12554876/SOLR-1972_metrics.patch">SOLR-1972_metrics.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-11-26T16:50:03.604Z">26/Nov/12 16:50</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12551124" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12551124/SOLR-1972_metrics.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12551124/SOLR-1972_metrics.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12551124/SOLR-1972_metrics.patch" title=" 28/Oct/12 20:47 - Alan Woodward" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12551124/SOLR-1972_metrics.patch">SOLR-1972_metrics.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-10-28T20:47:21.786Z">28/Oct/12 20:47</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Alan Woodward
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12551020" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12551020/SOLR-1972_metrics.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12551020/SOLR-1972_metrics.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12551020/SOLR-1972_metrics.patch" title=" 26/Oct/12 21:03 - Alan Woodward" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12551020/SOLR-1972_metrics.patch">SOLR-1972_metrics.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-10-26T21:03:40.141Z">26/Oct/12 21:03</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Alan Woodward
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12550677" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12550677/SOLR-1972_metrics.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12550677/SOLR-1972_metrics.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12550677/SOLR-1972_metrics.patch" title=" 24/Oct/12 20:13 - Alan Woodward" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12550677/SOLR-1972_metrics.patch">SOLR-1972_metrics.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-10-24T20:13:51.158Z">24/Oct/12 20:13</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Alan Woodward
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12550607" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12550607/SOLR-1972_metrics.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12550607/SOLR-1972_metrics.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12550607/SOLR-1972_metrics.patch" title=" 24/Oct/12 08:52 - Alan Woodward" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12550607/SOLR-1972_metrics.patch">SOLR-1972_metrics.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-10-24T08:52:33.457Z">24/Oct/12 08:52</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Alan Woodward
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12550583" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12550583/SOLR-1972_metrics.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12550583/SOLR-1972_metrics.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12550583/SOLR-1972_metrics.patch" title=" 24/Oct/12 02:37 - Shawn Heisey" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12550583/SOLR-1972_metrics.patch">SOLR-1972_metrics.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-10-24T02:37:47.980Z">24/Oct/12 02:37</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12550477" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12550477/SOLR-1972_metrics.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12550477/SOLR-1972_metrics.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12550477/SOLR-1972_metrics.patch" title=" 23/Oct/12 15:29 - Alan Woodward" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12550477/SOLR-1972_metrics.patch">SOLR-1972_metrics.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-10-23T15:29:00.311Z">23/Oct/12 15:29</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Alan Woodward
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12550328" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12550328/SOLR-1972_metrics.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12550328/SOLR-1972_metrics.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12550328/SOLR-1972_metrics.patch" title=" 22/Oct/12 18:55 - Alan Woodward" draggable="true" data-downloadurl="text/plain:SOLR-1972_metrics.patch:https://issues.apache.org/jira/secure/attachment/12550328/SOLR-1972_metrics.patch">SOLR-1972_metrics.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-10-22T18:55:14.531Z">22/Oct/12 18:55</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Alan Woodward
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12485503" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12485503/SOLR-1972.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-1972.patch:https://issues.apache.org/jira/secure/attachment/12485503/SOLR-1972.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12485503/SOLR-1972.patch" title="Latest  06/Jul/11 23:28 - Adrien Grand" draggable="true" data-downloadurl="text/x-patch:SOLR-1972.patch:https://issues.apache.org/jira/secure/attachment/12485503/SOLR-1972.patch">SOLR-1972.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-06T23:28:56.083Z">06/Jul/11 23:28</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Adrien Grand
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12482312" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12482312/SOLR-1972.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-1972.patch:https://issues.apache.org/jira/secure/attachment/12482312/SOLR-1972.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12482312/SOLR-1972.patch" title=" 12/Jun/11 19:23 - Adrien Grand" draggable="true" data-downloadurl="text/x-patch:SOLR-1972.patch:https://issues.apache.org/jira/secure/attachment/12482312/SOLR-1972.patch">SOLR-1972.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-06-12T19:23:01.556Z">12/Jun/11 19:23</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Adrien Grand
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12482297" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12482297/SOLR-1972.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-1972.patch:https://issues.apache.org/jira/secure/attachment/12482297/SOLR-1972.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12482297/SOLR-1972.patch" title=" 12/Jun/11 12:40 - Adrien Grand" draggable="true" data-downloadurl="text/x-patch:SOLR-1972.patch:https://issues.apache.org/jira/secure/attachment/12482297/SOLR-1972.patch">SOLR-1972.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-06-12T12:40:14.297Z">12/Jun/11 12:40</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Adrien Grand
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12482147" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12482147/SOLR-1972.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-1972.patch:https://issues.apache.org/jira/secure/attachment/12482147/SOLR-1972.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12482147/SOLR-1972.patch" title=" 11/Jun/11 12:57 - Adrien Grand" draggable="true" data-downloadurl="text/x-patch:SOLR-1972.patch:https://issues.apache.org/jira/secure/attachment/12482147/SOLR-1972.patch">SOLR-1972.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-06-11T12:57:52.735Z">11/Jun/11 12:57</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Adrien Grand
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12506788" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12506788/SOLR-1972-branch3x-url_pattern.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-1972-branch3x-url_pattern.patch:https://issues.apache.org/jira/secure/attachment/12506788/SOLR-1972-branch3x-url_pattern.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12506788/SOLR-1972-branch3x-url_pattern.patch" title="Latest  09/Dec/11 20:47 - Shawn Heisey" draggable="true" data-downloadurl="text/x-patch:SOLR-1972-branch3x-url_pattern.patch:https://issues.apache.org/jira/secure/attachment/12506788/SOLR-1972-branch3x-url_pattern.patch">SOLR-1972-branch3x-url_pattern.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-12-09T20:47:54.314Z">09/Dec/11 20:47</time>
                   </dd>
                   <dd class="attachment-size">
                    11 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12550243" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12550243/SOLR-1972-branch4x.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972-branch4x.patch:https://issues.apache.org/jira/secure/attachment/12550243/SOLR-1972-branch4x.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12550243/SOLR-1972-branch4x.patch" title="Latest  22/Oct/12 05:24 - Shawn Heisey" draggable="true" data-downloadurl="text/plain:SOLR-1972-branch4x.patch:https://issues.apache.org/jira/secure/attachment/12550243/SOLR-1972-branch4x.patch">SOLR-1972-branch4x.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-10-22T05:24:22.762Z">22/Oct/12 05:24</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12550214" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12550214/SOLR-1972-branch4x.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972-branch4x.patch:https://issues.apache.org/jira/secure/attachment/12550214/SOLR-1972-branch4x.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12550214/SOLR-1972-branch4x.patch" title=" 21/Oct/12 20:32 - Shawn Heisey" draggable="true" data-downloadurl="text/plain:SOLR-1972-branch4x.patch:https://issues.apache.org/jira/secure/attachment/12550214/SOLR-1972-branch4x.patch">SOLR-1972-branch4x.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-10-21T20:32:55.055Z">21/Oct/12 20:32</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12551041" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12551041/solr1972-metricsregistry-branch4x-failure.log" draggable="true" data-downloadurl="text/plain:solr1972-metricsregistry-branch4x-failure.log:https://issues.apache.org/jira/secure/attachment/12551041/solr1972-metricsregistry-branch4x-failure.log"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12551041/solr1972-metricsregistry-branch4x-failure.log" title="Latest  26/Oct/12 23:35 - Shawn Heisey" draggable="true" data-downloadurl="text/plain:solr1972-metricsregistry-branch4x-failure.log:https://issues.apache.org/jira/secure/attachment/12551041/solr1972-metricsregistry-branch4x-failure.log">solr1972-metricsregistry-branch4x-failure.log</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-10-26T23:35:51.850Z">26/Oct/12 23:35</time>
                   </dd>
                   <dd class="attachment-size">
                    2.47 MB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12505616" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12505616/SOLR-1972-url_pattern.patch" draggable="true" data-downloadurl="text/plain:SOLR-1972-url_pattern.patch:https://issues.apache.org/jira/secure/attachment/12505616/SOLR-1972-url_pattern.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12505616/SOLR-1972-url_pattern.patch" title="Latest  30/Nov/11 12:47 - Eric Pugh" draggable="true" data-downloadurl="text/plain:SOLR-1972-url_pattern.patch:https://issues.apache.org/jira/secure/attachment/12505616/SOLR-1972-url_pattern.patch">SOLR-1972-url_pattern.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-11-30T12:47:26.239Z">30/Nov/11 12:47</time>
                   </dd>
                   <dd class="attachment-size">
                    11 kB
                   </dd>
                   <dd class="attachment-author">
                    Eric Pugh
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12562390" data-issue-id="12467831" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12562390/stacktraces.tar.gz" draggable="true" data-downloadurl="application/gzip:stacktraces.tar.gz:https://issues.apache.org/jira/secure/attachment/12562390/stacktraces.tar.gz"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12562390/stacktraces.tar.gz" title="Latest  26/Dec/12 18:10 - Shawn Heisey" draggable="true" data-downloadurl="application/gzip:stacktraces.tar.gz:https://issues.apache.org/jira/secure/attachment/12562390/stacktraces.tar.gz">stacktraces.tar.gz</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-12-26T18:10:13.942Z">26/Dec/12 18:10</time>
                   </dd>
                   <dd class="attachment-size">
                    14 kB
                   </dd>
                   <dd class="attachment-author">
                    Shawn Heisey
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12946701_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="SOLR-8785: Use Metrics library for core metrics"> <a href="/jira/browse/SOLR-8785" data-issue-key="SOLR-8785" class="issue-link link-title resolution">SOLR-8785</a> <span class="link-summary">Use Metrics library for core metrics</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12625264_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="SOLR-4232: Make request handler metrics optional"> <a href="/jira/browse/SOLR-4232" data-issue-key="SOLR-4232" class="issue-link link-title resolution">SOLR-4232</a> <span class="link-summary">Make request handler metrics optional</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_romseygeek" rel="romseygeek" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Alan Woodward&quot;,&quot;emailAddress&quot;:&quot;alan.woodward@romseysoftware.co.uk&quot;,&quot;username&quot;:&quot;romseygeek&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="romseygeek"></span></span> Alan Woodward </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_elyograg" rel="elyograg" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Shawn Heisey&quot;,&quot;emailAddress&quot;:&quot;apache@elyograg.org&quot;,&quot;username&quot;:&quot;elyograg&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="elyograg"></span></span> Shawn Heisey </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">6</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">14</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="24/Jun/10 19:53"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2010-06-24T19:53:15+0000">24/Jun/10 19:53</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="16/Feb/17 15:55"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-02-16T15:55:25+0000">16/Feb/17 15:55</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="15/Jan/13 22:51"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2013-01-15T22:51:24+0000">15/Jan/13 22:51</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for n/a, Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-1972?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/SOLR-1972?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-13047897\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13047897&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13047897\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13047897_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13047897_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jun\\/11 12:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-11T12:57:52+0000\'\u003e11\\/Jun\\/11 12:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis patches adds rolling statistics (same as non-rolling statistics, plus median and 75\\/90\\/99 percentiles) to request handlers.\u003c\\/p\u003e\\n\\n\u003cp\u003eRolling statistics are off by default because they require synchronization, but the critical section is very small so no overhead should be noticeable.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13047897_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13047897_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jun\\/11 12:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-11T12:57:52+0000\'\u003e11\\/Jun\\/11 12:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This patches adds rolling statistics (same as non-rolling statistics, plus median and 75\\/90\\/99 percentiles) to request handlers. \\n\\n Rolling statistics are off by default because they require synchronization, but the critical section is very small so no overhead should be noticeable.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13048192\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13048192&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13048192\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13048192_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13048192_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/11 01:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-12T01:15:10+0000\'\u003e12\\/Jun\\/11 01:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you, Adrien!  I tried to apply this to Solr 3.2, which I am in the process of rolling into production, but it wouldn\'t apply.  I made a couple of changes to the part that was rejected and it applied, tried \\\"ant test\\\" in solr\\/, and it failed.  It looks like the 3.2 code is missing some of the bits that say \\\"&lt;Object&gt;\\\" ... not knowing Java, I have no idea what this might mean.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13048192_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13048192_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/11 01:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-12T01:15:10+0000\'\u003e12\\/Jun\\/11 01:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you, Adrien!  I tried to apply this to Solr 3.2, which I am in the process of rolling into production, but it wouldn\'t apply.  I made a couple of changes to the part that was rejected and it applied, tried \\\"ant test\\\" in solr\\/, and it failed.  It looks like the 3.2 code is missing some of the bits that say \\\"&lt;Object&gt;\\\" ... not knowing Java, I have no idea what this might mean.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13048308\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13048308&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13048308\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13048308_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13048308_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/11 12:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-12T12:40:14+0000\'\u003e12\\/Jun\\/11 12:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eShawn,\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch was built on a recent trunk checkout, which explains why it didn\'t apply on a 3.x version: the getStatistics of 3.x works with NamedList while the same method in 4.x works with NamedList&lt;Object&gt;.\u003c\\/p\u003e\\n\\n\u003cp\u003eI updated the patch to fix a little bug when the statistics were requested on the same millisecond as the request handler started.\u003c\\/p\u003e\\n\\n\u003cp\u003eI also removed a few modifications I had made to remove compiler warnings. Although desirable, it should probably go to a separate commit. This makes the patch a little bit clearer too.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ve just run Solr tests again with the new version of the patch and I don\'t get any failure\\/error.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13048308_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13048308_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/11 12:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-12T12:40:14+0000\'\u003e12\\/Jun\\/11 12:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Shawn, \\n\\n This patch was built on a recent trunk checkout, which explains why it didn\'t apply on a 3.x version: the getStatistics of 3.x works with NamedList while the same method in 4.x works with NamedList&lt;Object&gt;. \\n\\n I updated the patch to fix a little bug when the statistics were requested on the same millisecond as the request handler started. \\n\\n I also removed a few modifications I had made to remove compiler warnings. Although desirable, it should probably go to a separate commit. This makes the patch a little bit clearer too. \\n\\n I\'ve just run Solr tests again with the new version of the patch and I don\'t get any failure\\/error.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13048399\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13048399&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13048399\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13048399_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13048399_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/11 18:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-12T18:10:36+0000\'\u003e12\\/Jun\\/11 18:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI took your new patch, removed all instances of \\\"&lt;Object&gt;\\\" from it, and applied it to 3.2.  It went right in, and all tests passed.  I also added a 95th percentile, and I\'m recompiling.  After that I\'m going to put it in place and give it a try.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13048399_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13048399_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/11 18:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-12T18:10:36+0000\'\u003e12\\/Jun\\/11 18:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I took your new patch, removed all instances of \\\"&lt;Object&gt;\\\" from it, and applied it to 3.2.  It went right in, and all tests passed.  I also added a 95th percentile, and I\'m recompiling.  After that I\'m going to put it in place and give it a try.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13048419\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13048419&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13048419\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13048419_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13048419_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/11 19:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-12T19:23:01+0000\'\u003e12\\/Jun\\/11 19:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eImproved version of the patch\\u00A0:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ewarning + default values instead of exceptions in initArgs,\u003c\\/li\u003e\\n\\t\u003cli\u003econfigurable list of percentiles to compute (defaulting to the 90th and 99th percentiles).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13048419_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13048419_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/11 19:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-12T19:23:01+0000\'\u003e12\\/Jun\\/11 19:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Improved version of the patch\\u00A0: \\n \\n\\t warning + default values instead of exceptions in initArgs, \\n\\t configurable list of percentiles to compute (defaulting to the 90th and 99th percentiles). \\n \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13048457\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13048457&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13048457\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13048457_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13048457_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/11 03:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-13T03:48:08+0000\'\u003e13\\/Jun\\/11 03:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe same removal of \\\"&lt;Object&gt;\\\" from the newest patch before applying it makes it work on 3.2.  This is really awesome.  Thank you!  I hope it will be committed to 3.2 and branch_3x as well as trunk.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13048457_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13048457_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/11 03:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-13T03:48:08+0000\'\u003e13\\/Jun\\/11 03:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The same removal of \\\"&lt;Object&gt;\\\" from the newest patch before applying it makes it work on 3.2.  This is really awesome.  Thank you!  I hope it will be committed to 3.2 and branch_3x as well as trunk.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13051143\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13051143&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13051143\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13051143_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13051143_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/11 15:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-17T15:40:33+0000\'\u003e17\\/Jun\\/11 15:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI noticed what might be a problem.  Config:\u003c\\/p\u003e\\n\\n\u003cp\u003e  &lt;lst name=\\\"rollingStatistics\\\"&gt;\u003cbr\\/\u003e\\n    &lt;int name=\\\"history\\\"&gt;604800&lt;\\/int&gt;\u003cbr\\/\u003e\\n    &lt;int name=\\\"samples\\\"&gt;16384&lt;\\/int&gt;\u003cbr\\/\u003e\\n    &lt;arr name=\\\"percentiles\\\"&gt;\u003cbr\\/\u003e\\n      &lt;int&gt;90&lt;\\/int&gt;\u003cbr\\/\u003e\\n      &lt;int&gt;95&lt;\\/int&gt;\u003cbr\\/\u003e\\n      &lt;int&gt;99&lt;\\/int&gt;\u003cbr\\/\u003e\\n    &lt;\\/arr&gt;\u003cbr\\/\u003e\\n  &lt;\\/lst&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eCurrent statistics generated by Solr 3.2 with this patch:\u003c\\/p\u003e\\n\\n\u003cp\u003erequests : 31861\u003cbr\\/\u003e\\nerrors : 0\u003cbr\\/\u003e\\ntimeouts : 0\u003cbr\\/\u003e\\ntotalTime : 454186\u003cbr\\/\u003e\\navgTimePerRequest : 14.255 \u003cbr\\/\u003e\\nrollingRequests : 16384\u003cbr\\/\u003e\\nrollingTotalTime : 106955\u003cbr\\/\u003e\\nrollingAvgTimePerRequest : 6.528\u003cbr\\/\u003e\\nrollingAvgRequestsPerSecond : -0.024\u003cbr\\/\u003e\\nrollingMedian : 1\u003cbr\\/\u003e\\nrolling90thPercentile : 9\u003cbr\\/\u003e\\nrolling95thPercentile : 20\u003cbr\\/\u003e\\nrolling99thPercentile : 96 \u003c\\/p\u003e\\n\\n\u003cp\u003eThe requests per second is negative, which I think is a clear problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am slightly concerned by seeing the median as 1 millisecond.  The shard has 9 million documents in it and the index is 17GB, with only 9GB of RAM in the VM.  It might not actually be a problem &#8211; I was hitting it several times with a homegrown benchmarking app that has a relatively limited (only a couple thousand) supply of search strings.  It\'s entirely possible that after the first few thousand queries, everything was being served from Solr caches, and that what\'s still in the rolling data store really did happen that quickly.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13051143_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13051143_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/11 15:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-17T15:40:33+0000\'\u003e17\\/Jun\\/11 15:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I noticed what might be a problem.  Config: \\n\\n   &lt;lst name=\\\"rollingStatistics\\\"&gt; \\n    &lt;int name=\\\"history\\\"&gt;604800&lt;\\/int&gt; \\n    &lt;int name=\\\"samples\\\"&gt;16384&lt;\\/int&gt; \\n    &lt;arr name=\\\"percentiles\\\"&gt; \\n      &lt;int&gt;90&lt;\\/int&gt; \\n      &lt;int&gt;95&lt;\\/int&gt; \\n      &lt;int&gt;99&lt;\\/int&gt; \\n    &lt;\\/arr&gt; \\n  &lt;\\/lst&gt; \\n\\n Current statistics generated by Solr 3.2 with this patch: \\n\\n requests : 31861 \\nerrors : 0 \\ntimeouts : 0 \\ntotalTime : 454186 \\navgTimePerRequest : 14.255  \\nrollingRequests : 16384 \\nrollingTotalTime : 106955 \\nrollingAvgTimePerRequest : 6.528 \\nrollingAvgRequestsPerSecond : -0.024 \\nrollingMedian : 1 \\nrolling90thPercentile : 9 \\nrolling95thPercentile : 20 \\nrolling99thPercentile : 96  \\n\\n The requests per second is negative, which I think is a clear problem. \\n\\n I am slightly concerned by seeing the median as 1 millisecond.  The shard has 9 million documents in it and the index is 17GB, with only 9GB of RAM in the VM.  It might not actually be a problem &#8211; I was hitting it several times with a homegrown benchmarking app that has a relatively limited (only a couple thousand) supply of search strings.  It\'s entirely possible that after the first few thousand queries, everything was being served from Solr caches, and that what\'s still in the rolling data store really did happen that quickly.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13051167\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13051167&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13051167\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13051167_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13051167_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/11 16:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-17T16:21:23+0000\'\u003e17\\/Jun\\/11 16:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe median response time looks good compared to the 90th, 95th and 99th percentiles. Your explanation with Solr caches sounds reasonable to me.\u003c\\/p\u003e\\n\\n\u003cp\u003eRegarding the value of rollingAvgRequestsPerSecond, I suspect it is negative because of the time span between the computation of \'now\' and the time when rolling data is used. I will try to provide a patch for this issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13051167_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13051167_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/11 16:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-06-17T16:21:23+0000\'\u003e17\\/Jun\\/11 16:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The median response time looks good compared to the 90th, 95th and 99th percentiles. Your explanation with Solr caches sounds reasonable to me. \\n\\n Regarding the value of rollingAvgRequestsPerSecond, I suspect it is negative because of the time span between the computation of \'now\' and the time when rolling data is used. I will try to provide a patch for this issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13060717\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13060717&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13060717\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13060717_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13060717_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/11 17:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-06T17:48:36+0000\'\u003e06\\/Jul\\/11 17:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eA little further info on rollingAvgRequestsPerSecond ... I have noticed that it is always different from AvgRequestsPerSecond, even when requests and rollingRequests are the same.  I would expect different numbers when requests and rollingRequests diverge, but not when they are the same.\u003c\\/p\u003e\\n\\n\u003cp\u003eI did take a look at the code, but have to admit that I haven\'t wrapped my brain around it enough to figure out what the problem might be.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13060717_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13060717_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/11 17:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-06T17:48:36+0000\'\u003e06\\/Jul\\/11 17:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    A little further info on rollingAvgRequestsPerSecond ... I have noticed that it is always different from AvgRequestsPerSecond, even when requests and rollingRequests are the same.  I would expect different numbers when requests and rollingRequests diverge, but not when they are the same. \\n\\n I did take a look at the code, but have to admit that I haven\'t wrapped my brain around it enough to figure out what the problem might be.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13060920\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13060920&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13060920\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13060920_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13060920_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/11 23:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-06T23:28:56+0000\'\u003e06\\/Jul\\/11 23:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Shawn,\u003c\\/p\u003e\\n\\n\u003cp\u003eI fixed the patch so that rolling statistics are now consistent with non-rolling statistics for the first requests. Average requests by second may sometimes be a little different, but ensuring rolling and non-rolling statistics have exactly the same value would require more synchronization, which is not an option in my opinion.\u003c\\/p\u003e\\n\\n\u003cp\u003ePlease let me know if you still get negative values for rollingAvgRequestsPerSecond with this patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eI hope this patch is the good one!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13060920_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13060920_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/11 23:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-06T23:28:56+0000\'\u003e06\\/Jul\\/11 23:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Shawn, \\n\\n I fixed the patch so that rolling statistics are now consistent with non-rolling statistics for the first requests. Average requests by second may sometimes be a little different, but ensuring rolling and non-rolling statistics have exactly the same value would require more synchronization, which is not an option in my opinion. \\n\\n Please let me know if you still get negative values for rollingAvgRequestsPerSecond with this patch. \\n\\n I hope this patch is the good one!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13061724\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13061724&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13061724\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13061724_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061724_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 02:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T02:27:38+0000\'\u003e08\\/Jul\\/11 02:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI had a stray thought, wondering whether you could eliminate \\\"\u003cb\u003e:\u003c\\/b\u003e\\\" queries from the rollingStatistics.  I then realized that if you set low and high responseTime thresholds, you could effectively do the same thing.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ve cooked up a patch to do exactly this.  Although I won\'t be using highThreshold myself, I figured someone might want it, so I put it in there.\u003c\\/p\u003e\\n\\n\u003cp\u003eI created this against 3.2.  It should apply to 3.3 as well.  I manually modified the NamedList entries back to NamedList&lt;?&gt; and created a second patch, with the theory that it would then apply against trunk correctly.  I\'ll attach both patch versions.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13061724_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061724_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 02:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T02:27:38+0000\'\u003e08\\/Jul\\/11 02:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I had a stray thought, wondering whether you could eliminate \\\" : \\\" queries from the rollingStatistics.  I then realized that if you set low and high responseTime thresholds, you could effectively do the same thing. \\n\\n I\'ve cooked up a patch to do exactly this.  Although I won\'t be using highThreshold myself, I figured someone might want it, so I put it in there. \\n\\n I created this against 3.2.  It should apply to 3.3 as well.  I manually modified the NamedList entries back to NamedList&lt;?&gt; and created a second patch, with the theory that it would then apply against trunk correctly.  I\'ll attach both patch versions.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13061725\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13061725&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13061725\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13061725_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061725_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 02:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T02:29:16+0000\'\u003e08\\/Jul\\/11 02:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNew patches for 3.2\\/3.3, and a patch for trunk.  It adds lowThreshold and highThreshold config options.  If I broke some cardinal Java rule in my changes, please feel free to fix!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13061725_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061725_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 02:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T02:29:16+0000\'\u003e08\\/Jul\\/11 02:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    New patches for 3.2\\/3.3, and a patch for trunk.  It adds lowThreshold and highThreshold config options.  If I broke some cardinal Java rule in my changes, please feel free to fix!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13062161\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13062161&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13062161\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13062161_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13062161_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 20:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T20:31:01+0000\'\u003e08\\/Jul\\/11 20:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI tried to add a percentile of 100, so I could see the slowest query, and it didn\'t seem to do anything.  I\'ll be changing the following line so it works:\u003c\\/p\u003e\\n\\n\u003cp\u003e          if (percentile &gt;= 0 &amp;&amp; percentile &lt; 100) {\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13062161_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13062161_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 20:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T20:31:01+0000\'\u003e08\\/Jul\\/11 20:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I tried to add a percentile of 100, so I could see the slowest query, and it didn\'t seem to do anything.  I\'ll be changing the following line so it works: \\n\\n           if (percentile &gt;= 0 &amp;&amp; percentile &lt; 100) {              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13062208\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13062208&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13062208\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13062208_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13062208_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 21:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T21:51:27+0000\'\u003e08\\/Jul\\/11 21:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOf course, adding support for a 100th percentile was NOT as easy as simply changing &lt; to &lt;=.  New patches.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13062208_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13062208_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 21:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T21:51:27+0000\'\u003e08\\/Jul\\/11 21:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Of course, adding support for a 100th percentile was NOT as easy as simply changing &lt; to &lt;=.  New patches.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13065629\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13065629&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13065629\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"hossman\\\" id=\\\"commentauthor_13065629_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=hossman\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"hossman\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Hoss Man\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13065629_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jul\\/11 00:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-15T00:15:23+0000\'\u003e15\\/Jul\\/11 00:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eShawn: i was a little concerned based on the issue summary that this would slow down the performance of the handlers, but skimming the patch i see that unless it\'s explicitly configured in the init params, only a single \\\"responseTimes != null\\\" check is added to each request, and even when it is enabled, all the hard work is defered until the stats are actually requested &#8211; so as long as we document that recording (and retrieving) these stats may slow down the performance of hte handler, i don\'t see a big problem there.  (my personal prefrence is to generate these stats from log parsing because then it can be done completely out of band &#8211; but i certainly won\'t object to making it easier for people to get directly from solr)\u003c\\/p\u003e\\n\\n\u003cp\u003emy only other suggestion is that  you refactor the stats code into some static methods (or a helper class) so we can have some test cases that verify the accuracy against fixed data ... i\'m not a match guy, so it\'s not entirely obvious to me just looking at it that it will always produce the correct results (particularly with the max age and array re-ordering and what not) so unit tests would help demonstrate tht it does what it\'s suppose to in various edge cases.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"hossman\\\" id=\\\"commentauthor_13065629_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=hossman\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"hossman\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Hoss Man\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13065629_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jul\\/11 00:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-15T00:15:23+0000\'\u003e15\\/Jul\\/11 00:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Shawn: i was a little concerned based on the issue summary that this would slow down the performance of the handlers, but skimming the patch i see that unless it\'s explicitly configured in the init params, only a single \\\"responseTimes != null\\\" check is added to each request, and even when it is enabled, all the hard work is defered until the stats are actually requested &#8211; so as long as we document that recording (and retrieving) these stats may slow down the performance of hte handler, i don\'t see a big problem there.  (my personal prefrence is to generate these stats from log parsing because then it can be done completely out of band &#8211; but i certainly won\'t object to making it easier for people to get directly from solr) \\n\\n my only other suggestion is that  you refactor the stats code into some static methods (or a helper class) so we can have some test cases that verify the accuracy against fixed data ... i\'m not a match guy, so it\'s not entirely obvious to me just looking at it that it will always produce the correct results (particularly with the max age and array re-ordering and what not) so unit tests would help demonstrate tht it does what it\'s suppose to in various edge cases.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13076301\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13076301&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13076301\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13076301_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13076301_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/11 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-08-02T16:38:20+0000\'\u003e02\\/Aug\\/11 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHoss, the patch isn\'t my work, I just modified it to support a 100th percentile and reattached it.  I am only just now beginning to learn Java.  Although I have some clue what you\'re saying with static methods, actually doing it properly within a larger work like Solr is something I won\'t be able to do yet.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13076301_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13076301_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/11 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-08-02T16:38:20+0000\'\u003e02\\/Aug\\/11 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hoss, the patch isn\'t my work, I just modified it to support a 100th percentile and reattached it.  I am only just now beginning to learn Java.  Although I have some clue what you\'re saying with static methods, actually doing it properly within a larger work like Solr is something I won\'t be able to do yet.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13154710\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13154710&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13154710\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13154710_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13154710_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Nov\\/11 23:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-11-21T23:06:46+0000\'\u003e21\\/Nov\\/11 23:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBased on filenames, I couldn\'t find an existing unit test that checks handler statistics, so I couldn\'t figure out how to make a test for this patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am very interested in getting this included in branch_3x.  If you have some example code I can look at to create unit tests, I can look into making one.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13154710_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13154710_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Nov\\/11 23:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-11-21T23:06:46+0000\'\u003e21\\/Nov\\/11 23:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Based on filenames, I couldn\'t find an existing unit test that checks handler statistics, so I couldn\'t figure out how to make a test for this patch. \\n\\n I am very interested in getting this included in branch_3x.  If you have some example code I can look at to create unit tests, I can look into making one.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13160006\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13160006&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13160006\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"epugh\\\" id=\\\"commentauthor_13160006_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=epugh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10450\\\" alt=\\\"epugh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Eric Pugh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13160006_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/11 12:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-11-30T12:46:51+0000\'\u003e30\\/Nov\\/11 12:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHas anyone had thoughts on how to do this via a component that is less intrusive then modifying RequestHandlerBase?   I\'d love to do this via a component that I could compile as a standalone project and then drop in my existing Solr.   \u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, I am only interested in certain subset of queries, so I added a collection of regex patterns as that are used to test against the query string to see if it should be included in the rolling statistics.  I will upload the patch.   Also fixed the patch to work against the latest trunk.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"epugh\\\" id=\\\"commentauthor_13160006_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=epugh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10450\\\" alt=\\\"epugh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Eric Pugh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13160006_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/11 12:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-11-30T12:46:51+0000\'\u003e30\\/Nov\\/11 12:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Has anyone had thoughts on how to do this via a component that is less intrusive then modifying RequestHandlerBase?   I\'d love to do this via a component that I could compile as a standalone project and then drop in my existing Solr.    \\n\\n Also, I am only interested in certain subset of queries, so I added a collection of regex patterns as that are used to test against the query string to see if it should be included in the rolling statistics.  I will upload the patch.   Also fixed the patch to work against the latest trunk.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13160007\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13160007&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13160007\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"epugh\\\" id=\\\"commentauthor_13160007_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=epugh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10450\\\" alt=\\\"epugh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Eric Pugh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13160007_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/11 12:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-11-30T12:47:26+0000\'\u003e30\\/Nov\\/11 12:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated to latest trunk, added regex patterns.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"epugh\\\" id=\\\"commentauthor_13160007_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=epugh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10450\\\" alt=\\\"epugh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Eric Pugh\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13160007_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/11 12:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-11-30T12:47:26+0000\'\u003e30\\/Nov\\/11 12:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updated to latest trunk, added regex patterns.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13166545\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13166545&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13166545\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13166545_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13166545_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Dec\\/11 20:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-12-09T20:47:56+0000\'\u003e09\\/Dec\\/11 20:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a branch_3x version of Eric\'s latest patch.  If applied to 3.5, all tests pass.  A current checkout of branch_3x without this patch applied fails dataimport handler tests, adding the patch does not introduce any additional failures.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13166545_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13166545_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Dec\\/11 20:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-12-09T20:47:56+0000\'\u003e09\\/Dec\\/11 20:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a branch_3x version of Eric\'s latest patch.  If applied to 3.5, all tests pass.  A current checkout of branch_3x without this patch applied fails dataimport handler tests, adding the patch does not introduce any additional failures.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13252724\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13252724&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13252724\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13252724_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13252724_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Apr\\/12 18:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-12T18:49:13+0000\'\u003e12\\/Apr\\/12 18:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLet\'s have everyone pretend for a minute that I have a slightly better grasp of Solr\\/Lucene internals than I actually do.  Perhaps I will one day be able to take what you say and figure out what it means.  I am very interested in having these stats available without patching Solr on my own.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat would be the right way to go about re-implementing this as a module (along with some unit tests) so the code could be committed?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13252724_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13252724_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Apr\\/12 18:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-12T18:49:13+0000\'\u003e12\\/Apr\\/12 18:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Let\'s have everyone pretend for a minute that I have a slightly better grasp of Solr\\/Lucene internals than I actually do.  Perhaps I will one day be able to take what you say and figure out what it means.  I am very interested in having these stats available without patching Solr on my own. \\n\\n What would be the right way to go about re-implementing this as a module (along with some unit tests) so the code could be committed?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13255730\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13255730&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13255730\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13255730_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13255730_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Apr\\/12 17:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-17T17:09:43+0000\'\u003e17\\/Apr\\/12 17:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePurely hypothetical stuff, probably way beyond my skills: Would it be possible (and useful) to use a Lucene index (RAMDirectory maybe) to store the query time data for performance reasons, or is the current array implementation good enough?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13255730_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13255730_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Apr\\/12 17:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-17T17:09:43+0000\'\u003e17\\/Apr\\/12 17:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Purely hypothetical stuff, probably way beyond my skills: Would it be possible (and useful) to use a Lucene index (RAMDirectory maybe) to store the query time data for performance reasons, or is the current array implementation good enough?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13255895\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13255895&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13255895\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13255895_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13255895_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Apr\\/12 20:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-17T20:08:42+0000\'\u003e17\\/Apr\\/12 20:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI wonder if Coda Hale\'s Metrics library might be worth using here?\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/metrics.codahale.com\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/metrics.codahale.com\\/\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eIt already deals with rolling updates, and can expose measurements through JMX beans.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13255895_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13255895_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Apr\\/12 20:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-17T20:08:42+0000\'\u003e17\\/Apr\\/12 20:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I wonder if Coda Hale\'s Metrics library might be worth using here? \\n\\n  http:\\/\\/metrics.codahale.com\\/  \\n\\n It already deals with rolling updates, and can expose measurements through JMX beans.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481058\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481058&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481058\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481058_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481058_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Oct\\/12 20:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-21T20:30:57+0000\'\u003e21\\/Oct\\/12 20:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI wonder if Coda Hale\'s Metrics library might be worth using here?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThat does look really interesting.  Perhaps a bit above my skill set, and it would bloat the .war somewhat.  It would provide the opportunity to record metrics all over the place, not just the things we originally cooked up here.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the meantime, I have updated the current patch to branch_4x.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481058_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481058_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Oct\\/12 20:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-21T20:30:57+0000\'\u003e21\\/Oct\\/12 20:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I wonder if Coda Hale\'s Metrics library might be worth using here?  \\n\\n That does look really interesting.  Perhaps a bit above my skill set, and it would bloat the .war somewhat.  It would provide the opportunity to record metrics all over the place, not just the things we originally cooked up here. \\n\\n In the meantime, I have updated the current patch to branch_4x.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481060\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481060&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481060\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481060_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481060_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Oct\\/12 20:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-21T20:32:55+0000\'\u003e21\\/Oct\\/12 20:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAn updated patch against branch_4x.  I massaged the solrconfig.xml options a bit trying to make them a bit easier to understand.  I also fixed all the statistics reporting glitches I could find.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481060_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481060_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Oct\\/12 20:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-21T20:32:55+0000\'\u003e21\\/Oct\\/12 20:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    An updated patch against branch_4x.  I massaged the solrconfig.xml options a bit trying to make them a bit easier to understand.  I also fixed all the statistics reporting glitches I could find.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481079\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481079&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481079\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13481079_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481079_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Oct\\/12 21:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-21T21:40:10+0000\'\u003e21\\/Oct\\/12 21:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; and it would bloat the .war somewhat\u003c\\/p\u003e\\n\\n\u003cp\u003emetrics-core is only 81kb \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e  And its only dependency is slf4j-api, which is already included.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think this might be an easy win, actually.  Replacing the requests, errors and timeouts counts with Counters, and adding a TimerContext reproduces all the existing stats and gives you the histogram of request times.  Plus it\'s extensible, as you say.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13481079_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481079_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Oct\\/12 21:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-21T21:40:10+0000\'\u003e21\\/Oct\\/12 21:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; and it would bloat the .war somewhat \\n\\n metrics-core is only 81kb    And its only dependency is slf4j-api, which is already included. \\n\\n I think this might be an easy win, actually.  Replacing the requests, errors and timeouts counts with Counters, and adding a TimerContext reproduces all the existing stats and gives you the histogram of request times.  Plus it\'s extensible, as you say.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481184\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481184&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481184\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481184_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481184_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 05:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T05:24:22+0000\'\u003e22\\/Oct\\/12 05:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNew patch against branch_4x.  The code hasn\'t changed, just the example solrconfig.xml.  The config is now commented out and says EXPERIMENTAL.  No performance impact should occur when the config is not used.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe metrics package Alan mentioned looks like a better long-term solution, but in the meantime, we have this.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt hasn\'t received widespread testing, but I\'ve been using a previous version of the patch in 3.x for a very long time (16384 samples on two handlers) with no trouble.  Our query volume is low, so we have never noticed any performance impact.  It\'s provided a lot of valuable insight into Solr performance.  I think a lot of other people would get value out of this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481184_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481184_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 05:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T05:24:22+0000\'\u003e22\\/Oct\\/12 05:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    New patch against branch_4x.  The code hasn\'t changed, just the example solrconfig.xml.  The config is now commented out and says EXPERIMENTAL.  No performance impact should occur when the config is not used. \\n\\n The metrics package Alan mentioned looks like a better long-term solution, but in the meantime, we have this. \\n\\n It hasn\'t received widespread testing, but I\'ve been using a previous version of the patch in 3.x for a very long time (16384 samples on two handlers) with no trouble.  Our query volume is low, so we have never noticed any performance impact.  It\'s provided a lot of valuable insight into Solr performance.  I think a lot of other people would get value out of this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481655\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481655&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481655\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13481655_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481655_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 19:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T19:07:41+0000\'\u003e22\\/Oct\\/12 19:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere\'s a patch that uses the metrics library.  It doesn\'t include Eric\'s regex matching or anything at the moment - it basically just takes what\'s currently in trunk, refactors it to use metrics\' Counter and Timer objects, and adds the rolling average data.\u003c\\/p\u003e\\n\\n\u003cp\u003eCons:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eit adds another dependency to solr-core.  It\'s a useful dependency, IMO, but still.\u003c\\/li\u003e\\n\\t\u003cli\u003etests don\'t pass at the moment, as metrics spawns extra threads which the test runner doesn\'t know how to deal with\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003ePros:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eit\'s a purpose-designed stats and metrics library, so we don\'t need to worry about the maths or sampling algorithms\u003c\\/li\u003e\\n\\t\u003cli\u003eit adds the functionality of the original ticket\\/patch in a much simpler way.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThe ideal solution would be a component of some kind, I think, but this at least improves on what\'s in trunk at the moment.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13481655_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481655_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 19:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T19:07:41+0000\'\u003e22\\/Oct\\/12 19:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here\'s a patch that uses the metrics library.  It doesn\'t include Eric\'s regex matching or anything at the moment - it basically just takes what\'s currently in trunk, refactors it to use metrics\' Counter and Timer objects, and adds the rolling average data. \\n\\n Cons: \\n \\n\\t it adds another dependency to solr-core.  It\'s a useful dependency, IMO, but still. \\n\\t tests don\'t pass at the moment, as metrics spawns extra threads which the test runner doesn\'t know how to deal with \\n \\n\\n\\n Pros: \\n \\n\\t it\'s a purpose-designed stats and metrics library, so we don\'t need to worry about the maths or sampling algorithms \\n\\t it adds the functionality of the original ticket\\/patch in a much simpler way. \\n \\n\\n\\n The ideal solution would be a component of some kind, I think, but this at least improves on what\'s in trunk at the moment.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481751\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481751&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481751\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481751_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481751_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 20:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T20:23:43+0000\'\u003e22\\/Oct\\/12 20:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAwesome, Alan!  What options might we have to prevent long-running handlers from accumulating huge metrics histories and chewing up tons of RAM?  Is there a get75thpercentile method?  With the old patch, I do 75, 95, and 99.  I would also like to add 99.9, but the old patch uses ints so that wasn\'t possible.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen I have a moment, I will attempt to look at the javadocs for the package and answer my own questions.  Unless you get to it first, I will also attempt to mod the patch to expose any memory-limiting options.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481751_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481751_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 20:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T20:23:43+0000\'\u003e22\\/Oct\\/12 20:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Awesome, Alan!  What options might we have to prevent long-running handlers from accumulating huge metrics histories and chewing up tons of RAM?  Is there a get75thpercentile method?  With the old patch, I do 75, 95, and 99.  I would also like to add 99.9, but the old patch uses ints so that wasn\'t possible. \\n\\n When I have a moment, I will attempt to look at the javadocs for the package and answer my own questions.  Unless you get to it first, I will also attempt to mod the patch to expose any memory-limiting options.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481767\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481767&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481767\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13481767_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481767_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 20:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T20:45:22+0000\'\u003e22\\/Oct\\/12 20:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Shawn,\u003c\\/p\u003e\\n\\n\u003cp\u003eMetrics uses reservoir sampling to maintain its measurements, so the history is actually always a fixed size.  This is configurable, but defaults to 1024 entries.  There\'s more information at \u003ca href=\\\"http:\\/\\/metrics.codahale.com\\/manual\\/core\\/#histograms\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/metrics.codahale.com\\/manual\\/core\\/#histograms\u003c\\/a\u003e and \u003ca href=\\\"http:\\/\\/www.johndcook.com\\/standard_deviation.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.johndcook.com\\/standard_deviation.html\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eThere are get75thpercentile and get999thpercentile methods out of the box, and you can also ask for values at arbitrary percentiles using getValue().\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13481767_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481767_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 20:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T20:45:22+0000\'\u003e22\\/Oct\\/12 20:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Shawn, \\n\\n Metrics uses reservoir sampling to maintain its measurements, so the history is actually always a fixed size.  This is configurable, but defaults to 1024 entries.  There\'s more information at  http:\\/\\/metrics.codahale.com\\/manual\\/core\\/#histograms  and  http:\\/\\/www.johndcook.com\\/standard_deviation.html . \\n\\n There are get75thpercentile and get999thpercentile methods out of the box, and you can also ask for values at arbitrary percentiles using getValue().              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481797\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481797&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481797\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481797_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481797_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 21:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T21:09:51+0000\'\u003e22\\/Oct\\/12 21:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have answers to some of my questions.  There is a 75th percentile.  I added the 75th and 999th to what you had, and it seems to display the stats page a lot faster than my patch did.  We\'ll see what happens when it gets a few thousand queries under its belt, though.  I was running the old patch with 16384 samples, and I put the stats on three handlers, so it was having to copy arrays of 16384 longs a total of six times every time I refreshed the stats page.  I may also add the 98th percentile.  It may be a good idea to make each percentile point configurable in solrconfig.xml.  So far I have not yet figured out whether it is possible to limit the number of samples stored, or anything else which can limit the amount of memory required.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe names for the average req\\/s over the last 5 and 15 minutes are REALLY long.  Unless you have a high res display (1920 pixels wide) and maximize the window, the names overlap the values.  If I think of a reasonable way to shorten those, I will.  I ran into it myself when making my branch_4x patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481797_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481797_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 21:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T21:09:51+0000\'\u003e22\\/Oct\\/12 21:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have answers to some of my questions.  There is a 75th percentile.  I added the 75th and 999th to what you had, and it seems to display the stats page a lot faster than my patch did.  We\'ll see what happens when it gets a few thousand queries under its belt, though.  I was running the old patch with 16384 samples, and I put the stats on three handlers, so it was having to copy arrays of 16384 longs a total of six times every time I refreshed the stats page.  I may also add the 98th percentile.  It may be a good idea to make each percentile point configurable in solrconfig.xml.  So far I have not yet figured out whether it is possible to limit the number of samples stored, or anything else which can limit the amount of memory required. \\n\\n The names for the average req\\/s over the last 5 and 15 minutes are REALLY long.  Unless you have a high res display (1920 pixels wide) and maximize the window, the names overlap the values.  If I think of a reasonable way to shorten those, I will.  I ran into it myself when making my branch_4x patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481809\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481809&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481809\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481809_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481809_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 21:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T21:19:17+0000\'\u003e22\\/Oct\\/12 21:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI didn\'t see your reply about the reservoir size until after I\'d already submitted mine.  If I want to increase\\/decrease that size, how do I do that?  So far poking around the javadocs and using google hasn\'t turned anything up.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481809_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481809_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 21:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T21:19:17+0000\'\u003e22\\/Oct\\/12 21:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I didn\'t see your reply about the reservoir size until after I\'d already submitted mine.  If I want to increase\\/decrease that size, how do I do that?  So far poking around the javadocs and using google hasn\'t turned anything up.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481842\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481842&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481842\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13481842_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481842_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 21:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T21:52:14+0000\'\u003e22\\/Oct\\/12 21:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt looks like the sample size for Timer objects is hard-wired.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s only 8kB per Timer, though, which is pretty much a rounding error when compared with Solr\'s memory usage.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13481842_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481842_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 21:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T21:52:14+0000\'\u003e22\\/Oct\\/12 21:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It looks like the sample size for Timer objects is hard-wired. \\n\\n It\'s only 8kB per Timer, though, which is pretty much a rounding error when compared with Solr\'s memory usage.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13481916\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13481916&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13481916\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481916_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481916_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 23:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T23:17:21+0000\'\u003e22\\/Oct\\/12 23:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOriginally I was worried about it being too large, because I didn\'t see anything defining the size.  Now, knowing that it\'s only 1024, I consider it to be way too small.  I was using 16384 for the old patch, I was actually hoping to make it a bit larger than that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13481916_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13481916_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/12 23:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-22T23:17:21+0000\'\u003e22\\/Oct\\/12 23:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Originally I was worried about it being too large, because I didn\'t see anything defining the size.  Now, knowing that it\'s only 1024, I consider it to be way too small.  I was using 16384 for the old patch, I was actually hoping to make it a bit larger than that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482171\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482171&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482171\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482171_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482171_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 07:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T07:25:28+0000\'\u003e23\\/Oct\\/12 07:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAfter poking around a lot looking for a way to bump the reservoir size, I finally came across the paper on reservoir sampling by Vitter.  After even more poking around, I think I get it now.  Their small reservoir apparently really does give statistically relevant results over millions or billions of total samples.  If it didn\'t give them numbers they could use, they would have already made it larger.\u003c\\/p\u003e\\n\\n\u003cp\u003eDo you think it\'s worthwhile to give people the ability to customize the percentile list &#8211; turn some of the standard percentiles off, and\\/or add custom ones?  As soon as we conclude that including the full predefined set won\'t present a performance problem because it only gets calculated when the admin GUI is accessed, there\'ll be someone who has created hundreds of request handlers and polls the statistics for all of them once a minute.  I can also see someone wanting to see the 12th and 87th percentiles for some reason neither of us can fathom, but makes perfect sense to them.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482171_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482171_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 07:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T07:25:28+0000\'\u003e23\\/Oct\\/12 07:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    After poking around a lot looking for a way to bump the reservoir size, I finally came across the paper on reservoir sampling by Vitter.  After even more poking around, I think I get it now.  Their small reservoir apparently really does give statistically relevant results over millions or billions of total samples.  If it didn\'t give them numbers they could use, they would have already made it larger. \\n\\n Do you think it\'s worthwhile to give people the ability to customize the percentile list &#8211; turn some of the standard percentiles off, and\\/or add custom ones?  As soon as we conclude that including the full predefined set won\'t present a performance problem because it only gets calculated when the admin GUI is accessed, there\'ll be someone who has created hundreds of request handlers and polls the statistics for all of them once a minute.  I can also see someone wanting to see the 12th and 87th percentiles for some reason neither of us can fathom, but makes perfect sense to them.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482405\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482405&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482405\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13482405_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482405_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 15:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T15:29:00+0000\'\u003e23\\/Oct\\/12 15:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNew patch, adding 75th and 999th percentile, making the stats names less insanely long, and adding the metrics- threads to the test excluder thingy.  All solr-core tests pass.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13482405_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482405_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 15:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T15:29:00+0000\'\u003e23\\/Oct\\/12 15:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    New patch, adding 75th and 999th percentile, making the stats names less insanely long, and adding the metrics- threads to the test excluder thingy.  All solr-core tests pass.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482415\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482415&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482415\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13482415_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482415_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 15:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T15:33:39+0000\'\u003e23\\/Oct\\/12 15:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think we\'d probably want to keep the percentile list limited to start with.  People can always ask for improvements later if they need them.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think this is ready to go in?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13482415_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482415_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 15:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T15:33:39+0000\'\u003e23\\/Oct\\/12 15:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think we\'d probably want to keep the percentile list limited to start with.  People can always ask for improvements later if they need them. \\n\\n I think this is ready to go in?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482431\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482431&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482431\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"steffkes\\\" id=\\\"commentauthor_13482431_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=steffkes\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"steffkes\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Stefan Matheis (steffkes)\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482431_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 15:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T15:57:50+0000\'\u003e23\\/Oct\\/12 15:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHey, i applied to Patch to see where the Output goes and how it looks in the admin GUI .. right now, it\'s listed in the stats-section, as a table with all the other given attributes. how helpful would it be to have some kind of graph here? perhaps one like we have already on the dashboard to see the memory-usage?  Let me know what you think about it \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"steffkes\\\" id=\\\"commentauthor_13482431_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=steffkes\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"steffkes\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Stefan Matheis (steffkes)\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482431_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 15:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T15:57:50+0000\'\u003e23\\/Oct\\/12 15:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hey, i applied to Patch to see where the Output goes and how it looks in the admin GUI .. right now, it\'s listed in the stats-section, as a table with all the other given attributes. how helpful would it be to have some kind of graph here? perhaps one like we have already on the dashboard to see the memory-usage?  Let me know what you think about it                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482459\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482459&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482459\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13482459_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482459_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 16:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T16:41:34+0000\'\u003e23\\/Oct\\/12 16:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHey Stefan, yeah I\'ve been thinking about graphs, pictures are always good.  For this sort of information, though, I think you generally want time-series representations, and for that you want proper monitoring software (something like graphite).  So I think the best thing we can do here is just expose the data, and let people plug in their own monitors.  Unless you have a better idea for how to represent it?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13482459_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482459_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 16:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T16:41:34+0000\'\u003e23\\/Oct\\/12 16:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hey Stefan, yeah I\'ve been thinking about graphs, pictures are always good.  For this sort of information, though, I think you generally want time-series representations, and for that you want proper monitoring software (something like graphite).  So I think the best thing we can do here is just expose the data, and let people plug in their own monitors.  Unless you have a better idea for how to represent it?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482470\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482470&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482470\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482470_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482470_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 17:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T17:12:08+0000\'\u003e23\\/Oct\\/12 17:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 23\\/Oct\\/12 17:13\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis is lightyears beyond what I could have hoped for when I first opened this issue.  I do have one more picky note: the extreme floating point precision of the output.  Here\'s what I am getting:\u003c\\/p\u003e\\n\\n\u003cp\u003e    handlerStart: 1351011529717\u003cbr\\/\u003e\\n    requests:     14\u003cbr\\/\u003e\\n    errors:       0\u003cbr\\/\u003e\\n    timeouts:     0\u003cbr\\/\u003e\\n    totalTime:    53483.059463\u003cbr\\/\u003e\\n    avgTimePerRequest:      3820.2185330714287\u003cbr\\/\u003e\\n    avgRequestsPerSecond:   0.1592740558481214\u003cbr\\/\u003e\\n    5minRateReqsPerSecond:  0.6393213424767414\u003cbr\\/\u003e\\n    15minRateReqsPerSecond: 0.7422605686168207\u003cbr\\/\u003e\\n    medianRequestTime:      2537.401157\u003cbr\\/\u003e\\n    75thPcRequestTime:      7728.151086\u003cbr\\/\u003e\\n    95thPcRequestTime:      8963.867643\u003cbr\\/\u003e\\n    99thPcRequestTime:      8963.867643\u003cbr\\/\u003e\\n    999thPcRequestTime:     8963.867643\u003c\\/p\u003e\\n\\n\u003cp\u003eHere\'s what I would like to see instead ... lower precision, and rounded up when the first eliminated digit is 5 or higher.\u003c\\/p\u003e\\n\\n\u003cp\u003e    handlerStart: 1351011529717\u003cbr\\/\u003e\\n    requests:     14\u003cbr\\/\u003e\\n    errors:       0\u003cbr\\/\u003e\\n    timeouts:     0\u003cbr\\/\u003e\\n    totalTime:    53483\u003cbr\\/\u003e\\n    avgTimePerRequest:      3820.22\u003cbr\\/\u003e\\n    avgRequestsPerSecond:   0.16\u003cbr\\/\u003e\\n    5minRateReqsPerSecond:  0.64\u003cbr\\/\u003e\\n    15minRateReqsPerSecond: 0.74\u003cbr\\/\u003e\\n    medianRequestTime:      2537.40\u003cbr\\/\u003e\\n    75thPcRequestTime:      7728.15\u003cbr\\/\u003e\\n    95thPcRequestTime:      8963.87\u003cbr\\/\u003e\\n    99thPcRequestTime:      8963.87\u003cbr\\/\u003e\\n    999thPcRequestTime:     8963.87\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482470_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482470_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 17:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T17:12:08+0000\'\u003e23\\/Oct\\/12 17:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 23\\/Oct\\/12 17:13\\\"\u003eedited\u003c\\/span\u003e                   This is lightyears beyond what I could have hoped for when I first opened this issue.  I do have one more picky note: the extreme floating point precision of the output.  Here\'s what I am getting: \\n\\n     handlerStart: 1351011529717 \\n    requests:     14 \\n    errors:       0 \\n    timeouts:     0 \\n    totalTime:    53483.059463 \\n    avgTimePerRequest:      3820.2185330714287 \\n    avgRequestsPerSecond:   0.1592740558481214 \\n    5minRateReqsPerSecond:  0.6393213424767414 \\n    15minRateReqsPerSecond: 0.7422605686168207 \\n    medianRequestTime:      2537.401157 \\n    75thPcRequestTime:      7728.151086 \\n    95thPcRequestTime:      8963.867643 \\n    99thPcRequestTime:      8963.867643 \\n    999thPcRequestTime:     8963.867643 \\n\\n Here\'s what I would like to see instead ... lower precision, and rounded up when the first eliminated digit is 5 or higher. \\n\\n     handlerStart: 1351011529717 \\n    requests:     14 \\n    errors:       0 \\n    timeouts:     0 \\n    totalTime:    53483 \\n    avgTimePerRequest:      3820.22 \\n    avgRequestsPerSecond:   0.16 \\n    5minRateReqsPerSecond:  0.64 \\n    15minRateReqsPerSecond: 0.74 \\n    medianRequestTime:      2537.40 \\n    75thPcRequestTime:      7728.15 \\n    95thPcRequestTime:      8963.87 \\n    99thPcRequestTime:      8963.87 \\n    999thPcRequestTime:     8963.87              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482475\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482475&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482475\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482475_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482475_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 17:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T17:15:50+0000\'\u003e23\\/Oct\\/12 17:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI would also move avgTimePerRequest to right before medianRequestTime so similar numbers are all together.  I was going to suggest giving it a new name to jive with the additions, but there are likely a lot of existing customer scripts that rely on that name &#8211; including some of mine.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482475_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482475_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 17:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T17:15:50+0000\'\u003e23\\/Oct\\/12 17:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I would also move avgTimePerRequest to right before medianRequestTime so similar numbers are all together.  I was going to suggest giving it a new name to jive with the additions, but there are likely a lot of existing customer scripts that rely on that name &#8211; including some of mine.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482501\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482501&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482501\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482501_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482501_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 17:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T17:40:02+0000\'\u003e23\\/Oct\\/12 17:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 23\\/Oct\\/12 17:48\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have now discovered a real problem.  All of my search handlers have the exact same statistics.  I have defined \\/lbcheck, \\/ncdismax, \\/search, and \\/select.\u003c\\/p\u003e\\n\\n\u003cp\u003eThat brings to mind a potential test that could be added &#8211; make sure that when you issue queries against one handler, stats on other handlers do not see their numbers go up.  No idea how to write it, though.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482501_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482501_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 17:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T17:40:02+0000\'\u003e23\\/Oct\\/12 17:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 23\\/Oct\\/12 17:48\\\"\u003eedited\u003c\\/span\u003e                   I have now discovered a real problem.  All of my search handlers have the exact same statistics.  I have defined \\/lbcheck, \\/ncdismax, \\/search, and \\/select. \\n\\n That brings to mind a potential test that could be added &#8211; make sure that when you issue queries against one handler, stats on other handlers do not see their numbers go up.  No idea how to write it, though.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482647\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482647&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482647\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13482647_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482647_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 20:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T20:24:38+0000\'\u003e23\\/Oct\\/12 20:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHm, OK.  I\'m creating the various Metrics objects in the base class constructor, and registering them by class using this.getClass().  Only problem here is that in a super constructor, getClass() returns the superclass.  Oops.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf I move the object creation to init() I get other errors, because RequestHandlers are registered with JMX before init() is called, and JMX calls getStatistics() to get all the various measurement names and register them.\u003c\\/p\u003e\\n\\n\u003cp\u003eMaybe put a guard in getStatistics to check if the counters are null, and if they are, instantiate them?  Seems a bit hacky though.  Let me have a think about this.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn re the precision of the measurements, the jscript in the front end could presumably round them to 2 sig figs - that way they look prettier in the UI, but are still precise for any client that wants to use it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13482647_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482647_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/12 20:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-23T20:24:38+0000\'\u003e23\\/Oct\\/12 20:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hm, OK.  I\'m creating the various Metrics objects in the base class constructor, and registering them by class using this.getClass().  Only problem here is that in a super constructor, getClass() returns the superclass.  Oops. \\n\\n If I move the object creation to init() I get other errors, because RequestHandlers are registered with JMX before init() is called, and JMX calls getStatistics() to get all the various measurement names and register them. \\n\\n Maybe put a guard in getStatistics to check if the counters are null, and if they are, instantiate them?  Seems a bit hacky though.  Let me have a think about this. \\n\\n In re the precision of the measurements, the jscript in the front end could presumably round them to 2 sig figs - that way they look prettier in the UI, but are still precise for any client that wants to use it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482918\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482918&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482918\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482918_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482918_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 02:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T02:37:47+0000\'\u003e24\\/Oct\\/12 02:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think I fixed it.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt looks like if you pass the same combination of arguments to the newCounter\\/newTimer methods, you actually get back the same object as the last time it was called with those parameters, not a new one.  There is an alternate form of the constructor that takes a \\\"scope\\\" argument.  I could have appended the new value to the name argument, but since they were kind enough to provide something separate...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482918_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482918_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 02:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T02:37:47+0000\'\u003e24\\/Oct\\/12 02:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think I fixed it. \\n\\n It looks like if you pass the same combination of arguments to the newCounter\\/newTimer methods, you actually get back the same object as the last time it was called with those parameters, not a new one.  There is an alternate form of the constructor that takes a \\\"scope\\\" argument.  I could have appended the new value to the name argument, but since they were kind enough to provide something separate...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482921\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482921&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482921\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482921_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482921_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 02:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T02:49:36+0000\'\u003e24\\/Oct\\/12 02:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI never know when things are threadsafe, although it does seem to work.  Does a static class member variable \'automatically\' become threadsafe, or would volatile be required?  Was protected the right way to do that?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482921_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482921_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 02:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T02:49:36+0000\'\u003e24\\/Oct\\/12 02:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I never know when things are threadsafe, although it does seem to work.  Does a static class member variable \'automatically\' become threadsafe, or would volatile be required?  Was protected the right way to do that?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482948\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482948&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482948\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"otis\\\" id=\\\"commentauthor_13482948_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=otis\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"otis\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Otis Gospodnetic\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482948_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 04:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T04:28:30+0000\'\u003e24\\/Oct\\/12 04:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\" class=\\\"user-hover\\\" rel=\\\"romseygeek\\\"\u003eAlan Woodward\u003c\\/a\u003e are these metrics being published in JMX?  They should, and Code\'s Metrics should make that easy.  I had 2.5 second look at the patch and didn\'t find any mentions of \\\"jmx\\\".\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"otis\\\" id=\\\"commentauthor_13482948_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=otis\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"otis\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Otis Gospodnetic\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482948_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 04:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T04:28:30+0000\'\u003e24\\/Oct\\/12 04:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Alan Woodward  are these metrics being published in JMX?  They should, and Code\'s Metrics should make that easy.  I had 2.5 second look at the patch and didn\'t find any mentions of \\\"jmx\\\".              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13482960\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13482960&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13482960\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482960_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482960_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 04:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T04:54:35+0000\'\u003e24\\/Oct\\/12 04:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSolr handler statistics were already published in JMX, this just added some entries.  I pulled up jconsole and connected to my patched solr server and the new stats were there.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13482960_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13482960_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 04:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T04:54:35+0000\'\u003e24\\/Oct\\/12 04:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Solr handler statistics were already published in JMX, this just added some entries.  I pulled up jconsole and connected to my patched solr server and the new stats were there.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13483091\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13483091&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13483091\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13483091_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483091_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 08:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T08:58:44+0000\'\u003e24\\/Oct\\/12 08:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated patch, using this.toString() as the scope identifier.  Your handlerCount solution wouldn\'t have been thread-safe, Shawn, but thanks for finding the right method to use!\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso adds a test to check that different handlers have different statistics.\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=otis\\\" class=\\\"user-hover\\\" rel=\\\"otis\\\"\u003eOtis Gospodnetic\u003c\\/a\u003e as Shawn says, this is just extending the existing mbeans, so it\'s already available through JMX.  Metrics also exposes everything through JMX by default anyway, so you can get the stats either way.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13483091_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483091_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 08:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T08:58:44+0000\'\u003e24\\/Oct\\/12 08:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updated patch, using this.toString() as the scope identifier.  Your handlerCount solution wouldn\'t have been thread-safe, Shawn, but thanks for finding the right method to use! \\n\\n Also adds a test to check that different handlers have different statistics. \\n\\n  Otis Gospodnetic  as Shawn says, this is just extending the existing mbeans, so it\'s already available through JMX.  Metrics also exposes everything through JMX by default anyway, so you can get the stats either way.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13483277\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13483277&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13483277\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13483277_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483277_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 14:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T14:37:17+0000\'\u003e24\\/Oct\\/12 14:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI wanted to double-check that the new test would fail with the old constructor, so I installed your new patch and removed this.toString() from the parameter list on those statements.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe updated RequestHandlerTests didn\'t fail like I\'d hoped.  I suspect that\'s because the terms handler and the update handler are different classes, so this.getClass() was apparently different.  Before the fix, I did have different statistics in the update handler versus the search handlers.  It was only handlers of the same type that were the same &#8211; my four search handlers.\u003c\\/p\u003e\\n\\n\u003cp\u003eI did however get a rather spectacular (and repeatable) failure in MBeansHandlerTest.  That failure went away when I restored the constructor to the current patch state.  When I make it into the office, I will do some additional testing to make sure I did everything right.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13483277_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483277_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 14:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T14:37:17+0000\'\u003e24\\/Oct\\/12 14:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I wanted to double-check that the new test would fail with the old constructor, so I installed your new patch and removed this.toString() from the parameter list on those statements. \\n\\n The updated RequestHandlerTests didn\'t fail like I\'d hoped.  I suspect that\'s because the terms handler and the update handler are different classes, so this.getClass() was apparently different.  Before the fix, I did have different statistics in the update handler versus the search handlers.  It was only handlers of the same type that were the same &#8211; my four search handlers. \\n\\n I did however get a rather spectacular (and repeatable) failure in MBeansHandlerTest.  That failure went away when I restored the constructor to the current patch state.  When I make it into the office, I will do some additional testing to make sure I did everything right.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13483445\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13483445&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13483445\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13483445_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483445_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 18:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T18:18:43+0000\'\u003e24\\/Oct\\/12 18:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 24\\/Oct\\/12 18:22\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith this as the contructor:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e  \u003cspan class=\\\"code-keyword\\\"\u003epublic\u003c\\/span\u003e RequestHandlerBase() {\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/    numRequests = Metrics.newCounter(RequestHandlerBase.class, \u003cspan class=\\\"code-quote\\\"\u003e\\\"numRequests\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e.toString());\\n\u003c\\/span\u003e\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/    numErrors = Metrics.newCounter(RequestHandlerBase.class, \u003cspan class=\\\"code-quote\\\"\u003e\\\"numErrors\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e.toString());\\n\u003c\\/span\u003e\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/    numTimeouts = Metrics.newCounter(RequestHandlerBase.class, \u003cspan class=\\\"code-quote\\\"\u003e\\\"numTimeouts\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e.toString());\\n\u003c\\/span\u003e\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/    requestTimes = Metrics.newTimer(RequestHandlerBase.class, \u003cspan class=\\\"code-quote\\\"\u003e\\\"requestTimes\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e.toString());\\n\u003c\\/span\u003e    numRequests = Metrics.newCounter(RequestHandlerBase.class, \u003cspan class=\\\"code-quote\\\"\u003e\\\"numRequests\\\"\u003c\\/span\u003e);\\n    numErrors = Metrics.newCounter(RequestHandlerBase.class, \u003cspan class=\\\"code-quote\\\"\u003e\\\"numErrors\\\"\u003c\\/span\u003e);\\n    numTimeouts = Metrics.newCounter(RequestHandlerBase.class, \u003cspan class=\\\"code-quote\\\"\u003e\\\"numTimeouts\\\"\u003c\\/span\u003e);\\n    requestTimes = Metrics.newTimer(RequestHandlerBase.class, \u003cspan class=\\\"code-quote\\\"\u003e\\\"requestTimes\\\"\u003c\\/span\u003e);\\n  }\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI get the following as the failure.  I suppose I should be glad that it fails, but RequestHandlersTests, which is the test that was modified, continues to pass.\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e[junit4:junit4] Suite: org.apache.solr.handler.admin.MBeansHandlerTest\\n[junit4:junit4]   2&gt; 0 T297 oas.SolrTestCaseJ4.initCore ####initCore\\n[junit4:junit4]   2&gt; Creating dataDir: \\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/.\\/solrtest-MBeansHandlerTest-1351102494087\\n[junit4:junit4]   2&gt; 26 T297 oasc.SolrResourceLoader.&lt;init&gt; \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e SolrResourceLoader \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e directory: \u003cspan class=\\\"code-quote\\\"\u003e\'\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\/collection1\\/\'\u003c\\/span\u003e\\n[junit4:junit4]   2&gt; 27 T297 oasc.SolrResourceLoader.replaceClassLoader Adding \u003cspan class=\\\"code-quote\\\"\u003e\'file:\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\/collection1\\/lib\\/classes\\/\'\u003c\\/span\u003e to classloader\\n[junit4:junit4]   2&gt; 27 T297 oasc.SolrResourceLoader.replaceClassLoader Adding \u003cspan class=\\\"code-quote\\\"\u003e\'file:\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\/collection1\\/lib\\/README\'\u003c\\/span\u003e to classloader\\n[junit4:junit4]   2&gt; 59 T297 oasc.SolrConfig.&lt;init&gt; Using Lucene MatchVersion: LUCENE_41\\n[junit4:junit4]   2&gt; 98 T297 oasc.SolrConfig.&lt;init&gt; Loaded SolrConfig: solrconfig.xml\\n[junit4:junit4]   2&gt; 98 T297 oass.IndexSchema.readSchema Reading Solr Schema\\n[junit4:junit4]   2&gt; 105 T297 oass.IndexSchema.readSchema Schema name=test\\n[junit4:junit4]   2&gt; 414 T297 oass.OpenExchangeRatesOrgProvider.init Initialized with rates=open-exchange-rates.json, refreshInterval=1440.\\n[junit4:junit4]   2&gt; 420 T297 oass.IndexSchema.readSchema \u003cspan class=\\\"code-keyword\\\"\u003edefault\u003c\\/span\u003e search field in schema is text\\n[junit4:junit4]   2&gt; 422 T297 oass.IndexSchema.readSchema unique key field: id\\n[junit4:junit4]   2&gt; 430 T297 oass.FileExchangeRateProvider.reload Reloading exchange rates from file currency.xml\\n[junit4:junit4]   2&gt; 432 T297 oass.FileExchangeRateProvider.reload Reloading exchange rates from file currency.xml\\n[junit4:junit4]   2&gt; 434 T297 oass.OpenExchangeRatesOrgProvider.reload Reloading exchange rates from open-exchange-rates.json\\n[junit4:junit4]   2&gt; 435 T297 oass.OpenExchangeRatesOrgProvider.reload Reloading exchange rates from open-exchange-rates.json\\n[junit4:junit4]   2&gt; 436 T297 oasc.SolrResourceLoader.locateSolrHome JNDI not configured \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e solr (NoInitialContextEx)\\n[junit4:junit4]   2&gt; 436 T297 oasc.SolrResourceLoader.locateSolrHome using system property solr.solr.home: \\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\n[junit4:junit4]   2&gt; 436 T297 oasc.SolrResourceLoader.&lt;init&gt; \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e SolrResourceLoader \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e directory: \u003cspan class=\\\"code-quote\\\"\u003e\'\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\/\'\u003c\\/span\u003e\\n[junit4:junit4]   2&gt; 442 T297 oasc.CoreContainer.&lt;init&gt; New CoreContainer 1897850152\\n[junit4:junit4]   2&gt; 442 T297 oasc.SolrCore.&lt;init&gt; [collection1] Opening \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e SolrCore at \\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\/collection1\\/, dataDir=\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/.\\/solrtest-MBeansHandlerTest-1351102494087\\/\\n[junit4:junit4]   2&gt; 443 T297 oasc.JmxMonitoredMap.&lt;init&gt; JMX monitoring is enabled. Adding Solr mbeans to JMX Server: com.sun.jmx.mbeanserver.JmxMBeanServer@201a970\\n[junit4:junit4]   2&gt; 443 T297 oasc.SolrCore.getNewIndexDir New index directory detected: old=\u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e=\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/.\\/solrtest-MBeansHandlerTest-1351102494087\\/index\\/\\n[junit4:junit4]   2&gt; 444 T297 oasc.SolrCore.initIndex WARNING [collection1] Solr index directory \u003cspan class=\\\"code-quote\\\"\u003e\'\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/.\\/solrtest-MBeansHandlerTest-1351102494087\\/index\'\u003c\\/span\u003e doesn\'t exist. Creating \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e index...\\n[junit4:junit4]   2&gt; 460 T297 oasc.CachingDirectoryFactory.get \u003cspan class=\\\"code-keyword\\\"\u003ereturn\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e directory \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e \\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/.\\/solrtest-MBeansHandlerTest-1351102494087\\/index forceNew:\u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e\\n[junit4:junit4]   2&gt; 462 T297 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits:num=1\\n[junit4:junit4]   2&gt;            commit{dir=MockDirWrapper(org.apache.lucene.store.SimpleFSDirectory@\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/index4103741039tmp lockFactory=org.apache.lucene.store.NativeFSLockFactory@8f7fddb),segFN=segments_1,generation=1,filenames=[segments_1]\\n[junit4:junit4]   2&gt; 462 T297 oasc.SolrDeletionPolicy.updateCommits newest commit = 1\\n[junit4:junit4]   2&gt; 462 T297 oasc.SolrCore.initWriters created xml: solr.XMLResponseWriter\\n[junit4:junit4]   2&gt; 464 T297 oasup.UpdateRequestProcessorChain.init inserting DistributedUpdateProcessorFactory into updateRequestProcessorChain \u003cspan class=\\\"code-quote\\\"\u003e\\\"dedupe\\\"\u003c\\/span\u003e\\n[junit4:junit4]   2&gt; 464 T297 oasup.UpdateRequestProcessorChain.init inserting DistributedUpdateProcessorFactory into updateRequestProcessorChain \u003cspan class=\\\"code-quote\\\"\u003e\\\"dedupe-allfields\\\"\u003c\\/span\u003e\\n[junit4:junit4]   2&gt; 465 T297 oasup.UpdateRequestProcessorChain.init inserting DistributedUpdateProcessorFactory into updateRequestProcessorChain \u003cspan class=\\\"code-quote\\\"\u003e\\\"stored_sig\\\"\u003c\\/span\u003e\\n[junit4:junit4]   2&gt; 465 T297 oasup.UpdateRequestProcessorChain.init inserting DistributedUpdateProcessorFactory into updateRequestProcessorChain \u003cspan class=\\\"code-quote\\\"\u003e\\\"uniq-fields\\\"\u003c\\/span\u003e\\n[junit4:junit4]   2&gt; 466 T297 oasup.UpdateRequestProcessorChain.init inserting DistributedUpdateProcessorFactory into updateRequestProcessorChain \u003cspan class=\\\"code-quote\\\"\u003e\\\"distrib-dup-test-chain-implicit\\\"\u003c\\/span\u003e\\n[junit4:junit4]   2&gt; 466 T297 oasc.RequestHandlers.initHandlersFromConfig adding lazy requestHandler: solr.ReplicationHandler\\n[junit4:junit4]   2&gt; 466 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/replication: solr.ReplicationHandler\\n[junit4:junit4]   2&gt; 467 T297 oasc.RequestHandlers.initHandlersFromConfig created standard: solr.StandardRequestHandler\\n[junit4:junit4]   2&gt; 467 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/get: solr.RealTimeGetHandler\\n[junit4:junit4]   2&gt; 468 T297 oasc.RequestHandlers.initHandlersFromConfig created dismax: solr.SearchHandler\\n[junit4:junit4]   2&gt; 469 T297 oasc.RequestHandlers.initHandlersFromConfig created mock: org.apache.solr.core.MockQuerySenderListenerReqHandler\\n[junit4:junit4]   2&gt; 469 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/admin\\/: org.apache.solr.handler.admin.AdminHandlers\\n[junit4:junit4]   2&gt; 469 T297 oasc.RequestHandlers.initHandlersFromConfig created defaults: solr.StandardRequestHandler\\n[junit4:junit4]   2&gt; 470 T297 oasc.RequestHandlers.initHandlersFromConfig adding lazy requestHandler: solr.StandardRequestHandler\\n[junit4:junit4]   2&gt; 470 T297 oasc.RequestHandlers.initHandlersFromConfig created lazy: solr.StandardRequestHandler\\n[junit4:junit4]   2&gt; 471 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/update: solr.UpdateRequestHandler\\n[junit4:junit4]   2&gt; 471 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/terms: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 472 T297 oasc.RequestHandlers.initHandlersFromConfig created spellCheckCompRH: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 472 T297 oasc.RequestHandlers.initHandlersFromConfig created spellCheckCompRH_Direct: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 473 T297 oasc.RequestHandlers.initHandlersFromConfig created spellCheckWithWordbreak: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 473 T297 oasc.RequestHandlers.initHandlersFromConfig created spellCheckWithWordbreak_Direct: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 474 T297 oasc.RequestHandlers.initHandlersFromConfig created spellCheckCompRH1: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 475 T297 oasc.RequestHandlers.initHandlersFromConfig created tvrh: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 475 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/mlt: solr.MoreLikeThisHandler\\n[junit4:junit4]   2&gt; 476 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/debug\\/dump: solr.DumpRequestHandler\\n[junit4:junit4]   2&gt; 478 T297 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60\\n[junit4:junit4]   2&gt; 479 T297 oasc.SolrCore.initDeprecatedSupport WARNING solrconfig.xml uses deprecated &lt;admin\\/gettableFiles&gt;, Please update your config to use the ShowFileRequestHandler.\\n[junit4:junit4]   2&gt; 481 T297 oasc.SolrCore.initDeprecatedSupport WARNING adding ShowFileRequestHandler with hidden files: [THROW.ERROR.ON.ADD.UPDATEPROCESSOR.JS, SOLRCONFIG-HIGHLIGHT.XML, SCHEMA-REQUIRED-FIELDS.XML, SCHEMA-MINIMAL.XML, BAD-SCHEMA-DUP-DYNAMICFIELD.XML, SCHEMA-REPLICATION2.XML, TRIVIAL.UPDATEPROCESSOR1.JS, SOLRCONFIG-CACHING.XML, SOLRCONFIG-REPEATER.XML, BAD-SCHEMA-NONTEXT-ANALYZER.XML, CURRENCY.XML, SOLRCONFIG-MERGEPOLICY.XML, SOLRCONFIG-TLOG.XML, SOLRCONFIG-MASTER.XML, BAD-SCHEMA-UNIQUEKEY-MULTIVALUED.XML, SCHEMA11.XML, SOLRCONFIG-BASIC.XML, DA_COMPOUNDDICTIONARY.TXT, MISSLEADING.EXTENSION.UPDATEPROCESSOR.JS.TXT, SCHEMA-COPYFIELD-TEST.XML, SOLRCONFIG-SLAVE.XML, SOLRCONFIG-PROPINJECT-INDEXDEFAULT.XML, ELEVATE.XML, TRIVIAL.UPDATEPROCESSOR0.JS, BAD-SOLRCONFIG-BOGUS-SCRIPTENGINE-NAME.XML, SCHEMA-CHARFILTERS.XML, SCHEMA-IB.XML, SOLRCONFIG-QUERYSENDER.XML, SCHEMA-REPLICATION1.XML, DA_UTF8.XML, SOLRCONFIG-SNIPPET-PROCESSOR.XML, CONDITIONAL.UPDATEPROCESSOR.JS, MISSING.FUNCTIONS.UPDATEPROCESSOR.JS, SOLRCONFIG-ENABLEPLUGIN.XML, HYPHENATION.DTD, SCHEMA-PHRASESUGGEST.XML, STEMDICT.TXT, HUNSPELL-TEST.AFF, SCHEMA-SNIPPET-TYPE.XML, STOPTYPES-1.TXT, STOPWORDSWRONGENCODING.TXT, SCHEMA-NUMERIC.XML, SOLRCONFIG-TRANSFORMERS.XML, SOLRCONFIG-PROPINJECT.XML, BAD-SCHEMA-NOT-INDEXED-BUT-TF.XML, SOLRCONFIG-SIMPLELOCK.XML, WDFTYPES.TXT, STOPTYPES-2.TXT, SCHEMA-REVERSED.XML, BAD-SCHEMA-CURRENCY-FT-MULTIVALUED.XML, SOLRCONFIG-SPELLCHECKCOMPONENT.XML, BAD-SCHEMA-CURRENCY-MULTIVALUED.XML, SCHEMA-DFR.XML, SOLRCONFIG-PHRASESUGGEST.XML, BAD-SCHEMA-NOT-INDEXED-BUT-POS.XML, KEEP-1.TXT, OPEN-EXCHANGE-RATES.JSON, SCHEMA-SPATIAL.XML, STOPWITHBOM.TXT, SOLRCONFIG-SPELLCHECKER.XML, SCHEMA-BINARYFIELD.XML, SOLRCONFIG-UPDATE-PROCESSOR-CHAINS.XML, BAD-SCHEMA-OMIT-TF-BUT-NOT-POS.XML, BAD-SCHEMA-DUP-FIELDTYPE.XML, SCHEMA-XINCLUDE.XML, SOLRCONFIG-MASTER1.XML, SYNONYMS.TXT, BAD-SCHEMA-CURRENCY-DYNAMIC-MULTIVALUED.XML, SCHEMA.XML, SCHEMA_CODEC.XML, SOLRCONFIG-SOLR-749.XML, SOLRCONFIG-MASTER1-KEEPONEBACKUP.XML, STOP-2.TXT, SOLRCONFIG-FUNCTIONQUERY.XML, SOLRCONFIG-TERMINDEX.XML, SCHEMA-LMDIRICHLET.XML, SOLRCONFIG-ELEVATE.XML, STOPWORDS.TXT, SCHEMA-FOLDING.XML, SCHEMA-STOP-KEEP.XML, BAD-SCHEMA-NOT-INDEXED-BUT-NORMS.XML, SOLRCONFIG-SOLCOREPROPERTIES.XML, STOP-1.TXT, SOLRCONFIG-MASTER2.XML, SCHEMA-SPELLCHECKER.XML, SOLRCONFIG-RESPONSE-LOG-COMPONENT.XML, SOLRCONFIG-LAZYWRITER.XML, SCHEMA-LUCENEMATCHVERSION.XML, FRENCHARTICLES.TXT, BAD-MP-SOLRCONFIG.XML, SCHEMA15.XML, SOLRCONFIG-REQHANDLER.INCL, SCHEMASURROUND.XML, SCHEMA-COLLATEFILTER.XML, SOLRCONFIG-MASTER3.XML, HUNSPELL-TEST.DIC, SOLRCONFIG-XINCLUDE.XML, BAD-SCHEMA-CODEC-GLOBAL-VS-FT-MISMATCH.XML, SOLRCONFIG-SLAVE1.XML, SOLRCONFIG-DELPOLICY1.XML, SCHEMA-SIM.XML, SCHEMA-SNIPPET-FIELD.XML, SCHEMA-COLLATE.XML, STOP-SNOWBALL.TXT, BAD-SCHEMA-SIM-GLOBAL-VS-FT-MISMATCH.XML, PROTWORDS.TXT, SCHEMA-TRIE.XML, SOLRCONFIG_CODEC.XML, BAD-SOLRCONFIG-INVALID-SCRIPTFILE.XML, JASUGGEST.TXT, SCHEMA-TFIDF.XML, SOLRCONFIG-SCRIPT-UPDATEPROCESSOR.XML, SCHEMA-LMJELINEKMERCER.XML, PHRASESUGGEST.TXT, BAD-SOLRCONFIG-MISSING-SCRIPTFILE.XML, SOLRCONFIG-BASIC-LUCENEVERSION31.XML, BAD-SCHEMA-UNIQUEKEY-USES-DEFAULT.XML, OLD_SYNONYMS.TXT, SOLRCONFIG-DELPOLICY2.XML, SOLRCONFIG-NATIVELOCK.XML, XSLT, BAD-SCHEMA-DUP-FIELD.XML, SOLRCONFIG-NOCACHE.XML, SCHEMA-BM25.XML, ADDFIELDS.UPDATEPROCESSOR.JS, SOLRCONFIG-QUERYSENDER-NOQUERY.XML, SOLRCONFIG-ALTDIRECTORY.XML, COMPOUNDDICTIONARY.TXT, SOLRCONFIG-INDEXCONFIG.XML, SOLRCONFIG_PERF.XML, SCHEMA-NOT-REQUIRED-UNIQUE-KEY.XML, BAD-SCHEMA-ANALYZER-CLASS-AND-NESTED.XML, KEEP-2.TXT, BAD-SCHEMA-UNIQUEKEY-IS-COPYFIELD-DEST.XML, SCHEMA12.XML, MAPPING-ISOLATIN1ACCENT.TXT, BAD_SOLRCONFIG.XML, BAD-SCHEMA-EXTERNAL-FILEFIELD.XML]\\n[junit4:junit4]   2&gt; 511 T297 oass.SolrIndexSearcher.&lt;init&gt; Opening Searcher@63012d7c main\\n[junit4:junit4]   2&gt; 511 T297 oass.SolrIndexSearcher.getIndexDir WARNING WARNING: Directory impl does not support setting indexDir: org.apache.lucene.store.MockDirectoryWrapper\\n[junit4:junit4]   2&gt; 511 T297 oasu.CommitTracker.&lt;init&gt; Hard AutoCommit: disabled\\n[junit4:junit4]   2&gt; 512 T297 oasu.CommitTracker.&lt;init&gt; Soft AutoCommit: disabled\\n[junit4:junit4]   2&gt; 512 T297 oashc.SpellCheckComponent.inform Initializing spell checkers\\n[junit4:junit4]   2&gt; 621 T297 oass.DirectSolrSpellChecker.init init: {name=direct,classname=DirectSolrSpellChecker,field=lowerfilt,minQueryLength=3}\\n[junit4:junit4]   2&gt; 1097 T297 oashc.HttpShardHandlerFactory.getParameter Setting socketTimeout to: 0\\n[junit4:junit4]   2&gt; 1098 T297 oashc.HttpShardHandlerFactory.getParameter Setting urlScheme to: http:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/\\n\u003c\\/span\u003e[junit4:junit4]   2&gt; 1098 T297 oashc.HttpShardHandlerFactory.getParameter Setting connTimeout to: 0\\n[junit4:junit4]   2&gt; 1098 T297 oashc.HttpShardHandlerFactory.getParameter Setting maxConnectionsPerHost to: 20\\n[junit4:junit4]   2&gt; 1099 T297 oashc.HttpShardHandlerFactory.getParameter Setting corePoolSize to: 0\\n[junit4:junit4]   2&gt; 1099 T297 oashc.HttpShardHandlerFactory.getParameter Setting maximumPoolSize to: 2147483647\\n[junit4:junit4]   2&gt; 1099 T297 oashc.HttpShardHandlerFactory.getParameter Setting maxThreadIdleTime to: 5\\n[junit4:junit4]   2&gt; 1099 T297 oashc.HttpShardHandlerFactory.getParameter Setting sizeOfQueue to: -1\\n[junit4:junit4]   2&gt; 1100 T297 oashc.HttpShardHandlerFactory.getParameter Setting fairnessPolicy to: \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e\\n[junit4:junit4]   2&gt; 1100 T297 oascsi.HttpClientUtil.createClient Creating \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e http client, config:maxConnectionsPerHost=20&amp;maxConnections=10000&amp;socketTimeout=0&amp;connTimeout=0&amp;retry=\u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e\\n[junit4:junit4]   2&gt; 1108 T298 oasc.SolrCore.registerSearcher [collection1] Registered \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e searcher Searcher@63012d7c main{StandardDirectoryReader(segments_1:1)}\\n[junit4:junit4]   2&gt; 1115 T297 oasc.CoreContainer.register registering core: collection1\\n[junit4:junit4]   2&gt; 1117 T297 oas.SolrTestCaseJ4.initCore ####initCore end\\n[junit4:junit4]   2&gt; 1120 T297 oas.SolrTestCaseJ4.setUp ###Starting testDiff\\n[junit4:junit4]   2&gt; ASYNC  NEW_CORE C21 name=collection1 org.apache.solr.core.SolrCore@2356df1d\\n[junit4:junit4]   2&gt; 1124 T297 C21 REQ [collection1] webapp=\u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e path=\u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e params={stats=\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e&amp;wt=xml&amp;qt=\\/admin\\/mbeans} status=0 QTime=3\\n[junit4:junit4]   2&gt; 1314 T297 C21 REQ [collection1] webapp=\u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e path=\u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e params={diff=\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e&amp;stats=\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e&amp;wt=xml&amp;qt=\\/admin\\/mbeans} status=0 QTime=185\\n[junit4:junit4]   2&gt; 1342 T297 oas.SolrTestCaseJ4.tearDown ###Ending testDiff\\n[junit4:junit4]   2&gt; NOTE: reproduce with: ant test  -Dtestcase=MBeansHandlerTest -Dtests.method=testDiff -Dtests.seed=E7FE1832E8E65C65 -Dtests.slow=\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e -Dtests.locale=zh_CN -Dtests.timezone=America\\/Indiana\\/Petersburg -Dtests.file.encoding=UTF-8\\n[junit4:junit4] FAILURE 0.26s J0 | MBeansHandlerTest.testDiff &lt;&lt;&lt;\\n[junit4:junit4]    &gt; Throwable #1: org.junit.ComparisonFailure: expected:&lt;Was: [1, Now: 2], Delta: 1&gt; but was:&lt;Was: [278, Now: 279], Delta: 1&gt;\\n[junit4:junit4]    &gt;    at __randomizedtesting.SeedInfo.seed([E7FE1832E8E65C65:22E8DCA9F8506405]:0)\\n[junit4:junit4]    &gt;    at org.junit.Assert.assertEquals(Assert.java:125)\\n[junit4:junit4]    &gt;    at org.junit.Assert.assertEquals(Assert.java:147)\\n[junit4:junit4]    &gt;    at org.apache.solr.handler.admin.MBeansHandlerTest.testDiff(MBeansHandlerTest.java:63)\\n[junit4:junit4]    &gt;    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\\n[junit4:junit4]    &gt;    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\\n[junit4:junit4]    &gt;    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\\n[junit4:junit4]    &gt;    at java.lang.reflect.Method.invoke(Method.java:601)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1559)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:79)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:737)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:773)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:787)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:53)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:50)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleFieldCacheSanity$1.evaluate(TestRuleFieldCacheSanity.java:51)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:55)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:70)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:358)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:782)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:442)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:746)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:648)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:682)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:693)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:53)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:42)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:55)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:43)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:70)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:55)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:358)\\n[junit4:junit4]    &gt;    at java.lang.\u003cspan class=\\\"code-object\\\"\u003eThread\u003c\\/span\u003e.run(\u003cspan class=\\\"code-object\\\"\u003eThread\u003c\\/span\u003e.java:722)\\n[junit4:junit4]   2&gt; 1375 T297 oas.SolrTestCaseJ4.deleteCore ###deleteCore\\n[junit4:junit4]   2&gt; 1376 T297 oasc.CoreContainer.shutdown Shutting down CoreContainer instance=1897850152\\n[junit4:junit4]   2&gt; 1376 T297 oasc.SolrCore.close [collection1]  CLOSING SolrCore org.apache.solr.core.SolrCore@2356df1d\\n[junit4:junit4]   2&gt; 1391 T297 oasu.DirectUpdateHandler2.close closing DirectUpdateHandler2{commits=0,autocommits=0,soft autocommits=0,optimizes=0,rollbacks=0,expungeDeletes=0,docsPending=0,adds=0,deletesById=0,deletesByQuery=0,errors=0,cumulative_adds=0,cumulative_deletesById=0,cumulative_deletesByQuery=0,cumulative_errors=0}\\n[junit4:junit4]   2&gt; 1392 T297 oasc.SolrCore.decrefSolrCoreState Closing SolrCoreState\\n[junit4:junit4]   2&gt; 1392 T297 oasu.DefaultSolrCoreState.closeIndexWriter SolrCoreState ref count has reached 0 - closing IndexWriter\\n[junit4:junit4]   2&gt; 1392 T297 oasu.DefaultSolrCoreState.closeIndexWriter closing IndexWriter with IndexWriterCloser\\n[junit4:junit4]   2&gt; 1393 T297 oasc.SolrCore.closeSearcher [collection1] Closing main searcher on request.\\n[junit4:junit4]   2&gt; NOTE: test params are: codec=Lucene41: {}, sim=RandomSimilarityProvider(queryNorm=\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e,coord=no): {}, locale=zh_CN, timezone=America\\/Indiana\\/Petersburg\\n[junit4:junit4]   2&gt; NOTE: Linux 2.6.32-279.9.1.el6.centos.plus.x86_64 amd64\\/Oracle Corporation 1.7.0_09 (64-bit)\\/cpus=4,threads=1,free=125313208,total=262733824\\n[junit4:junit4]   2&gt; NOTE: All tests run in \u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e JVM: [TestSolrDeletionPolicy1, JsonLoaderTest, TestArbitraryIndexDir, SolrCmdDistributorTest, ShowFileRequestHandlerTest, TestMultiCoreConfBootstrap, TestCSVResponseWriter, NotRequiredUniqueKeyTest, AlternateDirectoryTest, SearchHandlerTest, DateMathParserTest, NoCacheHeaderTest, QueryEqualityTest, OpenExchangeRatesOrgProviderTest, QueryElevationComponentTest, TestSolrDeletionPolicy2, FileUtilsTest, DirectSolrSpellCheckerTest, TestJmxMonitoredMap, TestStressLucene, TimeZoneUtilsTest, MBeansHandlerTest]\\n[junit4:junit4] Completed on J0 in 1.41s, 1 test, 1 failure &lt;&lt;&lt; FAILURES!\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13483445_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483445_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 18:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T18:18:43+0000\'\u003e24\\/Oct\\/12 18:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 24\\/Oct\\/12 18:22\\\"\u003eedited\u003c\\/span\u003e                   With this as the contructor: \\n\\n  \\n    public  RequestHandlerBase() {\\n \\/\\/    numRequests = Metrics.newCounter(RequestHandlerBase.class,  \\\"numRequests\\\" ,  this .toString());\\n  \\/\\/    numErrors = Metrics.newCounter(RequestHandlerBase.class,  \\\"numErrors\\\" ,  this .toString());\\n  \\/\\/    numTimeouts = Metrics.newCounter(RequestHandlerBase.class,  \\\"numTimeouts\\\" ,  this .toString());\\n  \\/\\/    requestTimes = Metrics.newTimer(RequestHandlerBase.class,  \\\"requestTimes\\\" ,  this .toString());\\n     numRequests = Metrics.newCounter(RequestHandlerBase.class,  \\\"numRequests\\\" );\\n    numErrors = Metrics.newCounter(RequestHandlerBase.class,  \\\"numErrors\\\" );\\n    numTimeouts = Metrics.newCounter(RequestHandlerBase.class,  \\\"numTimeouts\\\" );\\n    requestTimes = Metrics.newTimer(RequestHandlerBase.class,  \\\"requestTimes\\\" );\\n  }\\n \\n  \\n\\n I get the following as the failure.  I suppose I should be glad that it fails, but RequestHandlersTests, which is the test that was modified, continues to pass. \\n\\n  \\n [junit4:junit4] Suite: org.apache.solr.handler.admin.MBeansHandlerTest\\n[junit4:junit4]   2&gt; 0 T297 oas.SolrTestCaseJ4.initCore ####initCore\\n[junit4:junit4]   2&gt; Creating dataDir: \\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/.\\/solrtest-MBeansHandlerTest-1351102494087\\n[junit4:junit4]   2&gt; 26 T297 oasc.SolrResourceLoader.&lt;init&gt;  new  SolrResourceLoader  for  directory:  \'\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\/collection1\\/\' \\n[junit4:junit4]   2&gt; 27 T297 oasc.SolrResourceLoader.replaceClassLoader Adding  \'file:\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\/collection1\\/lib\\/classes\\/\'  to classloader\\n[junit4:junit4]   2&gt; 27 T297 oasc.SolrResourceLoader.replaceClassLoader Adding  \'file:\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\/collection1\\/lib\\/README\'  to classloader\\n[junit4:junit4]   2&gt; 59 T297 oasc.SolrConfig.&lt;init&gt; Using Lucene MatchVersion: LUCENE_41\\n[junit4:junit4]   2&gt; 98 T297 oasc.SolrConfig.&lt;init&gt; Loaded SolrConfig: solrconfig.xml\\n[junit4:junit4]   2&gt; 98 T297 oass.IndexSchema.readSchema Reading Solr Schema\\n[junit4:junit4]   2&gt; 105 T297 oass.IndexSchema.readSchema Schema name=test\\n[junit4:junit4]   2&gt; 414 T297 oass.OpenExchangeRatesOrgProvider.init Initialized with rates=open-exchange-rates.json, refreshInterval=1440.\\n[junit4:junit4]   2&gt; 420 T297 oass.IndexSchema.readSchema  default  search field in schema is text\\n[junit4:junit4]   2&gt; 422 T297 oass.IndexSchema.readSchema unique key field: id\\n[junit4:junit4]   2&gt; 430 T297 oass.FileExchangeRateProvider.reload Reloading exchange rates from file currency.xml\\n[junit4:junit4]   2&gt; 432 T297 oass.FileExchangeRateProvider.reload Reloading exchange rates from file currency.xml\\n[junit4:junit4]   2&gt; 434 T297 oass.OpenExchangeRatesOrgProvider.reload Reloading exchange rates from open-exchange-rates.json\\n[junit4:junit4]   2&gt; 435 T297 oass.OpenExchangeRatesOrgProvider.reload Reloading exchange rates from open-exchange-rates.json\\n[junit4:junit4]   2&gt; 436 T297 oasc.SolrResourceLoader.locateSolrHome JNDI not configured  for  solr (NoInitialContextEx)\\n[junit4:junit4]   2&gt; 436 T297 oasc.SolrResourceLoader.locateSolrHome using system property solr.solr.home: \\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\n[junit4:junit4]   2&gt; 436 T297 oasc.SolrResourceLoader.&lt;init&gt;  new  SolrResourceLoader  for  directory:  \'\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\/\' \\n[junit4:junit4]   2&gt; 442 T297 oasc.CoreContainer.&lt;init&gt; New CoreContainer 1897850152\\n[junit4:junit4]   2&gt; 442 T297 oasc.SolrCore.&lt;init&gt; [collection1] Opening  new  SolrCore at \\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test-files\\/solr\\/collection1\\/, dataDir=\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/.\\/solrtest-MBeansHandlerTest-1351102494087\\/\\n[junit4:junit4]   2&gt; 443 T297 oasc.JmxMonitoredMap.&lt;init&gt; JMX monitoring is enabled. Adding Solr mbeans to JMX Server: com.sun.jmx.mbeanserver.JmxMBeanServer@201a970\\n[junit4:junit4]   2&gt; 443 T297 oasc.SolrCore.getNewIndexDir New index directory detected: old= null   new =\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/.\\/solrtest-MBeansHandlerTest-1351102494087\\/index\\/\\n[junit4:junit4]   2&gt; 444 T297 oasc.SolrCore.initIndex WARNING [collection1] Solr index directory  \'\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/.\\/solrtest-MBeansHandlerTest-1351102494087\\/index\'  doesn\'t exist. Creating  new  index...\\n[junit4:junit4]   2&gt; 460 T297 oasc.CachingDirectoryFactory.get  return   new  directory  for  \\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/.\\/solrtest-MBeansHandlerTest-1351102494087\\/index forceNew: false \\n[junit4:junit4]   2&gt; 462 T297 oasc.SolrDeletionPolicy.onCommit SolrDeletionPolicy.onCommit: commits:num=1\\n[junit4:junit4]   2&gt;            commit{dir=MockDirWrapper(org.apache.lucene.store.SimpleFSDirectory@\\/index\\/src\\/branch_4x\\/solr\\/build\\/solr-core\\/test\\/J0\\/index4103741039tmp lockFactory=org.apache.lucene.store.NativeFSLockFactory@8f7fddb),segFN=segments_1,generation=1,filenames=[segments_1]\\n[junit4:junit4]   2&gt; 462 T297 oasc.SolrDeletionPolicy.updateCommits newest commit = 1\\n[junit4:junit4]   2&gt; 462 T297 oasc.SolrCore.initWriters created xml: solr.XMLResponseWriter\\n[junit4:junit4]   2&gt; 464 T297 oasup.UpdateRequestProcessorChain.init inserting DistributedUpdateProcessorFactory into updateRequestProcessorChain  \\\"dedupe\\\" \\n[junit4:junit4]   2&gt; 464 T297 oasup.UpdateRequestProcessorChain.init inserting DistributedUpdateProcessorFactory into updateRequestProcessorChain  \\\"dedupe-allfields\\\" \\n[junit4:junit4]   2&gt; 465 T297 oasup.UpdateRequestProcessorChain.init inserting DistributedUpdateProcessorFactory into updateRequestProcessorChain  \\\"stored_sig\\\" \\n[junit4:junit4]   2&gt; 465 T297 oasup.UpdateRequestProcessorChain.init inserting DistributedUpdateProcessorFactory into updateRequestProcessorChain  \\\"uniq-fields\\\" \\n[junit4:junit4]   2&gt; 466 T297 oasup.UpdateRequestProcessorChain.init inserting DistributedUpdateProcessorFactory into updateRequestProcessorChain  \\\"distrib-dup-test-chain-implicit\\\" \\n[junit4:junit4]   2&gt; 466 T297 oasc.RequestHandlers.initHandlersFromConfig adding lazy requestHandler: solr.ReplicationHandler\\n[junit4:junit4]   2&gt; 466 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/replication: solr.ReplicationHandler\\n[junit4:junit4]   2&gt; 467 T297 oasc.RequestHandlers.initHandlersFromConfig created standard: solr.StandardRequestHandler\\n[junit4:junit4]   2&gt; 467 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/get: solr.RealTimeGetHandler\\n[junit4:junit4]   2&gt; 468 T297 oasc.RequestHandlers.initHandlersFromConfig created dismax: solr.SearchHandler\\n[junit4:junit4]   2&gt; 469 T297 oasc.RequestHandlers.initHandlersFromConfig created mock: org.apache.solr.core.MockQuerySenderListenerReqHandler\\n[junit4:junit4]   2&gt; 469 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/admin\\/: org.apache.solr.handler.admin.AdminHandlers\\n[junit4:junit4]   2&gt; 469 T297 oasc.RequestHandlers.initHandlersFromConfig created defaults: solr.StandardRequestHandler\\n[junit4:junit4]   2&gt; 470 T297 oasc.RequestHandlers.initHandlersFromConfig adding lazy requestHandler: solr.StandardRequestHandler\\n[junit4:junit4]   2&gt; 470 T297 oasc.RequestHandlers.initHandlersFromConfig created lazy: solr.StandardRequestHandler\\n[junit4:junit4]   2&gt; 471 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/update: solr.UpdateRequestHandler\\n[junit4:junit4]   2&gt; 471 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/terms: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 472 T297 oasc.RequestHandlers.initHandlersFromConfig created spellCheckCompRH: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 472 T297 oasc.RequestHandlers.initHandlersFromConfig created spellCheckCompRH_Direct: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 473 T297 oasc.RequestHandlers.initHandlersFromConfig created spellCheckWithWordbreak: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 473 T297 oasc.RequestHandlers.initHandlersFromConfig created spellCheckWithWordbreak_Direct: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 474 T297 oasc.RequestHandlers.initHandlersFromConfig created spellCheckCompRH1: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 475 T297 oasc.RequestHandlers.initHandlersFromConfig created tvrh: org.apache.solr.handler.component.SearchHandler\\n[junit4:junit4]   2&gt; 475 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/mlt: solr.MoreLikeThisHandler\\n[junit4:junit4]   2&gt; 476 T297 oasc.RequestHandlers.initHandlersFromConfig created \\/debug\\/dump: solr.DumpRequestHandler\\n[junit4:junit4]   2&gt; 478 T297 oashl.XMLLoader.init xsltCacheLifetimeSeconds=60\\n[junit4:junit4]   2&gt; 479 T297 oasc.SolrCore.initDeprecatedSupport WARNING solrconfig.xml uses deprecated &lt;admin\\/gettableFiles&gt;, Please update your config to use the ShowFileRequestHandler.\\n[junit4:junit4]   2&gt; 481 T297 oasc.SolrCore.initDeprecatedSupport WARNING adding ShowFileRequestHandler with hidden files: [THROW.ERROR.ON.ADD.UPDATEPROCESSOR.JS, SOLRCONFIG-HIGHLIGHT.XML, SCHEMA-REQUIRED-FIELDS.XML, SCHEMA-MINIMAL.XML, BAD-SCHEMA-DUP-DYNAMICFIELD.XML, SCHEMA-REPLICATION2.XML, TRIVIAL.UPDATEPROCESSOR1.JS, SOLRCONFIG-CACHING.XML, SOLRCONFIG-REPEATER.XML, BAD-SCHEMA-NONTEXT-ANALYZER.XML, CURRENCY.XML, SOLRCONFIG-MERGEPOLICY.XML, SOLRCONFIG-TLOG.XML, SOLRCONFIG-MASTER.XML, BAD-SCHEMA-UNIQUEKEY-MULTIVALUED.XML, SCHEMA11.XML, SOLRCONFIG-BASIC.XML, DA_COMPOUNDDICTIONARY.TXT, MISSLEADING.EXTENSION.UPDATEPROCESSOR.JS.TXT, SCHEMA-COPYFIELD-TEST.XML, SOLRCONFIG-SLAVE.XML, SOLRCONFIG-PROPINJECT-INDEXDEFAULT.XML, ELEVATE.XML, TRIVIAL.UPDATEPROCESSOR0.JS, BAD-SOLRCONFIG-BOGUS-SCRIPTENGINE-NAME.XML, SCHEMA-CHARFILTERS.XML, SCHEMA-IB.XML, SOLRCONFIG-QUERYSENDER.XML, SCHEMA-REPLICATION1.XML, DA_UTF8.XML, SOLRCONFIG-SNIPPET-PROCESSOR.XML, CONDITIONAL.UPDATEPROCESSOR.JS, MISSING.FUNCTIONS.UPDATEPROCESSOR.JS, SOLRCONFIG-ENABLEPLUGIN.XML, HYPHENATION.DTD, SCHEMA-PHRASESUGGEST.XML, STEMDICT.TXT, HUNSPELL-TEST.AFF, SCHEMA-SNIPPET-TYPE.XML, STOPTYPES-1.TXT, STOPWORDSWRONGENCODING.TXT, SCHEMA-NUMERIC.XML, SOLRCONFIG-TRANSFORMERS.XML, SOLRCONFIG-PROPINJECT.XML, BAD-SCHEMA-NOT-INDEXED-BUT-TF.XML, SOLRCONFIG-SIMPLELOCK.XML, WDFTYPES.TXT, STOPTYPES-2.TXT, SCHEMA-REVERSED.XML, BAD-SCHEMA-CURRENCY-FT-MULTIVALUED.XML, SOLRCONFIG-SPELLCHECKCOMPONENT.XML, BAD-SCHEMA-CURRENCY-MULTIVALUED.XML, SCHEMA-DFR.XML, SOLRCONFIG-PHRASESUGGEST.XML, BAD-SCHEMA-NOT-INDEXED-BUT-POS.XML, KEEP-1.TXT, OPEN-EXCHANGE-RATES.JSON, SCHEMA-SPATIAL.XML, STOPWITHBOM.TXT, SOLRCONFIG-SPELLCHECKER.XML, SCHEMA-BINARYFIELD.XML, SOLRCONFIG-UPDATE-PROCESSOR-CHAINS.XML, BAD-SCHEMA-OMIT-TF-BUT-NOT-POS.XML, BAD-SCHEMA-DUP-FIELDTYPE.XML, SCHEMA-XINCLUDE.XML, SOLRCONFIG-MASTER1.XML, SYNONYMS.TXT, BAD-SCHEMA-CURRENCY-DYNAMIC-MULTIVALUED.XML, SCHEMA.XML, SCHEMA_CODEC.XML, SOLRCONFIG-SOLR-749.XML, SOLRCONFIG-MASTER1-KEEPONEBACKUP.XML, STOP-2.TXT, SOLRCONFIG-FUNCTIONQUERY.XML, SOLRCONFIG-TERMINDEX.XML, SCHEMA-LMDIRICHLET.XML, SOLRCONFIG-ELEVATE.XML, STOPWORDS.TXT, SCHEMA-FOLDING.XML, SCHEMA-STOP-KEEP.XML, BAD-SCHEMA-NOT-INDEXED-BUT-NORMS.XML, SOLRCONFIG-SOLCOREPROPERTIES.XML, STOP-1.TXT, SOLRCONFIG-MASTER2.XML, SCHEMA-SPELLCHECKER.XML, SOLRCONFIG-RESPONSE-LOG-COMPONENT.XML, SOLRCONFIG-LAZYWRITER.XML, SCHEMA-LUCENEMATCHVERSION.XML, FRENCHARTICLES.TXT, BAD-MP-SOLRCONFIG.XML, SCHEMA15.XML, SOLRCONFIG-REQHANDLER.INCL, SCHEMASURROUND.XML, SCHEMA-COLLATEFILTER.XML, SOLRCONFIG-MASTER3.XML, HUNSPELL-TEST.DIC, SOLRCONFIG-XINCLUDE.XML, BAD-SCHEMA-CODEC-GLOBAL-VS-FT-MISMATCH.XML, SOLRCONFIG-SLAVE1.XML, SOLRCONFIG-DELPOLICY1.XML, SCHEMA-SIM.XML, SCHEMA-SNIPPET-FIELD.XML, SCHEMA-COLLATE.XML, STOP-SNOWBALL.TXT, BAD-SCHEMA-SIM-GLOBAL-VS-FT-MISMATCH.XML, PROTWORDS.TXT, SCHEMA-TRIE.XML, SOLRCONFIG_CODEC.XML, BAD-SOLRCONFIG-INVALID-SCRIPTFILE.XML, JASUGGEST.TXT, SCHEMA-TFIDF.XML, SOLRCONFIG-SCRIPT-UPDATEPROCESSOR.XML, SCHEMA-LMJELINEKMERCER.XML, PHRASESUGGEST.TXT, BAD-SOLRCONFIG-MISSING-SCRIPTFILE.XML, SOLRCONFIG-BASIC-LUCENEVERSION31.XML, BAD-SCHEMA-UNIQUEKEY-USES-DEFAULT.XML, OLD_SYNONYMS.TXT, SOLRCONFIG-DELPOLICY2.XML, SOLRCONFIG-NATIVELOCK.XML, XSLT, BAD-SCHEMA-DUP-FIELD.XML, SOLRCONFIG-NOCACHE.XML, SCHEMA-BM25.XML, ADDFIELDS.UPDATEPROCESSOR.JS, SOLRCONFIG-QUERYSENDER-NOQUERY.XML, SOLRCONFIG-ALTDIRECTORY.XML, COMPOUNDDICTIONARY.TXT, SOLRCONFIG-INDEXCONFIG.XML, SOLRCONFIG_PERF.XML, SCHEMA-NOT-REQUIRED-UNIQUE-KEY.XML, BAD-SCHEMA-ANALYZER-CLASS-AND-NESTED.XML, KEEP-2.TXT, BAD-SCHEMA-UNIQUEKEY-IS-COPYFIELD-DEST.XML, SCHEMA12.XML, MAPPING-ISOLATIN1ACCENT.TXT, BAD_SOLRCONFIG.XML, BAD-SCHEMA-EXTERNAL-FILEFIELD.XML]\\n[junit4:junit4]   2&gt; 511 T297 oass.SolrIndexSearcher.&lt;init&gt; Opening Searcher@63012d7c main\\n[junit4:junit4]   2&gt; 511 T297 oass.SolrIndexSearcher.getIndexDir WARNING WARNING: Directory impl does not support setting indexDir: org.apache.lucene.store.MockDirectoryWrapper\\n[junit4:junit4]   2&gt; 511 T297 oasu.CommitTracker.&lt;init&gt; Hard AutoCommit: disabled\\n[junit4:junit4]   2&gt; 512 T297 oasu.CommitTracker.&lt;init&gt; Soft AutoCommit: disabled\\n[junit4:junit4]   2&gt; 512 T297 oashc.SpellCheckComponent.inform Initializing spell checkers\\n[junit4:junit4]   2&gt; 621 T297 oass.DirectSolrSpellChecker.init init: {name=direct,classname=DirectSolrSpellChecker,field=lowerfilt,minQueryLength=3}\\n[junit4:junit4]   2&gt; 1097 T297 oashc.HttpShardHandlerFactory.getParameter Setting socketTimeout to: 0\\n[junit4:junit4]   2&gt; 1098 T297 oashc.HttpShardHandlerFactory.getParameter Setting urlScheme to: http: \\/\\/\\n [junit4:junit4]   2&gt; 1098 T297 oashc.HttpShardHandlerFactory.getParameter Setting connTimeout to: 0\\n[junit4:junit4]   2&gt; 1098 T297 oashc.HttpShardHandlerFactory.getParameter Setting maxConnectionsPerHost to: 20\\n[junit4:junit4]   2&gt; 1099 T297 oashc.HttpShardHandlerFactory.getParameter Setting corePoolSize to: 0\\n[junit4:junit4]   2&gt; 1099 T297 oashc.HttpShardHandlerFactory.getParameter Setting maximumPoolSize to: 2147483647\\n[junit4:junit4]   2&gt; 1099 T297 oashc.HttpShardHandlerFactory.getParameter Setting maxThreadIdleTime to: 5\\n[junit4:junit4]   2&gt; 1099 T297 oashc.HttpShardHandlerFactory.getParameter Setting sizeOfQueue to: -1\\n[junit4:junit4]   2&gt; 1100 T297 oashc.HttpShardHandlerFactory.getParameter Setting fairnessPolicy to:  false \\n[junit4:junit4]   2&gt; 1100 T297 oascsi.HttpClientUtil.createClient Creating  new  http client, config:maxConnectionsPerHost=20&amp;maxConnections=10000&amp;socketTimeout=0&amp;connTimeout=0&amp;retry= false \\n[junit4:junit4]   2&gt; 1108 T298 oasc.SolrCore.registerSearcher [collection1] Registered  new  searcher Searcher@63012d7c main{StandardDirectoryReader(segments_1:1)}\\n[junit4:junit4]   2&gt; 1115 T297 oasc.CoreContainer.register registering core: collection1\\n[junit4:junit4]   2&gt; 1117 T297 oas.SolrTestCaseJ4.initCore ####initCore end\\n[junit4:junit4]   2&gt; 1120 T297 oas.SolrTestCaseJ4.setUp ###Starting testDiff\\n[junit4:junit4]   2&gt; ASYNC  NEW_CORE C21 name=collection1 org.apache.solr.core.SolrCore@2356df1d\\n[junit4:junit4]   2&gt; 1124 T297 C21 REQ [collection1] webapp= null  path= null  params={stats= true &amp;wt=xml&amp;qt=\\/admin\\/mbeans} status=0 QTime=3\\n[junit4:junit4]   2&gt; 1314 T297 C21 REQ [collection1] webapp= null  path= null  params={diff= true &amp;stats= true &amp;wt=xml&amp;qt=\\/admin\\/mbeans} status=0 QTime=185\\n[junit4:junit4]   2&gt; 1342 T297 oas.SolrTestCaseJ4.tearDown ###Ending testDiff\\n[junit4:junit4]   2&gt; NOTE: reproduce with: ant test  -Dtestcase=MBeansHandlerTest -Dtests.method=testDiff -Dtests.seed=E7FE1832E8E65C65 -Dtests.slow= true  -Dtests.locale=zh_CN -Dtests.timezone=America\\/Indiana\\/Petersburg -Dtests.file.encoding=UTF-8\\n[junit4:junit4] FAILURE 0.26s J0 | MBeansHandlerTest.testDiff &lt;&lt;&lt;\\n[junit4:junit4]    &gt; Throwable #1: org.junit.ComparisonFailure: expected:&lt;Was: [1, Now: 2], Delta: 1&gt; but was:&lt;Was: [278, Now: 279], Delta: 1&gt;\\n[junit4:junit4]    &gt;    at __randomizedtesting.SeedInfo.seed([E7FE1832E8E65C65:22E8DCA9F8506405]:0)\\n[junit4:junit4]    &gt;    at org.junit.Assert.assertEquals(Assert.java:125)\\n[junit4:junit4]    &gt;    at org.junit.Assert.assertEquals(Assert.java:147)\\n[junit4:junit4]    &gt;    at org.apache.solr.handler.admin.MBeansHandlerTest.testDiff(MBeansHandlerTest.java:63)\\n[junit4:junit4]    &gt;    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\\n[junit4:junit4]    &gt;    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\\n[junit4:junit4]    &gt;    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\\n[junit4:junit4]    &gt;    at java.lang.reflect.Method.invoke(Method.java:601)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1559)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner.access$600(RandomizedRunner.java:79)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:737)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:773)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:787)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:53)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:50)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleFieldCacheSanity$1.evaluate(TestRuleFieldCacheSanity.java:51)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:55)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:70)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:358)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:782)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:442)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:746)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:648)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:682)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:693)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:53)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:42)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:55)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:43)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:70)\\n[junit4:junit4]    &gt;    at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:55)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\\n[junit4:junit4]    &gt;    at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:358)\\n[junit4:junit4]    &gt;    at java.lang. Thread .run( Thread .java:722)\\n[junit4:junit4]   2&gt; 1375 T297 oas.SolrTestCaseJ4.deleteCore ###deleteCore\\n[junit4:junit4]   2&gt; 1376 T297 oasc.CoreContainer.shutdown Shutting down CoreContainer instance=1897850152\\n[junit4:junit4]   2&gt; 1376 T297 oasc.SolrCore.close [collection1]  CLOSING SolrCore org.apache.solr.core.SolrCore@2356df1d\\n[junit4:junit4]   2&gt; 1391 T297 oasu.DirectUpdateHandler2.close closing DirectUpdateHandler2{commits=0,autocommits=0,soft autocommits=0,optimizes=0,rollbacks=0,expungeDeletes=0,docsPending=0,adds=0,deletesById=0,deletesByQuery=0,errors=0,cumulative_adds=0,cumulative_deletesById=0,cumulative_deletesByQuery=0,cumulative_errors=0}\\n[junit4:junit4]   2&gt; 1392 T297 oasc.SolrCore.decrefSolrCoreState Closing SolrCoreState\\n[junit4:junit4]   2&gt; 1392 T297 oasu.DefaultSolrCoreState.closeIndexWriter SolrCoreState ref count has reached 0 - closing IndexWriter\\n[junit4:junit4]   2&gt; 1392 T297 oasu.DefaultSolrCoreState.closeIndexWriter closing IndexWriter with IndexWriterCloser\\n[junit4:junit4]   2&gt; 1393 T297 oasc.SolrCore.closeSearcher [collection1] Closing main searcher on request.\\n[junit4:junit4]   2&gt; NOTE: test params are: codec=Lucene41: {}, sim=RandomSimilarityProvider(queryNorm= true ,coord=no): {}, locale=zh_CN, timezone=America\\/Indiana\\/Petersburg\\n[junit4:junit4]   2&gt; NOTE: Linux 2.6.32-279.9.1.el6.centos.plus.x86_64 amd64\\/Oracle Corporation 1.7.0_09 (64-bit)\\/cpus=4,threads=1,free=125313208,total=262733824\\n[junit4:junit4]   2&gt; NOTE: All tests run in  this  JVM: [TestSolrDeletionPolicy1, JsonLoaderTest, TestArbitraryIndexDir, SolrCmdDistributorTest, ShowFileRequestHandlerTest, TestMultiCoreConfBootstrap, TestCSVResponseWriter, NotRequiredUniqueKeyTest, AlternateDirectoryTest, SearchHandlerTest, DateMathParserTest, NoCacheHeaderTest, QueryEqualityTest, OpenExchangeRatesOrgProviderTest, QueryElevationComponentTest, TestSolrDeletionPolicy2, FileUtilsTest, DirectSolrSpellCheckerTest, TestJmxMonitoredMap, TestStressLucene, TimeZoneUtilsTest, MBeansHandlerTest]\\n[junit4:junit4] Completed on J0 in 1.41s, 1 test, 1 failure &lt;&lt;&lt; FAILURES!\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13483449\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13483449&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13483449\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13483449_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483449_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 18:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T18:24:37+0000\'\u003e24\\/Oct\\/12 18:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere\'s a test bug in there - it\'s comparing the NamedList objects when it should be comparing their values.  Will put up a patch in a bit...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13483449_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483449_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 18:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T18:24:37+0000\'\u003e24\\/Oct\\/12 18:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There\'s a test bug in there - it\'s comparing the NamedList objects when it should be comparing their values.  Will put up a patch in a bit...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13483545\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13483545&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13483545\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13483545_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483545_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 20:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T20:13:51+0000\'\u003e24\\/Oct\\/12 20:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch correcting the test bug (after an hour or so of swearing at Java object equality semantics...)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13483545_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483545_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 20:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T20:13:51+0000\'\u003e24\\/Oct\\/12 20:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch correcting the test bug (after an hour or so of swearing at Java object equality semantics...)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13483614\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13483614&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13483614\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13483614_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483614_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 21:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T21:36:56+0000\'\u003e24\\/Oct\\/12 21:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYou probably already knew this, but now the updated test fails properly for me when the constructor doesn\'t set the scope.  I still get the failure in MBeansHandlerTest, which without knowledge of how all this stuff works internally, is really really mystifying.  Since all solr tests pass when I don\'t monkey with the constructor, I guess it\'s not a big deal.\u003c\\/p\u003e\\n\\n\u003cp\u003eNot that my vote really counts, but +1 for committing to 4x and trunk from me.  Take out those enemy death cannons.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13483614_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483614_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/12 21:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-24T21:36:56+0000\'\u003e24\\/Oct\\/12 21:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    You probably already knew this, but now the updated test fails properly for me when the constructor doesn\'t set the scope.  I still get the failure in MBeansHandlerTest, which without knowledge of how all this stuff works internally, is really really mystifying.  Since all solr tests pass when I don\'t monkey with the constructor, I guess it\'s not a big deal. \\n\\n Not that my vote really counts, but +1 for committing to 4x and trunk from me.  Take out those enemy death cannons.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13483981\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13483981&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13483981\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13483981_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483981_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Oct\\/12 08:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-25T08:41:01+0000\'\u003e25\\/Oct\\/12 08:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for testing it Shawn.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think I\'d like some more eyes on it before I commit - it adds a dependency to solr-core, which is a pretty big change.  Anyone else have an opinion?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13483981_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13483981_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Oct\\/12 08:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-25T08:41:01+0000\'\u003e25\\/Oct\\/12 08:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for testing it Shawn. \\n\\n I think I\'d like some more eyes on it before I commit - it adds a dependency to solr-core, which is a pretty big change.  Anyone else have an opinion?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13484945\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13484945&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13484945\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13484945_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13484945_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/12 14:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-26T14:14:13+0000\'\u003e26\\/Oct\\/12 14:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Alan,\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is great to have all these statistics available through JMX, this would be really helpful for Solr monitoring! Instead of relying on \u003ctt\u003eRequestHandlerBase.toString\u003c\\/tt\u003e to return a distinct instance per request handler, maybe each request handler should have its own \u003ctt\u003eMetricsRegistry\u003c\\/tt\u003e (or maybe use the request handler path as the scope, but this looks harder to do)?\u003c\\/p\u003e\\n\\n\u003cp\u003eI have no objection to adding the metrics jar to the dependencies of solr-core.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13484945_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13484945_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/12 14:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-26T14:14:13+0000\'\u003e26\\/Oct\\/12 14:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Alan, \\n\\n This is great to have all these statistics available through JMX, this would be really helpful for Solr monitoring! Instead of relying on  RequestHandlerBase.toString  to return a distinct instance per request handler, maybe each request handler should have its own  MetricsRegistry  (or maybe use the request handler path as the scope, but this looks harder to do)? \\n\\n I have no objection to adding the metrics jar to the dependencies of solr-core.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13484964\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13484964&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13484964\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13484964_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13484964_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/12 14:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-26T14:43:13+0000\'\u003e26\\/Oct\\/12 14:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYeah, the toString hack is quite ... hacky.  The problem with using the request handler path as the scope (which I agree would be logical) is that this isn\'t available until init() is called, and both getStatistics() and handleRequest() can get called before init().\u003c\\/p\u003e\\n\\n\u003cp\u003eHaving one MetricsRegistry per request handler looks a lot more sensible though.  I\'ll put a patch together.  Thanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13484964_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13484964_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/12 14:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-26T14:43:13+0000\'\u003e26\\/Oct\\/12 14:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yeah, the toString hack is quite ... hacky.  The problem with using the request handler path as the scope (which I agree would be logical) is that this isn\'t available until init() is called, and both getStatistics() and handleRequest() can get called before init(). \\n\\n Having one MetricsRegistry per request handler looks a lot more sensible though.  I\'ll put a patch together.  Thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13485194\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13485194&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13485194\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13485194_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485194_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/12 21:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-26T21:03:40+0000\'\u003e26\\/Oct\\/12 21:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis patch declares a MetricsRegistry in the RequestHandlerBase constructor, and uses that to ensure that the various metrics are held per-handler.\u003c\\/p\u003e\\n\\n\u003cp\u003eThere doesn\'t seem to be any way of setting the metric names after construction, so I don\'t think we\'ll be able to write the handler path into the metrics, unfortunately.  But you\'ll be able to tell the various handlers apart by accessing the data through the existing SOLR JMX beans.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13485194_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485194_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/12 21:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-26T21:03:40+0000\'\u003e26\\/Oct\\/12 21:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This patch declares a MetricsRegistry in the RequestHandlerBase constructor, and uses that to ensure that the various metrics are held per-handler. \\n\\n There doesn\'t seem to be any way of setting the metric names after construction, so I don\'t think we\'ll be able to write the handler path into the metrics, unfortunately.  But you\'ll be able to tell the various handlers apart by accessing the data through the existing SOLR JMX beans.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13485280\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13485280&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13485280\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13485280_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485280_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/12 23:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-26T23:34:17+0000\'\u003e26\\/Oct\\/12 23:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI ran into some trouble with tests failing, so I checked out a fresh branch_4x, applied this patch, and tried running solr tests.  There are major explosions.  I\'ll be attaching the full putty log for review.  It appears that the first exception is an out of memory error:\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;junit4:junit4&#93;\u003c\\/span\u003e   2&gt; 7800 T177 ccr.RandomizedRunner$QueueUncaughtExceptionsHandler.uncaughtException WARNING Uncaught exception in thread: Thread\u003cspan class=\\\"error\\\"\u003e&#91;metrics-meter-tick-thread-1,5,TGRP-TestRandomFaceting&#93;\u003c\\/span\u003e java.lang.OutOfMemoryError: unable to create new native thread\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;junit4:junit4&#93;\u003c\\/span\u003e   2&gt;    at __randomizedtesting.SeedInfo.seed(\u003cspan class=\\\"error\\\"\u003e&#91;2191B18B87EDCD66&#93;\u003c\\/span\u003e:0)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;junit4:junit4&#93;\u003c\\/span\u003e   2&gt;    at java.lang.Thread.start0(Native Method)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;junit4:junit4&#93;\u003c\\/span\u003e   2&gt;    at java.lang.Thread.start(Thread.java:691)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;junit4:junit4&#93;\u003c\\/span\u003e   2&gt;    at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:943)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;junit4:junit4&#93;\u003c\\/span\u003e   2&gt;    at java.util.concurrent.ThreadPoolExecutor.processWorkerExit(ThreadPoolExecutor.java:992)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;junit4:junit4&#93;\u003c\\/span\u003e   2&gt;    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;junit4:junit4&#93;\u003c\\/span\u003e   2&gt;    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;junit4:junit4&#93;\u003c\\/span\u003e   2&gt;    at java.lang.Thread.run(Thread.java:722)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;junit4:junit4&#93;\u003c\\/span\u003e   2&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eIf I edit out the MetricsRegistry and go back to creating the objects directly from Metrics and using this.toString() as the scope, the tests all pass.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe Metrics documentation talks about MetricsRegistry as being something you create on a per-application basis.  That suggests that it\'s a very heavy object, and even a barebones Solr install probably has at least a dozen requestHandlers defined.  I don\'t know how many are defined in the JVMs used for testing.\u003c\\/p\u003e\\n\\n\u003cp\u003eOn my test branch_4x installation, I see 29 handlers between QUERYHANDLER and UPDATEHANDLER in the stats visible in the gui, and that\'s just on one core.  I\'ve got 16 cores defined.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13485280_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485280_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/12 23:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-26T23:34:17+0000\'\u003e26\\/Oct\\/12 23:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I ran into some trouble with tests failing, so I checked out a fresh branch_4x, applied this patch, and tried running solr tests.  There are major explosions.  I\'ll be attaching the full putty log for review.  It appears that the first exception is an out of memory error: \\n\\n  &#91;junit4:junit4&#93;    2&gt; 7800 T177 ccr.RandomizedRunner$QueueUncaughtExceptionsHandler.uncaughtException WARNING Uncaught exception in thread: Thread &#91;metrics-meter-tick-thread-1,5,TGRP-TestRandomFaceting&#93;  java.lang.OutOfMemoryError: unable to create new native thread \\n &#91;junit4:junit4&#93;    2&gt;    at __randomizedtesting.SeedInfo.seed( &#91;2191B18B87EDCD66&#93; :0) \\n &#91;junit4:junit4&#93;    2&gt;    at java.lang.Thread.start0(Native Method) \\n &#91;junit4:junit4&#93;    2&gt;    at java.lang.Thread.start(Thread.java:691) \\n &#91;junit4:junit4&#93;    2&gt;    at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:943) \\n &#91;junit4:junit4&#93;    2&gt;    at java.util.concurrent.ThreadPoolExecutor.processWorkerExit(ThreadPoolExecutor.java:992) \\n &#91;junit4:junit4&#93;    2&gt;    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) \\n &#91;junit4:junit4&#93;    2&gt;    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) \\n &#91;junit4:junit4&#93;    2&gt;    at java.lang.Thread.run(Thread.java:722) \\n &#91;junit4:junit4&#93;    2&gt; \\n\\n If I edit out the MetricsRegistry and go back to creating the objects directly from Metrics and using this.toString() as the scope, the tests all pass. \\n\\n The Metrics documentation talks about MetricsRegistry as being something you create on a per-application basis.  That suggests that it\'s a very heavy object, and even a barebones Solr install probably has at least a dozen requestHandlers defined.  I don\'t know how many are defined in the JVMs used for testing. \\n\\n On my test branch_4x installation, I see 29 handlers between QUERYHANDLER and UPDATEHANDLER in the stats visible in the gui, and that\'s just on one core.  I\'ve got 16 cores defined.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13485283\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13485283&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13485283\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13485283_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485283_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/12 23:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-26T23:35:51+0000\'\u003e26\\/Oct\\/12 23:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFull putty log showing actions taken right after checkout of branch_4x.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13485283_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485283_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/12 23:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-26T23:35:51+0000\'\u003e26\\/Oct\\/12 23:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Full putty log showing actions taken right after checkout of branch_4x.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13485432\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13485432&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13485432\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13485432_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485432_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Oct\\/12 13:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-27T13:08:56+0000\'\u003e27\\/Oct\\/12 13:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eEek, yes, I get that as well.  Must have been unlucky on my first test run.\u003c\\/p\u003e\\n\\n\u003cp\u003eLooks like the previous patch is the way to go.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13485432_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485432_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Oct\\/12 13:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-27T13:08:56+0000\'\u003e27\\/Oct\\/12 13:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Eek, yes, I get that as well.  Must have been unlucky on my first test run. \\n\\n Looks like the previous patch is the way to go.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13485613\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13485613&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13485613\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13485613_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485613_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 12:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T12:06:33+0000\'\u003e28\\/Oct\\/12 12:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIn that case could we use something else than the string representation as a scope? (like a randomly-generated string that is unique across RequestHandlerBase instances?)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13485613_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485613_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 12:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T12:06:33+0000\'\u003e28\\/Oct\\/12 12:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    In that case could we use something else than the string representation as a scope? (like a randomly-generated string that is unique across RequestHandlerBase instances?)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13485639\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13485639&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13485639\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13485639_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485639_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 15:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T15:05:01+0000\'\u003e28\\/Oct\\/12 15:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe toString() is sort of a randomly-generated string, really.  It\'s the default Object toString, ie a class name and a memory address.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13485639_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485639_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 15:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T15:05:01+0000\'\u003e28\\/Oct\\/12 15:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The toString() is sort of a randomly-generated string, really.  It\'s the default Object toString, ie a class name and a memory address.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13485641\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13485641&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13485641\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13485641_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485641_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 15:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T15:07:28+0000\'\u003e28\\/Oct\\/12 15:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCan it break if people write custom request handlers that override toString?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13485641_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485641_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 15:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T15:07:28+0000\'\u003e28\\/Oct\\/12 15:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Can it break if people write custom request handlers that override toString?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13485643\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13485643&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13485643\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13485643_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485643_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 15:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T15:11:29+0000\'\u003e28\\/Oct\\/12 15:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI suppose if we had two custom request handlers that both overrode it with the same String it could break.\u003c\\/p\u003e\\n\\n\u003cp\u003eHow about using super.toString() instead of this.toString()?  That way it\'s always the parent Object method that\'s called.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13485643_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485643_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 15:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T15:11:29+0000\'\u003e28\\/Oct\\/12 15:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I suppose if we had two custom request handlers that both overrode it with the same String it could break. \\n\\n How about using super.toString() instead of this.toString()?  That way it\'s always the parent Object method that\'s called.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13485645\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13485645&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13485645\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13485645_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485645_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 15:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T15:24:28+0000\'\u003e28\\/Oct\\/12 15:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAfter reading the documentation of \u003ctt\u003eObject.toString\u003c\\/tt\u003e \u003ca href=\\\"http:\\/\\/docs.oracle.com\\/javase\\/6\\/docs\\/api\\/java\\/lang\\/Object.html#toString(\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/docs.oracle.com\\/javase\\/6\\/docs\\/api\\/java\\/lang\\/Object.html#toString(\u003c\\/a\u003e) it seems to me that it can still break if the hashCode is overriden with an impl that is likely to return the same value for 2 different instances. I know this is very unlikely but on the other hand the bug would be very hard to track... so I think we should rather generate unique strings (unique a static atomic counter for example) to make sure timers and counters are never shared?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13485645_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485645_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 15:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T15:24:28+0000\'\u003e28\\/Oct\\/12 15:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    After reading the documentation of  Object.toString   http:\\/\\/docs.oracle.com\\/javase\\/6\\/docs\\/api\\/java\\/lang\\/Object.html#toString( ) it seems to me that it can still break if the hashCode is overriden with an impl that is likely to return the same value for 2 different instances. I know this is very unlikely but on the other hand the bug would be very hard to track... so I think we should rather generate unique strings (unique a static atomic counter for example) to make sure timers and counters are never shared?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13485708\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13485708&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13485708\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13485708_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485708_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 20:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T20:47:21+0000\'\u003e28\\/Oct\\/12 20:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIn this patch, the scope name is generated from a static AtomicLong (which is basically what Shawn suggested a few days ago before I tried to be clever \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eAll tests pass\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13485708_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13485708_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/12 20:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-28T20:47:21+0000\'\u003e28\\/Oct\\/12 20:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    In this patch, the scope name is generated from a static AtomicLong (which is basically what Shawn suggested a few days ago before I tried to be clever  . \\n\\n All tests pass              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13486007\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13486007&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13486007\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13486007_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13486007_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/12 13:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-29T13:28:31+0000\'\u003e29\\/Oct\\/12 13:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e+1\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13486007_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13486007_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/12 13:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-29T13:28:31+0000\'\u003e29\\/Oct\\/12 13:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    +1              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13486272\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13486272&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13486272\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lancenorskog\\\" id=\\\"commentauthor_13486272_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lancenorskog\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lancenorskog\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Lance Norskog\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13486272_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/12 19:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-29T19:32:15+0000\'\u003e29\\/Oct\\/12 19:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe 5th percentile is really useful. There is always a maximum query time of 30s just because of a garbage collection failure, and people look at that number and freak out. For query times, the 5th percentile shows what is repeatedly \\\"too slow\\\". \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lancenorskog\\\" id=\\\"commentauthor_13486272_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lancenorskog\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lancenorskog\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Lance Norskog\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13486272_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/12 19:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-29T19:32:15+0000\'\u003e29\\/Oct\\/12 19:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The 5th percentile is really useful. There is always a maximum query time of 30s just because of a garbage collection failure, and people look at that number and freak out. For query times, the 5th percentile shows what is repeatedly \\\"too slow\\\".               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13486280\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13486280&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13486280\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13486280_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13486280_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/12 19:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-29T19:37:44+0000\'\u003e29\\/Oct\\/12 19:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Lance, in this case, that\'s represented by the 95th percentile - lower numbers mean faster query times.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll commit this later this evening if no-one objects.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13486280_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13486280_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/12 19:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-29T19:37:44+0000\'\u003e29\\/Oct\\/12 19:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Lance, in this case, that\'s represented by the 95th percentile - lower numbers mean faster query times. \\n\\n I\'ll commit this later this evening if no-one objects.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13486423\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13486423&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13486423\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13486423_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13486423_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/12 22:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-29T22:14:54+0000\'\u003e29\\/Oct\\/12 22:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted to trunk, r1403555.  I\'ll let it sit here for a bit before back-porting.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13486423_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13486423_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/12 22:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-10-29T22:14:54+0000\'\u003e29\\/Oct\\/12 22:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed to trunk, r1403555.  I\'ll let it sit here for a bit before back-porting.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13493476\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13493476&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13493476\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13493476_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13493476_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Nov\\/12 20:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-08T20:49:58+0000\'\u003e08\\/Nov\\/12 20:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNow that metrics is in trunk, there are a zillion potential uses for it for improving visibility into Solr performance.  Would it be better to have one big Jira for adding these (or for depending on additional issues) or would it be better to just go ahead and create an individual issue each time I think of one?  At this moment, I only have one candidate, but I\'m sure I\'ll think of more later.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13493476_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13493476_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Nov\\/12 20:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-08T20:49:58+0000\'\u003e08\\/Nov\\/12 20:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Now that metrics is in trunk, there are a zillion potential uses for it for improving visibility into Solr performance.  Would it be better to have one big Jira for adding these (or for depending on additional issues) or would it be better to just go ahead and create an individual issue each time I think of one?  At this moment, I only have one candidate, but I\'m sure I\'ll think of more later.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13493574\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13493574&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13493574\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13493574_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13493574_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Nov\\/12 22:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-08T22:37:48+0000\'\u003e08\\/Nov\\/12 22:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Shawn, I personally prefer small issues. They make it easier to get stuff committed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13493574_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13493574_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Nov\\/12 22:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-08T22:37:48+0000\'\u003e08\\/Nov\\/12 22:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Shawn, I personally prefer small issues. They make it easier to get stuff committed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13503891\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13503891&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13503891\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13503891_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13503891_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/12 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-26T16:50:03+0000\'\u003e26\\/Nov\\/12 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe r1413047 commit caused a minor hiccup for this patch against branch_4x.  Attached updated patch.  Double-checked that it works against a clean branch_4x checkout and that all solr tests pass.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13503891_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13503891_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/12 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-26T16:50:03+0000\'\u003e26\\/Nov\\/12 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The r1413047 commit caused a minor hiccup for this patch against branch_4x.  Attached updated patch.  Double-checked that it works against a clean branch_4x checkout and that all solr tests pass.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13504019\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13504019&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13504019\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13504019_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13504019_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/12 19:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-26T19:37:06+0000\'\u003e26\\/Nov\\/12 19:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted to branch 4x, r1413797\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for prodding, Shawn!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13504019_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13504019_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/12 19:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-26T19:37:06+0000\'\u003e26\\/Nov\\/12 19:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed to branch 4x, r1413797 \\n\\n Thanks for prodding, Shawn!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13504138\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13504138&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13504138\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13504138_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13504138_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/12 21:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-26T21:46:30+0000\'\u003e26\\/Nov\\/12 21:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;branch_4x commit&#93;\u003c\\/span\u003e Alan Woodward\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1413797\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1413797\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-1972\\\" title=\\\"Need additional query stats in admin interface - median, 95th and 99th percentile\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-1972\\\"\u003e\u003cdel\u003eSOLR-1972\u003c\\/del\u003e\u003c\\/a\u003e: Add extra query stats to RequestHandler\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13504138_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13504138_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/12 21:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-26T21:46:30+0000\'\u003e26\\/Nov\\/12 21:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;branch_4x commit&#93;  Alan Woodward \\n http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1413797  \\n\\n   SOLR-1972  : Add extra query stats to RequestHandler \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13511106\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13511106&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13511106\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_13511106_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13511106_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/12 04:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-06T04:43:04+0000\'\u003e06\\/Dec\\/12 04:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHey guys, any reason this is not on 5x? That\'s going to make it difficult in the future...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_13511106_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13511106_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/12 04:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-06T04:43:04+0000\'\u003e06\\/Dec\\/12 04:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hey guys, any reason this is not on 5x? That\'s going to make it difficult in the future...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13511149\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13511149&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13511149\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13511149_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13511149_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/12 06:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-06T06:43:02+0000\'\u003e06\\/Dec\\/12 06:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eHey guys, any reason this is not on 5x? That\'s going to make it difficult in the future...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIt looks like r1403555 added this to trunk on 2012\\/10\\/29.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13511149_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13511149_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/12 06:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-06T06:43:02+0000\'\u003e06\\/Dec\\/12 06:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Hey guys, any reason this is not on 5x? That\'s going to make it difficult in the future...  \\n\\n It looks like r1403555 added this to trunk on 2012\\/10\\/29.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13511261\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13511261&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13511261\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13511261_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13511261_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/12 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-06T09:12:27+0000\'\u003e06\\/Dec\\/12 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mark, I\'ve marked this as fixed for 5.0 as well - was it just the tags that made you think it was only on 4x or is it giving you trouble merging?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13511261_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13511261_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/12 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-06T09:12:27+0000\'\u003e06\\/Dec\\/12 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mark, I\'ve marked this as fixed for 5.0 as well - was it just the tags that made you think it was only on 4x or is it giving you trouble merging?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13511405\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13511405&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13511405\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_13511405_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13511405_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/12 14:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-06T14:19:30+0000\'\u003e06\\/Dec\\/12 14:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYeah, I had a merge conflict in changes and didn\'t see the entry in 5x changes. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_13511405_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13511405_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/12 14:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-06T14:19:30+0000\'\u003e06\\/Dec\\/12 14:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yeah, I had a merge conflict in changes and didn\'t see the entry in 5x changes.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539526\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539526&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539526\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13539526_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539526_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 12:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T12:46:44+0000\'\u003e26\\/Dec\\/12 12:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Uwe Schindler - 26\\/Dec\\/12 12:50\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis commit causes a huge memory leak in Solr: The whole heap (60% while running tests) is filled with (interned) Strings, ConcurrentHashMap.Entry, and lots of class instances from the com.yammer.metrics package. This causes the the recent permgen issues in running Solr tests.\u003c\\/p\u003e\\n\\n\u003cp\u003eWe should revert this and investigate how to remove the com.yammer.metrics package dependency (or make the stats cleaner). To me it looks like every query to solr creates a new entry in those huge maps, causing them to grow and grow and grow... There is also no cleanup that shuts down the MBean servers holding all those references on core shutdown.\u003c\\/p\u003e\\n\\n\u003cp\u003eSee: \u003ca href=\\\"http:\\/\\/lucene.472066.n3.nabble.com\\/JENKINS-Lucene-Solr-trunk-Linux-32bit-jdk1-6-0-37-Build-3421-Failure-td4029050.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/lucene.472066.n3.nabble.com\\/JENKINS-Lucene-Solr-trunk-Linux-32bit-jdk1-6-0-37-Build-3421-Failure-td4029050.html\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13539526_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539526_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 12:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T12:46:44+0000\'\u003e26\\/Dec\\/12 12:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Uwe Schindler - 26\\/Dec\\/12 12:50\\\"\u003eedited\u003c\\/span\u003e                   This commit causes a huge memory leak in Solr: The whole heap (60% while running tests) is filled with (interned) Strings, ConcurrentHashMap.Entry, and lots of class instances from the com.yammer.metrics package. This causes the the recent permgen issues in running Solr tests. \\n\\n We should revert this and investigate how to remove the com.yammer.metrics package dependency (or make the stats cleaner). To me it looks like every query to solr creates a new entry in those huge maps, causing them to grow and grow and grow... There is also no cleanup that shuts down the MBean servers holding all those references on core shutdown. \\n\\n See:  http:\\/\\/lucene.472066.n3.nabble.com\\/JENKINS-Lucene-Solr-trunk-Linux-32bit-jdk1-6-0-37-Build-3421-Failure-td4029050.html               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539544\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539544&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539544\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539544_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539544_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 14:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T14:27:03+0000\'\u003e26\\/Dec\\/12 14:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis is really useful to me, I\'m very sad to learn it\'s causing problems.  I haven\'t noticed anything in my own running of branch_4x, which runs for days at a time.  I\'m attempting to get some heap dumps so I can compare them.  Based on what I know from my own experience, I don\'t think this is actually a leak, but even a minimal test JVM ends up with a lot of request handlers, each of which has these additional objects.  As for seeing what looks like a leak with each query, after 1024 queries, the growth in non-garbage objects should stop, because it throws away an entry to make room for the new one.\u003c\\/p\u003e\\n\\n\u003cp\u003eI wonder if there might be an easy way to make these new statistics optional in the request handler, so they do not cause memory problems with minimal test configs.  Although it\'s really cool to be able to see detailed query statistics on the SolrInfoMBeanHandler, it\'s unnecessary.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf it does get removed, I guess I\'ll have to go back to the previous version of the patch that only has additional statistics on qtime.  I depend on these statistics - the average values otherwise available are nearly useless.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will attempt a patch.  No guarantees about success!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539544_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539544_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 14:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T14:27:03+0000\'\u003e26\\/Dec\\/12 14:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This is really useful to me, I\'m very sad to learn it\'s causing problems.  I haven\'t noticed anything in my own running of branch_4x, which runs for days at a time.  I\'m attempting to get some heap dumps so I can compare them.  Based on what I know from my own experience, I don\'t think this is actually a leak, but even a minimal test JVM ends up with a lot of request handlers, each of which has these additional objects.  As for seeing what looks like a leak with each query, after 1024 queries, the growth in non-garbage objects should stop, because it throws away an entry to make room for the new one. \\n\\n I wonder if there might be an easy way to make these new statistics optional in the request handler, so they do not cause memory problems with minimal test configs.  Although it\'s really cool to be able to see detailed query statistics on the SolrInfoMBeanHandler, it\'s unnecessary. \\n\\n If it does get removed, I guess I\'ll have to go back to the previous version of the patch that only has additional statistics on qtime.  I depend on these statistics - the average values otherwise available are nearly useless. \\n\\n I will attempt a patch.  No guarantees about success!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539546\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539546&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539546\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13539546_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539546_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 14:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T14:31:14+0000\'\u003e26\\/Dec\\/12 14:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eThis commit causes a huge memory leak in Solr\u003cbr\\/\u003e\\n...\u003cbr\\/\u003e\\nWe should revert this and investigate how to remove the com.yammer.metrics package dependency (or make the stats cleaner). To me it looks like every query to solr creates a new entry in those huge maps, causing them to grow and grow and grow...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1\u003c\\/p\u003e\\n\\n\u003cp\u003eMaybe the stats have to be implemented by hand or something. I don\'t understand why huge maps or string interning is necessary here.\u003c\\/p\u003e\\n\\n\u003cp\u003eLets back out the change and implement it in a non-leaky way.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13539546_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539546_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 14:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T14:31:14+0000\'\u003e26\\/Dec\\/12 14:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n This commit causes a huge memory leak in Solr \\n... \\nWe should revert this and investigate how to remove the com.yammer.metrics package dependency (or make the stats cleaner). To me it looks like every query to solr creates a new entry in those huge maps, causing them to grow and grow and grow...  \\n\\n +1 \\n\\n Maybe the stats have to be implemented by hand or something. I don\'t understand why huge maps or string interning is necessary here. \\n\\n Lets back out the change and implement it in a non-leaky way.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539552\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539552&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539552\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13539552_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539552_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 15:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T15:04:18+0000\'\u003e26\\/Dec\\/12 15:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Uwe Schindler - 26\\/Dec\\/12 15:14\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eAs for seeing what looks like a leak with each query, after 1024 queries, the growth in non-garbage objects should stop, because it throws away an entry to make room for the new one.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThat might be correct, the problem here is a leak, that might also affect people reloading Solr in their App-Server. The problem is that somehow on CoreShutdown the MBeans are not destroyed. Maybe this is fine how it is implemented, but when the Solr core shuts down, all statistics data have to be removed and nulled out or whatever.\u003c\\/p\u003e\\n\\n\u003cp\u003eI would revert this patch for now, until there is a better solution. Once you have a new patch, that does not leak those objects on core shutdowns.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe horrible thing is that all those huge maps contains stupid strings, all starting with some solr class name (a RequestHandler), followed by an id and various other information. There are (in the dump analyzed with visualvm) millions of String looking like that (OQL executed on heap dump):\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-sql\\\"\u003e\u003cspan class=\\\"code-keyword\\\"\u003eselect\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003ecount\u003c\\/span\u003e(\u003cspan class=\\\"code-keyword\\\"\u003eheap\u003c\\/span\u003e.objects(\u003cspan class=\\\"code-quote\\\"\u003e\\\"java.lang.\u003cspan class=\\\"code-keyword\\\"\u003eString\u003c\\/span\u003e\\\"\u003c\\/span\u003e), \u003cspan class=\\\"code-quote\\\"\u003e\'it.toString().startsWith(\u003cspan class=\\\"code-quote\\\"\u003e\\\"org.apache.solr.\u003cspan class=\\\"code-keyword\\\"\u003ehandler\u003c\\/span\u003e\\\"\u003c\\/span\u003e)\'\u003c\\/span\u003e)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003ereturns: 305064 (to just show some of the string instances hanging around)\u003c\\/p\u003e\\n\\n\u003cp\u003eThis looks like a huge waste!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13539552_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539552_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 15:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T15:04:18+0000\'\u003e26\\/Dec\\/12 15:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Uwe Schindler - 26\\/Dec\\/12 15:14\\\"\u003eedited\u003c\\/span\u003e                    As for seeing what looks like a leak with each query, after 1024 queries, the growth in non-garbage objects should stop, because it throws away an entry to make room for the new one.  \\n\\n That might be correct, the problem here is a leak, that might also affect people reloading Solr in their App-Server. The problem is that somehow on CoreShutdown the MBeans are not destroyed. Maybe this is fine how it is implemented, but when the Solr core shuts down, all statistics data have to be removed and nulled out or whatever. \\n\\n I would revert this patch for now, until there is a better solution. Once you have a new patch, that does not leak those objects on core shutdowns. \\n\\n The horrible thing is that all those huge maps contains stupid strings, all starting with some solr class name (a RequestHandler), followed by an id and various other information. There are (in the dump analyzed with visualvm) millions of String looking like that (OQL executed on heap dump): \\n\\n  \\n  select   count ( heap .objects( \\\"java.lang. String \\\" ),  \'it.toString().startsWith( \\\"org.apache.solr. handler \\\" )\' )\\n \\n  \\n\\n returns: 305064 (to just show some of the string instances hanging around) \\n\\n This looks like a huge waste!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539553\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539553&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539553\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_13539553_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539553_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 15:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T15:05:50+0000\'\u003e26\\/Dec\\/12 15:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI would revert this patch for now\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_13539553_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539553_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 15:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T15:05:50+0000\'\u003e26\\/Dec\\/12 15:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I would revert this patch for now  \\n\\n +1              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539554\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539554&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539554\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13539554_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539554_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 15:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T15:09:42+0000\'\u003e26\\/Dec\\/12 15:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI wonder if the permgen leak is related to the thread leaks caused by this metrics package (see SolrIgnoredThreadsFilter.class, it ignores threads leakd by the metrics package).\u003c\\/p\u003e\\n\\n\u003cp\u003eIn general we should try to prune this list and keep it minimal... at the moment i\'m pretty suspicious of this third party library though: leaking threads, interning strings, etc.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13539554_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539554_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 15:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T15:09:42+0000\'\u003e26\\/Dec\\/12 15:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I wonder if the permgen leak is related to the thread leaks caused by this metrics package (see SolrIgnoredThreadsFilter.class, it ignores threads leakd by the metrics package). \\n\\n In general we should try to prune this list and keep it minimal... at the moment i\'m pretty suspicious of this third party library though: leaking threads, interning strings, etc.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539558\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539558&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539558\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13539558_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539558_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 15:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T15:18:20+0000\'\u003e26\\/Dec\\/12 15:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\" class=\\\"user-hover\\\" rel=\\\"romseygeek\\\"\u003eAlan Woodward\u003c\\/a\u003e shood revert, if he is not available for the next days, I will do it. OK? (I dont want to be again the bad guy reverting other\'s commits)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13539558_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539558_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 15:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T15:18:20+0000\'\u003e26\\/Dec\\/12 15:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Alan Woodward  shood revert, if he is not available for the next days, I will do it. OK? (I dont want to be again the bad guy reverting other\'s commits)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539573\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539573&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539573\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13539573_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539573_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 16:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T16:02:22+0000\'\u003e26\\/Dec\\/12 16:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eA possible patch to the leak (I cannot run solr tests \u003cb\u003eAT ALL\u003c\\/b\u003e on my machine, because it doesnt like my network configuration, sorry, someone else must test).\u003c\\/p\u003e\\n\\n\u003cp\u003eThe root cause here is Metrics.newXXX. we should not use this, it enrolls entries into a global static MetricsRegistry. So its better to make a throwaway one.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think we should still just revert this issue for now. Just explaining where the leak comes from.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13539573_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539573_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 16:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T16:02:22+0000\'\u003e26\\/Dec\\/12 16:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    A possible patch to the leak (I cannot run solr tests  AT ALL  on my machine, because it doesnt like my network configuration, sorry, someone else must test). \\n\\n The root cause here is Metrics.newXXX. we should not use this, it enrolls entries into a global static MetricsRegistry. So its better to make a throwaway one. \\n\\n I think we should still just revert this issue for now. Just explaining where the leak comes from.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539575\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539575&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539575\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539575_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539575_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 16:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T16:09:58+0000\'\u003e26\\/Dec\\/12 16:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRobert, Alan did try creating a registry for each handler. It caused OOM errors when running Solr tests.  See comments on 2012\\/10\\/26.\u003c\\/p\u003e\\n\\n\u003cp\u003ePerhaps we could create a single static registry object that gets used by every handler to create the individual objects.  I\'ll use your patch and attempt that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539575_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539575_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 16:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T16:09:58+0000\'\u003e26\\/Dec\\/12 16:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Robert, Alan did try creating a registry for each handler. It caused OOM errors when running Solr tests.  See comments on 2012\\/10\\/26. \\n\\n Perhaps we could create a single static registry object that gets used by every handler to create the individual objects.  I\'ll use your patch and attempt that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539576\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539576&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539576\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13539576_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539576_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 16:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T16:11:52+0000\'\u003e26\\/Dec\\/12 16:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI dont think we should have a single static: its no better than whats happening right now! its the problem!\u003c\\/p\u003e\\n\\n\u003cp\u003eBut for now, again I feel the right solution is to back out the change. there are too many resource leaks here.\u003c\\/p\u003e\\n\\n\u003cp\u003eBesides the permgen leak, this thing leaks threads like a sieve. and this is currently just being ignored.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13539576_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539576_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 16:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T16:11:52+0000\'\u003e26\\/Dec\\/12 16:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I dont think we should have a single static: its no better than whats happening right now! its the problem! \\n\\n But for now, again I feel the right solution is to back out the change. there are too many resource leaks here. \\n\\n Besides the permgen leak, this thing leaks threads like a sieve. and this is currently just being ignored.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539586\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539586&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539586\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13539586_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539586_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T16:32:21+0000\'\u003e26\\/Dec\\/12 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMetricsRegistry \u003cb\u003eis\u003c\\/b\u003e the singleton: With VisualVM you can get the retained size (\\\"Retained size of an object is its shallow size plus the shallow sizes of the objects that are accessible, directly or indirectly, only from this object. In other words, the retained size represents the amount of memory that will be freed by the garbage collector when this object is collected.\\\") -&gt; o holy x-mas! One instance hold references to all metrics ever created. This is the leak, together with the threads spawned in its lifetime.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhenever you reload yur Solr instance you leak more objects (which is \u003cb\u003ethe\u003c\\/b\u003e classic classloader leak).\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13539586_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539586_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T16:32:21+0000\'\u003e26\\/Dec\\/12 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    MetricsRegistry  is  the singleton: With VisualVM you can get the retained size (\\\"Retained size of an object is its shallow size plus the shallow sizes of the objects that are accessible, directly or indirectly, only from this object. In other words, the retained size represents the amount of memory that will be freed by the garbage collector when this object is collected.\\\") -&gt; o holy x-mas! One instance hold references to all metrics ever created. This is the leak, together with the threads spawned in its lifetime. \\n\\n Whenever you reload yur Solr instance you leak more objects (which is  the  classic classloader leak). \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539623\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539623&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539623\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539623_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539623_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 18:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T18:09:18+0000\'\u003e26\\/Dec\\/12 18:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve been trying to find evidence of the leak, and can\'t.  I completely trust that you guys do know what you\'re talking about, so this is probably just my inexperience.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat I did find:\u003c\\/p\u003e\\n\\n\u003cp\u003eBefore any additional patching, looking at jconsole, I have two metrics threads.  Looking at MBeans in jconsole, there are 290 metric scopes under RequestHandlerBase with names from metrics-scope-0 to metrics-scope-289.\u003c\\/p\u003e\\n\\n\u003cp\u003eTaking Robert\'s patch and fixing it to create one static MetricsRegistry, the additional objects under MBeans disappear, and the number of threads named \\\"metric-*\\\" goes from 2 to 1.  Through some additional debugs, I have files containing stacktraces from every time RequestHandlerBase is called, so I know it is still being called 290 times during startup.\u003c\\/p\u003e\\n\\n\u003cp\u003eExamining those stacktraces, I have determined that each of my 16 cores has 18 request handlers in common, with two additional server-wide handlers - CollectionsHandler and CoreAdminHandler - for a total of 290.  I\'m attaching an archive with all the stacktraces and a summary - the third line from each stacktrace, sorted.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf we made the metrics package optional on a per-handler basis, I would drop from 290 scopes to 48 - each of my 16 cores has four search handlers, but I really only need full metrics in three of them.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539623_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539623_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 18:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T18:09:18+0000\'\u003e26\\/Dec\\/12 18:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve been trying to find evidence of the leak, and can\'t.  I completely trust that you guys do know what you\'re talking about, so this is probably just my inexperience. \\n\\n What I did find: \\n\\n Before any additional patching, looking at jconsole, I have two metrics threads.  Looking at MBeans in jconsole, there are 290 metric scopes under RequestHandlerBase with names from metrics-scope-0 to metrics-scope-289. \\n\\n Taking Robert\'s patch and fixing it to create one static MetricsRegistry, the additional objects under MBeans disappear, and the number of threads named \\\"metric-*\\\" goes from 2 to 1.  Through some additional debugs, I have files containing stacktraces from every time RequestHandlerBase is called, so I know it is still being called 290 times during startup. \\n\\n Examining those stacktraces, I have determined that each of my 16 cores has 18 request handlers in common, with two additional server-wide handlers - CollectionsHandler and CoreAdminHandler - for a total of 290.  I\'m attaching an archive with all the stacktraces and a summary - the third line from each stacktrace, sorted. \\n\\n If we made the metrics package optional on a per-handler basis, I would drop from 290 scopes to 48 - each of my 16 cores has four search handlers, but I really only need full metrics in three of them.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539624\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539624&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539624\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539624_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539624_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 18:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T18:10:13+0000\'\u003e26\\/Dec\\/12 18:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eArchive with debug stacktraces and a summary.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539624_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539624_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 18:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T18:10:13+0000\'\u003e26\\/Dec\\/12 18:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Archive with debug stacktraces and a summary.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539628\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539628&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539628\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539628_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539628_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 18:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T18:22:04+0000\'\u003e26\\/Dec\\/12 18:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSome things just clicked and I think I might have figured it out, tell me if I get this wrong.  The metrics objects get created during initialization, but then if you reload a core (or possibly if you reload the entire app in your container) then the old metrics objects are never garbage collected because the registry object holds onto them forever.\u003c\\/p\u003e\\n\\n\u003cp\u003eI do see that the registry has the ability to remove metrics.  To make this possible, RequestHandlerBase would probably need a close() method, and it would need to be properly called when required.  I am assuming this is not a trivial undertaking?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539628_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539628_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 18:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T18:22:04+0000\'\u003e26\\/Dec\\/12 18:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Some things just clicked and I think I might have figured it out, tell me if I get this wrong.  The metrics objects get created during initialization, but then if you reload a core (or possibly if you reload the entire app in your container) then the old metrics objects are never garbage collected because the registry object holds onto them forever. \\n\\n I do see that the registry has the ability to remove metrics.  To make this possible, RequestHandlerBase would probably need a close() method, and it would need to be properly called when required.  I am assuming this is not a trivial undertaking?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539639\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539639&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539639\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539639_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539639_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 19:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T19:11:23+0000\'\u003e26\\/Dec\\/12 19:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAn extension of Robert\'s leak.patch, as a possible starting point for a complete solution to the leak problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch mimics the overall memory efficiency of the current approach by changing to a static registry object instead of an implied global registry.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt also implements the Closeable interface, using the now-accessible registry object.  This part is incomplete, because calls to the close() method would need to be added to anyplace where a request handler object becomes garbage.  I don\'t know where these places might be.\u003c\\/p\u003e\\n\\n\u003cp\u003eAdditional note: If we ever extend the metrics capability to things other than request handlers, we will need to make the static registry object global.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539639_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539639_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Dec\\/12 19:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-26T19:11:23+0000\'\u003e26\\/Dec\\/12 19:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    An extension of Robert\'s leak.patch, as a possible starting point for a complete solution to the leak problem. \\n\\n The patch mimics the overall memory efficiency of the current approach by changing to a static registry object instead of an implied global registry. \\n\\n It also implements the Closeable interface, using the now-accessible registry object.  This part is incomplete, because calls to the close() method would need to be added to anyplace where a request handler object becomes garbage.  I don\'t know where these places might be. \\n\\n Additional note: If we ever extend the metrics capability to things other than request handlers, we will need to make the static registry object global.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539779\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539779&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539779\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lancenorskog\\\" id=\\\"commentauthor_13539779_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lancenorskog\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lancenorskog\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Lance Norskog\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539779_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 00:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T00:56:41+0000\'\u003e27\\/Dec\\/12 00:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe OnlineSummary class in Mahout does the calculations you want. One little class you can steal. No dependencies necessary.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lancenorskog\\\" id=\\\"commentauthor_13539779_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lancenorskog\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lancenorskog\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Lance Norskog\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539779_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 00:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T00:56:41+0000\'\u003e27\\/Dec\\/12 00:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The OnlineSummary class in Mahout does the calculations you want. One little class you can steal. No dependencies necessary.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539825\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539825&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539825\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539825_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539825_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 04:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T04:42:04+0000\'\u003e27\\/Dec\\/12 04:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSince I know we have to revert this to keep the 4.1 release clean, I might as well save everyone some time.  Here is a patch to revert the latest metrics patch as well as every related mention of yammer and metrics that I could find.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s against 4x but applies 100% cleanly to trunk as well.\u003c\\/p\u003e\\n\\n\u003cp\u003eAll Solr tests pass on 4x.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the time that it took for the tests to run, I have realized that changing the fix version to 4.2 may have been premature - probably should have waited until a revert patch was committed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539825_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539825_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 04:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T04:42:04+0000\'\u003e27\\/Dec\\/12 04:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Since I know we have to revert this to keep the 4.1 release clean, I might as well save everyone some time.  Here is a patch to revert the latest metrics patch as well as every related mention of yammer and metrics that I could find. \\n\\n It\'s against 4x but applies 100% cleanly to trunk as well. \\n\\n All Solr tests pass on 4x. \\n\\n In the time that it took for the tests to run, I have realized that changing the fix version to 4.2 may have been premature - probably should have waited until a revert patch was committed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539978\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539978&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539978\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539978_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539978_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 15:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T15:12:29+0000\'\u003e27\\/Dec\\/12 15:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLance, if I am reading OnlineSummarizer right, it only gives you five percentile numbers - 0% (min), 50% (median), 100% (max), and two others that are not explicitly quantified, but I am guessing are 25% and 75%.  The 95% and 99% points are not present, and I would argue strongly that those are the most useful numbers currently available.  Median is important, but 95% and 99% are the numbers that will show problems first.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13539978_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539978_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 15:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T15:12:29+0000\'\u003e27\\/Dec\\/12 15:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Lance, if I am reading OnlineSummarizer right, it only gives you five percentile numbers - 0% (min), 50% (median), 100% (max), and two others that are not explicitly quantified, but I am guessing are 25% and 75%.  The 95% and 99% points are not present, and I would argue strongly that those are the most useful numbers currently available.  Median is important, but 95% and 99% are the numbers that will show problems first.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13539999\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13539999&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13539999\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13539999_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539999_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 15:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T15:50:20+0000\'\u003e27\\/Dec\\/12 15:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;trunk commit&#93;\u003c\\/span\u003e Uwe Schindler\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1426230\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1426230\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eRevert \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-1972\\\" title=\\\"Need additional query stats in admin interface - median, 95th and 99th percentile\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-1972\\\"\u003e\u003cdel\u003eSOLR-1972\u003c\\/del\u003e\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13539999_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13539999_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 15:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T15:50:20+0000\'\u003e27\\/Dec\\/12 15:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;trunk commit&#93;  Uwe Schindler \\n http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1426230  \\n\\n Revert   SOLR-1972                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13540001\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13540001&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13540001\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13540001_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13540001_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 15:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T15:55:17+0000\'\u003e27\\/Dec\\/12 15:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eShawn: I reverted the commits related to this isseue (done by romseygeek) in trunk revision: 1426230, merged\\/reverted 4.x revision: 1426234\u003c\\/p\u003e\\n\\n\u003cp\u003eYou have now a clean start again!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13540001_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13540001_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 15:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T15:55:17+0000\'\u003e27\\/Dec\\/12 15:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Shawn: I reverted the commits related to this isseue (done by romseygeek) in trunk revision: 1426230, merged\\/reverted 4.x revision: 1426234 \\n\\n You have now a clean start again!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13540004\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13540004&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13540004\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13540004_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13540004_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 16:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T16:02:55+0000\'\u003e27\\/Dec\\/12 16:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;branch_4x commit&#93;\u003c\\/span\u003e Uwe Schindler\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1426234\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1426234\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eMerged revision(s) 1426230 from lucene\\/dev\\/trunk:\u003cbr\\/\u003e\\nRevert \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-1972\\\" title=\\\"Need additional query stats in admin interface - median, 95th and 99th percentile\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-1972\\\"\u003e\u003cdel\u003eSOLR-1972\u003c\\/del\u003e\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13540004_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13540004_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 16:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T16:02:55+0000\'\u003e27\\/Dec\\/12 16:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;branch_4x commit&#93;  Uwe Schindler \\n http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1426234  \\n\\n Merged revision(s) 1426230 from lucene\\/dev\\/trunk: \\nRevert   SOLR-1972                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13540200\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13540200&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13540200\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lancenorskog\\\" id=\\\"commentauthor_13540200_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lancenorskog\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lancenorskog\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Lance Norskog\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13540200_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 22:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T22:54:42+0000\'\u003e27\\/Dec\\/12 22:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe 25\\/75 values come from weights, and can be changed to 99\\/95. I have a patch for that but never submitted it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lancenorskog\\\" id=\\\"commentauthor_13540200_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lancenorskog\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lancenorskog\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Lance Norskog\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13540200_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 22:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T22:54:42+0000\'\u003e27\\/Dec\\/12 22:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The 25\\/75 values come from weights, and can be changed to 99\\/95. I have a patch for that but never submitted it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13540211\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13540211&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13540211\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13540211_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13540211_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 23:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T23:20:23+0000\'\u003e27\\/Dec\\/12 23:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLance, I see two other problems with OnlineSummarizer.\u003c\\/p\u003e\\n\\n\u003cp\u003e1) There are only 100 samples.  That\'s apparently enough for 0\\/25\\/50\\/75\\/100 quartiles, but it seems very low for 95\\/99.  I was even worried about the 1024 samples in the metrics library, but apparently it actually works very well.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Solr already includes mahout-math 0.3 as a dependency of carrot2.  OnlineSummarizer was introduced in 0.4, and there are some serious bugs in it as late as 0.6.  Upgrading mahout-math to 0.7 causes clustering (carrot2) tests to fail because it can\'t find a mahout class.  Even the newest version of carrot2 depends specifically on mahout-math 0.3.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have a checkout where I am re-applying the metrics patch and have made RequestHandlerBase implement Closeable, but I have zero knowledge about where the close() method would actually have to be called.  I have been attempting to figure it out, but Solr is a very large and complex codebase, so I will need some help.  I\'m almost always idling in #lucene and #solr as \'elyograg\' if someone wants to give me some live pointers.  I can do the actual work, but I need some help figuring out where handlers are created and destroyed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13540211_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13540211_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/12 23:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-27T23:20:23+0000\'\u003e27\\/Dec\\/12 23:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Lance, I see two other problems with OnlineSummarizer. \\n\\n 1) There are only 100 samples.  That\'s apparently enough for 0\\/25\\/50\\/75\\/100 quartiles, but it seems very low for 95\\/99.  I was even worried about the 1024 samples in the metrics library, but apparently it actually works very well. \\n\\n 2) Solr already includes mahout-math 0.3 as a dependency of carrot2.  OnlineSummarizer was introduced in 0.4, and there are some serious bugs in it as late as 0.6.  Upgrading mahout-math to 0.7 causes clustering (carrot2) tests to fail because it can\'t find a mahout class.  Even the newest version of carrot2 depends specifically on mahout-math 0.3. \\n\\n I have a checkout where I am re-applying the metrics patch and have made RequestHandlerBase implement Closeable, but I have zero knowledge about where the close() method would actually have to be called.  I have been attempting to figure it out, but Solr is a very large and complex codebase, so I will need some help.  I\'m almost always idling in #lucene and #solr as \'elyograg\' if someone wants to give me some live pointers.  I can do the actual work, but I need some help figuring out where handlers are created and destroyed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13540735\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13540735&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13540735\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lancenorskog\\\" id=\\\"commentauthor_13540735_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lancenorskog\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lancenorskog\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Lance Norskog\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13540735_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/12 02:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-29T02:47:23+0000\'\u003e29\\/Dec\\/12 02:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e2) Solr already includes mahout-math 0.3 as a dependency of carrot2. \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI did not mean to suggest using the Mahout libraries. I would just copy the class source code and change the weights. It has no other dependencies inside the Mahout project.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lancenorskog\\\" id=\\\"commentauthor_13540735_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lancenorskog\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lancenorskog\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Lance Norskog\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13540735_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/12 02:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-29T02:47:23+0000\'\u003e29\\/Dec\\/12 02:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     2) Solr already includes mahout-math 0.3 as a dependency of carrot2.   \\n I did not mean to suggest using the Mahout libraries. I would just copy the class source code and change the weights. It has no other dependencies inside the Mahout project.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541317\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541317&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541317\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541317_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541317_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/12 08:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-31T08:20:20+0000\'\u003e31\\/Dec\\/12 08:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSorry, have been away from the internet for the past week.  Thanks for reverting, Uwe!  I\'ll try and catch up with the thread.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541317_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541317_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/12 08:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-31T08:20:20+0000\'\u003e31\\/Dec\\/12 08:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Sorry, have been away from the internet for the past week.  Thanks for reverting, Uwe!  I\'ll try and catch up with the thread.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541396\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541396&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541396\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541396_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541396_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/12 16:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-31T16:07:03+0000\'\u003e31\\/Dec\\/12 16:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;  Alan did try creating a registry for each handler. It caused OOM errors when running Solr tests. See comments on 2012\\/10\\/26.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhich, in retrospect, ought to have clued me in that something was wrong here...\u003c\\/p\u003e\\n\\n\u003cp\u003eI think this is salvageable by having a MetricsRegistry per core, rather than per handler.  This then allows the registry to be shut down\\/nulled out on Core shutdown.  I\'ll try and work up a patch later today.\u003c\\/p\u003e\\n\\n\u003cp\u003eFWIW, the latest version of Metrics removes the global registry entirely, presumably to stop idiots like me shooting themselves in the foot in this fashion.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541396_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541396_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/12 16:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-31T16:07:03+0000\'\u003e31\\/Dec\\/12 16:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;  Alan did try creating a registry for each handler. It caused OOM errors when running Solr tests. See comments on 2012\\/10\\/26. \\n\\n Which, in retrospect, ought to have clued me in that something was wrong here... \\n\\n I think this is salvageable by having a MetricsRegistry per core, rather than per handler.  This then allows the registry to be shut down\\/nulled out on Core shutdown.  I\'ll try and work up a patch later today. \\n\\n FWIW, the latest version of Metrics removes the global registry entirely, presumably to stop idiots like me shooting themselves in the foot in this fashion.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541453\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541453&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541453\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13541453_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541453_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/12 18:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-31T18:49:54+0000\'\u003e31\\/Dec\\/12 18:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAlan, my latest plan still utilized the global registry, though it did it explicitly, so that individual metric objects were removed by a close() method on RequestHandlerBase.  That would have required many changes - finding every place that a handler might be deleted or replaced.  That likely would require significant refactoring rather than just a few code edits.  I was prepared to do it, if someone could light the path.\u003c\\/p\u003e\\n\\n\u003cp\u003eAn explicit registry per core is an awesome idea, if it can be implemented without similar pain to what I\'ve just described.  Looking at RequestHandlerBase, I don\'t see any direct way to access the containing core object.  Experimentation shows that adding a constructor with a SolrCore argument is not the right approach because it would require \u003cb\u003ea lot\u003c\\/b\u003e of changes that are also likely to break custom user code.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13541453_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541453_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/12 18:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-12-31T18:49:54+0000\'\u003e31\\/Dec\\/12 18:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Alan, my latest plan still utilized the global registry, though it did it explicitly, so that individual metric objects were removed by a close() method on RequestHandlerBase.  That would have required many changes - finding every place that a handler might be deleted or replaced.  That likely would require significant refactoring rather than just a few code edits.  I was prepared to do it, if someone could light the path. \\n\\n An explicit registry per core is an awesome idea, if it can be implemented without similar pain to what I\'ve just described.  Looking at RequestHandlerBase, I don\'t see any direct way to access the containing core object.  Experimentation shows that adding a constructor with a SolrCore argument is not the right approach because it would require  a lot  of changes that are also likely to break custom user code.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541647\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541647&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541647\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541647_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541647_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 15:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T15:32:13+0000\'\u003e01\\/Jan\\/13 15:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Alan Woodward - 01\\/Jan\\/13 15:32\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCleaning this up is not looking as easy as I had thought, unfortunately.  The leaky metrics tick threads have been removed in metrics trunk, but that change isn\'t in any released version yet.  I\'ll try doing what Lance suggested, and just copy the relevant classes.  I \u003cb\u003ethink\u003c\\/b\u003e I can then do away with the registry entirely, and just make the Counter and Timer objects final members of RequestHandlerBase.  Then we don\'t get any interned strings or timer threads, but we keep all the nice exponential-decay stats code.\u003c\\/p\u003e\\n\\n\u003cp\u003eMetrics is apache 2.0 licensed, so I think I\'m OK to just copy classes over?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541647_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541647_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 15:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T15:32:13+0000\'\u003e01\\/Jan\\/13 15:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Alan Woodward - 01\\/Jan\\/13 15:32\\\"\u003eedited\u003c\\/span\u003e                   Cleaning this up is not looking as easy as I had thought, unfortunately.  The leaky metrics tick threads have been removed in metrics trunk, but that change isn\'t in any released version yet.  I\'ll try doing what Lance suggested, and just copy the relevant classes.  I  think  I can then do away with the registry entirely, and just make the Counter and Timer objects final members of RequestHandlerBase.  Then we don\'t get any interned strings or timer threads, but we keep all the nice exponential-decay stats code. \\n\\n Metrics is apache 2.0 licensed, so I think I\'m OK to just copy classes over?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541649\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541649&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541649\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13541649_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541649_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 15:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T15:40:33+0000\'\u003e01\\/Jan\\/13 15:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eMetrics is apache 2.0 licensed, so I think I\'m OK to just copy classes over?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYes, just mention this after the copyright header in the source file that the code was forked.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13541649_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541649_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 15:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T15:40:33+0000\'\u003e01\\/Jan\\/13 15:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Metrics is apache 2.0 licensed, so I think I\'m OK to just copy classes over?  \\n\\n Yes, just mention this after the copyright header in the source file that the code was forked.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541903\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541903&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541903\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13541903_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541903_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 19:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T19:40:24+0000\'\u003e01\\/Jan\\/13 19:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 01\\/Jan\\/13 19:51\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eelyograg-closeable.patch - my attempt at fixing problems.\u003c\\/p\u003e\\n\\n\u003cp\u003eExplicitly uses default registry, includes close() method that removes metrics from the default registry.  Sprinkles Closeable around a bit.  Turns out it was easier than expected to find places to close() request handlers &#8211; SolrCore already includes a close() method, and it conveniently contains a place where all request handlers get registered.  I did my best to search in eclipse to make sure I didn\'t miss something.\u003c\\/p\u003e\\n\\n\u003cp\u003eInitially I tried to put \\\"prev.close();\\\" into SolrCore#reload, but that caused test failures.  I was able to determine that only CoreContainer#reload currently calls SolrCore#reload, so I now close the old core there, after it registers the new core.\u003c\\/p\u003e\\n\\n\u003cp\u003eAll tests pass, but I think it would be a good idea to create a test that checks for the thread leak.  I don\'t know if this implementation will solve that problem or not with metrics-core 2.2.0, but I am hopeful.\u003c\\/p\u003e\\n\\n\u003cp\u003eI double-checked my implementation with metrics-core 3.0.0-SNAPSHOT.  It will require some method name tweaks, but otherwise it is compatible.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch leaves the ThreadLeakFilter that Robert indicated was ridiculous.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13541903_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541903_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 19:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T19:40:24+0000\'\u003e01\\/Jan\\/13 19:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 01\\/Jan\\/13 19:51\\\"\u003eedited\u003c\\/span\u003e                   elyograg-closeable.patch - my attempt at fixing problems. \\n\\n Explicitly uses default registry, includes close() method that removes metrics from the default registry.  Sprinkles Closeable around a bit.  Turns out it was easier than expected to find places to close() request handlers &#8211; SolrCore already includes a close() method, and it conveniently contains a place where all request handlers get registered.  I did my best to search in eclipse to make sure I didn\'t miss something. \\n\\n Initially I tried to put \\\"prev.close();\\\" into SolrCore#reload, but that caused test failures.  I was able to determine that only CoreContainer#reload currently calls SolrCore#reload, so I now close the old core there, after it registers the new core. \\n\\n All tests pass, but I think it would be a good idea to create a test that checks for the thread leak.  I don\'t know if this implementation will solve that problem or not with metrics-core 2.2.0, but I am hopeful. \\n\\n I double-checked my implementation with metrics-core 3.0.0-SNAPSHOT.  It will require some method name tweaks, but otherwise it is compatible. \\n\\n This patch leaves the ThreadLeakFilter that Robert indicated was ridiculous.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541905\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541905&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541905\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541905_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541905_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 19:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T19:42:23+0000\'\u003e01\\/Jan\\/13 19:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere\'s a patch that copies the relevant classes (Counter and Timer and their supporting utility classes) from the metrics library into a new solr package.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe Counter and Timer objects in RequestHandlerBase are now set at init time (they could probably be final, actually), and there\'s no concurrenthashmap or registry to use up permgen space.  All tests pass.  There are a bunch of license headers and javadoc comments to add, but I thought I\'d throw this up here first to make sure that people are happy with this approach.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541905_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541905_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 19:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T19:42:23+0000\'\u003e01\\/Jan\\/13 19:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here\'s a patch that copies the relevant classes (Counter and Timer and their supporting utility classes) from the metrics library into a new solr package. \\n\\n The Counter and Timer objects in RequestHandlerBase are now set at init time (they could probably be final, actually), and there\'s no concurrenthashmap or registry to use up permgen space.  All tests pass.  There are a bunch of license headers and javadoc comments to add, but I thought I\'d throw this up here first to make sure that people are happy with this approach.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541906\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541906&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541906\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541906_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541906_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 19:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T19:46:12+0000\'\u003e01\\/Jan\\/13 19:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHah, we\'re duelling patches!\u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541906_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541906_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 19:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T19:46:12+0000\'\u003e01\\/Jan\\/13 19:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hah, we\'re duelling patches! \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541910\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541910&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541910\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13541910_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541910_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 19:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T19:52:49+0000\'\u003e01\\/Jan\\/13 19:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eHah, we\'re duelling patches!\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eMay the best approach win, even if it\'s not mine. \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13541910_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541910_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 19:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T19:52:49+0000\'\u003e01\\/Jan\\/13 19:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Hah, we\'re duelling patches!  \\n\\n May the best approach win, even if it\'s not mine.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541922\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541922&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541922\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13541922_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541922_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 21:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T21:55:44+0000\'\u003e01\\/Jan\\/13 21:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi,\u003cbr\\/\u003e\\nI would prefer the forked metrics package, because it is cleaner and does not use global static registries or timer threads. It may be possible to remove some classes which are not really needed (e.g. there is a wrapper around an AtomicInteger that adds no functionality, just wraps all methods) - we could maybe remove this and use the original class from JDK. This all is just simple statistics and we need only some classes keeping track of requests, which are owned by the RequestHandler.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am not so happy with the metrics dependency at all, because it does too much and uncontrollable.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13541922_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541922_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 21:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T21:55:44+0000\'\u003e01\\/Jan\\/13 21:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, \\nI would prefer the forked metrics package, because it is cleaner and does not use global static registries or timer threads. It may be possible to remove some classes which are not really needed (e.g. there is a wrapper around an AtomicInteger that adds no functionality, just wraps all methods) - we could maybe remove this and use the original class from JDK. This all is just simple statistics and we need only some classes keeping track of requests, which are owned by the RequestHandler. \\n\\n I am not so happy with the metrics dependency at all, because it does too much and uncontrollable.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541929\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541929&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541929\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541929_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541929_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 22:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T22:25:24+0000\'\u003e01\\/Jan\\/13 22:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Uwe.  I\'ll clean up the patch and add the javadocs and licenses.\u003c\\/p\u003e\\n\\n\u003cp\u003eShawn, will you have a chance to try my latest patch?  You\'re acting as a very useful guinea pig for this issue.  \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13541929_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541929_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 22:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T22:25:24+0000\'\u003e01\\/Jan\\/13 22:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Uwe.  I\'ll clean up the patch and add the javadocs and licenses. \\n\\n Shawn, will you have a chance to try my latest patch?  You\'re acting as a very useful guinea pig for this issue.                 \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541934\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541934&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541934\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13541934_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541934_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 22:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T22:36:45+0000\'\u003e01\\/Jan\\/13 22:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 01\\/Jan\\/13 22:40\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBuilding now.  When tests pass and the build finishes, I will give it a test spin.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlthough I think it would be nice to use metrics directly, I also completely understand and agree with Uwe\'s points, so I won\'t object.  This still results in the features I need, and it may even happen in time for 4.1.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13541934_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541934_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jan\\/13 22:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-01T22:36:45+0000\'\u003e01\\/Jan\\/13 22:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 01\\/Jan\\/13 22:40\\\"\u003eedited\u003c\\/span\u003e                   Building now.  When tests pass and the build finishes, I will give it a test spin. \\n\\n Although I think it would be nice to use metrics directly, I also completely understand and agree with Uwe\'s points, so I won\'t object.  This still results in the features I need, and it may even happen in time for 4.1.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13541960\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13541960&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13541960\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13541960_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541960_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/13 01:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-02T01:07:59+0000\'\u003e02\\/Jan\\/13 01:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAlan,\u003c\\/p\u003e\\n\\n\u003cp\u003eOperationally, looks like everything is good with your new patch on branch_4x.  I have a homegrown servlet that utilizes the new stats, and it seems to work perfectly.  I am pounding on one of my search handlers and the stats are updating nicely.\u003c\\/p\u003e\\n\\n\u003cp\u003eAll lucene and solr tests passed.  I presume that the leaks that cropped up before will not be present - but I\'ll let you guys figure that out!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13541960_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13541960_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/13 01:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-02T01:07:59+0000\'\u003e02\\/Jan\\/13 01:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Alan, \\n\\n Operationally, looks like everything is good with your new patch on branch_4x.  I have a homegrown servlet that utilizes the new stats, and it seems to work perfectly.  I am pounding on one of my search handlers and the stats are updating nicely. \\n\\n All lucene and solr tests passed.  I presume that the leaks that cropped up before will not be present - but I\'ll let you guys figure that out!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13542156\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13542156&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13542156\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13542156_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13542156_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/13 15:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-02T15:01:24+0000\'\u003e02\\/Jan\\/13 15:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated patch, removing ThreadLocalRandom in favour of just using java.util.Random; plus added license headers and reformatted to solr standard.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think this is ready to go in\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13542156_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13542156_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/13 15:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-02T15:01:24+0000\'\u003e02\\/Jan\\/13 15:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updated patch, removing ThreadLocalRandom in favour of just using java.util.Random; plus added license headers and reformatted to solr standard. \\n\\n I think this is ready to go in              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13542207\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13542207&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13542207\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_13542207_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13542207_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/13 16:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-02T16:12:39+0000\'\u003e02\\/Jan\\/13 16:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAlan,  I recommend that you report the problems discovered in the Metrics package upstream (i.e. file a github issue), and while you\'re at it give a link back to this JIRA issue.  Hopefully they will be fixed upstream, which is a good thing for open-source in general even if we choose to keep a fork.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_13542207_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13542207_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/13 16:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-02T16:12:39+0000\'\u003e02\\/Jan\\/13 16:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Alan,  I recommend that you report the problems discovered in the Metrics package upstream (i.e. file a github issue), and while you\'re at it give a link back to this JIRA issue.  Hopefully they will be fixed upstream, which is a good thing for open-source in general even if we choose to keep a fork.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13542215\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13542215&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13542215\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13542215_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13542215_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/13 16:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-02T16:24:51+0000\'\u003e02\\/Jan\\/13 16:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi David, this has actually already been fixed upstream, or at least the leaky threads bit has been.  It just hasn\'t been released yet.  I\'ll report the MetricsRegistry lifecycle issues though.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13542215_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13542215_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/13 16:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-02T16:24:51+0000\'\u003e02\\/Jan\\/13 16:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi David, this has actually already been fixed upstream, or at least the leaky threads bit has been.  It just hasn\'t been released yet.  I\'ll report the MetricsRegistry lifecycle issues though.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13542288\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13542288&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13542288\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13542288_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13542288_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/13 18:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-02T18:53:42+0000\'\u003e02\\/Jan\\/13 18:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAlan, updated to your latest patch.  Everything is still working very well.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_13542288_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13542288_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/13 18:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-02T18:53:42+0000\'\u003e02\\/Jan\\/13 18:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Alan, updated to your latest patch.  Everything is still working very well.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13542971\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13542971&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13542971\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13542971_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13542971_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/13 15:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-03T15:09:51+0000\'\u003e03\\/Jan\\/13 15:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve committed the latest patch.  Will leave it a couple of days before resolving to make sure this doesn\'t blow up in an excitingly new and different way.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_13542971_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13542971_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/13 15:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-03T15:09:51+0000\'\u003e03\\/Jan\\/13 15:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve committed the latest patch.  Will leave it a couple of days before resolving to make sure this doesn\'t blow up in an excitingly new and different way.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13544835\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13544835&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13544835\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13544835_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13544835_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/13 20:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-05T20:27:56+0000\'\u003e05\\/Jan\\/13 20:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;branch_4x commit&#93;\u003c\\/span\u003e Alan Woodward\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1428381\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1428381\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-1972\\\" title=\\\"Need additional query stats in admin interface - median, 95th and 99th percentile\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-1972\\\"\u003e\u003cdel\u003eSOLR-1972\u003c\\/del\u003e\u003c\\/a\u003e: Add extra query stats to RequestHandler\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13544835_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13544835_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/13 20:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-05T20:27:56+0000\'\u003e05\\/Jan\\/13 20:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;branch_4x commit&#93;  Alan Woodward \\n http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1428381  \\n\\n   SOLR-1972  : Add extra query stats to RequestHandler              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13544868\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13544868&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13544868\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13544868_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13544868_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/13 20:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-05T20:28:26+0000\'\u003e05\\/Jan\\/13 20:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;trunk commit&#93;\u003c\\/span\u003e Alan Woodward\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1428372\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1428372\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-1972\\\" title=\\\"Need additional query stats in admin interface - median, 95th and 99th percentile\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-1972\\\"\u003e\u003cdel\u003eSOLR-1972\u003c\\/del\u003e\u003c\\/a\u003e: Add extra query stats to RequestHandler\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13544868_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13544868_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/13 20:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-05T20:28:26+0000\'\u003e05\\/Jan\\/13 20:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;trunk commit&#93;  Alan Woodward \\n http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1428372  \\n\\n   SOLR-1972  : Add extra query stats to RequestHandler              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13554394\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13554394&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13554394\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"steve_rowe\\\" id=\\\"commentauthor_13554394_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=steve_rowe\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"steve_rowe\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Steve Rowe\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13554394_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jan\\/13 21:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-15T21:41:37+0000\'\u003e15\\/Jan\\/13 21:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAlan, can this be resolved as fixed now?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"steve_rowe\\\" id=\\\"commentauthor_13554394_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=steve_rowe\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"steve_rowe\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Steve Rowe\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13554394_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jan\\/13 21:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-01-15T21:41:37+0000\'\u003e15\\/Jan\\/13 21:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Alan, can this be resolved as fixed now?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13610504\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-1972?focusedCommentId=13610504&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13610504\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13610504_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13610504_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Mar\\/13 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-03-22T16:13:53+0000\'\u003e22\\/Mar\\/13 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;branch_4x commit&#93;\u003c\\/span\u003e Alan Woodward\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1413797\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1413797\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-1972\\\" title=\\\"Need additional query stats in admin interface - median, 95th and 99th percentile\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-1972\\\"\u003e\u003cdel\u003eSOLR-1972\u003c\\/del\u003e\u003c\\/a\u003e: Add extra query stats to RequestHandler\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"commit-tag-bot\\\" id=\\\"commentauthor_13610504_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=commit-tag-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"commit-tag-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Commit Tag Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13610504_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Mar\\/13 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-03-22T16:13:53+0000\'\u003e22\\/Mar\\/13 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;branch_4x commit&#93;  Alan Woodward \\n http:\\/\\/svn.apache.org\\/viewvc?view=revision&amp;revision=1413797  \\n\\n   SOLR-1972  : Add extra query stats to RequestHandler              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310230";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310230&amp;avatarId=22151\\\" alt=\\\"Solr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\"\u003eSolr\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1516208624348"> 
    <input type="hidden" title="jira.request.server.time" value="401"> 
    <input type="hidden" title="jira.request.id" value="1023x7927295x3"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="3"> 
    <input type="hidden" title="db.reads.time.in.ms" value="48"> 
    <input type="hidden" title="db.conns.time.in.ms" value="56"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 1023x7927295x3
	          REQUEST TIMESTAMP : [17/Jan/2018:17:03:44 +0000]
	               REQUEST TIME : 0.4010
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 3

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=21, elapsedTotal=48858688, elapsedMin=639915, elapsedMax=22819448, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=25, elapsedTotal=56128300, elapsedMin=665234, elapsedMax=22870060, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>