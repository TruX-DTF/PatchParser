<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|0fe3b17388d8597286eb47848d3b3352a22e8fb3|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"1454444b2abb54\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-700"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-700] Derby does not prevent dual boot of database from different classloaders on Linux and Mac OS X - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-700] Derby does not prevent dual boot of database from different classloaders on Linux and Mac OS X - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-700">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-700" href="/jira/browse/DERBY-700" id="key-val" rel="12325539">DERBY-700</a></li>
                </ol>
                <h1 id="summary-val">Derby does not prevent dual boot of database from different classloaders on Linux and Mac OS X</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-700"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-700/DERBY-700.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-700/DERBY-700.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-700/DERBY-700.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-700/DERBY-700.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/critical.svg" title="Critical - Crashes, loss of data, severe memory leak." width="16"> Critical </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.1.3.3 Head of 10.1 branch. Maintenance version bump for sps update ">10.1.3.3</span>, <span title="10.2.2.1 Head of 10.2 branch">10.2.2.1</span>, <span title="10.3.3.1 Head of 10.3 branch">10.3.3.1</span>, <span title="10.4.2.1 Head of 10.4 branch">10.4.2.1</span>, <span title="10.5.3.1 Old head of 10.5 branch">10.5.3.1</span>, <span title="10.6.1.0 Feature release">10.6.1.0</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.1.3.3" title="10.1.3.3 Head of 10.1 branch. Maintenance version bump for sps update ">10.1.3.3</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.3.3.1" title="10.3.3.1 Head of 10.3 branch">10.3.3.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.2.1" title="10.4.2.1 Head of 10.4 branch">10.4.2.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.5.3.1" title="10.5.3.1 Old head of 10.5 branch">10.5.3.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.6.1.0" title="10.6.1.0 Feature release">10.6.1.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Store" title="Store ">Store</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12325539-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value"> 
                    <div id="field-environment" class="twixi-block twixi-block-inverted collapsed "> 
                     <div class="twixi-wrap verbose"> 
                      <a href="#" class="twixi "><span class="icon-default aui-icon aui-icon-small aui-iconfont-expanded"><span>Hide</span></span></a> 
                      <div class="flooded">
                        ava -version
                       <br> java version "1.4.2_08"
                       <br> Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_08-b03)
                       <br> Java HotSpot(TM) Client VM (build 1.4.2_08-b03, mixed mode)
                       <br> 
                       <br> also
                       <br> 
                       <br> java version "1.5.0_19"
                       <br> Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_19-b02-304)
                       <br> Java HotSpot(TM) Client VM (build 1.5.0_19-137, mixed mode, sharing)
                       <br> on Mac OS X 10.5.7. 
                      </div> 
                     </div> 
                     <div class="twixi-wrap concise"> 
                      <a href="#" class="twixi "><span class="icon-default aui-icon aui-icon-small aui-iconfont-collapsed"><span>Show</span></span></a> 
                      <div class="flooded">
                        ava -version java version "1.4.2_08" Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_08-b03) Java HotSpot(TM) Client VM (build 1.4.2_08-b03, mixed mode) also java version "1.5.0_19" Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_19-b02-304) Java HotSpot(TM) Client VM (build 1.5.0_19-137, mixed mode, sharing) on Mac OS X 10.5.7. 
                      </div> 
                     </div> 
                    </div> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310050" class="item"> 
                     <div class="wrap"> 
                      <strong title="Urgency" class="name">Urgency:</strong> 
                      <div id="customfield_12310050-val" class="value type-select" data-fieldtype="select" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        Urgent 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>High Value Fix</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Data corruption</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Derby does not prevent dual boot from two different classloaders on Linux and Mac OS X.</p> 
                  <p>To reproduce run the program DualBootRepro with no derby jars in your classpath. The program assumes derby.jar is in 10.1.2.1/derby.jar, you can change the location by changing the DERBY_LIB_DIR variable.</p> 
                  <p>On Linux the output is:</p> 
                  <p>$java -cp . DualBootRepro<br> Loading derby from <a href="file:10.1.2.1/derby.jar" class="external-link" rel="nofollow">file:10.1.2.1/derby.jar</a><br> 10.1.2.1/derby.jar<br> Booted database in loader java.net.URLClassLoader@8ed465<br> FAIL: Booted database in 2nd loader java.net.URLClassLoader@dc6a77</p> 
                  <p>On Windows I get the expected output.<br> $ java -cp . DualBootRepro<br> Loading derby from <a href="file:10.1.2.1/derby.jar" class="external-link" rel="nofollow">file:10.1.2.1/derby.jar</a><br> 10.1.2.1/derby.jar<br> Booted database in loader java.net.URLClassLoader@1ac04e8<br> PASS: Expected exception for dualboot:Another instance of Derby may have already booted the database D:\marsden\repro\dualboot\mydb.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-700?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-700?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-700?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-700?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12358470" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12358470/derby.log" draggable="true" data-downloadurl="text/x-log:derby.log:https://issues.apache.org/jira/secure/attachment/12358470/derby.log"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12358470/derby.log" title="Latest  29/May/07 20:04 - Kathey Marsden" draggable="true" data-downloadurl="text/x-log:derby.log:https://issues.apache.org/jira/secure/attachment/12358470/derby.log">derby.log</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-05-29T20:04:48.522Z">29/May/07 20:04</time>
                   </dd>
                   <dd class="attachment-size">
                    12 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12359218" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12359218/derby-700_06_07_07_diff.txt" draggable="true" data-downloadurl="text/plain:derby-700_06_07_07_diff.txt:https://issues.apache.org/jira/secure/attachment/12359218/derby-700_06_07_07_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12359218/derby-700_06_07_07_diff.txt" title="Latest  07/Jun/07 23:04 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-700_06_07_07_diff.txt:https://issues.apache.org/jira/secure/attachment/12359218/derby-700_06_07_07_diff.txt">derby-700_06_07_07_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-06-07T23:04:37.376Z">07/Jun/07 23:04</time>
                   </dd>
                   <dd class="attachment-size">
                    76 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12359221" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12359221/derby-700_06_07_07_stat.txt" draggable="true" data-downloadurl="text/plain:derby-700_06_07_07_stat.txt:https://issues.apache.org/jira/secure/attachment/12359221/derby-700_06_07_07_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12359221/derby-700_06_07_07_stat.txt" title="Latest  07/Jun/07 23:05 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-700_06_07_07_stat.txt:https://issues.apache.org/jira/secure/attachment/12359221/derby-700_06_07_07_stat.txt">derby-700_06_07_07_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-06-07T23:05:08.351Z">07/Jun/07 23:05</time>
                   </dd>
                   <dd class="attachment-size">
                    0.9 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12360139" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12360139/derby-700_06_19_2007" draggable="true" data-downloadurl="application/octet-stream:derby-700_06_19_2007:https://issues.apache.org/jira/secure/attachment/12360139/derby-700_06_19_2007"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12360139/derby-700_06_19_2007" title="Latest  19/Jun/07 20:50 - Kathey Marsden" draggable="true" data-downloadurl="application/octet-stream:derby-700_06_19_2007:https://issues.apache.org/jira/secure/attachment/12360139/derby-700_06_19_2007">derby-700_06_19_2007</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-06-19T20:50:20.104Z">19/Jun/07 20:50</time>
                   </dd>
                   <dd class="attachment-size">
                    71 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12358451" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12358451/derby-700_diff.txt" draggable="true" data-downloadurl="text/plain:derby-700_diff.txt:https://issues.apache.org/jira/secure/attachment/12358451/derby-700_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12358451/derby-700_diff.txt" title="Latest  29/May/07 19:16 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-700_diff.txt:https://issues.apache.org/jira/secure/attachment/12358451/derby-700_diff.txt">derby-700_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-05-29T19:16:00.047Z">29/May/07 19:16</time>
                   </dd>
                   <dd class="attachment-size">
                    37 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12357529" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12357529/derby700_singleproperty_v1.diff" draggable="true" data-downloadurl="text/x-patch:derby700_singleproperty_v1.diff:https://issues.apache.org/jira/secure/attachment/12357529/derby700_singleproperty_v1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12357529/derby700_singleproperty_v1.diff" title="Latest  17/May/07 11:54 - Suresh Thalamati" draggable="true" data-downloadurl="text/x-patch:derby700_singleproperty_v1.diff:https://issues.apache.org/jira/secure/attachment/12357529/derby700_singleproperty_v1.diff">derby700_singleproperty_v1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-05-17T11:54:44.314Z">17/May/07 11:54</time>
                   </dd>
                   <dd class="attachment-size">
                    34 kB
                   </dd>
                   <dd class="attachment-author">
                    Suresh Thalamati
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12357530" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12357530/derby700_singleproperty_v1.stat" draggable="true" data-downloadurl="application/octet-stream:derby700_singleproperty_v1.stat:https://issues.apache.org/jira/secure/attachment/12357530/derby700_singleproperty_v1.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12357530/derby700_singleproperty_v1.stat" title="Latest  17/May/07 11:54 - Suresh Thalamati" draggable="true" data-downloadurl="application/octet-stream:derby700_singleproperty_v1.stat:https://issues.apache.org/jira/secure/attachment/12357530/derby700_singleproperty_v1.stat">derby700_singleproperty_v1.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-05-17T11:54:44.400Z">17/May/07 11:54</time>
                   </dd>
                   <dd class="attachment-size">
                    0.7 kB
                   </dd>
                   <dd class="attachment-author">
                    Suresh Thalamati
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12358452" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12358452/derby-700_stat.txt" draggable="true" data-downloadurl="text/plain:derby-700_stat.txt:https://issues.apache.org/jira/secure/attachment/12358452/derby-700_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12358452/derby-700_stat.txt" title="Latest  29/May/07 19:16 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-700_stat.txt:https://issues.apache.org/jira/secure/attachment/12358452/derby-700_stat.txt">derby-700_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-05-29T19:16:42.729Z">29/May/07 19:16</time>
                   </dd>
                   <dd class="attachment-size">
                    0.9 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12337968" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12337968/DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.diff" draggable="true" data-downloadurl="text/x-patch:DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.diff:https://issues.apache.org/jira/secure/attachment/12337968/DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12337968/DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.diff" title="Latest  02/Aug/06 06:31 - V.Narayanan" draggable="true" data-downloadurl="text/x-patch:DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.diff:https://issues.apache.org/jira/secure/attachment/12337968/DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.diff">DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-08-02T06:31:22.000Z">02/Aug/06 06:31</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    V.Narayanan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12337969" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12337969/DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.stat" draggable="true" data-downloadurl="application/octet-stream:DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.stat:https://issues.apache.org/jira/secure/attachment/12337969/DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12337969/DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.stat" title="Latest  02/Aug/06 06:31 - V.Narayanan" draggable="true" data-downloadurl="application/octet-stream:DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.stat:https://issues.apache.org/jira/secure/attachment/12337969/DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.stat">DERBY-700_v1_use_to_run_DualBootrepro_multithreaded.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-08-02T06:31:22.000Z">02/Aug/06 06:31</time>
                   </dd>
                   <dd class="attachment-size">
                    0.3 kB
                   </dd>
                   <dd class="attachment-author">
                    V.Narayanan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12358564" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12358564/derby-700_with_NPE_fix_diff.txt" draggable="true" data-downloadurl="text/plain:derby-700_with_NPE_fix_diff.txt:https://issues.apache.org/jira/secure/attachment/12358564/derby-700_with_NPE_fix_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12358564/derby-700_with_NPE_fix_diff.txt" title="Latest  30/May/07 17:51 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-700_with_NPE_fix_diff.txt:https://issues.apache.org/jira/secure/attachment/12358564/derby-700_with_NPE_fix_diff.txt">derby-700_with_NPE_fix_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-05-30T17:51:20.620Z">30/May/07 17:51</time>
                   </dd>
                   <dd class="attachment-size">
                    38 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12358565" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12358565/derby-700_with_NPE_fix_stat.txt" draggable="true" data-downloadurl="text/plain:derby-700_with_NPE_fix_stat.txt:https://issues.apache.org/jira/secure/attachment/12358565/derby-700_with_NPE_fix_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12358565/derby-700_with_NPE_fix_stat.txt" title="Latest  30/May/07 17:51 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-700_with_NPE_fix_stat.txt:https://issues.apache.org/jira/secure/attachment/12358565/derby-700_with_NPE_fix_stat.txt">derby-700_with_NPE_fix_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-05-30T17:51:44.968Z">30/May/07 17:51</time>
                   </dd>
                   <dd class="attachment-size">
                    1.0 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12337890" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12337890/DERBY-700.diff" draggable="true" data-downloadurl="text/x-patch:DERBY-700.diff:https://issues.apache.org/jira/secure/attachment/12337890/DERBY-700.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12337890/DERBY-700.diff" title="Latest  01/Aug/06 12:45 - V.Narayanan" draggable="true" data-downloadurl="text/x-patch:DERBY-700.diff:https://issues.apache.org/jira/secure/attachment/12337890/DERBY-700.diff">DERBY-700.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-08-01T12:45:42.000Z">01/Aug/06 12:45</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    V.Narayanan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12337891" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12337891/DERBY-700.stat" draggable="true" data-downloadurl="application/octet-stream:DERBY-700.stat:https://issues.apache.org/jira/secure/attachment/12337891/DERBY-700.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12337891/DERBY-700.stat" title="Latest  01/Aug/06 12:45 - V.Narayanan" draggable="true" data-downloadurl="application/octet-stream:DERBY-700.stat:https://issues.apache.org/jira/secure/attachment/12337891/DERBY-700.stat">DERBY-700.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-08-01T12:45:42.000Z">01/Aug/06 12:45</time>
                   </dd>
                   <dd class="attachment-size">
                    0.3 kB
                   </dd>
                   <dd class="attachment-author">
                    V.Narayanan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12415881" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12415881/derby-700-01-aa-catchOverlappingFileLockException.diff" draggable="true" data-downloadurl="application/octet-stream:derby-700-01-aa-catchOverlappingFileLockException.diff:https://issues.apache.org/jira/secure/attachment/12415881/derby-700-01-aa-catchOverlappingFileLockException.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12415881/derby-700-01-aa-catchOverlappingFileLockException.diff" title="Latest  07/Aug/09 19:57 - Rick Hillegas" draggable="true" data-downloadurl="application/octet-stream:derby-700-01-aa-catchOverlappingFileLockException.diff:https://issues.apache.org/jira/secure/attachment/12415881/derby-700-01-aa-catchOverlappingFileLockException.diff">derby-700-01-aa-catchOverlappingFileLockException.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-08-07T19:57:27.850Z">07/Aug/09 19:57</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12416791" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12416791/derby-700-01-ab-catchOverlappingFileLockException.diff" draggable="true" data-downloadurl="application/octet-stream:derby-700-01-ab-catchOverlappingFileLockException.diff:https://issues.apache.org/jira/secure/attachment/12416791/derby-700-01-ab-catchOverlappingFileLockException.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12416791/derby-700-01-ab-catchOverlappingFileLockException.diff" title="Latest  17/Aug/09 18:46 - Rick Hillegas" draggable="true" data-downloadurl="application/octet-stream:derby-700-01-ab-catchOverlappingFileLockException.diff:https://issues.apache.org/jira/secure/attachment/12416791/derby-700-01-ab-catchOverlappingFileLockException.diff">derby-700-01-ab-catchOverlappingFileLockException.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-08-17T18:46:34.083Z">17/Aug/09 18:46</time>
                   </dd>
                   <dd class="attachment-size">
                    16 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12417018" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12417018/derby-700-02-aa-testCleanup.diff" draggable="true" data-downloadurl="application/octet-stream:derby-700-02-aa-testCleanup.diff:https://issues.apache.org/jira/secure/attachment/12417018/derby-700-02-aa-testCleanup.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12417018/derby-700-02-aa-testCleanup.diff" title="Latest  19/Aug/09 13:29 - Rick Hillegas" draggable="true" data-downloadurl="application/octet-stream:derby-700-02-aa-testCleanup.diff:https://issues.apache.org/jira/secure/attachment/12417018/derby-700-02-aa-testCleanup.diff">derby-700-02-aa-testCleanup.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-08-19T13:29:14.599Z">19/Aug/09 13:29</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12337970" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12337970/DualBootRepro_mutltithreaded.tar.bz2" draggable="true" data-downloadurl="application/x-bzip:DualBootRepro_mutltithreaded.tar.bz2:https://issues.apache.org/jira/secure/attachment/12337970/DualBootRepro_mutltithreaded.tar.bz2"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12337970/DualBootRepro_mutltithreaded.tar.bz2" title="Latest  02/Aug/06 06:31 - V.Narayanan" draggable="true" data-downloadurl="application/x-bzip:DualBootRepro_mutltithreaded.tar.bz2:https://issues.apache.org/jira/secure/attachment/12337970/DualBootRepro_mutltithreaded.tar.bz2">DualBootRepro_mutltithreaded.tar.bz2</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-08-02T06:31:22.000Z">02/Aug/06 06:31</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    V.Narayanan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12415769" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12415769/DualBootRepro.java" draggable="true" data-downloadurl="text/plain:DualBootRepro.java:https://issues.apache.org/jira/secure/attachment/12415769/DualBootRepro.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12415769/DualBootRepro.java" title="Latest  06/Aug/09 18:51 - Rick Hillegas" draggable="true" data-downloadurl="text/plain:DualBootRepro.java:https://issues.apache.org/jira/secure/attachment/12415769/DualBootRepro.java">DualBootRepro.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-08-06T18:51:58.192Z">06/Aug/09 18:51</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12320620" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12320620/DualBootRepro.java" draggable="true" data-downloadurl="java/*:DualBootRepro.java:https://issues.apache.org/jira/secure/attachment/12320620/DualBootRepro.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12320620/DualBootRepro.java" title=" 11/Nov/05 06:39 - Kathey Marsden" draggable="true" data-downloadurl="java/*:DualBootRepro.java:https://issues.apache.org/jira/secure/attachment/12320620/DualBootRepro.java">DualBootRepro.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-11-11T06:39:26.000Z">11/Nov/05 06:39</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12322149" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12322149/DualBootRepro2.zip" draggable="true" data-downloadurl="application/zip:DualBootRepro2.zip:https://issues.apache.org/jira/secure/attachment/12322149/DualBootRepro2.zip"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-zip" title="Zip Archive"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12322149/DualBootRepro2.zip" title="Latest  20/Jan/06 07:05 - Kathey Marsden" draggable="true" data-downloadurl="application/zip:DualBootRepro2.zip:https://issues.apache.org/jira/secure/attachment/12322149/DualBootRepro2.zip">DualBootRepro2.zip</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-01-20T07:05:29.000Z">20/Jan/06 07:05</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12421456" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12421456/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12421456/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12421456/releaseNote.html" title="Latest  06/Oct/09 19:55 - Myrna van Lunteren" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12421456/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-10-06T19:55:50.737Z">06/Oct/09 19:55</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Myrna van Lunteren
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12421454" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12421454/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12421454/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12421454/releaseNote.html" title=" 06/Oct/09 19:32 - Kathey Marsden" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12421454/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-10-06T19:32:40.154Z">06/Oct/09 19:32</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12359938" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12359938/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12359938/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12359938/releaseNote.html" title=" 16/Jun/07 17:36 - Rick Hillegas" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12359938/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-06-16T17:36:57.181Z">16/Jun/07 17:36</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12359626" data-issue-id="12325539" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12359626/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12359626/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12359626/releaseNote.html" title=" 13/Jun/07 19:47 - Kathey Marsden" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12359626/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-06-13T19:47:24.856Z">13/Jun/07 19:47</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="depends upon">
                   depends upon
                  </dt> 
                  <dd id="internal-12369362_10001"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-2649: An unsuccessful boot attempt of an booted database can potentially delete files in the temp directory that are in use. "> <a href="/jira/browse/DERBY-2649" data-issue-key="DERBY-2649" class="issue-link link-title">DERBY-2649</a> <span class="link-summary">An unsuccessful boot attempt of an booted database can potentially delete files in the temp directory that are in use. </span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12433427_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-4356: testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:<2> but was:<%>"> <a href="/jira/browse/DERBY-4356" data-issue-key="DERBY-4356" class="issue-link link-title resolution">DERBY-4356</a> <span class="link-summary">testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:&lt;2&gt; but was:&lt;%&gt;</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12463933_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-4646: Implement dual boot protection on CDC Foundation 1.1/phoneME platform for non-Windows platforms."> <a href="/jira/browse/DERBY-4646" data-issue-key="DERBY-4646" class="issue-link link-title resolution">DERBY-4646</a> <span class="link-summary">Implement dual boot protection on CDC Foundation 1.1/phoneME platform for non-Windows platforms.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="view-subtasks" class="module toggle-wrap">
               <div id="view-subtasks_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="subtask-view-options" class="aui-list-section aui-first aui-last">
                     <li class="aui-list-item"><a id="subtasks-show-all" href="/jira/browse/DERBY-700?subTaskView=all#issuetable" class="aui-list-checked aui-checked aui-list-item-link" title="Show All"><span>Show All</span></a></li>
                     <li class="aui-list-item"><a id="subtasks-show-open" href="/jira/browse/DERBY-700?subTaskView=unresolved#issuetable" class="aui-list-checked aui-list-item-link" title="Show Open"><span>Show Open</span></a></li>
                     <li class="aui-list-item"><a id="subtasks-bulk-operation" href="/jira/issue/bulkedit/BulkEdit1!default.jspa?reset=true&amp;searchParent=DERBY-700" class="aui-list-checked aui-list-item-link" title="Bulk operation"><span>Bulk operation</span></a></li>
                     <li class="aui-list-item"><a id="subtasks-open-issue-navigator" href="/jira/issues/?jql=parent%3DDERBY-700" class="aui-list-checked aui-list-item-link" title="Open issue navigator"><span>Open issue navigator</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Sub-Tasks</h2>
               </div>
               <div class="mod-content">
                <div class="mod-content intform subtask-table-container"> 
                 <issuetable-web-component> 
                  <table id="issuetable"> 
                   <tbody>
                    <tr id="issuerow12370624" rel="12370624" data-issuekey="DERBY-2737" class="issuerow"> 
                     <td class="stsequence">
                      <div rel="0" class="subtask-done">
                       1.
                      </div> </td> 
                     <td class="stsummary"><a class="issue-link" data-issue-key="DERBY-2737" href="/jira/browse/DERBY-2737">Change documentation on permissions needed to include read/write for system property derby.storage.jvmInstanceId </a></td> 
                     <td class="issuetype"> <a class="issue-link" data-issue-key="DERBY-2737" href="/jira/browse/DERBY-2737"> <img src="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue"> </a> </td> 
                     <td class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </td> 
                     <td class="assignee"> <span class="tinylink"><a class="user-hover" rel="scotsmatrix" id="assignee_scotsmatrix" href="/jira/secure/ViewProfile.jspa?name=scotsmatrix">Laura Stewart</a></span> </td> 
                    </tr> 
                   </tbody> 
                  </table> 
                 </issuetable-web-component> 
                 <div class="end-of-stable-message"></div> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_rhillegas" rel="rhillegas" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Rick Hillegas&quot;,&quot;emailAddress&quot;:&quot;rhillegas@apache.org&quot;,&quot;username&quot;:&quot;rhillegas&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="rhillegas"></span></span> Rick Hillegas </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_kmarsden" rel="kmarsden" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Kathey Marsden&quot;,&quot;emailAddress&quot;:&quot;kmarsdenderby@sbcglobal.net&quot;,&quot;username&quot;:&quot;kmarsden&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="kmarsden"></span></span> Kathey Marsden </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">2</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">2</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="11/Nov/05 06:36"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2005-11-11T06:36:34+0000">11/Nov/05 06:36</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="02/May/13 02:29"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2013-05-02T02:29:06+0000">02/May/13 02:29</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="27/Aug/09 16:23"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2009-08-27T16:23:24+0000">27/Aug/09 16:23</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-700?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-700?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12357290\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12357290&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12357290\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12357290_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12357290_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Nov\\/05 06:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-11-11T06:39:26+0000\'\u003e11\\/Nov\\/05 06:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDualBootRepro Program to reproduce dual boot from two classloaders in  Linux.\u003c\\/p\u003e\\n\\n\u003cp\u003eChange DERBY_LIB_DIR   to derby directory and run without derby jars in our classpath.\u003cbr\\/\u003e\\njava -cp  .  DualBootRepro\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12357290_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12357290_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Nov\\/05 06:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-11-11T06:39:26+0000\'\u003e11\\/Nov\\/05 06:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    DualBootRepro Program to reproduce dual boot from two classloaders in  Linux. \\n\\n Change DERBY_LIB_DIR   to derby directory and run without derby jars in our classpath. \\njava -cp  .  DualBootRepro              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12357292\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12357292&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12357292\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12357292_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12357292_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Nov\\/05 06:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-11-11T06:51:20+0000\'\u003e11\\/Nov\\/05 06:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSysinfo output.\u003c\\/p\u003e\\n\\n\u003cp\u003ejava -cp .\\/10.1.2.1\\/derby.jar org.apache.derby.tools.sysinfo\u003cbr\\/\u003e\\n------------------ Java Information ------------------\u003cbr\\/\u003e\\nJava Version:    1.4.2_08\u003cbr\\/\u003e\\nJava Vendor:     Sun Microsystems Inc.\u003cbr\\/\u003e\\nJava home:       \\/usr\\/lib\\/SunJava2-1.4.2\\/jre\u003cbr\\/\u003e\\nJava classpath:  .\\/10.1.2.1\\/derby.jar\u003cbr\\/\u003e\\nOS name:         Linux\u003cbr\\/\u003e\\nOS architecture: i386\u003cbr\\/\u003e\\nOS version:      2.6.5-7.201-smp\u003cbr\\/\u003e\\n...\u003cbr\\/\u003e\\njava.specification.name: Java Platform API Specification\u003cbr\\/\u003e\\njava.specification.version: 1.4\u003cbr\\/\u003e\\n--------- Derby Information --------\u003cbr\\/\u003e\\nJRE - JDBC: J2SE 1.4.2 - JDBC 3.0\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;\\/...\\/derby.jar&#93;\u003c\\/span\u003e 10.1.2.1 - (330608)\u003cbr\\/\u003e\\n------------------------------------------------------\u003cbr\\/\u003e\\n----------------- Locale Information -----------------\u003cbr\\/\u003e\\n------------------------------------------------------\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12357292_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12357292_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Nov\\/05 06:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-11-11T06:51:20+0000\'\u003e11\\/Nov\\/05 06:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Sysinfo output. \\n\\n java -cp .\\/10.1.2.1\\/derby.jar org.apache.derby.tools.sysinfo \\n------------------ Java Information ------------------ \\nJava Version:    1.4.2_08 \\nJava Vendor:     Sun Microsystems Inc. \\nJava home:       \\/usr\\/lib\\/SunJava2-1.4.2\\/jre \\nJava classpath:  .\\/10.1.2.1\\/derby.jar \\nOS name:         Linux \\nOS architecture: i386 \\nOS version:      2.6.5-7.201-smp \\n... \\njava.specification.name: Java Platform API Specification \\njava.specification.version: 1.4 \\n--------- Derby Information -------- \\nJRE - JDBC: J2SE 1.4.2 - JDBC 3.0 \\n &#91;\\/...\\/derby.jar&#93;  10.1.2.1 - (330608) \\n------------------------------------------------------ \\n----------------- Locale Information ----------------- \\n------------------------------------------------------ \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12357312\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12357312&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12357312\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12357312_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12357312_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Nov\\/05 09:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-11-11T09:40:47+0000\'\u003e11\\/Nov\\/05 09:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMy guess is , currently Derby seems to catch the IO exception and turn it into a readonly db , when file lock  fails with OverlappingFileLockException. By  correctly catching java.nio.channels.OverlappingFileLockException,  we might be able to prevent multi boots with in the same jvm using different class loaders. \u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12357312_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12357312_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Nov\\/05 09:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-11-11T09:40:47+0000\'\u003e11\\/Nov\\/05 09:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    My guess is , currently Derby seems to catch the IO exception and turn it into a readonly db , when file lock  fails with OverlappingFileLockException. By  correctly catching java.nio.channels.OverlappingFileLockException,  we might be able to prevent multi boots with in the same jvm using different class loaders.  \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12363295\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12363295&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12363295\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12363295_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12363295_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jan\\/06 05:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-01-20T05:23:55+0000\'\u003e20\\/Jan\\/06 05:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Kathy , \u003c\\/p\u003e\\n\\n\u003cp\u003eI  am attempting to fix this bug, just realized I may  not  be able to add the  repro in jira into the functional tests., repro is expecting   derby classes should not be in there in the   classpath,  I was wondering by chance did u write a custom class loader test for Derby  ?   I could not find one in the functional tests. \u003c\\/p\u003e\\n\\n\u003cp\u003eThanks\u003cbr\\/\u003e\\n-suresh\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12363295_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12363295_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jan\\/06 05:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-01-20T05:23:55+0000\'\u003e20\\/Jan\\/06 05:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Kathy ,  \\n\\n I  am attempting to fix this bug, just realized I may  not  be able to add the  repro in jira into the functional tests., repro is expecting   derby classes should not be in there in the   classpath,  I was wondering by chance did u write a custom class loader test for Derby  ?   I could not find one in the functional tests.  \\n\\n Thanks \\n-suresh \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12363313\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12363313&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12363313\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12363313_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12363313_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jan\\/06 07:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-01-20T07:05:29+0000\'\u003e20\\/Jan\\/06 07:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is an updated repro with a classloader that  should not require the classpath remove other derby jars\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12363313_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12363313_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jan\\/06 07:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-01-20T07:05:29+0000\'\u003e20\\/Jan\\/06 07:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is an updated repro with a classloader that  should not require the classpath remove other derby jars              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12363492\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12363492&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12363492\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12363492_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12363492_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/06 11:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-01-21T11:07:28+0000\'\u003e21\\/Jan\\/06 11:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAfter doing bit of testing realized  checking for  OverlappingFileLockException does not work.  This exception is reliable only   if   the same file channel instance  is used.,  With multiple class loaders  \u003cbr\\/\u003e\\nI don\'t know  how it is possible to have a sigle  file channel object.   \u003c\\/p\u003e\\n\\n\u003cp\u003eOn Linux  ,  one can acquire the lock on the same region  using  diferent file channels on the same file. \u003c\\/p\u003e\\n\\n\u003cp\u003eRealated info from the java docs:\u003cbr\\/\u003e\\njava.nio.channel.FileLock \u003cbr\\/\u003e\\n,On some systems, closing a channel releases all locks held by the Java virtual machine on the underlying file regardless of whether the locks were acquired via that channel or via another channel open on the same file. It is strongly recommended that, within a program, a unique channel be used to acquire all locks on any given file.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12363492_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12363492_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/06 11:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-01-21T11:07:28+0000\'\u003e21\\/Jan\\/06 11:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    After doing bit of testing realized  checking for  OverlappingFileLockException does not work.  This exception is reliable only   if   the same file channel instance  is used.,  With multiple class loaders   \\nI don\'t know  how it is possible to have a sigle  file channel object.    \\n\\n On Linux  ,  one can acquire the lock on the same region  using  diferent file channels on the same file.  \\n\\n Realated info from the java docs: \\njava.nio.channel.FileLock  \\n,On some systems, closing a channel releases all locks held by the Java virtual machine on the underlying file regardless of whether the locks were acquired via that channel or via another channel open on the same file. It is strongly recommended that, within a program, a unique channel be used to acquire all locks on any given file. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12363520\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12363520&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12363520\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12363520_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12363520_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/06 02:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-01-22T02:18:21+0000\'\u003e22\\/Jan\\/06 02:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDatabase corruption can result anytime 2 different systems boot the same Derby database.  DB corruption can happen\u003cbr\\/\u003e\\neven if the booting systems perform no updates if the there is recovery to do during boot, in that case 2 separate recovery systems will be opertating in an uncoordinated manner on the same log file, and applying uncoordinated changes to the data files.  Without multiple class loaders or  with multiple JVM\'s derby uses file locking to prevent this.\u003cbr\\/\u003e\\nIt looks like file locking from the same jvm and 2 class loaders does not work, does anyone have any idea how to \u003cbr\\/\u003e\\nimplement a locking scheme that will work from the same jvm , with 2 class loaders.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12363520_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12363520_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/06 02:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-01-22T02:18:21+0000\'\u003e22\\/Jan\\/06 02:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Database corruption can result anytime 2 different systems boot the same Derby database.  DB corruption can happen \\neven if the booting systems perform no updates if the there is recovery to do during boot, in that case 2 separate recovery systems will be opertating in an uncoordinated manner on the same log file, and applying uncoordinated changes to the data files.  Without multiple class loaders or  with multiple JVM\'s derby uses file locking to prevent this. \\nIt looks like file locking from the same jvm and 2 class loaders does not work, does anyone have any idea how to  \\nimplement a locking scheme that will work from the same jvm , with 2 class loaders.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12423387\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12423387&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12423387\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12423387_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12423387_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jul\\/06 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-07-25T17:08:04+0000\'\u003e25\\/Jul\\/06 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMarking this issue Critical  as it is a corruption issue that has in the past and surely will in the future affect users and cause unrecoverable corruption in production environments.  The corruption is triggered by a usage error, but unrecoverable database corruption is a high price to pay for deciding to connect with IJ while your APP Server, Eclipse or other environment  has  loaded Derby with a classloader.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eAlso marking this issue as 10.2 as a high value fix.  I think there may be technical issues that make it difficult to address in the 10.2 time frame, so if someone with expertise in the area thinks it is not possible to address in that timeframe, please move it to an appropriate release, maybe 10.2.2.  It is not a regression so as serious as it is I don\'t see it as an absolute showstopper for the release.\u003c\\/p\u003e\\n\\n\\n\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12423387_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12423387_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jul\\/06 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-07-25T17:08:04+0000\'\u003e25\\/Jul\\/06 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Marking this issue Critical  as it is a corruption issue that has in the past and surely will in the future affect users and cause unrecoverable corruption in production environments.  The corruption is triggered by a usage error, but unrecoverable database corruption is a high price to pay for deciding to connect with IJ while your APP Server, Eclipse or other environment  has  loaded Derby with a classloader. \\n\\n\\n Also marking this issue as 10.2 as a high value fix.  I think there may be technical issues that make it difficult to address in the 10.2 time frame, so if someone with expertise in the area thinks it is not possible to address in that timeframe, please move it to an appropriate release, maybe 10.2.2.  It is not a regression so as serious as it is I don\'t see it as an absolute showstopper for the release. \\n\\n\\n\\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12423920\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12423920&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12423920\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12423920_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12423920_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jul\\/06 20:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-07-27T20:57:46+0000\'\u003e27\\/Jul\\/06 20:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBumping urgency.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12423920_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12423920_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jul\\/06 20:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-07-27T20:57:46+0000\'\u003e27\\/Jul\\/06 20:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bumping urgency.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12424848\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12424848&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12424848\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12424848_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12424848_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Aug\\/06 12:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-01T12:45:42+0000\'\u003e01\\/Aug\\/06 12:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi,\u003c\\/p\u003e\\n\\n\u003cp\u003eWe could solve this problem by setting a System property before booting a database and checking for the property during subsequent boots. When the database is shutdown we set the property to false. For example when we boot a database named mydb then we set the property derby.dblock.mydb = true. Now during subsequent boots we could check for this system variable and if it is set to true throw an exception. During the shutdown of the database we set this variable to false. I tried an attempt along this line in the attached patch. \u003c\\/p\u003e\\n\\n\u003cp\u003eI HAVE NOT run the patch with security manager enabled. The sample repro attached with this issue passes with this fix. \u003c\\/p\u003e\\n\\n\u003cp\u003ePls note that the patch is not for a commit but is just to represent what I have in mind as a solution, in the form of code. \u003c\\/p\u003e\\n\\n\u003cp\u003ethanx\u003cbr\\/\u003e\\nNarayanan\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12424848_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12424848_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Aug\\/06 12:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-01T12:45:42+0000\'\u003e01\\/Aug\\/06 12:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, \\n\\n We could solve this problem by setting a System property before booting a database and checking for the property during subsequent boots. When the database is shutdown we set the property to false. For example when we boot a database named mydb then we set the property derby.dblock.mydb = true. Now during subsequent boots we could check for this system variable and if it is set to true throw an exception. During the shutdown of the database we set this variable to false. I tried an attempt along this line in the attached patch.  \\n\\n I HAVE NOT run the patch with security manager enabled. The sample repro attached with this issue passes with this fix.  \\n\\n Pls note that the patch is not for a commit but is just to represent what I have in mind as a solution, in the form of code.  \\n\\n thanx \\nNarayanan              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12424948\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12424948&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12424948\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12424948_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12424948_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Aug\\/06 17:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-01T17:40:37+0000\'\u003e01\\/Aug\\/06 17:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUsing system properties will require that every user running with the security manager grant a new permission in their policy file to allow setting these system properties. I thought an earlier discussion on the list had recommended not to use system properties this way.\u003c\\/p\u003e\\n\\n\u003cp\u003eOne issue with system properties is that how do atomically set and get the property, I think that is needed to perform locking?\u003cbr\\/\u003e\\nIn your current patch, there is a window between where you get and set the property where another thread in a anoter class loader could\u003cbr\\/\u003e\\ncome in and \\\"lock\\\" the database, resulting in two active derby instances connecting to the same database.\u003c\\/p\u003e\\n\\n\u003cp\u003eI also don\'t understand why on getting the system property you are catching NullPointerException and IllegalArgumentException, how would these\u003cbr\\/\u003e\\nbe thrown by System.getProperty()?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12424948_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12424948_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Aug\\/06 17:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-01T17:40:37+0000\'\u003e01\\/Aug\\/06 17:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Using system properties will require that every user running with the security manager grant a new permission in their policy file to allow setting these system properties. I thought an earlier discussion on the list had recommended not to use system properties this way. \\n\\n One issue with system properties is that how do atomically set and get the property, I think that is needed to perform locking? \\nIn your current patch, there is a window between where you get and set the property where another thread in a anoter class loader could \\ncome in and \\\"lock\\\" the database, resulting in two active derby instances connecting to the same database. \\n\\n I also don\'t understand why on getting the system property you are catching NullPointerException and IllegalArgumentException, how would these \\nbe thrown by System.getProperty()?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12424951\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12424951&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12424951\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12424951_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12424951_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Aug\\/06 17:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-01T17:46:49+0000\'\u003e01\\/Aug\\/06 17:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-305\\\" title=\\\"[PATCH] Lock Framework - allows custom lock mechanism\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-305\\\"\u003e\u003cdel\u003eLUCENE-305\u003c\\/del\u003e\u003c\\/a\u003e and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-635\\\" title=\\\"[PATCH] Decouple locking implementation from Directory implementation\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-635\\\"\u003e\u003cdel\u003eLUCENE-635\u003c\\/del\u003e\u003c\\/a\u003e may be worth looking at, lucene is re-factoring their locking (similar requirements to Derby) and maybe they have a solution for the intra-jvm lock. Otherwise has anyone done a google search on the issue?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12424951_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12424951_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Aug\\/06 17:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-01T17:46:49+0000\'\u003e01\\/Aug\\/06 17:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                      LUCENE-305   and   LUCENE-635   may be worth looking at, lucene is re-factoring their locking (similar requirements to Derby) and maybe they have a solution for the intra-jvm lock. Otherwise has anyone done a google search on the issue?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425154\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12425154&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425154\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12425154_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425154_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 06:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T06:31:22+0000\'\u003e02\\/Aug\\/06 06:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi,\u003c\\/p\u003e\\n\\n\u003cp\u003eTHESE ATTACHMENTS ARE JUST AN ATTEMPT IN THE SIMULATION OF THE COMMENTS ABOVE. THEY ARE NOT FOR A COMMIT. PLS FOLLOW BELOW COMMENTS FOR DETAILS.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanx for going through the patch and giving comments\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;Using system properties will require that every user  running with the security \u003cbr\\/\u003e\\n  manager grant a new  permission in their policy file to allow setting these system \u003cbr\\/\u003e\\n  properties.\u003c\\/p\u003e\\n\\n\u003cp\u003e   I Agree, My apologies for not having gone through the earlier thread on System \u003cbr\\/\u003e\\n   Properties\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; One issue with system properties is that how do atomically set and get the \u003cbr\\/\u003e\\n    property, I think that is needed to perform locking? In your current patch, there is a \u003cbr\\/\u003e\\n    window between where you get and set the property where  another thread in a \u003cbr\\/\u003e\\n    anoter class loader could come in and \\\"lock\\\" the database, resulting in two active \u003cbr\\/\u003e\\n    derby instances connecting to the same database. \u003c\\/p\u003e\\n\\n\u003cp\u003e   Again a very valid point. I wanted to try to simulate this. So converted the whole   \u003cbr\\/\u003e\\n   repro into a crude multi -threaded  application. But found found it difficult to \u003cbr\\/\u003e\\n   simulate it on  my machine since one of the threads always managed  to set this \u003cbr\\/\u003e\\n   property before  the other. So modified my fix by creating a sort of sync point after \u003cbr\\/\u003e\\n   the getProperties.  Just to show that two seperate threads could actually reach \u003cbr\\/\u003e\\n   there.\u003c\\/p\u003e\\n\\n\u003cp\u003e  This could actually occur without this modification\u003c\\/p\u003e\\n\\n\u003cp\u003e  1) When one of the threads gets preempted after doing a getProperties and then \u003cbr\\/\u003e\\n       the other does a  getProperties. And then they proceed to completion. \u003c\\/p\u003e\\n\\n\u003cp\u003e      Also this might just be one of the cases when this could have occurred.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I also don\'t understand why on getting the system property you are catching \u003cbr\\/\u003e\\n   NullPointerException and  IllegalArgumentException, how would these be thrown \u003cbr\\/\u003e\\n   by System.getProperty()?\u003c\\/p\u003e\\n\\n\u003cp\u003e   NullPointerException - System.getProperty(null);\u003c\\/p\u003e\\n\\n\u003cp\u003e   IllegalArgumentException - System.getProperty(\\\"\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003e   I found it interesting to simulate the condition where the above fix might fail. \u003cbr\\/\u003e\\n   Thought I could share the same with the community. So attaching the relevant files \u003cbr\\/\u003e\\n   I used for generating this condition. \u003c\\/p\u003e\\n\\n\u003cp\u003ethanx once again for the patient comments\u003cbr\\/\u003e\\nNarayanan\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12425154_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425154_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 06:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T06:31:22+0000\'\u003e02\\/Aug\\/06 06:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, \\n\\n THESE ATTACHMENTS ARE JUST AN ATTEMPT IN THE SIMULATION OF THE COMMENTS ABOVE. THEY ARE NOT FOR A COMMIT. PLS FOLLOW BELOW COMMENTS FOR DETAILS. \\n\\n Thanx for going through the patch and giving comments \\n\\n &gt;Using system properties will require that every user  running with the security  \\n  manager grant a new  permission in their policy file to allow setting these system  \\n  properties. \\n\\n    I Agree, My apologies for not having gone through the earlier thread on System  \\n   Properties \\n\\n &gt; One issue with system properties is that how do atomically set and get the  \\n    property, I think that is needed to perform locking? In your current patch, there is a  \\n    window between where you get and set the property where  another thread in a  \\n    anoter class loader could come in and \\\"lock\\\" the database, resulting in two active  \\n    derby instances connecting to the same database.  \\n\\n    Again a very valid point. I wanted to try to simulate this. So converted the whole    \\n   repro into a crude multi -threaded  application. But found found it difficult to  \\n   simulate it on  my machine since one of the threads always managed  to set this  \\n   property before  the other. So modified my fix by creating a sort of sync point after  \\n   the getProperties.  Just to show that two seperate threads could actually reach  \\n   there. \\n\\n   This could actually occur without this modification \\n\\n   1) When one of the threads gets preempted after doing a getProperties and then  \\n       the other does a  getProperties. And then they proceed to completion.  \\n\\n       Also this might just be one of the cases when this could have occurred. \\n\\n &gt; I also don\'t understand why on getting the system property you are catching  \\n   NullPointerException and  IllegalArgumentException, how would these be thrown  \\n   by System.getProperty()? \\n\\n    NullPointerException - System.getProperty(null); \\n\\n    IllegalArgumentException - System.getProperty(\\\"\\\"); \\n\\n    I found it interesting to simulate the condition where the above fix might fail.  \\n   Thought I could share the same with the community. So attaching the relevant files  \\n   I used for generating this condition.  \\n\\n thanx once again for the patient comments \\nNarayanan              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425259\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12425259&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425259\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12425259_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425259_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 15:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T15:20:08+0000\'\u003e02\\/Aug\\/06 15:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhere can Derby store VM-global state? It has been pointed out that System properties are an awkward kind of VM-global state for the following reasons:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) SecurityManager problems\u003cbr\\/\u003e\\n2) Race conditions\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat other VM-global state can Derby access? One Derby object that\'s global across the VM is the Derby driver registered with the DriverManager.\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Could we use the registered Derby driver to anchor VM-global state?\u003cbr\\/\u003e\\n2) Are there other VM-global Derby objects which we could use?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12425259_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425259_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 15:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T15:20:08+0000\'\u003e02\\/Aug\\/06 15:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Where can Derby store VM-global state? It has been pointed out that System properties are an awkward kind of VM-global state for the following reasons: \\n\\n 1) SecurityManager problems \\n2) Race conditions \\n\\n What other VM-global state can Derby access? One Derby object that\'s global across the VM is the Derby driver registered with the DriverManager. \\n\\n 1) Could we use the registered Derby driver to anchor VM-global state? \\n2) Are there other VM-global Derby objects which we could use?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425512\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12425512&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425512\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12425512_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425512_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Aug\\/06 12:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-03T12:42:29+0000\'\u003e03\\/Aug\\/06 12:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt appears that fixing this bug will require us to agree on some mechanism for caching VM-global Derby state. This seems to be an architectural decision which requires careful thought and experiment. I think we should defer this to a future release. I am moving this to 10.3 because thatt\'s the next release available in the dropdown. I agree with Kathey that this is a good candidate for a bug fix release in the 10.2 lineage.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12425512_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425512_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Aug\\/06 12:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-03T12:42:29+0000\'\u003e03\\/Aug\\/06 12:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It appears that fixing this bug will require us to agree on some mechanism for caching VM-global Derby state. This seems to be an architectural decision which requires careful thought and experiment. I think we should defer this to a future release. I am moving this to 10.3 because thatt\'s the next release available in the dropdown. I agree with Kathey that this is a good candidate for a bug fix release in the 10.2 lineage.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425590\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12425590&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425590\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12425590_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425590_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Aug\\/06 18:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-03T18:58:30+0000\'\u003e03\\/Aug\\/06 18:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for creating the new 10.2.2.0 option, Andrew! I\'ve reassigned this issue to that release.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12425590_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425590_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Aug\\/06 18:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-03T18:58:30+0000\'\u003e03\\/Aug\\/06 18:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for creating the new 10.2.2.0 option, Andrew! I\'ve reassigned this issue to that release.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12426168\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12426168&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12426168\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12426168_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12426168_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/06 08:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-07T08:32:41+0000\'\u003e07\\/Aug\\/06 08:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi,\u003cbr\\/\u003e\\nI am not working actively on this issue. Hence unassigning myself from this issue and moving on to other issues I am working on.\u003c\\/p\u003e\\n\\n\u003cp\u003ethanx\u003cbr\\/\u003e\\nNarayanan\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12426168_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12426168_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/06 08:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-07T08:32:41+0000\'\u003e07\\/Aug\\/06 08:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, \\nI am not working actively on this issue. Hence unassigning myself from this issue and moving on to other issues I am working on. \\n\\n thanx \\nNarayanan              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12456126\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12456126&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12456126\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12456126_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456126_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/06 17:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-06T17:31:43+0000\'\u003e06\\/Dec\\/06 17:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMove to 10.2.3.0.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12456126_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456126_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/06 17:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-06T17:31:43+0000\'\u003e06\\/Dec\\/06 17:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Move to 10.2.3.0.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12467564\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12467564&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12467564\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"fuzzylogic\\\" id=\\\"commentauthor_12467564_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=fuzzylogic\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"fuzzylogic\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrew McIntyre\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12467564_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jan\\/07 20:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-01-25T20:36:44+0000\'\u003e25\\/Jan\\/07 20:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUnsetting Fix Version for unassigned issues.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"fuzzylogic\\\" id=\\\"commentauthor_12467564_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=fuzzylogic\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"fuzzylogic\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrew McIntyre\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12467564_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jan\\/07 20:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-01-25T20:36:44+0000\'\u003e25\\/Jan\\/07 20:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Unsetting Fix Version for unassigned issues.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12482927\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12482927&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12482927\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12482927_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12482927_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Mar\\/07 21:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-21T21:47:09+0000\'\u003e21\\/Mar\\/07 21:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI took a quick  looks at fixes for  \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-305\\\" title=\\\"[PATCH] Lock Framework - allows custom lock mechanism\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-305\\\"\u003e\u003cdel\u003eLUCENE-305\u003c\\/del\u003e\u003c\\/a\u003e and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-635\\\" title=\\\"[PATCH] Decouple locking implementation from Directory implementation\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-635\\\"\u003e\u003cdel\u003eLUCENE-635\u003c\\/del\u003e\u003c\\/a\u003e  , which are fixed now.   I did not see any code that is attempting to solve  locking  within a jvm  across class loaders boundaries.   May be I am missing something ! \u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12482927_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12482927_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Mar\\/07 21:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-21T21:47:09+0000\'\u003e21\\/Mar\\/07 21:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I took a quick  looks at fixes for    LUCENE-305   and   LUCENE-635    , which are fixed now.   I did not see any code that is attempting to solve  locking  within a jvm  across class loaders boundaries.   May be I am missing something !  \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12483798\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12483798&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12483798\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12483798_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12483798_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Mar\\/07 23:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-23T23:55:06+0000\'\u003e23\\/Mar\\/07 23:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere  does not seem to be any  way to get process id info that can be used to fix this problem. Existing JVM enhancement requests  filed  to get process id info:\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4250622\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4250622\u003c\\/a\u003e\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do;jsessionid=7c75c6fc92c662c739fb11f620a4:YfiG?bug_id=4244896\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do;jsessionid=7c75c6fc92c662c739fb11f620a4:YfiG?bug_id=4244896\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eIt was interesting to  reade these reports, other developers are finding it hard to generate unique id across jvms!\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12483798_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12483798_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Mar\\/07 23:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-23T23:55:06+0000\'\u003e23\\/Mar\\/07 23:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There  does not seem to be any  way to get process id info that can be used to fix this problem. Existing JVM enhancement requests  filed  to get process id info: \\n\\n  http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4250622  \\n http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do;jsessionid=7c75c6fc92c662c739fb11f620a4:YfiG?bug_id=4244896  \\n\\n It was interesting to  reade these reports, other developers are finding it hard to generate unique id across jvms! \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12484513\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12484513&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12484513\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12484513_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484513_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/07 17:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-27T17:35:46+0000\'\u003e27\\/Mar\\/07 17:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is a description of a possible solution - any feedback is appreciated:\u003c\\/p\u003e\\n\\n\u003cp\u003eI would like to see some solution to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-700\\\" title=\\\"Derby does not prevent dual boot of database from different classloaders on Linux and Mac OS X\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-700\\\"\u003e\u003cdel\u003eDERBY-700\u003c\\/del\u003e\u003c\\/a\u003e go into the 10.3 release, as it is too easy currently for users to access their same database from 2 different classloaders in the same JVM and corrupt their database.\u003c\\/p\u003e\\n\\n\u003cp\u003eLet me try to explain the problem again.  Derby protects multiple thread\u003cbr\\/\u003e\\naccess to databases using in memory locking.  Any situation where 2 instances of Derby can access the same on disk database but not coordinate through the same in-memory locking scheme creates a situation\u003cbr\\/\u003e\\nthat can lead to log\\/data corruption.\u003c\\/p\u003e\\n\\n\u003cp\u003eDerby coordinates access to an ondisk database using a 2 level per db\u003cbr\\/\u003e\\nlocking scheme.  The following is high level and probably misses some\u003cbr\\/\u003e\\ndetail.\u003c\\/p\u003e\\n\\n\u003cp\u003e1) first it obtains what I refer to as an OS file lock, this is not a java defined mechanism. It depends on an OS specific behavior that it\u003cbr\\/\u003e\\nis not possible to delete a file on some OS\'s if the file is still open\u003cbr\\/\u003e\\n(the most common OS where this is true are I believe all window\'s\u003cbr\\/\u003e\\nOS\'s 98, NT, 2000, xp, ...).\u003cbr\\/\u003e\\n    A)  If lock file does not exist we open it and leave it open --&gt; lock granted\u003cbr\\/\u003e\\n    B) If lock file does exist we try to delete it, if we can then\u003cbr\\/\u003e\\n       we go back to A.  If we can\'t we assume file is locked and\u003cbr\\/\u003e\\n       give up.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) The second level is that we use java base file locking.  This only\u003cbr\\/\u003e\\n   became available in 1.4.2 and later jvm\'s.  This does standard locking and automatically takes care of releasing lock if JVM goes\u003cbr\\/\u003e\\naway.\u003c\\/p\u003e\\n\\n\u003cp\u003eWe kept both steps, even though it seems that step 2 is sufficient to\u003cbr\\/\u003e\\nprovide backward compatible protection.   So anyone running on a JVM\u003cbr\\/\u003e\\nprior to 1.4.2 on a windows platform would still be protected.  The\u003cbr\\/\u003e\\npre-derby code base also had to worry about protecting access against\u003cbr\\/\u003e\\nversions of the code that did not have step 2 implemented.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe problem is that in cases where derby is run in 2 class loaders in\u003cbr\\/\u003e\\nthe same jvm the step 2 file locking does not work.  It is meant only\u003cbr\\/\u003e\\nto protect threads in different JVMS, so it provides no help in preventing access from 2 different class loaders in the same JVM.  It\u003cbr\\/\u003e\\nturns out that step 1 on windows system solves the locking problem\u003cbr\\/\u003e\\non windows systems for multiple class loaders also.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo a solution should provide 2 things:\u003cbr\\/\u003e\\n1) prevent access from another classloader in the same JVM\u003cbr\\/\u003e\\n2) not allow false positives.  So for instance a standard \\\"lock file\\\" could be used on unix systems, creating it and when one boots check\u003cbr\\/\u003e\\nfor existence of the lock file and give up if it exists.  The problem\u003cbr\\/\u003e\\nis that it is very easy to cause a JVM to exit without properly cleaning\u003cbr\\/\u003e\\nthe lock file and thus one would get into situation where user may have\u003cbr\\/\u003e\\nto clean lock files by hand.\u003c\\/p\u003e\\n\\n\u003cp\u003eHere is my current proposal, but I really don\'t like it &#8211; I am hoping someone out there can come up with something better.\u003c\\/p\u003e\\n\\n\u003cp\u003eo keep the step 1 and step 2 locking as described above.  It solves cross JVM locking completely.\u003cbr\\/\u003e\\no create a step 3 locking step, the only purpose is to recognize situations step 1 and 2 can\'t.\u003cbr\\/\u003e\\no use simple file system lock file to implement step 3 locking:\u003cbr\\/\u003e\\n    A) on db boot if no lock file exists, create it and put a timestamp in the file.  This db boot is responsible for updating that timestamp\u003cbr\\/\u003e\\nevery N seconds, for this we need to come up with a guaranteed executing background thread - there are known problems with current background thread, and long checkpoints for instance.  On shutdown of db we delete lock file.\u003cbr\\/\u003e\\n    B) on db boot if lock file exists we open it, and get the timestamp and compare it with the current timestamp.  If the difference is greater\u003cbr\\/\u003e\\nthan N we assume the lock file has been left around incorrectly and we\u003cbr\\/\u003e\\ndelete the file and go to A (or just open it and update it with our\u003cbr\\/\u003e\\ncurrent timestamp).  It probably is worth logging this event in derby.log.\u003c\\/p\u003e\\n\\n\u003cp\u003eOne nice thing about the above solution is that I think it also solves\u003cbr\\/\u003e\\nour problem with muliple machines accessing the same disk (as long as\u003cbr\\/\u003e\\ntheir timestamps are the same or close).  I think we can pick a large N\u003cbr\\/\u003e\\nas this should be an error case (ie. the purpose of N is to catch the\u003cbr\\/\u003e\\ncase where a classloader went away without allowing us to clean up - I don\'t know classloader stuff to know how likely this is), but it is probably worth making it\u003cbr\\/\u003e\\nconfigurable so we could adjust in the field if necessary.\u003c\\/p\u003e\\n\\n\u003cp\u003eI really don\'t like forcing Derby to run a job every N seconds.  It could be hard to explain to users why derby is doing work every N\u003cbr\\/\u003e\\nseconds even when nothing else is happening.  I worked on a different\u003cbr\\/\u003e\\nproduct a long time ago that required us to maintain our own timer for use in scheduling waits and users noticed and complained such that we\u003cbr\\/\u003e\\nhad to add a backoff mechanism based on the amount of work being done\u003cbr\\/\u003e\\njust so the process would not show up at a steady 1% (or whatever) on\u003cbr\\/\u003e\\nthere process status monitors.  Now that timer was a lot shorter than\u003cbr\\/\u003e\\nseconds so it may not be an issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eSome extensions I considered:\u003cbr\\/\u003e\\n1) come up with a unique ID that is specific to a JVM and can be queried by any thread in any classloader in the JVM.  If we had that then we could write that value into the step 3 lock file and we know that if we\u003cbr\\/\u003e\\nopened the file and saw a different ID, the lock file was invalid.  If\u003cbr\\/\u003e\\nwe did this then we narrow the chance of a false positive but we eliminate the chance to catch cross machine access.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Have the opener db log some unique id specific to it in addition to the timestamp, maybe this is just the first timestamp of the open.  Then it could at least tell the next time if another\u003cbr\\/\u003e\\nclass loader had incorrectly started, and throw\\/log some error so we\u003cbr\\/\u003e\\ncould catch this problem.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) maybe the value of N should be logged in the file, I think it has to\u003cbr\\/\u003e\\n   be if we allow it to be configurable.\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12484513_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484513_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/07 17:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-27T17:35:46+0000\'\u003e27\\/Mar\\/07 17:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is a description of a possible solution - any feedback is appreciated: \\n\\n I would like to see some solution to   DERBY-700   go into the 10.3 release, as it is too easy currently for users to access their same database from 2 different classloaders in the same JVM and corrupt their database. \\n\\n Let me try to explain the problem again.  Derby protects multiple thread \\naccess to databases using in memory locking.  Any situation where 2 instances of Derby can access the same on disk database but not coordinate through the same in-memory locking scheme creates a situation \\nthat can lead to log\\/data corruption. \\n\\n Derby coordinates access to an ondisk database using a 2 level per db \\nlocking scheme.  The following is high level and probably misses some \\ndetail. \\n\\n 1) first it obtains what I refer to as an OS file lock, this is not a java defined mechanism. It depends on an OS specific behavior that it \\nis not possible to delete a file on some OS\'s if the file is still open \\n(the most common OS where this is true are I believe all window\'s \\nOS\'s 98, NT, 2000, xp, ...). \\n    A)  If lock file does not exist we open it and leave it open --&gt; lock granted \\n    B) If lock file does exist we try to delete it, if we can then \\n       we go back to A.  If we can\'t we assume file is locked and \\n       give up. \\n\\n 2) The second level is that we use java base file locking.  This only \\n   became available in 1.4.2 and later jvm\'s.  This does standard locking and automatically takes care of releasing lock if JVM goes \\naway. \\n\\n We kept both steps, even though it seems that step 2 is sufficient to \\nprovide backward compatible protection.   So anyone running on a JVM \\nprior to 1.4.2 on a windows platform would still be protected.  The \\npre-derby code base also had to worry about protecting access against \\nversions of the code that did not have step 2 implemented. \\n\\n The problem is that in cases where derby is run in 2 class loaders in \\nthe same jvm the step 2 file locking does not work.  It is meant only \\nto protect threads in different JVMS, so it provides no help in preventing access from 2 different class loaders in the same JVM.  It \\nturns out that step 1 on windows system solves the locking problem \\non windows systems for multiple class loaders also. \\n\\n So a solution should provide 2 things: \\n1) prevent access from another classloader in the same JVM \\n2) not allow false positives.  So for instance a standard \\\"lock file\\\" could be used on unix systems, creating it and when one boots check \\nfor existence of the lock file and give up if it exists.  The problem \\nis that it is very easy to cause a JVM to exit without properly cleaning \\nthe lock file and thus one would get into situation where user may have \\nto clean lock files by hand. \\n\\n Here is my current proposal, but I really don\'t like it &#8211; I am hoping someone out there can come up with something better. \\n\\n o keep the step 1 and step 2 locking as described above.  It solves cross JVM locking completely. \\no create a step 3 locking step, the only purpose is to recognize situations step 1 and 2 can\'t. \\no use simple file system lock file to implement step 3 locking: \\n    A) on db boot if no lock file exists, create it and put a timestamp in the file.  This db boot is responsible for updating that timestamp \\nevery N seconds, for this we need to come up with a guaranteed executing background thread - there are known problems with current background thread, and long checkpoints for instance.  On shutdown of db we delete lock file. \\n    B) on db boot if lock file exists we open it, and get the timestamp and compare it with the current timestamp.  If the difference is greater \\nthan N we assume the lock file has been left around incorrectly and we \\ndelete the file and go to A (or just open it and update it with our \\ncurrent timestamp).  It probably is worth logging this event in derby.log. \\n\\n One nice thing about the above solution is that I think it also solves \\nour problem with muliple machines accessing the same disk (as long as \\ntheir timestamps are the same or close).  I think we can pick a large N \\nas this should be an error case (ie. the purpose of N is to catch the \\ncase where a classloader went away without allowing us to clean up - I don\'t know classloader stuff to know how likely this is), but it is probably worth making it \\nconfigurable so we could adjust in the field if necessary. \\n\\n I really don\'t like forcing Derby to run a job every N seconds.  It could be hard to explain to users why derby is doing work every N \\nseconds even when nothing else is happening.  I worked on a different \\nproduct a long time ago that required us to maintain our own timer for use in scheduling waits and users noticed and complained such that we \\nhad to add a backoff mechanism based on the amount of work being done \\njust so the process would not show up at a steady 1% (or whatever) on \\nthere process status monitors.  Now that timer was a lot shorter than \\nseconds so it may not be an issue. \\n\\n Some extensions I considered: \\n1) come up with a unique ID that is specific to a JVM and can be queried by any thread in any classloader in the JVM.  If we had that then we could write that value into the step 3 lock file and we know that if we \\nopened the file and saw a different ID, the lock file was invalid.  If \\nwe did this then we narrow the chance of a false positive but we eliminate the chance to catch cross machine access. \\n\\n 2) Have the opener db log some unique id specific to it in addition to the timestamp, maybe this is just the first timestamp of the open.  Then it could at least tell the next time if another \\nclass loader had incorrectly started, and throw\\/log some error so we \\ncould catch this problem. \\n\\n 3) maybe the value of N should be logged in the file, I think it has to \\n   be if we allow it to be configurable. \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12484550\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12484550&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12484550\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12484550_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484550_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/07 19:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-27T19:11:51+0000\'\u003e27\\/Mar\\/07 19:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhile reading comments for this issue yet again, noticed Rick mentioned long\u003cbr\\/\u003e\\ntime ago , it might be possible to make Derby jdbc driver hold a state that \u003cbr\\/\u003e\\nis global to jvm, not specific to a class loader.  Is that how it really works\u003cbr\\/\u003e\\neven if the user loads the driver using class loaders ? \u003c\\/p\u003e\\n\\n\u003cp\u003eBasically , is it possible to make  org.apache.derby.jdbc.EmbeddedDriver.java \u003cbr\\/\u003e\\nstatically initialize an JVMID(a UUID) that can be accessed from any class loader ?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12484550_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484550_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/07 19:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-27T19:11:51+0000\'\u003e27\\/Mar\\/07 19:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    While reading comments for this issue yet again, noticed Rick mentioned long \\ntime ago , it might be possible to make Derby jdbc driver hold a state that  \\nis global to jvm, not specific to a class loader.  Is that how it really works \\neven if the user loads the driver using class loaders ?  \\n\\n Basically , is it possible to make  org.apache.derby.jdbc.EmbeddedDriver.java  \\nstatically initialize an JVMID(a UUID) that can be accessed from any class loader ?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12484562\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12484562&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12484562\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12484562_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484562_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/07 19:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-27T19:36:20+0000\'\u003e27\\/Mar\\/07 19:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith respect to a global state in the jdbc driver when 2 class loaders are involved, how would that work with 2 different class loaders trying to run 2 different versions of derby - say 10.3 and 10.4.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12484562_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484562_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/07 19:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-27T19:36:20+0000\'\u003e27\\/Mar\\/07 19:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    With respect to a global state in the jdbc driver when 2 class loaders are involved, how would that work with 2 different class loaders trying to run 2 different versions of derby - say 10.3 and 10.4.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12484565\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12484565&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12484565\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12484565_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484565_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/07 19:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-27T19:50:33+0000\'\u003e27\\/Mar\\/07 19:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eif you alluding to this comment:\u003c\\/p\u003e\\n\\n\u003cp\u003e rick&gt; One Derby object that\'s global across the VM is the Derby driver registered with the DriverManager.\u003c\\/p\u003e\\n\\n\u003cp\u003ethen I think that is false. Derby will have multiple drivers registered, one per classloader that booted derby.\u003cbr\\/\u003e\\n(see comments for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1228\\\" title=\\\"Make it possible to run multiple instances of Derby within the same VM\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1228\\\"\u003eDERBY-1228\u003c\\/a\u003e or java.sql.DriverManager documentation)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12484565_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484565_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/07 19:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-27T19:50:33+0000\'\u003e27\\/Mar\\/07 19:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    if you alluding to this comment: \\n\\n  rick&gt; One Derby object that\'s global across the VM is the Derby driver registered with the DriverManager. \\n\\n then I think that is false. Derby will have multiple drivers registered, one per classloader that booted derby. \\n(see comments for  DERBY-1228  or java.sql.DriverManager documentation)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12484586\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12484586&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12484586\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12484586_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484586_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/07 20:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-27T20:54:09+0000\'\u003e27\\/Mar\\/07 20:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks  for confirming , Dan.   I was referring to the commnet you noted.  Looks like there is  NO way to maintain an in-memory state that is  global to JVM  across class loader , other than using  a system property.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12484586_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484586_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/07 20:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-27T20:54:09+0000\'\u003e27\\/Mar\\/07 20:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks  for confirming , Dan.   I was referring to the commnet you noted.  Looks like there is  NO way to maintain an in-memory state that is  global to JVM  across class loader , other than using  a system property.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12484998\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12484998&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12484998\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12484998_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484998_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/07 21:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-28T21:30:17+0000\'\u003e28\\/Mar\\/07 21:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks a lot for summarizing the problems and possible solutions \u003cbr\\/\u003e\\nfor this issue, Mike. I think the timer base solution you mentioned\u003cbr\\/\u003e\\nmight work, but I am not comfortable with a timer based solution. As you\u003cbr\\/\u003e\\nmentioned, users might complain about the background writes, and also \u003cbr\\/\u003e\\nI think  configuring N to the right value to differentiate false \u003cbr\\/\u003e\\nnegatives\\/positives boots going to be hard. It will depend on the load \u003cbr\\/\u003e\\nand the machine configuration (no of cpus ) ..etc.\u003c\\/p\u003e\\n\\n\u003cp\u003eI was trying to find alternative solutions, without much success. Only\u003cbr\\/\u003e\\nsolution I could come up with involves using a system property. I \u003cbr\\/\u003e\\nunderstand, earlier we discussed using the system properties and it was \u003cbr\\/\u003e\\ndecided as not a such a good idea. But considering there are NO other \u003cbr\\/\u003e\\nbetter solutions found for this problem, so far. I was think having one \u003cbr\\/\u003e\\nproperty to maintain a JVMID may not be so bad, user just need to give \u003cbr\\/\u003e\\nsecurity permission to set one property, i.e  if what I \u003cbr\\/\u003e\\ndescribe below actually works!\u003c\\/p\u003e\\n\\n\u003cp\u003eI would really appreciate  any  suggestions\\/feedback  for this solution . \u003c\\/p\u003e\\n\\n\u003cp\u003eMy understanding is a solution to this problem need to solve primarily \u003cbr\\/\u003e\\nfollowing three issues:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Maintaining a state that a database is already booted, if the database\u003cbr\\/\u003e\\n   if booted successfully. \u003cbr\\/\u003e\\n2) Change the state to NOT_BOOTED, if it is not booted any more because of  a\u003cbr\\/\u003e\\n    a) Shutdown of the database\u003cbr\\/\u003e\\n    b) Class loader that booted the db is garbage collected.\u003cbr\\/\u003e\\n    c) JVM exited. \u003c\\/p\u003e\\n\\n\u003cp\u003e3) synchronization across class loaders. \u003c\\/p\u003e\\n\\n\u003cp\u003ePseudo code below that attempts to solve this problems by making the \u003cbr\\/\u003e\\nfollowing Assumptions :\u003c\\/p\u003e\\n\\n\u003cp\u003e 1) It is ok to use ONE  system property  \\\"derby.storage.jvmid\\\" to identify \u003cbr\\/\u003e\\n     a jvm instance id. \u003cbr\\/\u003e\\n 2) It is ok to use interned strings to synchronize across class loader. \u003cbr\\/\u003e\\n 3) It is ok to call getCanonicalPath(), i think this may require permission \u003cbr\\/\u003e\\n    for \\\"user.dir\\\" property if it is not already required. Other solution\u003cbr\\/\u003e\\n    may be to assign an ID string on create of the DB and user that for \u003cbr\\/\u003e\\n    DB level synchronization. \u003cbr\\/\u003e\\n 4) It is ok to rely on the class finalizer to cleanup db lock state, \u003cbr\\/\u003e\\n    when the database  is NOT any more because the loader that booted \u003cbr\\/\u003e\\n    the database is garbage  collected. \u003c\\/p\u003e\\n\\n\\n\u003cp\u003e\\/*\u003cbr\\/\u003e\\nPseudo code to lock the DB to prevent multiple instance of a database running \u003cbr\\/\u003e\\nconcurrently through class loaders in a single instance of jvm or\u003cbr\\/\u003e\\nmultiple instance of jvm.   \u003c\\/p\u003e\\n\\n\u003cp\u003eNote: Following code class is in a separate class just to understand it \u003cbr\\/\u003e\\nas separate issue , this code should probably go into the \u003cbr\\/\u003e\\ndataFactory class where current db-locking is done. \u003cbr\\/\u003e\\n*\\/\u003cbr\\/\u003e\\nClass DbLock {\u003c\\/p\u003e\\n\\n\u003cp\u003e    private static final String DERYB_JVM_ID  = \\\"derby.storage.jvmid\\\";\u003cbr\\/\u003e\\n    private String dbCannonicalPath;   \\/\\/ canonical of the db being booted.\u003cbr\\/\u003e\\n    private FileLock fileLock  = null;\u003cbr\\/\u003e\\n    private boolean dbLocked = false;\u003c\\/p\u003e\\n\\n\u003cp\u003e    DbLock (String dbCannonicalPath) \u003c\\/p\u003e\\n{\\n        this.dbCannonicalPath = dbCannonicalPath;\\n    }\\n\\n\u003cp\u003e    \\/* \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eget a unique JVM ID\u003cbr\\/\u003e\\n     *\\/\u003cbr\\/\u003e\\n    private getJvmId () {\u003cbr\\/\u003e\\n        \\/\\/ synchronize across class loaders.\u003cbr\\/\u003e\\n        synchronize(DERYB_JVM_ID) {\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e            jvmid = System.getProperty(DERYB_JVM_ID);\u003cbr\\/\u003e\\n            \\/\\/ if jvm id is not already exist, generate one \u003cbr\\/\u003e\\n            \\/\\/ and save it into the \\\"derby.storage.jvmid\\\" system\u003cbr\\/\u003e\\n            \\/\\/ property.\u003cbr\\/\u003e\\n            if (jvmid == null) \u003c\\/p\u003e\\n{\\n                \\/\\/generate a new UUID based on the time and IP ..etc. \\n                jvmid = generateJvmId() \\n                    System.setProperty(\\\"derby.storage.jvmid\\\");\\n            }\\n\u003cp\u003e        }\u003cbr\\/\u003e\\n    }\u003c\\/p\u003e\\n\\n\u003cp\u003e    \\/*\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eLock the db,  so that other class loader or\u003c\\/li\u003e\\n\\t\u003cli\u003eanother jvm won\'t be able to boot the same database.\u003cbr\\/\u003e\\n     *\\/\u003cbr\\/\u003e\\n    public lock_db_onboot(String dbCannonicalPath)  {\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e         \\/\\/ Get a file Lock on boot() ; \\/\\/ this already works \u003cbr\\/\u003e\\n         fileLock = getFileLock(\\\"dbex.lck\\\");\u003cbr\\/\u003e\\n         if (lock == null) \u003c\\/p\u003e\\n{\\n             \\/\\/ if we don\'t get lock means , some other jvm already \\n             \\/\\/ booted it throws  ALREADY_BOOTED error.\\n             throw ALREADY_BOOTED;\\n         }\\n\u003cp\u003e else {\u003c\\/p\u003e\\n\\n\u003cp\u003e             \\/\\/ file lock can be acquired even if the database is already \u003cbr\\/\u003e\\n             \\/\\/ booted by a different class loader. Check if another class \u003cbr\\/\u003e\\n             \\/\\/ loader has booted  the DB.  This is done by checking the \u003cbr\\/\u003e\\n             \\/\\/ JVMID written in the dbex.lck  file. If the JVMID is same \u003cbr\\/\u003e\\n             \\/\\/ as what is stored in the system property,\u003cbr\\/\u003e\\n             \\/\\/ then database is already booted , throw the error. \u003cbr\\/\u003e\\n             currentJvmId =  getJvmId();\u003cbr\\/\u003e\\n             synchronize(dbCannonicalPath) {\u003cbr\\/\u003e\\n                 onDisk_JVM_ID = readIdFromDisk() ; \\/\\/ read ID from the dbex.lck file.\u003cbr\\/\u003e\\n                 if (OnDisk_JVM_ID == current_jvm_id ) \u003cbr\\/\u003e\\n                     throw (\\\"DATABASE IS ALREADY BOOTED\\\");  \u003cbr\\/\u003e\\n                 else\u003c\\/p\u003e\\n{\\n                     dbLocked = true;\\n                     writeId(currentJvmId);  \\/\\/update the dbex.lck file) . \\n                 }\\n\u003cp\u003e             }\u003cbr\\/\u003e\\n         }\u003cbr\\/\u003e\\n    }\u003c\\/p\u003e\\n\\n\\n\\n\u003cp\u003e    \\/*\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eCalled on shutdown\\/garbage collection.\u003cbr\\/\u003e\\n     *\\/ \u003cbr\\/\u003e\\n    unlock_db() {\u003cbr\\/\u003e\\n        if (dbLocked) \\n\u003cdiv class=\\\"error\\\"\u003e\u003cspan class=\\\"error\\\"\u003eUnknown macro: {            Strinng Ondisk_jvm_id =  &quot;-1&quot;;  \\/\\/jvm id should never have been a -1.            synchronize(dbCannonicalPath) {\\n                writeIdToDisk(Ondisk_jvm_id);  \\/\\/update the dbex.lck file) . \\n            }            releaseFileLock(fileLock);            dbLocked =  false;        }\u003c\\/span\u003e \u003c\\/div\u003e\\n\u003cp\u003e    }\u003c\\/p\u003e\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003e    \\/*\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eif the db is not shutdown, this method should release\u003c\\/li\u003e\\n\\t\u003cli\u003ethe  db lock related resources during this class finalization.\u003cbr\\/\u003e\\n     *\\/\u003cbr\\/\u003e\\n    protected void finalize() throws Throwable \\n    {\\n        unlock_db();\\n    }\\n\u003cp\u003e}\u003c\\/p\u003e\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12484998_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12484998_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/07 21:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-03-28T21:30:17+0000\'\u003e28\\/Mar\\/07 21:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks a lot for summarizing the problems and possible solutions  \\nfor this issue, Mike. I think the timer base solution you mentioned \\nmight work, but I am not comfortable with a timer based solution. As you \\nmentioned, users might complain about the background writes, and also  \\nI think  configuring N to the right value to differentiate false  \\nnegatives\\/positives boots going to be hard. It will depend on the load  \\nand the machine configuration (no of cpus ) ..etc. \\n\\n I was trying to find alternative solutions, without much success. Only \\nsolution I could come up with involves using a system property. I  \\nunderstand, earlier we discussed using the system properties and it was  \\ndecided as not a such a good idea. But considering there are NO other  \\nbetter solutions found for this problem, so far. I was think having one  \\nproperty to maintain a JVMID may not be so bad, user just need to give  \\nsecurity permission to set one property, i.e  if what I  \\ndescribe below actually works! \\n\\n I would really appreciate  any  suggestions\\/feedback  for this solution .  \\n\\n My understanding is a solution to this problem need to solve primarily  \\nfollowing three issues: \\n\\n 1) Maintaining a state that a database is already booted, if the database \\n   if booted successfully.  \\n2) Change the state to NOT_BOOTED, if it is not booted any more because of  a \\n    a) Shutdown of the database \\n    b) Class loader that booted the db is garbage collected. \\n    c) JVM exited.  \\n\\n 3) synchronization across class loaders.  \\n\\n Pseudo code below that attempts to solve this problems by making the  \\nfollowing Assumptions : \\n\\n  1) It is ok to use ONE  system property  \\\"derby.storage.jvmid\\\" to identify  \\n     a jvm instance id.  \\n 2) It is ok to use interned strings to synchronize across class loader.  \\n 3) It is ok to call getCanonicalPath(), i think this may require permission  \\n    for \\\"user.dir\\\" property if it is not already required. Other solution \\n    may be to assign an ID string on create of the DB and user that for  \\n    DB level synchronization.  \\n 4) It is ok to rely on the class finalizer to cleanup db lock state,  \\n    when the database  is NOT any more because the loader that booted  \\n    the database is garbage  collected.  \\n\\n\\n \\/* \\nPseudo code to lock the DB to prevent multiple instance of a database running  \\nconcurrently through class loaders in a single instance of jvm or \\nmultiple instance of jvm.    \\n\\n Note: Following code class is in a separate class just to understand it  \\nas separate issue , this code should probably go into the  \\ndataFactory class where current db-locking is done.  \\n*\\/ \\nClass DbLock { \\n\\n     private static final String DERYB_JVM_ID  = \\\"derby.storage.jvmid\\\"; \\n    private String dbCannonicalPath;   \\/\\/ canonical of the db being booted. \\n    private FileLock fileLock  = null; \\n    private boolean dbLocked = false; \\n\\n     DbLock (String dbCannonicalPath)  \\n{\\n        this.dbCannonicalPath = dbCannonicalPath;\\n    }\\n\\n     \\/*  \\n \\n\\t get a unique JVM ID \\n     *\\/ \\n    private getJvmId () { \\n        \\/\\/ synchronize across class loaders. \\n        synchronize(DERYB_JVM_ID) { \\n \\n\\n\\n             jvmid = System.getProperty(DERYB_JVM_ID); \\n            \\/\\/ if jvm id is not already exist, generate one  \\n            \\/\\/ and save it into the \\\"derby.storage.jvmid\\\" system \\n            \\/\\/ property. \\n            if (jvmid == null)  \\n{\\n                \\/\\/generate a new UUID based on the time and IP ..etc. \\n                jvmid = generateJvmId() \\n                    System.setProperty(\\\"derby.storage.jvmid\\\");\\n            }\\n         } \\n    } \\n\\n     \\/* \\n \\n\\t Lock the db,  so that other class loader or \\n\\t another jvm won\'t be able to boot the same database. \\n     *\\/ \\n    public lock_db_onboot(String dbCannonicalPath)  { \\n \\n\\n\\n          \\/\\/ Get a file Lock on boot() ; \\/\\/ this already works  \\n         fileLock = getFileLock(\\\"dbex.lck\\\"); \\n         if (lock == null)  \\n{\\n             \\/\\/ if we don\'t get lock means , some other jvm already \\n             \\/\\/ booted it throws  ALREADY_BOOTED error.\\n             throw ALREADY_BOOTED;\\n         }\\n  else { \\n\\n              \\/\\/ file lock can be acquired even if the database is already  \\n             \\/\\/ booted by a different class loader. Check if another class  \\n             \\/\\/ loader has booted  the DB.  This is done by checking the  \\n             \\/\\/ JVMID written in the dbex.lck  file. If the JVMID is same  \\n             \\/\\/ as what is stored in the system property, \\n             \\/\\/ then database is already booted , throw the error.  \\n             currentJvmId =  getJvmId(); \\n             synchronize(dbCannonicalPath) { \\n                 onDisk_JVM_ID = readIdFromDisk() ; \\/\\/ read ID from the dbex.lck file. \\n                 if (OnDisk_JVM_ID == current_jvm_id )  \\n                     throw (\\\"DATABASE IS ALREADY BOOTED\\\");   \\n                 else \\n{\\n                     dbLocked = true;\\n                     writeId(currentJvmId);  \\/\\/update the dbex.lck file) . \\n                 }\\n              } \\n         } \\n    } \\n\\n\\n\\n     \\/* \\n \\n\\t Called on shutdown\\/garbage collection. \\n     *\\/  \\n    unlock_db() { \\n        if (dbLocked) \\n  Unknown macro: {            Strinng Ondisk_jvm_id =  &quot;-1&quot;;  \\/\\/jvm id should never have been a -1.            synchronize(dbCannonicalPath) {\\n                writeIdToDisk(Ondisk_jvm_id);  \\/\\/update the dbex.lck file) . \\n            }            releaseFileLock(fileLock);            dbLocked =  false;        }   \\n     }  \\n \\n\\n\\n\\n     \\/* \\n \\n\\t if the db is not shutdown, this method should release \\n\\t the  db lock related resources during this class finalization. \\n     *\\/ \\n    protected void finalize() throws Throwable \\n    {\\n        unlock_db();\\n    }\\n }  \\n \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12496538\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12496538&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12496538\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12496538_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12496538_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/May\\/07 11:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-17T11:29:14+0000\'\u003e17\\/May\\/07 11:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTest to parallely boot the database using multiple threads in different class loaders might fail\u003cbr\\/\u003e\\nwith NPE if \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2649\\\" title=\\\"An unsuccessful boot attempt of an booted database can potentially delete files in the temp directory that are in use. \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2649\\\"\u003eDERBY-2649\u003c\\/a\u003e is not fixed. Tempory workaround is to check for null in DirFile.java:deleteAll(). \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12496538_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12496538_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/May\\/07 11:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-17T11:29:14+0000\'\u003e17\\/May\\/07 11:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Test to parallely boot the database using multiple threads in different class loaders might fail \\nwith NPE if  DERBY-2649  is not fixed. Tempory workaround is to check for null in DirFile.java:deleteAll().               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12496541\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12496541&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12496541\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12496541_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12496541_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/May\\/07 11:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-17T11:54:44+0000\'\u003e17\\/May\\/07 11:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached is a patch with partial implementation of  the intra-jvm db \u003cbr\\/\u003e\\nlock mechanism to prevent users from running multiple instances of the same\u003cbr\\/\u003e\\ndatabase using different class loaders in the same jvm. Existing \u003cbr\\/\u003e\\nsolution already prevents users from running multiple instances across jvms.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlthough I have not assigned this issue to myself, have been working on this\u003cbr\\/\u003e\\nissue on\\/off for some time. But I don\'t have free cycles to work on this bug for \u003cbr\\/\u003e\\nthe upcoming release. I am posting the patch with whatever work I have done\u003cbr\\/\u003e\\nsofar. If some one can enhance the attached patch and fix this issue, \u003cbr\\/\u003e\\nthat will be great.\u003c\\/p\u003e\\n\\n\u003cp\u003eIntra-jvm db lock is provided by using global derby specific jvm instance id.\u003cbr\\/\u003e\\nOn a first boot of any derby database in a jvm, an UUID is generated and \u003cbr\\/\u003e\\nstored in a system property (\\\"derby.storage.jvmInstanceID\\\"). This id is written \u003cbr\\/\u003e\\nto the dbex.lck file when the database is booted. If the ID in the dbex.lck file \u003cbr\\/\u003e\\nand the current jvm id stored in the system property\u003cbr\\/\u003e\\n\\\"derby.storage.jvmInstanceID\\\" are same then the database is already booted, and \u003cbr\\/\u003e\\nan exception will be thrown and database will not be booted. On a database\u003cbr\\/\u003e\\nshutdown , an Invalid JVM id is written to the dbex.lck file, so that if the \u003cbr\\/\u003e\\ndatabase booted again ID\'s will not be equal, which means database is not\u003cbr\\/\u003e\\nalready booted, the database will be booted successfully. I am using the \u003cbr\\/\u003e\\nexisting UUID factory in the derby to generate the derby jvm id.\u003c\\/p\u003e\\n\\n\u003cp\u003eSynchronization is done by using the interned strings. Synchronization \u003cbr\\/\u003e\\nacross the JVM is done on \\\"derby.storage.jvmInstanceID\\\" string. And \u003cbr\\/\u003e\\nSynchronization for a database is done on the database directory. This \u003cbr\\/\u003e\\nmay need to be changed to a database name, because it may not be possible \u003cbr\\/\u003e\\nto get the canonical path always and it is necessary to synchronize on \u003cbr\\/\u003e\\na  string, that is unique to a database in a jvm. \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eIn my earlier proposed solution I mentioned about releasing the db \u003cbr\\/\u003e\\nlocks using finalizer. After doing some testing , I realized there is \u003cbr\\/\u003e\\nno need to address unlocking the database on garbage collection, \u003cbr\\/\u003e\\nusing the finalizer. My understanding is unless users shutdown \u003cbr\\/\u003e\\nthe database rawStoreDaemon and antiGC thread will hold on to the \u003cbr\\/\u003e\\nresources and the classes will not be unloaded. So the only way users\u003cbr\\/\u003e\\ncan boot an already booted database but not in use using another class \u003cbr\\/\u003e\\nloader instance in the same jvm is by doing a shutdown from the class \u003cbr\\/\u003e\\nloader that booted the database. If some thinks this is not \u003cbr\\/\u003e\\ntrue,  please correct me. \u003c\\/p\u003e\\n\\n\u003cp\u003eTo do :\u003c\\/p\u003e\\n\\n\u003cp\u003e1) cleanup error handling on IOExceptions and add new message for the \u003cbr\\/\u003e\\n   intra-jvm db lock. \u003c\\/p\u003e\\n\\n\u003cp\u003e2) Currently dataDirectory path string is is used for  synchronization to \u003cbr\\/\u003e\\n   prevent multiple boots of a database. This may need to be changed to \u003cbr\\/\u003e\\n   the db name.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) Make the classLoaderBootTest.java run under security manager. \u003c\\/p\u003e\\n\\n\u003cp\u003e4)  Add test cases for booting different databases parallelly on different \u003cbr\\/\u003e\\n    threads with different class loaders. May not be really required , because\u003cbr\\/\u003e\\n    even booting a single database through different threads shoud test \u003cbr\\/\u003e\\n    the same thing. But it may be better to add a test case, just to be safe!\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e5) Run the test with large number of threads.\u003c\\/p\u003e\\n\\n\u003cp\u003e6) Anything else I have forgotten !\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThanks \u003cbr\\/\u003e\\n-suresh\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12496541_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12496541_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/May\\/07 11:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-17T11:54:44+0000\'\u003e17\\/May\\/07 11:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached is a patch with partial implementation of  the intra-jvm db  \\nlock mechanism to prevent users from running multiple instances of the same \\ndatabase using different class loaders in the same jvm. Existing  \\nsolution already prevents users from running multiple instances across jvms. \\n\\n Although I have not assigned this issue to myself, have been working on this \\nissue on\\/off for some time. But I don\'t have free cycles to work on this bug for  \\nthe upcoming release. I am posting the patch with whatever work I have done \\nsofar. If some one can enhance the attached patch and fix this issue,  \\nthat will be great. \\n\\n Intra-jvm db lock is provided by using global derby specific jvm instance id. \\nOn a first boot of any derby database in a jvm, an UUID is generated and  \\nstored in a system property (\\\"derby.storage.jvmInstanceID\\\"). This id is written  \\nto the dbex.lck file when the database is booted. If the ID in the dbex.lck file  \\nand the current jvm id stored in the system property \\n\\\"derby.storage.jvmInstanceID\\\" are same then the database is already booted, and  \\nan exception will be thrown and database will not be booted. On a database \\nshutdown , an Invalid JVM id is written to the dbex.lck file, so that if the  \\ndatabase booted again ID\'s will not be equal, which means database is not \\nalready booted, the database will be booted successfully. I am using the  \\nexisting UUID factory in the derby to generate the derby jvm id. \\n\\n Synchronization is done by using the interned strings. Synchronization  \\nacross the JVM is done on \\\"derby.storage.jvmInstanceID\\\" string. And  \\nSynchronization for a database is done on the database directory. This  \\nmay need to be changed to a database name, because it may not be possible  \\nto get the canonical path always and it is necessary to synchronize on  \\na  string, that is unique to a database in a jvm.  \\n\\n\\n In my earlier proposed solution I mentioned about releasing the db  \\nlocks using finalizer. After doing some testing , I realized there is  \\nno need to address unlocking the database on garbage collection,  \\nusing the finalizer. My understanding is unless users shutdown  \\nthe database rawStoreDaemon and antiGC thread will hold on to the  \\nresources and the classes will not be unloaded. So the only way users \\ncan boot an already booted database but not in use using another class  \\nloader instance in the same jvm is by doing a shutdown from the class  \\nloader that booted the database. If some thinks this is not  \\ntrue,  please correct me.  \\n\\n To do : \\n\\n 1) cleanup error handling on IOExceptions and add new message for the  \\n   intra-jvm db lock.  \\n\\n 2) Currently dataDirectory path string is is used for  synchronization to  \\n   prevent multiple boots of a database. This may need to be changed to  \\n   the db name. \\n\\n 3) Make the classLoaderBootTest.java run under security manager.  \\n\\n 4)  Add test cases for booting different databases parallelly on different  \\n    threads with different class loaders. May not be really required , because \\n    even booting a single database through different threads shoud test  \\n    the same thing. But it may be better to add a test case, just to be safe! \\n\\n\\n 5) Run the test with large number of threads. \\n\\n 6) Anything else I have forgotten ! \\n\\n\\n Thanks  \\n-suresh \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12498037\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12498037&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12498037\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12498037_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12498037_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/07 22:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-22T22:22:17+0000\'\u003e22\\/May\\/07 22:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Suresh for the patch!  I was wondering, why do we need  setContextClassLoader privileges for derby.jar with the change?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12498037_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12498037_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/07 22:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-22T22:22:17+0000\'\u003e22\\/May\\/07 22:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Suresh for the patch!  I was wondering, why do we need  setContextClassLoader privileges for derby.jar with the change?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12498050\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12498050&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12498050\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12498050_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12498050_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/07 23:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-22T23:00:04+0000\'\u003e22\\/May\\/07 23:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e[ Show \\u00BB ] Kathey Marsden \u003cspan class=\\\"error\\\"\u003e&#91;22\\/May\\/07 03:22 PM&#93;\u003c\\/span\u003e Thanks Suresh for the patch! I was wondering, why do we need \u003cbr\\/\u003e\\nsetContextClassLoader privileges for derby.jar with the change? \u003c\\/p\u003e\\n\\n\u003cp\u003eI must have added that permission while debugging to run the test under security manager. \u003cbr\\/\u003e\\nOnly security permission that is required for derby.jar  is read\\/write  of derby.storage.jvmInstanceID \u003cbr\\/\u003e\\nproperty.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for for volunteering to fix the bug, Kathey.\u003cbr\\/\u003e\\n.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12498050_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12498050_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/07 23:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-22T23:00:04+0000\'\u003e22\\/May\\/07 23:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    [ Show \\u00BB ] Kathey Marsden  &#91;22\\/May\\/07 03:22 PM&#93;  Thanks Suresh for the patch! I was wondering, why do we need  \\nsetContextClassLoader privileges for derby.jar with the change?  \\n\\n I must have added that permission while debugging to run the test under security manager.  \\nOnly security permission that is required for derby.jar  is read\\/write  of derby.storage.jvmInstanceID  \\nproperty. \\n\\n Thanks for for volunteering to fix the bug, Kathey. \\n.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12499134\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12499134&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12499134\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12499134_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12499134_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/May\\/07 16:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-25T16:11:41+0000\'\u003e25\\/May\\/07 16:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSuresh said\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;2) Currently dataDirectory path string is is used for synchronization to\u003cbr\\/\u003e\\n&gt;   prevent multiple boots of a database. This may need to be changed to\u003cbr\\/\u003e\\n&gt;   the db name.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhy does this need to be changed?  If we switched to databaseName might there be potential for duplicate database names?  The dataDirectory  path seems logical to me.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12499134_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12499134_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/May\\/07 16:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-25T16:11:41+0000\'\u003e25\\/May\\/07 16:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Suresh said \\n\\n &gt;2) Currently dataDirectory path string is is used for synchronization to \\n&gt;   prevent multiple boots of a database. This may need to be changed to \\n&gt;   the db name. \\n\\n Why does this need to be changed?  If we switched to databaseName might there be potential for duplicate database names?  The dataDirectory  path seems logical to me.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12499137\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12499137&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12499137\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12499137_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12499137_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/May\\/07 16:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-25T16:18:39+0000\'\u003e25\\/May\\/07 16:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe issue with the path is that the canonical path would be needed which requires permission to read system property user.dir, which might not be granted.\u003cbr\\/\u003e\\nThe base name of the path (\\\"database name\\\") is easy to obtain and works just as well. The synchronization on this object is very short lived, thus it does not stop two databases with the same name but different paths from booting.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12499137_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12499137_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/May\\/07 16:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-25T16:18:39+0000\'\u003e25\\/May\\/07 16:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The issue with the path is that the canonical path would be needed which requires permission to read system property user.dir, which might not be granted. \\nThe base name of the path (\\\"database name\\\") is easy to obtain and works just as well. The synchronization on this object is very short lived, thus it does not stop two databases with the same name but different paths from booting.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12499894\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12499894&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12499894\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12499894_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12499894_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/May\\/07 19:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-29T19:16:00+0000\'\u003e29\\/May\\/07 19:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis patch is not yet ready for commit.  The multithreaded test testBootingDatabaseInMultipleThread fails intermittently allowing the database to be booted  twice.  I am looking to see where there may be a synchronization issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12499894_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12499894_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/May\\/07 19:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-29T19:16:00+0000\'\u003e29\\/May\\/07 19:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This patch is not yet ready for commit.  The multithreaded test testBootingDatabaseInMultipleThread fails intermittently allowing the database to be booted  twice.  I am looking to see where there may be a synchronization issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12499906\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12499906&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12499906\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12499906_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12499906_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/May\\/07 20:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-29T20:04:48+0000\'\u003e29\\/May\\/07 20:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhen the multithreaded failure occurs there is an NPE accessing the lockfile.  Attaching the derby.log.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12499906_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12499906_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/May\\/07 20:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-29T20:04:48+0000\'\u003e29\\/May\\/07 20:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    When the multithreaded failure occurs there is an NPE accessing the lockfile.  Attaching the derby.log.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12500202\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12500202&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12500202\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12500202_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12500202_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/May\\/07 17:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-30T17:51:20+0000\'\u003e30\\/May\\/07 17:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached is a patch that fixes the NPE, but there are still issues with the multithreaded test.  Sometimes with 9 or more threads in startConcurrentDatabaseBoots we get dual boot without any message to the derby.log.   I think there is one of two issues here:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) There is no synchronization across classloaders, so even though we synchronize on the databaseName() it is not useful when two threads from different ClassLoaders come into the synchronized code.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Since getting the exFileLock is not within the synchronized code.  It is possible that the state of the dbex.lck file on disk changes before the boot.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am not sure how to resolve these issues, especially 1.  I\'d appreciate any advice on the issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12500202_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12500202_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/May\\/07 17:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-05-30T17:51:20+0000\'\u003e30\\/May\\/07 17:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached is a patch that fixes the NPE, but there are still issues with the multithreaded test.  Sometimes with 9 or more threads in startConcurrentDatabaseBoots we get dual boot without any message to the derby.log.   I think there is one of two issues here: \\n\\n 1) There is no synchronization across classloaders, so even though we synchronize on the databaseName() it is not useful when two threads from different ClassLoaders come into the synchronized code. \\n\\n 2) Since getting the exFileLock is not within the synchronized code.  It is possible that the state of the dbex.lck file on disk changes before the boot. \\n\\n I am not sure how to resolve these issues, especially 1.  I\'d appreciate any advice on the issue. \\n\\n Thanks \\n\\n Kathey \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12501283\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12501283&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12501283\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12501283_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12501283_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jun\\/07 17:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-04T17:23:06+0000\'\u003e04\\/Jun\\/07 17:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOriginally I thought I would make read\\/write access to the property mandatory but since policy files typically have to be changed out at the deployed site,  I think I will make it so it just prints a warning if access is not granted for the property.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12501283_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12501283_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jun\\/07 17:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-04T17:23:06+0000\'\u003e04\\/Jun\\/07 17:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Originally I thought I would make read\\/write access to the property mandatory but since policy files typically have to be changed out at the deployed site,  I think I will make it so it just prints a warning if access is not granted for the property. \\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12502063\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12502063&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12502063\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12502063_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12502063_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jun\\/07 19:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-06T19:45:57+0000\'\u003e06\\/Jun\\/07 19:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ekeep in mind that if we make setting\\/reading the property optional it presents a very mixed set of possiblities.  We need to at least document and maybe refer to them in the error message.  Each derby.jar in each different class loader may have a different property set so one set may be able to read but not write, another can\'t read or write, and another can read and write.  Some app may get different locking behaviors if they can read by not write based on whether they are the first one in or not ( they sometimes may get error message and sometimes not based on what someone else has done).\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12502063_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12502063_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jun\\/07 19:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-06T19:45:57+0000\'\u003e06\\/Jun\\/07 19:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    keep in mind that if we make setting\\/reading the property optional it presents a very mixed set of possiblities.  We need to at least document and maybe refer to them in the error message.  Each derby.jar in each different class loader may have a different property set so one set may be able to read but not write, another can\'t read or write, and another can read and write.  Some app may get different locking behaviors if they can read by not write based on whether they are the first one in or not ( they sometimes may get error message and sometimes not based on what someone else has done). \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12502563\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12502563&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12502563\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12502563_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12502563_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jun\\/07 23:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-07T23:04:37+0000\'\u003e07\\/Jun\\/07 23:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is the latest patch for this issue.  I think we are getting close, but I have reached a sticking point that I can\'t seem to get past.  \u003c\\/p\u003e\\n\\n\u003cp\u003eIf I run with classes or even with jars from within Eclipse, it all runs fine and even 100 threads pass with no problem.  But for some unknown reason, when I run with jars from the commandline, it allows dual boot.  \u003c\\/p\u003e\\n\\n\u003cp\u003eThe primary change from the last patch is that I had to synchronize the entire call to privGetJBMSLockOnDB() to avoid intermittent dual boot failures in the multiThreaded test.\u003c\\/p\u003e\\n\\n\u003cp\u003eI also added a warning instead of failure if the user did not have permission to access the system property.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnyway, if someone is so inclined it would be great to have another pair of eyes on this to figure out what the problem is running with jars.\u003cbr\\/\u003e\\nI ran derbyall and suites.All. All passed with classes, but with jars ClassLoaderBootTest fails miserably.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12502563_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12502563_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jun\\/07 23:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-07T23:04:37+0000\'\u003e07\\/Jun\\/07 23:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is the latest patch for this issue.  I think we are getting close, but I have reached a sticking point that I can\'t seem to get past.   \\n\\n If I run with classes or even with jars from within Eclipse, it all runs fine and even 100 threads pass with no problem.  But for some unknown reason, when I run with jars from the commandline, it allows dual boot.   \\n\\n The primary change from the last patch is that I had to synchronize the entire call to privGetJBMSLockOnDB() to avoid intermittent dual boot failures in the multiThreaded test. \\n\\n I also added a warning instead of failure if the user did not have permission to access the system property. \\n\\n Anyway, if someone is so inclined it would be great to have another pair of eyes on this to figure out what the problem is running with jars. \\nI ran derbyall and suites.All. All passed with classes, but with jars ClassLoaderBootTest fails miserably. \\n\\n Kathey \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12502848\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12502848&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12502848\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12502848_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12502848_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jun\\/07 15:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-08T15:44:20+0000\'\u003e08\\/Jun\\/07 15:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRun without security manager the test passes with jars.  So I will try to figure out what permission is missing\\/needed with jars.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12502848_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12502848_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jun\\/07 15:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-08T15:44:20+0000\'\u003e08\\/Jun\\/07 15:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Run without security manager the test passes with jars.  So I will try to figure out what permission is missing\\/needed with jars.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12503950\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12503950&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12503950\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12503950_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12503950_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/07 18:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-12T18:16:38+0000\'\u003e12\\/Jun\\/07 18:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have been unable to figure out exactly what the permission issue is when running with security manager and jars.  I did find that it was corrected by giving AllPermissions to derbyTesting.jar.  I am thinking therfore that the issue is with the test and not the change itself.  I would like to go ahead and checkin the change, disabling security manager for the jars and file another issue to correct that problem.   Reviews welcome and let me  know if anyone has objections to going ahead and checking in the change.  Substantive changes from the initial patch are:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eFix intermittent NPE\u003c\\/li\u003e\\n\\t\u003cli\u003eFix problem with dual boot with many threads, by expanding the synchronization to include the full privJBMSLockOnDB\u003c\\/li\u003e\\n\\t\u003cli\u003eLog  warning not fail if System Property permission is not granted instead of failing.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12503950_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12503950_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/07 18:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-12T18:16:38+0000\'\u003e12\\/Jun\\/07 18:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have been unable to figure out exactly what the permission issue is when running with security manager and jars.  I did find that it was corrected by giving AllPermissions to derbyTesting.jar.  I am thinking therfore that the issue is with the test and not the change itself.  I would like to go ahead and checkin the change, disabling security manager for the jars and file another issue to correct that problem.   Reviews welcome and let me  know if anyone has objections to going ahead and checking in the change.  Substantive changes from the initial patch are: \\n \\n\\t Fix intermittent NPE \\n\\t Fix problem with dual boot with many threads, by expanding the synchronization to include the full privJBMSLockOnDB \\n\\t Log  warning not fail if System Property permission is not granted instead of failing. \\n \\n\\n\\n Kathey \\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12503967\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12503967&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12503967\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12503967_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12503967_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/07 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-12T19:05:36+0000\'\u003e12\\/Jun\\/07 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFrom a very quick look at the code two things jumped out at me:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Why does the test need a Derby specific class loader? The upgrade tests don\'t and there are performing the same style of operation.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) The new method StorageFile.getLockedFile() is part of the api so its definition needs to be clear.\u003c\\/p\u003e\\n\\n\u003cp\u003e  2a) In the interface it says it returns the file for the lock file, but I don\'t think lock file is defined anywhere in the interface description.\u003cbr\\/\u003e\\n  2b) The interface doesn\'t indicate it can return null, but one implementation of it does.\u003cbr\\/\u003e\\n  2c) Why is this method on StorageFile, it\'s not an attribute of a specific file, at least I don;t think it is. Is there a lock file per open file?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12503967_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12503967_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/07 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-12T19:05:36+0000\'\u003e12\\/Jun\\/07 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    From a very quick look at the code two things jumped out at me: \\n\\n 1) Why does the test need a Derby specific class loader? The upgrade tests don\'t and there are performing the same style of operation. \\n\\n 2) The new method StorageFile.getLockedFile() is part of the api so its definition needs to be clear. \\n\\n   2a) In the interface it says it returns the file for the lock file, but I don\'t think lock file is defined anywhere in the interface description. \\n  2b) The interface doesn\'t indicate it can return null, but one implementation of it does. \\n  2c) Why is this method on StorageFile, it\'s not an attribute of a specific file, at least I don;t think it is. Is there a lock file per open file?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12504352\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12504352&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12504352\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12504352_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504352_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/07 17:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-13T17:49:19+0000\'\u003e13\\/Jun\\/07 17:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Dan for the comment.\u003c\\/p\u003e\\n\\n\u003cp\u003egetExclusiveLock()  and getLockedFile() are only substatively relevant to DirFile4 and for that file yes, I think there is a lock file per open file.   I will change the definition to say that getLockedFile()  will return a RandomAcess file to the lock file obtained by getExcluciveLock()  if an exclusive lock was successfully obtained with getExclusiveLock() otherwise it will return null.\u003c\\/p\u003e\\n\\n\u003cp\u003eDoes that sound right?\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll look at the test.  Maybe I will fix it post checkin if I am not able to get it fixed up today.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12504352_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504352_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/07 17:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-13T17:49:19+0000\'\u003e13\\/Jun\\/07 17:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Dan for the comment. \\n\\n getExclusiveLock()  and getLockedFile() are only substatively relevant to DirFile4 and for that file yes, I think there is a lock file per open file.   I will change the definition to say that getLockedFile()  will return a RandomAcess file to the lock file obtained by getExcluciveLock()  if an exclusive lock was successfully obtained with getExclusiveLock() otherwise it will return null. \\n\\n Does that sound right? \\n\\n I\'ll look at the test.  Maybe I will fix it post checkin if I am not able to get it fixed up today. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12504386\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12504386&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12504386\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12504386_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504386_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/07 19:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-13T19:34:29+0000\'\u003e13\\/Jun\\/07 19:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eApplications will need to set a new permission in their policy file.  So this will affect existing applications and release note is needed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12504386_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504386_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/07 19:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-13T19:34:29+0000\'\u003e13\\/Jun\\/07 19:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Applications will need to set a new permission in their policy file.  So this will affect existing applications and release note is needed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12504389\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12504389&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12504389\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12504389_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504389_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/07 19:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-13T19:47:25+0000\'\u003e13\\/Jun\\/07 19:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003erelease note\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12504389_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504389_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/07 19:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-13T19:47:25+0000\'\u003e13\\/Jun\\/07 19:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    release note              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12504446\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12504446&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12504446\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12504446_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504446_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/07 21:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-13T21:49:01+0000\'\u003e13\\/Jun\\/07 21:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; I think there is a lock file per open file. I will change the definition to say that getLockedFile() will return a RandomAcess file to the lock file obtained by getExcluciveLock() if an exclusive lock was successfully obtained with getExclusiveLock() otherwise it will return null. \u003c\\/p\u003e\\n\\n\u003cp\u003eSorry, still somewhat lost. Why is a call to get a random access file on StorageFile needed since it already has such a method?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12504446_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504446_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/07 21:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-13T21:49:01+0000\'\u003e13\\/Jun\\/07 21:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; I think there is a lock file per open file. I will change the definition to say that getLockedFile() will return a RandomAcess file to the lock file obtained by getExcluciveLock() if an exclusive lock was successfully obtained with getExclusiveLock() otherwise it will return null.  \\n\\n Sorry, still somewhat lost. Why is a call to get a random access file on StorageFile needed since it already has such a method?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12504471\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12504471&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12504471\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12504471_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504471_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/07 23:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-13T23:02:31+0000\'\u003e13\\/Jun\\/07 23:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e-1 on this patch (now applied as 547042 &amp; 547046):\u003c\\/p\u003e\\n\\n\u003cp\u003e The additional method on StorageFile is not well defined.\u003c\\/p\u003e\\n\\n\u003cp\u003e  StorageFile.getExclusiveFileLock() indicates it gets an exclusive lock on the name represented by StorageFile.\u003c\\/p\u003e\\n\\n\u003cp\u003e The new method StorageFile.getLockedFile() seems to imply that if a StorageFile is locked, then there is a new\u003cbr\\/\u003e\\n  different file created to perform the lock, thus one can modify the contents of the two files independently,\u003cbr\\/\u003e\\n  using the existing StorageFile.getRandomAccessFile() and now the new StorageFile.getLockedFile().\u003cbr\\/\u003e\\n  (Otherwise why have the new method, one can already get a random access to a StorageFile??).\u003c\\/p\u003e\\n\\n\u003cp\u003e  This seems problematic for a few reasons:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eseems inefficient, creating a new file to lock another\u003c\\/li\u003e\\n\\t\u003cli\u003eseems to change the contract of the existing method getExclusiveFileLock() (no mention of requiring a separate file)\u003c\\/li\u003e\\n\\t\u003cli\u003epossibly hard to implement for an arbitary IO implementation.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e   Maybe though I\'m misunderstanding what is going on, the javadoc comment for getLockedFile() does seem to have\u003cbr\\/\u003e\\na couple of typos in it (e.g. \\\"exclusing e lock\\\"). If there\'s some good explanation for what is going on and the relationship\u003cbr\\/\u003e\\nbetween StorageFile.getLockedFile() and StorageFile.getRandomAccessFile() can be well defined then I can frop my veto.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12504471_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504471_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jun\\/07 23:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-13T23:02:31+0000\'\u003e13\\/Jun\\/07 23:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    -1 on this patch (now applied as 547042 &amp; 547046): \\n\\n  The additional method on StorageFile is not well defined. \\n\\n   StorageFile.getExclusiveFileLock() indicates it gets an exclusive lock on the name represented by StorageFile. \\n\\n  The new method StorageFile.getLockedFile() seems to imply that if a StorageFile is locked, then there is a new \\n  different file created to perform the lock, thus one can modify the contents of the two files independently, \\n  using the existing StorageFile.getRandomAccessFile() and now the new StorageFile.getLockedFile(). \\n  (Otherwise why have the new method, one can already get a random access to a StorageFile??). \\n\\n   This seems problematic for a few reasons: \\n \\n\\t seems inefficient, creating a new file to lock another \\n\\t seems to change the contract of the existing method getExclusiveFileLock() (no mention of requiring a separate file) \\n\\t possibly hard to implement for an arbitary IO implementation. \\n \\n\\n\\n    Maybe though I\'m misunderstanding what is going on, the javadoc comment for getLockedFile() does seem to have \\na couple of typos in it (e.g. \\\"exclusing e lock\\\"). If there\'s some good explanation for what is going on and the relationship \\nbetween StorageFile.getLockedFile() and StorageFile.getRandomAccessFile() can be well defined then I can frop my veto.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12504721\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12504721&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12504721\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12504721_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504721_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jun\\/07 13:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-14T13:25:26+0000\'\u003e14\\/Jun\\/07 13:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNote I\'m reviewing the patch called; derby-700_06_07_07_diff.txt \u003cbr\\/\u003e\\nComments on 6\\/12 seem to indicate a new patch for review but nothing seems to have been attached that day, I think those comments are about the previous version.\u003c\\/p\u003e\\n\\n\u003cp\u003eSome comments on the patch:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eIn getIntraJvmDbLock() there is this comment:\u003cbr\\/\u003e\\n   +        \\/\\/ synchronizing across the same database, by using interned \u003cbr\\/\u003e\\n   +        \\/\\/ version of the database name\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e  but I can\'t see any synchronization.  It seems the synchronization has moved to wrap the entire call to privGetJBMSLockOnDB().\u003cbr\\/\u003e\\n  Since this synchronization is key it would be good to get the comments clear so that future readers can understand how this works.\u003cbr\\/\u003e\\n  Also I think putting the synchronization in the privGetJBMSLockOnDB() method would be much clearer than hiding it in the run() method.\u003cbr\\/\u003e\\n  I see the comment above indicating the synchronization was expanded to be the full privGetJBMSLockOnDB() method, but there is\u003cbr\\/\u003e\\n  no reason given. Can you share your thoughts on why this is required?\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ethe synchronization for getting the intra jvm lock and releasing it are using different objects. Don\'t they need to use the same object?\u003cbr\\/\u003e\\n  If not it should be clearly commented how the synchronization is working.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eIn getIntraJvmDbLock() and releaseIntraJvmDbLock() the StorageAccessFile lckFileRaf is never closed, I think it needs to be or have comments indicating why it is not closed. Maybe it\'s related to the issue of the new method added to StorageFile??\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eIn releaseIntraJvmDbLock() I was a little unclear by the invalid uuid concept. Is it an invalid uuid such that recreateUUID will throw an exception in getIntraJvmDbLock() or is it a valid representation of a uuid that can never be created by Derby?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eUsing dataDirectory.intern() to synchronize across class loaders in  releaseIntraJvmDbLock() could probably use more comments, basically describing what guarantees that all derby systems have the same path for the data directory for a given database?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThanks for working on this, it will help stop users corrupting their own databases.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12504721_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504721_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jun\\/07 13:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-14T13:25:26+0000\'\u003e14\\/Jun\\/07 13:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Note I\'m reviewing the patch called; derby-700_06_07_07_diff.txt  \\nComments on 6\\/12 seem to indicate a new patch for review but nothing seems to have been attached that day, I think those comments are about the previous version. \\n\\n Some comments on the patch: \\n\\n \\n\\t In getIntraJvmDbLock() there is this comment: \\n   +        \\/\\/ synchronizing across the same database, by using interned  \\n   +        \\/\\/ version of the database name \\n \\n\\n\\n   but I can\'t see any synchronization.  It seems the synchronization has moved to wrap the entire call to privGetJBMSLockOnDB(). \\n  Since this synchronization is key it would be good to get the comments clear so that future readers can understand how this works. \\n  Also I think putting the synchronization in the privGetJBMSLockOnDB() method would be much clearer than hiding it in the run() method. \\n  I see the comment above indicating the synchronization was expanded to be the full privGetJBMSLockOnDB() method, but there is \\n  no reason given. Can you share your thoughts on why this is required? \\n\\n \\n\\t the synchronization for getting the intra jvm lock and releasing it are using different objects. Don\'t they need to use the same object? \\n  If not it should be clearly commented how the synchronization is working. \\n \\n\\n\\n \\n\\t In getIntraJvmDbLock() and releaseIntraJvmDbLock() the StorageAccessFile lckFileRaf is never closed, I think it needs to be or have comments indicating why it is not closed. Maybe it\'s related to the issue of the new method added to StorageFile?? \\n \\n\\n\\n \\n\\t In releaseIntraJvmDbLock() I was a little unclear by the invalid uuid concept. Is it an invalid uuid such that recreateUUID will throw an exception in getIntraJvmDbLock() or is it a valid representation of a uuid that can never be created by Derby? \\n \\n\\n\\n \\n\\t Using dataDirectory.intern() to synchronize across class loaders in  releaseIntraJvmDbLock() could probably use more comments, basically describing what guarantees that all derby systems have the same path for the data directory for a given database? \\n \\n\\n\\n Thanks for working on this, it will help stop users corrupting their own databases. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12504735\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12504735&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12504735\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12504735_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504735_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jun\\/07 13:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-14T13:40:28+0000\'\u003e14\\/Jun\\/07 13:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCouple of minor additonal comments:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe code would be a little simpler if getJvmId() just returned a String instead of a UUID. Then there\'s no need to convert\u003cbr\\/\u003e\\n    the value read back from disk to a uuid. String\'s compare just as well as UUIDs for this purpose.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe reading of the on-disk identifier has this code:\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e+            try \u003cbr\\/\u003e\\n+            \u003c\\/p\u003e\\n{\\n+                if (exFileLock.length() != 0)\\n+                    onDiskJvmId = uuidFactory.recreateUUID(lckFileRaf.readUTF());\\n+            }\\n\u003cp\u003e   \u003cbr\\/\u003e\\n+            catch (Exception e)\u003cbr\\/\u003e\\n+            \u003c\\/p\u003e\\n{\\n+                \\/\\/ The previous owner of the lock may have died before we\\n+                \\/\\/ finish writing its UUID down. Assume uuid file is invalid\\n+                \\/\\/ Set the id on the disk to null value.\\n+                onDiskJvmId = null;\\n+            }\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eWhy is the file length of zero special cased?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eI think the comment could be improved to\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e+                \\/\\/ The previous owner of the lock may have died before we\u003cbr\\/\u003e\\n+                \\/\\/ finish writing its UUID down. Assume uuid file is invalid\u003cbr\\/\u003e\\n+                \\/\\/ and thus the database is not in use (locked).\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12504735_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504735_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jun\\/07 13:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-14T13:40:28+0000\'\u003e14\\/Jun\\/07 13:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Couple of minor additonal comments: \\n\\n \\n\\t The code would be a little simpler if getJvmId() just returned a String instead of a UUID. Then there\'s no need to convert \\n    the value read back from disk to a uuid. String\'s compare just as well as UUIDs for this purpose. \\n \\n\\n\\n \\n\\t The reading of the on-disk identifier has this code: \\n \\n\\n\\n +            try  \\n+             \\n{\\n+                if (exFileLock.length() != 0)\\n+                    onDiskJvmId = uuidFactory.recreateUUID(lckFileRaf.readUTF());\\n+            }\\n     \\n+            catch (Exception e) \\n+             \\n{\\n+                \\/\\/ The previous owner of the lock may have died before we\\n+                \\/\\/ finish writing its UUID down. Assume uuid file is invalid\\n+                \\/\\/ Set the id on the disk to null value.\\n+                onDiskJvmId = null;\\n+            }\\n\\n\\n \\n\\t Why is the file length of zero special cased? \\n \\n\\n\\n \\n\\t I think the comment could be improved to \\n \\n\\n\\n +                \\/\\/ The previous owner of the lock may have died before we \\n+                \\/\\/ finish writing its UUID down. Assume uuid file is invalid \\n+                \\/\\/ and thus the database is not in use (locked). \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12504896\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12504896&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12504896\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12504896_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504896_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jun\\/07 20:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-14T20:14:46+0000\'\u003e14\\/Jun\\/07 20:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDan I would like to understand your concerns with respect to the locking interfaces on StorageFile.    We are only going to call locking on the lock files, not on other RandomAccessFiles.  The current code is using the exising RandomAccessFile support\u003cbr\\/\u003e\\nto do this - do you think we should be creating a different type of file rather than putting the interfaces on StorageFile?\u003c\\/p\u003e\\n\\n\u003cp\u003eI agree the comments could be improved, and I guess since we are so close to a release it is better to get it right before checkin.  I was ok before with checking it in as it was and then fixing in subsequent checkin (I was planning on helping with this once code got in, instead of a patch).  \u003c\\/p\u003e\\n\\n\u003cp\u003eAt this point it looks like this won\'t make it into first release candidate, but I plan on helping to get this to a good state  for a subsequent release candidate or at least get it into the branch for anyone who wants it if we don\'t have another release candidate.  I would not hold up release candidate for this.  I think it is reasonable to get the documentation for the requested permission into the release even if we can\'t get the code in this week, is that a problem?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12504896_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504896_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jun\\/07 20:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-14T20:14:46+0000\'\u003e14\\/Jun\\/07 20:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dan I would like to understand your concerns with respect to the locking interfaces on StorageFile.    We are only going to call locking on the lock files, not on other RandomAccessFiles.  The current code is using the exising RandomAccessFile support \\nto do this - do you think we should be creating a different type of file rather than putting the interfaces on StorageFile? \\n\\n I agree the comments could be improved, and I guess since we are so close to a release it is better to get it right before checkin.  I was ok before with checking it in as it was and then fixing in subsequent checkin (I was planning on helping with this once code got in, instead of a patch).   \\n\\n At this point it looks like this won\'t make it into first release candidate, but I plan on helping to get this to a good state  for a subsequent release candidate or at least get it into the branch for anyone who wants it if we don\'t have another release candidate.  I would not hold up release candidate for this.  I think it is reasonable to get the documentation for the requested permission into the release even if we can\'t get the code in this week, is that a problem?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12504902\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12504902&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12504902\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12504902_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504902_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jun\\/07 20:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-14T20:38:36+0000\'\u003e14\\/Jun\\/07 20:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSimple question is why is a new method needed on StorageFile. Since one can already get an object to perform random access i\\/o on a StorageFile, why is a new method needed to perform the same functionality.\u003c\\/p\u003e\\n\\n\u003cp\u003eEither it is because for some reason the api requires the lock files hold different contents to the file being locked. I don\'t think this is the case.\u003c\\/p\u003e\\n\\n\u003cp\u003eOr it is because it\'s not needed. I think this is the case, but there must have been some reason for adding it. I\'m just asking what is the reason for adding such a method.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think we are creating a StorageFile to represent \\\"dbex.lck\\\" (whatever the name is) and then locking that file. That\'s all good, but why can we not modify that file using the existing methods on StorageFactory?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12504902_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504902_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jun\\/07 20:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-14T20:38:36+0000\'\u003e14\\/Jun\\/07 20:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Simple question is why is a new method needed on StorageFile. Since one can already get an object to perform random access i\\/o on a StorageFile, why is a new method needed to perform the same functionality. \\n\\n Either it is because for some reason the api requires the lock files hold different contents to the file being locked. I don\'t think this is the case. \\n\\n Or it is because it\'s not needed. I think this is the case, but there must have been some reason for adding it. I\'m just asking what is the reason for adding such a method. \\n\\n I think we are creating a StorageFile to represent \\\"dbex.lck\\\" (whatever the name is) and then locking that file. That\'s all good, but why can we not modify that file using the existing methods on StorageFactory?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12504943\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12504943&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12504943\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12504943_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504943_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jun\\/07 22:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-14T22:11:00+0000\'\u003e14\\/Jun\\/07 22:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI agree with Dan,  getLockedFile() is confusing and should not be added \u003cbr\\/\u003e\\nto the storage factory interfaces , if it can be avoided or  have better \u003cbr\\/\u003e\\ncomments.\u003c\\/p\u003e\\n\\n\u003cp\u003eJust thought I will take a moment and explain, why in the first place \u003cbr\\/\u003e\\nI added this method, I hope it will help in finding an alternative solution \u003cbr\\/\u003e\\nor make the interface better. \u003c\\/p\u003e\\n\\n\u003cp\u003eI was testing and developing  my solution on Windows. When I \u003cbr\\/\u003e\\nfirst implemented without adding the getLockedFile() method, by\u003cbr\\/\u003e\\njust getting the RandomAccessFile using StorageFile.getRandomAccessFile(), \u003cbr\\/\u003e\\nafter it is locked. I was hitting the error , java.io.IOException: \u003cbr\\/\u003e\\n\\\"\u003cbr\\/\u003e\\nThe process cannot access the file because another process has locked a \u003cbr\\/\u003e\\nportion of the file. When it write UUID to the dbex.lck file. \u003cbr\\/\u003e\\n\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eAfter bit of debugging realized , I need access to the same \u003cbr\\/\u003e\\nRandomAccesFile, that is used to the get the lock. So I simply\u003cbr\\/\u003e\\nadded the getLockedFile, which just return the same RandomAccessFile, \u003cbr\\/\u003e\\nthat is used to get the file lock.  \u003c\\/p\u003e\\n\\n\\n\u003cp\u003epublic class writeLock {\u003cbr\\/\u003e\\n\\tpublic static void main(String[] args) throws Exception \u003c\\/p\u003e\\n\\t{\\n        File lf = new File(\\\"dbex.lck\\\");\\n        RandomAccessFile raf1 = new RandomAccessFile(lf, \\\"rw\\\");\\n        FileChannel fc = raf1.getChannel();\\n        FileLock lock = fc.tryLock();\\n\\n        \\/\\/ attempt to write to locked file using another\\n        \\/\\/\\n        RandomAccessFile raf2 =  new RandomAccessFile(lf , \\\"rw\\\");\\n        \\/\\/ the following write is failing on windows.\\n        raf2.writeChars(\\\"Derby is great \\\");\\n    }\\n\u003cp\u003e}\u003c\\/p\u003e\\n\\n\u003cp\u003eFor example , in the above code. Last write will fail with the error:\u003cbr\\/\u003e\\nException in thread \\\"main\\\" java.io.IOException: The process cannot access the \u003cbr\\/\u003e\\nfile because another process has locked a portion of the file. \u003c\\/p\u003e\\n\\n\u003cp\u003eI did not verify, if this is the case in the non-window environment too. This\u003cbr\\/\u003e\\nfix is mainly  for non-window environment, so If on other platforms this is \u003cbr\\/\u003e\\nnot issue then  the getLockedFile() can be replaced with the \u003cbr\\/\u003e\\nStorageFile.getRandomAccesFile(). My concern is, How to confirm all \u003cbr\\/\u003e\\nnon-window environments will not give the above error. \u003c\\/p\u003e\\n\\n\u003cp\u003eFirst I thought of   putting the new intraJVM lock code in the storage\u003cbr\\/\u003e\\nfactory, where getExclusiveFileLock() is implemented, For me \u003cbr\\/\u003e\\nIt looked worse alternative too  getLockedFile() method, because then \u003cbr\\/\u003e\\ngetExlusiveFileLock() method semantics gets more confusing. \u003c\\/p\u003e\\n\\n\u003cp\u003eAnother solution I was thinking that may work without adding the \u003cbr\\/\u003e\\n*getLockedFile() is  to use the range lock. like FileLock lock = \u003cbr\\/\u003e\\nfc.tryLock(0, 10 ,false), and write to the file after the 10th byte. \u003cbr\\/\u003e\\nThis may need a new method getExclusiveLock() , which takes range.\u003c\\/p\u003e\\n\\n\u003cp\u003eMay be simple solution is to add a new call, getExclusiveFileLock() \u003cbr\\/\u003e\\nmethod that takes RandomAcceesFile as the argument.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo start with the reason we are in this mess is the getExclusiveLock() \u003cbr\\/\u003e\\nimplementation is not matching the way java interfaces work. Ideally \u003cbr\\/\u003e\\nstore code should hold on to the RandomAccessFile used for the lock,\u003cbr\\/\u003e\\nnot the storage factory implementraion. Ideally StorageRandomAccessFile \u003cbr\\/\u003e\\nshould give handle to the StorageFileChannel, which has the tryLock() \u003cbr\\/\u003e\\nmethod, that returns FileLock.  \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThanks\u003cbr\\/\u003e\\n-suresh\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12504943_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12504943_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jun\\/07 22:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-14T22:11:00+0000\'\u003e14\\/Jun\\/07 22:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I agree with Dan,  getLockedFile() is confusing and should not be added  \\nto the storage factory interfaces , if it can be avoided or  have better  \\ncomments. \\n\\n Just thought I will take a moment and explain, why in the first place  \\nI added this method, I hope it will help in finding an alternative solution  \\nor make the interface better.  \\n\\n I was testing and developing  my solution on Windows. When I  \\nfirst implemented without adding the getLockedFile() method, by \\njust getting the RandomAccessFile using StorageFile.getRandomAccessFile(),  \\nafter it is locked. I was hitting the error , java.io.IOException:  \\n\\\" \\nThe process cannot access the file because another process has locked a  \\nportion of the file. When it write UUID to the dbex.lck file.  \\n\\\" \\n\\n After bit of debugging realized , I need access to the same  \\nRandomAccesFile, that is used to the get the lock. So I simply \\nadded the getLockedFile, which just return the same RandomAccessFile,  \\nthat is used to get the file lock.   \\n\\n\\n public class writeLock { \\n\\tpublic static void main(String[] args) throws Exception  \\n\\t{\\n        File lf = new File(\\\"dbex.lck\\\");\\n        RandomAccessFile raf1 = new RandomAccessFile(lf, \\\"rw\\\");\\n        FileChannel fc = raf1.getChannel();\\n        FileLock lock = fc.tryLock();\\n\\n        \\/\\/ attempt to write to locked file using another\\n        \\/\\/\\n        RandomAccessFile raf2 =  new RandomAccessFile(lf , \\\"rw\\\");\\n        \\/\\/ the following write is failing on windows.\\n        raf2.writeChars(\\\"Derby is great \\\");\\n    }\\n } \\n\\n For example , in the above code. Last write will fail with the error: \\nException in thread \\\"main\\\" java.io.IOException: The process cannot access the  \\nfile because another process has locked a portion of the file.  \\n\\n I did not verify, if this is the case in the non-window environment too. This \\nfix is mainly  for non-window environment, so If on other platforms this is  \\nnot issue then  the getLockedFile() can be replaced with the  \\nStorageFile.getRandomAccesFile(). My concern is, How to confirm all  \\nnon-window environments will not give the above error.  \\n\\n First I thought of   putting the new intraJVM lock code in the storage \\nfactory, where getExclusiveFileLock() is implemented, For me  \\nIt looked worse alternative too  getLockedFile() method, because then  \\ngetExlusiveFileLock() method semantics gets more confusing.  \\n\\n Another solution I was thinking that may work without adding the  \\n*getLockedFile() is  to use the range lock. like FileLock lock =  \\nfc.tryLock(0, 10 ,false), and write to the file after the 10th byte.  \\nThis may need a new method getExclusiveLock() , which takes range. \\n\\n May be simple solution is to add a new call, getExclusiveFileLock()  \\nmethod that takes RandomAcceesFile as the argument. \\n\\n To start with the reason we are in this mess is the getExclusiveLock()  \\nimplementation is not matching the way java interfaces work. Ideally  \\nstore code should hold on to the RandomAccessFile used for the lock, \\nnot the storage factory implementraion. Ideally StorageRandomAccessFile  \\nshould give handle to the StorageFileChannel, which has the tryLock()  \\nmethod, that returns FileLock.   \\n\\n\\n Thanks \\n-suresh \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12505310\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12505310&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12505310\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12505310_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505310_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jun\\/07 17:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-15T17:04:42+0000\'\u003e15\\/Jun\\/07 17:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDan, based on what Suresh said, does the solution to add a new call, getExclusiveFileLock()\u003cbr\\/\u003e\\nmethod that takes RandomAcceesFile as the argument seem like a reasonable solution to get rid of getLockedFile or should we just document getLockedFile better, or something else ...?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12505310_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505310_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jun\\/07 17:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-15T17:04:42+0000\'\u003e15\\/Jun\\/07 17:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dan, based on what Suresh said, does the solution to add a new call, getExclusiveFileLock() \\nmethod that takes RandomAcceesFile as the argument seem like a reasonable solution to get rid of getLockedFile or should we just document getLockedFile better, or something else ...?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12505330\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12505330&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12505330\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12505330_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505330_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jun\\/07 17:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-15T17:53:53+0000\'\u003e15\\/Jun\\/07 17:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Suresh, that was very useful. The piece of missing information for me was that on windows one can only have one open descriptor against a locked file (from Suresh\'s description).\u003c\\/p\u003e\\n\\n\u003cp\u003eSo really this method was added because the existing (pre-patch)  \u003cb\u003eimplementation\u003c\\/b\u003e of StorageFile does \u003cb\u003enot\u003c\\/b\u003e honour the contract of StorageFile. This is because with this implementation (on some platforms) if StorageFile.getExclusiveFileLock() is called then StorageFile.getRandomAccessFile() does \u003cb\u003enot\u003c\\/b\u003e return an object that can be used to modify the file.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn fact looking at the DirFile implementation it seems the file locking implementation is not what a reader of the IO api (the javadoc for StorageFile) might expect. I read the StorageFile javadoc and expect that getExclusiveFileLock() puts a lock on the file, I can then use it as a regular file and then release the lock. Then another thread\\/jvm could perform the same action and we would have normal file locking sematics. That\'s why the change confused me, because I was expecting certain behaviour based upon the contract of StorageFile.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut the DirFile\\/DirFile4 implementations are not that and are not even identical to each other (in terms of visible behaviour).\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eDirFile Calling getExclusiveFileLock() deletes the file if it exists and then creates it\u003c\\/li\u003e\\n\\t\u003cli\u003eDirFile4 Creates the file and writes four bytes into it.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eOnce a storage file is locked, it can not be used as a regular file\u003c\\/li\u003e\\n\\t\u003cli\u003ereleasing the lock deletes the file(!!)\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI can see why all of this is done, it\'s for a specific purpose for locking Derby databases, but I don\'t think anyone would expect either\u003cbr\\/\u003e\\nof those implementations from reading the api. \u003c\\/p\u003e\\n\\n\u003cp\u003eThus I think first the StorageFile javadoc should be changed to describe the behaviour implemented (since it\'s all that is required by Derby today).\u003cbr\\/\u003e\\nI think the generalities of it are:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eAny StorageFile that has getExclusiveFileLock() called on it is not intended to be read from or written to. It\'s sole purpose is to provide\u003cbr\\/\u003e\\n      a locked entity to avoid multiple instances of Derby accessing the same database.\u003c\\/li\u003e\\n\\t\u003cli\u003egetExclusiveFileLock() may delete or overwrite any existing file\u003c\\/li\u003e\\n\\t\u003cli\u003ereleaseExclusiveFileLock() may delete the file\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThen I wonder if this new locking mechanism for intra-jvm locks should be contained within the DirFile4 StorageFile implementation.\u003cbr\\/\u003e\\nThe code is completly reliant on that implementation, so why not enclose it? Then there would be no need to change the StorageFactory interface (after from the comments clarifying behaviour).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12505330_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505330_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jun\\/07 17:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-15T17:53:53+0000\'\u003e15\\/Jun\\/07 17:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Suresh, that was very useful. The piece of missing information for me was that on windows one can only have one open descriptor against a locked file (from Suresh\'s description). \\n\\n So really this method was added because the existing (pre-patch)   implementation  of StorageFile does  not  honour the contract of StorageFile. This is because with this implementation (on some platforms) if StorageFile.getExclusiveFileLock() is called then StorageFile.getRandomAccessFile() does  not  return an object that can be used to modify the file. \\n\\n In fact looking at the DirFile implementation it seems the file locking implementation is not what a reader of the IO api (the javadoc for StorageFile) might expect. I read the StorageFile javadoc and expect that getExclusiveFileLock() puts a lock on the file, I can then use it as a regular file and then release the lock. Then another thread\\/jvm could perform the same action and we would have normal file locking sematics. That\'s why the change confused me, because I was expecting certain behaviour based upon the contract of StorageFile. \\n\\n But the DirFile\\/DirFile4 implementations are not that and are not even identical to each other (in terms of visible behaviour). \\n\\n \\n\\t DirFile Calling getExclusiveFileLock() deletes the file if it exists and then creates it \\n\\t DirFile4 Creates the file and writes four bytes into it. \\n \\n\\n\\n \\n\\t Once a storage file is locked, it can not be used as a regular file \\n\\t releasing the lock deletes the file(!!) \\n \\n\\n\\n I can see why all of this is done, it\'s for a specific purpose for locking Derby databases, but I don\'t think anyone would expect either \\nof those implementations from reading the api.  \\n\\n Thus I think first the StorageFile javadoc should be changed to describe the behaviour implemented (since it\'s all that is required by Derby today). \\nI think the generalities of it are: \\n \\n\\t Any StorageFile that has getExclusiveFileLock() called on it is not intended to be read from or written to. It\'s sole purpose is to provide \\n      a locked entity to avoid multiple instances of Derby accessing the same database. \\n\\t getExclusiveFileLock() may delete or overwrite any existing file \\n\\t releaseExclusiveFileLock() may delete the file \\n \\n\\n\\n Then I wonder if this new locking mechanism for intra-jvm locks should be contained within the DirFile4 StorageFile implementation. \\nThe code is completly reliant on that implementation, so why not enclose it? Then there would be no need to change the StorageFactory interface (after from the comments clarifying behaviour).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12505499\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12505499&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12505499\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12505499_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505499_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jun\\/07 17:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-16T17:36:57+0000\'\u003e16\\/Jun\\/07 17:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eScrubbing release note so that it can be digested by the SAX parser in the release note generator. Naked &lt;br&gt; tags replaced with &lt;br\\/&gt;.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12505499_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505499_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jun\\/07 17:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-16T17:36:57+0000\'\u003e16\\/Jun\\/07 17:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Scrubbing release note so that it can be digested by the SAX parser in the release note generator. Naked &lt;br&gt; tags replaced with &lt;br\\/&gt;.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12505957\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12505957&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12505957\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12505957_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505957_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/07 21:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-18T21:10:29+0000\'\u003e18\\/Jun\\/07 21:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am working to move the intraJVM lock into StorageFile, getExclusiveLock()\\/ releaseExclusiveLock, but I wanted to comment on why I expanded the synchronization to include all of privGetJBMSLockOnDB as I think that will still be required.\u003c\\/p\u003e\\n\\n\u003cp\u003eI found running the test with multiple threads that I would get occasional dual boot without any error message or warning with the original patch.  I expanded the synchronization and found that it corrected the problem.  I think there seems to be a window where two threads can get in and create or delete the lock file at the same time, e.g. \u003cbr\\/\u003e\\n              if (fileLock.exists())\u003cbr\\/\u003e\\n                {\u003cbr\\/\u003e\\n                ...\u003cbr\\/\u003e\\n                 ----&gt; Another thread gets in and deletes the file here\u003c\\/p\u003e\\n\\n\u003cp\u003eI am not totally sure that this is the hole and since this logic would remain in BaseDataFileFactory we would still need to synchronize on the interned databaseName there.   I am sure however that it works with the expanded synchronization but does not without it.  \u003c\\/p\u003e\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12505957_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505957_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/07 21:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-18T21:10:29+0000\'\u003e18\\/Jun\\/07 21:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am working to move the intraJVM lock into StorageFile, getExclusiveLock()\\/ releaseExclusiveLock, but I wanted to comment on why I expanded the synchronization to include all of privGetJBMSLockOnDB as I think that will still be required. \\n\\n I found running the test with multiple threads that I would get occasional dual boot without any error message or warning with the original patch.  I expanded the synchronization and found that it corrected the problem.  I think there seems to be a window where two threads can get in and create or delete the lock file at the same time, e.g.  \\n              if (fileLock.exists()) \\n                { \\n                ... \\n                 ----&gt; Another thread gets in and deletes the file here \\n\\n I am not totally sure that this is the hole and since this logic would remain in BaseDataFileFactory we would still need to synchronize on the interned databaseName there.   I am sure however that it works with the expanded synchronization but does not without it.   \\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12505976\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12505976&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12505976\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12505976_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505976_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/07 23:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-18T23:03:07+0000\'\u003e18\\/Jun\\/07 23:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIf I try to keep the interface the same and incorporate the intrajvm lock into getExclusiveLock() I  will lose granularity in the error message.  With the previous patch, we had a separate intrajvm dual boot messages as well as a warning if the property was not writable.  Should I add two new return possibilities from getExclusiveLock to handle these cases?\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12505976_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505976_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/07 23:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-18T23:03:07+0000\'\u003e18\\/Jun\\/07 23:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    If I try to keep the interface the same and incorporate the intrajvm lock into getExclusiveLock() I  will lose granularity in the error message.  With the previous patch, we had a separate intrajvm dual boot messages as well as a warning if the property was not writable.  Should I add two new return possibilities from getExclusiveLock to handle these cases? \\n\\n Kathey \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12505980\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12505980&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12505980\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12505980_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505980_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/07 23:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-18T23:53:59+0000\'\u003e18\\/Jun\\/07 23:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCould the problem (needing to expand) with the synchronization be related to question I raised earlier?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt; - the synchronization for getting the intra jvm lock and releasing it are using different objects. Don\'t they need to use the same object?\u003cbr\\/\u003e\\n&gt;&gt;   If not it should be clearly commented how the synchronization is working.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the comment above, I\'m not sure which piece of code you are referring to here?\u003c\\/p\u003e\\n\\n\u003cp\u003e              if (fileLock.exists())\u003cbr\\/\u003e\\n                {\u003cbr\\/\u003e\\n                ...\u003cbr\\/\u003e\\n                 ----&gt; Another thread gets in and deletes the file here \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12505980_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12505980_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/07 23:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-18T23:53:59+0000\'\u003e18\\/Jun\\/07 23:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Could the problem (needing to expand) with the synchronization be related to question I raised earlier? \\n\\n &gt;&gt; - the synchronization for getting the intra jvm lock and releasing it are using different objects. Don\'t they need to use the same object? \\n&gt;&gt;   If not it should be clearly commented how the synchronization is working. \\n\\n In the comment above, I\'m not sure which piece of code you are referring to here? \\n\\n               if (fileLock.exists()) \\n                { \\n                ... \\n                 ----&gt; Another thread gets in and deletes the file here               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12506228\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12506228&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12506228\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12506228_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12506228_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jun\\/07 16:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-19T16:08:52+0000\'\u003e19\\/Jun\\/07 16:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDan asked:\u003cbr\\/\u003e\\n&gt;Could the problem (needing to expand) with the synchronization be related to question I raised earlier?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt; - the synchronization for getting the intra jvm lock and releasing it are using different objects. Don\'t they need to use the same object?\u003c\\/p\u003e\\n\\n\u003cp\u003eNo even with that corrected the test still fails with only putting synchronization on getIntraJVMDBLock()\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the comment above, I\'m not sure which piece of code you are referring to here?\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is from privGetJBMSLockOnDB()\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12506228_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12506228_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jun\\/07 16:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-19T16:08:52+0000\'\u003e19\\/Jun\\/07 16:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dan asked: \\n&gt;Could the problem (needing to expand) with the synchronization be related to question I raised earlier? \\n\\n &gt;&gt; - the synchronization for getting the intra jvm lock and releasing it are using different objects. Don\'t they need to use the same object? \\n\\n No even with that corrected the test still fails with only putting synchronization on getIntraJVMDBLock() \\n\\n In the comment above, I\'m not sure which piece of code you are referring to here? \\n\\n This is from privGetJBMSLockOnDB()              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12506290\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12506290&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12506290\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12506290_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12506290_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jun\\/07 20:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-19T20:50:20+0000\'\u003e19\\/Jun\\/07 20:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMike asked me to post the patch that has changes from Dan\'s first round of review comments but does not have the move of getIntraJVMDbLock to DirFile4.  This is not for commit\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12506290_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12506290_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jun\\/07 20:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-19T20:50:20+0000\'\u003e19\\/Jun\\/07 20:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mike asked me to post the patch that has changes from Dan\'s first round of review comments but does not have the move of getIntraJVMDbLock to DirFile4.  This is not for commit              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12509163\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12509163&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12509163\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12509163_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12509163_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jun\\/07 17:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-29T17:37:09+0000\'\u003e29\\/Jun\\/07 17:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith the changes made for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2737\\\" title=\\\"Change documentation on permissions needed to include read\\/write for  system property derby.storage.jvmInstanceId \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2737\\\"\u003e\u003cdel\u003eDERBY-2737\u003c\\/del\u003e\u003c\\/a\u003e it might be wise to get the template server policy file to include the permission on the property derby.storage.jvmInstanceId even if this fix doesn\'t make it into the first 10.3 release. At least then any user\'s policy file might have a better chance of having the permission.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12509163_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12509163_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jun\\/07 17:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-29T17:37:09+0000\'\u003e29\\/Jun\\/07 17:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    With the changes made for   DERBY-2737   it might be wise to get the template server policy file to include the permission on the property derby.storage.jvmInstanceId even if this fix doesn\'t make it into the first 10.3 release. At least then any user\'s policy file might have a better chance of having the permission.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12509170\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12509170&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12509170\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12509170_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12509170_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jun\\/07 18:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-29T18:02:11+0000\'\u003e29\\/Jun\\/07 18:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eExpanding the synchronization \\\"because it works\\\" concerns me greatly as an engineering approach to addressing a synchronization issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe purpose of the synchronization was intended to protect a small window while a unique identifier was being written into a file (exFileLock in privGetJBMSLockOnDB) used for lock control.\u003c\\/p\u003e\\n\\n\u003cp\u003eExpanding this synchronization is now also protecting the writing of a \u003cb\u003edifferent\u003c\\/b\u003e file (fileLock in privGetJBMSLockOnDB), but why is that needed?\u003cbr\\/\u003e\\nEspecially when the system has to handle multiple jvm\'s writing to that same file, when object synchronization doesn\'t help.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt maybe that the current locking across doesn\'t really work and there are windows where multiple jvms booting the same database at the same time would succeed when they should fail. E.g. the locking works correctly when two jvms boot the same database one after the other (ie the second would fail) but not when they concurrently boot the same db. Maybe your test is exposing that and so the synchronization is required, but then it doesn\'t address the cross jvm issue. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe locking of database boot is already complicated and adding the new (required) mechanism for cross-class loader complicates it further.\u003cbr\\/\u003e\\nIt would be good to have a clear description of how the various schemes work and interact with each other. WIth that, one could then more easily determine what synchronization is required \u003cb\u003eand why\u003c\\/b\u003e.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12509170_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12509170_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jun\\/07 18:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-06-29T18:02:11+0000\'\u003e29\\/Jun\\/07 18:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Expanding the synchronization \\\"because it works\\\" concerns me greatly as an engineering approach to addressing a synchronization issue. \\n\\n The purpose of the synchronization was intended to protect a small window while a unique identifier was being written into a file (exFileLock in privGetJBMSLockOnDB) used for lock control. \\n\\n Expanding this synchronization is now also protecting the writing of a  different  file (fileLock in privGetJBMSLockOnDB), but why is that needed? \\nEspecially when the system has to handle multiple jvm\'s writing to that same file, when object synchronization doesn\'t help. \\n\\n It maybe that the current locking across doesn\'t really work and there are windows where multiple jvms booting the same database at the same time would succeed when they should fail. E.g. the locking works correctly when two jvms boot the same database one after the other (ie the second would fail) but not when they concurrently boot the same db. Maybe your test is exposing that and so the synchronization is required, but then it doesn\'t address the cross jvm issue.  \\n\\n The locking of database boot is already complicated and adding the new (required) mechanism for cross-class loader complicates it further. \\nIt would be good to have a clear description of how the various schemes work and interact with each other. WIth that, one could then more easily determine what synchronization is required  and why .              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510527\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12510527&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510527\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12510527_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510527_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jul\\/07 23:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-05T23:52:18+0000\'\u003e05\\/Jul\\/07 23:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am unchecking the 10.3 fixin. It doesn\'t look like this is going to make it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12510527_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510527_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jul\\/07 23:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-05T23:52:18+0000\'\u003e05\\/Jul\\/07 23:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am unchecking the 10.3 fixin. It doesn\'t look like this is going to make it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510834\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12510834&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510834\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12510834_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510834_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/07 01:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-07T01:32:20+0000\'\u003e07\\/Jul\\/07 01:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis is an issue for every release\\/branch so far\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12510834_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510834_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/07 01:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-07T01:32:20+0000\'\u003e07\\/Jul\\/07 01:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This is an issue for every release\\/branch so far              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12534959\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12534959&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12534959\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12534959_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12534959_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Oct\\/07 20:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-15T20:30:31+0000\'\u003e15\\/Oct\\/07 20:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUnassigning myself from this issue for now. I am not actively working on it and am not sure how to resolve the synchronization issue I was seeing when running the test with many threads.  Hopefully someone else will be able to find a solution which does not expand the synchronization so much.  \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12534959_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12534959_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Oct\\/07 20:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-15T20:30:31+0000\'\u003e15\\/Oct\\/07 20:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Unassigning myself from this issue for now. I am not actively working on it and am not sure how to resolve the synchronization issue I was seeing when running the test with many threads.  Hopefully someone else will be able to find a solution which does not expand the synchronization so much.   \\n\\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12688145\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12688145&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12688145\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12688145_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12688145_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Mar\\/09 16:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-03-22T16:40:29+0000\'\u003e22\\/Mar\\/09 16:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have been thinking about this issue and wonder:\u003cbr\\/\u003e\\nIf we put the name of the database in the name of the derby.rawStoreDaemon thread and then check for the existence of that thread before booting the database and fail if it exists, would that be a reasonable solution?\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12688145_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12688145_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Mar\\/09 16:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-03-22T16:40:29+0000\'\u003e22\\/Mar\\/09 16:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have been thinking about this issue and wonder: \\nIf we put the name of the database in the name of the derby.rawStoreDaemon thread and then check for the existence of that thread before booting the database and fail if it exists, would that be a reasonable solution? \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12706621\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12706621&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12706621\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12706621_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12706621_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/May\\/09 22:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-06T22:07:12+0000\'\u003e06\\/May\\/09 22:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI did some testing with the thread name idea (just in a separate stand-alone program) and found that it would probably be workable. Performance wasn\'t bad. It seemed to take only 16 milliseconds on my machine to iterate through 1000 thread names and synchronizing on an interned string seemed to work across ClassLoaders but  ...\u003c\\/p\u003e\\n\\n\u003cp\u003e1) It would require RuntimePermissions getStackTrace and modifyThreadGroup to derby.jar, which seem like pretty powerful additions to our permissions requirements.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) I was looking back at Suresh\'s original implmentation (using the system property) and found that solution actually still holds promise.  There was just an issue with synchronization which needs to be resolved. This solution wouldn\'t collide with any effort to consolidate the daemon threads and we already have this permission requirement documented, so I think this is a cleaner solution that should be revisited.  \u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll take a look again at the old patch and try to figure out why the synchronization expansion was required and how to avoid it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12706621_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12706621_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/May\\/09 22:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-06T22:07:12+0000\'\u003e06\\/May\\/09 22:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I did some testing with the thread name idea (just in a separate stand-alone program) and found that it would probably be workable. Performance wasn\'t bad. It seemed to take only 16 milliseconds on my machine to iterate through 1000 thread names and synchronizing on an interned string seemed to work across ClassLoaders but  ... \\n\\n 1) It would require RuntimePermissions getStackTrace and modifyThreadGroup to derby.jar, which seem like pretty powerful additions to our permissions requirements. \\n\\n 2) I was looking back at Suresh\'s original implmentation (using the system property) and found that solution actually still holds promise.  There was just an issue with synchronization which needs to be resolved. This solution wouldn\'t collide with any effort to consolidate the daemon threads and we already have this permission requirement documented, so I think this is a cleaner solution that should be revisited.   \\n\\n I\'ll take a look again at the old patch and try to figure out why the synchronization expansion was required and how to avoid it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12737645\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12737645&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12737645\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12737645_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12737645_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jul\\/09 18:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-31T18:30:44+0000\'\u003e31\\/Jul\\/09 18:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAmended the title, description, and environment fields. This bug also appears on the Apple Java 5 VM on Mac OS X 10.5.7. It appears that this bug is not limited to Linux.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12737645_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12737645_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jul\\/09 18:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-31T18:30:44+0000\'\u003e31\\/Jul\\/09 18:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Amended the title, description, and environment fields. This bug also appears on the Apple Java 5 VM on Mac OS X 10.5.7. It appears that this bug is not limited to Linux.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740196\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740196&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740196\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740196_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740196_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Aug\\/09 18:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-06T18:51:58+0000\'\u003e06\\/Aug\\/09 18:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Rick Hillegas - 06\\/Aug\\/09 18:57\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt appears to me that a workaround for this bug is to upgrade to Java 6. I am attaching a slightly revised version of the repro, DualBootRepro.java (this revision contains all of the helper classes needed to create the failure scenario). I see failures on the following platforms:\u003c\\/p\u003e\\n\\n\u003cp\u003eApple Java 5 on Mac OS X\u003cbr\\/\u003e\\nSun Java 5 on Ubuntu Linux\u003cbr\\/\u003e\\nIBM Java 5 on Ubuntu Linux\u003c\\/p\u003e\\n\\n\u003cp\u003eHappily, however, the second boot fails and raises java.nio.channels.OverlappingFileLockException on the following platforms:\u003c\\/p\u003e\\n\\n\u003cp\u003eApple Java 6 beta on Mac OS X\u003cbr\\/\u003e\\nSun Java 6 on Ubuntu Linux\u003cbr\\/\u003e\\nIBM Java 6 on Ubuntu Linux\u003c\\/p\u003e\\n\\n\u003cp\u003eAdmittedly, that\'s a graceless failure. However, I think it should prevent the database from being corrupted and it\'s worth recommending an upgrade to Java 6 for users who encounter this bug.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740196_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740196_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Aug\\/09 18:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-06T18:51:58+0000\'\u003e06\\/Aug\\/09 18:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Rick Hillegas - 06\\/Aug\\/09 18:57\\\"\u003eedited\u003c\\/span\u003e                   It appears to me that a workaround for this bug is to upgrade to Java 6. I am attaching a slightly revised version of the repro, DualBootRepro.java (this revision contains all of the helper classes needed to create the failure scenario). I see failures on the following platforms: \\n\\n Apple Java 5 on Mac OS X \\nSun Java 5 on Ubuntu Linux \\nIBM Java 5 on Ubuntu Linux \\n\\n Happily, however, the second boot fails and raises java.nio.channels.OverlappingFileLockException on the following platforms: \\n\\n Apple Java 6 beta on Mac OS X \\nSun Java 6 on Ubuntu Linux \\nIBM Java 6 on Ubuntu Linux \\n\\n Admittedly, that\'s a graceless failure. However, I think it should prevent the database from being corrupted and it\'s worth recommending an upgrade to Java 6 for users who encounter this bug.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740540\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740540&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740540\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12740540_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740540_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 13:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T13:09:17+0000\'\u003e07\\/Aug\\/09 13:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you Rick for looking at this issue.  I think it sorely needs a new pair of eyes. I know I have seen dual boot on SuSE Linux with IBM 1.6, but have not tried the recent fix packs.  I have seen the OverlappingFileLockException  on IBM 1.6 with z\\/OS, but thought it was a JVM bug working in our favor.  Has there been recent spec clarification that exclusive java.nio.FileLocks should prevent cross classloader access?  If we determine that the OverlappingFileLockException is the correct JVM behavior, then I think we can catch that exception and throw a dual boot message and then file JVM bugs where we don\'t see the OverlappingFileLockException.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12740540_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740540_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 13:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T13:09:17+0000\'\u003e07\\/Aug\\/09 13:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you Rick for looking at this issue.  I think it sorely needs a new pair of eyes. I know I have seen dual boot on SuSE Linux with IBM 1.6, but have not tried the recent fix packs.  I have seen the OverlappingFileLockException  on IBM 1.6 with z\\/OS, but thought it was a JVM bug working in our favor.  Has there been recent spec clarification that exclusive java.nio.FileLocks should prevent cross classloader access?  If we determine that the OverlappingFileLockException is the correct JVM behavior, then I think we can catch that exception and throw a dual boot message and then file JVM bugs where we don\'t see the OverlappingFileLockException. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740552\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740552&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740552\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740552_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740552_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 13:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T13:45:33+0000\'\u003e07\\/Aug\\/09 13:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Rick Hillegas - 07\\/Aug\\/09 14:14\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Kathey. I\'m not aware of a spec clarification but I will ask around. I agree that we still need a solution for people whose VMs don\'t raise OverlappingFileLockException in this situation. Just thought that we might be able to spare some users a data corruption by recommending that they experiment with Java 6.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740552_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740552_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 13:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T13:45:33+0000\'\u003e07\\/Aug\\/09 13:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Rick Hillegas - 07\\/Aug\\/09 14:14\\\"\u003eedited\u003c\\/span\u003e                   Hi Kathey. I\'m not aware of a spec clarification but I will ask around. I agree that we still need a solution for people whose VMs don\'t raise OverlappingFileLockException in this situation. Just thought that we might be able to spare some users a data corruption by recommending that they experiment with Java 6.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740588\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740588&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740588\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740588_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740588_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 15:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T15:35:14+0000\'\u003e07\\/Aug\\/09 15:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Rick Hillegas - 07\\/Aug\\/09 15:41\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have confirmed the following with Alan Bateman, the spec lead for NIO2:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) The call we are making (java.nio.channels.FileChannel.tryLock) is supposed to raise java.nio.channels.OverlappingFileLockException if an attempt is made to lock the same section of a file twice in the same VM, regardless of what ClassLoaders the calls come from. So the results I reported are expected.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) However, in Java 5 java.nio.channels.OverlappingFileLockException is NOT raised in this situation. This is a Java 5 bug. The bug was fixed in Java 6.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) Alan is not aware of any changes made by IBM to the nio code in this area. He is curious about the claim that java.nio.channels.OverlappingFileLockException is not raised by IBM Java 6 on SuSE Linux.\u003c\\/p\u003e\\n\\n\u003cp\u003eCould someone run the repro on IBM Java 6 on SuSE Linux in order to resolve this confusion?\u003c\\/p\u003e\\n\\n\u003cp\u003eOne more wrinkle: When (2) was fixed, a compatibility flag was introduced so that people could continue to enjoy the old behavior, that is, the behavior we don\'t want. You will get the bad Java 5 behavior if you set the following system property to anything other than false:\u003c\\/p\u003e\\n\\n\u003cp\u003e   sun.nio.ch.disableSystemWideOverlappingFileLockCheck\\t\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThanks,\u003cbr\\/\u003e\\n-Rick\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740588_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740588_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 15:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T15:35:14+0000\'\u003e07\\/Aug\\/09 15:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Rick Hillegas - 07\\/Aug\\/09 15:41\\\"\u003eedited\u003c\\/span\u003e                   I have confirmed the following with Alan Bateman, the spec lead for NIO2: \\n\\n 1) The call we are making (java.nio.channels.FileChannel.tryLock) is supposed to raise java.nio.channels.OverlappingFileLockException if an attempt is made to lock the same section of a file twice in the same VM, regardless of what ClassLoaders the calls come from. So the results I reported are expected. \\n\\n 2) However, in Java 5 java.nio.channels.OverlappingFileLockException is NOT raised in this situation. This is a Java 5 bug. The bug was fixed in Java 6. \\n\\n 3) Alan is not aware of any changes made by IBM to the nio code in this area. He is curious about the claim that java.nio.channels.OverlappingFileLockException is not raised by IBM Java 6 on SuSE Linux. \\n\\n Could someone run the repro on IBM Java 6 on SuSE Linux in order to resolve this confusion? \\n\\n One more wrinkle: When (2) was fixed, a compatibility flag was introduced so that people could continue to enjoy the old behavior, that is, the behavior we don\'t want. You will get the bad Java 5 behavior if you set the following system property to anything other than false: \\n\\n    sun.nio.ch.disableSystemWideOverlappingFileLockCheck\\t \\n\\n\\n Thanks, \\n-Rick              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740623\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740623&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740623\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12740623_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740623_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 16:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T16:35:11+0000\'\u003e07\\/Aug\\/09 16:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis is indeed excellent news.\u003c\\/p\u003e\\n\\n\u003cp\u003eI tried on SuSE  with:\u003cbr\\/\u003e\\njava version \\\"1.6.0\\\"\u003cbr\\/\u003e\\nJava(TM) SE Runtime Environment (build pxi3260sr4-20090216_01(SR4))\u003cbr\\/\u003e\\nIBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260-20090215_29883 (JIT enabled, AOT enabled)\u003cbr\\/\u003e\\nJ9VM - 20090215_029883_lHdSMr\u003cbr\\/\u003e\\nJIT  - r9_20090213_2028\u003cbr\\/\u003e\\nGC   - 20090213_AA)\u003cbr\\/\u003e\\nJCL  - 20090214_01\u003c\\/p\u003e\\n\\n\u003cp\u003eand indeed got the OverlappingFileLockException and tried with the property you mentioned and saw dual boot.  When I get back from vacation, I will review my case records and revisit the dual boot case we saw with 1.6 and see if it is something else.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think the important thing is to have a solution moving forward, so think we should just catch this exception and throw a dual boot message.  While an older jvm solution would be great,  I think most of the legacy applications that have dual boot have learned their lesson the hard way with corruption and no longer do it.  It is in application development that we need to catch this and throw a clear message.   That development usually happens with newer JVM\'s.\u003c\\/p\u003e\\n\\n\u003cp\u003eDo you have a bug number\\/link  for the  JVM fix?  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12740623_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740623_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 16:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T16:35:11+0000\'\u003e07\\/Aug\\/09 16:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This is indeed excellent news. \\n\\n I tried on SuSE  with: \\njava version \\\"1.6.0\\\" \\nJava(TM) SE Runtime Environment (build pxi3260sr4-20090216_01(SR4)) \\nIBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260-20090215_29883 (JIT enabled, AOT enabled) \\nJ9VM - 20090215_029883_lHdSMr \\nJIT  - r9_20090213_2028 \\nGC   - 20090213_AA) \\nJCL  - 20090214_01 \\n\\n and indeed got the OverlappingFileLockException and tried with the property you mentioned and saw dual boot.  When I get back from vacation, I will review my case records and revisit the dual boot case we saw with 1.6 and see if it is something else. \\n\\n I think the important thing is to have a solution moving forward, so think we should just catch this exception and throw a dual boot message.  While an older jvm solution would be great,  I think most of the legacy applications that have dual boot have learned their lesson the hard way with corruption and no longer do it.  It is in application development that we need to catch this and throw a clear message.   That development usually happens with newer JVM\'s. \\n\\n Do you have a bug number\\/link  for the  JVM fix?                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740635\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740635&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740635\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740635_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740635_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 17:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T17:04:12+0000\'\u003e07\\/Aug\\/09 17:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Kathey. The bug id is 6332756. See \u003ca href=\\\"http:\\/\\/forums.sun.com\\/thread.jspa?threadID=5321079\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/forums.sun.com\\/thread.jspa?threadID=5321079\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740635_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740635_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 17:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T17:04:12+0000\'\u003e07\\/Aug\\/09 17:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Kathey. The bug id is 6332756. See  http:\\/\\/forums.sun.com\\/thread.jspa?threadID=5321079               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740641\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740641&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740641\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12740641_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740641_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 17:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T17:29:28+0000\'\u003e07\\/Aug\\/09 17:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Rick for the reference. Was there consideration given to bakcporting the fix to 1.5, perhaps even with a different default for sun.nio.ch.disableSystemWideOverlappingFileLockCheck?\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThe bug comments say \\\"Fixing this issue is straight-forward but it introduces a behaviour change\\\".  At least having the property available in 1.5 to force the check would be helpful to eliminate the possibility of dual boot from corruption cases.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12740641_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740641_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 17:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T17:29:28+0000\'\u003e07\\/Aug\\/09 17:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Rick for the reference. Was there consideration given to bakcporting the fix to 1.5, perhaps even with a different default for sun.nio.ch.disableSystemWideOverlappingFileLockCheck? \\n\\n\\n The bug comments say \\\"Fixing this issue is straight-forward but it introduces a behaviour change\\\".  At least having the property available in 1.5 to force the check would be helpful to eliminate the possibility of dual boot from corruption cases. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740660\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740660&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740660\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740660_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740660_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 18:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T18:05:56+0000\'\u003e07\\/Aug\\/09 18:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Was there consideration given to bakcporting the fix to 1.5, perhaps even with a different default for sun.nio.ch.disableSystemWideOverlappingFileLockCheck? \u003c\\/p\u003e\\n\\n\u003cp\u003eI believe so. I think that proposal was rejected because the fix would introduce a compatibility change within a major version. The barrier to compatibility changes seems to be higher within major versions than between them. I suppose we could lobby to have that decision revisited but I doubt we would make much headway. The compatibility policy seems sensible to me.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740660_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740660_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 18:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T18:05:56+0000\'\u003e07\\/Aug\\/09 18:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Was there consideration given to bakcporting the fix to 1.5, perhaps even with a different default for sun.nio.ch.disableSystemWideOverlappingFileLockCheck?  \\n\\n I believe so. I think that proposal was rejected because the fix would introduce a compatibility change within a major version. The barrier to compatibility changes seems to be higher within major versions than between them. I suppose we could lobby to have that decision revisited but I doubt we would make much headway. The compatibility policy seems sensible to me.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740669\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740669&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740669\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12740669_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740669_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 18:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T18:25:46+0000\'\u003e07\\/Aug\\/09 18:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIf for 1.5 the property default is the current bad behavior, I think there would be no compatibility concern and it would provide a worthwhile supportability improvement especially if it is a low risk fix overall.   \u003c\\/p\u003e\\n\\n\u003cp\u003eFor now though it would be good to focus on getting a better error for Derby users using 1.6.   If we find ourselves using the \\\"Maybe they dual booted\\\" excuse in a corruption case we can revisit whether to lobby for the 1.5 option.   Sound ok?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12740669_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740669_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 18:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T18:25:46+0000\'\u003e07\\/Aug\\/09 18:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    If for 1.5 the property default is the current bad behavior, I think there would be no compatibility concern and it would provide a worthwhile supportability improvement especially if it is a low risk fix overall.    \\n\\n For now though it would be good to focus on getting a better error for Derby users using 1.6.   If we find ourselves using the \\\"Maybe they dual booted\\\" excuse in a corruption case we can revisit whether to lobby for the 1.5 option.   Sound ok?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740673\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740673&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740673\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740673_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740673_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 18:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T18:42:12+0000\'\u003e07\\/Aug\\/09 18:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think it\'s a good idea to clean up how we handle java.nio.channels.OverlappingFileLockException . I agree that we can revisit this bug if that solution proves to be inadequate.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740673_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740673_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 18:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T18:42:12+0000\'\u003e07\\/Aug\\/09 18:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think it\'s a good idea to clean up how we handle java.nio.channels.OverlappingFileLockException . I agree that we can revisit this bug if that solution proves to be inadequate.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740691\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12740691&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740691\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740691_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740691_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 19:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T19:57:27+0000\'\u003e07\\/Aug\\/09 19:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-700-01-aa-catchOverlappingFileLockException.diff. This patch catches the OverlappingFileLockException, releases the channel, and sets the status to indicate that another Derby instance has locked the database. I have not run any tests yet other than verifying that the repro runs correctly on Java 6, but I\'m posting this patch to see if the Store experts think this looks right. Once we agree that the code looks good, we can write some additional regression tests for this problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/io\\/DirFile4.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12740691_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740691_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 19:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T19:57:27+0000\'\u003e07\\/Aug\\/09 19:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-700-01-aa-catchOverlappingFileLockException.diff. This patch catches the OverlappingFileLockException, releases the channel, and sets the status to indicate that another Derby instance has locked the database. I have not run any tests yet other than verifying that the repro runs correctly on Java 6, but I\'m posting this patch to see if the Store experts think this looks right. Once we agree that the code looks good, we can write some additional regression tests for this problem. \\n\\n Touches the following file: \\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/impl\\/io\\/DirFile4.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12742604\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12742604&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12742604\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12742604_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12742604_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Aug\\/09 22:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-12T22:06:18+0000\'\u003e12\\/Aug\\/09 22:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe new code looks ok to me.  Maybe the comment could say what we expect to throw the\u003cbr\\/\u003e\\nOverlappingFileLockException, I assume it is:\u003cbr\\/\u003e\\ndbLock =lockFileChannel.tryLock();\u003c\\/p\u003e\\n\\n\u003cp\u003eIt will be great if we can count on jdk16 to fix this problem completely, finally.  Too bad if we can\'t\u003cbr\\/\u003e\\nget a fix out of 15 as a lot of my users still use it also.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12742604_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12742604_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Aug\\/09 22:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-12T22:06:18+0000\'\u003e12\\/Aug\\/09 22:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The new code looks ok to me.  Maybe the comment could say what we expect to throw the \\nOverlappingFileLockException, I assume it is: \\ndbLock =lockFileChannel.tryLock(); \\n\\n It will be great if we can count on jdk16 to fix this problem completely, finally.  Too bad if we can\'t \\nget a fix out of 15 as a lot of my users still use it also.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12743395\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12743395&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12743395\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12743395_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12743395_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Aug\\/09 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-14T19:53:33+0000\'\u003e14\\/Aug\\/09 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks, Mike. I will add that comment. I will also add a test case. For the record, the regression tests ran cleanly for me.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12743395_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12743395_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Aug\\/09 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-14T19:53:33+0000\'\u003e14\\/Aug\\/09 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks, Mike. I will add that comment. I will also add a test case. For the record, the regression tests ran cleanly for me.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12743447\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12743447&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12743447\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12743447_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12743447_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Aug\\/09 21:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-14T21:09:00+0000\'\u003e14\\/Aug\\/09 21:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere  was a test in the earlier patches that might be of use.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12743447_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12743447_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Aug\\/09 21:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-14T21:09:00+0000\'\u003e14\\/Aug\\/09 21:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There  was a test in the earlier patches that might be of use.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12744166\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12744166&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12744166\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744166_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744166_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/09 18:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-17T18:46:34+0000\'\u003e17\\/Aug\\/09 18:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-700-01-ab-catchOverlappingFileLockException.diff. This adds the comment which Mike recommended and adds a test culled from one of the previous patches. I will run regression tests again.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/io\\/DirFile4.java\u003c\\/p\u003e\\n\\n\u003cp\u003eGraceful handling of OverlappingFileLockException.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eM      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/store\\/_Suite.java\u003cbr\\/\u003e\\nA      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/store\\/ClassLoaderBootTest.java\u003cbr\\/\u003e\\nM      java\\/testing\\/org\\/apache\\/derbyTesting\\/junit\\/JDBC.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTwo test cases. One runs in all environments and checks that anyone can boot a database that has been shut down already. The other test case verifies that a database can\'t be booted twice if the VM is at Java 6 or higher.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744166_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744166_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/09 18:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-17T18:46:34+0000\'\u003e17\\/Aug\\/09 18:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-700-01-ab-catchOverlappingFileLockException.diff. This adds the comment which Mike recommended and adds a test culled from one of the previous patches. I will run regression tests again. \\n\\n Touches the following files: \\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/impl\\/io\\/DirFile4.java \\n\\n Graceful handling of OverlappingFileLockException. \\n\\n\\n M      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/store\\/_Suite.java \\nA      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/store\\/ClassLoaderBootTest.java \\nM      java\\/testing\\/org\\/apache\\/derbyTesting\\/junit\\/JDBC.java \\n\\n Two test cases. One runs in all environments and checks that anyone can boot a database that has been shut down already. The other test case verifies that a database can\'t be booted twice if the VM is at Java 6 or higher.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12744479\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12744479&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12744479\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744479_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744479_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 12:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T12:22:54+0000\'\u003e18\\/Aug\\/09 12:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe tests ran cleanly for me except for an error in ManagementMBeanTest. I ran the test by itself and it passed cleanly. I doubt that this fix affected that test. Here is the error:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:&lt;2&gt; but was:&lt;8&gt;\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest.startStopManagement(ManagementMBeanTest.java:86)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest.testStartStopManagementFromApplication(ManagementMBeanTest.java:56)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:109)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:25)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:25)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:25)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744479_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744479_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 12:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T12:22:54+0000\'\u003e18\\/Aug\\/09 12:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The tests ran cleanly for me except for an error in ManagementMBeanTest. I ran the test by itself and it passed cleanly. I doubt that this fix affected that test. Here is the error: \\n\\n 1) testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:&lt;2&gt; but was:&lt;8&gt; \\n\\tat org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest.startStopManagement(ManagementMBeanTest.java:86) \\n\\tat org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest.testStartStopManagementFromApplication(ManagementMBeanTest.java:56) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) \\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:109) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:25) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:25) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:25) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12744548\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12744548&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12744548\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744548_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744548_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 15:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T15:25:50+0000\'\u003e18\\/Aug\\/09 15:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted derby-700-01-ab-catchOverlappingFileLockException.diff at subversion revision 805448.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744548_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744548_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 15:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T15:25:50+0000\'\u003e18\\/Aug\\/09 15:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed derby-700-01-ab-catchOverlappingFileLockException.diff at subversion revision 805448.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12744557\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12744557&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12744557\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744557_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744557_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 15:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T15:33:23+0000\'\u003e18\\/Aug\\/09 15:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePorted 805448 from trunk to 10.5 branch at subversion revision 805454.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744557_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744557_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 15:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T15:33:23+0000\'\u003e18\\/Aug\\/09 15:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ported 805448 from trunk to 10.5 branch at subversion revision 805454.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12744592\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12744592&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12744592\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744592_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744592_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T16:32:06+0000\'\u003e18\\/Aug\\/09 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePorted 805448 from trunk to 10.4 branch at subversion revision 805485.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744592_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744592_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T16:32:06+0000\'\u003e18\\/Aug\\/09 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ported 805448 from trunk to 10.4 branch at subversion revision 805485.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12744593\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12744593&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12744593\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744593_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744593_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T16:38:01+0000\'\u003e18\\/Aug\\/09 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePorted 805448 from trunk to 10.3 branch at subversion revision 805486.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744593_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744593_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T16:38:01+0000\'\u003e18\\/Aug\\/09 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ported 805448 from trunk to 10.3 branch at subversion revision 805486.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12744632\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12744632&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12744632\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744632_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744632_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 18:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T18:23:25+0000\'\u003e18\\/Aug\\/09 18:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePorted 805448 from trunk to 10.2 branch at subversion revision 805523.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744632_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744632_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 18:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T18:23:25+0000\'\u003e18\\/Aug\\/09 18:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ported 805448 from trunk to 10.2 branch at subversion revision 805523.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12744657\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12744657&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12744657\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744657_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744657_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 19:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T19:13:54+0000\'\u003e18\\/Aug\\/09 19:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAt this point I have ported the patch to all branches from 10.2 forward. If someone would like to port the patch to 10.1, please do--my 10.1 build environment no longer works and the effort required to repair it does not seem justified.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am inclined to resolve this issue if there are no objections.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12744657_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744657_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/09 19:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-18T19:13:54+0000\'\u003e18\\/Aug\\/09 19:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    At this point I have ported the patch to all branches from 10.2 forward. If someone would like to port the patch to 10.1, please do--my 10.1 build environment no longer works and the effort required to repair it does not seem justified. \\n\\n I am inclined to resolve this issue if there are no objections.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12744938\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12744938&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12744938\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12744938_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744938_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/09 07:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-19T07:20:07+0000\'\u003e19\\/Aug\\/09 07:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Knut Anders Hatlen - 19\\/Aug\\/09 09:46\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eManagementMBeanTest started failing in the Tinderbox (trunk and 10.4) after the check-in:\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/Limited\\/testSummary-805541.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/Limited\\/testSummary-805541.html\u003c\\/a\u003e\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_trunk16\\/jvm1.6\\/testing\\/Limited\\/testSummary-805576.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_trunk16\\/jvm1.6\\/testing\\/Limited\\/testSummary-805576.html\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;update: Ole has now logged this problem as DERBY-4356&#93;\u003c\\/span\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12744938_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744938_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/09 07:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-19T07:20:07+0000\'\u003e19\\/Aug\\/09 07:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Knut Anders Hatlen - 19\\/Aug\\/09 09:46\\\"\u003eedited\u003c\\/span\u003e                   ManagementMBeanTest started failing in the Tinderbox (trunk and 10.4) after the check-in: \\n http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/Limited\\/testSummary-805541.html  \\n http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_trunk16\\/jvm1.6\\/testing\\/Limited\\/testSummary-805576.html  \\n\\n  &#91;update: Ole has now logged this problem as DERBY-4356&#93;               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12744946\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12744946&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12744946\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12744946_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744946_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/09 07:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-19T07:54:32+0000\'\u003e19\\/Aug\\/09 07:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI noticed this in the new test (ClassLoaderBootTest):\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eit would be good to null out the three ClassLoader fields in tearDown() so that the class loaders and the classes they have loaded can be garbage collected (otherwise they\'ll stay in memory until the full JUnit run has finished)\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ethe decorateSQL() method creates a table which is said to be used to test export, but I don\'t see any code for testing export\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ethe test cases are wrapped in try \\n{...}\\n\u003cp\u003e catch (SQLException se) \u003c\\/p\u003e\\n{ dumpSQLException(se); }\\n\u003cp\u003e. Won\'t this prevent the reporting of the exception in JUnit? Better to let the exceptions be thrown and handled by the framework?\u003c\\/p\u003e\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ethe methods getFileWhichLoadedClass(Class) and getURL(File) have no callers\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12744946_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12744946_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/09 07:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-19T07:54:32+0000\'\u003e19\\/Aug\\/09 07:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I noticed this in the new test (ClassLoaderBootTest): \\n\\n \\n\\t it would be good to null out the three ClassLoader fields in tearDown() so that the class loaders and the classes they have loaded can be garbage collected (otherwise they\'ll stay in memory until the full JUnit run has finished) \\n \\n\\n\\n \\n\\t the decorateSQL() method creates a table which is said to be used to test export, but I don\'t see any code for testing export \\n \\n\\n\\n \\n\\t the test cases are wrapped in try \\n{...}\\n  catch (SQLException se)  \\n{ dumpSQLException(se); }\\n . Won\'t this prevent the reporting of the exception in JUnit? Better to let the exceptions be thrown and handled by the framework?  \\n \\n\\n\\n \\n\\t the methods getFileWhichLoadedClass(Class) and getURL(File) have no callers \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12745050\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12745050&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12745050\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12745050_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12745050_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/09 13:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-19T13:29:14+0000\'\u003e19\\/Aug\\/09 13:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for those good suggestions, Knut. They are addressed by the patch I am attaching: derby-700-02-aa-testCleanup.diff.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn particular, I added a tearDown() method which resets the class loader and releases resources. It looks to me like those extra try\\/catch blocks were resetting the class loader on the way out--I think tearDown() is a better place for that work.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll run full regression tests against this fix.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12745050_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12745050_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/09 13:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-19T13:29:14+0000\'\u003e19\\/Aug\\/09 13:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for those good suggestions, Knut. They are addressed by the patch I am attaching: derby-700-02-aa-testCleanup.diff. \\n\\n In particular, I added a tearDown() method which resets the class loader and releases resources. It looks to me like those extra try\\/catch blocks were resetting the class loader on the way out--I think tearDown() is a better place for that work. \\n\\n I\'ll run full regression tests against this fix.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12745098\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12745098&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12745098\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12745098_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12745098_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/09 16:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-19T16:09:25+0000\'\u003e19\\/Aug\\/09 16:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommittted derby-700-02-aa-testCleanup.diff at subversion revision 805858. Tests ran cleanly for except for the spillover consequences for ManagementMBeanTest--the regression there is unchanged.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12745098_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12745098_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/09 16:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-19T16:09:25+0000\'\u003e19\\/Aug\\/09 16:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committted derby-700-02-aa-testCleanup.diff at subversion revision 805858. Tests ran cleanly for except for the spillover consequences for ManagementMBeanTest--the regression there is unchanged.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12745229\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12745229&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12745229\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12745229_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12745229_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/09 22:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-19T22:05:00+0000\'\u003e19\\/Aug\\/09 22:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI backported the change to DirFile4.java of 805448 to 10.1 with revision 805978.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12745229_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12745229_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/09 22:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-19T22:05:00+0000\'\u003e19\\/Aug\\/09 22:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I backported the change to DirFile4.java of 805448 to 10.1 with revision 805978.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12748427\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12748427&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12748427\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12748427_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12748427_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Aug\\/09 16:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-27T16:23:24+0000\'\u003e27\\/Aug\\/09 16:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eResolving this issue. It looks like the noise in ManagementMBeanTest has been cleaned up.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12748427_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12748427_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Aug\\/09 16:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-27T16:23:24+0000\'\u003e27\\/Aug\\/09 16:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Resolving this issue. It looks like the noise in ManagementMBeanTest has been cleaned up.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12750601\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12750601&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12750601\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12750601_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12750601_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Sep\\/09 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-09-02T18:35:41+0000\'\u003e02\\/Sep\\/09 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRick, I was wondering if you knew the correlation between \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-700\\\" title=\\\"Derby does not prevent dual boot of database from different classloaders on Linux and Mac OS X\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-700\\\"\u003e\u003cdel\u003eDERBY-700\u003c\\/del\u003e\u003c\\/a\u003e and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4361\\\" title=\\\"testDefault fixture in engine.ErrorStreamTest has been failing with junit.framework.AssertionFailedError: File C:\\\\jartest\\\\JarResults.XXdateXX\\\\ibm15_suites.All\\\\system\\\\derby.log could not be deleted\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4361\\\"\u003e\u003cdel\u003eDERBY-4361\u003c\\/del\u003e\u003c\\/a\u003e. testDefault fixture in ErrorStreamTest has been failing consistently after the checkin went in for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-700\\\" title=\\\"Derby does not prevent dual boot of database from different classloaders on Linux and Mac OS X\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-700\\\"\u003e\u003cdel\u003eDERBY-700\u003c\\/del\u003e\u003c\\/a\u003e. If the test orders are changed and ErrorStreamTest is run after the test ClassLoaderBootTest which was added for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-700\\\" title=\\\"Derby does not prevent dual boot of database from different classloaders on Linux and Mac OS X\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-700\\\"\u003e\u003cdel\u003eDERBY-700\u003c\\/del\u003e\u003c\\/a\u003e, testDefault fixture does not fail anymore. I will look further into what the relationship between the 2 jira entries might be but I thought I would check if it rings a bell for you. Thanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12750601_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12750601_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Sep\\/09 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-09-02T18:35:41+0000\'\u003e02\\/Sep\\/09 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Rick, I was wondering if you knew the correlation between   DERBY-700   and   DERBY-4361  . testDefault fixture in ErrorStreamTest has been failing consistently after the checkin went in for   DERBY-700  . If the test orders are changed and ErrorStreamTest is run after the test ClassLoaderBootTest which was added for   DERBY-700  , testDefault fixture does not fail anymore. I will look further into what the relationship between the 2 jira entries might be but I thought I would check if it rings a bell for you. Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12758822\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12758822&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12758822\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12758822_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12758822_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Sep\\/09 18:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-09-23T18:40:00+0000\'\u003e23\\/Sep\\/09 18:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAdjusting fix version. Fix only works with JDK 1.6 which I think is first supported with 10.3, so even though the Derby part of the fix went back to 10.1, it will only be effective there if the older jvms get fixed.    I will put a request in for the IBM jvm to have the jvm fix backported to at least 1.5.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12758822_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12758822_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Sep\\/09 18:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-09-23T18:40:00+0000\'\u003e23\\/Sep\\/09 18:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Adjusting fix version. Fix only works with JDK 1.6 which I think is first supported with 10.3, so even though the Derby part of the fix went back to 10.1, it will only be effective there if the older jvms get fixed.    I will put a request in for the IBM jvm to have the jvm fix backported to at least 1.5. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12759061\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12759061&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12759061\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12759061_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12759061_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Sep\\/09 08:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-09-24T08:17:47+0000\'\u003e24\\/Sep\\/09 08:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think 10.1 is supposed to work with Java 6 as well. Support for JDBC 4.0 wasn\'t added until 10.2, but as long as your application only calls JDBC 3.0 functionality, you should be able to run it with older Derby versions under Java 6. I frequently run older versions with Java 6, for instance when I search for the version that introduced a certain bug.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12759061_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12759061_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Sep\\/09 08:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-09-24T08:17:47+0000\'\u003e24\\/Sep\\/09 08:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think 10.1 is supposed to work with Java 6 as well. Support for JDBC 4.0 wasn\'t added until 10.2, but as long as your application only calls JDBC 3.0 functionality, you should be able to run it with older Derby versions under Java 6. I frequently run older versions with Java 6, for instance when I search for the version that introduced a certain bug.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12762753\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12762753&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12762753\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12762753_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12762753_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Oct\\/09 19:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-10-06T19:32:40+0000\'\u003e06\\/Oct\\/09 19:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a new release note. The old one referred to the original proposed fix which was not adopted.  Please review.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12762753_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12762753_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Oct\\/09 19:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-10-06T19:32:40+0000\'\u003e06\\/Oct\\/09 19:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a new release note. The old one referred to the original proposed fix which was not adopted.  Please review.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12762759\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12762759&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12762759\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12762759_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12762759_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Oct\\/09 19:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-10-06T19:55:50+0000\'\u003e06\\/Oct\\/09 19:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLooks good, but there were 2 typos...uploading a corrected version.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12762759_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12762759_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Oct\\/09 19:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-10-06T19:55:50+0000\'\u003e06\\/Oct\\/09 19:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Looks good, but there were 2 typos...uploading a corrected version.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12763113\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12763113&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12763113\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12763113_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12763113_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Oct\\/09 16:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-10-07T16:34:33+0000\'\u003e07\\/Oct\\/09 16:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Kathey and Myrna. The release note looks good and it passes the ReleaseNoteReader\'s checks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12763113_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12763113_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Oct\\/09 16:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-10-07T16:34:33+0000\'\u003e07\\/Oct\\/09 16:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Kathey and Myrna. The release note looks good and it passes the ReleaseNoteReader\'s checks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12843843\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-700?focusedCommentId=12843843&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12843843\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12843843_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12843843_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/10 00:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-03-11T00:17:18+0000\'\u003e11\\/Mar\\/10 00:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdating fix version for 10.1 fix\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12843843_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12843843_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/10 00:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-03-11T00:17:18+0000\'\u003e11\\/Mar\\/10 00:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updating fix version for 10.1 fix              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520237991127"> 
    <input type="hidden" title="jira.request.server.time" value="386"> 
    <input type="hidden" title="jira.request.id" value="499x94343595x2"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="5"> 
    <input type="hidden" title="db.reads.time.in.ms" value="50"> 
    <input type="hidden" title="db.conns.time.in.ms" value="59"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 499x94343595x2
	          REQUEST TIMESTAMP : [05/Mar/2018:08:19:51 +0000]
	               REQUEST TIME : 0.3860
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 5

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=36, elapsedTotal=50941165, elapsedMin=738300, elapsedMax=15958467, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=40, elapsedTotal=59996595, elapsedMin=765101, elapsedMax=16007114, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>