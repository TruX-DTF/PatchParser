<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|5b8cb13a98fb1332c48029814ae383bc8c3623b9|lout"> 
  <link rel="shortcut icon" href="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"sd.customer.profile.multi.languages\":true,\"sd.customer.portal.transitions\":true,\"sd.customer.portal.transitions.config\":true,\"sd.custom.email.stripping.rules\":false,\"sd.sla.lucene.issue.id.callback.performance\":true,\"sd.new.settings.sidebar.location\":true,\"sd.workload.report.paginator\":true,\"sd.experimental.portal.search.algorithm.default.1\":false,\"sd.customer.portal.help.center.agent.announcement\":true,\"sd.sla.improved.rendering\":false,\"sd.experimental.portal.search.algorithm.default.2\":false,\"sd.customer.feedback.validate.reporter.on.token\":true,\"sd.custom.email.notifications.utf8.csat.star\":true,\"sd.who.create.customers.by.email.setting\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.renderer.consider.variable.format\":true,\"sd.stats.event.tracking\":true,\"sd.password.helper.dialog\":true,\"sd.canned.responses\":false,\"sd.portal.help.center.customer.signup.secondary.email\":true,\"sd.custom.email.notifications.manage.language\":true,\"sd.use.search.by.permissions\":true,\"sd.slavalue.record.updated.date\":false,\"sd.report.custom.date.range\":false,\"sd.kb.article.helpfulness.report\":false,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"sd.custom.email.notifications.styling\":true,\"sd.workinghours.new.page.bulldog.1\":false,\"sd.customer.portal.two.step.login\":false,\"sd.automation.psmq.async.executor\":true,\"sd.customer.org.list.page.lazy.search\":true,\"sd.approval.requested.when.handler\":true,\"sd.request.type.field.rest.api.filtering.bugfix\":true,\"sd.automation.then.action.auto.answer.approval\":true,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"sla.will.only.be.paused.if.they.are.already.started\":true,\"sd.kb.comment.share.stats.collection\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"sd.customer.orgs.group.participants\":true,\"sd.portal.help.center.customer.signup\":true,\"sd.sla.agent.jql.security.restricted\":true,\"sd.test.feature.flag.x\":true,\"sd.test.feature.flag.y\":false,\"sd.cluster.safe.mail.channel.shutdown\":true,\"sd.email.channel.folders\":false,\"sd.email.analytics.open\":false,\"sd.kb.project.creation.create.link.space\":true,\"sd.workinghours.new.page\":false,\"sd.confluence.anonymous.permission.fix\":true,\"com.atlassian.jira.issuetable.draggable\":true,\"sd.customer.portal.project.agent.announcement\":true,\"sd.automation.audit.log\":true,\"jira.jql.suggestrecentfields\":false,\"sd.canned.responses.check.index.startup\":false,\"sd.new.project.templates\":true,\"sd.custom.email.notifications.custom.rules.simple.ui\":false,\"sd.custom.email.notifications.cut.over\":true,\"sd.dismiss.all.misconfiguration.warnings.setting\":true,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"sd.sla.configurations.export\":true,\"sd.canned.responses.variable.substitution\":true,\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"sd.customer.portal.prioties.per.project.fix\":true,\"jira.instrumentation.laas\":false,\"sd.kb.self.service.report\":false,\"sla.improved.request.handling\":true,\"sd.no.schedule.async.upgrade.tasks\":true,\"sd.kb.primary.nav\":true,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"sd.kb.issueview.panel.phase2\":true,\"sd.email.outsider.comments\":true,\"jira.create.linked.issue\":true,\"sd.kb.issueview.panel\":true,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"sd.approvals.light.weight\":false,\"sd.automation.then.webhook\":true,\"sd.respect.inline.edit.issue.off\":true,\"jira.jql.smartautoselectfirst\":false,\"sd.global.portal.search.atlassian.only.tracking\":false,\"sd.automation.if.condition.comment.primary.action\":true,\"jira.priorities.per.project\":true,\"sd.inline.noformat.renderer\":true,\"sd.customer.request.type.create.edit.screens\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/png,image/vnd.wap.wbmp,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.servicedesk.servicedesk-canned-responses-plugin:canned-responses-data-provider.data"]="{\"substitutionVariables\":{\"issue.summary\":\"Issue summary\",\"issue.description\":\"Issue description\",\"issue.key\":\"Issue key\",\"issue.reporter.name\":\"Issue reporter\",\"issue.resolution\":\"Issue resolution\",\"request.url\":\"Request URL\",\"request.status\":\"Request status\"}}";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-help-links.help-links"]="{\"help\":{\"email.settings\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"managing.queues\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+queues+for+your+team\",\"email.setup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"request.settings.help.bubble\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\",\"email.settings.suitablerequest\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email#Receivingrequestsbyemail-suitablerequest\",\"sla.import.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Importing+SLAs\",\"documentation.home\":\"https://docs.atlassian.com/jira/jsd-docs-039/JIRA+Service+Desk+Documentation\",\"default\":\"https://docs.atlassian.com/jira/jsd-docs-039/\",\"create.space.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base#serving-customers-with-a-knowledge-base-createpermission\",\"email.settings.troubleshooting\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+the+email+channel\",\"admin.notifications.config\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+service+desk+notifications\",\"troubleshoot.requesttype\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+request+types\",\"approvals.configuration\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+JIRA+Service+Desk+approvals\",\"setting.up.reports\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+service+desk+reports\",\"public.signup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+public+signup\",\"knowledge.base\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base\",\"resolve.permission.scheme.errors\":\"https://docs.atlassian.com/jira/jsd-docs-039/Resolving+permission+scheme+errors\",\"getting.started\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+with+JIRA+Service+Desk\",\"getting.started.agent\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+for+service+desk+agents\",\"invite.customers\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\"},\"kb\":{\"default\":\"https://confluence.atlassian.com/display/SDKB/\",\"troubleshooting.user.management.issues\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\",\"legacytransition\":\"https://confluence.atlassian.com/display/SDKB/Replacing+legacy+automatic+transitions+with+automation+rules\",\"umtroubleshoot\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\"}}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-base-url.base-url"]="\"https://issues.apache.org/jira\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"7964627b8bcbb9\"";
WRM._unparsedData["project-id"]="12310110";
WRM._unparsedData["project-key"]="\"LUCENE\"";
WRM._unparsedData["project-name"]="\"Lucene - Core\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310110";
WRM._unparsedData["projectKey"]="\"LUCENE\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/1a6b21131945f6f49ff48336b49ca3fe-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/d8484c9183f546511a8e336a8779bcd9-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d3b35d835f8f46fc3b53bb4db7f85158-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/71d42e74136d842a3ef4d5d136484843-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/95a4826c265852f4904f1e0e7300df68-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/944bb39eced1b35cfc7194aa02eb5a5a/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/5a8f0f8b8aa8f96a4f0f7e9e248d62f3-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="LUCENE-5339"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[LUCENE-5339] Simplify the facet module APIs - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[LUCENE-5339] Simplify the facet module APIs - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/LUCENE" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-5339">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310110" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Lucene - Core'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310110&amp;avatarId=10061"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/LUCENE">Lucene - Core</a></li>
                 <li><a class="issue-link" data-issue-key="LUCENE-5339" href="/jira/browse/LUCENE-5339" id="key-val" rel="12678901">LUCENE-5339</a></li>
                </ol>
                <h1 id="summary-val">Simplify the facet module APIs</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-5339"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/LUCENE-5339/LUCENE-5339.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/LUCENE-5339/LUCENE-5339.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/LUCENE-5339/LUCENE-5339.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/LUCENE-5339/LUCENE-5339.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"> Improvement </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+fixVersion+%3D+4.7" title="4.7 Major release after 4.6">4.7</a>, <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+fixVersion+%3D+6.0" title="6.0 Major release after 5.5">6.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+component+%3D+%22modules%2Ffacet%22" title="modules/facet Faceted Indexing &amp; Search module">modules/facet</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12678901-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310120" class="item"> 
                     <div class="wrap"> 
                      <strong title="Lucene Fields" class="name">Lucene Fields:</strong> 
                      <div id="customfield_12310120-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310120-field"> 
                        <span>New</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>I'd like to explore simplifications to the facet module's APIs: I<br> think the current APIs are complex, and the addition of a new feature<br> (sparse faceting, <a href="https://issues.apache.org/jira/browse/LUCENE-5333" title="Support sparse faceting for heterogeneous indices" class="issue-link" data-issue-key="LUCENE-5333">LUCENE-5333</a>) threatens to add even more classes<br> (e.g., FacetRequestBuilder). I think we can do better.</p> 
                  <p>So, I've been prototyping some drastic changes; this is very<br> early/exploratory and I'm not sure where it'll wind up but I think the<br> new approach shows promise.</p> 
                  <p>The big changes are:</p> 
                  <ul> 
                   <li>Instead of *FacetRequest/Params/Result, you directly instantiate<br> the classes that do facet counting (currently TaxonomyFacetCounts,<br> RangeFacetCounts or SortedSetDVFacetCounts), passing in the<br> SimpleFacetsCollector, and then you interact with those classes to<br> pull labels + values (topN under a path, sparse, specific labels).</li> 
                  </ul> 
                  <ul> 
                   <li>At index time, no more FacetIndexingParams/CategoryListParams;<br> instead, you make a new SimpleFacetFields and pass it the field it<br> should store facets + drill downs under. If you want more than<br> one CLI you create more than one instance of SimpleFacetFields.</li> 
                  </ul> 
                  <ul> 
                   <li>I added a simple schema, where you state which dimensions are<br> hierarchical or multi-valued. From this we decide how to index<br> the ordinals (no more OrdinalPolicy).</li> 
                  </ul> 
                  <p>Sparse faceting is just another method (getAllDims), on both taxonomy<br> &amp; ssdv facet classes.</p> 
                  <p>I haven't created a common base class / interface for all of the<br> search-time facet classes, but I think this may be possible/clean, and<br> perhaps useful for drill sideways.</p> 
                  <p>All the new classes are under oal.facet.simple.*.</p> 
                  <p>Lots of things that don't work yet: drill sideways, complements,<br> associations, sampling, partitions, etc. This is just a start ...</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/LUCENE-5339?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/LUCENE-5339?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/LUCENE-5339?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/LUCENE-5339?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12619615" data-issue-id="12678901" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12619615/LUCENE-5339.patch" draggable="true" data-downloadurl="text/plain:LUCENE-5339.patch:https://issues.apache.org/jira/secure/attachment/12619615/LUCENE-5339.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12619615/LUCENE-5339.patch" title="Latest  19/Dec/13 18:35 - Michael McCandless" draggable="true" data-downloadurl="text/plain:LUCENE-5339.patch:https://issues.apache.org/jira/secure/attachment/12619615/LUCENE-5339.patch">LUCENE-5339.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-12-19T18:35:56.590Z">19/Dec/13 18:35</time>
                   </dd>
                   <dd class="attachment-size">
                    2.00 MB
                   </dd>
                   <dd class="attachment-author">
                    Michael McCandless
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12613821" data-issue-id="12678901" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12613821/LUCENE-5339.patch" draggable="true" data-downloadurl="text/plain:LUCENE-5339.patch:https://issues.apache.org/jira/secure/attachment/12613821/LUCENE-5339.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12613821/LUCENE-5339.patch" title=" 14/Nov/13 12:09 - Michael McCandless" draggable="true" data-downloadurl="text/plain:LUCENE-5339.patch:https://issues.apache.org/jira/secure/attachment/12613821/LUCENE-5339.patch">LUCENE-5339.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-11-14T12:09:12.495Z">14/Nov/13 12:09</time>
                   </dd>
                   <dd class="attachment-size">
                    123 kB
                   </dd>
                   <dd class="attachment-author">
                    Michael McCandless
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12613450" data-issue-id="12678901" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12613450/LUCENE-5339.patch" draggable="true" data-downloadurl="text/plain:LUCENE-5339.patch:https://issues.apache.org/jira/secure/attachment/12613450/LUCENE-5339.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12613450/LUCENE-5339.patch" title=" 12/Nov/13 23:07 - Michael McCandless" draggable="true" data-downloadurl="text/plain:LUCENE-5339.patch:https://issues.apache.org/jira/secure/attachment/12613450/LUCENE-5339.patch">LUCENE-5339.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-11-12T23:07:56.147Z">12/Nov/13 23:07</time>
                   </dd>
                   <dd class="attachment-size">
                    90 kB
                   </dd>
                   <dd class="attachment-author">
                    Michael McCandless
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="contains">
                   contains
                  </dt> 
                  <dd id="internal-12684185_12310060"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="LUCENE-5367: NoSuchElementException occurs when org.apache.lucene.facet.index.FacetFields is used."> <a href="/jira/browse/LUCENE-5367" data-issue-key="LUCENE-5367" class="issue-link link-title resolution">LUCENE-5367</a> <span class="link-summary">NoSuchElementException occurs when org.apache.lucene.facet.index.FacetFields is used.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/blocker.svg" width="16" height="16" title="Blocker - Blocks development and/or testing work, production could not run" alt="Blocker - Blocks development and/or testing work, production could not run"> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_mikemccand" rel="mikemccand" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Michael McCandless&quot;,&quot;emailAddress&quot;:&quot;lucene@mikemccandless.com&quot;,&quot;username&quot;:&quot;mikemccand&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mikemccand"></span></span> Michael McCandless </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_mikemccand" rel="mikemccand" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Michael McCandless&quot;,&quot;emailAddress&quot;:&quot;lucene@mikemccandless.com&quot;,&quot;username&quot;:&quot;mikemccand&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mikemccand"></span></span> Michael McCandless </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">4</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="12/Nov/13 23:05"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2013-11-12T23:05:44+0000">12/Nov/13 23:05</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="09/May/16 18:33"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2016-05-09T18:33:45+0000">09/May/16 18:33</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="04/Jan/14 12:33"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2014-01-04T12:33:45+0000">04/Jan/14 12:33</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for n/a, Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-5339?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/LUCENE-5339?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-13820626\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13820626&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13820626\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13820626_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13820626_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/13 23:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-12T23:07:56+0000\'\u003e12\\/Nov\\/13 23:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eStarting patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13820626_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13820626_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/13 23:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-12T23:07:56+0000\'\u003e12\\/Nov\\/13 23:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Starting patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13821139\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13821139&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13821139\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13821139_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13821139_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Nov\\/13 10:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-13T10:01:23+0000\'\u003e13\\/Nov\\/13 10:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSome comments about the patch:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eYou have a TODO file which seems to have been \'svn added\' - are you aware of it? Just making sure, so it\'s not accidentally committed \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eMaybe we should do this work in a branch and avoid the .simple package? It seems that the majority of the patch is about copy-pasting classes over to .simple, which I assume you did so you can work in isolation and have tests pass?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eFieldTypes:\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eCan FT.FieldType provide a ctor taking these arguments and then DEFAULT_FIELD_TYPE pass (false,false)? Or, init those two members to false.\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eI wonder if FieldTypes won\'t confuse users w\\/ Field.FieldType, so maybe you should name it DimType or something? And the upper class FacetsConfig?\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eMaybe instead of setHierarchical + setMultiValued you do setDimType(DimType)? Then you could avoid the synchronization?\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eNot sure, but I think that SimpleFacetFields adds the dimension\'s ordinal if the dim is both hierarchical and multi-valued? That\'s a step back from the default ALL_BUT_DIM that we have today. I think we might want to have a requiresDimValue or something, because I do think the dimension\'s value (count) is most often unneeded, and it\'s a waste to encode its ordinal?\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eConstants isn\'t documented, not sure if \'precommit\' will like that, but in general I think the constants should have jdocs. Maybe put a nocommit?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eTaxonomyFacetCounts\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e.getAllDims() &#8211; If a dimension is not hierarchical, I think SimpleFacetResult.count == 0? In that case, sorting by its count is useless?\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eI think it\'s also relevant for SortedSet?\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eLabelAndValue has a Number as the value rather than double. I see this class is used only in the final step (labeling), but what\'s wrong w\\/ the previous \'double\' primitive? Is it to avoid casting or something?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eOn the approach in general - I personally don\'t think the current API is overwhelming, but looking at your patch, I do think it could use some simplification. But all in all, it allows an app extend the facets capabilities in ways that do not force it to duplicate a lot of code. Let me explain:\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cins\u003eCategoryListIterator\u003c\\/ins\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThat\'s the piece of code which is responsible for decoding the category list. It\'s currently used for two purposes: (1) allow you to encode the categories in different formats (using IntEncoder\\/Decoder abstraction) as well as load the categories from a different source. E.g. that\'s how we were able to test fast cutting over facets to DV from Payload, that\'s a nice abstraction for letting you load the values from a cache, and so forth.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf you want to specialize code, you can do what FastCountingFacetsAggregator does &#8211; if you encoded w\\/ DGapVInt and you want counting, it doesn\'t go through the CLI API. But if you look at SumScoreFacetsAggregator, there\'s no reason for it to be limited to just DGapVInt encoding, or that you (the app) won\'t be able to pull the ordinals from a cache, without rewriting SumScoreFacetsAggregator.\u003c\\/p\u003e\\n\\n\u003cp\u003eHack, even though it\'s not implemented yet, we could implement a SortedSetCLI (as far as I can tell) which uses SortedSetDVReaderState to pull the ordinals of document. It\'s really a useful interface.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo IMO the CLI interface is important. Most apps, I believe, don\'t extend the facets module (they\'ll use counting and maybe aggregate by ValueSource pre-built classes). But those that do want to add another aggregation method (e.g. ValueSourceFacetsAggregator), can simply use the CLI API, or copy-paste the DGapVInt decode logic if they want to specialize. Especially that that code is not that trivial, and we\'ve spent a lot of time optimizing it. And the few apps that want to explore other encoding\\/decoding logic can write their own CLI.\u003c\\/p\u003e\\n\\n\u003cp\u003eWithout that interface, if e.g. you want to encode the ordinals differently, or load them from a cache (e.g. CachedOrds), you\'d have to rewrite \u003cb\u003eevery\u003c\\/b\u003e aggregation method that you want to use. And most probably you\'ll copy-paste the majority of the code. So why let go of the interface?\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cins\u003eFacetsCollector\u003c\\/ins\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s pretty much your SimpleFC, only it requires to get a FacetsAccumulator. That was done as a convenience so that apps can send in a collector and then call fc.getFacetResults. But its essense is really the fact that it collects MatchingDocs per segment, which the aggregators later use to aggreate the faces in those matching docs.\u003c\\/p\u003e\\n\\n\u003cp\u003eGiven the changes in this patch, +1 for making it just return the List&lt;MatchingDocs&gt; and let whatever API we decide on to use that list, instead of FC.getFacetResults().\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cins\u003eFacetsAggregator\u003c\\/ins\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThis class lets you implement the aggregation function, be it count, sum-score, value-source or by-association. I think it\'s equivalent to TaxoFacetCounts, e.g. in your approach, if anyone will want to aggregate the ordinals by other than count, that\'s what they will need to write.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat I like about the approach in your patch is that (and I had similar thoughts on the last round of API changes) it \\\"reverses\\\" the flow. The app says \\\"I want to count the ords in that field, and sum-score the ords in that field\\\" and then the app can ask for the aggregated values from each such aggregator. Whereas today, app does \\\"new CFR(), new CFR(), new CFR(), new SumScore()\\\" and then receives back the List&lt;FacetResult&gt;. Today\'s API is convenient in that it allows you to pass a List&lt;FR&gt; around in your code and get back a List&lt;FacetResult&gt;. But I don\'t see this convenience getting away (you\'ll just pass a List&lt;FacetsAggregator&gt; and then pull the requested values later on). Also, you sort of pulled the specific requests, such as .getSpecificCount(CP) and .getAllDims() up to FacetsAggregator, where today this can be done by FacetResultsHandler (you\'d have to write one, as I did on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5333\\\" title=\\\"Support sparse faceting for heterogeneous indices\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5333\\\"\u003eLUCENE-5333\u003c\\/a\u003e).\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat I like less about it is that it folds in the logic coded by FacetsAccumulator and FacetResultsHandler:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eFacetsAccumulator\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eInvokes FacetsAggregator to aggregate the facets in MatchingDocs\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eWhether the request specifies a CP for which we need to rollupValues, it asks the aggregator to do so\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eIt uses a FacetResultsHandler to compute the top-K facets for each request.\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eFacetResultsHandler\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eComputes top-K values for each parent category\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eHas variants that return a full sub-tree (TopKInEachNodeHandler)\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eBy means of extension, allows you to get the value of a specific CategoryPath, as well as get values for all dimensions (as I\'ve shown on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5333\\\" title=\\\"Support sparse faceting for heterogeneous indices\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5333\\\"\u003eLUCENE-5333\u003c\\/a\u003e).\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eSo I\'m torn here. I really like how the API lets you extend things, and only the things that you care about. If you only want to implement a ValueSourceFacetsAggregator, you shouldn\'t be worried about whether or not to call rollupValues or how to compute top-K. That seems redundant. You should focus on what you want to extend. I also like less the fact that now every TaxoFacetsSomething will need to be aware of the facets configuration...\u003c\\/p\u003e\\n\\n\u003cp\u003eBut I do like the approach presented in the patch, so I wonder if there\'s anything we can do to preserve the focused extension points on one hand, yet simplify the app\'s integration with the API on the other hand. Like, if an app did something like this:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eFacetsAccumulator fa = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e TaxoFA(..., matchingDocs, \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e CountingFacetsAggregator(\u003cspan class=\\\"code-quote\\\"\u003e\\\"dvFacets1\\\"\u003c\\/span\u003e, [CategoryListIterator]), [FacetResultsHandler]); \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ or SortedSetFA()\\n\u003c\\/span\u003efa.getTopK(dimension); \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ or fa.getTopK(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e CategoryPath(...))\\n\u003c\\/span\u003efa.getValueOf(CategoryPath);\\nfa.getAllDimensions(); \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ does not depend on the aggregation function, only needs the Taxonomy and \u003cspan class=\\\"code-object\\\"\u003eint\u003c\\/span\u003e[]\\/\u003cspan class=\\\"code-object\\\"\u003efloat\u003c\\/span\u003e[] array source.\\n\u003c\\/span\u003e\\nfa = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e TaxoFA(..., matchingDocs, \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e SumScoreFacetsAggregator(\u003cspan class=\\\"code-quote\\\"\u003e\\\"dvFacets2\\\"\u003c\\/span\u003e, [CategoryListIterator]), [FacetResultsHandler]); \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ or SortedSetFA()\\n\u003c\\/span\u003efa.getTopK(dimension); \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ or fa.getTopK(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e CategoryPath(...))\\n\u003c\\/span\u003efa.getValueOf(CategoryPath);\\nfa.getAllDimensions();\\n\\nfa = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e TaxoFA(..., matchingDocs, \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e SumIntAssociationFacetsAggregator(\u003cspan class=\\\"code-quote\\\"\u003e\\\"dvFacets3\\\"\u003c\\/span\u003e), [FacetResultsHandler]); \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ no CLI or SortedSetFA\\n\u003c\\/span\u003efa.getTopK(dimension); \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ or fa.getTopK(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e CategoryPath(...))\\n\u003c\\/span\u003efa.getValueOf(CategoryPath);\\nfa.getAllDimensions();\\n\\nRangeAccumulator range = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e RangeAccumulator(..., matchingDocs, ranges); \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ RangeAccumulator might not even extend FacetsAccumulator\\n\u003c\\/span\u003erange.getTopK(dimension);\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ I think the \u003cspan class=\\\"code-keyword\\\"\u003erest\u003c\\/span\u003e of the getters make no sense?\u003c\\/span\u003e\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThe idea is that internally, FacetsAccumulator uses FacetsAggregator to do the aggregation and rollup if needed, and you can optionally pass a FacetResultsHandler, while it defaults to a FlatFacetResultsHandler (today\'s silly name DepthOneFRH). You can also pass your CategoryListIterator to the FacetsAggregator (those that need it). That way, app\'s code looks similar to the one in the patch, only we allow more code reuse between different aggregation functions.\u003c\\/p\u003e\\n\\n\u003cp\u003eI hope this will allow us to support other aggregation functions by SortedSet too, as there\'s really no reason why not to do it. There are two differences between SortedSet and TaxoIndex: (1) the Taxonomy implementation (where you pull the children of an ordinal from, how you do labeling etc.) and (2) where the ordinals are encoded in the search index (BinaryDV in TaxoIndex case, SortedSetDV in SortedSet case). The latter can easily be solved by a CLI implementation of SortedSet and former by an abstract Taxonomy (read-only) API which both SortedSet and TaxoIndex implement. We should explore these on a separate issue though.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that the problem with your current patch is that the aggregation is done in the constructor, so it sort of eliminates reasonable ways to extend things. But if things were done differently, we could have an abstract FacetsAggregator instead of FacetsAccumulator which let you implement only the .aggregate() method, and take care of rollup + top-K computation itself. But that means you\'d need to initialize the class and then call a .aggregate() or .compute() before you call any of the .getTopK() for instance (unless we check in every .getTopK() if it\'s already computed...).\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cins\u003eFacetArrays\u003c\\/ins\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eUnfortunately, there is no efficient way to hold either an int or float in Java, without specifying the type of the array (i.e. long[] or double[] are too expensive), so this class abstracts the way facets are aggregated, so that we can have different FacetAggregators implementations, again, reusing the majority of the irrelevant code (top-K computation, rollup, CategoryListIterator...).\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t know if we can get rid of it... especially as there might be aggregators that are interested in both arrays (e.g. avgOfSomething). Maybe if we have a FacetsAccumulator abstract class, we can have an IntFA and FloatFA abstract classes which give you access to an int[]\\/float[] arrays, and matching FacetResultsHandler?\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cins\u003eFacetIndexingParams\u003c\\/ins\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eBy all means, I\'m +1 for simplifying this class and make it more user-friendly. I like how you can specify a DimType (hierarchical, singleValue...) instead of setting the more arbitrary OrdinalPolicy. I do think this class has some value today, e.g. in CategoryListParams (which you nuked), the app doesn\'t need to know about the field under which facets are indexed at all, only if it cares to change it or index multiple category lists. Not sure it\'s a blocker, just pointing that out. On the plus side - it makes app more aware about what\'s going on in its index...\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t have strong feelings about this class, we can rename it to FacetsConfig or whatever, but let\'s put the configuration parameters under it (e.g. DimType and drillDownDelimiter)?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13821139_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13821139_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Nov\\/13 10:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-13T10:01:23+0000\'\u003e13\\/Nov\\/13 10:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Some comments about the patch: \\n\\n \\n\\t You have a TODO file which seems to have been \'svn added\' - are you aware of it? Just making sure, so it\'s not accidentally committed   \\n \\n\\n\\n \\n\\t Maybe we should do this work in a branch and avoid the .simple package? It seems that the majority of the patch is about copy-pasting classes over to .simple, which I assume you did so you can work in isolation and have tests pass? \\n \\n\\n\\n \\n\\t FieldTypes:\\n\\t \\n\\t\\t Can FT.FieldType provide a ctor taking these arguments and then DEFAULT_FIELD_TYPE pass (false,false)? Or, init those two members to false. \\n\\t\\t I wonder if FieldTypes won\'t confuse users w\\/ Field.FieldType, so maybe you should name it DimType or something? And the upper class FacetsConfig? \\n\\t\\t Maybe instead of setHierarchical + setMultiValued you do setDimType(DimType)? Then you could avoid the synchronization? \\n\\t\\t Not sure, but I think that SimpleFacetFields adds the dimension\'s ordinal if the dim is both hierarchical and multi-valued? That\'s a step back from the default ALL_BUT_DIM that we have today. I think we might want to have a requiresDimValue or something, because I do think the dimension\'s value (count) is most often unneeded, and it\'s a waste to encode its ordinal? \\n\\t \\n\\t \\n \\n\\n\\n \\n\\t Constants isn\'t documented, not sure if \'precommit\' will like that, but in general I think the constants should have jdocs. Maybe put a nocommit? \\n \\n\\n\\n \\n\\t TaxonomyFacetCounts\\n\\t \\n\\t\\t .getAllDims() &#8211; If a dimension is not hierarchical, I think SimpleFacetResult.count == 0? In that case, sorting by its count is useless?\\n\\t\\t \\n\\t\\t\\t I think it\'s also relevant for SortedSet? \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n \\n\\t LabelAndValue has a Number as the value rather than double. I see this class is used only in the final step (labeling), but what\'s wrong w\\/ the previous \'double\' primitive? Is it to avoid casting or something? \\n \\n\\n\\n On the approach in general - I personally don\'t think the current API is overwhelming, but looking at your patch, I do think it could use some simplification. But all in all, it allows an app extend the facets capabilities in ways that do not force it to duplicate a lot of code. Let me explain: \\n\\n  CategoryListIterator  \\n\\n That\'s the piece of code which is responsible for decoding the category list. It\'s currently used for two purposes: (1) allow you to encode the categories in different formats (using IntEncoder\\/Decoder abstraction) as well as load the categories from a different source. E.g. that\'s how we were able to test fast cutting over facets to DV from Payload, that\'s a nice abstraction for letting you load the values from a cache, and so forth. \\n\\n If you want to specialize code, you can do what FastCountingFacetsAggregator does &#8211; if you encoded w\\/ DGapVInt and you want counting, it doesn\'t go through the CLI API. But if you look at SumScoreFacetsAggregator, there\'s no reason for it to be limited to just DGapVInt encoding, or that you (the app) won\'t be able to pull the ordinals from a cache, without rewriting SumScoreFacetsAggregator. \\n\\n Hack, even though it\'s not implemented yet, we could implement a SortedSetCLI (as far as I can tell) which uses SortedSetDVReaderState to pull the ordinals of document. It\'s really a useful interface. \\n\\n So IMO the CLI interface is important. Most apps, I believe, don\'t extend the facets module (they\'ll use counting and maybe aggregate by ValueSource pre-built classes). But those that do want to add another aggregation method (e.g. ValueSourceFacetsAggregator), can simply use the CLI API, or copy-paste the DGapVInt decode logic if they want to specialize. Especially that that code is not that trivial, and we\'ve spent a lot of time optimizing it. And the few apps that want to explore other encoding\\/decoding logic can write their own CLI. \\n\\n Without that interface, if e.g. you want to encode the ordinals differently, or load them from a cache (e.g. CachedOrds), you\'d have to rewrite  every  aggregation method that you want to use. And most probably you\'ll copy-paste the majority of the code. So why let go of the interface? \\n\\n  FacetsCollector  \\n\\n It\'s pretty much your SimpleFC, only it requires to get a FacetsAccumulator. That was done as a convenience so that apps can send in a collector and then call fc.getFacetResults. But its essense is really the fact that it collects MatchingDocs per segment, which the aggregators later use to aggreate the faces in those matching docs. \\n\\n Given the changes in this patch, +1 for making it just return the List&lt;MatchingDocs&gt; and let whatever API we decide on to use that list, instead of FC.getFacetResults(). \\n\\n  FacetsAggregator  \\n\\n This class lets you implement the aggregation function, be it count, sum-score, value-source or by-association. I think it\'s equivalent to TaxoFacetCounts, e.g. in your approach, if anyone will want to aggregate the ordinals by other than count, that\'s what they will need to write. \\n\\n What I like about the approach in your patch is that (and I had similar thoughts on the last round of API changes) it \\\"reverses\\\" the flow. The app says \\\"I want to count the ords in that field, and sum-score the ords in that field\\\" and then the app can ask for the aggregated values from each such aggregator. Whereas today, app does \\\"new CFR(), new CFR(), new CFR(), new SumScore()\\\" and then receives back the List&lt;FacetResult&gt;. Today\'s API is convenient in that it allows you to pass a List&lt;FR&gt; around in your code and get back a List&lt;FacetResult&gt;. But I don\'t see this convenience getting away (you\'ll just pass a List&lt;FacetsAggregator&gt; and then pull the requested values later on). Also, you sort of pulled the specific requests, such as .getSpecificCount(CP) and .getAllDims() up to FacetsAggregator, where today this can be done by FacetResultsHandler (you\'d have to write one, as I did on  LUCENE-5333 ). \\n\\n What I like less about it is that it folds in the logic coded by FacetsAccumulator and FacetResultsHandler: \\n\\n \\n\\t FacetsAccumulator\\n\\t \\n\\t\\t Invokes FacetsAggregator to aggregate the facets in MatchingDocs \\n\\t\\t Whether the request specifies a CP for which we need to rollupValues, it asks the aggregator to do so \\n\\t\\t It uses a FacetResultsHandler to compute the top-K facets for each request. \\n\\t \\n\\t \\n \\n\\n\\n \\n\\t FacetResultsHandler\\n\\t \\n\\t\\t Computes top-K values for each parent category \\n\\t\\t Has variants that return a full sub-tree (TopKInEachNodeHandler) \\n\\t\\t By means of extension, allows you to get the value of a specific CategoryPath, as well as get values for all dimensions (as I\'ve shown on  LUCENE-5333 ). \\n\\t \\n\\t \\n \\n\\n\\n So I\'m torn here. I really like how the API lets you extend things, and only the things that you care about. If you only want to implement a ValueSourceFacetsAggregator, you shouldn\'t be worried about whether or not to call rollupValues or how to compute top-K. That seems redundant. You should focus on what you want to extend. I also like less the fact that now every TaxoFacetsSomething will need to be aware of the facets configuration... \\n\\n But I do like the approach presented in the patch, so I wonder if there\'s anything we can do to preserve the focused extension points on one hand, yet simplify the app\'s integration with the API on the other hand. Like, if an app did something like this: \\n\\n  \\n FacetsAccumulator fa =  new  TaxoFA(..., matchingDocs,  new  CountingFacetsAggregator( \\\"dvFacets1\\\" , [CategoryListIterator]), [FacetResultsHandler]);  \\/\\/ or SortedSetFA()\\n fa.getTopK(dimension);  \\/\\/ or fa.getTopK( new  CategoryPath(...))\\n fa.getValueOf(CategoryPath);\\nfa.getAllDimensions();  \\/\\/ does not depend on the aggregation function, only needs the Taxonomy and  int []\\/ float [] array source.\\n \\nfa =  new  TaxoFA(..., matchingDocs,  new  SumScoreFacetsAggregator( \\\"dvFacets2\\\" , [CategoryListIterator]), [FacetResultsHandler]);  \\/\\/ or SortedSetFA()\\n fa.getTopK(dimension);  \\/\\/ or fa.getTopK( new  CategoryPath(...))\\n fa.getValueOf(CategoryPath);\\nfa.getAllDimensions();\\n\\nfa =  new  TaxoFA(..., matchingDocs,  new  SumIntAssociationFacetsAggregator( \\\"dvFacets3\\\" ), [FacetResultsHandler]);  \\/\\/ no CLI or SortedSetFA\\n fa.getTopK(dimension);  \\/\\/ or fa.getTopK( new  CategoryPath(...))\\n fa.getValueOf(CategoryPath);\\nfa.getAllDimensions();\\n\\nRangeAccumulator range =  new  RangeAccumulator(..., matchingDocs, ranges);  \\/\\/ RangeAccumulator might not even extend FacetsAccumulator\\n range.getTopK(dimension);\\n \\/\\/ I think the  rest  of the getters make no sense? \\n \\n  \\n\\n The idea is that internally, FacetsAccumulator uses FacetsAggregator to do the aggregation and rollup if needed, and you can optionally pass a FacetResultsHandler, while it defaults to a FlatFacetResultsHandler (today\'s silly name DepthOneFRH). You can also pass your CategoryListIterator to the FacetsAggregator (those that need it). That way, app\'s code looks similar to the one in the patch, only we allow more code reuse between different aggregation functions. \\n\\n I hope this will allow us to support other aggregation functions by SortedSet too, as there\'s really no reason why not to do it. There are two differences between SortedSet and TaxoIndex: (1) the Taxonomy implementation (where you pull the children of an ordinal from, how you do labeling etc.) and (2) where the ordinals are encoded in the search index (BinaryDV in TaxoIndex case, SortedSetDV in SortedSet case). The latter can easily be solved by a CLI implementation of SortedSet and former by an abstract Taxonomy (read-only) API which both SortedSet and TaxoIndex implement. We should explore these on a separate issue though. \\n\\n I think that the problem with your current patch is that the aggregation is done in the constructor, so it sort of eliminates reasonable ways to extend things. But if things were done differently, we could have an abstract FacetsAggregator instead of FacetsAccumulator which let you implement only the .aggregate() method, and take care of rollup + top-K computation itself. But that means you\'d need to initialize the class and then call a .aggregate() or .compute() before you call any of the .getTopK() for instance (unless we check in every .getTopK() if it\'s already computed...). \\n\\n  FacetArrays  \\n\\n Unfortunately, there is no efficient way to hold either an int or float in Java, without specifying the type of the array (i.e. long[] or double[] are too expensive), so this class abstracts the way facets are aggregated, so that we can have different FacetAggregators implementations, again, reusing the majority of the irrelevant code (top-K computation, rollup, CategoryListIterator...). \\n\\n I don\'t know if we can get rid of it... especially as there might be aggregators that are interested in both arrays (e.g. avgOfSomething). Maybe if we have a FacetsAccumulator abstract class, we can have an IntFA and FloatFA abstract classes which give you access to an int[]\\/float[] arrays, and matching FacetResultsHandler? \\n\\n  FacetIndexingParams  \\n\\n By all means, I\'m +1 for simplifying this class and make it more user-friendly. I like how you can specify a DimType (hierarchical, singleValue...) instead of setting the more arbitrary OrdinalPolicy. I do think this class has some value today, e.g. in CategoryListParams (which you nuked), the app doesn\'t need to know about the field under which facets are indexed at all, only if it cares to change it or index multiple category lists. Not sure it\'s a blocker, just pointing that out. On the plus side - it makes app more aware about what\'s going on in its index... \\n\\n I don\'t have strong feelings about this class, we can rename it to FacetsConfig or whatever, but let\'s put the configuration parameters under it (e.g. DimType and drillDownDelimiter)?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13821142\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13821142&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13821142\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gilad\\\" id=\\\"commentauthor_13821142_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gilad\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gilad\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Gilad Barkai\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13821142_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Nov\\/13 10:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-13T10:03:02+0000\'\u003e13\\/Nov\\/13 10:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMike, \u003cbr\\/\u003e\\nthe idea of simplifying the API sounds great, but is it really that complected now?\u003c\\/p\u003e\\n\\n\u003cp\u003eFacet\'s \u003ctt\u003eAccumulator\u003c\\/tt\u003e is similar to Lucene\'s \u003ctt\u003eCollector\u003c\\/tt\u003e, the \u003ctt\u003eAggregator\u003c\\/tt\u003e is sort of a \u003ctt\u003eScorer\u003c\\/tt\u003e, and a \u003ctt\u003eFacetRequest\u003c\\/tt\u003e is a sort of \u003ctt\u003eQuery\u003c\\/tt\u003e.\u003cbr\\/\u003e\\nActually the model after which the facets were designed was Lucene\'s.\u003cbr\\/\u003e\\nThe optional \u003ctt\u003eIndexingParams\u003c\\/tt\u003e came before the \u003ctt\u003eIndexWriterConfig\u003c\\/tt\u003e but these can be said to be similar as well.\u003c\\/p\u003e\\n\\n\u003cp\u003eMore low-level objects such as the \u003ctt\u003eCategoryListParams\u003c\\/tt\u003e are not a must, and the user may never know about them (and btw, they are similar to \u003ctt\u003eCodecs\u003c\\/tt\u003e).\u003c\\/p\u003e\\n\\n\u003cp\u003eI reviewed the patch (mostly the taxonomy related part) and I think that even without associations, counts only is a bit narrow.\u003cbr\\/\u003e\\nSpecially with large counts (say many thousands) the count doesn\'t say much because of the \\\"long tail\\\" problem.\u003cbr\\/\u003e\\nWhen there\'s a large result set, all the categories will get high hit counts. And just as scoring by counting the number of query terms each document matches doesn\'t always make much sense (and I think all scoring functions do things a lot smarter), using counts for facets may at times yield irrelevant results.\u003c\\/p\u003e\\n\\n\u003cp\u003eWe found out that for large result sets, an aggregation of Lucene\'s score (rather than \u003ctt\u003e+1\u003c\\/tt\u003e),  or even score^2 yields better results for the user. Also arbitrary expressions which are corpus specific (with or without associations) changes the facets\' usability dramatically. That\'s partially why the code was built to allow different \\\"aggregation\\\" techniques, allowing associations, numeric values etc into each value for each category.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs for the new API, it may be useful if there would be a single \\\"interface\\\" - so all facets implementations could be switched easily, allowing users to experiment with the different implementations without writing a lot of code. \u003c\\/p\u003e\\n\\n\u003cp\u003eBottom line, I\'m all for simplifying the API but the current cost seems to great, and I\'m not sure the benefits are proportional \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gilad\\\" id=\\\"commentauthor_13821142_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gilad\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gilad\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Gilad Barkai\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13821142_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Nov\\/13 10:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-13T10:03:02+0000\'\u003e13\\/Nov\\/13 10:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mike,  \\nthe idea of simplifying the API sounds great, but is it really that complected now? \\n\\n Facet\'s  Accumulator  is similar to Lucene\'s  Collector , the  Aggregator  is sort of a  Scorer , and a  FacetRequest  is a sort of  Query . \\nActually the model after which the facets were designed was Lucene\'s. \\nThe optional  IndexingParams  came before the  IndexWriterConfig  but these can be said to be similar as well. \\n\\n More low-level objects such as the  CategoryListParams  are not a must, and the user may never know about them (and btw, they are similar to  Codecs ). \\n\\n I reviewed the patch (mostly the taxonomy related part) and I think that even without associations, counts only is a bit narrow. \\nSpecially with large counts (say many thousands) the count doesn\'t say much because of the \\\"long tail\\\" problem. \\nWhen there\'s a large result set, all the categories will get high hit counts. And just as scoring by counting the number of query terms each document matches doesn\'t always make much sense (and I think all scoring functions do things a lot smarter), using counts for facets may at times yield irrelevant results. \\n\\n We found out that for large result sets, an aggregation of Lucene\'s score (rather than  +1 ),  or even score^2 yields better results for the user. Also arbitrary expressions which are corpus specific (with or without associations) changes the facets\' usability dramatically. That\'s partially why the code was built to allow different \\\"aggregation\\\" techniques, allowing associations, numeric values etc into each value for each category. \\n\\n As for the new API, it may be useful if there would be a single \\\"interface\\\" - so all facets implementations could be switched easily, allowing users to experiment with the different implementations without writing a lot of code.  \\n\\n Bottom line, I\'m all for simplifying the API but the current cost seems to great, and I\'m not sure the benefits are proportional   \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13821481\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13821481&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13821481\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13821481_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13821481_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Nov\\/13 16:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-13T16:19:12+0000\'\u003e13\\/Nov\\/13 16:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI took a look at the patch (actually just the tests!) and had these random thoughts:\u003c\\/p\u003e\\n\\n\u003cp\u003eCan we rename CategoryPath to FacetLabel or something more intuitive?\u003cbr\\/\u003e\\nCan there be sugar like addFields(doc, FacetLabel) so a user doesnt have to make lists etc?\u003cbr\\/\u003e\\nMaybe it could be varargs like FacetLabel..., so just some sugar:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\u003cspan class=\\\"code-keyword\\\"\u003epublic\u003c\\/span\u003e void addFields(Document doc, FacetLabel... labels) {\\n  addFields(doc, Arrays.asList(labels));\\n}\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003enew LongRange(\\\"less than 10\\\", 0L, true, 10L, false) &lt;-- can we make it so this is less arguments?\u003c\\/p\u003e\\n\\n\u003cp\u003eI like that RangeFacetCounts takes varargs though!\u003c\\/p\u003e\\n\\n\u003cp\u003eFor the Taxo case, I think the \\\"document build\\\" process is still too complicated.\u003cbr\\/\u003e\\nWhat if it worked like this:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eIndexWriter iw = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e FacetIndexWriter(dir1, dir2);\\nDocument doc = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e Document();\\ndoc.add(...\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e TextField(body))\\ndoc.add(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e FacetField(\u003cspan class=\\\"code-quote\\\"\u003e\\\"foo\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-quote\\\"\u003e\\\"bar\\\"\u003c\\/span\u003e))\\niw.addDocument(doc);\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThen this FacetIW calls super.addDoc, with an iterable filtering out FacetFields, and also\u003cbr\\/\u003e\\ndoes whatever it needs to do with the FacetFields on the taxo index. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13821481_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13821481_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Nov\\/13 16:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-13T16:19:12+0000\'\u003e13\\/Nov\\/13 16:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I took a look at the patch (actually just the tests!) and had these random thoughts: \\n\\n Can we rename CategoryPath to FacetLabel or something more intuitive? \\nCan there be sugar like addFields(doc, FacetLabel) so a user doesnt have to make lists etc? \\nMaybe it could be varargs like FacetLabel..., so just some sugar: \\n  \\n  public  void addFields(Document doc, FacetLabel... labels) {\\n  addFields(doc, Arrays.asList(labels));\\n}\\n \\n  \\n\\n new LongRange(\\\"less than 10\\\", 0L, true, 10L, false) &lt;-- can we make it so this is less arguments? \\n\\n I like that RangeFacetCounts takes varargs though! \\n\\n For the Taxo case, I think the \\\"document build\\\" process is still too complicated. \\nWhat if it worked like this: \\n  \\n IndexWriter iw =  new  FacetIndexWriter(dir1, dir2);\\nDocument doc =  new  Document();\\ndoc.add(... new  TextField(body))\\ndoc.add( new  FacetField( \\\"foo\\\" ,  \\\"bar\\\" ))\\niw.addDocument(doc);\\n \\n  \\n\\n Then this FacetIW calls super.addDoc, with an iterable filtering out FacetFields, and also \\ndoes whatever it needs to do with the FacetFields on the taxo index.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822232\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822232&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822232\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13822232_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822232_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 07:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T07:33:04+0000\'\u003e14\\/Nov\\/13 07:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eCan we rename CategoryPath to FacetLabel or something more intuitive?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eCategoryPath is all about the path components of a category. So the name is not entirely out of place. But FacetLabel is a nice too, and definitely aligns w\\/ the rest of the APi, e.g. FacetResultNode has a \'label\' member, not \'path\'. But, CP is such a core class, that renaming it will change all of the facet module\'s classes and every app out there (while the changes in this issue are less drastic), so I just wonder if it\'s a must or nice-to-have. I don\'t object to it, just saying it\'s a rote renaming of a core class. Anyway, if we want to do this, I suggest we do it under a separate issue, just to keep things contained.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eCan there be sugar like addFields(doc, FacetLabel) so a user doesnt have to make lists etc?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think the varargs version is good to have, though in practice (except for tests), I never found the need to use one because usually the facets are added by reading them from somewhere, so you anyway need to construct a List or Array. It\'s only in tests, mock demos, or very specific applications that such a vararg method will be useful. If we have a super FacetFields class, then this method could just be final and delegate to the List variant as you noted in the code example. Otherwise, we just need to make sure we add it to every FF, so we\'re consistent.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003enew LongRange(\\\"less than 10\\\", 0L, true, 10L, false) &lt;-- can we make it so this is less arguments?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYou mean omitting the inclusive params, maybe defaulting to true, or maybe minInclusive=true and maxInclusive=false (really depends how you view the max value)? I guess we could do that. But then we should do that in all other Range types (there are only 3).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eFor the Taxo case, I think the \\\"document build\\\" process is still too complicated.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWhy the \\\"Taxo\\\" case? TaxoIndex and SortedSet have similar APIs &#8211; SimpleFacetFields (maybe we want to rename it to TaxonomyFacetFields) and SortedSetDVFacetFields. Both are needed because they add both drill-down terms and BinaryDV (Taxo) or SortedSetDV (SortedSet) fields.\u003c\\/p\u003e\\n\\n\u003cp\u003eA FacetIndexWriter is a nice idea, but we\'d need variants for Taxo, SortedSet and Mike explores an enum-method (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5326\\\" title=\\\"Add enum facet method to Lucene facet module\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5326\\\"\u003eLUCENE-5326\u003c\\/a\u003e). What I like less about it is that today the app can use two FacetFields, say one for Enum and one for SortedSet (or whatever other combination) and I don\'t see how it will do that using FacetIW.\u003c\\/p\u003e\\n\\n\u003cp\u003eHmm ... or what we could do is have a single FacetIW, but different field types, e.g. TaxonomyFacetField, SortedSetFacetField and EnumFacetField. FacetIW will capture them and act accordingly. From the app\'s perspective, the interaction w\\/ the APIs is simpler, since it just adds another field to the document. Then we don\'t even need to change FacetFields APIs (varargs or not). I think I like it! Can we do this in a separate issue? I think it\'s lower hanging fruit than the changes proposed in this issue, and are also focused (nuking FacetFields essentially in exchange for dedicated Field extensions).\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat I also like about FacetIW is that if we want to, we can wrap the app\'s Codec with a more suitable FacetCodec. E.g. maybe there\'s a better way to encode the facet information than a plain BinaryDV (maybe it\'s a special BDV). Asking an app to set a Codec is rather high entry-point. Note that I\'m not talking about apps that e.g. want to configure the facet DV to use DirectDVF. That\'s ok. I\'m talking about if we think there\'s a better way to encode the data for \u003cb\u003eall\u003c\\/b\u003e (or maybe depending on a schema) faceted-search apps - then requiring a special Codec even less approachable API.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13822232_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822232_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 07:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T07:33:04+0000\'\u003e14\\/Nov\\/13 07:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Can we rename CategoryPath to FacetLabel or something more intuitive?  \\n\\n CategoryPath is all about the path components of a category. So the name is not entirely out of place. But FacetLabel is a nice too, and definitely aligns w\\/ the rest of the APi, e.g. FacetResultNode has a \'label\' member, not \'path\'. But, CP is such a core class, that renaming it will change all of the facet module\'s classes and every app out there (while the changes in this issue are less drastic), so I just wonder if it\'s a must or nice-to-have. I don\'t object to it, just saying it\'s a rote renaming of a core class. Anyway, if we want to do this, I suggest we do it under a separate issue, just to keep things contained. \\n\\n  Can there be sugar like addFields(doc, FacetLabel) so a user doesnt have to make lists etc?  \\n\\n I think the varargs version is good to have, though in practice (except for tests), I never found the need to use one because usually the facets are added by reading them from somewhere, so you anyway need to construct a List or Array. It\'s only in tests, mock demos, or very specific applications that such a vararg method will be useful. If we have a super FacetFields class, then this method could just be final and delegate to the List variant as you noted in the code example. Otherwise, we just need to make sure we add it to every FF, so we\'re consistent. \\n\\n  new LongRange(\\\"less than 10\\\", 0L, true, 10L, false) &lt;-- can we make it so this is less arguments?  \\n\\n You mean omitting the inclusive params, maybe defaulting to true, or maybe minInclusive=true and maxInclusive=false (really depends how you view the max value)? I guess we could do that. But then we should do that in all other Range types (there are only 3). \\n\\n  For the Taxo case, I think the \\\"document build\\\" process is still too complicated.  \\n\\n Why the \\\"Taxo\\\" case? TaxoIndex and SortedSet have similar APIs &#8211; SimpleFacetFields (maybe we want to rename it to TaxonomyFacetFields) and SortedSetDVFacetFields. Both are needed because they add both drill-down terms and BinaryDV (Taxo) or SortedSetDV (SortedSet) fields. \\n\\n A FacetIndexWriter is a nice idea, but we\'d need variants for Taxo, SortedSet and Mike explores an enum-method ( LUCENE-5326 ). What I like less about it is that today the app can use two FacetFields, say one for Enum and one for SortedSet (or whatever other combination) and I don\'t see how it will do that using FacetIW. \\n\\n Hmm ... or what we could do is have a single FacetIW, but different field types, e.g. TaxonomyFacetField, SortedSetFacetField and EnumFacetField. FacetIW will capture them and act accordingly. From the app\'s perspective, the interaction w\\/ the APIs is simpler, since it just adds another field to the document. Then we don\'t even need to change FacetFields APIs (varargs or not). I think I like it! Can we do this in a separate issue? I think it\'s lower hanging fruit than the changes proposed in this issue, and are also focused (nuking FacetFields essentially in exchange for dedicated Field extensions). \\n\\n What I also like about FacetIW is that if we want to, we can wrap the app\'s Codec with a more suitable FacetCodec. E.g. maybe there\'s a better way to encode the facet information than a plain BinaryDV (maybe it\'s a special BDV). Asking an app to set a Codec is rather high entry-point. Note that I\'m not talking about apps that e.g. want to configure the facet DV to use DirectDVF. That\'s ok. I\'m talking about if we think there\'s a better way to encode the data for  all  (or maybe depending on a schema) faceted-search apps - then requiring a special Codec even less approachable API.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822273\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822273&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822273\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13822273_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822273_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 09:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T09:32:57+0000\'\u003e14\\/Nov\\/13 09:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAbout FacetIndexWriter, it will need to take an optional TaxonomyWriter (i.e. if you intend to use TaxonomyFacetField). But then I wonder if users won\'t expect that FacetIW.commit() won\'t commit both the underlying IW and TW. Actually, this could be a very good thing to do, since we could control the order those two objects are committed, and do the two-phase commit properly, rather than telling users what to do. But that means we\'d need to make IW.commit() not final. Besides the advantage of doing the commit right, I worry that if we don\'t do that, users will be confused about having to call TW.commit() themselves, just because now FacetIW already has a handle to their TW. What do you think? We could also just add a commitTaxoAndIndex() method, but that\'s less elegant.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13822273_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822273_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 09:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T09:32:57+0000\'\u003e14\\/Nov\\/13 09:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    About FacetIndexWriter, it will need to take an optional TaxonomyWriter (i.e. if you intend to use TaxonomyFacetField). But then I wonder if users won\'t expect that FacetIW.commit() won\'t commit both the underlying IW and TW. Actually, this could be a very good thing to do, since we could control the order those two objects are committed, and do the two-phase commit properly, rather than telling users what to do. But that means we\'d need to make IW.commit() not final. Besides the advantage of doing the commit right, I worry that if we don\'t do that, users will be confused about having to call TW.commit() themselves, just because now FacetIW already has a handle to their TW. What do you think? We could also just add a commitTaxoAndIndex() method, but that\'s less elegant.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822358\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822358&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822358\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822358_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822358_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 12:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T12:09:12+0000\'\u003e14\\/Nov\\/13 12:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the feedback everyone ... I\'m attaching a new patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822358_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822358_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 12:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T12:09:12+0000\'\u003e14\\/Nov\\/13 12:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the feedback everyone ... I\'m attaching a new patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822360\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822360&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822360\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822360_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822360_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 12:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T12:10:09+0000\'\u003e14\\/Nov\\/13 12:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eYou have a TODO file which seems to have been \'svn added\' - are you aware of it? \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI put a nocommit.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eMaybe we should do this work in a branch and avoid the .simple package? \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI\'ll start a branch, but on the branch I\'d like to keep working on\u003cbr\\/\u003e\\n.simple for now while we bang out the API changes.  If things start to\u003cbr\\/\u003e\\ncrystallize then we can start cutting everything else over?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eCan FT.FieldType provide a ctor taking these arguments and then DEFAULT_FIELD_TYPE pass (false,false)? Or, init those two members to false.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cblockquote\u003e\u003cp\u003eMaybe instead of setHierarchical + setMultiValued you do setDimType(DimType)? Then you could avoid the synchronization?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI put a nocommit.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI wonder if FieldTypes won\'t confuse users w\\/ Field.FieldType, so maybe you should name it DimType or something? And the upper class FacetsConfig?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eGood, I renamed both.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eNot sure, but I think that SimpleFacetFields adds the dimension\'s ordinal if the dim is both hierarchical and multi-valued? That\'s a step back from the default ALL_BUT_DIM that we have today. I think we might want to have a requiresDimValue or something, because I do think the dimension\'s value (count) is most often unneeded, and it\'s a waste to encode its ordinal?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIt does, and I think that\'s OK?  Yes, it\'s one extra ord it indexes,\u003cbr\\/\u003e\\nbut that will be a minor perf hit since it\'s a multi-valued and\u003cbr\\/\u003e\\nhierarchical.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eConstants isn\'t documented, not sure if \'precommit\' will like that, but in general I think the constants should have jdocs. Maybe put a nocommit?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI put nocommits.  Sadly, precommit won\'t fail (lucene\\/facet is\u003cbr\\/\u003e\\n\\\"missing\\\" in document-lint target in build.xml, because we never fixed\u003cbr\\/\u003e\\nall its javadocs).  We should separately fix that.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eTaxonomyFacetCounts.getAllDims() \\u2013 If a dimension is not hierarchical, I think SimpleFacetResult.count == 0? In that case, sorting by its count is useless?  I think it\'s also relevant for SortedSet?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI THINK these will work correctly (we sum the dim value as we visit\u003cbr\\/\u003e\\nall children), but I was missing the \\\"corrected\\\" dim count in the\u003cbr\\/\u003e\\nhierarchical + MV case so I added that.  Also, I put nocommits to test\u003cbr\\/\u003e\\nthis.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eLabelAndValue has a Number as the value rather than double. I see this class is used only in the final step (labeling), but what\'s wrong w\\/ the previous \'double\' primitive? Is it to avoid casting or something?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think it\'s crazy when I ask for counts that I get a double back \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\nThat\'s why I switched it to a Number.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eCategoryListIterator\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI appreciate the usefulness of this API, but rather that adding in\u003cbr\\/\u003e\\ninto \\\"simple\\\" from the get-go, I\'d like to build out the different\u003cbr\\/\u003e\\nfacet methods and understand if it\'s actually useful \\/ worth the\u003cbr\\/\u003e\\nadditional abstraction.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor example, I\'m not sure it would work very well with SSDV, since we\u003cbr\\/\u003e\\nfirst count in seg-ord space an then convert to global-ord space only\u003cbr\\/\u003e\\nwhen combining counts across segments (this gave better performance).\u003cbr\\/\u003e\\nI mean, yes, it would \\\"work\\\" in that the abstraction would be correct,\u003cbr\\/\u003e\\nbut we\'d be paying a performance penalty.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eE.g. that\'s how we were able to test fast cutting over facets to DV from Payload, that\'s a nice abstraction for letting you load the values from a cache, and so forth.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think doing such future tests with the simple APIs will still be\u003cbr\\/\u003e\\neasy; I don\'t think we should open up abstractions for the\u003cbr\\/\u003e\\nencoding\\/decoding today.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eFacetsAggregator\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI added another facet method, TaxonomyFacetSumValueSource for value\u003cbr\\/\u003e\\nsource aggregation, in the next patch, to explore this need...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eBut I don\'t see this convenience getting away (you\'ll just pass a List&lt;FacetsAggregator&gt; and then pull the requested values later on). \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eTrue but ... we need some base class \\/ interface that all these\u003cbr\\/\u003e\\n*Facets.java implement ... I haven\'t done that yet (it\'s a TODO).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eWhat I like less about it is that it folds in the logic coded by FacetsAccumulator and FacetResultsHandler\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eMaybe we can move some of these methods into the base class?  I\'m not\u003cbr\\/\u003e\\nsure though... since for the TaxonomyFacetSumValueSource it\'s float[]\u003cbr\\/\u003e\\nvalues and for the *Count it\'s int[] counts.\u003c\\/p\u003e\\n\\n\u003cp\u003eAt the end of the day, the code that does the facet counting, the\u003cbr\\/\u003e\\nrollup, pulling the topK, is in fact a small amount of code; I think\u003cbr\\/\u003e\\nreplicating bits of this code for the different methods is the lesser\u003cbr\\/\u003e\\nevil than adding so many abstractions that the module is hard to\u003cbr\\/\u003e\\napproach by new devs\\/users.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eHas variants that return a full sub-tree (TopKInEachNodeHandler)\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThat handler is such an exotic use case ... and the app can just\u003cbr\\/\u003e\\nrecurse itself, calling TaxoFacetCounts.getTopChildren?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eFacetArrays\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWe avoid the need to factor this out, by simply enumerating the facet\u003cbr\\/\u003e\\nimpls directly.  E.g. we (or a user) can make a TaxoFacetAvgScore that\u003cbr\\/\u003e\\nallocates its own int[] and float[]...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI do think this class has some value today, e.g. in CategoryListParams (which you nuked), the app doesn\'t need to know about the field under which facets are indexed at all, only if it cares to change it or index multiple category lists.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThe facet field is now optional (defaults to $facets =\u003cbr\\/\u003e\\nConstants.DEFAULT_FACET_FIELD); the TestXXX.testBasic now look quite\u003cbr\\/\u003e\\nsimple.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003elet\'s put the configuration parameters under it (e.g. DimType and drillDownDelimiter)?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI added nocommits; I think it\'s a good idea to move delim char inside\u003cbr\\/\u003e\\nhere; we\'d need to enforce that all fields sharing the same indexed\u003cbr\\/\u003e\\nfield have the same delim char, but I think that\'s fine.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat do you mean by DimType?  Taxo vs SSDV?  That\'s interesting to put\u003cbr\\/\u003e\\nin the DimConfig... it\'d mean we (almost?) could pick the right\u003cbr\\/\u003e\\naccum\\/agg\\/results impl at search time.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822360_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822360_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 12:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T12:10:09+0000\'\u003e14\\/Nov\\/13 12:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     You have a TODO file which seems to have been \'svn added\' - are you aware of it?   \\n\\n I put a nocommit. \\n\\n  Maybe we should do this work in a branch and avoid the .simple package?   \\n\\n I\'ll start a branch, but on the branch I\'d like to keep working on \\n.simple for now while we bang out the API changes.  If things start to \\ncrystallize then we can start cutting everything else over? \\n\\n  Can FT.FieldType provide a ctor taking these arguments and then DEFAULT_FIELD_TYPE pass (false,false)? Or, init those two members to false.  \\n  Maybe instead of setHierarchical + setMultiValued you do setDimType(DimType)? Then you could avoid the synchronization?  \\n\\n I put a nocommit. \\n\\n  I wonder if FieldTypes won\'t confuse users w\\/ Field.FieldType, so maybe you should name it DimType or something? And the upper class FacetsConfig?  \\n\\n Good, I renamed both. \\n\\n  Not sure, but I think that SimpleFacetFields adds the dimension\'s ordinal if the dim is both hierarchical and multi-valued? That\'s a step back from the default ALL_BUT_DIM that we have today. I think we might want to have a requiresDimValue or something, because I do think the dimension\'s value (count) is most often unneeded, and it\'s a waste to encode its ordinal?  \\n\\n It does, and I think that\'s OK?  Yes, it\'s one extra ord it indexes, \\nbut that will be a minor perf hit since it\'s a multi-valued and \\nhierarchical. \\n\\n  Constants isn\'t documented, not sure if \'precommit\' will like that, but in general I think the constants should have jdocs. Maybe put a nocommit?  \\n\\n I put nocommits.  Sadly, precommit won\'t fail (lucene\\/facet is \\n\\\"missing\\\" in document-lint target in build.xml, because we never fixed \\nall its javadocs).  We should separately fix that. \\n\\n  TaxonomyFacetCounts.getAllDims() \\u2013 If a dimension is not hierarchical, I think SimpleFacetResult.count == 0? In that case, sorting by its count is useless?  I think it\'s also relevant for SortedSet?  \\n\\n I THINK these will work correctly (we sum the dim value as we visit \\nall children), but I was missing the \\\"corrected\\\" dim count in the \\nhierarchical + MV case so I added that.  Also, I put nocommits to test \\nthis. \\n\\n  LabelAndValue has a Number as the value rather than double. I see this class is used only in the final step (labeling), but what\'s wrong w\\/ the previous \'double\' primitive? Is it to avoid casting or something?  \\n\\n I think it\'s crazy when I ask for counts that I get a double back   \\nThat\'s why I switched it to a Number. \\n\\n  CategoryListIterator  \\n\\n I appreciate the usefulness of this API, but rather that adding in \\ninto \\\"simple\\\" from the get-go, I\'d like to build out the different \\nfacet methods and understand if it\'s actually useful \\/ worth the \\nadditional abstraction. \\n\\n For example, I\'m not sure it would work very well with SSDV, since we \\nfirst count in seg-ord space an then convert to global-ord space only \\nwhen combining counts across segments (this gave better performance). \\nI mean, yes, it would \\\"work\\\" in that the abstraction would be correct, \\nbut we\'d be paying a performance penalty. \\n\\n  E.g. that\'s how we were able to test fast cutting over facets to DV from Payload, that\'s a nice abstraction for letting you load the values from a cache, and so forth.  \\n\\n I think doing such future tests with the simple APIs will still be \\neasy; I don\'t think we should open up abstractions for the \\nencoding\\/decoding today. \\n\\n  FacetsAggregator  \\n\\n I added another facet method, TaxonomyFacetSumValueSource for value \\nsource aggregation, in the next patch, to explore this need... \\n\\n  But I don\'t see this convenience getting away (you\'ll just pass a List&lt;FacetsAggregator&gt; and then pull the requested values later on).   \\n\\n True but ... we need some base class \\/ interface that all these \\n*Facets.java implement ... I haven\'t done that yet (it\'s a TODO). \\n\\n  What I like less about it is that it folds in the logic coded by FacetsAccumulator and FacetResultsHandler  \\n\\n Maybe we can move some of these methods into the base class?  I\'m not \\nsure though... since for the TaxonomyFacetSumValueSource it\'s float[] \\nvalues and for the *Count it\'s int[] counts. \\n\\n At the end of the day, the code that does the facet counting, the \\nrollup, pulling the topK, is in fact a small amount of code; I think \\nreplicating bits of this code for the different methods is the lesser \\nevil than adding so many abstractions that the module is hard to \\napproach by new devs\\/users. \\n\\n  Has variants that return a full sub-tree (TopKInEachNodeHandler)  \\n\\n That handler is such an exotic use case ... and the app can just \\nrecurse itself, calling TaxoFacetCounts.getTopChildren? \\n\\n  FacetArrays  \\n\\n We avoid the need to factor this out, by simply enumerating the facet \\nimpls directly.  E.g. we (or a user) can make a TaxoFacetAvgScore that \\nallocates its own int[] and float[]... \\n\\n  I do think this class has some value today, e.g. in CategoryListParams (which you nuked), the app doesn\'t need to know about the field under which facets are indexed at all, only if it cares to change it or index multiple category lists.  \\n\\n The facet field is now optional (defaults to $facets = \\nConstants.DEFAULT_FACET_FIELD); the TestXXX.testBasic now look quite \\nsimple. \\n\\n  let\'s put the configuration parameters under it (e.g. DimType and drillDownDelimiter)?  \\n\\n I added nocommits; I think it\'s a good idea to move delim char inside \\nhere; we\'d need to enforce that all fields sharing the same indexed \\nfield have the same delim char, but I think that\'s fine. \\n\\n What do you mean by DimType?  Taxo vs SSDV?  That\'s interesting to put \\nin the DimConfig... it\'d mean we (almost?) could pick the right \\naccum\\/agg\\/results impl at search time.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822361\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822361&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822361\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822361_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822361_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 12:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T12:10:26+0000\'\u003e14\\/Nov\\/13 12:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eFacet\'s Accumulator is similar to Lucene\'s Collector, the Aggregator is sort of a Scorer, and a FacetRequest is a sort of Query.\u003cbr\\/\u003e\\nActually the model after which the facets were designed was Lucene\'s.\u003cbr\\/\u003e\\nThe optional IndexingParams came before the IndexWriterConfig but these can be said to be similar as well.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI appreciate those analogies but I think the two cases are very\u003cbr\\/\u003e\\ndifferent: I think faceting is (ought to be) far simpler than\u003cbr\\/\u003e\\nsearching.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eMore low-level objects such as the CategoryListParams are not a must, and the user may never know about them (and btw, they are similar to Codecs).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eLikewise, I don\'t think we need to expose \\\"codec like control\\\" \\/\u003cbr\\/\u003e\\npluggability over facet ords encoding at this point.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI reviewed the patch (mostly the taxonomy related part) and I think that even without associations, counts only is a bit narrow.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI added ValueSource aggregation in the next patch, but not\u003cbr\\/\u003e\\nassociations; I think associations can come later (it\'s just another\u003cbr\\/\u003e\\nindex time and search time impl).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eSpecially with large counts (say many thousands) the count doesn\'t say much because of the \\\"long tail\\\" problem.\u003cbr\\/\u003e\\nWhen there\'s a large result set, all the categories will get high hit counts. And just as scoring by counting the number of query terms each document matches doesn\'t always make much sense (and I think all scoring functions do things a lot smarter), using counts for facets may at times yield irrelevant results.\u003c\\/p\u003e\\n\\n\u003cp\u003eWe found out that for large result sets, an aggregation of Lucene\'s score (rather than +1), or even score^2 yields better results for the user. Also arbitrary expressions which are corpus specific (with or without associations) changes the facets\' usability dramatically. That\'s partially why the code was built to allow different \\\"aggregation\\\" techniques, allowing associations, numeric values etc into each value for each category.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI agree.\u003c\\/p\u003e\\n\\n\u003cp\u003eDo you think ValueSource faceting is sufficient for such apps?  Or do\u003cbr\\/\u003e\\nthey \\\"typically\\\" use associations?  Aren\'t associations only really\u003cbr\\/\u003e\\nrequired in the multi-valued facet field case?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eAs for the new API, it may be useful if there would be a single \\\"interface\\\" - so all facets implementations could be switched easily, allowing users to experiment with the different implementations without writing a lot of code.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYeah I think so too ... it\'s on the TODO list.  Especially, if the\u003cbr\\/\u003e\\nFacetsConfig knows the facet method used by a given field, then we\u003cbr\\/\u003e\\ncould (almost) produce the right impl at search time.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822361_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822361_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 12:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T12:10:26+0000\'\u003e14\\/Nov\\/13 12:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n Facet\'s Accumulator is similar to Lucene\'s Collector, the Aggregator is sort of a Scorer, and a FacetRequest is a sort of Query. \\nActually the model after which the facets were designed was Lucene\'s. \\nThe optional IndexingParams came before the IndexWriterConfig but these can be said to be similar as well.  \\n\\n I appreciate those analogies but I think the two cases are very \\ndifferent: I think faceting is (ought to be) far simpler than \\nsearching. \\n\\n  More low-level objects such as the CategoryListParams are not a must, and the user may never know about them (and btw, they are similar to Codecs).  \\n\\n Likewise, I don\'t think we need to expose \\\"codec like control\\\" \\/ \\npluggability over facet ords encoding at this point. \\n\\n  I reviewed the patch (mostly the taxonomy related part) and I think that even without associations, counts only is a bit narrow.  \\n\\n I added ValueSource aggregation in the next patch, but not \\nassociations; I think associations can come later (it\'s just another \\nindex time and search time impl). \\n\\n \\n Specially with large counts (say many thousands) the count doesn\'t say much because of the \\\"long tail\\\" problem. \\nWhen there\'s a large result set, all the categories will get high hit counts. And just as scoring by counting the number of query terms each document matches doesn\'t always make much sense (and I think all scoring functions do things a lot smarter), using counts for facets may at times yield irrelevant results. \\n\\n We found out that for large result sets, an aggregation of Lucene\'s score (rather than +1), or even score^2 yields better results for the user. Also arbitrary expressions which are corpus specific (with or without associations) changes the facets\' usability dramatically. That\'s partially why the code was built to allow different \\\"aggregation\\\" techniques, allowing associations, numeric values etc into each value for each category.  \\n\\n I agree. \\n\\n Do you think ValueSource faceting is sufficient for such apps?  Or do \\nthey \\\"typically\\\" use associations?  Aren\'t associations only really \\nrequired in the multi-valued facet field case? \\n\\n  As for the new API, it may be useful if there would be a single \\\"interface\\\" - so all facets implementations could be switched easily, allowing users to experiment with the different implementations without writing a lot of code.  \\n\\n Yeah I think so too ... it\'s on the TODO list.  Especially, if the \\nFacetsConfig knows the facet method used by a given field, then we \\ncould (almost) produce the right impl at search time.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822362\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822362&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822362\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822362_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822362_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 12:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T12:10:39+0000\'\u003e14\\/Nov\\/13 12:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eCan we rename CategoryPath to FacetLabel or something more intuitive?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1 for FacetLabel; I put a nocommit.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut, the new patch actually nearly eliminates the need to create\u003cbr\\/\u003e\\nCategoryPath (it\'s still needed to create a DrillDownQuery but I\u003cbr\\/\u003e\\ndropped a nocommit to see if we can fix that).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003enew LongRange(\\\"less than 10\\\", 0L, true, 10L, false) &lt;-- can we make it so this is less arguments?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eNot sure exactly how \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eWhat if it worked like this:\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThis is an awesome idea!  I did that in the new patch; now indexing is\u003cbr\\/\u003e\\nreally simple, e.g.:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e    doc = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e Document();\\n    doc.add(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e FacetField(\u003cspan class=\\\"code-quote\\\"\u003e\\\"Author\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-quote\\\"\u003e\\\"Frank\\\"\u003c\\/span\u003e));\\n    doc.add(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e FacetField(\u003cspan class=\\\"code-quote\\\"\u003e\\\"Publish Date\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-quote\\\"\u003e\\\"1999\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-quote\\\"\u003e\\\"5\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-quote\\\"\u003e\\\"5\\\"\u003c\\/span\u003e));\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eand:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e    doc = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e Document();\\n    doc.add(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e SortedSetDocValuesFacetField(\u003cspan class=\\\"code-quote\\\"\u003e\\\"a\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-quote\\\"\u003e\\\"bar\\\"\u003c\\/span\u003e));\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822362_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822362_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 12:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T12:10:39+0000\'\u003e14\\/Nov\\/13 12:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Can we rename CategoryPath to FacetLabel or something more intuitive?  \\n\\n +1 for FacetLabel; I put a nocommit. \\n\\n But, the new patch actually nearly eliminates the need to create \\nCategoryPath (it\'s still needed to create a DrillDownQuery but I \\ndropped a nocommit to see if we can fix that). \\n\\n  new LongRange(\\\"less than 10\\\", 0L, true, 10L, false) &lt;-- can we make it so this is less arguments?  \\n\\n Not sure exactly how   \\n\\n  What if it worked like this:  \\n\\n This is an awesome idea!  I did that in the new patch; now indexing is \\nreally simple, e.g.: \\n\\n  \\n     doc =  new  Document();\\n    doc.add( new  FacetField( \\\"Author\\\" ,  \\\"Frank\\\" ));\\n    doc.add( new  FacetField( \\\"Publish Date\\\" ,  \\\"1999\\\" ,  \\\"5\\\" ,  \\\"5\\\" ));\\n \\n  \\n\\n and: \\n\\n  \\n     doc =  new  Document();\\n    doc.add( new  SortedSetDocValuesFacetField( \\\"a\\\" ,  \\\"bar\\\" ));\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822450\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822450&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822450\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13822450_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822450_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 13:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T13:46:13+0000\'\u003e14\\/Nov\\/13 13:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAbout the patch:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eI think FacetField should an optional ctor taking the indexedFacetField, defaulting to $facets, then the ctor calls super() with the right field, and not \\\"dummy\\\"? And you can remove set\\/get?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eSimpleFacetsCollector jdocs are wrong &#8211; there\'s no create?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eDo we still need SSDVFacetFields?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eI like FacetIW, but the nocommit, to handle updateDoc, addDocs etc. makes me think if down the road we won\'t be sorry about doing this change (i.e. if anything changes on IW APIs). The good thing about FacetFields is that it just adds fields to a Document, and doesn\'t worry about IW API at all...\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eDimType == DimConfig \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e. Sorry if I wasn\'t clear somewhere in my long response.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eThat handler is such an exotic use case ... and the app can just\u003cbr\\/\u003e\\nrecurse itself, calling TaxoFacetCounts.getTopChildren?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eCould be, maybe it will work. It definitely allows asking for different topK for each child (something we currently don\'t support).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eIt does, and I think that\'s OK? Yes, it\'s one extra ord it indexes,\u003cbr\\/\u003e\\nbut that will be a minor perf hit since it\'s a multi-valued and\u003cbr\\/\u003e\\nhierarchical.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI don\'t know. Like if your facet has 2 levels, that\'s 33% more ords. I think the count of the root ord is most likely never needed? And if it\'s needed, app can compute it by traversing its children and their values in the facet arrays? Maybe as a default we just never index it, and don\'t add a vague requiresDimCount\\/Value\\/Weight boolean?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eI think replicating bits of this code for the different methods is the lesser\u003cbr\\/\u003e\\nevil than adding so many abstractions that the module is hard to\u003cbr\\/\u003e\\napproach by new devs\\/users.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eDid we ever get such feedback from users? That the module is unapproachable?\u003cbr\\/\u003e\\nI get the opposite feedback - that we don\'t have many abstractions! \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eAt the end of the day, the code that does the facet counting, the\u003cbr\\/\u003e\\nrollup, pulling the topK, is in fact a small amount of code;\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYou have a nocommit \\\"maybe we should do this lazily\\\" in regards for when to rollupValues. That shows me that now every developer who extends this API (let\'s be clear - users are oblivious to this happening) will facet the same decision (nocommit). If we discover one day that it\'s better to rollup lazily or not, other developers don\'t benefit from that decision. That\'s why I think some abstractions are good.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eI added ValueSource aggregation in the next patch, but not\u003cbr\\/\u003e\\nassociations; I think associations can come later (it\'s just another\u003cbr\\/\u003e\\nindex time and search time impl).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI\'m not sure we should do that (cut over associations later). The whole point about these features (associations, complements, sampling..) is that they are existing features. If we think they are useless \\/ unneeded - that\'s one thing. But if we believe they are important, it\'s useless to make all the API changes without taking them into account, only to figure out later that we need abstraction X and Y in order to implement them.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd we make heavy use of associations, and some users asked (and use) sampling and I remember a question about complements. So obviously we cannot conclude that these are useless features. Therefore I think it\'s important that we try to tackle them now, so don\'t we don\'t do a full round trip to find ourselves with the same API again.\u003c\\/p\u003e\\n\\n\u003cp\u003eCan we do FacetIndexWriter in a separate issue (if we want to do it at all)? It\'s unrelated to the search API changes you want to do here, and it might be easier to contain within a single issue?\u003c\\/p\u003e\\n\\n\u003cp\u003eAbout CategoryListIterator ... what if we do manage to come up tomorrow with a better encoding strategy for facets. Do you really think that changing all existing WhateverFacets makes sense!? And if developers write their own WhateverFacets, it means they need to change their code too? Really, you\'re mixing optimizations (inlining dgap+vint) with ease of use. I know (!!) that there are apps that can benefit from a different encoding scheme (e.g. FourOnesIntEncoder). We don\'t need to wait until someone comes up w\\/ a better default encoding scheme to introduce abstractions. I mean .. that\'s just sounds crazy to me.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13822450_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822450_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 13:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T13:46:13+0000\'\u003e14\\/Nov\\/13 13:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    About the patch: \\n\\n \\n\\t I think FacetField should an optional ctor taking the indexedFacetField, defaulting to $facets, then the ctor calls super() with the right field, and not \\\"dummy\\\"? And you can remove set\\/get? \\n \\n\\n\\n \\n\\t SimpleFacetsCollector jdocs are wrong &#8211; there\'s no create? \\n \\n\\n\\n \\n\\t Do we still need SSDVFacetFields? \\n \\n\\n\\n \\n\\t I like FacetIW, but the nocommit, to handle updateDoc, addDocs etc. makes me think if down the road we won\'t be sorry about doing this change (i.e. if anything changes on IW APIs). The good thing about FacetFields is that it just adds fields to a Document, and doesn\'t worry about IW API at all... \\n \\n\\n\\n \\n\\t DimType == DimConfig  . Sorry if I wasn\'t clear somewhere in my long response. \\n \\n\\n\\n \\n That handler is such an exotic use case ... and the app can just \\nrecurse itself, calling TaxoFacetCounts.getTopChildren?  \\n\\n Could be, maybe it will work. It definitely allows asking for different topK for each child (something we currently don\'t support). \\n\\n \\n It does, and I think that\'s OK? Yes, it\'s one extra ord it indexes, \\nbut that will be a minor perf hit since it\'s a multi-valued and \\nhierarchical.  \\n\\n I don\'t know. Like if your facet has 2 levels, that\'s 33% more ords. I think the count of the root ord is most likely never needed? And if it\'s needed, app can compute it by traversing its children and their values in the facet arrays? Maybe as a default we just never index it, and don\'t add a vague requiresDimCount\\/Value\\/Weight boolean? \\n\\n \\n I think replicating bits of this code for the different methods is the lesser \\nevil than adding so many abstractions that the module is hard to \\napproach by new devs\\/users.  \\n\\n Did we ever get such feedback from users? That the module is unapproachable? \\nI get the opposite feedback - that we don\'t have many abstractions!   \\n\\n \\n At the end of the day, the code that does the facet counting, the \\nrollup, pulling the topK, is in fact a small amount of code;  \\n\\n You have a nocommit \\\"maybe we should do this lazily\\\" in regards for when to rollupValues. That shows me that now every developer who extends this API (let\'s be clear - users are oblivious to this happening) will facet the same decision (nocommit). If we discover one day that it\'s better to rollup lazily or not, other developers don\'t benefit from that decision. That\'s why I think some abstractions are good. \\n\\n \\n I added ValueSource aggregation in the next patch, but not \\nassociations; I think associations can come later (it\'s just another \\nindex time and search time impl).  \\n\\n I\'m not sure we should do that (cut over associations later). The whole point about these features (associations, complements, sampling..) is that they are existing features. If we think they are useless \\/ unneeded - that\'s one thing. But if we believe they are important, it\'s useless to make all the API changes without taking them into account, only to figure out later that we need abstraction X and Y in order to implement them. \\n\\n And we make heavy use of associations, and some users asked (and use) sampling and I remember a question about complements. So obviously we cannot conclude that these are useless features. Therefore I think it\'s important that we try to tackle them now, so don\'t we don\'t do a full round trip to find ourselves with the same API again. \\n\\n Can we do FacetIndexWriter in a separate issue (if we want to do it at all)? It\'s unrelated to the search API changes you want to do here, and it might be easier to contain within a single issue? \\n\\n About CategoryListIterator ... what if we do manage to come up tomorrow with a better encoding strategy for facets. Do you really think that changing all existing WhateverFacets makes sense!? And if developers write their own WhateverFacets, it means they need to change their code too? Really, you\'re mixing optimizations (inlining dgap+vint) with ease of use. I know (!!) that there are apps that can benefit from a different encoding scheme (e.g. FourOnesIntEncoder). We don\'t need to wait until someone comes up w\\/ a better default encoding scheme to introduce abstractions. I mean .. that\'s just sounds crazy to me.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822721\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822721&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822721\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822721_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822721_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 18:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T18:24:34+0000\'\u003e14\\/Nov\\/13 18:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the feedback Shai.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI think FacetField should an optional ctor taking the indexedFacetField, defaulting to $facets, then the ctor calls super() with the right field, and not \\\"dummy\\\"? And you can remove set\\/get?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI moved the indexed field name to the DimConfig.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eSimpleFacetsCollector jdocs are wrong \\u2013 there\'s no create?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI removed it and put nocommit.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eDo we still need SSDVFacetFields?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWoops, no; I removed it.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI like FacetIW, but the nocommit, to handle updateDoc, addDocs etc. makes me think if down the road we won\'t be sorry about doing this change (i.e. if anything changes on IW APIs). The good thing about FacetFields is that it just adds fields to a Document, and doesn\'t worry about IW API at all...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think that\'s an acceptable risk in exchange for the simpler\u003cbr\\/\u003e\\nindex-time API.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eDimType == DimConfig . Sorry if I wasn\'t clear somewhere in my long response.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAhh, OK.  I\'m still wondering if we should put the \\\"facetMethod\\\" onto\u003cbr\\/\u003e\\nthe DimConfig...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eLike if your facet has 2 levels, that\'s 33% more ords. I think the count of the root ord is most likely never needed? And if it\'s needed, app can compute it by traversing its children and their values in the facet arrays? Maybe as a default we just never index it, and don\'t add a vague requiresDimCount\\/Value\\/Weight boolean?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWait, the app cannot compute this (accurately) by summing the child counts?  It will overcount in general, right?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cblockquote\u003e\u003cp\u003eI think replicating bits of this code for the different methods is the lesser evil than adding so many abstractions that the module is hard to approach by new devs\\/users.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eDid we ever get such feedback from users? That the module is unapproachable?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIt\'s mostly from my own assessment, looking at the code, and my own\u003cbr\\/\u003e\\nfrustrations over time in trying to improve the facets module;\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5333\\\" title=\\\"Support sparse faceting for heterogeneous indices\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5333\\\"\u003eLUCENE-5333\u003c\\/a\u003e was finally the straw (for me)... I find complex APIs\u003cbr\\/\u003e\\nfrustrating and I think it\'s a serious barrier to new contributors\u003cbr\\/\u003e\\ngetting involved and users consuming them.\u003c\\/p\u003e\\n\\n\u003cp\u003eThere was a user on the ML (I don\'t have the link) who just wanted to\u003cbr\\/\u003e\\nget the facet count for a specific label after faceting was done, and\u003cbr\\/\u003e\\nthe hoops s\\/he had to jump through (custom FacetResultHandler I\u003cbr\\/\u003e\\nthink??) to achieve that was just crazy.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI get the opposite feedback - that we don\'t have many abstractions! \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eSeriously?  What abstractions are we missing?\u003c\\/p\u003e\\n\\n\u003cp\u003eIf this is too much change for the facets module, we could, instead,\u003cbr\\/\u003e\\nleave the facets module as is, and break this effort out as a\u003cbr\\/\u003e\\ndifferent module (facets2, simplefacets, something?).  We also have\u003cbr\\/\u003e\\nmany queryparsers, many highlighters, etc., and I think that\'s\u003cbr\\/\u003e\\nhealthy: all options can be explored.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eYou have a nocommit \\\"maybe we should do this lazily\\\" in regards for when to rollupValues. That shows me that now every developer who extends this API (let\'s be clear - users are oblivious to this happening) will facet the same decision (nocommit). If we discover one day that it\'s better to rollup lazily or not, other developers don\'t benefit from that decision. That\'s why I think some abstractions are good.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIt\'s a crazy expert thing to create another faceting impl, so I think\u003cbr\\/\u003e\\nsuch developers can handle changing their rollup to be lazy if it\'s\u003cbr\\/\u003e\\nbeneficial\\/necessary for their use case.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI\'m not sure we should do that (cut over associations later). The whole point about these features (associations, complements, sampling..) is that they are existing features. If we think they are useless \\/ unneeded - that\'s one thing. But if we believe they are important, it\'s useless to make all the API changes without taking them into account, only to figure out later that we need abstraction X and Y in order to implement them.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWell this could be a good argument for just making a new module?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe new module would have a simpler API and less thorough\u003cbr\\/\u003e\\nfunctionality?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eCan we do FacetIndexWriter in a separate issue (if we want to do it at all)? It\'s unrelated to the search API changes you want to do here, and it might be easier to contain within a single issue?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI\'m not sure it\'s so easily separated out; the DimConfig is common to\u003cbr\\/\u003e\\nindex time and search time, and we\'re still iterating on that (I just\u003cbr\\/\u003e\\nmoved the indexedFieldName into it).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eAbout CategoryListIterator ... what if we do manage to come up tomorrow with a better encoding strategy for facets. Do you really think that changing all existing WhateverFacets makes sense!? And if developers write their own WhateverFacets, it means they need to change their code too? Really, you\'re mixing optimizations (inlining dgap+vint) with ease of use. I know (!!) that there are apps that can benefit from a different encoding scheme (e.g. FourOnesIntEncoder). We don\'t need to wait until someone comes up w\\/ a better default encoding scheme to introduce abstractions. I mean .. that\'s just sounds crazy to me.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWe\'d have to change 3 places if we did that right now: FacetIndexWriter\u003cbr\\/\u003e\\n(where we encode) and TaxonomyFacetCounts\\/SumValueSource (where we\u003cbr\\/\u003e\\ndecode).\u003c\\/p\u003e\\n\\n\u003cp\u003eMaybe... we can have a decode method in TFC, and TFSVC subclasses TFC,\u003cbr\\/\u003e\\nor ... something ... but I\'d like to be very careful in just adding\u003cbr\\/\u003e\\nback abstractions here: this really is a small amount of code at the\u003cbr\\/\u003e\\nend of the day.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822721_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822721_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 18:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T18:24:34+0000\'\u003e14\\/Nov\\/13 18:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the feedback Shai. \\n\\n  I think FacetField should an optional ctor taking the indexedFacetField, defaulting to $facets, then the ctor calls super() with the right field, and not \\\"dummy\\\"? And you can remove set\\/get?  \\n\\n I moved the indexed field name to the DimConfig. \\n\\n  SimpleFacetsCollector jdocs are wrong \\u2013 there\'s no create?  \\n\\n I removed it and put nocommit. \\n\\n  Do we still need SSDVFacetFields?  \\n\\n Woops, no; I removed it. \\n\\n  I like FacetIW, but the nocommit, to handle updateDoc, addDocs etc. makes me think if down the road we won\'t be sorry about doing this change (i.e. if anything changes on IW APIs). The good thing about FacetFields is that it just adds fields to a Document, and doesn\'t worry about IW API at all...  \\n\\n I think that\'s an acceptable risk in exchange for the simpler \\nindex-time API. \\n\\n  DimType == DimConfig . Sorry if I wasn\'t clear somewhere in my long response.  \\n\\n Ahh, OK.  I\'m still wondering if we should put the \\\"facetMethod\\\" onto \\nthe DimConfig... \\n\\n  Like if your facet has 2 levels, that\'s 33% more ords. I think the count of the root ord is most likely never needed? And if it\'s needed, app can compute it by traversing its children and their values in the facet arrays? Maybe as a default we just never index it, and don\'t add a vague requiresDimCount\\/Value\\/Weight boolean?  \\n\\n Wait, the app cannot compute this (accurately) by summing the child counts?  It will overcount in general, right? \\n\\n \\n  I think replicating bits of this code for the different methods is the lesser evil than adding so many abstractions that the module is hard to approach by new devs\\/users.  \\n\\n Did we ever get such feedback from users? That the module is unapproachable?  \\n\\n It\'s mostly from my own assessment, looking at the code, and my own \\nfrustrations over time in trying to improve the facets module; \\n LUCENE-5333  was finally the straw (for me)... I find complex APIs \\nfrustrating and I think it\'s a serious barrier to new contributors \\ngetting involved and users consuming them. \\n\\n There was a user on the ML (I don\'t have the link) who just wanted to \\nget the facet count for a specific label after faceting was done, and \\nthe hoops s\\/he had to jump through (custom FacetResultHandler I \\nthink??) to achieve that was just crazy. \\n\\n  I get the opposite feedback - that we don\'t have many abstractions!   \\n\\n Seriously?  What abstractions are we missing? \\n\\n If this is too much change for the facets module, we could, instead, \\nleave the facets module as is, and break this effort out as a \\ndifferent module (facets2, simplefacets, something?).  We also have \\nmany queryparsers, many highlighters, etc., and I think that\'s \\nhealthy: all options can be explored. \\n\\n  You have a nocommit \\\"maybe we should do this lazily\\\" in regards for when to rollupValues. That shows me that now every developer who extends this API (let\'s be clear - users are oblivious to this happening) will facet the same decision (nocommit). If we discover one day that it\'s better to rollup lazily or not, other developers don\'t benefit from that decision. That\'s why I think some abstractions are good.  \\n\\n It\'s a crazy expert thing to create another faceting impl, so I think \\nsuch developers can handle changing their rollup to be lazy if it\'s \\nbeneficial\\/necessary for their use case. \\n\\n  I\'m not sure we should do that (cut over associations later). The whole point about these features (associations, complements, sampling..) is that they are existing features. If we think they are useless \\/ unneeded - that\'s one thing. But if we believe they are important, it\'s useless to make all the API changes without taking them into account, only to figure out later that we need abstraction X and Y in order to implement them.  \\n\\n Well this could be a good argument for just making a new module? \\n\\n The new module would have a simpler API and less thorough \\nfunctionality? \\n\\n  Can we do FacetIndexWriter in a separate issue (if we want to do it at all)? It\'s unrelated to the search API changes you want to do here, and it might be easier to contain within a single issue?  \\n\\n I\'m not sure it\'s so easily separated out; the DimConfig is common to \\nindex time and search time, and we\'re still iterating on that (I just \\nmoved the indexedFieldName into it). \\n\\n  About CategoryListIterator ... what if we do manage to come up tomorrow with a better encoding strategy for facets. Do you really think that changing all existing WhateverFacets makes sense!? And if developers write their own WhateverFacets, it means they need to change their code too? Really, you\'re mixing optimizations (inlining dgap+vint) with ease of use. I know (!!) that there are apps that can benefit from a different encoding scheme (e.g. FourOnesIntEncoder). We don\'t need to wait until someone comes up w\\/ a better default encoding scheme to introduce abstractions. I mean .. that\'s just sounds crazy to me.  \\n\\n We\'d have to change 3 places if we did that right now: FacetIndexWriter \\n(where we encode) and TaxonomyFacetCounts\\/SumValueSource (where we \\ndecode). \\n\\n Maybe... we can have a decode method in TFC, and TFSVC subclasses TFC, \\nor ... something ... but I\'d like to be very careful in just adding \\nback abstractions here: this really is a small amount of code at the \\nend of the day.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822776\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822776&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822776\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13822776_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822776_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 19:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T19:06:03+0000\'\u003e14\\/Nov\\/13 19:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1542023 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1542023\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1542023\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: make branch\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13822776_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822776_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 19:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T19:06:03+0000\'\u003e14\\/Nov\\/13 19:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1542023 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1542023  ] \\n\\n   LUCENE-5339  : make branch              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822778\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822778&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822778\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13822778_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822778_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 19:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T19:08:29+0000\'\u003e14\\/Nov\\/13 19:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1542025 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1542025\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1542025\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: current patch\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13822778_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822778_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 19:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T19:08:29+0000\'\u003e14\\/Nov\\/13 19:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1542025 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1542025  ] \\n\\n   LUCENE-5339  : current patch              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822780\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822780&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822780\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822780_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822780_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 19:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T19:09:37+0000\'\u003e14\\/Nov\\/13 19:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK I created a branch at \u003ca href=\\\"https:\\/\\/svn.apache.org\\/repos\\/asf\\/lucene\\/dev\\/branches\\/lucene5339\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/repos\\/asf\\/lucene\\/dev\\/branches\\/lucene5339\u003c\\/a\u003e and committed my current patch (same as last patch I think, except I moved the indexedFieldName from FacetField to DimConfig).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13822780_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822780_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 19:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T19:09:37+0000\'\u003e14\\/Nov\\/13 19:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK I created a branch at  https:\\/\\/svn.apache.org\\/repos\\/asf\\/lucene\\/dev\\/branches\\/lucene5339  and committed my current patch (same as last patch I think, except I moved the indexedFieldName from FacetField to DimConfig).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822840\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822840&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822840\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13822840_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822840_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 20:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T20:10:49+0000\'\u003e14\\/Nov\\/13 20:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003e Really, you\'re mixing optimizations (inlining dgap+vint) with ease of use. I know (!!) that there are apps that can benefit from a different encoding scheme (e.g. FourOnesIntEncoder). We don\'t need to wait until someone comes up w\\/ a better default encoding scheme to introduce abstractions. I mean .. that\'s just sounds crazy to me.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHow common is this, I\'m curious?\u003c\\/p\u003e\\n\\n\u003cp\u003eJust to lend my opinion\\/support to this issue: imo the pure number of classes to the faceting module can be overwhelming. \u003c\\/p\u003e\\n\\n\u003cp\u003eLets take the encode\\/decode case: it seems to me you guys iterated a lot and figured out vint was \\\"the best default encoding\\\". I\'m not going to argue that some use case could benefit from a custom encoding scheme: instead I\'m going to argue if it justifies a whole java package with 20 public classes?\u003c\\/p\u003e\\n\\n\u003cp\u003eSo I think its fine to bake in the encoding, but with the two key methods in those 20 classes \'protected\' in the appropriate places so that an expert user could subclass them:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003edecode(BytesRef buf, IntsRef values);\\nencode(IntsRef values, BytesRef buf);\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI\'d make the argument: if someone is expert enough to do this, they dont need pre-provided concrete encoder\\/decoder classes anyway, they can write their own method?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13822840_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822840_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 20:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T20:10:49+0000\'\u003e14\\/Nov\\/13 20:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n  Really, you\'re mixing optimizations (inlining dgap+vint) with ease of use. I know (!!) that there are apps that can benefit from a different encoding scheme (e.g. FourOnesIntEncoder). We don\'t need to wait until someone comes up w\\/ a better default encoding scheme to introduce abstractions. I mean .. that\'s just sounds crazy to me.  \\n\\n How common is this, I\'m curious? \\n\\n Just to lend my opinion\\/support to this issue: imo the pure number of classes to the faceting module can be overwhelming.  \\n\\n Lets take the encode\\/decode case: it seems to me you guys iterated a lot and figured out vint was \\\"the best default encoding\\\". I\'m not going to argue that some use case could benefit from a custom encoding scheme: instead I\'m going to argue if it justifies a whole java package with 20 public classes? \\n\\n So I think its fine to bake in the encoding, but with the two key methods in those 20 classes \'protected\' in the appropriate places so that an expert user could subclass them: \\n\\n  \\n decode(BytesRef buf, IntsRef values);\\nencode(IntsRef values, BytesRef buf);\\n \\n  \\n\\n I\'d make the argument: if someone is expert enough to do this, they dont need pre-provided concrete encoder\\/decoder classes anyway, they can write their own method?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13822855\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13822855&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13822855\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13822855_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822855_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 20:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T20:28:51+0000\'\u003e14\\/Nov\\/13 20:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1542062 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1542062\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1542062\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: add abstract Facets base class; fix separate test failure\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13822855_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13822855_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/13 20:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-14T20:28:51+0000\'\u003e14\\/Nov\\/13 20:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1542062 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1542062  ] \\n\\n   LUCENE-5339  : add abstract Facets base class; fix separate test failure              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13823304\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13823304&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13823304\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13823304_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13823304_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/13 05:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-15T05:42:54+0000\'\u003e15\\/Nov\\/13 05:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI think that\'s an acceptable risk in exchange for the simpler index-time API.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWhat if someone already extends IW? Or, we\'ll like that approach so much that we\'ll want to apply it elsewhere too (I mean in other modules)? I\'m just saying that extending IW is a pretty big thing, compared to FacetFields.\u003c\\/p\u003e\\n\\n\u003cp\u003eI was thinking maybe we can wrap an IW, and present an interface with only add\\/updateDoc so on one hand you get to add \u003ctt\u003enew FacetField()\u003c\\/tt\u003e easily, but on the other you get to use whatever IW that you want. It\'s like RandomIW, only we may not want to copy the entire set of APIs, only the document-related ones? And in the future we can think about TaxoFacetIW which also owns the commit()?\u003c\\/p\u003e\\n\\n\u003cp\u003eAnother crazy idea is to implement a FacetDocument which extends Document (we\'d need to allow that first!) and does the same trick on addField() \\/ indexableFields(). I think if we can pull this off (extending Document is preferred IMO), it\'s far less intrusive than a new FacetIW.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eWait, the app cannot compute this (accurately) by summing the child counts? It will overcount in general, right?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOoops, you\'re right. So in that case, we can open up the extension point (I think it\'s FacetIW.dedupAndEncode) to let the app add the DIM ordinal too? Then I think the rest of the search code will just work?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eThere was a user on the ML (I don\'t have the link) who just wanted to\u003cbr\\/\u003e\\nget the facet count for a specific label after faceting was done, and\u003cbr\\/\u003e\\nthe hoops s\\/he had to jump through (custom FacetResultHandler I\u003cbr\\/\u003e\\nthink??) to achieve that was just crazy.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eMaybe it\'s crazy I don\'t know. All I\'m saying is that now you took that user\'s request and made it a top-level API. I don\'t know if that qualifies as simplifying the APIs, or whether similar requests in the future will be easy to implement by extension, or we\'d need to add them to our core code. For instance, this API makes Range and Count not share the same API (not saying it\'s a bad thing, just an example). But I already +1 the idea of having that on the API.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eSeriously? What abstractions are we missing?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWell, FacetArrays committing to an int[], while we have someone which wants to use a Map, because he has millions of facets, yet queries typically hit very few of them. And he uses both the int[] and float[] arrays, which for the most part of them are allocated for no good reason. In order to use a Map he needs to write a FacetResultsHandler which computes top-K from the map, as well extend FacetsAccumulator to override createFRH. Just an example. If we have a FacetValues abstraction w\\/ get\\/set\\/iterator methods, all he\'d need to do is override the FacetValues that should be used.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut I already told him that this is something he can just do w\\/ FacetResultsHandler. And just to point out that this patch won\'t make things worse - since he already overrides the aggregation method, he can just implement a MapBasedTaxoFacetsSomething. So I only gave it as an example (FacetValues abstraction, I think, will hurt the performance in general, but we could benchmark).\u003c\\/p\u003e\\n\\n\u003cp\u003eAnother abstraction is \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5316\\\" title=\\\"Taxonomy tree traversing improvement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5316\\\"\u003eLUCENE-5316\u003c\\/a\u003e, which we struggle to get it to perform (really frustrating!).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eIf this is too much change for the facets module, we could, instead,\u003cbr\\/\u003e\\nleave the facets module as is, and break this effort out as a\u003cbr\\/\u003e\\ndifferent module (facets2, simplefacets, something?). We also have\u003cbr\\/\u003e\\nmany queryparsers, many highlighters, etc., and I think that\'s\u003cbr\\/\u003e\\nhealthy: all options can be explored.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e-1 to that. I think it delivers the wrong message. Why have two faceting modules? A branch is the perfect choice here, since it allows us to move the entire module to the new API. And on the way we benefit by assessing that the new API can really allow implementing associations, complements, sampling.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo give an example - the API first was overwhelming and in the last round of changes I removed and moved things (I thought I simplify it!). So for instance once upon a time FacetRequest let you specify the FacetsAggregator and FacetResultsHandler. I moved them both to FacetsAccumulator, but recently moved FacetsAggregator back to FacetRequest (it allows more easily to define which aggregator a certain FR needs to use). And on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5333\\\" title=\\\"Support sparse faceting for heterogeneous indices\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5333\\\"\u003eLUCENE-5333\u003c\\/a\u003e I suggested to move FacetResultsHandler back to FR, to implement an AllDimFR.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo wearing the \\\"experienced\\\" hat, I just want to make sure we won\'t move everything out only to gradually swap it back in. I\'m not against changing the APIs, but because this module is rich with features (which I, and apparently our users too, think are important), I\'d like to make sure the new API works for all of them. I may compromise on complements and sampling because: (1) complements is not per-segment and I think it might require a full rewrite anywhere (there\'s an issue for it) and (2) sampling because it\'s under the *.old package, meaning it was never fully migrated to the new APIs and I think it could use some serious simplification there too.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf you\'re worried that you\'ll do this work alone, I promise to help. On the branch.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eIt\'s a crazy expert thing to create another faceting impl, so I think\u003cbr\\/\u003e\\nsuch developers can handle changing their rollup to be lazy if it\'s\u003cbr\\/\u003e\\nbeneficial\\/necessary for their use case.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eLet\'s use MapReduce as an analogy. The framework says \\\"you worry about the Map and Reduce phase, I\'ll take care of the distribution stuff\\\". Nice and clean. In the beginning the facets API said \\\"you worry about aggregating a \u003cb\u003esingle\u003c\\/b\u003e ordinal, I\'ll worry about the rest\\\". Then we changed it to \\\"you worry about aggregating all ordinals in a segment, I\'ll worry about the rest\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eNow, some users we have, well think of them as data scientists. All they\'re interested about is ranking facets to drive some insights out of the data. I feel that we\'re putting too much burden on them more and more. Cutting the API from the single-ord level to the segment-level was to gain sizable improvements to faceted search. But letting them do the rollup ... anyway, let\'s proceed with that, we can see as we go.\u003c\\/p\u003e\\n\\n\u003cp\u003eI personally like code reuse, and it kills me to see code that\'s duplicated. Often this calls out for bad design of APIs, not necessarily simplification.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eI\'m not sure it\'s so easily separated out; the DimConfig is common to\u003cbr\\/\u003e\\nindex time and search time, and we\'re still iterating on that (I just\u003cbr\\/\u003e\\nmoved the indexedFieldName into it).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI was thinking to develop it still with FacetIndexingParams in mind - just cutover from FacetFields to FacetIW\\/FacetDocument. This makes the change gradual and allows us to investigate it separately. It\'s also, I think, a much lower hanging fruit. But, it looks like the changes in this patch will require rewriting large parts of it, so maybe we should do it here.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eWe\'d have to change 3 places if we did that right now: FacetIndexWriter\u003cbr\\/\u003e\\n(where we encode) and TaxonomyFacetCounts\\/SumValueSource (where we\u003cbr\\/\u003e\\ndecode).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWrong? I mean you still didn\'t write a version which pulls the ords from OrdinalsCache (and I assume you don\'t want to get rid of it!). With those two TFCs, it already means we\'ll have 4 classes? While I think the SumValueSource could be oblivious to how the ords are encoded\\/fetched out-of-the-box, since it\'s less common to use (we only optimize counting) and someone can rewrite it to pull the ords from OrdinalsCache directly (instead of going through the CLI abstraction).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eSo I think its fine to bake in the encoding, but with the two key methods in those 20 classes \'protected\' in the appropriate places so that an expert user could subclass them:\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think you point out two problems - one is the fact that we have the *.encoding package at all and the other one is how to override encoding\\/decoding. The nice thing about IntEncoder\\/Decoder (let\'s think of it as PackedInts ok?) is that you can use an implementation without affecting other classes, while with encode\\/decode protected methods you need to extend every class that you have which reads the data. I don\'t think that qualifies as good software design. Why do we have PackedInts then?\u003c\\/p\u003e\\n\\n\u003cp\u003eNow the question is whether we should keep the different IntEncoders or not - I don\'t know. Why do we have so many PackedInts versions? Do we use all of them or are they there so that someone can make a pick? If they don\'t hurt anyone, and requires almost no maintenance, why remove them?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe argument is whether we should open up encoding\\/decoding at all. What Mike is saying \\\"if you want to encode differently, you\'re an expert and you can rewrite all of your and Lucene\'s aggregators (count, sum VS) too\\\". What you\'re saying, add encode\\/decode protected methods, is more how the API looks today, only instead of a method we have an IntEncoder\\/Decoder (a\'la PackedInts) class. That\'s just easier to use in conjunction with other classes (especially if we do the CLI abstraction).\u003c\\/p\u003e\\n\\n\u003cp\u003eJust to clarify, I don\'t mean we have to have the CLI abstraction and use it everywhere. I think it\'s a good API for someone to use if he doesn\'t care about how ordinals are fetched (BDV, CachedOrds, whatever) as well as how they are encoded\\/decoded. It could very well be a CLITaxoFacetCounts impl which lets you pass the CLI you want to use (BDVCLI, CachedOrdsCLI, MySuperExpertDecodingCLI). That\'s it. Most users won\'t know about it, but the few that do, won\'t need to rewrite so many classes.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13823304_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13823304_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/13 05:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-15T05:42:54+0000\'\u003e15\\/Nov\\/13 05:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I think that\'s an acceptable risk in exchange for the simpler index-time API.  \\n\\n What if someone already extends IW? Or, we\'ll like that approach so much that we\'ll want to apply it elsewhere too (I mean in other modules)? I\'m just saying that extending IW is a pretty big thing, compared to FacetFields. \\n\\n I was thinking maybe we can wrap an IW, and present an interface with only add\\/updateDoc so on one hand you get to add  new FacetField()  easily, but on the other you get to use whatever IW that you want. It\'s like RandomIW, only we may not want to copy the entire set of APIs, only the document-related ones? And in the future we can think about TaxoFacetIW which also owns the commit()? \\n\\n Another crazy idea is to implement a FacetDocument which extends Document (we\'d need to allow that first!) and does the same trick on addField() \\/ indexableFields(). I think if we can pull this off (extending Document is preferred IMO), it\'s far less intrusive than a new FacetIW. \\n\\n  Wait, the app cannot compute this (accurately) by summing the child counts? It will overcount in general, right?  \\n\\n Ooops, you\'re right. So in that case, we can open up the extension point (I think it\'s FacetIW.dedupAndEncode) to let the app add the DIM ordinal too? Then I think the rest of the search code will just work? \\n\\n \\n There was a user on the ML (I don\'t have the link) who just wanted to \\nget the facet count for a specific label after faceting was done, and \\nthe hoops s\\/he had to jump through (custom FacetResultHandler I \\nthink??) to achieve that was just crazy.  \\n\\n Maybe it\'s crazy I don\'t know. All I\'m saying is that now you took that user\'s request and made it a top-level API. I don\'t know if that qualifies as simplifying the APIs, or whether similar requests in the future will be easy to implement by extension, or we\'d need to add them to our core code. For instance, this API makes Range and Count not share the same API (not saying it\'s a bad thing, just an example). But I already +1 the idea of having that on the API. \\n\\n  Seriously? What abstractions are we missing?  \\n\\n Well, FacetArrays committing to an int[], while we have someone which wants to use a Map, because he has millions of facets, yet queries typically hit very few of them. And he uses both the int[] and float[] arrays, which for the most part of them are allocated for no good reason. In order to use a Map he needs to write a FacetResultsHandler which computes top-K from the map, as well extend FacetsAccumulator to override createFRH. Just an example. If we have a FacetValues abstraction w\\/ get\\/set\\/iterator methods, all he\'d need to do is override the FacetValues that should be used. \\n\\n But I already told him that this is something he can just do w\\/ FacetResultsHandler. And just to point out that this patch won\'t make things worse - since he already overrides the aggregation method, he can just implement a MapBasedTaxoFacetsSomething. So I only gave it as an example (FacetValues abstraction, I think, will hurt the performance in general, but we could benchmark). \\n\\n Another abstraction is  LUCENE-5316 , which we struggle to get it to perform (really frustrating!). \\n\\n \\n If this is too much change for the facets module, we could, instead, \\nleave the facets module as is, and break this effort out as a \\ndifferent module (facets2, simplefacets, something?). We also have \\nmany queryparsers, many highlighters, etc., and I think that\'s \\nhealthy: all options can be explored.  \\n\\n -1 to that. I think it delivers the wrong message. Why have two faceting modules? A branch is the perfect choice here, since it allows us to move the entire module to the new API. And on the way we benefit by assessing that the new API can really allow implementing associations, complements, sampling. \\n\\n To give an example - the API first was overwhelming and in the last round of changes I removed and moved things (I thought I simplify it!). So for instance once upon a time FacetRequest let you specify the FacetsAggregator and FacetResultsHandler. I moved them both to FacetsAccumulator, but recently moved FacetsAggregator back to FacetRequest (it allows more easily to define which aggregator a certain FR needs to use). And on  LUCENE-5333  I suggested to move FacetResultsHandler back to FR, to implement an AllDimFR. \\n\\n So wearing the \\\"experienced\\\" hat, I just want to make sure we won\'t move everything out only to gradually swap it back in. I\'m not against changing the APIs, but because this module is rich with features (which I, and apparently our users too, think are important), I\'d like to make sure the new API works for all of them. I may compromise on complements and sampling because: (1) complements is not per-segment and I think it might require a full rewrite anywhere (there\'s an issue for it) and (2) sampling because it\'s under the *.old package, meaning it was never fully migrated to the new APIs and I think it could use some serious simplification there too. \\n\\n If you\'re worried that you\'ll do this work alone, I promise to help. On the branch. \\n\\n \\n It\'s a crazy expert thing to create another faceting impl, so I think \\nsuch developers can handle changing their rollup to be lazy if it\'s \\nbeneficial\\/necessary for their use case.  \\n\\n Let\'s use MapReduce as an analogy. The framework says \\\"you worry about the Map and Reduce phase, I\'ll take care of the distribution stuff\\\". Nice and clean. In the beginning the facets API said \\\"you worry about aggregating a  single  ordinal, I\'ll worry about the rest\\\". Then we changed it to \\\"you worry about aggregating all ordinals in a segment, I\'ll worry about the rest\\\". \\n\\n Now, some users we have, well think of them as data scientists. All they\'re interested about is ranking facets to drive some insights out of the data. I feel that we\'re putting too much burden on them more and more. Cutting the API from the single-ord level to the segment-level was to gain sizable improvements to faceted search. But letting them do the rollup ... anyway, let\'s proceed with that, we can see as we go. \\n\\n I personally like code reuse, and it kills me to see code that\'s duplicated. Often this calls out for bad design of APIs, not necessarily simplification. \\n\\n \\n I\'m not sure it\'s so easily separated out; the DimConfig is common to \\nindex time and search time, and we\'re still iterating on that (I just \\nmoved the indexedFieldName into it).  \\n\\n I was thinking to develop it still with FacetIndexingParams in mind - just cutover from FacetFields to FacetIW\\/FacetDocument. This makes the change gradual and allows us to investigate it separately. It\'s also, I think, a much lower hanging fruit. But, it looks like the changes in this patch will require rewriting large parts of it, so maybe we should do it here. \\n\\n \\n We\'d have to change 3 places if we did that right now: FacetIndexWriter \\n(where we encode) and TaxonomyFacetCounts\\/SumValueSource (where we \\ndecode).  \\n\\n Wrong? I mean you still didn\'t write a version which pulls the ords from OrdinalsCache (and I assume you don\'t want to get rid of it!). With those two TFCs, it already means we\'ll have 4 classes? While I think the SumValueSource could be oblivious to how the ords are encoded\\/fetched out-of-the-box, since it\'s less common to use (we only optimize counting) and someone can rewrite it to pull the ords from OrdinalsCache directly (instead of going through the CLI abstraction). \\n\\n  So I think its fine to bake in the encoding, but with the two key methods in those 20 classes \'protected\' in the appropriate places so that an expert user could subclass them:  \\n\\n I think you point out two problems - one is the fact that we have the *.encoding package at all and the other one is how to override encoding\\/decoding. The nice thing about IntEncoder\\/Decoder (let\'s think of it as PackedInts ok?) is that you can use an implementation without affecting other classes, while with encode\\/decode protected methods you need to extend every class that you have which reads the data. I don\'t think that qualifies as good software design. Why do we have PackedInts then? \\n\\n Now the question is whether we should keep the different IntEncoders or not - I don\'t know. Why do we have so many PackedInts versions? Do we use all of them or are they there so that someone can make a pick? If they don\'t hurt anyone, and requires almost no maintenance, why remove them? \\n\\n The argument is whether we should open up encoding\\/decoding at all. What Mike is saying \\\"if you want to encode differently, you\'re an expert and you can rewrite all of your and Lucene\'s aggregators (count, sum VS) too\\\". What you\'re saying, add encode\\/decode protected methods, is more how the API looks today, only instead of a method we have an IntEncoder\\/Decoder (a\'la PackedInts) class. That\'s just easier to use in conjunction with other classes (especially if we do the CLI abstraction). \\n\\n Just to clarify, I don\'t mean we have to have the CLI abstraction and use it everywhere. I think it\'s a good API for someone to use if he doesn\'t care about how ordinals are fetched (BDV, CachedOrds, whatever) as well as how they are encoded\\/decoded. It could very well be a CLITaxoFacetCounts impl which lets you pass the CLI you want to use (BDVCLI, CachedOrdsCLI, MySuperExpertDecodingCLI). That\'s it. Most users won\'t know about it, but the few that do, won\'t need to rewrite so many classes.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13823316\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13823316&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13823316\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13823316_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13823316_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/13 05:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-15T05:51:47+0000\'\u003e15\\/Nov\\/13 05:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eNow the question is whether we should keep the different IntEncoders or not - I don\'t know. Why do we have so many PackedInts versions? Do we use all of them or are they there so that someone can make a pick? If they don\'t hurt anyone, and requires almost no maintenance, why remove them?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYour analogy is 100% wrong Shai. PackedInts uses the different implementations behind the scenes automatically.\u003c\\/p\u003e\\n\\n\u003cp\u003eHere we just have a lot of public classes overwhelming the user for absolutely no good reason.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will reopen this JIRA issue if it is marked \'resolved\' without these classes being removed!!!!!!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13823316_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13823316_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/13 05:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-15T05:51:47+0000\'\u003e15\\/Nov\\/13 05:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n Now the question is whether we should keep the different IntEncoders or not - I don\'t know. Why do we have so many PackedInts versions? Do we use all of them or are they there so that someone can make a pick? If they don\'t hurt anyone, and requires almost no maintenance, why remove them?  \\n\\n Your analogy is 100% wrong Shai. PackedInts uses the different implementations behind the scenes automatically. \\n\\n Here we just have a lot of public classes overwhelming the user for absolutely no good reason. \\n\\n I will reopen this JIRA issue if it is marked \'resolved\' without these classes being removed!!!!!!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13823466\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13823466&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13823466\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13823466_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13823466_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/13 08:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-15T08:20:40+0000\'\u003e15\\/Nov\\/13 08:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI don\'t think it\'s 100% wrong - look at all the classes under o.a.l.util.packed &#8211; I\'m talking about the public: PackedInts, Mutable, GrowableWriter, PagedGrowableWriter, AppendingPackedLongBuffer, AppendingDeltaPackedLongBuffer, MontonicAppendingLongBuffer - these classes exist for a reason &#8211; you need to be able to pick the best one for you needs. They great.\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t care much if you want to remove o.a.l.facet.encoding package - I think it\'s fair to say that if you want to have a different encoding scheme, you should extend FacetIW\\/FacetDocument\\/FacetFields (whatever we come up with) .encode() and then either write a matching CategoryListIterator, or TaxoFacetCounts.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd I wished you used less !!!! \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13823466_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13823466_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/13 08:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-15T08:20:40+0000\'\u003e15\\/Nov\\/13 08:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I don\'t think it\'s 100% wrong - look at all the classes under o.a.l.util.packed &#8211; I\'m talking about the public: PackedInts, Mutable, GrowableWriter, PagedGrowableWriter, AppendingPackedLongBuffer, AppendingDeltaPackedLongBuffer, MontonicAppendingLongBuffer - these classes exist for a reason &#8211; you need to be able to pick the best one for you needs. They great. \\n\\n I don\'t care much if you want to remove o.a.l.facet.encoding package - I think it\'s fair to say that if you want to have a different encoding scheme, you should extend FacetIW\\/FacetDocument\\/FacetFields (whatever we come up with) .encode() and then either write a matching CategoryListIterator, or TaxoFacetCounts. \\n\\n And I wished you used less !!!!                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13824407\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13824407&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13824407\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13824407_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824407_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/13 07:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-16T07:17:27+0000\'\u003e16\\/Nov\\/13 07:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAbout IntEncoder, one thing it lets us do today is detect the encoding used for this category list, and eg throw a meaningful exception in FastCountingAggregator if a FIP is passed which uses a different decoder. I think it\'s good if we can somehow detect it in TaxoFacetCounts? If not, maybe we just document that this class assumes default encoding is used and that if you changed that, you shouldn\'t use this class? If you think documentation isn\'t enough, please drop a nocommit so we remember to handle it? \u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ve been thinking to get rid of IntEncoder in a separate issue (do this change in baby steps), so whatever we decide here, I\'ll apply there. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13824407_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824407_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/13 07:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-16T07:17:27+0000\'\u003e16\\/Nov\\/13 07:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    About IntEncoder, one thing it lets us do today is detect the encoding used for this category list, and eg throw a meaningful exception in FastCountingAggregator if a FIP is passed which uses a different decoder. I think it\'s good if we can somehow detect it in TaxoFacetCounts? If not, maybe we just document that this class assumes default encoding is used and that if you changed that, you shouldn\'t use this class? If you think documentation isn\'t enough, please drop a nocommit so we remember to handle it?  \\n\\n I\'ve been thinking to get rid of IntEncoder in a separate issue (do this change in baby steps), so whatever we decide here, I\'ll apply there.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13824821\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13824821&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13824821\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824821_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824821_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 12:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T12:23:39+0000\'\u003e17\\/Nov\\/13 12:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1542712 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1542712\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1542712\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: add nocommits\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824821_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824821_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 12:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T12:23:39+0000\'\u003e17\\/Nov\\/13 12:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1542712 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1542712  ] \\n\\n   LUCENE-5339  : add nocommits              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13824822\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13824822&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13824822\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13824822_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824822_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 12:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T12:23:46+0000\'\u003e17\\/Nov\\/13 12:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eIf not, maybe we just document that this class assumes default encoding is used and that if you changed that, you shouldn\'t use this class?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI just committed nocommits that we should jdoc this ...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13824822_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824822_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 12:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T12:23:46+0000\'\u003e17\\/Nov\\/13 12:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     If not, maybe we just document that this class assumes default encoding is used and that if you changed that, you shouldn\'t use this class?  \\n\\n I just committed nocommits that we should jdoc this ...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13824823\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13824823&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13824823\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824823_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824823_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 12:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T12:28:51+0000\'\u003e17\\/Nov\\/13 12:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1542713 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1542713\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1542713\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: cutover DrillSideways\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824823_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824823_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 12:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T12:28:51+0000\'\u003e17\\/Nov\\/13 12:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1542713 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1542713  ] \\n\\n   LUCENE-5339  : cutover DrillSideways              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13824826\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13824826&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13824826\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13824826_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824826_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 12:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T12:52:37+0000\'\u003e17\\/Nov\\/13 12:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI was thinking maybe we can wrap an IW,\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think that\'s a good idea?  I added to TODO.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eAnother crazy idea is to implement a FacetDocument which extends Document \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI\'m not sure how this can work, since in order to write the ords we\u003cbr\\/\u003e\\nneed to see all FacetFields?  Ie, at what point would we compile all\u003cbr\\/\u003e\\nthe FacetFields into the BDV field?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003ewe can open up the extension point (I think it\'s FacetIW.dedupAndEncode) to let the app add the DIM ordinal too?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHmm, we could open that up, but ... I think that\'s \\\"too late\\\"?  You\u003cbr\\/\u003e\\ncan\'t easily know which dim ords to add back at that point.  I added a\u003cbr\\/\u003e\\nTODO. \u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cblockquote\u003e\u003cp\u003eSeriously? What abstractions are we missing?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWell, FacetArrays committing to an int[], while we have someone which wants to use a Map, because he has millions of facets, yet queries typically hit very few of them.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWith the simplified APIs this user could just make a custom facet\u003cbr\\/\u003e\\nmethod?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eAnother abstraction is \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5316\\\" title=\\\"Taxonomy tree traversing improvement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5316\\\"\u003eLUCENE-5316\u003c\\/a\u003e, which we struggle to get it to perform (really frustrating!).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI agree we need better abstraction here... the 3 int we require per\u003cbr\\/\u003e\\nunique facet label is costly.  But, I don\'t think we need to force\u003cbr\\/\u003e\\nSSDVFacets to use this abstraction?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eWhy have two faceting modules? A branch is the perfect choice here, since it allows us to move the entire module to the new API. And on the way we benefit by assessing that the new API can really allow implementing associations, complements, sampling.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI would also prefer to have a single facet module after all this, but\u003cbr\\/\u003e\\nif the requirements (rich functionality vs. simple API) are too\u003cbr\\/\u003e\\ndivergent, then two modules is at least an option.  Progress not\u003cbr\\/\u003e\\nperfection...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI may compromise on complements and sampling because: (1) complements is not per-segment and I think it might require a full rewrite anywhere (there\'s an issue for it) and (2) sampling because it\'s under the *.old package, meaning it was never fully migrated to the new APIs and I think it could use some serious simplification there too.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI agree it\'s bad that complements is \\\"top level\\\"; everything else in\u003cbr\\/\u003e\\nthe facet module is NRT friendly and I think we should stick with\u003cbr\\/\u003e\\nthat.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll work on associations...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI personally like code reuse, and it kills me to see code that\'s duplicated. Often this calls out for bad design of APIs, not necessarily simplification.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think this is a precarious balance.  If a little code dup can\u003cbr\\/\u003e\\ngreatly simplify the APIs, then that\'s the better tradeoff.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eWrong? I mean you still didn\'t write a version which pulls the ords from OrdinalsCache (and I assume you don\'t want to get rid of it!).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYou\'re right, the ords cache filling will be another place that \\\"bakes\u003cbr\\/\u003e\\nin\\\" the decoding.  So, I agree: if we can find a clean way to abstract\u003cbr\\/\u003e\\nthe encoding\\/source then let\'s pursue that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13824826_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824826_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 12:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T12:52:37+0000\'\u003e17\\/Nov\\/13 12:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I was thinking maybe we can wrap an IW,  \\n\\n I think that\'s a good idea?  I added to TODO. \\n\\n  Another crazy idea is to implement a FacetDocument which extends Document   \\n\\n I\'m not sure how this can work, since in order to write the ords we \\nneed to see all FacetFields?  Ie, at what point would we compile all \\nthe FacetFields into the BDV field? \\n\\n  we can open up the extension point (I think it\'s FacetIW.dedupAndEncode) to let the app add the DIM ordinal too?  \\n\\n Hmm, we could open that up, but ... I think that\'s \\\"too late\\\"?  You \\ncan\'t easily know which dim ords to add back at that point.  I added a \\nTODO.  \\n\\n \\n  Seriously? What abstractions are we missing?  \\n\\n Well, FacetArrays committing to an int[], while we have someone which wants to use a Map, because he has millions of facets, yet queries typically hit very few of them.  \\n\\n With the simplified APIs this user could just make a custom facet \\nmethod? \\n\\n  Another abstraction is  LUCENE-5316 , which we struggle to get it to perform (really frustrating!).  \\n\\n I agree we need better abstraction here... the 3 int we require per \\nunique facet label is costly.  But, I don\'t think we need to force \\nSSDVFacets to use this abstraction? \\n\\n  Why have two faceting modules? A branch is the perfect choice here, since it allows us to move the entire module to the new API. And on the way we benefit by assessing that the new API can really allow implementing associations, complements, sampling.  \\n\\n I would also prefer to have a single facet module after all this, but \\nif the requirements (rich functionality vs. simple API) are too \\ndivergent, then two modules is at least an option.  Progress not \\nperfection... \\n\\n  I may compromise on complements and sampling because: (1) complements is not per-segment and I think it might require a full rewrite anywhere (there\'s an issue for it) and (2) sampling because it\'s under the *.old package, meaning it was never fully migrated to the new APIs and I think it could use some serious simplification there too.  \\n\\n I agree it\'s bad that complements is \\\"top level\\\"; everything else in \\nthe facet module is NRT friendly and I think we should stick with \\nthat. \\n\\n I\'ll work on associations... \\n\\n  I personally like code reuse, and it kills me to see code that\'s duplicated. Often this calls out for bad design of APIs, not necessarily simplification.  \\n\\n I think this is a precarious balance.  If a little code dup can \\ngreatly simplify the APIs, then that\'s the better tradeoff. \\n\\n  Wrong? I mean you still didn\'t write a version which pulls the ords from OrdinalsCache (and I assume you don\'t want to get rid of it!).  \\n\\n You\'re right, the ords cache filling will be another place that \\\"bakes \\nin\\\" the decoding.  So, I agree: if we can find a clean way to abstract \\nthe encoding\\/source then let\'s pursue that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13824827\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13824827&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13824827\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824827_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824827_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 12:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T12:53:18+0000\'\u003e17\\/Nov\\/13 12:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1542717 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1542717\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1542717\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: update TODOs\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824827_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824827_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 12:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T12:53:18+0000\'\u003e17\\/Nov\\/13 12:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1542717 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1542717  ] \\n\\n   LUCENE-5339  : update TODOs              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13824833\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13824833&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13824833\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13824833_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824833_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 13:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T13:29:40+0000\'\u003e17\\/Nov\\/13 13:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eI\'m not sure how this can work, since in order to write the ords we\u003cbr\\/\u003e\\nneed to see all FacetFields? Ie, at what point would we compile all\u003cbr\\/\u003e\\nthe FacetFields into the BDV field?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI was thinking when Doc.indexableFields() is called?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eHmm, we could open that up, but ... I think that\'s \\\"too late\\\"? You\u003cbr\\/\u003e\\ncan\'t easily know which dim ords to add back at that point. I added a\u003cbr\\/\u003e\\nTODO.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eMaybe that\'s the wrong extension point, but what I had in mind is something similar to what FacetFields does today &#8211; it adds the categories to the TaxoIndex and receives their ordinal. Then it calls a CategoryListBuilder which asks for the parent of an ordinal until it hits ROOT (depending on OrdPolicy of course). I mentioned dedupAndEncode because I thought it does something like that (i.e. that you\'ve inlined CategoryListBuilder in FacetIW). If it\'s not, then whatever method that does that ... and if there is none, let\'s wrap it in an overridable method?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eWith the simplified APIs this user could just make a custom facet method?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHe already does that with the current APIs too (a special FacetsAccumulator. I don\'t know if it\'s easier\\/harder\\/the same to do w\\/ the new API. I guess it won\'t be harder.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eYou\'re right, the ords cache filling will be another place that \\\"bakes\u003cbr\\/\u003e\\nin\\\" the decoding. So, I agree: if we can find a clean way to abstract\u003cbr\\/\u003e\\nthe encoding\\/source then let\'s pursue that.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAs I said, let\'s divide that into two problems: API and optimization. For API, we can stick w\\/ CategoryListIterator and implement both a DGapVIntBinaryDVIterator as well as OrdinalsCacheIterator. That way, FacetsSomething (do we have a name yet? Is it just Facets?) can use a CLI if they don\'t care where the ordinals come from.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor optimization, we do a FastFacetCounts which inlines dgap+vint and reads from BDV, and we can also do a CachedOrdsFacetCounts which inlines the interaction with OrdinalsCache. Actually, if we provide these two, we can skip the third FacetCounts (uses CLI), as it will be for demo purposes only given current encoding. If anyone changes the encoding, he can write a FacetCounts. Also, we can always add it later ...\u003c\\/p\u003e\\n\\n\u003cp\u003eThe rest of the Facets (i.e. non-counts) should IMO at this point use the CLI abstraction. If anyone wants to optimize a SumValueSourceFacets, he can do so however he wants. But the CLI is the abstraction I\'m thinking &#8211; it only has two methods: setNextReader and getOrdinals(int doc).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eI think this is a precarious balance. If a little code dup can\u003cbr\\/\u003e\\ngreatly simplify the APIs, then that\'s the better tradeoff.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIn general I agree. It then becomes what\'s considered little vs a lot of code dup. I think that dgap+vint + rollup is not little (put together), as well as making the decision to rollup. But at this point I don\'t mind .. let\'s force code dup, and then simplify if users are angry.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eI agree we need better abstraction here... the 3 int we require per\u003cbr\\/\u003e\\nunique facet label is costly. But, I don\'t think we need to force\u003cbr\\/\u003e\\nSSDVFacets to use this abstraction?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWell, at first what I had in mind is a Taxonomy interface (read-only) with two implementations: TaxoIndex and SortedSet. Especially since we\'re talking about supporting full hierarchies w\\/ SortedSet. I think it will be cool if a TaxoFacetCounts just takes a Taxonomy and we don\'t need to duplicate the code. But then I realized it\'s not just how the taxonomy is managed, but also where the ords are pulled from (BDV vs SSDV).\u003c\\/p\u003e\\n\\n\u003cp\u003eWe basically could have a SortedSetTaxonomy and SortedSetCLI to support any \'general\' counting, but then as you pointed out somewhere, a SortedSetCLI may not be able to optimize by counting in seg-ord space and re-map afterwards. So at this point I\'m not sure we should pursue the implementation of a SortedSet Taxonomy and CLI. Would be nice to know the APIs allow that (even if it means you lose some performance, e.g. always count in global ord-space), should anyone want to do that. Let\'s drop it for now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13824833_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824833_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 13:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T13:29:40+0000\'\u003e17\\/Nov\\/13 13:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n I\'m not sure how this can work, since in order to write the ords we \\nneed to see all FacetFields? Ie, at what point would we compile all \\nthe FacetFields into the BDV field?  \\n\\n I was thinking when Doc.indexableFields() is called? \\n\\n \\n Hmm, we could open that up, but ... I think that\'s \\\"too late\\\"? You \\ncan\'t easily know which dim ords to add back at that point. I added a \\nTODO.  \\n\\n Maybe that\'s the wrong extension point, but what I had in mind is something similar to what FacetFields does today &#8211; it adds the categories to the TaxoIndex and receives their ordinal. Then it calls a CategoryListBuilder which asks for the parent of an ordinal until it hits ROOT (depending on OrdPolicy of course). I mentioned dedupAndEncode because I thought it does something like that (i.e. that you\'ve inlined CategoryListBuilder in FacetIW). If it\'s not, then whatever method that does that ... and if there is none, let\'s wrap it in an overridable method? \\n\\n  With the simplified APIs this user could just make a custom facet method?  \\n\\n He already does that with the current APIs too (a special FacetsAccumulator. I don\'t know if it\'s easier\\/harder\\/the same to do w\\/ the new API. I guess it won\'t be harder. \\n\\n \\n You\'re right, the ords cache filling will be another place that \\\"bakes \\nin\\\" the decoding. So, I agree: if we can find a clean way to abstract \\nthe encoding\\/source then let\'s pursue that.  \\n\\n As I said, let\'s divide that into two problems: API and optimization. For API, we can stick w\\/ CategoryListIterator and implement both a DGapVIntBinaryDVIterator as well as OrdinalsCacheIterator. That way, FacetsSomething (do we have a name yet? Is it just Facets?) can use a CLI if they don\'t care where the ordinals come from. \\n\\n For optimization, we do a FastFacetCounts which inlines dgap+vint and reads from BDV, and we can also do a CachedOrdsFacetCounts which inlines the interaction with OrdinalsCache. Actually, if we provide these two, we can skip the third FacetCounts (uses CLI), as it will be for demo purposes only given current encoding. If anyone changes the encoding, he can write a FacetCounts. Also, we can always add it later ... \\n\\n The rest of the Facets (i.e. non-counts) should IMO at this point use the CLI abstraction. If anyone wants to optimize a SumValueSourceFacets, he can do so however he wants. But the CLI is the abstraction I\'m thinking &#8211; it only has two methods: setNextReader and getOrdinals(int doc). \\n\\n \\n I think this is a precarious balance. If a little code dup can \\ngreatly simplify the APIs, then that\'s the better tradeoff.  \\n\\n In general I agree. It then becomes what\'s considered little vs a lot of code dup. I think that dgap+vint + rollup is not little (put together), as well as making the decision to rollup. But at this point I don\'t mind .. let\'s force code dup, and then simplify if users are angry. \\n\\n \\n I agree we need better abstraction here... the 3 int we require per \\nunique facet label is costly. But, I don\'t think we need to force \\nSSDVFacets to use this abstraction?  \\n\\n Well, at first what I had in mind is a Taxonomy interface (read-only) with two implementations: TaxoIndex and SortedSet. Especially since we\'re talking about supporting full hierarchies w\\/ SortedSet. I think it will be cool if a TaxoFacetCounts just takes a Taxonomy and we don\'t need to duplicate the code. But then I realized it\'s not just how the taxonomy is managed, but also where the ords are pulled from (BDV vs SSDV). \\n\\n We basically could have a SortedSetTaxonomy and SortedSetCLI to support any \'general\' counting, but then as you pointed out somewhere, a SortedSetCLI may not be able to optimize by counting in seg-ord space and re-map afterwards. So at this point I\'m not sure we should pursue the implementation of a SortedSet Taxonomy and CLI. Would be nice to know the APIs allow that (even if it means you lose some performance, e.g. always count in global ord-space), should anyone want to do that. Let\'s drop it for now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13824913\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13824913&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13824913\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824913_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824913_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 17:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T17:57:01+0000\'\u003e17\\/Nov\\/13 17:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1542773 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1542773\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1542773\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: add OrdinalsReader + Cache to abstract the source of the ords\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824913_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824913_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 17:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T17:57:01+0000\'\u003e17\\/Nov\\/13 17:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1542773 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1542773  ] \\n\\n   LUCENE-5339  : add OrdinalsReader + Cache to abstract the source of the ords              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13824944\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13824944&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13824944\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824944_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824944_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 20:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T20:31:46+0000\'\u003e17\\/Nov\\/13 20:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1542804 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1542804\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1542804\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: simplify DrillDownQuery\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824944_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824944_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 20:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T20:31:46+0000\'\u003e17\\/Nov\\/13 20:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1542804 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1542804  ] \\n\\n   LUCENE-5339  : simplify DrillDownQuery              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13824969\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13824969&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13824969\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824969_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824969_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 21:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T21:58:10+0000\'\u003e17\\/Nov\\/13 21:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1542843 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1542843\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1542843\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: remove delim char\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13824969_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13824969_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/13 21:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-17T21:58:10+0000\'\u003e17\\/Nov\\/13 21:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1542843 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1542843  ] \\n\\n   LUCENE-5339  : remove delim char              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13825369\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13825369&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13825369\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13825369_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13825369_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/13 14:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-18T14:54:24+0000\'\u003e18\\/Nov\\/13 14:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1543047 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1543047\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1543047\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: assocations\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13825369_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13825369_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/13 14:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-18T14:54:24+0000\'\u003e18\\/Nov\\/13 14:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1543047 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1543047  ] \\n\\n   LUCENE-5339  : assocations              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13825408\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13825408&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13825408\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13825408_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13825408_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/13 15:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-18T15:46:22+0000\'\u003e18\\/Nov\\/13 15:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Mike! Currently, int and float associations are written in different BDVs, one for int and one for float. If you look in CategoryAssociation, it has an ID() which is added to the facet field. That means fields like $facet$int, $facet$float, $facet$CA.getID(). This is also related to the nocommit you put about the association facet field &#8211; I think it should be indexFieldName + CategoryAssociation.ID.\u003c\\/p\u003e\\n\\n\u003cp\u003eI see though that AssociationFacetField can handle both integers and floats. While the treatment is the same (writing a float is just like writing an int after FloatToIntBits), I think it\'s better if we separate them either into two fields, or keep the CategoryAssociation class to distinguish between them. Then FacetIW can iterate on the AssociationFacetFields and group them by CategoryAssociation type to index them under the respective BDV.\u003c\\/p\u003e\\n\\n\u003cp\u003eWe cannot allow mixing different association types in the same BDV, as their decoding isn\'t the same (even float vs int &#8211; you have to know whether to do Float.intBitsToFloat or not, after reading the int).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13825408_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13825408_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/13 15:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-18T15:46:22+0000\'\u003e18\\/Nov\\/13 15:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Mike! Currently, int and float associations are written in different BDVs, one for int and one for float. If you look in CategoryAssociation, it has an ID() which is added to the facet field. That means fields like $facet$int, $facet$float, $facet$CA.getID(). This is also related to the nocommit you put about the association facet field &#8211; I think it should be indexFieldName + CategoryAssociation.ID. \\n\\n I see though that AssociationFacetField can handle both integers and floats. While the treatment is the same (writing a float is just like writing an int after FloatToIntBits), I think it\'s better if we separate them either into two fields, or keep the CategoryAssociation class to distinguish between them. Then FacetIW can iterate on the AssociationFacetFields and group them by CategoryAssociation type to index them under the respective BDV. \\n\\n We cannot allow mixing different association types in the same BDV, as their decoding isn\'t the same (even float vs int &#8211; you have to know whether to do Float.intBitsToFloat or not, after reading the int).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13825778\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13825778&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13825778\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13825778_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13825778_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/13 21:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-18T21:11:05+0000\'\u003e18\\/Nov\\/13 21:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1543161 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1543161\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1543161\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: renames\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13825778_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13825778_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/13 21:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-18T21:11:05+0000\'\u003e18\\/Nov\\/13 21:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1543161 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1543161  ] \\n\\n   LUCENE-5339  : renames              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13825861\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13825861&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13825861\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13825861_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13825861_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/13 22:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-18T22:32:10+0000\'\u003e18\\/Nov\\/13 22:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1543202 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1543202\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1543202\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: add base class for taxo facet impls; catch wrong index field name for a given dim\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13825861_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13825861_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/13 22:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-18T22:32:10+0000\'\u003e18\\/Nov\\/13 22:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1543202 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1543202  ] \\n\\n   LUCENE-5339  : add base class for taxo facet impls; catch wrong index field name for a given dim              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13825883\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13825883&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13825883\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13825883_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13825883_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/13 22:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-18T22:46:09+0000\'\u003e18\\/Nov\\/13 22:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1543213 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1543213\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1543213\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: renames\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13825883_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13825883_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/13 22:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-18T22:46:09+0000\'\u003e18\\/Nov\\/13 22:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1543213 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1543213  ] \\n\\n   LUCENE-5339  : renames              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13826439\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13826439&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13826439\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13826439_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826439_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 12:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T12:37:05+0000\'\u003e19\\/Nov\\/13 12:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cblockquote\u003e\u003cp\u003eI\'m not sure how this can work, since in order to write the ords we need to see all FacetFields? Ie, at what point would we compile all the FacetFields into the BDV field?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI was thinking when Doc.indexableFields() is called?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHmm, that\'s iffy.  First off, IW also calls .storableFields(), and\u003cbr\\/\u003e\\nit\'s not defined which will be called first, and we need to add both\u003cbr\\/\u003e\\nstorable and indexable fields.\u003c\\/p\u003e\\n\\n\u003cp\u003eSecond off, Document has a longer lifecycle, e.g. one can reuse it,\u003cbr\\/\u003e\\nreuse field instance in it, etc., and I don\'t think we should alter it\u003cbr\\/\u003e\\nin-place (remove FacetFields, add new fields).\u003c\\/p\u003e\\n\\n\u003cp\u003eMaybe Document should have a \\\"rewrite\\\" method, that IW calls to the\u003cbr\\/\u003e\\n\\\"actual\\\" document to index?  The default would just \\\"return this\\\".\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eMaybe that\'s the wrong extension point, but what I had in mind is something similar to what FacetFields does today \\u2013 it adds the categories to the TaxoIndex and receives their ordinal. Then it calls a CategoryListBuilder which asks for the parent of an ordinal until it hits ROOT (depending on OrdPolicy of course). I mentioned dedupAndEncode because I thought it does something like that (i.e. that you\'ve inlined CategoryListBuilder in FacetIW). If it\'s not, then whatever method that does that ... and if there is none, let\'s wrap it in an overridable method?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eReally this is just adding complexity for a minor gain?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eAs I said, let\'s divide that into two problems: API and optimization. For API, we can stick w\\/ CategoryListIterator and implement both a DGapVIntBinaryDVIterator as well as OrdinalsCacheIterator. That way, FacetsSomething (do we have a name yet? Is it just Facets?) can use a CLI if they don\'t care where the ordinals come from.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor optimization, we do a FastFacetCounts which inlines dgap+vint and reads from BDV, and we can also do a CachedOrdsFacetCounts which inlines the interaction with OrdinalsCache. Actually, if we provide these two, we can skip the third FacetCounts (uses CLI), as it will be for demo purposes only given current encoding. If anyone changes the encoding, he can write a FacetCounts. Also, we can always add it later ...\u003c\\/p\u003e\\n\\n\u003cp\u003eThe rest of the Facets (i.e. non-counts) should IMO at this point use the CLI abstraction. If anyone wants to optimize a SumValueSourceFacets, he can do so however he wants. But the CLI is the abstraction I\'m thinking \\u2013 it only has two methods: setNextReader and getOrdinals(int doc).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOK, I added an OrdinalsReader abstraction, and CachedOrdinalsReader\u003cbr\\/\u003e\\n(holds all decoded ords in shared int[]), and a\u003cbr\\/\u003e\\nDocValuesOrdinalsReader with a protected decode() method that a\u003cbr\\/\u003e\\nsubclass could customize.  FastTaxonomyFacetCounts specializes the DV\u003cbr\\/\u003e\\ndecode.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cblockquote\u003e\u003cp\u003eI think this is a precarious balance. If a little code dup can greatly simplify the APIs, then that\'s the better tradeoff.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIn general I agree. It then becomes what\'s considered little vs a lot of code dup. I think that dgap+vint + rollup is not little (put together), as well as making the decision to rollup. But at this point I don\'t mind .. let\'s force code dup, and then simplify if users are angry.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI pulled out a base class (TaxonomyFacets) for all the taxonomy based\u003cbr\\/\u003e\\nfacet methods, to share some code.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13826439_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826439_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 12:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T12:37:05+0000\'\u003e19\\/Nov\\/13 12:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n  I\'m not sure how this can work, since in order to write the ords we need to see all FacetFields? Ie, at what point would we compile all the FacetFields into the BDV field?  \\n\\n I was thinking when Doc.indexableFields() is called?  \\n\\n Hmm, that\'s iffy.  First off, IW also calls .storableFields(), and \\nit\'s not defined which will be called first, and we need to add both \\nstorable and indexable fields. \\n\\n Second off, Document has a longer lifecycle, e.g. one can reuse it, \\nreuse field instance in it, etc., and I don\'t think we should alter it \\nin-place (remove FacetFields, add new fields). \\n\\n Maybe Document should have a \\\"rewrite\\\" method, that IW calls to the \\n\\\"actual\\\" document to index?  The default would just \\\"return this\\\". \\n\\n  Maybe that\'s the wrong extension point, but what I had in mind is something similar to what FacetFields does today \\u2013 it adds the categories to the TaxoIndex and receives their ordinal. Then it calls a CategoryListBuilder which asks for the parent of an ordinal until it hits ROOT (depending on OrdPolicy of course). I mentioned dedupAndEncode because I thought it does something like that (i.e. that you\'ve inlined CategoryListBuilder in FacetIW). If it\'s not, then whatever method that does that ... and if there is none, let\'s wrap it in an overridable method?  \\n\\n Really this is just adding complexity for a minor gain? \\n\\n \\n As I said, let\'s divide that into two problems: API and optimization. For API, we can stick w\\/ CategoryListIterator and implement both a DGapVIntBinaryDVIterator as well as OrdinalsCacheIterator. That way, FacetsSomething (do we have a name yet? Is it just Facets?) can use a CLI if they don\'t care where the ordinals come from. \\n\\n For optimization, we do a FastFacetCounts which inlines dgap+vint and reads from BDV, and we can also do a CachedOrdsFacetCounts which inlines the interaction with OrdinalsCache. Actually, if we provide these two, we can skip the third FacetCounts (uses CLI), as it will be for demo purposes only given current encoding. If anyone changes the encoding, he can write a FacetCounts. Also, we can always add it later ... \\n\\n The rest of the Facets (i.e. non-counts) should IMO at this point use the CLI abstraction. If anyone wants to optimize a SumValueSourceFacets, he can do so however he wants. But the CLI is the abstraction I\'m thinking \\u2013 it only has two methods: setNextReader and getOrdinals(int doc).  \\n\\n OK, I added an OrdinalsReader abstraction, and CachedOrdinalsReader \\n(holds all decoded ords in shared int[]), and a \\nDocValuesOrdinalsReader with a protected decode() method that a \\nsubclass could customize.  FastTaxonomyFacetCounts specializes the DV \\ndecode. \\n\\n \\n  I think this is a precarious balance. If a little code dup can greatly simplify the APIs, then that\'s the better tradeoff.  \\n\\n In general I agree. It then becomes what\'s considered little vs a lot of code dup. I think that dgap+vint + rollup is not little (put together), as well as making the decision to rollup. But at this point I don\'t mind .. let\'s force code dup, and then simplify if users are angry.  \\n\\n I pulled out a base class (TaxonomyFacets) for all the taxonomy based \\nfacet methods, to share some code.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13826570\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13826570&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13826570\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13826570_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826570_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 15:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T15:09:12+0000\'\u003e19\\/Nov\\/13 15:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eHmm, that\'s iffy. First off, IW also calls .storableFields(), and\u003cbr\\/\u003e\\nit\'s not defined which will be called first, and we need to add both\u003cbr\\/\u003e\\nstorable and indexable fields.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWhy are storableFields() related? None of the facet fields are also storable. I think we should only override indexableFields(). The part about reusing fields is a bigger problem though, so maybe your Document.rewrite() idea (like Query) could work... I just think that extending IW for this minor task (adding facets) is too much. I like the way you add FacetField to a Document, I just prefer to avoid the IW extension (at this point). So if we can pursue Doc.rewrite(), that may be good. Otherwise, maybe we could bring back FacetFields, only you won\'t add all CPs, but rather add FacetField one by one and then you can call createDoc() or something.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eReally this is just adding complexity for a minor gain?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWe can do this later. I just think that indexing the dimension is in 99% of the cases redundant. I prefer that the 1 app out there that might be interested in that do hard work, rather than we enforce more ordinals in the BDV for all faceted search apps.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eOK, I added an OrdinalsReader abstraction\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThanks!\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eI pulled out a base class (TaxonomyFacets) for all the taxonomy based\u003cbr\\/\u003e\\nfacet methods, to share some code.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAwesome!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13826570_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826570_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 15:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T15:09:12+0000\'\u003e19\\/Nov\\/13 15:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n Hmm, that\'s iffy. First off, IW also calls .storableFields(), and \\nit\'s not defined which will be called first, and we need to add both \\nstorable and indexable fields.  \\n\\n Why are storableFields() related? None of the facet fields are also storable. I think we should only override indexableFields(). The part about reusing fields is a bigger problem though, so maybe your Document.rewrite() idea (like Query) could work... I just think that extending IW for this minor task (adding facets) is too much. I like the way you add FacetField to a Document, I just prefer to avoid the IW extension (at this point). So if we can pursue Doc.rewrite(), that may be good. Otherwise, maybe we could bring back FacetFields, only you won\'t add all CPs, but rather add FacetField one by one and then you can call createDoc() or something. \\n\\n  Really this is just adding complexity for a minor gain?  \\n\\n We can do this later. I just think that indexing the dimension is in 99% of the cases redundant. I prefer that the 1 app out there that might be interested in that do hard work, rather than we enforce more ordinals in the BDV for all faceted search apps. \\n\\n  OK, I added an OrdinalsReader abstraction  \\n\\n Thanks! \\n\\n \\n I pulled out a base class (TaxonomyFacets) for all the taxonomy based \\nfacet methods, to share some code.  \\n\\n Awesome!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13826685\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13826685&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13826685\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13826685_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826685_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 17:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T17:13:39+0000\'\u003e19\\/Nov\\/13 17:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1543506 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1543506\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1543506\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: migrate some more tests; fix \'ignores IntsRef.offset bug\' in TaxoFacetCounts; add FacetTestCase.getFacetCounts\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13826685_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826685_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 17:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T17:13:39+0000\'\u003e19\\/Nov\\/13 17:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1543506 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1543506  ] \\n\\n   LUCENE-5339  : migrate some more tests; fix \'ignores IntsRef.offset bug\' in TaxoFacetCounts; add FacetTestCase.getFacetCounts              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13826789\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13826789&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13826789\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13826789_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826789_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 18:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T18:36:18+0000\'\u003e19\\/Nov\\/13 18:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1543530 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1543530\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1543530\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: switch to DocumentBuilder.build instead of FacetIndexWriter\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13826789_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826789_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 18:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T18:36:18+0000\'\u003e19\\/Nov\\/13 18:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1543530 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1543530  ] \\n\\n   LUCENE-5339  : switch to DocumentBuilder.build instead of FacetIndexWriter              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13826836\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13826836&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13826836\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13826836_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826836_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 19:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T19:24:33+0000\'\u003e19\\/Nov\\/13 19:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1543535 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1543535\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1543535\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: add best-effort detection of invalid mixing of different association field types in single indexed field\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13826836_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826836_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 19:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T19:24:33+0000\'\u003e19\\/Nov\\/13 19:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1543535 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1543535  ] \\n\\n   LUCENE-5339  : add best-effort detection of invalid mixing of different association field types in single indexed field              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13826926\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13826926&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13826926\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13826926_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826926_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 20:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T20:55:39+0000\'\u003e19\\/Nov\\/13 20:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1543572 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1543572\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1543572\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: another test, cutover taxo writer\\/reader to pathToString\\/stringToPath\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13826926_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13826926_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/13 20:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-19T20:55:39+0000\'\u003e19\\/Nov\\/13 20:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1543572 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1543572  ] \\n\\n   LUCENE-5339  : another test, cutover taxo writer\\/reader to pathToString\\/stringToPath              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13827602\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13827602&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13827602\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13827602_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13827602_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Nov\\/13 12:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-20T12:33:37+0000\'\u003e20\\/Nov\\/13 12:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1543803 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1543803\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1543803\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: more tests, add DimConfig.requireDimCount\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13827602_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13827602_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Nov\\/13 12:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-20T12:33:37+0000\'\u003e20\\/Nov\\/13 12:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1543803 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1543803  ] \\n\\n   LUCENE-5339  : more tests, add DimConfig.requireDimCount              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13829272\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13829272&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13829272\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13829272_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13829272_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Nov\\/13 19:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-21T19:48:44+0000\'\u003e21\\/Nov\\/13 19:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1544299 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1544299\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1544299\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: cutover more tests; fixed a few bugs\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13829272_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13829272_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Nov\\/13 19:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-21T19:48:44+0000\'\u003e21\\/Nov\\/13 19:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1544299 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1544299  ] \\n\\n   LUCENE-5339  : cutover more tests; fixed a few bugs              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13830069\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13830069&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13830069\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13830069_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13830069_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Nov\\/13 15:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-22T15:52:00+0000\'\u003e22\\/Nov\\/13 15:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1544586 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1544586\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1544586\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: cutover more tests\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13830069_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13830069_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Nov\\/13 15:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-22T15:52:00+0000\'\u003e22\\/Nov\\/13 15:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1544586 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1544586  ] \\n\\n   LUCENE-5339  : cutover more tests              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13830799\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13830799&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13830799\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13830799_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13830799_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Nov\\/13 23:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-23T23:27:20+0000\'\u003e23\\/Nov\\/13 23:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1544892 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1544892\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1544892\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: move build into FacetsConfig; cutover more tests\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13830799_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13830799_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Nov\\/13 23:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-23T23:27:20+0000\'\u003e23\\/Nov\\/13 23:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1544892 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1544892  ] \\n\\n   LUCENE-5339  : move build into FacetsConfig; cutover more tests              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13830942\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13830942&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13830942\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13830942_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13830942_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/13 13:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-24T13:30:07+0000\'\u003e24\\/Nov\\/13 13:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1544971 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1544971\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1544971\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: cutover more tests\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13830942_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13830942_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/13 13:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-24T13:30:07+0000\'\u003e24\\/Nov\\/13 13:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1544971 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1544971  ] \\n\\n   LUCENE-5339  : cutover more tests              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13831066\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13831066&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13831066\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13831066_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13831066_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/13 22:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-24T22:15:29+0000\'\u003e24\\/Nov\\/13 22:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1545086 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1545086\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1545086\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: more tests; add search utility methods; remove request path from SimpleFacetResult\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13831066_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13831066_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/13 22:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-24T22:15:29+0000\'\u003e24\\/Nov\\/13 22:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1545086 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1545086  ] \\n\\n   LUCENE-5339  : more tests; add search utility methods; remove request path from SimpleFacetResult              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13831071\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13831071&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13831071\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13831071_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13831071_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/13 22:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-24T22:32:40+0000\'\u003e24\\/Nov\\/13 22:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1545096 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1545096\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1545096\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: remove RangeAccumulator\\/FacetRequest\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13831071_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13831071_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/13 22:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-24T22:32:40+0000\'\u003e24\\/Nov\\/13 22:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1545096 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1545096  ] \\n\\n   LUCENE-5339  : remove RangeAccumulator\\/FacetRequest              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13831073\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13831073&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13831073\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13831073_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13831073_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/13 22:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-24T22:35:41+0000\'\u003e24\\/Nov\\/13 22:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1545097 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1545097\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1545097\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: remove old sorted set\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13831073_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13831073_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/13 22:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-24T22:35:41+0000\'\u003e24\\/Nov\\/13 22:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1545097 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1545097  ] \\n\\n   LUCENE-5339  : remove old sorted set              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13832109\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13832109&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13832109\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13832109_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832109_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 00:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T00:12:58+0000\'\u003e26\\/Nov\\/13 00:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1545466 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1545466\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1545466\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: finish cutover\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13832109_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832109_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 00:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T00:12:58+0000\'\u003e26\\/Nov\\/13 00:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1545466 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1545466  ] \\n\\n   LUCENE-5339  : finish cutover              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13832543\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13832543&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13832543\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13832543_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832543_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 12:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T12:46:14+0000\'\u003e26\\/Nov\\/13 12:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1545637 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1545637\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1545637\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: cutover demo to new APIs\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13832543_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832543_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 12:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T12:46:14+0000\'\u003e26\\/Nov\\/13 12:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1545637 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1545637  ] \\n\\n   LUCENE-5339  : cutover demo to new APIs              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13832544\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13832544&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13832544\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13832544_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832544_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 12:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T12:49:18+0000\'\u003e26\\/Nov\\/13 12:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1545639 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1545639\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1545639\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: add missing file\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13832544_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832544_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 12:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T12:49:18+0000\'\u003e26\\/Nov\\/13 12:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1545639 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1545639  ] \\n\\n   LUCENE-5339  : add missing file              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13832664\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13832664&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13832664\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13832664_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832664_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 15:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T15:29:47+0000\'\u003e26\\/Nov\\/13 15:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI built javadocs from this branch and took a look, much less overwhelming!\u003c\\/p\u003e\\n\\n\u003cp\u003eCan we do something about the .writercache packages? must there really be 3 of them with names like cl2o?\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eorg.apache.lucene.facet \\t\\norg.apache.lucene.facet.simple \\t \\norg.apache.lucene.facet.taxonomy \\t\\norg.apache.lucene.facet.taxonomy.directory \\t\\norg.apache.lucene.facet.taxonomy.writercache \\t\\norg.apache.lucene.facet.taxonomy.writercache.cl2o \\t\\norg.apache.lucene.facet.taxonomy.writercache.lru \\t\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13832664_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832664_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 15:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T15:29:47+0000\'\u003e26\\/Nov\\/13 15:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I built javadocs from this branch and took a look, much less overwhelming! \\n\\n Can we do something about the .writercache packages? must there really be 3 of them with names like cl2o? \\n\\n  \\n org.apache.lucene.facet \\t\\norg.apache.lucene.facet.simple \\t \\norg.apache.lucene.facet.taxonomy \\t\\norg.apache.lucene.facet.taxonomy.directory \\t\\norg.apache.lucene.facet.taxonomy.writercache \\t\\norg.apache.lucene.facet.taxonomy.writercache.cl2o \\t\\norg.apache.lucene.facet.taxonomy.writercache.lru \\t\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13832824\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13832824&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13832824\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13832824_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832824_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 18:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T18:14:26+0000\'\u003e26\\/Nov\\/13 18:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eCan we do something about the .writercache packages?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1 for moving both LRU and CL2O under the *.writercache package. Those packages are tiny, there\'s no need to really separate them. Also, while we\'re at it, I think we can rename the Cl2o cache to something more meaningful like FullTaxoInMemoryCache or better name. Cl2o, which stands for CategoryLabelToOrdinal is just meaningless...\u003c\\/p\u003e\\n\\n\u003cp\u003eBTW, I noticed in your list of packages above that we still have .simple &#8211; are we going to keep it or it\'s just that not all of the facet module was cutover to the new API?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13832824_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832824_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 18:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T18:14:26+0000\'\u003e26\\/Nov\\/13 18:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Can we do something about the .writercache packages?  \\n\\n +1 for moving both LRU and CL2O under the *.writercache package. Those packages are tiny, there\'s no need to really separate them. Also, while we\'re at it, I think we can rename the Cl2o cache to something more meaningful like FullTaxoInMemoryCache or better name. Cl2o, which stands for CategoryLabelToOrdinal is just meaningless... \\n\\n BTW, I noticed in your list of packages above that we still have .simple &#8211; are we going to keep it or it\'s just that not all of the facet module was cutover to the new API?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13832950\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13832950&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13832950\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13832950_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832950_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T19:53:24+0000\'\u003e26\\/Nov\\/13 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1545798 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1545798\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1545798\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: move\\/rename away from simple\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13832950_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832950_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T19:53:24+0000\'\u003e26\\/Nov\\/13 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1545798 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1545798  ] \\n\\n   LUCENE-5339  : move\\/rename away from simple              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13832952\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13832952&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13832952\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13832952_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832952_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 19:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T19:55:06+0000\'\u003e26\\/Nov\\/13 19:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eCan we do something about the .writercache packages?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cblockquote\u003e\u003cp\u003e+1 for moving both LRU and CL2O under the *.writercache package.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eGood idea, I\'ll move them.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eBTW, I noticed in your list of packages above that we still have .simple \\u2013 are we going to keep it or it\'s just that not all of the facet module was cutover to the new API?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI just committed the cutover to remove \\\"simple\\\" ...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13832952_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832952_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 19:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T19:55:06+0000\'\u003e26\\/Nov\\/13 19:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Can we do something about the .writercache packages?  \\n  +1 for moving both LRU and CL2O under the *.writercache package.  \\n\\n Good idea, I\'ll move them. \\n\\n  BTW, I noticed in your list of packages above that we still have .simple \\u2013 are we going to keep it or it\'s just that not all of the facet module was cutover to the new API?  \\n\\n I just committed the cutover to remove \\\"simple\\\" ...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13832989\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13832989&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13832989\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13832989_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832989_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 20:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T20:14:23+0000\'\u003e26\\/Nov\\/13 20:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1545808 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1545808\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1545808\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: remove writercache sub-packages\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13832989_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13832989_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/13 20:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-26T20:14:23+0000\'\u003e26\\/Nov\\/13 20:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1545808 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1545808  ] \\n\\n   LUCENE-5339  : remove writercache sub-packages              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13833596\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13833596&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13833596\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gilad\\\" id=\\\"commentauthor_13833596_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gilad\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gilad\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Gilad Barkai\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13833596_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T09:12:45+0000\'\u003e27\\/Nov\\/13 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBeen away from the issue for some time and it looks like a major progress,  Chapeau \\u00E0 lui\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ctt\u003eLabelAndValue\u003c\\/tt\u003e &amp; \u003ctt\u003eFacetResult\u003c\\/tt\u003e use \u003ctt\u003einstanceof\u003c\\/tt\u003e checks in their \u003ctt\u003eequals\u003c\\/tt\u003e method - is that a must?\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ctt\u003eFacetResult\u003c\\/tt\u003e has a member called \u003ctt\u003echildCount\u003c\\/tt\u003e - I think it\'s the number of categories\\/path\\/labels that were encountered. The current jdocs \\\"How many labels were populated under the requested path\\\" reveals implementation (population). Perhaps exchange populated with encountered?\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ctt\u003eFloatRange\u003c\\/tt\u003e and \u003ctt\u003eDoubleRange\u003c\\/tt\u003e uses \u003ctt\u003eMath.nextUp\\/Down\u003c\\/tt\u003e for infinity as the ranges are always inclusive. Perhaps these constants for float and double could be static final. \u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ctt\u003eTaxonomyFacetSumFloatAssociations\u003c\\/tt\u003e and \u003ctt\u003eTaxonomyFacetSumValueSource\u003c\\/tt\u003e reuse a LOT of code, can they extend one another? perhaps extract a common super for both?\u003c\\/p\u003e\\n\\n\u003cp\u003eIn \u003ctt\u003eTaxonomyFacets\u003c\\/tt\u003e the parents array is saves, I could not see where it\'s being used (and I think it\'s not used even in the older taxonomy-facet implementation). \u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ctt\u003eFacetConfig\u003c\\/tt\u003e confuses me a bit, as it\'s very much aware of the Taxonomy, on another it handles all the kinds of the facets.\u003cbr\\/\u003e\\nPerhaps \u003ctt\u003eFacetConfig.build()\u003c\\/tt\u003e could be split up, allowing each \u003ctt\u003eFacetField.Type\u003c\\/tt\u003e a build() method of its own, rather than every types\' building being done in the same method. It will also bring a common parent class to all FacetField types, which I also like. As such, the taxonomy part, with \u003ctt\u003eprocessFacetFields()\u003c\\/tt\u003e could be moved to its respective Facet implementation.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gilad\\\" id=\\\"commentauthor_13833596_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gilad\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gilad\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Gilad Barkai\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13833596_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T09:12:45+0000\'\u003e27\\/Nov\\/13 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Been away from the issue for some time and it looks like a major progress,  Chapeau \\u00E0 lui \\n\\n  LabelAndValue  &amp;  FacetResult  use  instanceof  checks in their  equals  method - is that a must? \\n\\n  FacetResult  has a member called  childCount  - I think it\'s the number of categories\\/path\\/labels that were encountered. The current jdocs \\\"How many labels were populated under the requested path\\\" reveals implementation (population). Perhaps exchange populated with encountered? \\n\\n  FloatRange  and  DoubleRange  uses  Math.nextUp\\/Down  for infinity as the ranges are always inclusive. Perhaps these constants for float and double could be static final.  \\n\\n  TaxonomyFacetSumFloatAssociations  and  TaxonomyFacetSumValueSource  reuse a LOT of code, can they extend one another? perhaps extract a common super for both? \\n\\n In  TaxonomyFacets  the parents array is saves, I could not see where it\'s being used (and I think it\'s not used even in the older taxonomy-facet implementation).  \\n\\n  FacetConfig  confuses me a bit, as it\'s very much aware of the Taxonomy, on another it handles all the kinds of the facets. \\nPerhaps  FacetConfig.build()  could be split up, allowing each  FacetField.Type  a build() method of its own, rather than every types\' building being done in the same method. It will also bring a common parent class to all FacetField types, which I also like. As such, the taxonomy part, with  processFacetFields()  could be moved to its respective Facet implementation. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13833695\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13833695&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13833695\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13833695_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13833695_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 11:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T11:55:34+0000\'\u003e27\\/Nov\\/13 11:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\\n\u003cblockquote\u003e\u003cp\u003eBeen away from the issue for some time and it looks like a major progress, Chapeau \\u00E0 lui\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThanks Gilad, bit by bit...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eLabelAndValue &amp; FacetResult use instanceof checks in their equals method - is that a must?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHmm, I\'m don\'t know how to implement .equals without an instanceof check?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eFacetResult has a member called childCount - I think it\'s the number of categories\\/path\\/labels that were encountered. The current jdocs \\\"How many labels were populated under the requested path\\\" reveals implementation (population). Perhaps exchange populated with encountered?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eFixed.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eFloatRange and DoubleRange uses Math.nextUp\\/Down for infinity as the ranges are always inclusive. Perhaps these constants for float and double could be static final.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWell, .nextUp and .nextAfter.  But, what constants?  The number is\u003cbr\\/\u003e\\ncomputed differently for each range (from the provided min and mx)...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eTaxonomyFacetSumFloatAssociations and TaxonomyFacetSumValueSource reuse a LOT of code, can they extend one another? perhaps extract a common super for both?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWell, they differ in the source of the value to aggregate (per doc vs\u003cbr\\/\u003e\\nper ord), but then the other methods are nearly the same except for\u003cbr\\/\u003e\\nthe int\\/float difference... in fact, Fast\\/TaxoFacetCounts\u003cbr\\/\u003e\\ngetTopChildren is also the same.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll add a TODO...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eIn TaxonomyFacets the parents array is saves, I could not see where it\'s being used (and I think it\'s not used even in the older taxonomy-facet implementation).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOoh, good catch: I removed it.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eFacetConfig confuses me a bit, as it\'s very much aware of the Taxonomy, on another it handles all the kinds of the facets.\u003cbr\\/\u003e\\nPerhaps FacetConfig.build() could be split up, allowing each FacetField.Type a build() method of its own, rather than every types\' building being done in the same method. It will also bring a common parent class to all FacetField types, which I also like. As such, the taxonomy part, with processFacetFields() could be moved to its respective Facet implementation.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI\'m on the fence on whether FacetsConfig should hold the\u003cbr\\/\u003e\\ntaxonomyWriter, vs you must pass it to the build method ...\u003c\\/p\u003e\\n\\n\u003cp\u003eI like the idea of moving the build logic into each FacetField impl,\u003cbr\\/\u003e\\nbut I want to keep it simple for the app (i.e. the app should not have\u003cbr\\/\u003e\\nto invoke N build methods).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13833695_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13833695_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 11:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T11:55:34+0000\'\u003e27\\/Nov\\/13 11:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                   \\n  Been away from the issue for some time and it looks like a major progress, Chapeau \\u00E0 lui  \\n\\n Thanks Gilad, bit by bit... \\n\\n  LabelAndValue &amp; FacetResult use instanceof checks in their equals method - is that a must?  \\n\\n Hmm, I\'m don\'t know how to implement .equals without an instanceof check? \\n\\n  FacetResult has a member called childCount - I think it\'s the number of categories\\/path\\/labels that were encountered. The current jdocs \\\"How many labels were populated under the requested path\\\" reveals implementation (population). Perhaps exchange populated with encountered?  \\n\\n Fixed. \\n\\n  FloatRange and DoubleRange uses Math.nextUp\\/Down for infinity as the ranges are always inclusive. Perhaps these constants for float and double could be static final.  \\n\\n Well, .nextUp and .nextAfter.  But, what constants?  The number is \\ncomputed differently for each range (from the provided min and mx)... \\n\\n  TaxonomyFacetSumFloatAssociations and TaxonomyFacetSumValueSource reuse a LOT of code, can they extend one another? perhaps extract a common super for both?  \\n\\n Well, they differ in the source of the value to aggregate (per doc vs \\nper ord), but then the other methods are nearly the same except for \\nthe int\\/float difference... in fact, Fast\\/TaxoFacetCounts \\ngetTopChildren is also the same. \\n\\n I\'ll add a TODO... \\n\\n  In TaxonomyFacets the parents array is saves, I could not see where it\'s being used (and I think it\'s not used even in the older taxonomy-facet implementation).  \\n\\n Ooh, good catch: I removed it. \\n\\n \\n FacetConfig confuses me a bit, as it\'s very much aware of the Taxonomy, on another it handles all the kinds of the facets. \\nPerhaps FacetConfig.build() could be split up, allowing each FacetField.Type a build() method of its own, rather than every types\' building being done in the same method. It will also bring a common parent class to all FacetField types, which I also like. As such, the taxonomy part, with processFacetFields() could be moved to its respective Facet implementation.  \\n\\n I\'m on the fence on whether FacetsConfig should hold the \\ntaxonomyWriter, vs you must pass it to the build method ... \\n\\n I like the idea of moving the build logic into each FacetField impl, \\nbut I want to keep it simple for the app (i.e. the app should not have \\nto invoke N build methods).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13833711\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13833711&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13833711\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13833711_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13833711_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 12:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T12:07:32+0000\'\u003e27\\/Nov\\/13 12:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1546008 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1546008\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1546008\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: Gilad\'s feedback, improve javadocs\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13833711_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13833711_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 12:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T12:07:32+0000\'\u003e27\\/Nov\\/13 12:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1546008 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1546008  ] \\n\\n   LUCENE-5339  : Gilad\'s feedback, improve javadocs              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13833923\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13833923&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13833923\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13833923_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13833923_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 16:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T16:34:40+0000\'\u003e27\\/Nov\\/13 16:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1546097 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1546097\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1546097\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: factor out base classes for int\\/float taxonomy aggregates\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13833923_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13833923_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 16:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T16:34:40+0000\'\u003e27\\/Nov\\/13 16:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1546097 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1546097  ] \\n\\n   LUCENE-5339  : factor out base classes for int\\/float taxonomy aggregates              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13833975\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13833975&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13833975\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13833975_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13833975_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T17:32:43+0000\'\u003e27\\/Nov\\/13 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1546129 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1546129\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1546129\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: address some nocommits\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13833975_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13833975_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T17:32:43+0000\'\u003e27\\/Nov\\/13 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1546129 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1546129  ] \\n\\n   LUCENE-5339  : address some nocommits              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13834068\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13834068&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13834068\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13834068_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13834068_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 19:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T19:35:23+0000\'\u003e27\\/Nov\\/13 19:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1546167 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1546167\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1546167\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: nocommits\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13834068_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13834068_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/13 19:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-27T19:35:23+0000\'\u003e27\\/Nov\\/13 19:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1546167 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1546167  ] \\n\\n   LUCENE-5339  : nocommits              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13835549\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13835549&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13835549\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13835549_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13835549_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Nov\\/13 21:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-29T21:49:15+0000\'\u003e29\\/Nov\\/13 21:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1546653 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1546653\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1546653\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: fix some nocommits; move taxoWriter out of FacetsConfig; move search + collect utility methods to FacetsCollector\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13835549_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13835549_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Nov\\/13 21:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-29T21:49:15+0000\'\u003e29\\/Nov\\/13 21:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1546653 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1546653  ] \\n\\n   LUCENE-5339  : fix some nocommits; move taxoWriter out of FacetsConfig; move search + collect utility methods to FacetsCollector              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13837086\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13837086&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13837086\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13837086_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13837086_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/13 23:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-02T23:44:14+0000\'\u003e02\\/Dec\\/13 23:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1547241 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1547241\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1547241\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: nocommits, javadocs, tests, range drill downs\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13837086_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13837086_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/13 23:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-02T23:44:14+0000\'\u003e02\\/Dec\\/13 23:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1547241 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1547241  ] \\n\\n   LUCENE-5339  : nocommits, javadocs, tests, range drill downs              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13837993\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13837993&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13837993\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13837993_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13837993_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/13 18:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-03T18:22:15+0000\'\u003e03\\/Dec\\/13 18:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1547511 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1547511\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1547511\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: small opto for range facets, and factor out base class; put longHashCode back\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13837993_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13837993_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/13 18:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-03T18:22:15+0000\'\u003e03\\/Dec\\/13 18:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1547511 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1547511  ] \\n\\n   LUCENE-5339  : small opto for range facets, and factor out base class; put longHashCode back              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13852428\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13852428&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13852428\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13852428_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13852428_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Dec\\/13 01:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-19T01:07:45+0000\'\u003e19\\/Dec\\/13 01:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1552197 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1552197\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1552197\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: address remaining nocommits\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13852428_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13852428_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Dec\\/13 01:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-19T01:07:45+0000\'\u003e19\\/Dec\\/13 01:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1552197 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1552197  ] \\n\\n   LUCENE-5339  : address remaining nocommits              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13853069\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13853069&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13853069\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13853069_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13853069_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Dec\\/13 17:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-19T17:48:50+0000\'\u003e19\\/Dec\\/13 17:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1552377 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1552377\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1552377\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: merge trunk\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13853069_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13853069_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Dec\\/13 17:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-19T17:48:50+0000\'\u003e19\\/Dec\\/13 17:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1552377 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1552377  ] \\n\\n   LUCENE-5339  : merge trunk              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13853123\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13853123&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13853123\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13853123_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13853123_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Dec\\/13 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-19T18:35:56+0000\'\u003e19\\/Dec\\/13 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think this branch is nearly ready.  I\'m attaching the current diffs vs trunk.\u003c\\/p\u003e\\n\\n\u003cp\u003eForbidden APIs is still angry (I enabled method level document linting for the facets module), and I need to get \\\"ant precommit\\\" happy, but I think it\'s close.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis also includes the fixes for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5371\\\" title=\\\"Range faceting should use O(log(N)) search per hit\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5371\\\"\u003e\u003cdel\u003eLUCENE-5371\u003c\\/del\u003e\u003c\\/a\u003e (use segment trees for range faceting).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13853123_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13853123_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Dec\\/13 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-19T18:35:56+0000\'\u003e19\\/Dec\\/13 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think this branch is nearly ready.  I\'m attaching the current diffs vs trunk. \\n\\n Forbidden APIs is still angry (I enabled method level document linting for the facets module), and I need to get \\\"ant precommit\\\" happy, but I think it\'s close. \\n\\n This also includes the fixes for   LUCENE-5371   (use segment trees for range faceting).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13856535\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13856535&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13856535\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13856535_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13856535_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/13 07:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-25T07:11:15+0000\'\u003e25\\/Dec\\/13 07:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFew comments about package organization and names:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eCan we move all the taxonomy stuff under o.a.l.facet.taxonomy?\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eInside create *.associations and put all the associations stuff there (*FacetField, *Facets)\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eCan we move all the SortedSet stuff under o.a.l.facet.sortedset?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eDo you think we need o.a.l.facet.range for all the range collecting classes? It seems we have now more than before.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eI think we can remove FacetPackage.java - it was needed in the past because o.a.l.facet had no classes.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eIf you agree with moving packages, then we need to do the same for tests too.\u003c\\/p\u003e\\n\\n\u003cp\u003eI haven\'t fully reviewed the branch yet, I plan to though it may take me 1-2 weeks to finish a current project with a tight deadline. If you don\'t want to wait that\'s fine, we can open follow-up issues later.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13856535_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13856535_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/13 07:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-25T07:11:15+0000\'\u003e25\\/Dec\\/13 07:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Few comments about package organization and names: \\n\\n \\n\\t Can we move all the taxonomy stuff under o.a.l.facet.taxonomy?\\n\\t \\n\\t\\t Inside create *.associations and put all the associations stuff there (*FacetField, *Facets) \\n\\t \\n\\t \\n \\n\\n\\n \\n\\t Can we move all the SortedSet stuff under o.a.l.facet.sortedset? \\n \\n\\n\\n \\n\\t Do you think we need o.a.l.facet.range for all the range collecting classes? It seems we have now more than before. \\n \\n\\n\\n \\n\\t I think we can remove FacetPackage.java - it was needed in the past because o.a.l.facet had no classes. \\n \\n\\n\\n If you agree with moving packages, then we need to do the same for tests too. \\n\\n I haven\'t fully reviewed the branch yet, I plan to though it may take me 1-2 weeks to finish a current project with a tight deadline. If you don\'t want to wait that\'s fine, we can open follow-up issues later.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13857995\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13857995&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13857995\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13857995_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13857995_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/13 10:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-28T10:33:07+0000\'\u003e28\\/Dec\\/13 10:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Shai.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'d rather not add the sub-package hierarchy here; these sub-packages would only have a few classes and I think that\'s overkill?  I think having so many sub-packages is also intimidating on first impression.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI think we can remove FacetPackage.java - it was needed in the past because o.a.l.facet had no classes.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAhh, OK, I\'ll remove it.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI haven\'t fully reviewed the branch yet, I plan to though it may take me 1-2 weeks to finish a current project with a tight deadline. If you don\'t want to wait that\'s fine, we can open follow-up issues later.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOK, I\'ll likely commit this early next week ... we can iterate after that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13857995_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13857995_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/13 10:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-28T10:33:07+0000\'\u003e28\\/Dec\\/13 10:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Shai. \\n\\n I\'d rather not add the sub-package hierarchy here; these sub-packages would only have a few classes and I think that\'s overkill?  I think having so many sub-packages is also intimidating on first impression. \\n\\n  I think we can remove FacetPackage.java - it was needed in the past because o.a.l.facet had no classes.  \\n\\n Ahh, OK, I\'ll remove it. \\n\\n  I haven\'t fully reviewed the branch yet, I plan to though it may take me 1-2 weeks to finish a current project with a tight deadline. If you don\'t want to wait that\'s fine, we can open follow-up issues later.  \\n\\n OK, I\'ll likely commit this early next week ... we can iterate after that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13858276\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13858276&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13858276\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13858276_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13858276_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/13 07:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-29T07:46:51+0000\'\u003e29\\/Dec\\/13 07:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shai Erera - 29\\/Dec\\/13 07:48\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt\'s just that we have &#42;.facet.taxonomy package, yet many taxonomy related classes are outside it. I prefer to have a more organized package hierarchy which groups classes together, than having them in an arbitrary &#42;.facet package. For instance, the &#42;.facet package alone contains 40 classes, yet the \\\"suggest\\\" package contains a total of 28 classes, that are divided into logical packages (&#42;.analyzing, &#42;.fst, &#42;.tst, &#42;.jaspell and &#42;.suggest itself). What\'s the benefit of dumping all the classes in one package, when they don\'t share any common code? If we have a &#42;.taxonomy, &#42;.sortedset and &#42;.range, you can at least know where to look for if you want to e.g. facet by taxonomy or sortedset. I don\'t know why you think packages are intimidating, they are meant to organize the code, and help users find related stuff. I did a quick count and compare:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eSuggest module\'s packages contain 6 classes under &#42;.analyzing and &#42;.fst (each), 2 classes under &#42;.jaspell and 3 classes under &#42;.tst.\u003c\\/li\u003e\\n\\t\u003cli\u003eFacet module could contain 6 classes under &#42;.range, 3 classes under &#42;.sortedset and 9 classes under &#42;.taxonomy (besides the ones that are already there).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThe two modules are similar IMO, just like you have several methods for \\\"suggesting\\\", you have several methods for \\\"faceting\\\"...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13858276_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13858276_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/13 07:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-29T07:46:51+0000\'\u003e29\\/Dec\\/13 07:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shai Erera - 29\\/Dec\\/13 07:48\\\"\u003eedited\u003c\\/span\u003e                   It\'s just that we have &#42;.facet.taxonomy package, yet many taxonomy related classes are outside it. I prefer to have a more organized package hierarchy which groups classes together, than having them in an arbitrary &#42;.facet package. For instance, the &#42;.facet package alone contains 40 classes, yet the \\\"suggest\\\" package contains a total of 28 classes, that are divided into logical packages (&#42;.analyzing, &#42;.fst, &#42;.tst, &#42;.jaspell and &#42;.suggest itself). What\'s the benefit of dumping all the classes in one package, when they don\'t share any common code? If we have a &#42;.taxonomy, &#42;.sortedset and &#42;.range, you can at least know where to look for if you want to e.g. facet by taxonomy or sortedset. I don\'t know why you think packages are intimidating, they are meant to organize the code, and help users find related stuff. I did a quick count and compare: \\n\\n \\n\\t Suggest module\'s packages contain 6 classes under &#42;.analyzing and &#42;.fst (each), 2 classes under &#42;.jaspell and 3 classes under &#42;.tst. \\n\\t Facet module could contain 6 classes under &#42;.range, 3 classes under &#42;.sortedset and 9 classes under &#42;.taxonomy (besides the ones that are already there). \\n \\n\\n\\n The two modules are similar IMO, just like you have several methods for \\\"suggesting\\\", you have several methods for \\\"faceting\\\"...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13858279\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13858279&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13858279\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13858279_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13858279_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/13 07:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-29T07:58:13+0000\'\u003e29\\/Dec\\/13 07:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMaybe one crazy idea is to look at the JDK apis for inspiration.\u003c\\/p\u003e\\n\\n\u003cp\u003eSometimes the separate packages help, sometimes they hurt. Look at codecs\\/ for example:\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eit helps from an organization perspective, since we have quite a few of them, and its a super-expert thing where users by definition are probably looking at the source code anyway.\u003c\\/li\u003e\\n\\t\u003cli\u003eit hurts that we have a bunch of classes exposed (in both o.a.l.index and also o.a.l.codecs). This makes the javadocs overwhelming.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eFor the faceting module, I don\'t think we should expect users are looking at the source code, at the same time this is an open source project so we should also care how its organized.\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t have an opinion either way: I\'m just going to note that one big difference in the JDK apis (since i consider them very well done), is that they have a concept of \\\"internal packages\\\" that they hide from javadocs and so on, a way of getting the best of both worlds and keep things reasonably organized while also providing a minimal surface area for the public api.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m not trying to promote that here, its just interesting.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13858279_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13858279_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/13 07:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-29T07:58:13+0000\'\u003e29\\/Dec\\/13 07:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Maybe one crazy idea is to look at the JDK apis for inspiration. \\n\\n Sometimes the separate packages help, sometimes they hurt. Look at codecs\\/ for example: \\n \\n\\t it helps from an organization perspective, since we have quite a few of them, and its a super-expert thing where users by definition are probably looking at the source code anyway. \\n\\t it hurts that we have a bunch of classes exposed (in both o.a.l.index and also o.a.l.codecs). This makes the javadocs overwhelming. \\n \\n\\n\\n For the faceting module, I don\'t think we should expect users are looking at the source code, at the same time this is an open source project so we should also care how its organized. \\n\\n I don\'t have an opinion either way: I\'m just going to note that one big difference in the JDK apis (since i consider them very well done), is that they have a concept of \\\"internal packages\\\" that they hide from javadocs and so on, a way of getting the best of both worlds and keep things reasonably organized while also providing a minimal surface area for the public api. \\n\\n I\'m not trying to promote that here, its just interesting.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13858332\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13858332&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13858332\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13858332_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13858332_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/13 12:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-29T12:49:42+0000\'\u003e29\\/Dec\\/13 12:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK I agree it would be good to make sub-packages; the range impls already have 6 classes, which is non-trivial, and if we add further facet methods over time (e.g. there\'s an issue open for the \\\"enum\\\" method), then the single-package will be more and more awkward.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13858332_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13858332_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Dec\\/13 12:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-29T12:49:42+0000\'\u003e29\\/Dec\\/13 12:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK I agree it would be good to make sub-packages; the range impls already have 6 classes, which is non-trivial, and if we add further facet methods over time (e.g. there\'s an issue open for the \\\"enum\\\" method), then the single-package will be more and more awkward.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13859373\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13859373&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13859373\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13859373_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13859373_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/13 06:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-31T06:50:57+0000\'\u003e31\\/Dec\\/13 06:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1554372 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\" class=\\\"user-hover\\\" rel=\\\"shaie\\\"\u003eShai Erera\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1554372\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1554372\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: handle warnings and javadoc errors\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13859373_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13859373_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/13 06:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-31T06:50:57+0000\'\u003e31\\/Dec\\/13 06:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1554372 from  Shai Erera  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1554372  ] \\n\\n   LUCENE-5339  : handle warnings and javadoc errors              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13859393\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13859393&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13859393\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13859393_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13859393_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/13 07:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-31T07:33:55+0000\'\u003e31\\/Dec\\/13 07:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1554379 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\" class=\\\"user-hover\\\" rel=\\\"shaie\\\"\u003eShai Erera\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1554379\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1554379\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: organize packages\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13859393_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13859393_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/13 07:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-31T07:33:55+0000\'\u003e31\\/Dec\\/13 07:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1554379 from  Shai Erera  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1554379  ] \\n\\n   LUCENE-5339  : organize packages              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13859394\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13859394&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13859394\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13859394_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13859394_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/13 07:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-31T07:37:01+0000\'\u003e31\\/Dec\\/13 07:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted the packages changes.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13859394_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13859394_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/13 07:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-31T07:37:01+0000\'\u003e31\\/Dec\\/13 07:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed the packages changes.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13859977\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13859977&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13859977\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13859977_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13859977_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/14 00:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-02T00:23:38+0000\'\u003e02\\/Jan\\/14 00:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1554710 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1554710\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1554710\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: javadocs\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13859977_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13859977_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jan\\/14 00:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-02T00:23:38+0000\'\u003e02\\/Jan\\/14 00:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1554710 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1554710  ] \\n\\n   LUCENE-5339  : javadocs              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862269\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862269&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862269\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862269_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862269_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/14 11:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-04T11:19:39+0000\'\u003e04\\/Jan\\/14 11:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1555338 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1555338\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1555338\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5371\\\" title=\\\"Range faceting should use O(log(N)) search per hit\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5371\\\"\u003e\u003cdel\u003eLUCENE-5371\u003c\\/del\u003e\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: speed up range faceting from O(N) per hit to O(log(N)) using segment trees; simplify facet APIs\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862269_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862269_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/14 11:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-04T11:19:39+0000\'\u003e04\\/Jan\\/14 11:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1555338 from  Michael McCandless  in branch \'dev\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1555338  ] \\n\\n   LUCENE-5371  ,   LUCENE-5339  : speed up range faceting from O(N) per hit to O(log(N)) using segment trees; simplify facet APIs              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862292\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862292&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862292\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862292_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862292_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/14 12:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-04T12:34:10+0000\'\u003e04\\/Jan\\/14 12:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1555342 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/branch_4x\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1555342\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1555342\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5371\\\" title=\\\"Range faceting should use O(log(N)) search per hit\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5371\\\"\u003e\u003cdel\u003eLUCENE-5371\u003c\\/del\u003e\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: speed up range faceting from O(N) per hit to O(log(N)) using segment trees; simplify facet APIs\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862292_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862292_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/14 12:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-04T12:34:10+0000\'\u003e04\\/Jan\\/14 12:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1555342 from  Michael McCandless  in branch \'dev\\/branches\\/branch_4x\' \\n[  https:\\/\\/svn.apache.org\\/r1555342  ] \\n\\n   LUCENE-5371  ,   LUCENE-5339  : speed up range faceting from O(N) per hit to O(log(N)) using segment trees; simplify facet APIs              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862452\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862452&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862452\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862452_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862452_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 00:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T00:23:05+0000\'\u003e05\\/Jan\\/14 00:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1555438 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1555438\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1555438\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: PrintTaxonomyStats is allowed to use System.out\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862452_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862452_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 00:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T00:23:05+0000\'\u003e05\\/Jan\\/14 00:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1555438 from  Michael McCandless  in branch \'dev\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1555438  ] \\n\\n   LUCENE-5339  : PrintTaxonomyStats is allowed to use System.out              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862453\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862453&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862453\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862453_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862453_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 00:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T00:23:32+0000\'\u003e05\\/Jan\\/14 00:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1555439 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/branch_4x\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1555439\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1555439\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: PrintTaxonomyStats is allowed to use System.out\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862453_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862453_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 00:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T00:23:32+0000\'\u003e05\\/Jan\\/14 00:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1555439 from  Michael McCandless  in branch \'dev\\/branches\\/branch_4x\' \\n[  https:\\/\\/svn.apache.org\\/r1555439  ] \\n\\n   LUCENE-5339  : PrintTaxonomyStats is allowed to use System.out              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862499\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862499&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862499\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13862499_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862499_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 06:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T06:40:42+0000\'\u003e05\\/Jan\\/14 06:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Mike! Do we need to delete the branch?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shaie\\\" id=\\\"commentauthor_13862499_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shaie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shaie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shai Erera\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862499_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 06:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T06:40:42+0000\'\u003e05\\/Jan\\/14 06:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Mike! Do we need to delete the branch?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862608\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862608&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862608\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13862608_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862608_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 17:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T17:50:25+0000\'\u003e05\\/Jan\\/14 17:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eDo we need to delete the branch?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI\'ll delete it...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13862608_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862608_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 17:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T17:50:25+0000\'\u003e05\\/Jan\\/14 17:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Do we need to delete the branch?  \\n\\n I\'ll delete it...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862610\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862610&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862610\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862610_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862610_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 17:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T17:52:05+0000\'\u003e05\\/Jan\\/14 17:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1555590 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene5339\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1555590\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1555590\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: remove now dead branch (it\'s merged\\/committed to trunk)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862610_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862610_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 17:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T17:52:05+0000\'\u003e05\\/Jan\\/14 17:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1555590 from  Michael McCandless  in branch \'dev\\/branches\\/lucene5339\' \\n[  https:\\/\\/svn.apache.org\\/r1555590  ] \\n\\n   LUCENE-5339  : remove now dead branch (it\'s merged\\/committed to trunk)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862613\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862613&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862613\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862613_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862613_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 18:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T18:03:03+0000\'\u003e05\\/Jan\\/14 18:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1555592 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1555592\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1555592\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: also move OrdinalReaders under taxonomy\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862613_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862613_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 18:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T18:03:03+0000\'\u003e05\\/Jan\\/14 18:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1555592 from  Michael McCandless  in branch \'dev\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1555592  ] \\n\\n   LUCENE-5339  : also move OrdinalReaders under taxonomy              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862614\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862614&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862614\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862614_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862614_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 18:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T18:06:51+0000\'\u003e05\\/Jan\\/14 18:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1555595 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/branch_4x\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1555595\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1555595\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: also move OrdinalReaders under taxonomy\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862614_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862614_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 18:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T18:06:51+0000\'\u003e05\\/Jan\\/14 18:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1555595 from  Michael McCandless  in branch \'dev\\/branches\\/branch_4x\' \\n[  https:\\/\\/svn.apache.org\\/r1555595  ] \\n\\n   LUCENE-5339  : also move OrdinalReaders under taxonomy              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862650\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862650&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862650\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862650_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862650_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 20:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T20:52:46+0000\'\u003e05\\/Jan\\/14 20:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1555627 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1555627\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1555627\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: also catch invalid components in *FacetField\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862650_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862650_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 20:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T20:52:46+0000\'\u003e05\\/Jan\\/14 20:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1555627 from  Michael McCandless  in branch \'dev\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1555627  ] \\n\\n   LUCENE-5339  : also catch invalid components in *FacetField              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13862651\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-5339?focusedCommentId=13862651&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13862651\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862651_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862651_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 20:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T20:53:54+0000\'\u003e05\\/Jan\\/14 20:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1555628 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\" class=\\\"user-hover\\\" rel=\\\"mikemccand\\\"\u003eMichael McCandless\u003c\\/a\u003e in branch \'dev\\/branches\\/branch_4x\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1555628\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1555628\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-5339\\\" title=\\\"Simplify the facet module APIs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-5339\\\"\u003e\u003cdel\u003eLUCENE-5339\u003c\\/del\u003e\u003c\\/a\u003e: also catch invalid components in *FacetField\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13862651_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13862651_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/14 20:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-05T20:53:54+0000\'\u003e05\\/Jan\\/14 20:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1555628 from  Michael McCandless  in branch \'dev\\/branches\\/branch_4x\' \\n[  https:\\/\\/svn.apache.org\\/r1555628  ] \\n\\n   LUCENE-5339  : also catch invalid components in *FacetField              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310110";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310110&amp;avatarId=10061\\\" alt=\\\"Lucene - Core\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\"\u003eLucene - Core\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1516204897986"> 
    <input type="hidden" title="jira.request.server.time" value="712"> 
    <input type="hidden" title="jira.request.id" value="961x7776868x10"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="3"> 
    <input type="hidden" title="db.reads.time.in.ms" value="67"> 
    <input type="hidden" title="db.conns.time.in.ms" value="74"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 961x7776868x10
	          REQUEST TIMESTAMP : [17/Jan/2018:16:01:37 +0000]
	               REQUEST TIME : 0.7120
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 3

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=26, elapsedTotal=67948736, elapsedMin=544379, elapsedMax=28247030, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=30, elapsedTotal=74776175, elapsedMin=497797, elapsedMax=28770119, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>