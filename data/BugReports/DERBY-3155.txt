<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|bb103ca2f2fde8c0472998c6ecf21ccedddd28c3|lout"> 
  <link rel="shortcut icon" href="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"sd.customer.profile.multi.languages\":true,\"sd.customer.portal.transitions\":true,\"sd.customer.portal.transitions.config\":true,\"sd.custom.email.stripping.rules\":false,\"sd.sla.lucene.issue.id.callback.performance\":true,\"sd.new.settings.sidebar.location\":true,\"sd.workload.report.paginator\":true,\"sd.experimental.portal.search.algorithm.default.1\":false,\"sd.customer.portal.help.center.agent.announcement\":true,\"sd.sla.improved.rendering\":false,\"sd.experimental.portal.search.algorithm.default.2\":false,\"sd.customer.feedback.validate.reporter.on.token\":true,\"sd.custom.email.notifications.utf8.csat.star\":true,\"sd.who.create.customers.by.email.setting\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.renderer.consider.variable.format\":true,\"sd.stats.event.tracking\":true,\"sd.password.helper.dialog\":true,\"sd.canned.responses\":false,\"sd.portal.help.center.customer.signup.secondary.email\":true,\"sd.custom.email.notifications.manage.language\":true,\"sd.use.search.by.permissions\":true,\"sd.slavalue.record.updated.date\":false,\"sd.report.custom.date.range\":false,\"sd.kb.article.helpfulness.report\":false,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"sd.custom.email.notifications.styling\":true,\"sd.workinghours.new.page.bulldog.1\":false,\"sd.customer.portal.two.step.login\":false,\"sd.automation.psmq.async.executor\":true,\"sd.customer.org.list.page.lazy.search\":true,\"sd.approval.requested.when.handler\":true,\"sd.request.type.field.rest.api.filtering.bugfix\":true,\"sd.automation.then.action.auto.answer.approval\":true,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"sla.will.only.be.paused.if.they.are.already.started\":true,\"sd.kb.comment.share.stats.collection\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"sd.customer.orgs.group.participants\":true,\"sd.portal.help.center.customer.signup\":true,\"sd.sla.agent.jql.security.restricted\":true,\"sd.test.feature.flag.x\":true,\"sd.test.feature.flag.y\":false,\"sd.cluster.safe.mail.channel.shutdown\":true,\"sd.email.channel.folders\":false,\"sd.email.analytics.open\":false,\"sd.kb.project.creation.create.link.space\":true,\"sd.workinghours.new.page\":false,\"sd.confluence.anonymous.permission.fix\":true,\"com.atlassian.jira.issuetable.draggable\":true,\"sd.customer.portal.project.agent.announcement\":true,\"sd.automation.audit.log\":true,\"jira.jql.suggestrecentfields\":false,\"sd.canned.responses.check.index.startup\":false,\"sd.new.project.templates\":true,\"sd.custom.email.notifications.custom.rules.simple.ui\":false,\"sd.custom.email.notifications.cut.over\":true,\"sd.dismiss.all.misconfiguration.warnings.setting\":true,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"sd.sla.configurations.export\":true,\"sd.canned.responses.variable.substitution\":true,\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"sd.customer.portal.prioties.per.project.fix\":true,\"jira.instrumentation.laas\":false,\"sd.kb.self.service.report\":false,\"sla.improved.request.handling\":true,\"sd.no.schedule.async.upgrade.tasks\":true,\"sd.kb.primary.nav\":true,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"sd.kb.issueview.panel.phase2\":true,\"sd.email.outsider.comments\":true,\"jira.create.linked.issue\":true,\"sd.kb.issueview.panel\":true,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"sd.approvals.light.weight\":false,\"sd.automation.then.webhook\":true,\"sd.respect.inline.edit.issue.off\":true,\"jira.jql.smartautoselectfirst\":false,\"sd.global.portal.search.atlassian.only.tracking\":false,\"sd.automation.if.condition.comment.primary.action\":true,\"jira.priorities.per.project\":true,\"sd.inline.noformat.renderer\":true,\"sd.customer.request.type.create.edit.screens\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/png,image/vnd.wap.wbmp,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.servicedesk.servicedesk-canned-responses-plugin:canned-responses-data-provider.data"]="{\"substitutionVariables\":{\"issue.summary\":\"Issue summary\",\"issue.description\":\"Issue description\",\"issue.key\":\"Issue key\",\"issue.reporter.name\":\"Issue reporter\",\"issue.resolution\":\"Issue resolution\",\"request.url\":\"Request URL\",\"request.status\":\"Request status\"}}";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-help-links.help-links"]="{\"help\":{\"email.settings\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"managing.queues\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+queues+for+your+team\",\"email.setup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"request.settings.help.bubble\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\",\"email.settings.suitablerequest\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email#Receivingrequestsbyemail-suitablerequest\",\"sla.import.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Importing+SLAs\",\"documentation.home\":\"https://docs.atlassian.com/jira/jsd-docs-039/JIRA+Service+Desk+Documentation\",\"default\":\"https://docs.atlassian.com/jira/jsd-docs-039/\",\"create.space.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base#serving-customers-with-a-knowledge-base-createpermission\",\"email.settings.troubleshooting\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+the+email+channel\",\"admin.notifications.config\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+service+desk+notifications\",\"troubleshoot.requesttype\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+request+types\",\"approvals.configuration\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+JIRA+Service+Desk+approvals\",\"setting.up.reports\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+service+desk+reports\",\"public.signup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+public+signup\",\"knowledge.base\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base\",\"resolve.permission.scheme.errors\":\"https://docs.atlassian.com/jira/jsd-docs-039/Resolving+permission+scheme+errors\",\"getting.started\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+with+JIRA+Service+Desk\",\"getting.started.agent\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+for+service+desk+agents\",\"invite.customers\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\"},\"kb\":{\"default\":\"https://confluence.atlassian.com/display/SDKB/\",\"troubleshooting.user.management.issues\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\",\"legacytransition\":\"https://confluence.atlassian.com/display/SDKB/Replacing+legacy+automatic+transitions+with+automation+rules\",\"umtroubleshoot\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\"}}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-base-url.base-url"]="\"https://issues.apache.org/jira\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"c86b0700477f89\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/1a6b21131945f6f49ff48336b49ca3fe-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/d8484c9183f546511a8e336a8779bcd9-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d3b35d835f8f46fc3b53bb4db7f85158-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/71d42e74136d842a3ef4d5d136484843-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/95a4826c265852f4904f1e0e7300df68-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/944bb39eced1b35cfc7194aa02eb5a5a/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/5a8f0f8b8aa8f96a4f0f7e9e248d62f3-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-3155"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-3155] Support for SQL:2003 MERGE statement - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-3155] Support for SQL:2003 MERGE statement - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-3155">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-3155" href="/jira/browse/DERBY-3155" id="key-val" rel="12381347">DERBY-3155</a></li>
                </ol>
                <h1 id="summary-val">Support for SQL:2003 MERGE statement</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-3155"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-3155/DERBY-3155.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-3155/DERBY-3155.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-3155/DERBY-3155.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-3155/DERBY-3155.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"> Improvement </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.11.1.1" title="10.11.1.1 First release on the 10.11 branch">10.11.1.1</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <ul class="labels" id="labels-12381347-value"> 
                     <li><a class="lozenge" href="/jira/issues/?jql=labels+%3D+derby_triage10_10" title="derby_triage10_10"><span>derby_triage10_10</span></a></li> 
                    </ul> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310050" class="item"> 
                     <div class="wrap"> 
                      <strong title="Urgency" class="name">Urgency:</strong> 
                      <div id="customfield_12310050-val" class="value type-select" data-fieldtype="select" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        Normal 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>Patch Available</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>A relatively common piece of logic in a database application is to check for a row's existence and then either update or insert depending on its existence.</p> 
                  <p>SQL:2003 added a MERGE statement to perform this operation. It looks like this:</p> 
                  <p> MERGE INTO table_name USING table_name ON (condition)<br> WHEN MATCHED THEN UPDATE SET column1 = value1 <span class="error">[, column2 = value2 ...]</span><br> WHEN NOT MATCHED THEN INSERT column1 <span class="error">[, column2 ...]</span> VALUES (value1 <span class="error">[, value2 ...]</span>) </p> 
                  <p>At the moment, the only workaround for this would be to write a stored procedure to do the same operation, or to implement the logic client-side.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-3155?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-3155?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-3155?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-3155?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12599018" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12599018/derby-3155-01-ac-grammar.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-01-ac-grammar.diff:https://issues.apache.org/jira/secure/attachment/12599018/derby-3155-01-ac-grammar.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12599018/derby-3155-01-ac-grammar.diff" title="Latest  20/Aug/13 19:57 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-01-ac-grammar.diff:https://issues.apache.org/jira/secure/attachment/12599018/derby-3155-01-ac-grammar.diff">derby-3155-01-ac-grammar.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-08-20T19:57:46.900Z">20/Aug/13 19:57</time>
                   </dd>
                   <dd class="attachment-size">
                    59 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12603815" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12603815/derby-3155-02-ag-fixParserWarning.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-02-ag-fixParserWarning.diff:https://issues.apache.org/jira/secure/attachment/12603815/derby-3155-02-ag-fixParserWarning.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12603815/derby-3155-02-ag-fixParserWarning.diff" title="Latest  18/Sep/13 12:43 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-02-ag-fixParserWarning.diff:https://issues.apache.org/jira/secure/attachment/12603815/derby-3155-02-ag-fixParserWarning.diff">derby-3155-02-ag-fixParserWarning.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-09-18T12:43:22.517Z">18/Sep/13 12:43</time>
                   </dd>
                   <dd class="attachment-size">
                    0.6 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12606856" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12606856/derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff:https://issues.apache.org/jira/secure/attachment/12606856/derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12606856/derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff" title="Latest  04/Oct/13 18:34 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff:https://issues.apache.org/jira/secure/attachment/12606856/derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff">derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-10-04T18:34:27.350Z">04/Oct/13 18:34</time>
                   </dd>
                   <dd class="attachment-size">
                    37 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12607841" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12607841/derby-3155-03-af-backingStoreHashtableWithRowLocation.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-03-af-backingStoreHashtableWithRowLocation.diff:https://issues.apache.org/jira/secure/attachment/12607841/derby-3155-03-af-backingStoreHashtableWithRowLocation.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12607841/derby-3155-03-af-backingStoreHashtableWithRowLocation.diff" title="Latest  10/Oct/13 17:32 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-03-af-backingStoreHashtableWithRowLocation.diff:https://issues.apache.org/jira/secure/attachment/12607841/derby-3155-03-af-backingStoreHashtableWithRowLocation.diff">derby-3155-03-af-backingStoreHashtableWithRowLocation.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-10-10T17:32:59.729Z">10/Oct/13 17:32</time>
                   </dd>
                   <dd class="attachment-size">
                    47 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12609714" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12609714/derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff:https://issues.apache.org/jira/secure/attachment/12609714/derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12609714/derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff" title="Latest  22/Oct/13 20:00 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff:https://issues.apache.org/jira/secure/attachment/12609714/derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff">derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-10-22T20:00:51.508Z">22/Oct/13 20:00</time>
                   </dd>
                   <dd class="attachment-size">
                    48 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12609734" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12609734/derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff:https://issues.apache.org/jira/secure/attachment/12609734/derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12609734/derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff" title="Latest  22/Oct/13 21:59 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff:https://issues.apache.org/jira/secure/attachment/12609734/derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff">derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-10-22T21:59:59.723Z">22/Oct/13 21:59</time>
                   </dd>
                   <dd class="attachment-size">
                    48 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12609193" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12609193/derby-3155-04-ae-deleteAction.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-04-ae-deleteAction.diff:https://issues.apache.org/jira/secure/attachment/12609193/derby-3155-04-ae-deleteAction.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12609193/derby-3155-04-ae-deleteAction.diff" title="Latest  18/Oct/13 19:28 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-04-ae-deleteAction.diff:https://issues.apache.org/jira/secure/attachment/12609193/derby-3155-04-ae-deleteAction.diff">derby-3155-04-ae-deleteAction.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-10-18T19:28:28.981Z">18/Oct/13 19:28</time>
                   </dd>
                   <dd class="attachment-size">
                    135 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12609886" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12609886/derby-3155-04-af-deleteAction.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-04-af-deleteAction.diff:https://issues.apache.org/jira/secure/attachment/12609886/derby-3155-04-af-deleteAction.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12609886/derby-3155-04-af-deleteAction.diff" title="Latest  23/Oct/13 17:39 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-04-af-deleteAction.diff:https://issues.apache.org/jira/secure/attachment/12609886/derby-3155-04-af-deleteAction.diff">derby-3155-04-af-deleteAction.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-10-23T17:39:14.516Z">23/Oct/13 17:39</time>
                   </dd>
                   <dd class="attachment-size">
                    140 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12610094" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12610094/derby-3155-05-aa-triggerTransitionTableAsTarget.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-05-aa-triggerTransitionTableAsTarget.diff:https://issues.apache.org/jira/secure/attachment/12610094/derby-3155-05-aa-triggerTransitionTableAsTarget.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12610094/derby-3155-05-aa-triggerTransitionTableAsTarget.diff" title="Latest  24/Oct/13 14:56 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-05-aa-triggerTransitionTableAsTarget.diff:https://issues.apache.org/jira/secure/attachment/12610094/derby-3155-05-aa-triggerTransitionTableAsTarget.diff">derby-3155-05-aa-triggerTransitionTableAsTarget.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-10-24T14:56:59.554Z">24/Oct/13 14:56</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12610113" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12610113/derby-3155-06-aa-triggerTransitionTableAsSource.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-06-aa-triggerTransitionTableAsSource.diff:https://issues.apache.org/jira/secure/attachment/12610113/derby-3155-06-aa-triggerTransitionTableAsSource.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12610113/derby-3155-06-aa-triggerTransitionTableAsSource.diff" title="Latest  24/Oct/13 17:14 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-06-aa-triggerTransitionTableAsSource.diff:https://issues.apache.org/jira/secure/attachment/12610113/derby-3155-06-aa-triggerTransitionTableAsSource.diff">derby-3155-06-aa-triggerTransitionTableAsSource.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-10-24T17:14:55.959Z">24/Oct/13 17:14</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12612829" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12612829/derby-3155-07-ad-insertAction.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-07-ad-insertAction.diff:https://issues.apache.org/jira/secure/attachment/12612829/derby-3155-07-ad-insertAction.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12612829/derby-3155-07-ad-insertAction.diff" title="Latest  08/Nov/13 14:41 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-07-ad-insertAction.diff:https://issues.apache.org/jira/secure/attachment/12612829/derby-3155-07-ad-insertAction.diff">derby-3155-07-ad-insertAction.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-11-08T14:41:54.780Z">08/Nov/13 14:41</time>
                   </dd>
                   <dd class="attachment-size">
                    114 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12615364" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12615364/derby-3155-08-ah-updateAction.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-08-ah-updateAction.diff:https://issues.apache.org/jira/secure/attachment/12615364/derby-3155-08-ah-updateAction.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12615364/derby-3155-08-ah-updateAction.diff" title="Latest  22/Nov/13 17:56 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-08-ah-updateAction.diff:https://issues.apache.org/jira/secure/attachment/12615364/derby-3155-08-ah-updateAction.diff">derby-3155-08-ah-updateAction.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-11-22T17:56:44.992Z">22/Nov/13 17:56</time>
                   </dd>
                   <dd class="attachment-size">
                    94 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12616829" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12616829/derby-3155-09-aa-correlationNames.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-09-aa-correlationNames.diff:https://issues.apache.org/jira/secure/attachment/12616829/derby-3155-09-aa-correlationNames.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12616829/derby-3155-09-aa-correlationNames.diff" title="Latest  03/Dec/13 18:38 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-09-aa-correlationNames.diff:https://issues.apache.org/jira/secure/attachment/12616829/derby-3155-09-aa-correlationNames.diff">derby-3155-09-aa-correlationNames.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-12-03T18:38:11.619Z">03/Dec/13 18:38</time>
                   </dd>
                   <dd class="attachment-size">
                    20 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12617203" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12617203/derby-3155-10-aa-correlationNames.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-10-aa-correlationNames.diff:https://issues.apache.org/jira/secure/attachment/12617203/derby-3155-10-aa-correlationNames.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12617203/derby-3155-10-aa-correlationNames.diff" title="Latest  05/Dec/13 18:01 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-10-aa-correlationNames.diff:https://issues.apache.org/jira/secure/attachment/12617203/derby-3155-10-aa-correlationNames.diff">derby-3155-10-aa-correlationNames.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-12-05T18:01:12.708Z">05/Dec/13 18:01</time>
                   </dd>
                   <dd class="attachment-size">
                    19 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12618090" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12618090/derby-3155-11-ab-beforeTriggersCantFireMerge.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-11-ab-beforeTriggersCantFireMerge.diff:https://issues.apache.org/jira/secure/attachment/12618090/derby-3155-11-ab-beforeTriggersCantFireMerge.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12618090/derby-3155-11-ab-beforeTriggersCantFireMerge.diff" title="Latest  10/Dec/13 19:47 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-11-ab-beforeTriggersCantFireMerge.diff:https://issues.apache.org/jira/secure/attachment/12618090/derby-3155-11-ab-beforeTriggersCantFireMerge.diff">derby-3155-11-ab-beforeTriggersCantFireMerge.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-12-10T19:47:08.818Z">10/Dec/13 19:47</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12623431" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12623431/derby-3155-12-aa-canOmitInsertColumnList.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-12-aa-canOmitInsertColumnList.diff:https://issues.apache.org/jira/secure/attachment/12623431/derby-3155-12-aa-canOmitInsertColumnList.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12623431/derby-3155-12-aa-canOmitInsertColumnList.diff" title="Latest  16/Jan/14 18:30 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-12-aa-canOmitInsertColumnList.diff:https://issues.apache.org/jira/secure/attachment/12623431/derby-3155-12-aa-canOmitInsertColumnList.diff">derby-3155-12-aa-canOmitInsertColumnList.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-01-16T18:30:42.547Z">16/Jan/14 18:30</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12623469" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12623469/derby-3155-13-aa-allowSystemAndTempTables.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-13-aa-allowSystemAndTempTables.diff:https://issues.apache.org/jira/secure/attachment/12623469/derby-3155-13-aa-allowSystemAndTempTables.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12623469/derby-3155-13-aa-allowSystemAndTempTables.diff" title="Latest  16/Jan/14 20:44 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-13-aa-allowSystemAndTempTables.diff:https://issues.apache.org/jira/secure/attachment/12623469/derby-3155-13-aa-allowSystemAndTempTables.diff">derby-3155-13-aa-allowSystemAndTempTables.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-01-16T20:44:22.509Z">16/Jan/14 20:44</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12623679" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12623679/derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff:https://issues.apache.org/jira/secure/attachment/12623679/derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12623679/derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff" title="Latest  17/Jan/14 16:53 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff:https://issues.apache.org/jira/secure/attachment/12623679/derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff">derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-01-17T16:53:40.135Z">17/Jan/14 16:53</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12623705" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12623705/derby-3155-15-aa-replumbMergeResultSetCleanup.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-15-aa-replumbMergeResultSetCleanup.diff:https://issues.apache.org/jira/secure/attachment/12623705/derby-3155-15-aa-replumbMergeResultSetCleanup.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12623705/derby-3155-15-aa-replumbMergeResultSetCleanup.diff" title="Latest  17/Jan/14 18:49 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-15-aa-replumbMergeResultSetCleanup.diff:https://issues.apache.org/jira/secure/attachment/12623705/derby-3155-15-aa-replumbMergeResultSetCleanup.diff">derby-3155-15-aa-replumbMergeResultSetCleanup.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-01-17T18:49:11.071Z">17/Jan/14 18:49</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12624151" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12624151/derby-3155-16-aa-treatCurrentRowLocationNodeLikeBaseColumnNode.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-16-aa-treatCurrentRowLocationNodeLikeBaseColumnNode.diff:https://issues.apache.org/jira/secure/attachment/12624151/derby-3155-16-aa-treatCurrentRowLocationNodeLikeBaseColumnNode.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12624151/derby-3155-16-aa-treatCurrentRowLocationNodeLikeBaseColumnNode.diff" title="Latest  21/Jan/14 16:33 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-16-aa-treatCurrentRowLocationNodeLikeBaseColumnNode.diff:https://issues.apache.org/jira/secure/attachment/12624151/derby-3155-16-aa-treatCurrentRowLocationNodeLikeBaseColumnNode.diff">derby-3155-16-aa-treatCurrentRowLocationNodeLikeBaseColumnNode.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-01-21T16:33:38.564Z">21/Jan/14 16:33</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12624381" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12624381/derby-3155-17-aa-serializingRowLocations.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-17-aa-serializingRowLocations.diff:https://issues.apache.org/jira/secure/attachment/12624381/derby-3155-17-aa-serializingRowLocations.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12624381/derby-3155-17-aa-serializingRowLocations.diff" title="Latest  22/Jan/14 18:12 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-17-aa-serializingRowLocations.diff:https://issues.apache.org/jira/secure/attachment/12624381/derby-3155-17-aa-serializingRowLocations.diff">derby-3155-17-aa-serializingRowLocations.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-01-22T18:12:52.041Z">22/Jan/14 18:12</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12624427" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12624427/derby-3155-18-aa-basicView.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-18-aa-basicView.diff:https://issues.apache.org/jira/secure/attachment/12624427/derby-3155-18-aa-basicView.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12624427/derby-3155-18-aa-basicView.diff" title="Latest  22/Jan/14 20:55 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-18-aa-basicView.diff:https://issues.apache.org/jira/secure/attachment/12624427/derby-3155-18-aa-basicView.diff">derby-3155-18-aa-basicView.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-01-22T20:55:56.532Z">22/Jan/14 20:55</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12625099" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12625099/derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff:https://issues.apache.org/jira/secure/attachment/12625099/derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12625099/derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff" title="Latest  24/Jan/14 19:50 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff:https://issues.apache.org/jira/secure/attachment/12625099/derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff">derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-01-24T19:50:27.930Z">24/Jan/14 19:50</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12627153" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12627153/derby-3155-20-aa-reworkColumnMatching.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-20-aa-reworkColumnMatching.diff:https://issues.apache.org/jira/secure/attachment/12627153/derby-3155-20-aa-reworkColumnMatching.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12627153/derby-3155-20-aa-reworkColumnMatching.diff" title="Latest  05/Feb/14 17:02 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-20-aa-reworkColumnMatching.diff:https://issues.apache.org/jira/secure/attachment/12627153/derby-3155-20-aa-reworkColumnMatching.diff">derby-3155-20-aa-reworkColumnMatching.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-05T17:02:40.299Z">05/Feb/14 17:02</time>
                   </dd>
                   <dd class="attachment-size">
                    30 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12627662" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12627662/derby-3155-21-ac-cleanupAndForbidSynonyms.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-21-ac-cleanupAndForbidSynonyms.diff:https://issues.apache.org/jira/secure/attachment/12627662/derby-3155-21-ac-cleanupAndForbidSynonyms.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12627662/derby-3155-21-ac-cleanupAndForbidSynonyms.diff" title="Latest  07/Feb/14 18:15 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-21-ac-cleanupAndForbidSynonyms.diff:https://issues.apache.org/jira/secure/attachment/12627662/derby-3155-21-ac-cleanupAndForbidSynonyms.diff">derby-3155-21-ac-cleanupAndForbidSynonyms.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-07T18:15:02.320Z">07/Feb/14 18:15</time>
                   </dd>
                   <dd class="attachment-size">
                    17 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12627983" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12627983/derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff:https://issues.apache.org/jira/secure/attachment/12627983/derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12627983/derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff" title="Latest  10/Feb/14 13:50 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff:https://issues.apache.org/jira/secure/attachment/12627983/derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff">derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-10T13:50:12.556Z">10/Feb/14 13:50</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12627991" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12627991/derby-3155-23-aa-forbidDerivedColumnLists.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-23-aa-forbidDerivedColumnLists.diff:https://issues.apache.org/jira/secure/attachment/12627991/derby-3155-23-aa-forbidDerivedColumnLists.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12627991/derby-3155-23-aa-forbidDerivedColumnLists.diff" title="Latest  10/Feb/14 15:09 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-23-aa-forbidDerivedColumnLists.diff:https://issues.apache.org/jira/secure/attachment/12627991/derby-3155-23-aa-forbidDerivedColumnLists.diff">derby-3155-23-aa-forbidDerivedColumnLists.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-10T15:09:31.971Z">10/Feb/14 15:09</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12628000" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12628000/derby-3155-24-aa-supportParameters.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-24-aa-supportParameters.diff:https://issues.apache.org/jira/secure/attachment/12628000/derby-3155-24-aa-supportParameters.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12628000/derby-3155-24-aa-supportParameters.diff" title="Latest  10/Feb/14 16:19 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-24-aa-supportParameters.diff:https://issues.apache.org/jira/secure/attachment/12628000/derby-3155-24-aa-supportParameters.diff">derby-3155-24-aa-supportParameters.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-10T16:19:03.732Z">10/Feb/14 16:19</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12628327" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12628327/derby-3155-25-aa-parametersAsInsertValues.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-25-aa-parametersAsInsertValues.diff:https://issues.apache.org/jira/secure/attachment/12628327/derby-3155-25-aa-parametersAsInsertValues.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12628327/derby-3155-25-aa-parametersAsInsertValues.diff" title="Latest  11/Feb/14 20:38 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-25-aa-parametersAsInsertValues.diff:https://issues.apache.org/jira/secure/attachment/12628327/derby-3155-25-aa-parametersAsInsertValues.diff">derby-3155-25-aa-parametersAsInsertValues.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-11T20:38:58.232Z">11/Feb/14 20:38</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12629549" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12629549/derby-3155-26-aa-copyRowLocationForIndexScans.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-26-aa-copyRowLocationForIndexScans.diff:https://issues.apache.org/jira/secure/attachment/12629549/derby-3155-26-aa-copyRowLocationForIndexScans.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12629549/derby-3155-26-aa-copyRowLocationForIndexScans.diff" title="Latest  18/Feb/14 15:45 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-26-aa-copyRowLocationForIndexScans.diff:https://issues.apache.org/jira/secure/attachment/12629549/derby-3155-26-aa-copyRowLocationForIndexScans.diff">derby-3155-26-aa-copyRowLocationForIndexScans.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-18T15:45:28.225Z">18/Feb/14 15:45</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12629617" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12629617/derby-3155-27-aa-adjustMatchingRefinements.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-27-aa-adjustMatchingRefinements.diff:https://issues.apache.org/jira/secure/attachment/12629617/derby-3155-27-aa-adjustMatchingRefinements.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12629617/derby-3155-27-aa-adjustMatchingRefinements.diff" title="Latest  18/Feb/14 20:31 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-27-aa-adjustMatchingRefinements.diff:https://issues.apache.org/jira/secure/attachment/12629617/derby-3155-27-aa-adjustMatchingRefinements.diff">derby-3155-27-aa-adjustMatchingRefinements.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-18T20:31:43.729Z">18/Feb/14 20:31</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12630071" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12630071/derby-3155-28-aa-cardinalityViolations.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-28-aa-cardinalityViolations.diff:https://issues.apache.org/jira/secure/attachment/12630071/derby-3155-28-aa-cardinalityViolations.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12630071/derby-3155-28-aa-cardinalityViolations.diff" title="Latest  20/Feb/14 15:36 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-28-aa-cardinalityViolations.diff:https://issues.apache.org/jira/secure/attachment/12630071/derby-3155-28-aa-cardinalityViolations.diff">derby-3155-28-aa-cardinalityViolations.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-20T15:36:18.886Z">20/Feb/14 15:36</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12630147" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12630147/derby-3155-29-aa-missingSchema.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-29-aa-missingSchema.diff:https://issues.apache.org/jira/secure/attachment/12630147/derby-3155-29-aa-missingSchema.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12630147/derby-3155-29-aa-missingSchema.diff" title="Latest  20/Feb/14 20:55 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-29-aa-missingSchema.diff:https://issues.apache.org/jira/secure/attachment/12630147/derby-3155-29-aa-missingSchema.diff">derby-3155-29-aa-missingSchema.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-20T20:55:16.026Z">20/Feb/14 20:55</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12631002" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12631002/derby-3155-30-ab-moreCorrelationNames.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-30-ab-moreCorrelationNames.diff:https://issues.apache.org/jira/secure/attachment/12631002/derby-3155-30-ab-moreCorrelationNames.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12631002/derby-3155-30-ab-moreCorrelationNames.diff" title="Latest  25/Feb/14 18:52 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-30-ab-moreCorrelationNames.diff:https://issues.apache.org/jira/secure/attachment/12631002/derby-3155-30-ab-moreCorrelationNames.diff">derby-3155-30-ab-moreCorrelationNames.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-25T18:52:25.188Z">25/Feb/14 18:52</time>
                   </dd>
                   <dd class="attachment-size">
                    34 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12631551" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12631551/derby-3155-31-aa-deletePrivs.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-31-aa-deletePrivs.diff:https://issues.apache.org/jira/secure/attachment/12631551/derby-3155-31-aa-deletePrivs.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12631551/derby-3155-31-aa-deletePrivs.diff" title="Latest  27/Feb/14 15:48 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-31-aa-deletePrivs.diff:https://issues.apache.org/jira/secure/attachment/12631551/derby-3155-31-aa-deletePrivs.diff">derby-3155-31-aa-deletePrivs.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-27T15:48:46.951Z">27/Feb/14 15:48</time>
                   </dd>
                   <dd class="attachment-size">
                    34 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12631734" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12631734/derby-3155-32-aa-newTestFunction.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-32-aa-newTestFunction.diff:https://issues.apache.org/jira/secure/attachment/12631734/derby-3155-32-aa-newTestFunction.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12631734/derby-3155-32-aa-newTestFunction.diff" title="Latest  28/Feb/14 14:02 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-32-aa-newTestFunction.diff:https://issues.apache.org/jira/secure/attachment/12631734/derby-3155-32-aa-newTestFunction.diff">derby-3155-32-aa-newTestFunction.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-28T14:02:09.668Z">28/Feb/14 14:02</time>
                   </dd>
                   <dd class="attachment-size">
                    0.7 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12632509" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12632509/derby-3155-33-ab-insertPrivs.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-33-ab-insertPrivs.diff:https://issues.apache.org/jira/secure/attachment/12632509/derby-3155-33-ab-insertPrivs.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12632509/derby-3155-33-ab-insertPrivs.diff" title="Latest  04/Mar/14 14:57 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-33-ab-insertPrivs.diff:https://issues.apache.org/jira/secure/attachment/12632509/derby-3155-33-ab-insertPrivs.diff">derby-3155-33-ab-insertPrivs.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-04T14:57:18.246Z">04/Mar/14 14:57</time>
                   </dd>
                   <dd class="attachment-size">
                    21 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12632838" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12632838/derby-3155-34-aa-updatePrivs.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-34-aa-updatePrivs.diff:https://issues.apache.org/jira/secure/attachment/12632838/derby-3155-34-aa-updatePrivs.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12632838/derby-3155-34-aa-updatePrivs.diff" title="Latest  05/Mar/14 14:26 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-34-aa-updatePrivs.diff:https://issues.apache.org/jira/secure/attachment/12632838/derby-3155-34-aa-updatePrivs.diff">derby-3155-34-aa-updatePrivs.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-05T14:26:57.169Z">05/Mar/14 14:26</time>
                   </dd>
                   <dd class="attachment-size">
                    20 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12632846" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12632846/derby-3155-34-ab-updatePrivs.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-34-ab-updatePrivs.diff:https://issues.apache.org/jira/secure/attachment/12632846/derby-3155-34-ab-updatePrivs.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12632846/derby-3155-34-ab-updatePrivs.diff" title="Latest  05/Mar/14 16:35 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-34-ab-updatePrivs.diff:https://issues.apache.org/jira/secure/attachment/12632846/derby-3155-34-ab-updatePrivs.diff">derby-3155-34-ab-updatePrivs.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-05T16:35:58.307Z">05/Mar/14 16:35</time>
                   </dd>
                   <dd class="attachment-size">
                    22 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12633172" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12633172/derby-3155-35-aa-allPrivsTest.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-35-aa-allPrivsTest.diff:https://issues.apache.org/jira/secure/attachment/12633172/derby-3155-35-aa-allPrivsTest.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12633172/derby-3155-35-aa-allPrivsTest.diff" title="Latest  06/Mar/14 16:44 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-35-aa-allPrivsTest.diff:https://issues.apache.org/jira/secure/attachment/12633172/derby-3155-35-aa-allPrivsTest.diff">derby-3155-35-aa-allPrivsTest.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-06T16:44:58.850Z">06/Mar/14 16:44</time>
                   </dd>
                   <dd class="attachment-size">
                    14 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12633214" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12633214/derby-3155-36-aa-lockModeComment.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-36-aa-lockModeComment.diff:https://issues.apache.org/jira/secure/attachment/12633214/derby-3155-36-aa-lockModeComment.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12633214/derby-3155-36-aa-lockModeComment.diff" title="Latest  06/Mar/14 19:55 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-36-aa-lockModeComment.diff:https://issues.apache.org/jira/secure/attachment/12633214/derby-3155-36-aa-lockModeComment.diff">derby-3155-36-aa-lockModeComment.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-06T19:55:49.270Z">06/Mar/14 19:55</time>
                   </dd>
                   <dd class="attachment-size">
                    1.0 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12633221" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12633221/derby-3155-37-aa-printSubNodes.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-37-aa-printSubNodes.diff:https://issues.apache.org/jira/secure/attachment/12633221/derby-3155-37-aa-printSubNodes.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12633221/derby-3155-37-aa-printSubNodes.diff" title="Latest  06/Mar/14 20:35 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-37-aa-printSubNodes.diff:https://issues.apache.org/jira/secure/attachment/12633221/derby-3155-37-aa-printSubNodes.diff">derby-3155-37-aa-printSubNodes.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-06T20:35:12.560Z">06/Mar/14 20:35</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12633726" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12633726/derby-3155-38-aa-datatypes.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-38-aa-datatypes.diff:https://issues.apache.org/jira/secure/attachment/12633726/derby-3155-38-aa-datatypes.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12633726/derby-3155-38-aa-datatypes.diff" title="Latest  10/Mar/14 16:12 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-38-aa-datatypes.diff:https://issues.apache.org/jira/secure/attachment/12633726/derby-3155-38-aa-datatypes.diff">derby-3155-38-aa-datatypes.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-10T16:12:18.283Z">10/Mar/14 16:12</time>
                   </dd>
                   <dd class="attachment-size">
                    49 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12633754" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12633754/derby-3155-39-aa-fixBuild.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-39-aa-fixBuild.diff:https://issues.apache.org/jira/secure/attachment/12633754/derby-3155-39-aa-fixBuild.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12633754/derby-3155-39-aa-fixBuild.diff" title="Latest  10/Mar/14 19:20 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-39-aa-fixBuild.diff:https://issues.apache.org/jira/secure/attachment/12633754/derby-3155-39-aa-fixBuild.diff">derby-3155-39-aa-fixBuild.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-10T19:20:10.647Z">10/Mar/14 19:20</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12633921" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12633921/derby-3155-40-aa-bigLobs.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-40-aa-bigLobs.diff:https://issues.apache.org/jira/secure/attachment/12633921/derby-3155-40-aa-bigLobs.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12633921/derby-3155-40-aa-bigLobs.diff" title="Latest  11/Mar/14 15:37 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-40-aa-bigLobs.diff:https://issues.apache.org/jira/secure/attachment/12633921/derby-3155-40-aa-bigLobs.diff">derby-3155-40-aa-bigLobs.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-11T15:37:31.088Z">11/Mar/14 15:37</time>
                   </dd>
                   <dd class="attachment-size">
                    16 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12634151" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12634151/derby-3155-41-aa-nullGeneratedColumns.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-41-aa-nullGeneratedColumns.diff:https://issues.apache.org/jira/secure/attachment/12634151/derby-3155-41-aa-nullGeneratedColumns.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12634151/derby-3155-41-aa-nullGeneratedColumns.diff" title="Latest  12/Mar/14 12:28 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-41-aa-nullGeneratedColumns.diff:https://issues.apache.org/jira/secure/attachment/12634151/derby-3155-41-aa-nullGeneratedColumns.diff">derby-3155-41-aa-nullGeneratedColumns.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-12T12:28:02.832Z">12/Mar/14 12:28</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12634249" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12634249/derby-3155-42-aa-triggersAndGeneratedColumns.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-42-aa-triggersAndGeneratedColumns.diff:https://issues.apache.org/jira/secure/attachment/12634249/derby-3155-42-aa-triggersAndGeneratedColumns.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12634249/derby-3155-42-aa-triggersAndGeneratedColumns.diff" title="Latest  12/Mar/14 20:34 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-42-aa-triggersAndGeneratedColumns.diff:https://issues.apache.org/jira/secure/attachment/12634249/derby-3155-42-aa-triggersAndGeneratedColumns.diff">derby-3155-42-aa-triggersAndGeneratedColumns.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-12T20:34:52.370Z">12/Mar/14 20:34</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12634727" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12634727/derby-3155-43-aa-eliminateDuplicateColumnRefs.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-43-aa-eliminateDuplicateColumnRefs.diff:https://issues.apache.org/jira/secure/attachment/12634727/derby-3155-43-aa-eliminateDuplicateColumnRefs.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12634727/derby-3155-43-aa-eliminateDuplicateColumnRefs.diff" title="Latest  14/Mar/14 15:19 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-43-aa-eliminateDuplicateColumnRefs.diff:https://issues.apache.org/jira/secure/attachment/12634727/derby-3155-43-aa-eliminateDuplicateColumnRefs.diff">derby-3155-43-aa-eliminateDuplicateColumnRefs.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-14T15:19:25.036Z">14/Mar/14 15:19</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12635153" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12635153/derby-3155-44-aa-lobsInTriggers.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-44-aa-lobsInTriggers.diff:https://issues.apache.org/jira/secure/attachment/12635153/derby-3155-44-aa-lobsInTriggers.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12635153/derby-3155-44-aa-lobsInTriggers.diff" title="Latest  17/Mar/14 19:53 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-44-aa-lobsInTriggers.diff:https://issues.apache.org/jira/secure/attachment/12635153/derby-3155-44-aa-lobsInTriggers.diff">derby-3155-44-aa-lobsInTriggers.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-17T19:53:10.676Z">17/Mar/14 19:53</time>
                   </dd>
                   <dd class="attachment-size">
                    23 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12635325" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12635325/derby-3155-45-aa-serialization.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-45-aa-serialization.diff:https://issues.apache.org/jira/secure/attachment/12635325/derby-3155-45-aa-serialization.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12635325/derby-3155-45-aa-serialization.diff" title="Latest  18/Mar/14 14:24 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-45-aa-serialization.diff:https://issues.apache.org/jira/secure/attachment/12635325/derby-3155-45-aa-serialization.diff">derby-3155-45-aa-serialization.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-18T14:24:33.953Z">18/Mar/14 14:24</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12635331" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12635331/derby-3155-46-aa-deferredDeletes.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-46-aa-deferredDeletes.diff:https://issues.apache.org/jira/secure/attachment/12635331/derby-3155-46-aa-deferredDeletes.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12635331/derby-3155-46-aa-deferredDeletes.diff" title="Latest  18/Mar/14 15:05 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-46-aa-deferredDeletes.diff:https://issues.apache.org/jira/secure/attachment/12635331/derby-3155-46-aa-deferredDeletes.diff">derby-3155-46-aa-deferredDeletes.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-18T15:05:42.853Z">18/Mar/14 15:05</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12635365" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12635365/derby-3155-47-aa-collations.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-47-aa-collations.diff:https://issues.apache.org/jira/secure/attachment/12635365/derby-3155-47-aa-collations.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12635365/derby-3155-47-aa-collations.diff" title="Latest  18/Mar/14 18:42 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-47-aa-collations.diff:https://issues.apache.org/jira/secure/attachment/12635365/derby-3155-47-aa-collations.diff">derby-3155-47-aa-collations.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-18T18:42:54.957Z">18/Mar/14 18:42</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12635818" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12635818/derby-3155-48-aa-indexScan.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-48-aa-indexScan.diff:https://issues.apache.org/jira/secure/attachment/12635818/derby-3155-48-aa-indexScan.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12635818/derby-3155-48-aa-indexScan.diff" title="Latest  20/Mar/14 17:03 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-48-aa-indexScan.diff:https://issues.apache.org/jira/secure/attachment/12635818/derby-3155-48-aa-indexScan.diff">derby-3155-48-aa-indexScan.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-20T17:03:29.277Z">20/Mar/14 17:03</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12635853" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12635853/derby-3155-49-aa-cleanup1.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-49-aa-cleanup1.diff:https://issues.apache.org/jira/secure/attachment/12635853/derby-3155-49-aa-cleanup1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12635853/derby-3155-49-aa-cleanup1.diff" title="Latest  20/Mar/14 19:48 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-49-aa-cleanup1.diff:https://issues.apache.org/jira/secure/attachment/12635853/derby-3155-49-aa-cleanup1.diff">derby-3155-49-aa-cleanup1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-20T19:48:16.911Z">20/Mar/14 19:48</time>
                   </dd>
                   <dd class="attachment-size">
                    34 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12636013" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12636013/derby-3155-50-aa-revampDeleteThenRows.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-50-aa-revampDeleteThenRows.diff:https://issues.apache.org/jira/secure/attachment/12636013/derby-3155-50-aa-revampDeleteThenRows.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12636013/derby-3155-50-aa-revampDeleteThenRows.diff" title="Latest  21/Mar/14 13:05 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-50-aa-revampDeleteThenRows.diff:https://issues.apache.org/jira/secure/attachment/12636013/derby-3155-50-aa-revampDeleteThenRows.diff">derby-3155-50-aa-revampDeleteThenRows.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-21T13:05:10.987Z">21/Mar/14 13:05</time>
                   </dd>
                   <dd class="attachment-size">
                    15 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12636030" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12636030/derby-3155-51-aa-cleanup2.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-51-aa-cleanup2.diff:https://issues.apache.org/jira/secure/attachment/12636030/derby-3155-51-aa-cleanup2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12636030/derby-3155-51-aa-cleanup2.diff" title="Latest  21/Mar/14 14:58 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-51-aa-cleanup2.diff:https://issues.apache.org/jira/secure/attachment/12636030/derby-3155-51-aa-cleanup2.diff">derby-3155-51-aa-cleanup2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-21T14:58:02.621Z">21/Mar/14 14:58</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12636354" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12636354/derby-3155-52-aa-upgrade.diff" draggable="true" data-downloadurl="text/x-patch:derby-3155-52-aa-upgrade.diff:https://issues.apache.org/jira/secure/attachment/12636354/derby-3155-52-aa-upgrade.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12636354/derby-3155-52-aa-upgrade.diff" title="Latest  24/Mar/14 15:46 - Rick Hillegas" draggable="true" data-downloadurl="text/x-patch:derby-3155-52-aa-upgrade.diff:https://issues.apache.org/jira/secure/attachment/12636354/derby-3155-52-aa-upgrade.diff">derby-3155-52-aa-upgrade.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-24T15:46:59.842Z">24/Mar/14 15:46</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12639809" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12639809/derby-3155-53-aa-transitionSimpleColumn.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3155-53-aa-transitionSimpleColumn.diff:https://issues.apache.org/jira/secure/attachment/12639809/derby-3155-53-aa-transitionSimpleColumn.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12639809/derby-3155-53-aa-transitionSimpleColumn.diff" title="Latest  11/Apr/14 14:44 - Rick Hillegas" draggable="true" data-downloadurl="application/octet-stream:derby-3155-53-aa-transitionSimpleColumn.diff:https://issues.apache.org/jira/secure/attachment/12639809/derby-3155-53-aa-transitionSimpleColumn.diff">derby-3155-53-aa-transitionSimpleColumn.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-04-11T14:44:20.265Z">11/Apr/14 14:44</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12636391" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12636391/MergeStatement.html" draggable="true" data-downloadurl="text/html:MergeStatement.html:https://issues.apache.org/jira/secure/attachment/12636391/MergeStatement.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12636391/MergeStatement.html" title="Latest  24/Mar/14 18:02 - Rick Hillegas" draggable="true" data-downloadurl="text/html:MergeStatement.html:https://issues.apache.org/jira/secure/attachment/12636391/MergeStatement.html">MergeStatement.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-03-24T18:02:30.721Z">24/Mar/14 18:02</time>
                   </dd>
                   <dd class="attachment-size">
                    11 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12630075" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12630075/MergeStatement.html" draggable="true" data-downloadurl="text/html:MergeStatement.html:https://issues.apache.org/jira/secure/attachment/12630075/MergeStatement.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12630075/MergeStatement.html" title=" 20/Feb/14 15:52 - Rick Hillegas" draggable="true" data-downloadurl="text/html:MergeStatement.html:https://issues.apache.org/jira/secure/attachment/12630075/MergeStatement.html">MergeStatement.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-02-20T15:52:03.681Z">20/Feb/14 15:52</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12599944" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12599944/MergeStatement.html" draggable="true" data-downloadurl="text/html:MergeStatement.html:https://issues.apache.org/jira/secure/attachment/12599944/MergeStatement.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12599944/MergeStatement.html" title=" 26/Aug/13 13:40 - Rick Hillegas" draggable="true" data-downloadurl="text/html:MergeStatement.html:https://issues.apache.org/jira/secure/attachment/12599944/MergeStatement.html">MergeStatement.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-08-26T13:40:20.361Z">26/Aug/13 13:40</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12599439" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12599439/MergeStatement.html" draggable="true" data-downloadurl="text/html:MergeStatement.html:https://issues.apache.org/jira/secure/attachment/12599439/MergeStatement.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12599439/MergeStatement.html" title=" 22/Aug/13 14:55 - Rick Hillegas" draggable="true" data-downloadurl="text/html:MergeStatement.html:https://issues.apache.org/jira/secure/attachment/12599439/MergeStatement.html">MergeStatement.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-08-22T14:55:53.799Z">22/Aug/13 14:55</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12597795" data-issue-id="12381347" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12597795/MergeStatement.html" draggable="true" data-downloadurl="text/html:MergeStatement.html:https://issues.apache.org/jira/secure/attachment/12597795/MergeStatement.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12597795/MergeStatement.html" title=" 13/Aug/13 19:32 - Rick Hillegas" draggable="true" data-downloadurl="text/html:MergeStatement.html:https://issues.apache.org/jira/secure/attachment/12597795/MergeStatement.html">MergeStatement.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-08-13T19:32:14.981Z">13/Aug/13 19:32</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Rick Hillegas
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12623008_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-6011: Derby performs very badly (seems to deadlock and timeout) in very simple multi-threaded tests"> <a href="/jira/browse/DERBY-6011" data-issue-key="DERBY-6011" class="issue-link link-title resolution">DERBY-6011</a> <span class="link-summary">Derby performs very badly (seems to deadlock and timeout) in very simple multi-threaded tests</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12678827_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-6414: Incorrect handling when using an UPDATE to SET an identity column to DEFAULT"> <a href="/jira/browse/DERBY-6414" data-issue-key="DERBY-6414" class="issue-link link-title resolution">DERBY-6414</a> <span class="link-summary">Incorrect handling when using an UPDATE to SET an identity column to DEFAULT</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12683643_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-6429: Privilege checks for UPDATE statements are wrong."> <a href="/jira/browse/DERBY-6429" data-issue-key="DERBY-6429" class="issue-link link-title resolution">DERBY-6429</a> <span class="link-summary">Privilege checks for UPDATE statements are wrong.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12726311_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-6652: Compilation error using a view as the source data set for a MERGE statement"> <a href="/jira/browse/DERBY-6652" data-issue-key="DERBY-6652" class="issue-link link-title resolution">DERBY-6652</a> <span class="link-summary">Compilation error using a view as the source data set for a MERGE statement</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12683184_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-6428: Adding an update trigger to a table causes Derby to require overbroad update privileges"> <a href="/jira/browse/DERBY-6428" data-issue-key="DERBY-6428" class="issue-link link-title">DERBY-6428</a> <span class="link-summary">Adding an update trigger to a table causes Derby to require overbroad update privileges</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12702651_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-6522: Make LOB handling by MERGE statement more efficient."> <a href="/jira/browse/DERBY-6522" data-issue-key="DERBY-6522" class="issue-link link-title">DERBY-6522</a> <span class="link-summary">Make LOB handling by MERGE statement more efficient.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12726573_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-6656: Re-enable views as the source data sets of MERGE statements"> <a href="/jira/browse/DERBY-6656" data-issue-key="DERBY-6656" class="issue-link link-title">DERBY-6656</a> <span class="link-summary">Re-enable views as the source data sets of MERGE statements</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12738052_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-6723: Allow derived table as a source in MERGE statement"> <a href="/jira/browse/DERBY-6723" data-issue-key="DERBY-6723" class="issue-link link-title">DERBY-6723</a> <span class="link-summary">Allow derived table as a source in MERGE statement</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12691107_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-6460: Allow subqueries in the WHEN [ NOT ] MATCHED clauses of MERGE statements."> <a href="/jira/browse/DERBY-6460" data-issue-key="DERBY-6460" class="issue-link link-title">DERBY-6460</a> <span class="link-summary">Allow subqueries in the WHEN [ NOT ] MATCHED clauses of MERGE statements.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12694270_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-6474: Add support for synonyms in MERGE statements"> <a href="/jira/browse/DERBY-6474" data-issue-key="DERBY-6474" class="issue-link link-title">DERBY-6474</a> <span class="link-summary">Add support for synonyms in MERGE statements</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12694319_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-6476: Allow derived column lists in MERGE statements."> <a href="/jira/browse/DERBY-6476" data-issue-key="DERBY-6476" class="issue-link link-title">DERBY-6476</a> <span class="link-summary">Allow derived column lists in MERGE statements.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12703264_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-6526: Document the MERGE statement"> <a href="/jira/browse/DERBY-6526" data-issue-key="DERBY-6526" class="issue-link link-title resolution">DERBY-6526</a> <span class="link-summary">Document the MERGE statement</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list collapsed-links-list"> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12732235_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-6689: Assert failure/NPE when using ROW_NUMBER in MERGE ... INSERT"> <a href="/jira/browse/DERBY-6689" data-issue-key="DERBY-6689" class="issue-link link-title resolution">DERBY-6689</a> <span class="link-summary">Assert failure/NPE when using ROW_NUMBER in MERGE ... INSERT</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <div id="show-more-links"> 
                  <button class="aui-button aui-button-link" id="show-more-links-link">Show 8 more links</button> 
                  <span>(7 is related to, 1 relates to)</span> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_rhillegas" rel="rhillegas" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Rick Hillegas&quot;,&quot;emailAddress&quot;:&quot;rhillegas@apache.org&quot;,&quot;username&quot;:&quot;rhillegas&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="rhillegas"></span></span> Rick Hillegas </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_trejkaz" rel="trejkaz" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Trejkaz&quot;,&quot;emailAddress&quot;:&quot;trejkaz@trypticon.org&quot;,&quot;username&quot;:&quot;trejkaz&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="trejkaz"></span></span> Trejkaz </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">8</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">9</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="28/Oct/07 22:49"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2007-10-28T22:49:40+0000">28/Oct/07 22:49</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="09/Sep/16 09:51"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2016-09-09T09:51:30+0000">09/Sep/16 09:51</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="29/May/14 16:33"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2014-05-29T16:33:12+0000">29/May/14 16:33</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for n/a, Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3155?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-3155?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12557766\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=12557766&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12557766\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"denis.assanbaev@rd-software.com\\\" id=\\\"commentauthor_12557766_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=denis.assanbaev%40rd-software.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"denis.assanbaev@rd-software.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Denis Assanbaev (RD-Software GmbH)\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12557766_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/08 19:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-10T19:48:40+0000\'\u003e10\\/Jan\\/08 19:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI find this feature usefull for also for other cases:\u003cbr\\/\u003e\\ncurrently derby cannot provide an update using data from another table.\u003c\\/p\u003e\\n\\n\u003cp\u003eUPDATE XXX  t_u\u003cbr\\/\u003e\\nset (col1, col2, col3)\u003cbr\\/\u003e\\n= (select col_n1,col_n2,col_n3\u003cbr\\/\u003e\\n     from XXX t_n\u003cbr\\/\u003e\\n     where t_n.id = t_u.id).\u003cbr\\/\u003e\\nCURRENT OF- version doesn\'t help too.\u003c\\/p\u003e\\n\\n\u003cp\u003eUPDATE XXX  t_u\u003cbr\\/\u003e\\nset col1\u003cbr\\/\u003e\\n= (select col_n1\u003cbr\\/\u003e\\n     from XXX t_n\u003cbr\\/\u003e\\n     where t_n.id = t_u.id),\u003cbr\\/\u003e\\ncol2\u003cbr\\/\u003e\\n= (select col_n2\u003cbr\\/\u003e\\n     from XXX t_n\u003cbr\\/\u003e\\n     where t_n.id = t_u.id).\u003cbr\\/\u003e\\nworks, but it results in a lot of updates or performance boosts when \u003cbr\\/\u003e\\nusing for a table with ~ 100 columns.\u003c\\/p\u003e\\n\\n\u003cp\u003eRegards\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; \u003cbr\\/\u003e\\nMit freundlichen Gr\\u00FC\\u00DFen \\/ Kind Regards\u003c\\/p\u003e\\n\\n\u003cp\u003eDenis\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"denis.assanbaev@rd-software.com\\\" id=\\\"commentauthor_12557766_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=denis.assanbaev%40rd-software.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"denis.assanbaev@rd-software.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Denis Assanbaev (RD-Software GmbH)\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12557766_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/08 19:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-10T19:48:40+0000\'\u003e10\\/Jan\\/08 19:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I find this feature usefull for also for other cases: \\ncurrently derby cannot provide an update using data from another table. \\n\\n UPDATE XXX  t_u \\nset (col1, col2, col3) \\n= (select col_n1,col_n2,col_n3 \\n     from XXX t_n \\n     where t_n.id = t_u.id). \\nCURRENT OF- version doesn\'t help too. \\n\\n UPDATE XXX  t_u \\nset col1 \\n= (select col_n1 \\n     from XXX t_n \\n     where t_n.id = t_u.id), \\ncol2 \\n= (select col_n2 \\n     from XXX t_n \\n     where t_n.id = t_u.id). \\nworks, but it results in a lot of updates or performance boosts when  \\nusing for a table with ~ 100 columns. \\n\\n Regards \\n\\n &#8211;  \\nMit freundlichen Gr\\u00FC\\u00DFen \\/ Kind Regards \\n\\n Denis \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13445705\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13445705&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13445705\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jarcec\\\" id=\\\"commentauthor_13445705_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jarcec\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jarcec\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Jarek Jarcec Cecho\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13445705_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Aug\\/12 06:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-31T06:02:55+0000\'\u003e31\\/Aug\\/12 06:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI would also vote for including this feature.\u003c\\/p\u003e\\n\\n\u003cp\u003eJarcec\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jarcec\\\" id=\\\"commentauthor_13445705_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jarcec\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jarcec\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Jarek Jarcec Cecho\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13445705_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Aug\\/12 06:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-31T06:02:55+0000\'\u003e31\\/Aug\\/12 06:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I would also vote for including this feature. \\n\\n Jarcec              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13738710\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13738710&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13738710\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13738710_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13738710_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Aug\\/13 19:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-13T19:32:14+0000\'\u003e13\\/Aug\\/13 19:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a first rev of a functional spec for this feature: MergeStatement.html.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13738710_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13738710_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Aug\\/13 19:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-13T19:32:14+0000\'\u003e13\\/Aug\\/13 19:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a first rev of a functional spec for this feature: MergeStatement.html.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13739905\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13739905&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13739905\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chaase3\\\" id=\\\"commentauthor_13739905_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chaase3\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chaase3\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kim Haase\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13739905_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Aug\\/13 17:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-14T17:29:51+0000\'\u003e14\\/Aug\\/13 17:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe spec draft looks great to me from a doc perspective &#8211; very clear.\u003c\\/p\u003e\\n\\n\u003cp\u003eOne typo maybe &#8211; in the second bullet item under \\\"The following rules apply:\\\", should \\\"tableTable\\\" be \\\"targetTable\\\"?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chaase3\\\" id=\\\"commentauthor_13739905_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chaase3\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chaase3\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kim Haase\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13739905_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Aug\\/13 17:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-14T17:29:51+0000\'\u003e14\\/Aug\\/13 17:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The spec draft looks great to me from a doc perspective &#8211; very clear. \\n\\n One typo maybe &#8211; in the second bullet item under \\\"The following rules apply:\\\", should \\\"tableTable\\\" be \\\"targetTable\\\"?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13739942\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13739942&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13739942\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13739942_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13739942_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Aug\\/13 17:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-14T17:45:51+0000\'\u003e14\\/Aug\\/13 17:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the quick feedback, Kim. I\'ll correct that typo in the next rev. Thanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13739942_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13739942_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Aug\\/13 17:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-14T17:45:51+0000\'\u003e14\\/Aug\\/13 17:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the quick feedback, Kim. I\'ll correct that typo in the next rev. Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13745329\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13745329&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13745329\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13745329_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13745329_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/13 19:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-20T19:57:46+0000\'\u003e20\\/Aug\\/13 19:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-01-ac-grammar.diff. This is the first increment of work for implementing the MERGE statement. This patch covers the grammar and bind() logic. I will run tests.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlthough permissions descriptors are attached at bind() time, I did not tackle any of the permissions logic. The GRANT\\/REVOKE behavior of the MERGE statement will have to be verified and debugged when the execution logic is written. This may cascade changes back into the bind() logic.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt is also possible that I have modelled the bind() structures in a way which will be frustrating for code-generation or execution. When I tackle code-generation and execution, I may need to adjust the bind() logic further.\u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, at this point I think that this increment is big enough for submission. This is a convenient checkpoint of work on the MERGE statement.\u003c\\/p\u003e\\n\\n\u003cp\u003eHere is the basic model I have adopted:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) The WHEN MATCHED ... THEN UPDATE clause is modelled by an internally generated UpdateNode.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) The WHEN MATCHED ... THEN DELETE clause is modelled by an internally generated DeleteNode.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) The WHEN NOT MATCHED ... THEN INSERT clause is modelled by an internally generated InsertNode.\u003c\\/p\u003e\\n\\n\u003cp\u003e4) The WHEN [ NOT ] MATCHED clauses are driven by an internally generated HalfOuterJoinNode which represents the following query:\u003c\\/p\u003e\\n\\n\u003cp\u003e    sourceTable LEFT OUTER JOIN targetTable ON searchCondition\u003c\\/p\u003e\\n\\n\u003cp\u003eAlong the way, I had to tweak other compile-time classes. However, I believe that these tweaks are minor. So far, the MERGE statement has not caused a lot of disruption.\u003c\\/p\u003e\\n\\n\u003cp\u003eA valid MERGE statement currently raises the following error at the end of the bind phase:\u003c\\/p\u003e\\n\\n\u003cp\u003eERROR 0A000: Feature not implemented: MERGE.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/sqlgrammar.jj\u003c\\/p\u003e\\n\\n\u003cp\u003eGrammar changes, including the introduction of two new non-reserved keywords: MERGE and MATCHED.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eA       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nA       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdds two new query nodes. MergeNode is a new DMLModStatementNode parallel to InsertNode, UpdateNode, and DeleteNode. MatchingClauseNode is a single class which can represent all three variants of the WHEN [ NOT ] MATCHED clause.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DeleteNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen we internally generate an UpdateNode for a WHEN MATCHED ... THEN UPDATE clause, we have to allow references to the source table on the right side of the SET operator. For example, in the following statement...\u003c\\/p\u003e\\n\\n\u003cp\u003emerge into t1\u003cbr\\/\u003e\\nusing t2\u003cbr\\/\u003e\\non t1.c1 = t2.c1\u003cbr\\/\u003e\\nwhen matched and t1.c2 != t2.c2 then update set c2 = t2.c2;\u003c\\/p\u003e\\n\\n\u003cp\u003e...we allow \\\"set c2 = t2.c2\\\" even though the table being updated is t1, not t2. This means that for this case we must disable a little piece of logic which was deliberately nulling out the tablename in expressions on the right side of the SET operator.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn addition, I disabled a Sanity check which prevented us from having more than one table in the query which drives an UPDATE statement. This was necessary in order to use a left join to drive the WHEN MATCHED ... THEN UPDATE clause.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UnionNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/InsertNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java\u003c\\/p\u003e\\n\\n\u003cp\u003eSome extra book-keeping was added in order to support DEFAULT values for generated columns in WHEN NOT MATCHED ... THEN INSERT clauses. The handling of generated columns (including identity columns) is already a set of brittle special cases. This makes the handling more brittle and flags an area which may need extra testing.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/JoinNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTwo new methods were created in order to abstract out some bind() logic. That logic is now used both by ordinary left joins and by the internally generated left join which drives the MERGE statement.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml\u003cbr\\/\u003e\\nM       java\\/shared\\/org\\/apache\\/derby\\/shared\\/common\\/reference\\/SQLState.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdds 3 new messages for errors discovered at bind() time.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/GeneratedColumnsHelper.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/_Suite.java\u003cbr\\/\u003e\\nA       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdds a battery of tests for the MERGE statement\'s bind() logic. Mostly these are negative tests, stressing error conditions.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13745329_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13745329_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/13 19:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-20T19:57:46+0000\'\u003e20\\/Aug\\/13 19:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-01-ac-grammar.diff. This is the first increment of work for implementing the MERGE statement. This patch covers the grammar and bind() logic. I will run tests. \\n\\n Although permissions descriptors are attached at bind() time, I did not tackle any of the permissions logic. The GRANT\\/REVOKE behavior of the MERGE statement will have to be verified and debugged when the execution logic is written. This may cascade changes back into the bind() logic. \\n\\n It is also possible that I have modelled the bind() structures in a way which will be frustrating for code-generation or execution. When I tackle code-generation and execution, I may need to adjust the bind() logic further. \\n\\n However, at this point I think that this increment is big enough for submission. This is a convenient checkpoint of work on the MERGE statement. \\n\\n Here is the basic model I have adopted: \\n\\n 1) The WHEN MATCHED ... THEN UPDATE clause is modelled by an internally generated UpdateNode. \\n\\n 2) The WHEN MATCHED ... THEN DELETE clause is modelled by an internally generated DeleteNode. \\n\\n 3) The WHEN NOT MATCHED ... THEN INSERT clause is modelled by an internally generated InsertNode. \\n\\n 4) The WHEN [ NOT ] MATCHED clauses are driven by an internally generated HalfOuterJoinNode which represents the following query: \\n\\n     sourceTable LEFT OUTER JOIN targetTable ON searchCondition \\n\\n Along the way, I had to tweak other compile-time classes. However, I believe that these tweaks are minor. So far, the MERGE statement has not caused a lot of disruption. \\n\\n A valid MERGE statement currently raises the following error at the end of the bind phase: \\n\\n ERROR 0A000: Feature not implemented: MERGE. \\n\\n\\n Touches the following files: \\n\\n ------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/sqlgrammar.jj \\n\\n Grammar changes, including the introduction of two new non-reserved keywords: MERGE and MATCHED. \\n\\n ------------------- \\n\\n A       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nA       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\n\\n Adds two new query nodes. MergeNode is a new DMLModStatementNode parallel to InsertNode, UpdateNode, and DeleteNode. MatchingClauseNode is a single class which can represent all three variants of the WHEN [ NOT ] MATCHED clause. \\n\\n ------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DeleteNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java \\n\\n When we internally generate an UpdateNode for a WHEN MATCHED ... THEN UPDATE clause, we have to allow references to the source table on the right side of the SET operator. For example, in the following statement... \\n\\n merge into t1 \\nusing t2 \\non t1.c1 = t2.c1 \\nwhen matched and t1.c2 != t2.c2 then update set c2 = t2.c2; \\n\\n ...we allow \\\"set c2 = t2.c2\\\" even though the table being updated is t1, not t2. This means that for this case we must disable a little piece of logic which was deliberately nulling out the tablename in expressions on the right side of the SET operator. \\n\\n In addition, I disabled a Sanity check which prevented us from having more than one table in the query which drives an UPDATE statement. This was necessary in order to use a left join to drive the WHEN MATCHED ... THEN UPDATE clause. \\n\\n ------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UnionNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/InsertNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java \\n\\n Some extra book-keeping was added in order to support DEFAULT values for generated columns in WHEN NOT MATCHED ... THEN INSERT clauses. The handling of generated columns (including identity columns) is already a set of brittle special cases. This makes the handling more brittle and flags an area which may need extra testing. \\n\\n ------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/JoinNode.java \\n\\n Two new methods were created in order to abstract out some bind() logic. That logic is now used both by ordinary left joins and by the internally generated left join which drives the MERGE statement. \\n\\n ------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml \\nM       java\\/shared\\/org\\/apache\\/derby\\/shared\\/common\\/reference\\/SQLState.java \\n\\n Adds 3 new messages for errors discovered at bind() time. \\n\\n ------------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/GeneratedColumnsHelper.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/_Suite.java \\nA       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Adds a battery of tests for the MERGE statement\'s bind() logic. Mostly these are negative tests, stressing error conditions.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13745435\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13745435&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13745435\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13745435_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13745435_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/13 21:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-20T21:14:58+0000\'\u003e20\\/Aug\\/13 21:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTests passed cleanly for me on derby-3155-01-ac-grammar.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13745435_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13745435_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/13 21:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-20T21:14:58+0000\'\u003e20\\/Aug\\/13 21:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tests passed cleanly for me on derby-3155-01-ac-grammar.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13746030\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13746030&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13746030\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13746030_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13746030_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/13 13:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-21T13:26:07+0000\'\u003e21\\/Aug\\/13 13:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1516157 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1516157\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1516157\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add grammar and bind logic for MERGE statement; commit derby-3155-01-ac-grammar.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13746030_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13746030_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/13 13:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-21T13:26:07+0000\'\u003e21\\/Aug\\/13 13:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1516157 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1516157  ] \\n\\n   DERBY-3155  : Add grammar and bind logic for MERGE statement; commit derby-3155-01-ac-grammar.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13747486\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13747486&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13747486\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13747486_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13747486_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/13 12:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-22T12:56:37+0000\'\u003e22\\/Aug\\/13 12:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for working on this feature, Rick. I tried a couple of queries in ij just to see how it worked. I understand that this is work in progress, so that some things are not expected to work yet. Still, I\'ll post my observations just in case:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eIf I use a correlation name for the target table, and the correlation name doesn\'t match an existing table, I get \\\"Table\\/View \'T1\' does not exist.\\\" instead of the expected \\\"Feature not implemented: MERGE\\\".\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe parser doesn\'t seem to accept more than one mergeWhenClause.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe examples in the functional specification are missing the THEN keyword.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13747486_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13747486_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/13 12:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-22T12:56:37+0000\'\u003e22\\/Aug\\/13 12:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for working on this feature, Rick. I tried a couple of queries in ij just to see how it worked. I understand that this is work in progress, so that some things are not expected to work yet. Still, I\'ll post my observations just in case: \\n\\n \\n\\t If I use a correlation name for the target table, and the correlation name doesn\'t match an existing table, I get \\\"Table\\/View \'T1\' does not exist.\\\" instead of the expected \\\"Feature not implemented: MERGE\\\". \\n \\n\\n\\n \\n\\t The parser doesn\'t seem to accept more than one mergeWhenClause. \\n \\n\\n\\n \\n\\t The examples in the functional specification are missing the THEN keyword. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13747569\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13747569&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13747569\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13747569_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13747569_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/13 14:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-22T14:55:53+0000\'\u003e22\\/Aug\\/13 14:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a second rev of the functional spec, incorporating feedback from Kim and Knut. This fixes typos and adds THENs to the example MERGE statements. Thanks for the feedback, Kim and Knut.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13747569_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13747569_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/13 14:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-22T14:55:53+0000\'\u003e22\\/Aug\\/13 14:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a second rev of the functional spec, incorporating feedback from Kim and Knut. This fixes typos and adds THENs to the example MERGE statements. Thanks for the feedback, Kim and Knut.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13747573\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13747573&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13747573\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13747573_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13747573_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/13 15:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-22T15:01:21+0000\'\u003e22\\/Aug\\/13 15:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for test-driving the parse\\/bind changes, Knut.\u003c\\/p\u003e\\n\\n\u003cp\u003eo The issue with correlation names needs to be looked into. I\'ll investigate this after I come up for air on the next patch I\'m hacking.\u003c\\/p\u003e\\n\\n\u003cp\u003eo The issue with multiple WHEN [ NOT ] MATCHED clauses is fixed by a trivial correction to the grammar, which I\'ll roll onto the next patch. After applying that trivial fix, the following statement gets through the parse and bind phases:\u003c\\/p\u003e\\n\\n\u003cp\u003emerge into t1\u003cbr\\/\u003e\\nusing t2\u003cbr\\/\u003e\\non t1.c1 = t2.c1\u003cbr\\/\u003e\\nwhen matched and t1.c2 != t2.c2 then update set c2 = t2.c2\u003cbr\\/\u003e\\nwhen not matched then insert ( c2 ) values ( t2.c2 );\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks,\u003cbr\\/\u003e\\n-Rick\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13747573_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13747573_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/13 15:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-22T15:01:21+0000\'\u003e22\\/Aug\\/13 15:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for test-driving the parse\\/bind changes, Knut. \\n\\n o The issue with correlation names needs to be looked into. I\'ll investigate this after I come up for air on the next patch I\'m hacking. \\n\\n o The issue with multiple WHEN [ NOT ] MATCHED clauses is fixed by a trivial correction to the grammar, which I\'ll roll onto the next patch. After applying that trivial fix, the following statement gets through the parse and bind phases: \\n\\n merge into t1 \\nusing t2 \\non t1.c1 = t2.c1 \\nwhen matched and t1.c2 != t2.c2 then update set c2 = t2.c2 \\nwhen not matched then insert ( c2 ) values ( t2.c2 ); \\n\\n Thanks, \\n-Rick              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13749990\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13749990&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13749990\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13749990_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13749990_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/13 10:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-26T10:59:44+0000\'\u003e26\\/Aug\\/13 10:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ejust read through the functional spec of the MERGE statement. Looks good, found little to\u003cbr\\/\u003e\\nwhine about \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Privileges - Current privileges must include:\u003cbr\\/\u003e\\n&gt; - UPDATE privilege on every updated column of targetTable.\u003c\\/p\u003e\\n\\n\u003cp\u003eor on entire table (all columns)\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; - INSERT on every inserted column of targetTable.\u003c\\/p\u003e\\n\\n\u003cp\u003eINSERT privilege is for the entire table right? (the wording \\\"on every inserted column\\\" threw me off)\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; functions - Functions mentioned in the booleanExpressions may not modify SQL data.\u003c\\/p\u003e\\n\\n\u003cp\u003eCan they be non-deterministic I wonder?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13749990_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13749990_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/13 10:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-26T10:59:44+0000\'\u003e26\\/Aug\\/13 10:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    just read through the functional spec of the MERGE statement. Looks good, found little to \\nwhine about   \\n\\n &gt; Privileges - Current privileges must include: \\n&gt; - UPDATE privilege on every updated column of targetTable. \\n\\n or on entire table (all columns) \\n\\n &gt; - INSERT on every inserted column of targetTable. \\n\\n INSERT privilege is for the entire table right? (the wording \\\"on every inserted column\\\" threw me off) \\n\\n &gt; functions - Functions mentioned in the booleanExpressions may not modify SQL data. \\n\\n Can they be non-deterministic I wonder?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13750063\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13750063&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13750063\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13750063_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13750063_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/13 12:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-26T12:54:12+0000\'\u003e26\\/Aug\\/13 12:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI noticed that JavaCC now emits a warning. Looks like it started with revision 1516157.\u003c\\/p\u003e\\n\\n\u003cp\u003egenParser:\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;echo&#93;\u003c\\/span\u003e   Generating SQL parser...\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Java Compiler Compiler Version 4.0 (Parser Generator)\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e (type \\\"javacc\\\" with no arguments for help)\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Reading from file sqlgrammar.jj . . .\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Note: UNICODE_INPUT option is specified. Please make sure you create the parser\\/lexer using a Reader with the correct character encoding.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Warning: Choice conflict in (...)* construct at line 8313, column 31.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e          Expansion nested within construct and expansion following construct\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e          have common prefixes, one of which is: \\\",\\\"\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e          Consider using a lookahead of 2 or more for nested expansion.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e File \\\"TokenMgrError.java\\\" does not exist.  Will create one.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e File \\\"ParseException.java\\\" does not exist.  Will create one.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e File \\\"Token.java\\\" does not exist.  Will create one.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e File \\\"CharStream.java\\\" does not exist.  Will create one.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Parser generated with 0 errors and 1 warnings.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13750063_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13750063_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/13 12:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-26T12:54:12+0000\'\u003e26\\/Aug\\/13 12:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I noticed that JavaCC now emits a warning. Looks like it started with revision 1516157. \\n\\n genParser: \\n      &#91;echo&#93;    Generating SQL parser... \\n      &#91;java&#93;  Java Compiler Compiler Version 4.0 (Parser Generator) \\n      &#91;java&#93;  (type \\\"javacc\\\" with no arguments for help) \\n      &#91;java&#93;  Reading from file sqlgrammar.jj . . . \\n      &#91;java&#93;  Note: UNICODE_INPUT option is specified. Please make sure you create the parser\\/lexer using a Reader with the correct character encoding. \\n      &#91;java&#93;  Warning: Choice conflict in (...)* construct at line 8313, column 31. \\n      &#91;java&#93;           Expansion nested within construct and expansion following construct \\n      &#91;java&#93;           have common prefixes, one of which is: \\\",\\\" \\n      &#91;java&#93;           Consider using a lookahead of 2 or more for nested expansion. \\n      &#91;java&#93;  File \\\"TokenMgrError.java\\\" does not exist.  Will create one. \\n      &#91;java&#93;  File \\\"ParseException.java\\\" does not exist.  Will create one. \\n      &#91;java&#93;  File \\\"Token.java\\\" does not exist.  Will create one. \\n      &#91;java&#93;  File \\\"CharStream.java\\\" does not exist.  Will create one. \\n      &#91;java&#93;  Parser generated with 0 errors and 1 warnings.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13750089\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13750089&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13750089\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13750089_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13750089_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/13 13:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-26T13:40:20+0000\'\u003e26\\/Aug\\/13 13:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for that feedback, Dag. Attaching a third rev of the spec, which makes the clarifications you suggest.\u003c\\/p\u003e\\n\\n\u003cp\u003eConcerning non-deterministic expressions, including non-deterministic functions: Determinism isn\'t discussed by the SQL Standard, part 2, section 14.12 (&lt;merge statement&gt;). I can find no limitations related to determinism. Probably people would want to issue MERGE statements which mention non-deterministic expressions like CURRENT DATE.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13750089_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13750089_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/13 13:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-26T13:40:20+0000\'\u003e26\\/Aug\\/13 13:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for that feedback, Dag. Attaching a third rev of the spec, which makes the clarifications you suggest. \\n\\n Concerning non-deterministic expressions, including non-deterministic functions: Determinism isn\'t discussed by the SQL Standard, part 2, section 14.12 (&lt;merge statement&gt;). I can find no limitations related to determinism. Probably people would want to issue MERGE statements which mention non-deterministic expressions like CURRENT DATE.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13750091\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13750091&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13750091\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13750091_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13750091_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/13 13:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-26T13:50:11+0000\'\u003e26\\/Aug\\/13 13:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for spotting that JavaCC warning, Knut. I turned on verbose compilation and saw the same warning on the trunk at the point where I last sync\'d. However, I don\'t see that warning after applying the trivial grammar change which addressed a previous problem you discovered: lack of support for multiple MATCHED clauses. After making that trivial grammar change, the verbose parser output looks like this for me:\u003c\\/p\u003e\\n\\n\u003cp\u003egenParser:\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;echo&#93;\u003c\\/span\u003e   Generating SQL parser...\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Java Compiler Compiler Version 4.0 (Parser Generator)\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e (type \\\"javacc\\\" with no arguments for help)\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Reading from file sqlgrammar.jj . . .\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Note: UNICODE_INPUT option is specified. Please make sure you create the parser\\/lexer using a Reader with the correct character encoding.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e File \\\"TokenMgrError.java\\\" does not exist.  Will create one.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e File \\\"ParseException.java\\\" does not exist.  Will create one.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e File \\\"Token.java\\\" does not exist.  Will create one.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e File \\\"CharStream.java\\\" does not exist.  Will create one.\u003cbr\\/\u003e\\n     \u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Parser generated successfully.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo I think that the parser warning will disappear on trunk when I submit my next patch. Thanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13750091_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13750091_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/13 13:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-08-26T13:50:11+0000\'\u003e26\\/Aug\\/13 13:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for spotting that JavaCC warning, Knut. I turned on verbose compilation and saw the same warning on the trunk at the point where I last sync\'d. However, I don\'t see that warning after applying the trivial grammar change which addressed a previous problem you discovered: lack of support for multiple MATCHED clauses. After making that trivial grammar change, the verbose parser output looks like this for me: \\n\\n genParser: \\n      &#91;echo&#93;    Generating SQL parser... \\n      &#91;java&#93;  Java Compiler Compiler Version 4.0 (Parser Generator) \\n      &#91;java&#93;  (type \\\"javacc\\\" with no arguments for help) \\n      &#91;java&#93;  Reading from file sqlgrammar.jj . . . \\n      &#91;java&#93;  Note: UNICODE_INPUT option is specified. Please make sure you create the parser\\/lexer using a Reader with the correct character encoding. \\n      &#91;java&#93;  File \\\"TokenMgrError.java\\\" does not exist.  Will create one. \\n      &#91;java&#93;  File \\\"ParseException.java\\\" does not exist.  Will create one. \\n      &#91;java&#93;  File \\\"Token.java\\\" does not exist.  Will create one. \\n      &#91;java&#93;  File \\\"CharStream.java\\\" does not exist.  Will create one. \\n      &#91;java&#93;  Parser generated successfully. \\n\\n So I think that the parser warning will disappear on trunk when I submit my next patch. Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13770732\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13770732&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13770732\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13770732_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13770732_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Sep\\/13 12:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-09-18T12:43:22+0000\'\u003e18\\/Sep\\/13 12:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-02-ag-fixParserWarning.diff. This patch removes the spurious comma separating WHEN [ NOT ] MATCHED clauses in the grammar. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis addresses two problems noted by Knut:\u003c\\/p\u003e\\n\\n\u003cp\u003eo You can\'t issue a MERGE statement with multiple WHEN [ NOT ] MATCHED clauses using the grammar described by the functional spec.\u003c\\/p\u003e\\n\\n\u003cp\u003eo If you compile verbosely, you see the following warning during parser generation:\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Note: UNICODE_INPUT option is specified. Please make sure you create the parser\\/lexer using a Reader with the correct character encoding.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Warning: Choice conflict in (...)* construct at line 8313, column 31.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Expansion nested within construct and expansion following construct\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e have common prefixes, one of which is: \\\",\\\"\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;java&#93;\u003c\\/span\u003e Consider using a lookahead of 2 or more for nested expansion.\u003c\\/p\u003e\\n\\n\u003cp\u003eI had planned to roll this fix onto a patch with more functionality, but that patch is taking longer to write than I originally thought. So I\'m submitting this small change by itself.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/sqlgrammar.jj\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13770732_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13770732_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Sep\\/13 12:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-09-18T12:43:22+0000\'\u003e18\\/Sep\\/13 12:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-02-ag-fixParserWarning.diff. This patch removes the spurious comma separating WHEN [ NOT ] MATCHED clauses in the grammar. I am running tests now. \\n\\n This addresses two problems noted by Knut: \\n\\n o You can\'t issue a MERGE statement with multiple WHEN [ NOT ] MATCHED clauses using the grammar described by the functional spec. \\n\\n o If you compile verbosely, you see the following warning during parser generation: \\n\\n  &#91;java&#93;  Note: UNICODE_INPUT option is specified. Please make sure you create the parser\\/lexer using a Reader with the correct character encoding. \\n &#91;java&#93;  Warning: Choice conflict in (...)* construct at line 8313, column 31. \\n &#91;java&#93;  Expansion nested within construct and expansion following construct \\n &#91;java&#93;  have common prefixes, one of which is: \\\",\\\" \\n &#91;java&#93;  Consider using a lookahead of 2 or more for nested expansion. \\n\\n I had planned to roll this fix onto a patch with more functionality, but that patch is taking longer to write than I originally thought. So I\'m submitting this small change by itself. \\n\\n\\n Touches the following file: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/sqlgrammar.jj              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13770828\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13770828&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13770828\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13770828_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13770828_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Sep\\/13 14:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-09-18T14:43:57+0000\'\u003e18\\/Sep\\/13 14:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1524432 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1524432\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1524432\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Remove spurious comma from grammar production for multiple WHEN \u003cspan class=\\\"error\\\"\u003e&#91;NOT&#93;\u003c\\/span\u003e MATCHED clauses in MERGE statement; tests ran cleanly on derby-3155-02-ag-fixParserWarning.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13770828_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13770828_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Sep\\/13 14:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-09-18T14:43:57+0000\'\u003e18\\/Sep\\/13 14:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1524432 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1524432  ] \\n\\n   DERBY-3155  : Remove spurious comma from grammar production for multiple WHEN  &#91;NOT&#93;  MATCHED clauses in MERGE statement; tests ran cleanly on derby-3155-02-ag-fixParserWarning.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13786472\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13786472&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13786472\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13786472_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13786472_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Oct\\/13 18:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-04T18:34:27+0000\'\u003e04\\/Oct\\/13 18:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff. This patch adds support for BackingStoreHashtables which include a RowLocation for each row. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch intends to not degrade the performance of the existing code paths for BackingStoreHashtables which don\'t include RowLocations. BackingStoreHashtables which include RowLocations may incur some extra performance drag.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have hand-tested the changes by running some ad-hoc tests which use in-memory hash tables and by running SpillHashTest. I ran these tests with the current patch and with a dummy version which forced all BackingStoreHashtables to include RowLocation information.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch makes the following changes:\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eA       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/LocatedRow.java\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Introduces a new class, LocatedRow, which is basically a struct containing an array of column values followed by a RowLocation field.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/BackingStoreHashtable.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/BackingStoreHashTableFromScan.java\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Makes a number of changes to BackingStoreHashtable:\u003c\\/p\u003e\\n\\n\u003cp\u003ea) Introduces a new public method, includeRowLocations(). This defaults to return false. However, the BackingStoreHashTableFromScan subclass overrides this method and may return true depending on its constructor args.\u003c\\/p\u003e\\n\\n\u003cp\u003eb) Changes the signature of add_row_to_hash_table() and putRow() to include a RowLocation arg. This arg will be null when includeRowLocations() returns false.\u003c\\/p\u003e\\n\\n\u003cp\u003ec) When includeRowLocations() returns false, the behavior of the class is pretty much unchanged. That is, the in-memory hash table continues to contain DataValueDescriptor[] rows or buckets (lists) of those rows. If the hash table spills to disk, DataValueDescriptor[] rows are written to disk. When they are read back in, they continue to be either standalone DataValueDescriptor[] rows or buckets (lists) of those rows.\u003c\\/p\u003e\\n\\n\u003cp\u003ed) When includeRowLocations() returns true, the in-memory hash table contains LocatedRows and buckets (lists) of LocatedRows. If the hash table spills to disk, DataValueDescriptor[] rows are written to disk; the last cell of these rows is the RowLocation. When they are read back in, they are re-packaged as LocatedRows or buckets of LocatedRows.\u003c\\/p\u003e\\n\\n\u003cp\u003ee) The memory usage methods have been adjusted to account for the extra overhead when a LocatedRow is used instead of a plain DataValueDescriptor[].\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/conglomerate\\/GenericScanController.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/btree\\/BTreeForwardScan.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/heap\\/HeapScan.java\u003c\\/p\u003e\\n\\n\u003cp\u003e3) Store changes to account for the new RowLocation arg added to the signatures of add_row_to_hash_table() and putRow(). A new method was added to HeapScan for constructing RowLocations when necessary.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/storeless\\/org\\/apache\\/derby\\/impl\\/storeless\\/NoOpTransaction.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/TransactionController.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/RAMTransaction.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/unitTests\\/store\\/T_QualifierTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003e4) TransactionController was adjusted to account for the new constructor arg for BackingStoreHashTableFromScan.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/build.xml\u003c\\/p\u003e\\n\\n\u003cp\u003e5) The build target for this package was changed to uncomment the lint diagnostic for unchecked casts.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DistinctScanResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/HashScanResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/NoPutResultSetImpl.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/ScrollInsensitiveResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003e6) ResultSets in the execution layer have been changed to account for the new constructor arg of BackingStoreHashTableFromScan. Changes have also been made to account for the fact that the hash table can now return LocatedRows or buckets of LocatedRows.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13786472_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13786472_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Oct\\/13 18:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-04T18:34:27+0000\'\u003e04\\/Oct\\/13 18:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff. This patch adds support for BackingStoreHashtables which include a RowLocation for each row. I am running tests now. \\n\\n This patch intends to not degrade the performance of the existing code paths for BackingStoreHashtables which don\'t include RowLocations. BackingStoreHashtables which include RowLocations may incur some extra performance drag. \\n\\n I have hand-tested the changes by running some ad-hoc tests which use in-memory hash tables and by running SpillHashTest. I ran these tests with the current patch and with a dummy version which forced all BackingStoreHashtables to include RowLocation information. \\n\\n This patch makes the following changes: \\n\\n ------------------------- \\n\\n A       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/LocatedRow.java \\n\\n 1) Introduces a new class, LocatedRow, which is basically a struct containing an array of column values followed by a RowLocation field. \\n\\n ------------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/BackingStoreHashtable.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/BackingStoreHashTableFromScan.java \\n\\n 2) Makes a number of changes to BackingStoreHashtable: \\n\\n a) Introduces a new public method, includeRowLocations(). This defaults to return false. However, the BackingStoreHashTableFromScan subclass overrides this method and may return true depending on its constructor args. \\n\\n b) Changes the signature of add_row_to_hash_table() and putRow() to include a RowLocation arg. This arg will be null when includeRowLocations() returns false. \\n\\n c) When includeRowLocations() returns false, the behavior of the class is pretty much unchanged. That is, the in-memory hash table continues to contain DataValueDescriptor[] rows or buckets (lists) of those rows. If the hash table spills to disk, DataValueDescriptor[] rows are written to disk. When they are read back in, they continue to be either standalone DataValueDescriptor[] rows or buckets (lists) of those rows. \\n\\n d) When includeRowLocations() returns true, the in-memory hash table contains LocatedRows and buckets (lists) of LocatedRows. If the hash table spills to disk, DataValueDescriptor[] rows are written to disk; the last cell of these rows is the RowLocation. When they are read back in, they are re-packaged as LocatedRows or buckets of LocatedRows. \\n\\n e) The memory usage methods have been adjusted to account for the extra overhead when a LocatedRow is used instead of a plain DataValueDescriptor[]. \\n\\n ------------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/conglomerate\\/GenericScanController.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/btree\\/BTreeForwardScan.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/heap\\/HeapScan.java \\n\\n 3) Store changes to account for the new RowLocation arg added to the signatures of add_row_to_hash_table() and putRow(). A new method was added to HeapScan for constructing RowLocations when necessary. \\n\\n ------------------------- \\n\\n M       java\\/storeless\\/org\\/apache\\/derby\\/impl\\/storeless\\/NoOpTransaction.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/TransactionController.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/RAMTransaction.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/unitTests\\/store\\/T_QualifierTest.java \\n\\n 4) TransactionController was adjusted to account for the new constructor arg for BackingStoreHashTableFromScan. \\n\\n ------------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/build.xml \\n\\n 5) The build target for this package was changed to uncomment the lint diagnostic for unchecked casts. \\n\\n ------------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DistinctScanResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/HashScanResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/NoPutResultSetImpl.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/ScrollInsensitiveResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateResultSet.java \\n\\n 6) ResultSets in the execution layer have been changed to account for the new constructor arg of BackingStoreHashTableFromScan. Changes have also been made to account for the fact that the hash table can now return LocatedRows or buckets of LocatedRows.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13786526\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13786526&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13786526\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13786526_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13786526_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Oct\\/13 19:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-04T19:21:16+0000\'\u003e04\\/Oct\\/13 19:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTests passed cleanly for me on derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13786526_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13786526_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Oct\\/13 19:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-04T19:21:16+0000\'\u003e04\\/Oct\\/13 19:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tests passed cleanly for me on derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13789878\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13789878&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13789878\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13789878_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13789878_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/13 00:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-09T00:36:16+0000\'\u003e09\\/Oct\\/13 00:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003einitial high level thought on store api changes, still looking at detail code.\u003c\\/p\u003e\\n\\n\u003cp\u003e1) I was hoping that the interface change could somehow be made specific to just the merge usage.  Instead it looks like you changed\u003cbr\\/\u003e\\n    the generic hash scan result set code to now handle this mode in addition to original mode.   While better for code sharing, there\u003cbr\\/\u003e\\n    is obviously more overhead for the original code and the original fast path to handle more arguments and more if\\/then\\/elses for the\u003cbr\\/\u003e\\n    new row passing scheme.  I know the overhead is likely small, but would like to avoid if possible.  This may be acceptable, for me it makes a complicated interface even more complicated.  Was looking maybe for\u003cbr\\/\u003e\\n    a brand new backing store hash table that only handled this new LocatedRow.  Downside is probably this causes less code sharing and   new interfaces that are similar to old ones with just handling the new row holder rather than the old.  \u003c\\/p\u003e\\n\\n\u003cp\u003e2) also see that you have a new LocatedRow which seems like a very clean way to handle a row and it\'s associated row location.  But there are interfaces to shove the RowLocation onto the end of the row, which I think is a bad idea.  If this is really needed I wonder if we can move that representation out of the store interface and into the sql layer somehow.   It may become obvious on more detailed review but can you say why this is needed.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13789878_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13789878_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/13 00:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-09T00:36:16+0000\'\u003e09\\/Oct\\/13 00:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    initial high level thought on store api changes, still looking at detail code. \\n\\n 1) I was hoping that the interface change could somehow be made specific to just the merge usage.  Instead it looks like you changed \\n    the generic hash scan result set code to now handle this mode in addition to original mode.   While better for code sharing, there \\n    is obviously more overhead for the original code and the original fast path to handle more arguments and more if\\/then\\/elses for the \\n    new row passing scheme.  I know the overhead is likely small, but would like to avoid if possible.  This may be acceptable, for me it makes a complicated interface even more complicated.  Was looking maybe for \\n    a brand new backing store hash table that only handled this new LocatedRow.  Downside is probably this causes less code sharing and   new interfaces that are similar to old ones with just handling the new row holder rather than the old.   \\n\\n 2) also see that you have a new LocatedRow which seems like a very clean way to handle a row and it\'s associated row location.  But there are interfaces to shove the RowLocation onto the end of the row, which I think is a bad idea.  If this is really needed I wonder if we can move that representation out of the store interface and into the sql layer somehow.   It may become obvious on more detailed review but can you say why this is needed.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13790423\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13790423&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13790423\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13790423_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13790423_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/13 14:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-09T14:57:02+0000\'\u003e09\\/Oct\\/13 14:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003estart of detail review:\u003c\\/p\u003e\\n\\n\u003cp\u003einitial high level thought on store api changes, still looking at detail code.\u003cbr\\/\u003e\\n nits: in LocatedRow: some code more than 80 char line. not sure where derby code standard is, but I find reading 1-line for loops and 1 line procedures distracting. \u003cbr\\/\u003e\\nBackingStoreHashTable:\u003cbr\\/\u003e\\n +unnecessary +80 col lines\u003cbr\\/\u003e\\n +should look at interface and see if external users of this class actually need to know the format of data spilled to disk. If this were private to the implementation then maybe it is less a problem to add the rowlocation to end of row on write to disk and read back from disk. maybe a comment in the routine that creates a BackingStoreHashtable from a rowsource that is never creates the \\\"new\\\" style hash table (or should it be paying attention to include row source?)  It is kind of ugly already that there is implementation code in the \u003cbr\\/\u003e\\ninterface - but that is an existing problem - not anything you added.\u003cbr\\/\u003e\\n + the following call is extra per row in the new code, and is not needed for non-merge system: \u003cbr\\/\u003e\\nObject hashValue = makeHashValue( columnValues, rowLocation ); \u003cbr\\/\u003e\\nmaybe some comments why it ok to pass hashValue into the space accounting rather than row. I think it is ok, just lost the logic while reading - i think hashValue has the row in it at this point.\u003cbr\\/\u003e\\n more single line if body else body \u003c\\/p\u003e\\n\\n\u003cp\u003eas far in detail i got though patch so far (around line 300 of 1000).   \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13790423_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13790423_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/13 14:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-09T14:57:02+0000\'\u003e09\\/Oct\\/13 14:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    start of detail review: \\n\\n initial high level thought on store api changes, still looking at detail code. \\n nits: in LocatedRow: some code more than 80 char line. not sure where derby code standard is, but I find reading 1-line for loops and 1 line procedures distracting.  \\nBackingStoreHashTable: \\n +unnecessary +80 col lines \\n +should look at interface and see if external users of this class actually need to know the format of data spilled to disk. If this were private to the implementation then maybe it is less a problem to add the rowlocation to end of row on write to disk and read back from disk. maybe a comment in the routine that creates a BackingStoreHashtable from a rowsource that is never creates the \\\"new\\\" style hash table (or should it be paying attention to include row source?)  It is kind of ugly already that there is implementation code in the  \\ninterface - but that is an existing problem - not anything you added. \\n + the following call is extra per row in the new code, and is not needed for non-merge system:  \\nObject hashValue = makeHashValue( columnValues, rowLocation );  \\nmaybe some comments why it ok to pass hashValue into the space accounting rather than row. I think it is ok, just lost the logic while reading - i think hashValue has the row in it at this point. \\n more single line if body else body  \\n\\n as far in detail i got though patch so far (around line 300 of 1000).                 \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13790467\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13790467&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13790467\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13790467_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13790467_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/13 15:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-09T15:26:10+0000\'\u003e09\\/Oct\\/13 15:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mike,\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for the initial review of derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff. Some responses follow:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) You have put your finger on the big design problem for BackingStoreHashtable: the desire for code re-use vs. the desire to not perturb the existing code path. These were the options I considered:\u003c\\/p\u003e\\n\\n\u003cp\u003ea) Clone BackingStoreHashtable in order to create a new implementation just for RowLocations.\u003c\\/p\u003e\\n\\n\u003cp\u003e+ With this solution, it\'s easy to prove to yourself that the existing code path is not perturbed.\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThis is a very large, complicated class to begin with. I did not want to multiply the code complexity by 2. Cloning creates the brittle situation where even experts can forget to apply a bug fix in two parallel places.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eb) Add the RowLocation support inline inside the existing BackingStoreHashtable.\u003c\\/p\u003e\\n\\n\u003cp\u003e+ The additional code complexity and brittleness is minimal.\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eHowever, the existing code path is perturbed.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003ec) Subclass BackingStoreHashtable.\u003c\\/p\u003e\\n\\n\u003cp\u003e+ This would add less complexity to the existing code path than (b).\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThis is probably less brittle than (a) but more brittle than (b).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe additional overhead for the existing code path is pretty much the same as for (b). Basically some conditional blocks could be turned into method calls.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eBut now BackingStoreHashTableFromScan would probably need to be subclassed too. We would have 4 classes doing the job of 1.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003ed) Subclass BackingStoreHashTableFromScan.\u003c\\/p\u003e\\n\\n\u003cp\u003e+\\/ This has pretty much the same advantages and disadvantages as (c). In addition...\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThis would make it more difficult to add support for RowLocations to hash tables which AREN\'T driven by scans.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003ee) Instead of subclassing BackingStoreHashTableFromScan, just add some new methods to it.\u003c\\/p\u003e\\n\\n\u003cp\u003e+\\/ This has pretty much the same advantages and disadvantages as (d). In addition...\u003c\\/p\u003e\\n\\n\u003cp\u003e+ Creates 1 fewer class.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo summarize:\u003c\\/p\u003e\\n\\n\u003cp\u003e(a) I rejected this option because it seemed too complex.\u003c\\/p\u003e\\n\\n\u003cp\u003e(b) I settled on this option because it seemed to strike the best balance between complexity and performance. I do think that the additional overhead for the existing code path is not measurable.\u003c\\/p\u003e\\n\\n\u003cp\u003e(c) I rejected this option because it seemed too complex.\u003c\\/p\u003e\\n\\n\u003cp\u003e(d) (e) I rejected these because of the difficulty they pose for adding future RowLocation support to hash tables which AREN\'T driven by scans.\u003c\\/p\u003e\\n\\n\u003cp\u003eOther suggestions are certainly welcome!\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e2) As you note, LocatedRow contains the logic for appending the RowLocation onto the end of a DataValueDescriptor[]. The logic is indeed needed by the language layer. But it\'s also needed by BackingStoreHashtable when it spills rows to disk. These were the options I considered:\u003c\\/p\u003e\\n\\n\u003cp\u003ea) Put the logic in LocatedRow, where it can be shared by both the language and Store layers.\u003c\\/p\u003e\\n\\n\u003cp\u003eb) Put the logic somewhere else, where it can be shared.\u003c\\/p\u003e\\n\\n\u003cp\u003ec) Clone the logic, keeping one copy of the code in the language layer and another copy in the Store.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the interests of reduced complexity and brittleness, I thought that (a) was the best choice. But other suggestions are certainly welcome.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks,\u003cbr\\/\u003e\\n-Rick\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13790467_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13790467_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/13 15:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-09T15:26:10+0000\'\u003e09\\/Oct\\/13 15:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mike, \\n\\n Thanks for the initial review of derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff. Some responses follow: \\n\\n 1) You have put your finger on the big design problem for BackingStoreHashtable: the desire for code re-use vs. the desire to not perturb the existing code path. These were the options I considered: \\n\\n a) Clone BackingStoreHashtable in order to create a new implementation just for RowLocations. \\n\\n + With this solution, it\'s easy to prove to yourself that the existing code path is not perturbed. \\n\\n \\n\\t This is a very large, complicated class to begin with. I did not want to multiply the code complexity by 2. Cloning creates the brittle situation where even experts can forget to apply a bug fix in two parallel places. \\n \\n\\n\\n b) Add the RowLocation support inline inside the existing BackingStoreHashtable. \\n\\n + The additional code complexity and brittleness is minimal. \\n\\n \\n\\t However, the existing code path is perturbed. \\n \\n\\n\\n c) Subclass BackingStoreHashtable. \\n\\n + This would add less complexity to the existing code path than (b). \\n\\n \\n\\t This is probably less brittle than (a) but more brittle than (b). \\n \\n\\n\\n \\n\\t The additional overhead for the existing code path is pretty much the same as for (b). Basically some conditional blocks could be turned into method calls. \\n \\n\\n\\n \\n\\t But now BackingStoreHashTableFromScan would probably need to be subclassed too. We would have 4 classes doing the job of 1. \\n \\n\\n\\n d) Subclass BackingStoreHashTableFromScan. \\n\\n +\\/ This has pretty much the same advantages and disadvantages as (c). In addition... \\n\\n \\n\\t This would make it more difficult to add support for RowLocations to hash tables which AREN\'T driven by scans. \\n \\n\\n\\n e) Instead of subclassing BackingStoreHashTableFromScan, just add some new methods to it. \\n\\n +\\/ This has pretty much the same advantages and disadvantages as (d). In addition... \\n\\n + Creates 1 fewer class. \\n\\n To summarize: \\n\\n (a) I rejected this option because it seemed too complex. \\n\\n (b) I settled on this option because it seemed to strike the best balance between complexity and performance. I do think that the additional overhead for the existing code path is not measurable. \\n\\n (c) I rejected this option because it seemed too complex. \\n\\n (d) (e) I rejected these because of the difficulty they pose for adding future RowLocation support to hash tables which AREN\'T driven by scans. \\n\\n Other suggestions are certainly welcome! \\n\\n\\n 2) As you note, LocatedRow contains the logic for appending the RowLocation onto the end of a DataValueDescriptor[]. The logic is indeed needed by the language layer. But it\'s also needed by BackingStoreHashtable when it spills rows to disk. These were the options I considered: \\n\\n a) Put the logic in LocatedRow, where it can be shared by both the language and Store layers. \\n\\n b) Put the logic somewhere else, where it can be shared. \\n\\n c) Clone the logic, keeping one copy of the code in the language layer and another copy in the Store. \\n\\n In the interests of reduced complexity and brittleness, I thought that (a) was the best choice. But other suggestions are certainly welcome. \\n\\n Thanks, \\n-Rick              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13790542\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13790542&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13790542\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13790542_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13790542_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/13 15:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-09T15:53:54+0000\'\u003e09\\/Oct\\/13 15:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mike,\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for the second set of comments on derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff. I\'m happy to make the formatting changes you suggest. Some more responses follow:\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e&gt; should look at interface and see if external users of this class actually need to know the format of data spilled to disk. If this were private to the implementation then maybe it is less a problem to add the rowlocation to end of row on write to disk and read back from disk.\u003c\\/p\u003e\\n\\n\u003cp\u003eI may not understand this question, but here are some more thoughts:\u003c\\/p\u003e\\n\\n\u003cp\u003eThe api for BackingStoreHashtable has certainly become uglier. We go from a bad situation where BackingStoreHashtable can return 2 kinds of objects and the calling code has to figure out the type of what\'s being retrieved. The 2 types are...\u003c\\/p\u003e\\n\\n\u003cp\u003ei) Rows\u003cbr\\/\u003e\\nii) Buckets of rows\u003c\\/p\u003e\\n\\n\u003cp\u003e...and the patch takes us to a situation where BackingStoreHashtable can now return 4 types of objects:\u003c\\/p\u003e\\n\\n\u003cp\u003ei) Rows\u003cbr\\/\u003e\\nii) Buckets of rows\u003cbr\\/\u003e\\niii) LocatedRows\u003cbr\\/\u003e\\niv) Buckets of LocatedRows\u003c\\/p\u003e\\n\\n\u003cp\u003eIt might be cleaner if the existing methods always returned buckets of rows and if we added some new methods to return buckets of LocatedRows. However, a change like this would perturb more code. In addition, wrapping single rows in vacuous buckets might result in a measurable performance hit on old code paths.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; maybe a comment in the routine that creates a BackingStoreHashtable from a rowsource that is never creates the \\\"new\\\" style hash table (or should it be paying attention to include row source?) It is kind of ugly already that there is implementation code in the\u003cbr\\/\u003e\\ninterface - but that is an existing problem - not anything you added.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis sounds like a good idea.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e&gt; the following call is extra per row in the new code, and is not needed for non-merge system:\u003cbr\\/\u003e\\nObject hashValue = makeHashValue( columnValues, rowLocation );\u003cbr\\/\u003e\\nmaybe some comments why it ok to pass hashValue into the space accounting rather than row. I think it is ok, just lost the logic while reading - i think hashValue has the row in it at this point.\u003c\\/p\u003e\\n\\n\u003cp\u003eAdding a comment sounds like a good idea. The point of the code is this: Space accounting is responsible for calculating how much space is taken up by the whole value which is stored in the hash table. For rows which don\'t have RowLocations, the value is just a row (a DataValueDescriptor[]). But for LocatedRows, there is some additional space consumed by the RowLocation and by the wrapping LocatedRow object.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks,\u003cbr\\/\u003e\\n-Rick\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13790542_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13790542_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/13 15:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-09T15:53:54+0000\'\u003e09\\/Oct\\/13 15:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mike, \\n\\n Thanks for the second set of comments on derby-3155-03-ae-backingStoreHashtableWithRowLocation.diff. I\'m happy to make the formatting changes you suggest. Some more responses follow: \\n\\n\\n &gt; should look at interface and see if external users of this class actually need to know the format of data spilled to disk. If this were private to the implementation then maybe it is less a problem to add the rowlocation to end of row on write to disk and read back from disk. \\n\\n I may not understand this question, but here are some more thoughts: \\n\\n The api for BackingStoreHashtable has certainly become uglier. We go from a bad situation where BackingStoreHashtable can return 2 kinds of objects and the calling code has to figure out the type of what\'s being retrieved. The 2 types are... \\n\\n i) Rows \\nii) Buckets of rows \\n\\n ...and the patch takes us to a situation where BackingStoreHashtable can now return 4 types of objects: \\n\\n i) Rows \\nii) Buckets of rows \\niii) LocatedRows \\niv) Buckets of LocatedRows \\n\\n It might be cleaner if the existing methods always returned buckets of rows and if we added some new methods to return buckets of LocatedRows. However, a change like this would perturb more code. In addition, wrapping single rows in vacuous buckets might result in a measurable performance hit on old code paths. \\n\\n &gt; maybe a comment in the routine that creates a BackingStoreHashtable from a rowsource that is never creates the \\\"new\\\" style hash table (or should it be paying attention to include row source?) It is kind of ugly already that there is implementation code in the \\ninterface - but that is an existing problem - not anything you added. \\n\\n This sounds like a good idea. \\n\\n\\n &gt; the following call is extra per row in the new code, and is not needed for non-merge system: \\nObject hashValue = makeHashValue( columnValues, rowLocation ); \\nmaybe some comments why it ok to pass hashValue into the space accounting rather than row. I think it is ok, just lost the logic while reading - i think hashValue has the row in it at this point. \\n\\n Adding a comment sounds like a good idea. The point of the code is this: Space accounting is responsible for calculating how much space is taken up by the whole value which is stored in the hash table. For rows which don\'t have RowLocations, the value is just a row (a DataValueDescriptor[]). But for LocatedRows, there is some additional space consumed by the RowLocation and by the wrapping LocatedRow object. \\n\\n Thanks, \\n-Rick              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13790987\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13790987&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13790987\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13790987_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13790987_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/13 23:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-09T23:19:06+0000\'\u003e09\\/Oct\\/13 23:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ethanks for the thought process behind the decisions on the change.  Given that and I can\'t come up with anything better I am ok with the overall approach.   \u003c\\/p\u003e\\n\\n\u003cp\u003eObviously will need some tests for the code path, but I assume that will be covered by your overall changes to use this.  I  really like that \u003cbr\\/\u003e\\nyou ran all the code in your path with this mode as default, maybe worth doing that one last time when you have everything checked in.\u003c\\/p\u003e\\n\\n\u003cp\u003eif it makes sense for you i will wait for your next patch to do detailed review of the rest.  I understand this one was to make sure you were\u003cbr\\/\u003e\\non a good path - which I think you are.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13790987_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13790987_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/13 23:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-09T23:19:06+0000\'\u003e09\\/Oct\\/13 23:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    thanks for the thought process behind the decisions on the change.  Given that and I can\'t come up with anything better I am ok with the overall approach.    \\n\\n Obviously will need some tests for the code path, but I assume that will be covered by your overall changes to use this.  I  really like that  \\nyou ran all the code in your path with this mode as default, maybe worth doing that one last time when you have everything checked in. \\n\\n if it makes sense for you i will wait for your next patch to do detailed review of the rest.  I understand this one was to make sure you were \\non a good path - which I think you are.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13791710\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13791710&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13791710\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13791710_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13791710_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Oct\\/13 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-10T17:32:59+0000\'\u003e10\\/Oct\\/13 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Rick Hillegas - 14\\/Oct\\/13 12:19\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-03-af-backingStoreHashtableWithRowLocation.diff. This patch incorporates Mike\'s review comments. I have run SpillHashTest as is and also with some dummy code which forces backing hash tables to always include RowLocations. I am running the full tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch makes the following changes to the previous rev. Most of these changes are in BackingStoreHashtable:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Observes an 80 character line limit.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Regularizes the formatting of \\\"if\\\" statements: Consequents are always enclosed in curly braces. Consequents no longer appear on the same line as the \\\"if\\\" condition. The occasional form \\\"if(\\\" is replaced with \\\"if (\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003e3) The makeHashValue() method has been eliminated. Its code has been inlined in the two places where it was called.\u003c\\/p\u003e\\n\\n\u003cp\u003e4) Extra comments have been added. In particular, comments have been added to point out that RowLocations are not currently supported for RowSource-based hash tables. Also, comments have been added to the elements() and get() methods, explaining what kind of returned Objects the caller must expect.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the same files as the previous rev of the patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13791710_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13791710_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Oct\\/13 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-10T17:32:59+0000\'\u003e10\\/Oct\\/13 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Rick Hillegas - 14\\/Oct\\/13 12:19\\\"\u003eedited\u003c\\/span\u003e                   Attaching derby-3155-03-af-backingStoreHashtableWithRowLocation.diff. This patch incorporates Mike\'s review comments. I have run SpillHashTest as is and also with some dummy code which forces backing hash tables to always include RowLocations. I am running the full tests now. \\n\\n This patch makes the following changes to the previous rev. Most of these changes are in BackingStoreHashtable: \\n\\n 1) Observes an 80 character line limit. \\n\\n 2) Regularizes the formatting of \\\"if\\\" statements: Consequents are always enclosed in curly braces. Consequents no longer appear on the same line as the \\\"if\\\" condition. The occasional form \\\"if(\\\" is replaced with \\\"if (\\\". \\n\\n 3) The makeHashValue() method has been eliminated. Its code has been inlined in the two places where it was called. \\n\\n 4) Extra comments have been added. In particular, comments have been added to point out that RowLocations are not currently supported for RowSource-based hash tables. Also, comments have been added to the elements() and get() methods, explaining what kind of returned Objects the caller must expect. \\n\\n\\n Touches the same files as the previous rev of the patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13791852\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13791852&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13791852\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13791852_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13791852_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Oct\\/13 19:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-10T19:00:26+0000\'\u003e10\\/Oct\\/13 19:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTests passed cleanly for me on derby-3155-04-ab-deleteClauseNoStore.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13791852_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13791852_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Oct\\/13 19:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-10T19:00:26+0000\'\u003e10\\/Oct\\/13 19:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tests passed cleanly for me on derby-3155-04-ab-deleteClauseNoStore.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13799432\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13799432&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13799432\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13799432_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13799432_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/13 19:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-18T19:28:28+0000\'\u003e18\\/Oct\\/13 19:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-04-ae-deleteAction.diff. This patch adds code-generation and execution support for the DELETE actions of MERGE statements. With this patch I am able to successfully use a MERGE statement to DELETE rows from a table. Cascaded foreign keys and DELETE trigger actions are handled correctly. I have only been able to test this functionality with search conditions which cause the optimizer to pick a nested loop strategy for the driving left join of the MERGE statement. This patch will need to be adjusted after the review of derby-3155-03-af-backingStoreHashtableWithRowLocation.diff is done and that functionality is committed. However, I am attaching this patch now just in case my laptop suffers a disaster in the meantime.\u003c\\/p\u003e\\n\\n\u003cp\u003eEven after adjustment, the DELETE functionality will need more work, particularly in the areas of permissions checking and dependency tracking.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor people who are interested in a preliminary peek at the implementation, the best place to start is the header comment on MergeNode.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13799432_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13799432_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Oct\\/13 19:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-18T19:28:28+0000\'\u003e18\\/Oct\\/13 19:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-04-ae-deleteAction.diff. This patch adds code-generation and execution support for the DELETE actions of MERGE statements. With this patch I am able to successfully use a MERGE statement to DELETE rows from a table. Cascaded foreign keys and DELETE trigger actions are handled correctly. I have only been able to test this functionality with search conditions which cause the optimizer to pick a nested loop strategy for the driving left join of the MERGE statement. This patch will need to be adjusted after the review of derby-3155-03-af-backingStoreHashtableWithRowLocation.diff is done and that functionality is committed. However, I am attaching this patch now just in case my laptop suffers a disaster in the meantime. \\n\\n Even after adjustment, the DELETE functionality will need more work, particularly in the areas of permissions checking and dependency tracking. \\n\\n For people who are interested in a preliminary peek at the implementation, the best place to start is the header comment on MergeNode.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13802012\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13802012&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13802012\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13802012_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802012_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 17:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T17:01:08+0000\'\u003e22\\/Oct\\/13 17:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ehi, I am reviewing in detail.  could you expand on the following:\u003cbr\\/\u003e\\n4) Extra comments have been added. In particular, comments have been added to point out that RowLocations are not currently supported for RowSource-based hash tables.\u003c\\/p\u003e\\n\\n\u003cp\u003eIs the plan to support this with future changes?  Or are RowSource-based hash tables always indexes?  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13802012_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802012_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 17:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T17:01:08+0000\'\u003e22\\/Oct\\/13 17:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    hi, I am reviewing in detail.  could you expand on the following: \\n4) Extra comments have been added. In particular, comments have been added to point out that RowLocations are not currently supported for RowSource-based hash tables. \\n\\n Is the plan to support this with future changes?  Or are RowSource-based hash tables always indexes?                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13802063\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13802063&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13802063\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13802063_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802063_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 17:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T17:53:42+0000\'\u003e22\\/Oct\\/13 17:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eoverall comments:\u003cbr\\/\u003e\\ni am fine with approach and implementation.\u003cbr\\/\u003e\\nwould like to understand the includeLocations use in the code, if this is in progress or what is expected for whole project.\u003cbr\\/\u003e\\nmight be good to add an assert somewhere if code tries to ask for a RowLocation on a btree, or at least understand what\u003cbr\\/\u003e\\n  happens in checked in code if that happened.\u003c\\/p\u003e\\n\\n\u003cp\u003eHere are file by file, mostly just more style and 80 char comments - and content comments are about the above question:\u003cbr\\/\u003e\\nIndex: java\\/storeless\\/org\\/apache\\/derby\\/impl\\/storeless\\/NoOpTransaction.java\u003cbr\\/\u003e\\nno comments.\u003c\\/p\u003e\\n\\n\u003cp\u003ejava\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/LocatedRow.java (revision 0)\u003cbr\\/\u003e\\nno comments.\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/BackingStoreHashtable.java\u003c\\/p\u003e\\n\\n\u003cp\u003epsuedo code in BackingStoreHashTable javdoc is not right anymore, it shows row\u003cbr\\/\u003e\\nas being Object[].  Not sure if the hash description is right or not still.\u003c\\/p\u003e\\n\\n\u003cp\u003enit: comments added, over 80 char line\u003c\\/p\u003e\\n\\n\u003cp\u003ethis comment is confusing to me:\u003cbr\\/\u003e\\n Currently, if the RowSource is not null, then there is no su\u003cbr\\/\u003e\\n pport for including RowLocations in the returned rows. That functionality is\u003cbr\\/\u003e\\n only supported for scans from base tables.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think BackingStoreHashTable constructor action is now dependent on info\u003cbr\\/\u003e\\nprovided from the passed in row source, some comment on that would help - which\u003cbr\\/\u003e\\nmay be what the above is trying to say.\u003c\\/p\u003e\\n\\n\u003cp\u003eis it right that includeRowLocations is hard coded to return false?\u003c\\/p\u003e\\n\\n\u003cp\u003enit: the following style still in code (this could just be my issue):\u003cbr\\/\u003e\\n+        if ( !includeRowLocations() )\u003cbr\\/\u003e\\n+        \u003c\\/p\u003e\\n{ return diskRow; }\\n\u003cp\u003e+        else \u003c\\/p\u003e\\n{ return new LocatedRow( diskRow ); }\\n\u003cp\u003eI think the 2 acceptable forms are either:\u003cbr\\/\u003e\\nif ( !includeRowLocations() )\u003cbr\\/\u003e\\n{\u003cbr\\/\u003e\\n    return diskRow;\u003cbr\\/\u003e\\n}\u003cbr\\/\u003e\\nelse\u003cbr\\/\u003e\\n{\u003cbr\\/\u003e\\n    return new LocatedRow( diskRow );\u003cbr\\/\u003e\\n}\u003c\\/p\u003e\\n\\n\u003cp\u003eif ( !includeRowLocations() ) \u003c\\/p\u003e\\n{\\n\\n    return diskRow;\\n\\n}\\n\u003cp\u003e else {\u003c\\/p\u003e\\n\\n\u003cp\u003e    return new LocatedRow( diskRow );\u003cbr\\/\u003e\\n}\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/TransactionController.java\u003c\\/p\u003e\\n\\n\u003cp\u003enit: over 80 char lines\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/build.xml\u003c\\/p\u003e\\n\\n\u003cp\u003eno comments.\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DistinctScanResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eno comments\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/HashScanResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eno comments\u003cbr\\/\u003e\\nIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/NoPutResultSetImpl.java\u003c\\/p\u003e\\n\\n\u003cp\u003enit: single line code style\u003cbr\\/\u003e\\nno other comments\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/ScrollInsensitiveResultSet.\u003cbr\\/\u003e\\njava\u003cbr\\/\u003e\\nno comments, not reviewed.\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eno comments\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/conglomerate\\/GenericScanCo\u003cbr\\/\u003e\\nntroller.java\u003cbr\\/\u003e\\nnit: over 80 char\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/BackingStoreHashTableFromS\u003cbr\\/\u003e\\ncan.java\u003c\\/p\u003e\\n\\n\u003cp\u003eno comments\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/btree\\/BTreeForwardScan.jav\u003cbr\\/\u003e\\na\u003cbr\\/\u003e\\nno comments.\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/RAMTransaction.java\u003c\\/p\u003e\\n\\n\u003cp\u003eno comments.\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/heap\\/HeapScan.java\u003c\\/p\u003e\\n\\n\u003cp\u003eno comments.\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/testing\\/org\\/apache\\/derbyTesting\\/unitTests\\/store\\/T_QualifierTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eno comments.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13802063_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802063_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 17:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T17:53:42+0000\'\u003e22\\/Oct\\/13 17:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    overall comments: \\ni am fine with approach and implementation. \\nwould like to understand the includeLocations use in the code, if this is in progress or what is expected for whole project. \\nmight be good to add an assert somewhere if code tries to ask for a RowLocation on a btree, or at least understand what \\n  happens in checked in code if that happened. \\n\\n Here are file by file, mostly just more style and 80 char comments - and content comments are about the above question: \\nIndex: java\\/storeless\\/org\\/apache\\/derby\\/impl\\/storeless\\/NoOpTransaction.java \\nno comments. \\n\\n java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/LocatedRow.java (revision 0) \\nno comments. \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/BackingStoreHashtable.java \\n\\n psuedo code in BackingStoreHashTable javdoc is not right anymore, it shows row \\nas being Object[].  Not sure if the hash description is right or not still. \\n\\n nit: comments added, over 80 char line \\n\\n this comment is confusing to me: \\n Currently, if the RowSource is not null, then there is no su \\n pport for including RowLocations in the returned rows. That functionality is \\n only supported for scans from base tables. \\n\\n I think BackingStoreHashTable constructor action is now dependent on info \\nprovided from the passed in row source, some comment on that would help - which \\nmay be what the above is trying to say. \\n\\n is it right that includeRowLocations is hard coded to return false? \\n\\n nit: the following style still in code (this could just be my issue): \\n+        if ( !includeRowLocations() ) \\n+         \\n{ return diskRow; }\\n +        else  \\n{ return new LocatedRow( diskRow ); }\\n I think the 2 acceptable forms are either: \\nif ( !includeRowLocations() ) \\n{ \\n    return diskRow; \\n} \\nelse \\n{ \\n    return new LocatedRow( diskRow ); \\n} \\n\\n if ( !includeRowLocations() )  \\n{\\n\\n    return diskRow;\\n\\n}\\n  else { \\n\\n     return new LocatedRow( diskRow ); \\n} \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/TransactionController.java \\n\\n nit: over 80 char lines \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/build.xml \\n\\n no comments. \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DistinctScanResultSet.java \\n\\n no comments \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/HashScanResultSet.java \\n\\n no comments \\nIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/NoPutResultSetImpl.java \\n\\n nit: single line code style \\nno other comments \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/ScrollInsensitiveResultSet. \\njava \\nno comments, not reviewed. \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateResultSet.java \\n\\n no comments \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/conglomerate\\/GenericScanCo \\nntroller.java \\nnit: over 80 char \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/BackingStoreHashTableFromS \\ncan.java \\n\\n no comments \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/btree\\/BTreeForwardScan.jav \\na \\nno comments. \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/RAMTransaction.java \\n\\n no comments. \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/heap\\/HeapScan.java \\n\\n no comments. \\n\\n Index: java\\/testing\\/org\\/apache\\/derbyTesting\\/unitTests\\/store\\/T_QualifierTest.java \\n\\n no comments.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13802082\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13802082&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13802082\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802082_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802082_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 18:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T18:21:13+0000\'\u003e22\\/Oct\\/13 18:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mike,\u003c\\/p\u003e\\n\\n\u003cp\u003eResponding to your first comment:\u003c\\/p\u003e\\n\\n\u003cp\u003eIf someone needs RowLocations in RowSource-driven hash tables, then they are welcome to add that functionality. I was not planning to add that functionality as part of this effort.\u003c\\/p\u003e\\n\\n\u003cp\u003eBackingStoreHashtables appear to be created in two ways right now:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Directly by invoking the BackingStoreHashtable constructor.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Indirectly by calling TransactionController.createBackingStoreHashtableFromScan().\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the execution layer, ScrollInsensitiveResultSet and UpdateResultSet directly create BackingStoreHashtables with null RowSource arguments. Also in the execution layer, HashTableResultSet directly creates a BackingStoreHashtable with a RowSource which is itself, that is, essentially a filtered version of its child node (and therefore not a scan).\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the Store layer, BackingStoreHashTableFromScan directly invokes the BackingStoreHashtable constructor (its superclass) with a null RowSource.\u003c\\/p\u003e\\n\\n\u003cp\u003eRAMTransaction.createBackingStoreHashtableFromScan() itself constructs a BackingStoreHashTableFromScan and therefore the RowSource is null.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo I am only seeing one code path where a non-null RowSource is specified. That is in HashTableResultSet. But I must be missing something because your question implies that these are created by index scans.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks,\u003cbr\\/\u003e\\n-Rick\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802082_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802082_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 18:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T18:21:13+0000\'\u003e22\\/Oct\\/13 18:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mike, \\n\\n Responding to your first comment: \\n\\n If someone needs RowLocations in RowSource-driven hash tables, then they are welcome to add that functionality. I was not planning to add that functionality as part of this effort. \\n\\n BackingStoreHashtables appear to be created in two ways right now: \\n\\n 1) Directly by invoking the BackingStoreHashtable constructor. \\n\\n 2) Indirectly by calling TransactionController.createBackingStoreHashtableFromScan(). \\n\\n In the execution layer, ScrollInsensitiveResultSet and UpdateResultSet directly create BackingStoreHashtables with null RowSource arguments. Also in the execution layer, HashTableResultSet directly creates a BackingStoreHashtable with a RowSource which is itself, that is, essentially a filtered version of its child node (and therefore not a scan). \\n\\n In the Store layer, BackingStoreHashTableFromScan directly invokes the BackingStoreHashtable constructor (its superclass) with a null RowSource. \\n\\n RAMTransaction.createBackingStoreHashtableFromScan() itself constructs a BackingStoreHashTableFromScan and therefore the RowSource is null. \\n\\n So I am only seeing one code path where a non-null RowSource is specified. That is in HashTableResultSet. But I must be missing something because your question implies that these are created by index scans. \\n\\n Thanks, \\n-Rick              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13802201\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13802201&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13802201\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802201_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802201_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 19:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T19:58:42+0000\'\u003e22\\/Oct\\/13 19:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mike,\u003c\\/p\u003e\\n\\n\u003cp\u003eHere are responses to your later comments:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; would like to understand the includeLocations use in the code, if this\u003cbr\\/\u003e\\n&gt; is in progress or what is expected for whole project.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn a nutshell, includeRowLocations() == true iff the contents of the hash table are LocatedRows. Conversely, includeRowLocations() == false iff the contents of the hash table are DataValueDescriptor[]. Support for LocatedRows is provided for scan-driven (rather than RowSource-driven) hashtables. If someone wants to add LocatedRow support for RowSource-driven hash tables, they are welcome to do so. But I don\'t recommend doing this until someone has an actual use-case which would benefit from this feature and prove that it works. At this time, my MERGE statement work hasn\'t created such a use-case.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; might be good to add an assert somewhere if code tries to ask for a\u003cbr\\/\u003e\\n&gt; RowLocation on a btree, or at least understand what\u003cbr\\/\u003e\\n&gt; happens in checked in code if that happened.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will put the following assertion at the beginning of BTreeForwardScan.fetchRows():\u003c\\/p\u003e\\n\\n\u003cp\u003e        if (SanityManager.DEBUG)\u003c\\/p\u003e\\n        {\\n            \\/\\/ RowLocations in the BTree itself are unstable and should\\n            \\/\\/ not be put in long-lived structures like persistent hash tables.\\n            SanityManager.ASSERT\\n                ( (hash_table == null) || !hash_table.includeRowLocations() );\\n        }\\n\\n\u003cp\u003e&gt; Index: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/BackingStoreHashtable.java\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; psuedo code in BackingStoreHashTable javdoc is not right anymore, it shows row\u003cbr\\/\u003e\\n&gt; as being Object[]. Not sure if the hash description is right or not still.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will change the row declaration in the pseudo-code to:\u003c\\/p\u003e\\n\\n\u003cp\u003eObject row; \\/\\/ is a DataValueDescriptor[] or a LocatedRow\u003c\\/p\u003e\\n\\n\u003cp\u003eThe hash description looks right to me, but I am happy to correct it if you see a problem.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; nit: comments added, over 80 char line\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t see any added lines which bust this limit now. There are some original lines which bust this limit, however. If you still think some lines should be corrected, please give me the offending line numbers.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; this comment is confusing to me:\u003cbr\\/\u003e\\n&gt; Currently, if the RowSource is not null, then there is no su\u003cbr\\/\u003e\\n&gt; pport for including RowLocations in the returned rows. That functionality is\u003cbr\\/\u003e\\n&gt; only supported for scans from base tables.\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; I think BackingStoreHashTable constructor action is now dependent on info\u003cbr\\/\u003e\\n&gt; provided from the passed in row source, some comment on that would help - which\u003cbr\\/\u003e\\n&gt; may be what the above is trying to say.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will change the comment to the following. I hope this is less confusing...\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003econstructor. RowLocations are supported iff row_source is null.\u003c\\/li\u003e\\n\\t\u003cli\u003eRowLocations in a non-null row_source can be added later\u003c\\/li\u003e\\n\\t\u003cli\u003eif there is a use-case that stresses this behavior.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e...and I will add the following sanity check at the beginning of the constructor:\u003c\\/p\u003e\\n\\n\u003cp\u003e        if (SanityManager.DEBUG)\u003cbr\\/\u003e\\n        {\u003cbr\\/\u003e\\n            \\/\\/ RowLocations are not currently supported if the\u003cbr\\/\u003e\\n            \\/\\/ hash table is being filled from a non-null\u003cbr\\/\u003e\\n            \\/\\/ row_source arg.\u003cbr\\/\u003e\\n            if ( row_source != null )\u003c\\/p\u003e\\n            {\\n                SanityManager.ASSERT( !includeRowLocations() );\\n            }\\n\u003cp\u003e        }\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; is it right that includeRowLocations is hard coded to return false?\u003c\\/p\u003e\\n\\n\u003cp\u003eThat\'s correct. That method is overridden by the BackingStoreHashTableFromScan subclass, based on its constructor args.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; nit: the following style still in code (this could just be my issue):\u003cbr\\/\u003e\\n&gt; + if ( !includeRowLocations() )\u003cbr\\/\u003e\\n&gt; +\u003cbr\\/\u003e\\n&gt; \u003c\\/p\u003e\\n{ return diskRow; }\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; + else\u003cbr\\/\u003e\\n&gt; { return new LocatedRow( diskRow ); }\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; I think the 2 acceptable forms are either:\u003cbr\\/\u003e\\n&gt; if ( !includeRowLocations() )\u003cbr\\/\u003e\\n&gt; { return diskRow; }\\n\u003cp\u003e&gt; \u003cbr\\/\u003e\\n&gt; else\u003cbr\\/\u003e\\n&gt; \u003c\\/p\u003e\\n{ return new LocatedRow( diskRow ); }\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; if ( !includeRowLocations() )\u003cbr\\/\u003e\\n&gt; { return diskRow; }\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; else\u003cbr\\/\u003e\\n&gt; { return new LocatedRow( diskRow ); }\\n\u003cp\u003e \u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m afraid I\'m not following this one. I don\'t see any instances of a blank line following \\\"if ( !includeRowLocations() )\\\" in the diff file. Can you give me the line number of the problematic usage?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Index: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/TransactionController.java\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; nit: over 80 char lines\u003c\\/p\u003e\\n\\n\u003cp\u003eDone.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/conglomerate\\/GenericScanCo\u003cbr\\/\u003e\\n&gt; ntroller.java\u003cbr\\/\u003e\\n&gt; nit: over 80 char\u003c\\/p\u003e\\n\\n\u003cp\u003eDone.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks,\u003cbr\\/\u003e\\n-Rick\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802201_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802201_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 19:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T19:58:42+0000\'\u003e22\\/Oct\\/13 19:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mike, \\n\\n Here are responses to your later comments: \\n\\n &gt; would like to understand the includeLocations use in the code, if this \\n&gt; is in progress or what is expected for whole project. \\n\\n In a nutshell, includeRowLocations() == true iff the contents of the hash table are LocatedRows. Conversely, includeRowLocations() == false iff the contents of the hash table are DataValueDescriptor[]. Support for LocatedRows is provided for scan-driven (rather than RowSource-driven) hashtables. If someone wants to add LocatedRow support for RowSource-driven hash tables, they are welcome to do so. But I don\'t recommend doing this until someone has an actual use-case which would benefit from this feature and prove that it works. At this time, my MERGE statement work hasn\'t created such a use-case. \\n\\n &gt; might be good to add an assert somewhere if code tries to ask for a \\n&gt; RowLocation on a btree, or at least understand what \\n&gt; happens in checked in code if that happened. \\n\\n I will put the following assertion at the beginning of BTreeForwardScan.fetchRows(): \\n\\n         if (SanityManager.DEBUG) \\n        {\\n            \\/\\/ RowLocations in the BTree itself are unstable and should\\n            \\/\\/ not be put in long-lived structures like persistent hash tables.\\n            SanityManager.ASSERT\\n                ( (hash_table == null) || !hash_table.includeRowLocations() );\\n        }\\n\\n &gt; Index: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/BackingStoreHashtable.java \\n&gt;  \\n&gt; psuedo code in BackingStoreHashTable javdoc is not right anymore, it shows row \\n&gt; as being Object[]. Not sure if the hash description is right or not still. \\n\\n I will change the row declaration in the pseudo-code to: \\n\\n Object row; \\/\\/ is a DataValueDescriptor[] or a LocatedRow \\n\\n The hash description looks right to me, but I am happy to correct it if you see a problem. \\n\\n &gt; nit: comments added, over 80 char line \\n\\n I don\'t see any added lines which bust this limit now. There are some original lines which bust this limit, however. If you still think some lines should be corrected, please give me the offending line numbers. \\n\\n &gt; this comment is confusing to me: \\n&gt; Currently, if the RowSource is not null, then there is no su \\n&gt; pport for including RowLocations in the returned rows. That functionality is \\n&gt; only supported for scans from base tables. \\n&gt;  \\n&gt; I think BackingStoreHashTable constructor action is now dependent on info \\n&gt; provided from the passed in row source, some comment on that would help - which \\n&gt; may be what the above is trying to say. \\n\\n I will change the comment to the following. I hope this is less confusing... \\n\\n \\n\\t constructor. RowLocations are supported iff row_source is null. \\n\\t RowLocations in a non-null row_source can be added later \\n\\t if there is a use-case that stresses this behavior. \\n \\n\\n\\n ...and I will add the following sanity check at the beginning of the constructor: \\n\\n         if (SanityManager.DEBUG) \\n        { \\n            \\/\\/ RowLocations are not currently supported if the \\n            \\/\\/ hash table is being filled from a non-null \\n            \\/\\/ row_source arg. \\n            if ( row_source != null ) \\n            {\\n                SanityManager.ASSERT( !includeRowLocations() );\\n            }\\n         } \\n\\n &gt; is it right that includeRowLocations is hard coded to return false? \\n\\n That\'s correct. That method is overridden by the BackingStoreHashTableFromScan subclass, based on its constructor args. \\n\\n &gt; nit: the following style still in code (this could just be my issue): \\n&gt; + if ( !includeRowLocations() ) \\n&gt; + \\n&gt;  \\n{ return diskRow; } \\n&gt;  \\n&gt; + else \\n&gt; { return new LocatedRow( diskRow ); } \\n&gt;  \\n&gt; I think the 2 acceptable forms are either: \\n&gt; if ( !includeRowLocations() ) \\n&gt; { return diskRow; }\\n &gt;  \\n&gt; else \\n&gt;  \\n{ return new LocatedRow( diskRow ); } \\n&gt;  \\n&gt; if ( !includeRowLocations() ) \\n&gt; { return diskRow; } \\n&gt;  \\n&gt; else \\n&gt; { return new LocatedRow( diskRow ); }\\n   \\n\\n I\'m afraid I\'m not following this one. I don\'t see any instances of a blank line following \\\"if ( !includeRowLocations() )\\\" in the diff file. Can you give me the line number of the problematic usage? \\n\\n &gt; Index: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/access\\/TransactionController.java \\n&gt;  \\n&gt; nit: over 80 char lines \\n\\n Done. \\n\\n &gt; Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/conglomerate\\/GenericScanCo \\n&gt; ntroller.java \\n&gt; nit: over 80 char \\n\\n Done. \\n\\n Thanks, \\n-Rick              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13802203\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13802203&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13802203\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802203_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802203_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 20:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T20:00:51+0000\'\u003e22\\/Oct\\/13 20:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff. This patch makes the changes which Mike recommended. I will run tests again.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802203_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802203_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 20:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T20:00:51+0000\'\u003e22\\/Oct\\/13 20:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff. This patch makes the changes which Mike recommended. I will run tests again.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13802248\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13802248&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13802248\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13802248_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802248_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 20:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T20:45:56+0000\'\u003e22\\/Oct\\/13 20:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003esorry posting to JIRA is messing up the format that I am trying to talk about and turned it into exactly\u003cbr\\/\u003e\\nwhat i was trying to say was not ok.   Never have figured out how to get a JIRA comment to properly\u003cbr\\/\u003e\\ndisplay code formatting.   I was not talking about blank lines,  but code and both open and close\u003cbr\\/\u003e\\nparens on same line. \u003c\\/p\u003e\\n\\n\u003cp\u003eso line 639 of BackingStoreHashTable.java has code and parens all on same line, i think it should\u003cbr\\/\u003e\\nbe 3 lines.  obviously a nit.  \u003c\\/p\u003e\\n\\n\u003cp\u003eIn vi if you search for \u003c\\/p\u003e\\n{.*}\\n\u003cp\u003e you will see other lines i was talking about.\u003c\\/p\u003e\\n\\n\u003cp\u003eYour new comment changes and other change look good to me.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13802248_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802248_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 20:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T20:45:56+0000\'\u003e22\\/Oct\\/13 20:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    sorry posting to JIRA is messing up the format that I am trying to talk about and turned it into exactly \\nwhat i was trying to say was not ok.   Never have figured out how to get a JIRA comment to properly \\ndisplay code formatting.   I was not talking about blank lines,  but code and both open and close \\nparens on same line.  \\n\\n so line 639 of BackingStoreHashTable.java has code and parens all on same line, i think it should \\nbe 3 lines.  obviously a nit.   \\n\\n In vi if you search for  \\n{.*}\\n  you will see other lines i was talking about. \\n\\n Your new comment changes and other change look good to me.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13802321\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13802321&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13802321\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802321_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802321_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 21:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T21:50:23+0000\'\u003e22\\/Oct\\/13 21:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTests passed cleanly for me on derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802321_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802321_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 21:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T21:50:23+0000\'\u003e22\\/Oct\\/13 21:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tests passed cleanly for me on derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13802330\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13802330&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13802330\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802330_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802330_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 21:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T21:59:59+0000\'\u003e22\\/Oct\\/13 21:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff. This patch re-formats some conditional blocks in BackingStoreHashtable as Mike recommended. I will run tests again.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802330_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802330_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 21:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T21:59:59+0000\'\u003e22\\/Oct\\/13 21:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff. This patch re-formats some conditional blocks in BackingStoreHashtable as Mike recommended. I will run tests again.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13802443\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13802443&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13802443\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802443_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802443_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/13 00:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-23T00:02:39+0000\'\u003e23\\/Oct\\/13 00:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTests passed cleanly for me on derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13802443_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802443_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/13 00:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-23T00:02:39+0000\'\u003e23\\/Oct\\/13 00:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tests passed cleanly for me on derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13802840\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13802840&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13802840\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13802840_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802840_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/13 12:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-23T12:15:26+0000\'\u003e23\\/Oct\\/13 12:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1535001 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1535001\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1535001\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add (optional) row locations to backing hash tables: derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13802840_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13802840_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/13 12:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-23T12:15:26+0000\'\u003e23\\/Oct\\/13 12:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1535001 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1535001  ] \\n\\n   DERBY-3155  : Add (optional) row locations to backing hash tables: derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13803052\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13803052&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13803052\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13803052_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13803052_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/13 17:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-23T17:39:14+0000\'\u003e23\\/Oct\\/13 17:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-04-af-deleteAction.diff. This patch enables the DELETE action of the MERGE statement, capitalizing on the row location work done by derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith this patch, I am able to use the MERGE statement to DELETE rows. Various combinations of the following conditions have been tested:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) MERGE statements with and without refined conditions in the WHEN MATCHED clause.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Search conditions which cause the optimizer to choose a nested-loop strategy.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) Search conditions which cause the optimizer to choose a hash-join strategy.\u003c\\/p\u003e\\n\\n\u003cp\u003e4) Target tables with before and after per-row triggers.\u003c\\/p\u003e\\n\\n\u003cp\u003e5) Target tables with before and after per-statement triggers.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThe basic operation of the MERGE statement is described by the header comment in MergeNode. The following additional execution behavior is worth mentioning:\u003c\\/p\u003e\\n\\n\u003cp\u003eThe MergeResultSet loops through the rows coming from the driving left-join, assigning each row to a WHEN [ NOT ] MATCHED action. After all of the rows have been assigned, the MergeResultSet then calls logic in each matching clause action to process the buffered rows assigned to that action. The matching clause action does the following:\u003c\\/p\u003e\\n\\n\u003cp\u003ei) Pushes the corresponding INSERT\\/UPDATE\\/DELETE ConstantAction onto a stack of constant actions, introduced by this patch. This makes that INSERT\\/UPDATE\\/DELETE ConstantAction the current ConstantAction for the Activation. Introducing a stack of ConstantActions caused fewer code changes than wrenching around the constructors and code generators for the Insert\\/Update\\/DeleteResultSets so that they could handle fetching a ConstantAction out of a variable in the Activation. The Insert\\/Update\\/DeleteResultSets continue to take whatever ConstantAction is at the top of the stack.\u003c\\/p\u003e\\n\\n\u003cp\u003eii) Pokes the temporary ResultSet of buffered rows into a variable which is pushed as an argument to the Insert\\/Update\\/DeleteResultSet.\u003c\\/p\u003e\\n\\n\u003cp\u003eiii) Invokes a method to instantiate the Insert\\/Update\\/DeleteResultSet.\u003c\\/p\u003e\\n\\n\u003cp\u003eiv) Opens the Insert\\/Update\\/DeleteResultSet in order to cause it to execute.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/QueryTreeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DeleteNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DMLModStatementNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/InsertNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/CurrentOfNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/sqlgrammar.jj\u003c\\/p\u003e\\n\\n\u003cp\u003eChanges for binding and code-generating MERGE statements with DELETE actions. See the header comment in MergeNode for more details.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/Activation.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/BaseActivation.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/GenericActivationHolder.java\u003c\\/p\u003e\\n\\n\u003cp\u003eIntroduces a stack of ConstantActions.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/execute\\/ResultSetFactory.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/GenericResultSetFactory.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DMLWriteResultSet.java\u003cbr\\/\u003e\\nA       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eExecution machinery to process the left-join, assign qualifying rows to the appropriate MatchingClauseConstantAction, and then invoke those ConstantActions in order after the left-join is drained.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/execute\\/ConstantAction.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/services\\/io\\/RegisteredFormatIds.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/services\\/io\\/StoredFormatIds.java\u003cbr\\/\u003e\\nA       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeConstantAction.java\u003cbr\\/\u003e\\nA       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MatchingClauseConstantAction.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/GenericConstantActionFactory.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNew Formatable ConstantActions: one for the overall MERGE statement and another for its WHEN [ NOT ] MATCHED clauses.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/ScanResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/HashScanResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/BulkTableScanResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eChanges to retrieve the target table\'s RowLocation during the processing of the driving left-join.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DeleteResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/heap\\/HeapRowLocation.java\u003c\\/p\u003e\\n\\n\u003cp\u003eChange HeapRowLocation.getObject() to return itself rather than null. This is the economical way to retrieve a RowLocation from a bulk scan.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml\u003c\\/p\u003e\\n\\n\u003cp\u003eRe-worded an error message so it could be re-used for a MERGE-related error condition.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/GeneratedColumnsHelper.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTests for the new functionality.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13803052_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13803052_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/13 17:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-23T17:39:14+0000\'\u003e23\\/Oct\\/13 17:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-04-af-deleteAction.diff. This patch enables the DELETE action of the MERGE statement, capitalizing on the row location work done by derby-3155-03-ah-backingStoreHashtableWithRowLocation.diff. I am running tests now. \\n\\n With this patch, I am able to use the MERGE statement to DELETE rows. Various combinations of the following conditions have been tested: \\n\\n 1) MERGE statements with and without refined conditions in the WHEN MATCHED clause. \\n\\n 2) Search conditions which cause the optimizer to choose a nested-loop strategy. \\n\\n 3) Search conditions which cause the optimizer to choose a hash-join strategy. \\n\\n 4) Target tables with before and after per-row triggers. \\n\\n 5) Target tables with before and after per-statement triggers. \\n\\n\\n The basic operation of the MERGE statement is described by the header comment in MergeNode. The following additional execution behavior is worth mentioning: \\n\\n The MergeResultSet loops through the rows coming from the driving left-join, assigning each row to a WHEN [ NOT ] MATCHED action. After all of the rows have been assigned, the MergeResultSet then calls logic in each matching clause action to process the buffered rows assigned to that action. The matching clause action does the following: \\n\\n i) Pushes the corresponding INSERT\\/UPDATE\\/DELETE ConstantAction onto a stack of constant actions, introduced by this patch. This makes that INSERT\\/UPDATE\\/DELETE ConstantAction the current ConstantAction for the Activation. Introducing a stack of ConstantActions caused fewer code changes than wrenching around the constructors and code generators for the Insert\\/Update\\/DeleteResultSets so that they could handle fetching a ConstantAction out of a variable in the Activation. The Insert\\/Update\\/DeleteResultSets continue to take whatever ConstantAction is at the top of the stack. \\n\\n ii) Pokes the temporary ResultSet of buffered rows into a variable which is pushed as an argument to the Insert\\/Update\\/DeleteResultSet. \\n\\n iii) Invokes a method to instantiate the Insert\\/Update\\/DeleteResultSet. \\n\\n iv) Opens the Insert\\/Update\\/DeleteResultSet in order to cause it to execute. \\n\\n\\n Touches the following files: \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/QueryTreeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DeleteNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DMLModStatementNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/InsertNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/CurrentOfNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/sqlgrammar.jj \\n\\n Changes for binding and code-generating MERGE statements with DELETE actions. See the header comment in MergeNode for more details. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/Activation.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/BaseActivation.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/GenericActivationHolder.java \\n\\n Introduces a stack of ConstantActions. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/execute\\/ResultSetFactory.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/GenericResultSetFactory.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DMLWriteResultSet.java \\nA       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java \\n\\n Execution machinery to process the left-join, assign qualifying rows to the appropriate MatchingClauseConstantAction, and then invoke those ConstantActions in order after the left-join is drained. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/execute\\/ConstantAction.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/services\\/io\\/RegisteredFormatIds.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/services\\/io\\/StoredFormatIds.java \\nA       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeConstantAction.java \\nA       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MatchingClauseConstantAction.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/GenericConstantActionFactory.java \\n\\n New Formatable ConstantActions: one for the overall MERGE statement and another for its WHEN [ NOT ] MATCHED clauses. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/ScanResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/HashScanResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/BulkTableScanResultSet.java \\n\\n Changes to retrieve the target table\'s RowLocation during the processing of the driving left-join. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DeleteResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/heap\\/HeapRowLocation.java \\n\\n Change HeapRowLocation.getObject() to return itself rather than null. This is the economical way to retrieve a RowLocation from a bulk scan. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml \\n\\n Re-worded an error message so it could be re-used for a MERGE-related error condition. \\n\\n --------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/GeneratedColumnsHelper.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Tests for the new functionality.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13803106\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13803106&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13803106\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13803106_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13803106_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/13 18:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-23T18:29:31+0000\'\u003e23\\/Oct\\/13 18:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTests passed cleanly for me on derby-3155-04-af-deleteAction.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13803106_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13803106_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/13 18:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-23T18:29:31+0000\'\u003e23\\/Oct\\/13 18:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tests passed cleanly for me on derby-3155-04-af-deleteAction.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13804131\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13804131&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13804131\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13804131_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13804131_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 12:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T12:42:00+0000\'\u003e24\\/Oct\\/13 12:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1535360 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1535360\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1535360\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add support for DELETE action of MERGE statement; checking in derby-3155-04-af-deleteAction.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13804131_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13804131_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 12:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T12:42:00+0000\'\u003e24\\/Oct\\/13 12:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1535360 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1535360  ] \\n\\n   DERBY-3155  : Add support for DELETE action of MERGE statement; checking in derby-3155-04-af-deleteAction.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13804276\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13804276&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13804276\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13804276_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13804276_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 14:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T14:56:59+0000\'\u003e24\\/Oct\\/13 14:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-05-aa-triggerTransitionTableAsTarget.diff. This patch uncomments a test case which used to fail but which now succeeds.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis case is supposed to verify that trigger transition tables can\'t be used as the target tables of MERGE statements. This test used to die on an assertion. The test now runs correctly, probably as a result of recent improvements in how the compiler handles transition tables.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13804276_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13804276_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 14:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T14:56:59+0000\'\u003e24\\/Oct\\/13 14:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-05-aa-triggerTransitionTableAsTarget.diff. This patch uncomments a test case which used to fail but which now succeeds. \\n\\n This case is supposed to verify that trigger transition tables can\'t be used as the target tables of MERGE statements. This test used to die on an assertion. The test now runs correctly, probably as a result of recent improvements in how the compiler handles transition tables. \\n\\n\\n Touches the following file: \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13804278\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13804278&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13804278\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13804278_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13804278_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 14:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T14:58:40+0000\'\u003e24\\/Oct\\/13 14:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1535397 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1535397\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1535397\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Uncomment a test verifying that trigger transition tables cannot be used as the target tables of MERGE statements: derby-3155-05-aa-triggerTransitionTableAsTarget.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13804278_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13804278_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 14:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T14:58:40+0000\'\u003e24\\/Oct\\/13 14:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1535397 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1535397  ] \\n\\n   DERBY-3155  : Uncomment a test verifying that trigger transition tables cannot be used as the target tables of MERGE statements: derby-3155-05-aa-triggerTransitionTableAsTarget.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13804421\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13804421&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13804421\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13804421_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13804421_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 17:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T17:14:55+0000\'\u003e24\\/Oct\\/13 17:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-06-aa-triggerTransitionTableAsSource.diff. This patch fixes some bugs in the serialization of the newly added ConstantActions and adds test cases for using trigger transition tables as the source tables for MERGE statements.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeConstantAction.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MatchingClauseConstantAction.java\u003c\\/p\u003e\\n\\n\u003cp\u003eFixes Formatable serialization for these classes.\u003c\\/p\u003e\\n\\n\u003cp\u003e------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNew test cases.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13804421_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13804421_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 17:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T17:14:55+0000\'\u003e24\\/Oct\\/13 17:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-06-aa-triggerTransitionTableAsSource.diff. This patch fixes some bugs in the serialization of the newly added ConstantActions and adds test cases for using trigger transition tables as the source tables for MERGE statements. \\n\\n\\n Touches the following files: \\n\\n ------------------ \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeConstantAction.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MatchingClauseConstantAction.java \\n\\n Fixes Formatable serialization for these classes. \\n\\n ------------------ \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n New test cases.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13804427\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13804427&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13804427\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13804427_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13804427_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 17:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T17:17:03+0000\'\u003e24\\/Oct\\/13 17:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1535447 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1535447\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1535447\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Fix some serialization bugs in the MERGE ConstantActions and add test cases for using trigger transition tables as the source tables of MERGE statements; check in derby-3155-06-aa-triggerTransitionTableAsSource.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13804427_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13804427_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 17:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T17:17:03+0000\'\u003e24\\/Oct\\/13 17:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1535447 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1535447  ] \\n\\n   DERBY-3155  : Fix some serialization bugs in the MERGE ConstantActions and add test cases for using trigger transition tables as the source tables of MERGE statements; check in derby-3155-06-aa-triggerTransitionTableAsSource.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13817317\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13817317&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13817317\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13817317_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13817317_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Nov\\/13 14:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-08T14:41:54+0000\'\u003e08\\/Nov\\/13 14:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-07-ad-insertAction.diff. This patch adds support for the INSERT action of MERGE statements. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch includes tests for the following use-cases:\u003c\\/p\u003e\\n\\n\u003cp\u003ei) INSERT actions with DEFAULT expressions for identity, generated, and default columns\u003c\\/p\u003e\\n\\n\u003cp\u003eii) INSERT actions on tables with CHECK, UNIQUE, PRIMARY KEY, and FOREIGN KEY constraints.\u003c\\/p\u003e\\n\\n\u003cp\u003eiii) INSERT actions in MERGE statements fired by triggers.\u003c\\/p\u003e\\n\\n\u003cp\u003eiv) INSERT actions which fire triggers.\u003c\\/p\u003e\\n\\n\u003cp\u003ev) MERGE statements with INSERT and DELETE actions operating together.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe following behaviors have not been implemented\\/tested yet:\u003c\\/p\u003e\\n\\n\u003cp\u003ea) UPDATE actions\u003c\\/p\u003e\\n\\n\u003cp\u003eb) Permissions checking\u003c\\/p\u003e\\n\\n\u003cp\u003ec) Dependency checking and statement invalidation\u003c\\/p\u003e\\n\\n\u003cp\u003eSo far the bulk of the complexity remains concentrated in compilation. \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/execute\\/NoPutResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/TemporaryRowHolderResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eReplaced a magic number with a named constant. Temporary tables don\'t have result set numbers assigned to them. But now they are being used to drive the INSERT\\/UPDATE\\/DELETE actions of MERGE statements. In order to get CHECK constraints to work properly, the row being checked is stuffed into slot 0 of the result set row array. That is usually the result set number corresponding to the driving result set of an INSERT\\/UPDATE\\/DELETE statement. And it was, coincidentally, the magic result set number of temporary tables. This decision may need to be re-visited if we invent other situations for which temporary tables need result set numbers.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/dictionary\\/TableDescriptor.java\u003c\\/p\u003e\\n\\n\u003cp\u003eImproved a method header comment.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultSetNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdded a new way to determine the data type of a ResultColumn. There is now a path through the pinball machine where the old technique didn\'t work.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/InsertNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eCompilation support for the INSERT action of a MERGE statement. The bulk of the new complexity has to do with generating the rows which are stuffed into a temporary table at execution time. There is considerable complexity involved in handling the DEFAULT keyword, which can appear as the value to be inserted into an identity, generated, or default column, as for instance, in this situation:\u003c\\/p\u003e\\n\\n\u003cp\u003e{\u003cbr\\/\u003e\\n  create table t1_007\u003cbr\\/\u003e\\n  (\u003cbr\\/\u003e\\n      c1 int generated always as identity,\u003cbr\\/\u003e\\n      c2 int,\u003cbr\\/\u003e\\n      c3 int generated always as ( c1 + c2 ),\u003cbr\\/\u003e\\n      c1_4 int,\u003cbr\\/\u003e\\n      c5 int default 1000\u003cbr\\/\u003e\\n  );\u003c\\/p\u003e\\n\\n\u003cp\u003e...\u003c\\/p\u003e\\n\\n\u003cp\u003e  merge into t1_007\u003cbr\\/\u003e\\n  using t2_007\u003cbr\\/\u003e\\n  on t1_007.c2 = t2_007.c2\u003cbr\\/\u003e\\n  when not matched and t2_007.c5 = \'three\'\u003cbr\\/\u003e\\n    then insert ( c1, c2, c3, c1_4, c5 ) values ( default, 100 * t2_007.c2, default, t2_007.c3, default );\u003cbr\\/\u003e\\n}\u003c\\/p\u003e\\n\\n\u003cp\u003eFor an ordinary INSERT statement, much of that complexity is handled by the compilation of the driving SELECT. For a MERGE statement, that SELECT is a dummy statement which is not optimized or generated. That, in turn, short-circuits some of the complex handling of the DEFAULT keyword. So that logic had to be reproduced in MatchingClauseNode.\u003c\\/p\u003e\\n\\n\u003cp\u003eThere is already too much complexity in the handling of these special columns and now I have made the situation even more complicated. In particular, I don\'t understand why GENERATED BY DEFAULT AS IDENTITY and GENERATED ALWAYS AS IDENTITY take such different trajectories through the pinball machine. And I don\'t understand why the special columns are compiled with the driving SELECT rather than with the INSERT\\/UPDATE action itself. This is a source of brittleness which we should be aware of. However, I thought that cleaning this up was outside the scope of this JIRA.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DeleteNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/WriteCursorConstantAction.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DMLVTIResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateVTIResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/CallStatementResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdatableVTIConstantAction.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/InsertVTIResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DeleteResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MiscResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/NoRowsResultSetImpl.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DeleteConstantAction.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DeleteVTIResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/GenericConstantActionFactory.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateConstantAction.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdded a small amount of logic so that INSERT\\/UPDATE\\/DELETE actions know at execution time whether they are running under a MERGE statement. If so, then we don\'t close the Activation at the end of the action. The Activation is closed by the MergeResultSet at the very end after all of the actions have run. This, in turn, makes it possible to run multiple INSERT\\/DELETE\\/UPDATE actions in a single MERGE statement.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DMLModStatementNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdded some special processing for generation clauses invoked by actions of MERGE statements. This is more of the fallout from the fact that the dummy SELECTs are not optimized and generated.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAbstracted some logic into a separate method so that it could be called when generating the temporary row for an INSERT action of a MERGE statement.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/InsertResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/InsertConstantAction.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MatchingClauseConstantAction.java\u003c\\/p\u003e\\n\\n\u003cp\u003eChanges to support INSERT actions under MERGE statements.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTests for the new behavior.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13817317_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13817317_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Nov\\/13 14:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-08T14:41:54+0000\'\u003e08\\/Nov\\/13 14:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-07-ad-insertAction.diff. This patch adds support for the INSERT action of MERGE statements. I am running tests now. \\n\\n The patch includes tests for the following use-cases: \\n\\n i) INSERT actions with DEFAULT expressions for identity, generated, and default columns \\n\\n ii) INSERT actions on tables with CHECK, UNIQUE, PRIMARY KEY, and FOREIGN KEY constraints. \\n\\n iii) INSERT actions in MERGE statements fired by triggers. \\n\\n iv) INSERT actions which fire triggers. \\n\\n v) MERGE statements with INSERT and DELETE actions operating together. \\n\\n The following behaviors have not been implemented\\/tested yet: \\n\\n a) UPDATE actions \\n\\n b) Permissions checking \\n\\n c) Dependency checking and statement invalidation \\n\\n So far the bulk of the complexity remains concentrated in compilation.  \\n\\n\\n Touches the following files: \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/execute\\/NoPutResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/TemporaryRowHolderResultSet.java \\n\\n Replaced a magic number with a named constant. Temporary tables don\'t have result set numbers assigned to them. But now they are being used to drive the INSERT\\/UPDATE\\/DELETE actions of MERGE statements. In order to get CHECK constraints to work properly, the row being checked is stuffed into slot 0 of the result set row array. That is usually the result set number corresponding to the driving result set of an INSERT\\/UPDATE\\/DELETE statement. And it was, coincidentally, the magic result set number of temporary tables. This decision may need to be re-visited if we invent other situations for which temporary tables need result set numbers. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/dictionary\\/TableDescriptor.java \\n\\n Improved a method header comment. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultSetNode.java \\n\\n Added a new way to determine the data type of a ResultColumn. There is now a path through the pinball machine where the old technique didn\'t work. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/InsertNode.java \\n\\n Compilation support for the INSERT action of a MERGE statement. The bulk of the new complexity has to do with generating the rows which are stuffed into a temporary table at execution time. There is considerable complexity involved in handling the DEFAULT keyword, which can appear as the value to be inserted into an identity, generated, or default column, as for instance, in this situation: \\n\\n { \\n  create table t1_007 \\n  ( \\n      c1 int generated always as identity, \\n      c2 int, \\n      c3 int generated always as ( c1 + c2 ), \\n      c1_4 int, \\n      c5 int default 1000 \\n  ); \\n\\n ... \\n\\n   merge into t1_007 \\n  using t2_007 \\n  on t1_007.c2 = t2_007.c2 \\n  when not matched and t2_007.c5 = \'three\' \\n    then insert ( c1, c2, c3, c1_4, c5 ) values ( default, 100 * t2_007.c2, default, t2_007.c3, default ); \\n} \\n\\n For an ordinary INSERT statement, much of that complexity is handled by the compilation of the driving SELECT. For a MERGE statement, that SELECT is a dummy statement which is not optimized or generated. That, in turn, short-circuits some of the complex handling of the DEFAULT keyword. So that logic had to be reproduced in MatchingClauseNode. \\n\\n There is already too much complexity in the handling of these special columns and now I have made the situation even more complicated. In particular, I don\'t understand why GENERATED BY DEFAULT AS IDENTITY and GENERATED ALWAYS AS IDENTITY take such different trajectories through the pinball machine. And I don\'t understand why the special columns are compiled with the driving SELECT rather than with the INSERT\\/UPDATE action itself. This is a source of brittleness which we should be aware of. However, I thought that cleaning this up was outside the scope of this JIRA. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DeleteNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/WriteCursorConstantAction.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DMLVTIResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateVTIResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/CallStatementResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdatableVTIConstantAction.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/InsertVTIResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DeleteResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MiscResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/NoRowsResultSetImpl.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DeleteConstantAction.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DeleteVTIResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/GenericConstantActionFactory.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateConstantAction.java \\n\\n Added a small amount of logic so that INSERT\\/UPDATE\\/DELETE actions know at execution time whether they are running under a MERGE statement. If so, then we don\'t close the Activation at the end of the action. The Activation is closed by the MergeResultSet at the very end after all of the actions have run. This, in turn, makes it possible to run multiple INSERT\\/DELETE\\/UPDATE actions in a single MERGE statement. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DMLModStatementNode.java \\n\\n Added some special processing for generation clauses invoked by actions of MERGE statements. This is more of the fallout from the fact that the dummy SELECTs are not optimized and generated. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java \\n\\n Abstracted some logic into a separate method so that it could be called when generating the temporary row for an INSERT action of a MERGE statement. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/InsertResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/InsertConstantAction.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MatchingClauseConstantAction.java \\n\\n Changes to support INSERT actions under MERGE statements. \\n\\n --------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Tests for the new behavior.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13817352\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13817352&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13817352\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13817352_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13817352_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Nov\\/13 15:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-08T15:32:41+0000\'\u003e08\\/Nov\\/13 15:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTests passed cleanly for me on derby-3155-07-ad-insertAction.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13817352_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13817352_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Nov\\/13 15:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-08T15:32:41+0000\'\u003e08\\/Nov\\/13 15:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tests passed cleanly for me on derby-3155-07-ad-insertAction.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13818960\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13818960&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13818960\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13818960_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13818960_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Nov\\/13 13:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-11T13:40:45+0000\'\u003e11\\/Nov\\/13 13:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1540713 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1540713\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1540713\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add support for INSERT action of MERGE statement; commit derby-3155-07-ad-insertAction.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13818960_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13818960_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Nov\\/13 13:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-11T13:40:45+0000\'\u003e11\\/Nov\\/13 13:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1540713 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1540713  ] \\n\\n   DERBY-3155  : Add support for INSERT action of MERGE statement; commit derby-3155-07-ad-insertAction.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13830160\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13830160&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13830160\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13830160_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13830160_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Nov\\/13 17:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-22T17:56:45+0000\'\u003e22\\/Nov\\/13 17:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-08-ah-updateAction.diff. This patch adds basic support for the UPDATE action of MERGE statements. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch includes tests to stress simple examples of the following scenarios:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Target tables with identity, generated, and default columns.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Target tables with before\\/after row\\/statement UPDATE triggers.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) Target tables with primary, foreign, and check constraints.\u003c\\/p\u003e\\n\\n\u003cp\u003e4) Source tables which are the OLD and NEW transition tables of triggers.\u003c\\/p\u003e\\n\\n\u003cp\u003e5) MERGE statements combining all three kinds of actions: INSERT, UPDATE, and DELETE.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen setting an identity column to the literal DEFAULT value, the UPDATE action of a MERGE statement behaves in the same incorrect way as an ordinary UPDATE statement. This behavior should be corrected when we fix \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-6414\\\" title=\\\"Incorrect handling when using an UPDATE to SET an identity column to DEFAULT\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-6414\\\"\u003e\u003cdel\u003eDERBY-6414\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eBulk of the compile-time changes needed to support UPDATE actions.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eChanges to distinguish MERGE actions from UPDATEs driven by VTIs. It seems that trigger transition tables are modelled as VTIs when they drive UPDATEs.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromList.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe binding of column references now involves poking the table name into the reference. Later on, this makes it possible to associate bound columns with their base tables when code-generating the temporary rows which are buffered up for UPDATE actions.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DMLModStatementNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eUp until now, it has not been necessary to optimize the dummy SELECT which is cooked up while compiling INSERT\\/DELETE actions. However, we need to pre-process that SELECT for UPDATE actions. That is because an important re-mapping of column references happens during pre-processing. That re-mapping is needed in order to correctly code-generate CHECK constraints.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DMLVTIResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/InsertResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DMLWriteResultSet.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DeleteResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe ResultDescription field, common across all of the leaf DML classes, has been pulled up into their common superclass. This makes it possible to pull some normalization logic up into the superclass for sharing between the INSERT and UPDATE actions of MERGE statements.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNormalize the rows of UPDATE actions in order to enforce storability restrictions.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/heap\\/HeapRowLocation.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe RowLocations returned by the driving left join now implement RefDataValue. This eliminates a ClassCastException at run time.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNew tests for the new functionality.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13830160_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13830160_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Nov\\/13 17:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-22T17:56:45+0000\'\u003e22\\/Nov\\/13 17:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-08-ah-updateAction.diff. This patch adds basic support for the UPDATE action of MERGE statements. I am running tests now. \\n\\n This patch includes tests to stress simple examples of the following scenarios: \\n\\n 1) Target tables with identity, generated, and default columns. \\n\\n 2) Target tables with before\\/after row\\/statement UPDATE triggers. \\n\\n 3) Target tables with primary, foreign, and check constraints. \\n\\n 4) Source tables which are the OLD and NEW transition tables of triggers. \\n\\n 5) MERGE statements combining all three kinds of actions: INSERT, UPDATE, and DELETE. \\n\\n When setting an identity column to the literal DEFAULT value, the UPDATE action of a MERGE statement behaves in the same incorrect way as an ordinary UPDATE statement. This behavior should be corrected when we fix   DERBY-6414  . \\n\\n\\n Touches the following files: \\n\\n --------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\n\\n Bulk of the compile-time changes needed to support UPDATE actions. \\n\\n --------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java \\n\\n Changes to distinguish MERGE actions from UPDATEs driven by VTIs. It seems that trigger transition tables are modelled as VTIs when they drive UPDATEs. \\n\\n --------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromList.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java \\n\\n The binding of column references now involves poking the table name into the reference. Later on, this makes it possible to associate bound columns with their base tables when code-generating the temporary rows which are buffered up for UPDATE actions. \\n\\n --------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DMLModStatementNode.java \\n\\n Up until now, it has not been necessary to optimize the dummy SELECT which is cooked up while compiling INSERT\\/DELETE actions. However, we need to pre-process that SELECT for UPDATE actions. That is because an important re-mapping of column references happens during pre-processing. That re-mapping is needed in order to correctly code-generate CHECK constraints. \\n\\n --------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DMLVTIResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/InsertResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DMLWriteResultSet.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DeleteResultSet.java \\n\\n The ResultDescription field, common across all of the leaf DML classes, has been pulled up into their common superclass. This makes it possible to pull some normalization logic up into the superclass for sharing between the INSERT and UPDATE actions of MERGE statements. \\n\\n --------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/UpdateResultSet.java \\n\\n Normalize the rows of UPDATE actions in order to enforce storability restrictions. \\n\\n --------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/access\\/heap\\/HeapRowLocation.java \\n\\n The RowLocations returned by the driving left join now implement RefDataValue. This eliminates a ClassCastException at run time. \\n\\n --------------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n New tests for the new functionality.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13830263\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13830263&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13830263\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13830263_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13830263_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Nov\\/13 19:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-22T19:49:24+0000\'\u003e22\\/Nov\\/13 19:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTests passed cleanly for me on derby-3155-08-ah-updateAction.diff\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13830263_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13830263_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Nov\\/13 19:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-22T19:49:24+0000\'\u003e22\\/Nov\\/13 19:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tests passed cleanly for me on derby-3155-08-ah-updateAction.diff              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13831626\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13831626&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13831626\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13831626_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13831626_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Nov\\/13 17:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-25T17:02:41+0000\'\u003e25\\/Nov\\/13 17:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1545343 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1545343\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1545343\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add support for UPDATE action of MERGE statement: derby-3155-08-ah-updateAction.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13831626_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13831626_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Nov\\/13 17:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-11-25T17:02:41+0000\'\u003e25\\/Nov\\/13 17:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1545343 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1545343  ] \\n\\n   DERBY-3155  : Add support for UPDATE action of MERGE statement: derby-3155-08-ah-updateAction.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13838011\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13838011&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13838011\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13838011_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13838011_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/13 18:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-03T18:38:11+0000\'\u003e03\\/Dec\\/13 18:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-09-aa-correlationNames.diff. This patch adds better support for correlation names in MERGE statements. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eCorrelation names on target tables were confusing the bind phase. The fix is to replace the correlation names with the actual base table name in all ColumnReferences in all expressions in the MERGE statement. This replacement is done before any of those expressions are bound.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe fix.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eCorresponding test cases.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13838011_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13838011_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/13 18:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-03T18:38:11+0000\'\u003e03\\/Dec\\/13 18:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-09-aa-correlationNames.diff. This patch adds better support for correlation names in MERGE statements. I am running tests now. \\n\\n Correlation names on target tables were confusing the bind phase. The fix is to replace the correlation names with the actual base table name in all ColumnReferences in all expressions in the MERGE statement. This replacement is done before any of those expressions are bound. \\n\\n\\n Touches the following files: \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\n\\n The fix. \\n\\n --------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Corresponding test cases.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13838136\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13838136&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13838136\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13838136_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13838136_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/13 20:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-03T20:25:23+0000\'\u003e03\\/Dec\\/13 20:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTests passed cleanly for me on derby-3155-09-aa-correlationNames.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13838136_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13838136_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/13 20:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-03T20:25:23+0000\'\u003e03\\/Dec\\/13 20:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tests passed cleanly for me on derby-3155-09-aa-correlationNames.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13838163\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13838163&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13838163\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13838163_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13838163_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/13 20:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-03T20:42:27+0000\'\u003e03\\/Dec\\/13 20:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1547585 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1547585\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1547585\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Improve handling of correlation names for the target tables in MERGE statements; commit derby-3155-09-aa-correlationNames.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13838163_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13838163_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/13 20:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-03T20:42:27+0000\'\u003e03\\/Dec\\/13 20:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1547585 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1547585  ] \\n\\n   DERBY-3155  : Improve handling of correlation names for the target tables in MERGE statements; commit derby-3155-09-aa-correlationNames.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13840345\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13840345&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13840345\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13840345_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13840345_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/13 18:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-05T18:01:12+0000\'\u003e05\\/Dec\\/13 18:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-10-aa-correlationNames.diff. This patch improves the handling of correlation names for the source tables of MERGE statements. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch makes changes to the handling of source table references similar to those made for target table references in the previous patch.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e-----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13840345_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13840345_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/13 18:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-05T18:01:12+0000\'\u003e05\\/Dec\\/13 18:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-10-aa-correlationNames.diff. This patch improves the handling of correlation names for the source tables of MERGE statements. I am running tests now. \\n\\n This patch makes changes to the handling of source table references similar to those made for target table references in the previous patch. \\n\\n\\n Touches the following files: \\n\\n ----------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13840550\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13840550&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13840550\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13840550_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13840550_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/13 20:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-05T20:49:17+0000\'\u003e05\\/Dec\\/13 20:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1548298 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1548298\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1548298\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Improve support for correlation names for the source tables of MERGE statements; tests passed cleanly for me on derby-3155-10-aa-correlationNames.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13840550_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13840550_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/13 20:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-05T20:49:17+0000\'\u003e05\\/Dec\\/13 20:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1548298 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1548298  ] \\n\\n   DERBY-3155  : Improve support for correlation names for the source tables of MERGE statements; tests passed cleanly for me on derby-3155-10-aa-correlationNames.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13844596\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13844596&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13844596\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13844596_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13844596_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Dec\\/13 19:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-10T19:47:08+0000\'\u003e10\\/Dec\\/13 19:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-11-ab-beforeTriggersCantFireMerge.diff. This patch adds tests to verify that BEFORE triggers can\'t fire MERGE statements, just as they can\'t fire INSERT\\/UPDATE\\/DELETE statements.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13844596_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13844596_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Dec\\/13 19:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-10T19:47:08+0000\'\u003e10\\/Dec\\/13 19:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-11-ab-beforeTriggersCantFireMerge.diff. This patch adds tests to verify that BEFORE triggers can\'t fire MERGE statements, just as they can\'t fire INSERT\\/UPDATE\\/DELETE statements. \\n\\n Touches the following file: \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13844598\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13844598&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13844598\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13844598_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13844598_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Dec\\/13 19:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-10T19:48:28+0000\'\u003e10\\/Dec\\/13 19:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1549948 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1549948\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1549948\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add tests to verify that BEFORE triggers can\'t fire MERGE statements, just as they can\'t fire INSERT\\/UPDATE\\/DELETE statements; commit derby-3155-11-ab-beforeTriggersCantFireMerge.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13844598_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13844598_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Dec\\/13 19:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-12-10T19:48:28+0000\'\u003e10\\/Dec\\/13 19:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1549948 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1549948  ] \\n\\n   DERBY-3155  : Add tests to verify that BEFORE triggers can\'t fire MERGE statements, just as they can\'t fire INSERT\\/UPDATE\\/DELETE statements; commit derby-3155-11-ab-beforeTriggersCantFireMerge.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13869457\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13869457&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13869457\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13869457_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869457_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 12:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T12:43:40+0000\'\u003e13\\/Jan\\/14 12:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Rick,\u003c\\/p\u003e\\n\\n\u003cp\u003eI got a NullPointerException from a MERGE statement on trunk:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij version 10.11\\nij&gt; connect \'jdbc:derby:memory:db;create=true\';\\nij&gt; create table t1 (x int, y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2 (x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using t2 on t1.x = t2.x when matched then update set y = -y when not matched then insert values (t2.x, 42);\\nERROR XJ001: Java exception: \': java.lang.NullPointerException\'.\\njava.lang.NullPointerException\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.bindInsertValues(MatchingClauseNode.java:783)\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.bindInsert(MatchingClauseNode.java:738)\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.bind(MatchingClauseNode.java:224)\\n\\tat org.apache.derby.impl.sql.compile.MergeNode.bindStatement(MergeNode.java:258)\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:402)\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:99)\\n\\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:1116)\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:682)\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:631)\\n\\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:367)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:527)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:369)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:245)\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229)\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)\\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\\n\\tat org.apache.derby.tools.ij.main(ij.java:59)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13869457_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869457_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 12:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T12:43:40+0000\'\u003e13\\/Jan\\/14 12:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Rick, \\n\\n I got a NullPointerException from a MERGE statement on trunk: \\n\\n  \\n ij version 10.11\\nij&gt; connect \'jdbc:derby:memory:db;create=true\';\\nij&gt; create table t1 (x int, y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2 (x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using t2 on t1.x = t2.x when matched then update set y = -y when not matched then insert values (t2.x, 42);\\nERROR XJ001: Java exception: \': java.lang.NullPointerException\'.\\njava.lang.NullPointerException\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.bindInsertValues(MatchingClauseNode.java:783)\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.bindInsert(MatchingClauseNode.java:738)\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.bind(MatchingClauseNode.java:224)\\n\\tat org.apache.derby.impl.sql.compile.MergeNode.bindStatement(MergeNode.java:258)\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:402)\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:99)\\n\\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:1116)\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:682)\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:631)\\n\\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:367)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:527)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:369)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:245)\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229)\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)\\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\\n\\tat org.apache.derby.tools.ij.main(ij.java:59)\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13869461\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13869461&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13869461\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13869461_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869461_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 12:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T12:50:52+0000\'\u003e13\\/Jan\\/14 12:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe NPE goes away if I specify the target column names in the mergeInsert clause, like this:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij(CONNECTION4)&gt; merge into t1 using t2 on t1.x = t2.x when matched then update set y = -y when not matched then insert (x, y) values (t2.x, 42);\\n0 rows inserted\\/updated\\/deleted\\nWARNING 02000: No row was found for FETCH, UPDATE or DELETE; or the result of a query is an empty table.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eAccording to the functional spec, the target column names are optional in the mergeInsert clause.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13869461_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869461_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 12:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T12:50:52+0000\'\u003e13\\/Jan\\/14 12:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The NPE goes away if I specify the target column names in the mergeInsert clause, like this: \\n\\n  \\n ij(CONNECTION4)&gt; merge into t1 using t2 on t1.x = t2.x when matched then update set y = -y when not matched then insert (x, y) values (t2.x, 42);\\n0 rows inserted\\/updated\\/deleted\\nWARNING 02000: No row was found for FETCH, UPDATE or DELETE; or the result of a query is an empty table.\\n \\n  \\n\\n According to the functional spec, the target column names are optional in the mergeInsert clause.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13869540\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13869540&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13869540\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13869540_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869540_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 13:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T13:37:14+0000\'\u003e13\\/Jan\\/14 13:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for kicking the tires, Knut. I\'ll take a look at this when I pop off my permissions-related interrupt stack. Looks like I need to add a dummy insert column list if the user omits one. Thanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13869540_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869540_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 13:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T13:37:14+0000\'\u003e13\\/Jan\\/14 13:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for kicking the tires, Knut. I\'ll take a look at this when I pop off my permissions-related interrupt stack. Looks like I need to add a dummy insert column list if the user omits one. Thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13869580\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13869580&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13869580\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_13869580_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869580_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 14:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T14:34:06+0000\'\u003e13\\/Jan\\/14 14:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Rick Hillegas - 14\\/Jan\\/14 20:25\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Rick, \u003cbr\\/\u003e\\nit seems that if you have a \u003ctt\u003etargetCorrelationName\u003c\\/tt\u003e that\'s different from \u003ctt\u003etargetTable\u003c\\/tt\u003e you get an error if you\'re referring to \u003ctt\u003etargetCorrelationName\u003c\\/tt\u003e in a \u003ctt\u003emergeWhenClause\u003c\\/tt\u003e. Using it in \u003ctt\u003esearchCondition\u003c\\/tt\u003e is ok:\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eException in thread \\\"main\\\" java.sql.SQLSyntaxErrorException: Table name \'M\' should be the same as \'META\'.\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:93)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:288)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:424)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:353)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2396)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:82)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:691)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeLargeUpdate(EmbedStatement.java:181)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(EmbedStatement.java:170)\u003cbr\\/\u003e\\n\\tat regexp.Driver.main(Driver.java:133)\u003cbr\\/\u003e\\nCaused by: java.sql.SQLException: Table name \'M\' should be the same as \'META\'.\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory.java:138)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:73)\u003cbr\\/\u003e\\n\\t... 9 more\u003cbr\\/\u003e\\nCaused by: ERROR 42X55: Table name \'M\' should be the same as \'META\'.\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:265)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:260)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ResultColumn.setColumnDescriptor(ResultColumn.java:915)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ResultColumn.bindResultColumnByName(ResultColumn.java:834)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ResultColumnList.bindResultColumnsByName(ResultColumnList.java:890)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.InsertNode.bindStatement(InsertNode.java:282)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.bindInsert(MatchingClauseNode.java:770)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.bind(MatchingClauseNode.java:224)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.MergeNode.bindStatement(MergeNode.java:258)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:402)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:99)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:1116)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:682)\u003cbr\\/\u003e\\n\\t... 3 more\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHere is a script for this problem:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003econnect \'jdbc:derby:memory:db;create=true\';\\n\\ncreate table t1( a int, b int );\\ncreate table t2( c int, d int );\\n\\ninsert into t1 values ( 1, 100 ), ( 2, 200 );\\ninsert into t2 values ( 1, 100 ), (2, 200), ( 3, 300 );\\n\\nmerge into t1 x\\nusing t2 y on x.a = y.a\\nwhen matched and x.b &gt; 100 then update set x.b = y.d;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_13869580_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869580_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 14:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T14:34:06+0000\'\u003e13\\/Jan\\/14 14:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Rick Hillegas - 14\\/Jan\\/14 20:25\\\"\u003eedited\u003c\\/span\u003e                   Hi Rick,  \\nit seems that if you have a  targetCorrelationName  that\'s different from  targetTable  you get an error if you\'re referring to  targetCorrelationName  in a  mergeWhenClause . Using it in  searchCondition  is ok: \\n\\n \\n Exception in thread \\\"main\\\" java.sql.SQLSyntaxErrorException: Table name \'M\' should be the same as \'META\'. \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:93) \\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:288) \\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:424) \\n\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:353) \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2396) \\n\\tat org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:82) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:691) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeLargeUpdate(EmbedStatement.java:181) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(EmbedStatement.java:170) \\n\\tat regexp.Driver.main(Driver.java:133) \\nCaused by: java.sql.SQLException: Table name \'M\' should be the same as \'META\'. \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory.java:138) \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:73) \\n\\t... 9 more \\nCaused by: ERROR 42X55: Table name \'M\' should be the same as \'META\'. \\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:265) \\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:260) \\n\\tat org.apache.derby.impl.sql.compile.ResultColumn.setColumnDescriptor(ResultColumn.java:915) \\n\\tat org.apache.derby.impl.sql.compile.ResultColumn.bindResultColumnByName(ResultColumn.java:834) \\n\\tat org.apache.derby.impl.sql.compile.ResultColumnList.bindResultColumnsByName(ResultColumnList.java:890) \\n\\tat org.apache.derby.impl.sql.compile.InsertNode.bindStatement(InsertNode.java:282) \\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.bindInsert(MatchingClauseNode.java:770) \\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.bind(MatchingClauseNode.java:224) \\n\\tat org.apache.derby.impl.sql.compile.MergeNode.bindStatement(MergeNode.java:258) \\n\\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:402) \\n\\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:99) \\n\\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:1116) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:682) \\n\\t... 3 more  \\n\\n Here is a script for this problem: \\n\\n  \\n connect \'jdbc:derby:memory:db;create=true\';\\n\\ncreate table t1( a int, b int );\\ncreate table t2( c int, d int );\\n\\ninsert into t1 values ( 1, 100 ), ( 2, 200 );\\ninsert into t2 values ( 1, 100 ), (2, 200), ( 3, 300 );\\n\\nmerge into t1 x\\nusing t2 y on x.a = y.a\\nwhen matched and x.b &gt; 100 then update set x.b = y.d;\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13869595\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13869595&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13869595\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13869595_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869595_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 15:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T15:01:51+0000\'\u003e13\\/Jan\\/14 15:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIf I use a system table as source table, I get an error message saying that the source must be a table, which it is:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create table t1(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using sysibm.sysdummy1 on true when not matched then insert (x) values (1);\\nERROR 42XAL: The source table of a MERGE statement must be a base table, view, or table function.\\nij&gt; merge into t1 using sysibm.sysdummy1 s on true when not matched then insert (x) values (1);\\nERROR 42XAL: The source table of a MERGE statement must be a base table, view, or table function.\\nij&gt; merge into t1 using sys.systables on true when not matched then insert (x) values (1);\\nERROR 42XAL: The source table of a MERGE statement must be a base table, view, or table function.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13869595_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869595_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 15:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T15:01:51+0000\'\u003e13\\/Jan\\/14 15:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    If I use a system table as source table, I get an error message saying that the source must be a table, which it is: \\n\\n  \\n ij&gt; create table t1(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using sysibm.sysdummy1 on true when not matched then insert (x) values (1);\\nERROR 42XAL: The source table of a MERGE statement must be a base table, view, or table function.\\nij&gt; merge into t1 using sysibm.sysdummy1 s on true when not matched then insert (x) values (1);\\nERROR 42XAL: The source table of a MERGE statement must be a base table, view, or table function.\\nij&gt; merge into t1 using sys.systables on true when not matched then insert (x) values (1);\\nERROR 42XAL: The source table of a MERGE statement must be a base table, view, or table function.\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13869597\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13869597&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13869597\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13869597_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869597_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 15:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T15:06:23+0000\'\u003e13\\/Jan\\/14 15:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eActually, the message says \\\"base table\\\". Maybe system tables don\'t count as base tables?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13869597_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869597_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 15:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T15:06:23+0000\'\u003e13\\/Jan\\/14 15:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Actually, the message says \\\"base table\\\". Maybe system tables don\'t count as base tables?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13869605\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13869605&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13869605\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13869605_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869605_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 15:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T15:14:56+0000\'\u003e13\\/Jan\\/14 15:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve discovered one more problem:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create view singlerow(x) as values 1;\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t1(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create trigger tr after insert on t1 referencing new as new for each row merge into t2 using singlerow on t2.y = new.x when not matched then insert (y) values (new.x);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; insert into t1 values 1,2,3,4,5,4,3,2,1,1,1,2,3,100;\\nERROR XJ001: Java exception: \'ASSERT FAILED ProjectRestrictResultSet already open: org.apache.derby.shared.common.sanity.AssertFailure\'. (errorCode = 0)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13869605_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869605_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 15:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T15:14:56+0000\'\u003e13\\/Jan\\/14 15:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve discovered one more problem: \\n\\n  \\n ij&gt; create view singlerow(x) as values 1;\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t1(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create trigger tr after insert on t1 referencing new as new for each row merge into t2 using singlerow on t2.y = new.x when not matched then insert (y) values (new.x);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; insert into t1 values 1,2,3,4,5,4,3,2,1,1,1,2,3,100;\\nERROR XJ001: Java exception: \'ASSERT FAILED ProjectRestrictResultSet already open: org.apache.derby.shared.common.sanity.AssertFailure\'. (errorCode = 0)\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13869648\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13869648&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13869648\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13869648_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869648_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 16:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T16:10:22+0000\'\u003e13\\/Jan\\/14 16:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks, for kicking the tires, Knut and Dyre. Please keep finding problems. As I said, I\'ll take a look at these after I come up for air. Thanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13869648_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13869648_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/14 16:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-13T16:10:22+0000\'\u003e13\\/Jan\\/14 16:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks, for kicking the tires, Knut and Dyre. Please keep finding problems. As I said, I\'ll take a look at these after I come up for air. Thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13870676\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13870676&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13870676\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13870676_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13870676_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jan\\/14 12:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-14T12:28:37+0000\'\u003e14\\/Jan\\/14 12:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere\'s another NPE:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create table t1(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using t2 on t1.x=t2.x when matched then update set x = (select count(*) from t2);\\nERROR XJ001: Java exception: \': java.lang.NullPointerException\'. (errorCode = 0)\\njava.lang.NullPointerException\\n\\tat org.apache.derby.impl.sql.compile.SelectNode.getFinalCostEstimate(SelectNode.java:2224)\\n\\tat org.apache.derby.impl.sql.compile.SubqueryNode.generateExpression(SubqueryNode.java:1936)\\n\\tat org.apache.derby.impl.sql.compile.ResultColumn.generateExpression(ResultColumn.java:1056)\\n\\tat org.apache.derby.impl.sql.compile.ResultColumnList.generateEvaluatedRow(ResultColumnList.java:1452)\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.generateInsertUpdateRow(MatchingClauseNode.java:1255)\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.generate(MatchingClauseNode.java:1146)\\n\\tat org.apache.derby.impl.sql.compile.MergeNode.generate(MergeNode.java:770)\\n\\tat org.apache.derby.impl.sql.compile.StatementNode.generate(StatementNode.java:317)\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:547)\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:99)\\n\\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:1116)\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:682)\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:631)\\n\\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:367)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:527)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:369)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:245)\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229)\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)\\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\\n\\tat org.apache.derby.tools.ij.main(ij.java:59)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13870676_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13870676_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jan\\/14 12:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-14T12:28:37+0000\'\u003e14\\/Jan\\/14 12:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here\'s another NPE: \\n\\n  \\n ij&gt; create table t1(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using t2 on t1.x=t2.x when matched then update set x = (select count(*) from t2);\\nERROR XJ001: Java exception: \': java.lang.NullPointerException\'. (errorCode = 0)\\njava.lang.NullPointerException\\n\\tat org.apache.derby.impl.sql.compile.SelectNode.getFinalCostEstimate(SelectNode.java:2224)\\n\\tat org.apache.derby.impl.sql.compile.SubqueryNode.generateExpression(SubqueryNode.java:1936)\\n\\tat org.apache.derby.impl.sql.compile.ResultColumn.generateExpression(ResultColumn.java:1056)\\n\\tat org.apache.derby.impl.sql.compile.ResultColumnList.generateEvaluatedRow(ResultColumnList.java:1452)\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.generateInsertUpdateRow(MatchingClauseNode.java:1255)\\n\\tat org.apache.derby.impl.sql.compile.MatchingClauseNode.generate(MatchingClauseNode.java:1146)\\n\\tat org.apache.derby.impl.sql.compile.MergeNode.generate(MergeNode.java:770)\\n\\tat org.apache.derby.impl.sql.compile.StatementNode.generate(StatementNode.java:317)\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:547)\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:99)\\n\\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:1116)\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:682)\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:631)\\n\\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:367)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:527)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:369)\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:245)\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229)\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)\\n\\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\\n\\tat org.apache.derby.tools.ij.main(ij.java:59)\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13870733\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13870733&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13870733\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_13870733_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13870733_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jan\\/14 13:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-14T13:53:41+0000\'\u003e14\\/Jan\\/14 13:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI tried modifying Knut\'s singlerow view idea to use an ordinary table with a single row in it:\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eString q = \\\"MERGE INTO META USING SINGLEROW \\\"+\u003cbr\\/\u003e\\n                \\\"ON META.i = 42 \\\"+\u003cbr\\/\u003e\\n                \\\"WHEN MATCHED THEN UPDATE SET META.c = \'U\' \\\"+\u003cbr\\/\u003e\\n                \\\"WHEN NOT MATCHED THEN INSERT (META.i, META.c) VALUES( 42, \'I\' )\\\";\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThat triggers the following exception\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eCaused by: ERROR XSAI2: The conglomerate (0) requested does not exist.\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:265)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:260)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.heap.HeapConglomerateFactory.readConglomerate(HeapConglomerateFactory.java:254)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.CacheableConglomerate.setIdentity(CacheableConglomerate.java:102)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.cache.ConcurrentCache.find(ConcurrentCache.java:295)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.RAMAccessManager.conglomCacheFind(RAMAccessManager.java:466)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.RAMTransaction.findConglomerate(RAMTransaction.java:404)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.RAMTransaction.findExistingConglomerate(RAMTransaction.java:383)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.RAMTransaction.openConglomerate(RAMTransaction.java:1289)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ResultColumnList.newRowLocationTemplate(ResultColumnList.java:1641)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ResultColumnList.buildRowTemplate(ResultColumnList.java:1563)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.IndexToBaseRowNode.generate(IndexToBaseRowNode.java:238)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generateMinion(ProjectRestrictNode.java:1348)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generate(ProjectRestrictNode.java:1301)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.JoinNode.getJoinArguments(JoinNode.java:1648)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.JoinNode.generateCore(JoinNode.java:1624)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.JoinNode.generateCore(JoinNode.java:1561)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.HalfOuterJoinNode.generate(HalfOuterJoinNode.java:786)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generateMinion(ProjectRestrictNode.java:1348)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generate(ProjectRestrictNode.java:1301)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generateMinion(ProjectRestrictNode.java:1445)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generate(ProjectRestrictNode.java:1301)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.ScrollInsensitiveResultSetNode.generate(ScrollInsensitiveResultSetNode.java:86)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.CursorNode.generate(CursorNode.java:628)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.MergeNode.generate(MergeNode.java:759)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.compile.StatementNode.generate(StatementNode.java:317)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:547)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:99)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:1116)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:682)\u003c\\/p\u003e\u003c\\/blockquote\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_13870733_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13870733_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jan\\/14 13:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-14T13:53:41+0000\'\u003e14\\/Jan\\/14 13:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I tried modifying Knut\'s singlerow view idea to use an ordinary table with a single row in it: \\n\\n \\n String q = \\\"MERGE INTO META USING SINGLEROW \\\"+ \\n                \\\"ON META.i = 42 \\\"+ \\n                \\\"WHEN MATCHED THEN UPDATE SET META.c = \'U\' \\\"+ \\n                \\\"WHEN NOT MATCHED THEN INSERT (META.i, META.c) VALUES( 42, \'I\' )\\\";  \\n\\n That triggers the following exception \\n\\n \\n Caused by: ERROR XSAI2: The conglomerate (0) requested does not exist. \\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:265) \\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:260) \\n\\tat org.apache.derby.impl.store.access.heap.HeapConglomerateFactory.readConglomerate(HeapConglomerateFactory.java:254) \\n\\tat org.apache.derby.impl.store.access.CacheableConglomerate.setIdentity(CacheableConglomerate.java:102) \\n\\tat org.apache.derby.impl.services.cache.ConcurrentCache.find(ConcurrentCache.java:295) \\n\\tat org.apache.derby.impl.store.access.RAMAccessManager.conglomCacheFind(RAMAccessManager.java:466) \\n\\tat org.apache.derby.impl.store.access.RAMTransaction.findConglomerate(RAMTransaction.java:404) \\n\\tat org.apache.derby.impl.store.access.RAMTransaction.findExistingConglomerate(RAMTransaction.java:383) \\n\\tat org.apache.derby.impl.store.access.RAMTransaction.openConglomerate(RAMTransaction.java:1289) \\n\\tat org.apache.derby.impl.sql.compile.ResultColumnList.newRowLocationTemplate(ResultColumnList.java:1641) \\n\\tat org.apache.derby.impl.sql.compile.ResultColumnList.buildRowTemplate(ResultColumnList.java:1563) \\n\\tat org.apache.derby.impl.sql.compile.IndexToBaseRowNode.generate(IndexToBaseRowNode.java:238) \\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generateMinion(ProjectRestrictNode.java:1348) \\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generate(ProjectRestrictNode.java:1301) \\n\\tat org.apache.derby.impl.sql.compile.JoinNode.getJoinArguments(JoinNode.java:1648) \\n\\tat org.apache.derby.impl.sql.compile.JoinNode.generateCore(JoinNode.java:1624) \\n\\tat org.apache.derby.impl.sql.compile.JoinNode.generateCore(JoinNode.java:1561) \\n\\tat org.apache.derby.impl.sql.compile.HalfOuterJoinNode.generate(HalfOuterJoinNode.java:786) \\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generateMinion(ProjectRestrictNode.java:1348) \\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generate(ProjectRestrictNode.java:1301) \\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generateMinion(ProjectRestrictNode.java:1445) \\n\\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generate(ProjectRestrictNode.java:1301) \\n\\tat org.apache.derby.impl.sql.compile.ScrollInsensitiveResultSetNode.generate(ScrollInsensitiveResultSetNode.java:86) \\n\\tat org.apache.derby.impl.sql.compile.CursorNode.generate(CursorNode.java:628) \\n\\tat org.apache.derby.impl.sql.compile.MergeNode.generate(MergeNode.java:759) \\n\\tat org.apache.derby.impl.sql.compile.StatementNode.generate(StatementNode.java:317) \\n\\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:547) \\n\\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:99) \\n\\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:1116) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:682)               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13870741\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13870741&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13870741\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13870741_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13870741_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jan\\/14 14:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-14T14:05:20+0000\'\u003e14\\/Jan\\/14 14:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere\'s another error:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij version 10.11\\nij&gt; connect \'jdbc:derby:memory:db;create=true\';\\nij&gt; create table t1(x int, y varchar(100));\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; insert into t2 values 1, 1, 2;\\n3 rows inserted\\/updated\\/deleted\\nij&gt; insert into t1 values (1, null), (2, \'\');\\n2 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using t2 on exists (select * from t2) when matched then update set y = y || \'x\';\\nERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored\\nERROR XJ001: Java exception: \': java.io.EOFException\'.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13870741_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13870741_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jan\\/14 14:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-14T14:05:20+0000\'\u003e14\\/Jan\\/14 14:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here\'s another error: \\n\\n  \\n ij version 10.11\\nij&gt; connect \'jdbc:derby:memory:db;create=true\';\\nij&gt; create table t1(x int, y varchar(100));\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; insert into t2 values 1, 1, 2;\\n3 rows inserted\\/updated\\/deleted\\nij&gt; insert into t1 values (1, null), (2, \'\');\\n2 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using t2 on exists (select * from t2) when matched then update set y = y || \'x\';\\nERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored\\nERROR XJ001: Java exception: \': java.io.EOFException\'.\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13870781\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13870781&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13870781\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13870781_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13870781_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jan\\/14 14:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-14T14:54:14+0000\'\u003e14\\/Jan\\/14 14:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m able to reproduce the \\\"conglomerate does not exist\\\" error that Dyre mentioned:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create table t1(x int primary key);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using t2 on t1.x = 42 when not matched then insert (x) values (42);\\nERROR XSAI2: The conglomerate (0) requested does not exist.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13870781_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13870781_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jan\\/14 14:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-14T14:54:14+0000\'\u003e14\\/Jan\\/14 14:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m able to reproduce the \\\"conglomerate does not exist\\\" error that Dyre mentioned: \\n\\n  \\n ij&gt; create table t1(x int primary key);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using t2 on t1.x = 42 when not matched then insert (x) values (42);\\nERROR XSAI2: The conglomerate (0) requested does not exist.\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13873710\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13873710&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13873710\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13873710_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13873710_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jan\\/14 18:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-16T18:30:42+0000\'\u003e16\\/Jan\\/14 18:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-12-aa-canOmitInsertColumnList.diff. This patch fixes the following problem Knut found: you should be allowed to omit the INSERT column list in a WHEN NOT MATCHED clause if the number of values supplied in the VALUES subclause equals the number of columns in the table.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13873710_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13873710_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jan\\/14 18:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-16T18:30:42+0000\'\u003e16\\/Jan\\/14 18:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-12-aa-canOmitInsertColumnList.diff. This patch fixes the following problem Knut found: you should be allowed to omit the INSERT column list in a WHEN NOT MATCHED clause if the number of values supplied in the VALUES subclause equals the number of columns in the table. \\n\\n Touches the following files: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13873716\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13873716&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13873716\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13873716_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13873716_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jan\\/14 18:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-16T18:32:16+0000\'\u003e16\\/Jan\\/14 18:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1558871 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1558871\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1558871\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Make the INSERT column list optional in the WHEN NOT MATCHED clause of a MERGE statement provided that the number of values in the VALUES subclause equals the number of columns in the target table; commit derby-3155-12-aa-canOmitInsertColumnList.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13873716_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13873716_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jan\\/14 18:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-16T18:32:16+0000\'\u003e16\\/Jan\\/14 18:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1558871 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1558871  ] \\n\\n   DERBY-3155  : Make the INSERT column list optional in the WHEN NOT MATCHED clause of a MERGE statement provided that the number of values in the VALUES subclause equals the number of columns in the target table; commit derby-3155-12-aa-canOmitInsertColumnList.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13873910\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13873910&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13873910\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13873910_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13873910_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jan\\/14 20:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-16T20:44:22+0000\'\u003e16\\/Jan\\/14 20:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-13-aa-allowSystemAndTempTables.diff. This patch addresses another problem Knut found: you couldn\'t use system tables as source tables.\u003c\\/p\u003e\\n\\n\u003cp\u003eA couple small changes make the following operations possible:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Using system tables as source tables\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Using temp tables as source tables and target tables\u003c\\/p\u003e\\n\\n\u003cp\u003eThe following is (and should be) illegal:\u003c\\/p\u003e\\n\\n\u003cp\u003e3) Using system tables as target tables\u003c\\/p\u003e\\n\\n\u003cp\u003eThe following is still illegal but should be allowed. The fix, however, will be move involved:\u003c\\/p\u003e\\n\\n\u003cp\u003e4) Using synonyms as source and target tables.\u003c\\/p\u003e\\n\\n\u003cp\u003eBefore addressing item 4, I would like to address other problems found by Knut and Dyre which I consider more important.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13873910_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13873910_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jan\\/14 20:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-16T20:44:22+0000\'\u003e16\\/Jan\\/14 20:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-13-aa-allowSystemAndTempTables.diff. This patch addresses another problem Knut found: you couldn\'t use system tables as source tables. \\n\\n A couple small changes make the following operations possible: \\n\\n 1) Using system tables as source tables \\n\\n 2) Using temp tables as source tables and target tables \\n\\n The following is (and should be) illegal: \\n\\n 3) Using system tables as target tables \\n\\n The following is still illegal but should be allowed. The fix, however, will be move involved: \\n\\n 4) Using synonyms as source and target tables. \\n\\n Before addressing item 4, I would like to address other problems found by Knut and Dyre which I consider more important. \\n\\n Touches the following files: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13873911\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13873911&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13873911\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13873911_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13873911_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jan\\/14 20:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-16T20:46:01+0000\'\u003e16\\/Jan\\/14 20:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1558912 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1558912\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1558912\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Allow system and temp tables in MERGE statements; commit derby-3155-13-aa-allowSystemAndTempTables.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13873911_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13873911_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jan\\/14 20:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-16T20:46:01+0000\'\u003e16\\/Jan\\/14 20:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1558912 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1558912  ] \\n\\n   DERBY-3155  : Allow system and temp tables in MERGE statements; commit derby-3155-13-aa-allowSystemAndTempTables.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13874945\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13874945&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13874945\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13874945_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13874945_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/14 16:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-17T16:53:40+0000\'\u003e17\\/Jan\\/14 16:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff. This patch fixes the following problem which Knut found: correlation names on the left side of SET clauses weren\'t being replaced with their table names.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe problem was that I was relying on the Visitor logic in ResultColumn to visit the left side of SET clauses as well as the right side. But apparently it doesn\'t.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13874945_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13874945_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/14 16:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-17T16:53:40+0000\'\u003e17\\/Jan\\/14 16:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff. This patch fixes the following problem which Knut found: correlation names on the left side of SET clauses weren\'t being replaced with their table names. \\n\\n The problem was that I was relying on the Visitor logic in ResultColumn to visit the left side of SET clauses as well as the right side. But apparently it doesn\'t. \\n\\n Touches the following files: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13874946\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13874946&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13874946\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13874946_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13874946_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/14 16:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-17T16:54:44+0000\'\u003e17\\/Jan\\/14 16:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1559183 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1559183\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1559183\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Replace correlation names on the left side of the SET clauses in MERGE statements: commit derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13874946_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13874946_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/14 16:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-17T16:54:44+0000\'\u003e17\\/Jan\\/14 16:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1559183 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1559183  ] \\n\\n   DERBY-3155  : Replace correlation names on the left side of the SET clauses in MERGE statements: commit derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13875083\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13875083&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13875083\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13875083_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13875083_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/14 18:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-17T18:49:11+0000\'\u003e17\\/Jan\\/14 18:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-15-aa-replumbMergeResultSetCleanup.diff. This patch fixes the following problem found by Knut: an assertion was raised under a row-scope trigger which fired a MERGE statement.\u003c\\/p\u003e\\n\\n\u003cp\u003eI re-arranged the cleanup logic in MergeResultSet to more closely resemble the cleanup logic in InsertResultSet.\u003c\\/p\u003e\\n\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13875083_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13875083_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/14 18:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-17T18:49:11+0000\'\u003e17\\/Jan\\/14 18:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-15-aa-replumbMergeResultSetCleanup.diff. This patch fixes the following problem found by Knut: an assertion was raised under a row-scope trigger which fired a MERGE statement. \\n\\n I re-arranged the cleanup logic in MergeResultSet to more closely resemble the cleanup logic in InsertResultSet. \\n\\n\\n\\n Touches the following files: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13875086\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13875086&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13875086\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13875086_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13875086_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/14 18:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-17T18:50:16+0000\'\u003e17\\/Jan\\/14 18:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1559218 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1559218\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1559218\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Make cleanup logic in MergeResultSet more closely resemble the cleanup logic in InsertResultSet; commit derby-3155-15-aa-replumbMergeResultSetCleanup.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13875086_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13875086_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/14 18:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-17T18:50:16+0000\'\u003e17\\/Jan\\/14 18:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1559218 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1559218  ] \\n\\n   DERBY-3155  : Make cleanup logic in MergeResultSet more closely resemble the cleanup logic in InsertResultSet; commit derby-3155-15-aa-replumbMergeResultSetCleanup.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13877361\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13877361&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13877361\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13877361_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877361_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 09:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T09:50:37+0000\'\u003e21\\/Jan\\/14 09:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere\'s another one to ponder on:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij version 10.11\\nij&gt; connect \'jdbc:derby:memory:db;create=true\';\\nij&gt; create table t(x int, y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table tv(x int, y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create view v as select * from tv;\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t using v on t.x=v.x when matched then update set t.y=v.y;\\nERROR XJ001: Java exception: \'ASSERT FAILED currentOfNode is null: org.apache.derby.shared.common.sanity.AssertFailure\'.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13877361_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877361_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 09:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T09:50:37+0000\'\u003e21\\/Jan\\/14 09:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here\'s another one to ponder on: \\n\\n  \\n ij version 10.11\\nij&gt; connect \'jdbc:derby:memory:db;create=true\';\\nij&gt; create table t(x int, y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table tv(x int, y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create view v as select * from tv;\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t using v on t.x=v.x when matched then update set t.y=v.y;\\nERROR XJ001: Java exception: \'ASSERT FAILED currentOfNode is null: org.apache.derby.shared.common.sanity.AssertFailure\'.\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13877362\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13877362&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13877362\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13877362_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877362_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 09:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T09:55:47+0000\'\u003e21\\/Jan\\/14 09:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis may be intentional, but I thought I\'d raise the issue so that we can clarify whether or not it\'s supposed to be supported. Merge with self doesn\'t seem to be accepted:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create table t(x int, y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t a using t b on a.x=b.x when matched then update set a.y=b.y;\\nERROR 42X09: The table or alias name \'T\' is used more than once in the FROM list.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13877362_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877362_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 09:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T09:55:47+0000\'\u003e21\\/Jan\\/14 09:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This may be intentional, but I thought I\'d raise the issue so that we can clarify whether or not it\'s supposed to be supported. Merge with self doesn\'t seem to be accepted: \\n\\n  \\n ij&gt; create table t(x int, y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t a using t b on a.x=b.x when matched then update set a.y=b.y;\\nERROR 42X09: The table or alias name \'T\' is used more than once in the FROM list.\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13877447\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13877447&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13877447\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13877447_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877447_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 13:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T13:20:19+0000\'\u003e21\\/Jan\\/14 13:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for continuing to test-drive the MERGE statement. Yes, that last one is supposed to be forbidden, though I can see that the error message could be improved. The same table can\'t be used as both a source and target table. That\'s part of what\'s intended by the following bullet item in the functional spec under the heading \\\"New MERGE Statement Syntax\\\". This item could probably stand some clarification:\u003c\\/p\u003e\\n\\n\u003cp\u003e\\\"correlation names - The source table name (or its correlation name) may not be the same as the target table name (or its correlation name).\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks,\u003cbr\\/\u003e\\n-Rick\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13877447_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877447_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 13:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T13:20:19+0000\'\u003e21\\/Jan\\/14 13:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for continuing to test-drive the MERGE statement. Yes, that last one is supposed to be forbidden, though I can see that the error message could be improved. The same table can\'t be used as both a source and target table. That\'s part of what\'s intended by the following bullet item in the functional spec under the heading \\\"New MERGE Statement Syntax\\\". This item could probably stand some clarification: \\n\\n \\\"correlation names - The source table name (or its correlation name) may not be the same as the target table name (or its correlation name).\\\" \\n\\n Thanks, \\n-Rick              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13877519\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13877519&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13877519\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13877519_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877519_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 15:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T15:13:40+0000\'\u003e21\\/Jan\\/14 15:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for that clarification. My original understanding of that bullet was that the exposed name of the source table had to be different from the exposed name of the target table.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe assert failure that I posted just before the question about self merge, was something I originally came across while trying to work around the limitation. For example, this would allow you to do a self merge, but currently fails just like the repro above:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create table t(x int, y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create view v as select * from t;\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t using v on t.x=v.x when matched then update set t.y=v.y;\\nERROR XJ001: Java exception: \'ASSERT FAILED currentOfNode is null: org.apache.derby.shared.common.sanity.AssertFailure\'.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13877519_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877519_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 15:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T15:13:40+0000\'\u003e21\\/Jan\\/14 15:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for that clarification. My original understanding of that bullet was that the exposed name of the source table had to be different from the exposed name of the target table. \\n\\n The assert failure that I posted just before the question about self merge, was something I originally came across while trying to work around the limitation. For example, this would allow you to do a self merge, but currently fails just like the repro above: \\n\\n  \\n ij&gt; create table t(x int, y int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create view v as select * from t;\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t using v on t.x=v.x when matched then update set t.y=v.y;\\nERROR XJ001: Java exception: \'ASSERT FAILED currentOfNode is null: org.apache.derby.shared.common.sanity.AssertFailure\'.\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13877594\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13877594&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13877594\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13877594_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877594_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 16:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T16:33:38+0000\'\u003e21\\/Jan\\/14 16:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis patch addresses the following problem case:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create table t1(x int primary key);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using t2 on t1.x = 42 when not matched then insert (x) values (42);\\nERROR XSAI2: The conglomerate (0) requested does not exist.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThis was Knut\'s simplification of a problem case which Dyre identified. Knut\'s query is fixed and Dyre\'s original query is converted into a later problem which Knut recorded:\u003c\\/p\u003e\\n\\n\u003cp\u003eERROR XJ001: Java exception: \'ASSERT FAILED currentOfNode is null: org.apache.derby.shared.common.sanity.AssertFailure\'.\u003c\\/p\u003e\\n\\n\u003cp\u003eAt a high level, this is what\'s going on with the corrected failure:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) The MERGE statement cooks up a LEFT JOIN to drive its execution phase.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) This is a LEFT JOIN which ordinary users can\'t create. That\'s because the row location from the target table is added to the SELECT list of the LEFT JOIN.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) The added row location column causes the LEFT JOIN to violate some assumptions made by the compiler.\u003c\\/p\u003e\\n\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdjusted a case where a FromBaseTable is cloning its result columns without propagating its heap conglomerate id.\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java\u003c\\/p\u003e\\n\\n\u003cp\u003eFixed the construction of the referenced bit map. The old logic did not account for the fact that a row location column can be one of the returned columns.\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdded a test case for this problem query.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13877594_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877594_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 16:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T16:33:38+0000\'\u003e21\\/Jan\\/14 16:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This patch addresses the following problem case: \\n\\n  \\n ij&gt; create table t1(x int primary key);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t1 using t2 on t1.x = 42 when not matched then insert (x) values (42);\\nERROR XSAI2: The conglomerate (0) requested does not exist.\\n \\n  \\n\\n This was Knut\'s simplification of a problem case which Dyre identified. Knut\'s query is fixed and Dyre\'s original query is converted into a later problem which Knut recorded: \\n\\n ERROR XJ001: Java exception: \'ASSERT FAILED currentOfNode is null: org.apache.derby.shared.common.sanity.AssertFailure\'. \\n\\n At a high level, this is what\'s going on with the corrected failure: \\n\\n 1) The MERGE statement cooks up a LEFT JOIN to drive its execution phase. \\n\\n 2) This is a LEFT JOIN which ordinary users can\'t create. That\'s because the row location from the target table is added to the SELECT list of the LEFT JOIN. \\n\\n 3) The added row location column causes the LEFT JOIN to violate some assumptions made by the compiler. \\n\\n\\n\\n Touches the following files: \\n\\n -------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java \\n\\n Adjusted a case where a FromBaseTable is cloning its result columns without propagating its heap conglomerate id. \\n\\n -------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java \\n\\n Fixed the construction of the referenced bit map. The old logic did not account for the fact that a row location column can be one of the returned columns. \\n\\n -------------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Added a test case for this problem query.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13877602\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13877602&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13877602\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13877602_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877602_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 16:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T16:47:12+0000\'\u003e21\\/Jan\\/14 16:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is a variation on the query Knut found which raises a de-serialization error when trying to concatenate a null with a string. This variation eliminates the subquery in the ON clause:\u003c\\/p\u003e\\n\\n\u003cp\u003econnect \'jdbc:derby:memory:db;create=true\';\u003c\\/p\u003e\\n\\n\u003cp\u003ecreate table t1(x int, y varchar(100));\u003cbr\\/\u003e\\ncreate table t2(x int);\u003cbr\\/\u003e\\ninsert into t2 values 1, 1, 2;\u003cbr\\/\u003e\\ninsert into t1 values (1, null), (2, \'\');\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; this is ok\u003cbr\\/\u003e\\nselect y || \'x\'\u003cbr\\/\u003e\\nfrom t2 left join t1 on true;\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; this fails\u003cbr\\/\u003e\\nmerge into t1\u003cbr\\/\u003e\\nusing t2 on true\u003cbr\\/\u003e\\nwhen matched then update set y = y || \'x\';\u003c\\/p\u003e\\n\\n\u003cp\u003edelete from t1 where y is null;\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; without the nulls, this succeeds\u003cbr\\/\u003e\\nmerge into t1\u003cbr\\/\u003e\\nusing t2 on true\u003cbr\\/\u003e\\nwhen matched then update set y = y || \'x\';\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13877602_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877602_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 16:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T16:47:12+0000\'\u003e21\\/Jan\\/14 16:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is a variation on the query Knut found which raises a de-serialization error when trying to concatenate a null with a string. This variation eliminates the subquery in the ON clause: \\n\\n connect \'jdbc:derby:memory:db;create=true\'; \\n\\n create table t1(x int, y varchar(100)); \\ncreate table t2(x int); \\ninsert into t2 values 1, 1, 2; \\ninsert into t1 values (1, null), (2, \'\'); \\n\\n &#8211; this is ok \\nselect y || \'x\' \\nfrom t2 left join t1 on true; \\n\\n &#8211; this fails \\nmerge into t1 \\nusing t2 on true \\nwhen matched then update set y = y || \'x\'; \\n\\n delete from t1 where y is null; \\n\\n &#8211; without the nulls, this succeeds \\nmerge into t1 \\nusing t2 on true \\nwhen matched then update set y = y || \'x\';              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13877708\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13877708&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13877708\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13877708_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877708_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 18:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T18:38:08+0000\'\u003e21\\/Jan\\/14 18:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1560134 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1560134\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1560134\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Allow for row location columns in the result column list of base tables; tests passed cleanly for me on derby-3155-16-aa-treatCurrentRowLocationNodeLikeBaseColumnNode.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13877708_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13877708_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/14 18:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-21T18:38:08+0000\'\u003e21\\/Jan\\/14 18:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1560134 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1560134  ] \\n\\n   DERBY-3155  : Allow for row location columns in the result column list of base tables; tests passed cleanly for me on derby-3155-16-aa-treatCurrentRowLocationNodeLikeBaseColumnNode.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13878933\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13878933&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13878933\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13878933_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13878933_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/14 18:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-22T18:12:52+0000\'\u003e22\\/Jan\\/14 18:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-17-aa-serializingRowLocations.diff. This patch fixes a deserialization problem found by Knut.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe following script now runs cleanly:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003econnect \'jdbc:derby:memory:db;create=true\';\\n\\ncreate table t1_030(x int, y varchar(100));\\ncreate table t2_030(x int);\\ninsert into t2_030 values 1, 1, 2;\\ninsert into t1_030 values (1, null), (2, \'\');\\n\\n-- this fails\\nmerge into t1_030\\nusing t2_030 on true\\nwhen matched then update set y = y || \'x\';\\n\\nselect * from t1_030 order by x, y;\\n\\nmerge into t1_030\\nusing t2_030 on exists (select * from t2_030)\\nwhen matched then update set y = y || \'x\';\\n\\nselect * from t1_030 order by x, y;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eConvert HeapRowLocations to SQLRefs. This causes us to store SQLRefs in the temporary tables rather than HeapRowLocations. That makes the contents of the temp tables conform to their metadata and fixes the deserialization problem.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdd a test case.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13878933_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13878933_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/14 18:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-22T18:12:52+0000\'\u003e22\\/Jan\\/14 18:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-17-aa-serializingRowLocations.diff. This patch fixes a deserialization problem found by Knut. \\n\\n The following script now runs cleanly: \\n\\n  \\n connect \'jdbc:derby:memory:db;create=true\';\\n\\ncreate table t1_030(x int, y varchar(100));\\ncreate table t2_030(x int);\\ninsert into t2_030 values 1, 1, 2;\\ninsert into t1_030 values (1, null), (2, \'\');\\n\\n-- this fails\\nmerge into t1_030\\nusing t2_030 on true\\nwhen matched then update set y = y || \'x\';\\n\\nselect * from t1_030 order by x, y;\\n\\nmerge into t1_030\\nusing t2_030 on exists (select * from t2_030)\\nwhen matched then update set y = y || \'x\';\\n\\nselect * from t1_030 order by x, y;\\n \\n  \\n\\n\\n Touches the following files: \\n\\n ------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java \\n\\n Convert HeapRowLocations to SQLRefs. This causes us to store SQLRefs in the temporary tables rather than HeapRowLocations. That makes the contents of the temp tables conform to their metadata and fixes the deserialization problem. \\n\\n ------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Add a test case.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13878938\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13878938&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13878938\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13878938_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13878938_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/14 18:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-22T18:14:16+0000\'\u003e22\\/Jan\\/14 18:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1560452 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1560452\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1560452\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Make MERGE statement serialize SQLRefs rather than HeapRowLocations; commit derby-3155-17-aa-serializingRowLocations.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13878938_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13878938_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/14 18:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-22T18:14:16+0000\'\u003e22\\/Jan\\/14 18:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1560452 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1560452  ] \\n\\n   DERBY-3155  : Make MERGE statement serialize SQLRefs rather than HeapRowLocations; commit derby-3155-17-aa-serializingRowLocations.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13879170\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13879170&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13879170\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13879170_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13879170_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/14 20:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-22T20:55:56+0000\'\u003e22\\/Jan\\/14 20:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-18-aa-basicView.diff. This patch fixes a problem Knut found when using a simple view as the source table of a MERGE statement.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe problem arose because views can be turned into FromSubqueries before an UPDATE action is bound. This causes the UpdateNode\'s bind logic to take an unexpected path. The fix was to make UpdateNode.bindStatement() not fall into that path.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e-----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe fix.\u003c\\/p\u003e\\n\\n\u003cp\u003e-----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eA regression test.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13879170_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13879170_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/14 20:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-22T20:55:56+0000\'\u003e22\\/Jan\\/14 20:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-18-aa-basicView.diff. This patch fixes a problem Knut found when using a simple view as the source table of a MERGE statement. \\n\\n The problem arose because views can be turned into FromSubqueries before an UPDATE action is bound. This causes the UpdateNode\'s bind logic to take an unexpected path. The fix was to make UpdateNode.bindStatement() not fall into that path. \\n\\n\\n Touches the following files: \\n\\n ----------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java \\n\\n The fix. \\n\\n ----------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n A regression test.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13879171\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13879171&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13879171\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13879171_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13879171_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/14 20:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-22T20:56:59+0000\'\u003e22\\/Jan\\/14 20:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1560507 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1560507\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1560507\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Basic support for views as the source tables of MERGE statements; commit derby-3155-18-aa-basicView.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13879171_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13879171_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/14 20:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-22T20:56:59+0000\'\u003e22\\/Jan\\/14 20:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1560507 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1560507  ] \\n\\n   DERBY-3155  : Basic support for views as the source tables of MERGE statements; commit derby-3155-18-aa-basicView.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13881364\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13881364&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13881364\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13881364_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13881364_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/14 19:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-24T19:50:27+0000\'\u003e24\\/Jan\\/14 19:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff. This patch forbids subqueries in the WHEN [ NOT ] MATCHED clauses of MERGE statements. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe SQL Standard allows subqueries in the WHEN [ NOT ] MATCHED clauses of MERGE statements. However, these subqueries break code-generation. That\'s because we don\'t completely optimize the dummy INSERT\\/UPDATE\\/DELETE statements which we cook up in order to compile the WHEN [ NOT ] MATCHED clauses. If we improve the MERGE statement so that the dummy statements are completely optimized, then we can consider allowing subqueries in these clauses.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will record this limitation in the functional spec and I will create an enhancement request for lifting this limitation later on.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe code to forbid these subqueries.\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml\u003cbr\\/\u003e\\nM       java\\/shared\\/org\\/apache\\/derby\\/shared\\/common\\/reference\\/SQLState.java\u003c\\/p\u003e\\n\\n\u003cp\u003eA new error message for this limitation.\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNew test cases.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13881364_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13881364_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/14 19:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-24T19:50:27+0000\'\u003e24\\/Jan\\/14 19:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff. This patch forbids subqueries in the WHEN [ NOT ] MATCHED clauses of MERGE statements. I am running tests now. \\n\\n The SQL Standard allows subqueries in the WHEN [ NOT ] MATCHED clauses of MERGE statements. However, these subqueries break code-generation. That\'s because we don\'t completely optimize the dummy INSERT\\/UPDATE\\/DELETE statements which we cook up in order to compile the WHEN [ NOT ] MATCHED clauses. If we improve the MERGE statement so that the dummy statements are completely optimized, then we can consider allowing subqueries in these clauses. \\n\\n I will record this limitation in the functional spec and I will create an enhancement request for lifting this limitation later on. \\n\\n Touches the following files: \\n\\n -------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\n\\n The code to forbid these subqueries. \\n\\n -------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml \\nM       java\\/shared\\/org\\/apache\\/derby\\/shared\\/common\\/reference\\/SQLState.java \\n\\n A new error message for this limitation. \\n\\n -------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n New test cases.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13882805\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13882805&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13882805\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13882805_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13882805_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jan\\/14 13:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-27T13:34:46+0000\'\u003e27\\/Jan\\/14 13:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTests passed cleanly for me on derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff except for the recently introduced instabilities in org.apache.derbyTesting.functionTests.tests.lang.SelectivityTest.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13882805_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13882805_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jan\\/14 13:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-27T13:34:46+0000\'\u003e27\\/Jan\\/14 13:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tests passed cleanly for me on derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff except for the recently introduced instabilities in org.apache.derbyTesting.functionTests.tests.lang.SelectivityTest.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13882806\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13882806&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13882806\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13882806_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13882806_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jan\\/14 13:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-27T13:36:12+0000\'\u003e27\\/Jan\\/14 13:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1561671 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1561671\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1561671\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Forbid subqueries in the WHEN [ NOT ] MATCHED clauses of MERGE statements; commit derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13882806_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13882806_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jan\\/14 13:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-01-27T13:36:12+0000\'\u003e27\\/Jan\\/14 13:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1561671 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1561671  ] \\n\\n   DERBY-3155  : Forbid subqueries in the WHEN [ NOT ] MATCHED clauses of MERGE statements; commit derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13892302\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13892302&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13892302\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13892302_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13892302_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Feb\\/14 17:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-05T17:02:40+0000\'\u003e05\\/Feb\\/14 17:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-20-aa-reworkColumnMatching.diff. This patch substantially reworks how column references in WHEN [ NOT ] MATCHED clauses are matched to the correct values in the rows produced by the left join which drives the MERGE statement\'s execution. Tests passed cleanly for me.\u003c\\/p\u003e\\n\\n\u003cp\u003eConsider the following MERGE statement:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e    merge into t1_027 x\\n    using t2_027 y on x.a = y.c\\n    when matched and x.b &gt; 100 then update set x.b = y.d\\n    when matched and x.b &lt;= 100 then delete\\n    when not matched and y.d &gt; 3000 then insert values ( y.c, y.d );\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eAt execution time, column references in all of the following expressions must be mapped to the rows coming back from the driving left join:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e    x.b &gt; 100\\n    x.b &lt;= 100\\n    y.d &gt; 3000\\n    set x.b = y.d\\n    values ( y.c, y.d )\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eBefore this patch, that mapping was accomplished through FromTable.getMatchingColumn(). In order to smooth over differences in the column matching for SELECTs and UPDATEs, correlation names were replaced with fully qualified table names in column references. But that was crude and caused many simple use cases to fail.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe new approach is to do the following:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Before compiling the INSERT\\/UPDATE\\/DELETE actions, all of the column references in the WHEN [ NOT ] MATCHED clauses are marked with whether they come from the source or the target table.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) The columns in the SELECT list of the driving left join are similarly marked.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) At code generation time, these markers are used to match the WHEN [ NOT ] MATCHED clauses to the SELECT list.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that the new approach will handle more use cases.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e-----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ColumnReference.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNew machinery for linking ColumnReferences to the source or target table of a MERGE statement.\u003c\\/p\u003e\\n\\n\u003cp\u003e-----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromTable.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumn.java\u003c\\/p\u003e\\n\\n\u003cp\u003eSpecial processing for these linked ColumnReferences to that we don\'t blur the distinction between correlation names and fully qualified names.\u003c\\/p\u003e\\n\\n\u003cp\u003e-----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eA new test which succeeds with the new scheme but failed with the old scheme.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13892302_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13892302_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Feb\\/14 17:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-05T17:02:40+0000\'\u003e05\\/Feb\\/14 17:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-20-aa-reworkColumnMatching.diff. This patch substantially reworks how column references in WHEN [ NOT ] MATCHED clauses are matched to the correct values in the rows produced by the left join which drives the MERGE statement\'s execution. Tests passed cleanly for me. \\n\\n Consider the following MERGE statement: \\n\\n  \\n     merge into t1_027 x\\n    using t2_027 y on x.a = y.c\\n    when matched and x.b &gt; 100 then update set x.b = y.d\\n    when matched and x.b &lt;= 100 then delete\\n    when not matched and y.d &gt; 3000 then insert values ( y.c, y.d );\\n \\n  \\n\\n At execution time, column references in all of the following expressions must be mapped to the rows coming back from the driving left join: \\n\\n  \\n     x.b &gt; 100\\n    x.b &lt;= 100\\n    y.d &gt; 3000\\n    set x.b = y.d\\n    values ( y.c, y.d )\\n \\n  \\n\\n Before this patch, that mapping was accomplished through FromTable.getMatchingColumn(). In order to smooth over differences in the column matching for SELECTs and UPDATEs, correlation names were replaced with fully qualified table names in column references. But that was crude and caused many simple use cases to fail. \\n\\n The new approach is to do the following: \\n\\n 1) Before compiling the INSERT\\/UPDATE\\/DELETE actions, all of the column references in the WHEN [ NOT ] MATCHED clauses are marked with whether they come from the source or the target table. \\n\\n 2) The columns in the SELECT list of the driving left join are similarly marked. \\n\\n 3) At code generation time, these markers are used to match the WHEN [ NOT ] MATCHED clauses to the SELECT list. \\n\\n I think that the new approach will handle more use cases. \\n\\n\\n Touches the following files: \\n\\n ----------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ColumnReference.java \\n\\n New machinery for linking ColumnReferences to the source or target table of a MERGE statement. \\n\\n ----------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromTable.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumn.java \\n\\n Special processing for these linked ColumnReferences to that we don\'t blur the distinction between correlation names and fully qualified names. \\n\\n ----------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n A new test which succeeds with the new scheme but failed with the old scheme.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13892406\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13892406&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13892406\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13892406_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13892406_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Feb\\/14 18:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-05T18:44:06+0000\'\u003e05\\/Feb\\/14 18:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1564874 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1564874\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1564874\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Revamp how columns referenced by WHEN [ NOT ] MATCHED clauses are linked to the columns coming back from the driving left join of a MERGE statement; commit derby-3155-20-aa-reworkColumnMatching.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13892406_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13892406_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Feb\\/14 18:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-05T18:44:06+0000\'\u003e05\\/Feb\\/14 18:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1564874 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1564874  ] \\n\\n   DERBY-3155  : Revamp how columns referenced by WHEN [ NOT ] MATCHED clauses are linked to the columns coming back from the driving left join of a MERGE statement; commit derby-3155-20-aa-reworkColumnMatching.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13894368\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13894368&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13894368\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13894368_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13894368_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/14 10:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-07T10:09:01+0000\'\u003e07\\/Feb\\/14 10:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe handling of parameters seems to have some issues:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create table t1(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; prepare ps as \'merge into t1 using t2 on ? when not matched then insert values (1)\';\\nij&gt; execute ps;\\n0 rows inserted\\/updated\\/deleted\\nWARNING 02000: No row was found for FETCH, UPDATE or DELETE; or the result of a query is an empty table.\\nij&gt; execute ps using \'values true\';\\nIJ WARNING: Autocommit may close using result set\\nERROR 07009: No input parameters.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI\'d expect the first execution to fail because the parameter was not bound, but it succeeded. In the second execution, a parameter value was provided, but that one \u003cb\u003edid\u003c\\/b\u003e fail saying there were no parameters.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13894368_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13894368_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/14 10:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-07T10:09:01+0000\'\u003e07\\/Feb\\/14 10:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The handling of parameters seems to have some issues: \\n\\n  \\n ij&gt; create table t1(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; prepare ps as \'merge into t1 using t2 on ? when not matched then insert values (1)\';\\nij&gt; execute ps;\\n0 rows inserted\\/updated\\/deleted\\nWARNING 02000: No row was found for FETCH, UPDATE or DELETE; or the result of a query is an empty table.\\nij&gt; execute ps using \'values true\';\\nIJ WARNING: Autocommit may close using result set\\nERROR 07009: No input parameters.\\n \\n  \\n\\n I\'d expect the first execution to fail because the parameter was not bound, but it succeeded. In the second execution, a parameter value was provided, but that one  did  fail saying there were no parameters.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13894574\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13894574&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13894574\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13894574_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13894574_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/14 14:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-07T14:40:38+0000\'\u003e07\\/Feb\\/14 14:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe syntax description in the functional specification says that the source table and the target table can have a correlation name. It doesn\'t seem to allow column lists to go with the correlation names (since it says correlationName, not correlationClause). The actually implemented syntax seems to accept column lists, though, and the column names can be used in the ON clause:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create table t(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t t1(a) using t t2(b) on a=b when not matched then insert values (1);\\n0 rows inserted\\/updated\\/deleted\\nWARNING 02000: No row was found for FETCH, UPDATE or DELETE; or the result of a query is an empty table.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eHowever, the specified column name cannot be used in the mergeInsert clause:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; merge into t t1(a) using t t2(b) on a=b when not matched then insert values (b);\\nERROR 42X04: Column \'B\' is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list. If this is a CREATE or ALTER TABLE  statement then \'B\' is not a column in the target table.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eIf I read the SQL standard correctly, it doesn\'t allow a column list for the target table. It does seem to allow a column list for the source table, though.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13894574_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13894574_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/14 14:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-07T14:40:38+0000\'\u003e07\\/Feb\\/14 14:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The syntax description in the functional specification says that the source table and the target table can have a correlation name. It doesn\'t seem to allow column lists to go with the correlation names (since it says correlationName, not correlationClause). The actually implemented syntax seems to accept column lists, though, and the column names can be used in the ON clause: \\n\\n  \\n ij&gt; create table t(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; merge into t t1(a) using t t2(b) on a=b when not matched then insert values (1);\\n0 rows inserted\\/updated\\/deleted\\nWARNING 02000: No row was found for FETCH, UPDATE or DELETE; or the result of a query is an empty table.\\n \\n  \\n\\n However, the specified column name cannot be used in the mergeInsert clause: \\n\\n  \\n ij&gt; merge into t t1(a) using t t2(b) on a=b when not matched then insert values (b);\\nERROR 42X04: Column \'B\' is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list. If this is a CREATE or ALTER TABLE  statement then \'B\' is not a column in the target table.\\n \\n  \\n\\n If I read the SQL standard correctly, it doesn\'t allow a column list for the target table. It does seem to allow a column list for the source table, though.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13894610\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13894610&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13894610\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13894610_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13894610_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/14 15:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-07T15:08:32+0000\'\u003e07\\/Feb\\/14 15:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Knut Anders Hatlen - 07\\/Feb\\/14 15:24\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhoops...\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create view sr(i) as values 1;\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t(x int, y int, z int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create unique index idx on t(x, y);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; prepare ps as \'merge into t using sr on (x = ? and y = ?) when matched then update set y = ?\';\\nERROR XSAI2: The conglomerate (0) requested does not exist.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eAlso fails with constants instead of parameters:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; merge into t using sr on (x = 1 and y = 2) when matched then update set y = 3;\\nERROR XSAI2: The conglomerate (0) requested does not exist.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThis looks similar to the problem fixed by the 16-aa patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13894610_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13894610_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/14 15:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-07T15:08:32+0000\'\u003e07\\/Feb\\/14 15:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Knut Anders Hatlen - 07\\/Feb\\/14 15:24\\\"\u003eedited\u003c\\/span\u003e                   Whoops... \\n\\n  \\n ij&gt; create view sr(i) as values 1;\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t(x int, y int, z int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create unique index idx on t(x, y);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; prepare ps as \'merge into t using sr on (x = ? and y = ?) when matched then update set y = ?\';\\nERROR XSAI2: The conglomerate (0) requested does not exist.\\n \\n  \\n\\n Also fails with constants instead of parameters: \\n\\n  \\n ij&gt; merge into t using sr on (x = 1 and y = 2) when matched then update set y = 3;\\nERROR XSAI2: The conglomerate (0) requested does not exist.\\n \\n  \\n\\n This looks similar to the problem fixed by the 16-aa patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13894798\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13894798&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13894798\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13894798_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13894798_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/14 18:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-07T18:15:02+0000\'\u003e07\\/Feb\\/14 18:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-21-ac-cleanupAndForbidSynonyms.diff. This patch cleans up some compile-time processing for MERGE nodes to that it is easier to convince oneself that the binding of one action does not interfere with the binding of another action. In addition, this patch forbids the use of synonyms in MERGE statements I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eSynonyms are not a SQL Standard feature. I spent some time trying to fix some tough problem cases involving synonyms with correlation names. But I found myself going in circles. I am not able to resolve aliases on aliases. If someone wants to add synonym support to MERGE statements, they are welcome to try their hand at it.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml\u003cbr\\/\u003e\\nM       java\\/shared\\/org\\/apache\\/derby\\/shared\\/common\\/reference\\/SQLState.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNew message for forbidding synonyms in MERGE statements.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/TableName.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ColumnReference.java\u003c\\/p\u003e\\n\\n\u003cp\u003eCleanup and changes to forbid synonyms.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTest to verify that synonyms are forbidden.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13894798_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13894798_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/14 18:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-07T18:15:02+0000\'\u003e07\\/Feb\\/14 18:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-21-ac-cleanupAndForbidSynonyms.diff. This patch cleans up some compile-time processing for MERGE nodes to that it is easier to convince oneself that the binding of one action does not interfere with the binding of another action. In addition, this patch forbids the use of synonyms in MERGE statements I am running tests now. \\n\\n Synonyms are not a SQL Standard feature. I spent some time trying to fix some tough problem cases involving synonyms with correlation names. But I found myself going in circles. I am not able to resolve aliases on aliases. If someone wants to add synonym support to MERGE statements, they are welcome to try their hand at it. \\n\\n\\n Touches the following files: \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml \\nM       java\\/shared\\/org\\/apache\\/derby\\/shared\\/common\\/reference\\/SQLState.java \\n\\n New message for forbidding synonyms in MERGE statements. \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/TableName.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ColumnReference.java \\n\\n Cleanup and changes to forbid synonyms. \\n\\n --------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Test to verify that synonyms are forbidden.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13895120\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13895120&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13895120\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13895120_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13895120_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/14 22:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-07T22:12:24+0000\'\u003e07\\/Feb\\/14 22:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1565830 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1565830\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1565830\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Forbid synonyms in MERGE statement; tests passed cleanly for me on derby-3155-21-ac-cleanupAndForbidSynonyms.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13895120_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13895120_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/14 22:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-07T22:12:24+0000\'\u003e07\\/Feb\\/14 22:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1565830 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1565830  ] \\n\\n   DERBY-3155  : Forbid synonyms in MERGE statement; tests passed cleanly for me on derby-3155-21-ac-cleanupAndForbidSynonyms.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13896346\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13896346&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13896346\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13896346_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896346_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 09:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T09:25:33+0000\'\u003e10\\/Feb\\/14 09:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMaybe you could file an improvement JIRA for allowing synonyms (and possible add the issues you saw trying to implement it), so we could have that as a starting point if someone wants to do it?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13896346_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896346_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 09:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T09:25:33+0000\'\u003e10\\/Feb\\/14 09:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Maybe you could file an improvement JIRA for allowing synonyms (and possible add the issues you saw trying to implement it), so we could have that as a starting point if someone wants to do it?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13896507\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13896507&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13896507\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13896507_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896507_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 13:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T13:45:51+0000\'\u003e10\\/Feb\\/14 13:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGood idea, Dag. I\'ve logged \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-6474\\\" title=\\\"Add support for synonyms in MERGE statements\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-6474\\\"\u003eDERBY-6474\u003c\\/a\u003e in case someone wants to add support for synonyms.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13896507_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896507_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 13:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T13:45:51+0000\'\u003e10\\/Feb\\/14 13:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Good idea, Dag. I\'ve logged  DERBY-6474  in case someone wants to add support for synonyms.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13896514\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13896514&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13896514\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13896514_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896514_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 13:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T13:50:12+0000\'\u003e10\\/Feb\\/14 13:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff. This patch adds a test to track the fact that identifiers can be included or omitted on the left side of SET clauses with and without using aliases.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13896514_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896514_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 13:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T13:50:12+0000\'\u003e10\\/Feb\\/14 13:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff. This patch adds a test to track the fact that identifiers can be included or omitted on the left side of SET clauses with and without using aliases. \\n\\n\\n Touches the following file: \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13896516\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13896516&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13896516\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13896516_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896516_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 13:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T13:51:12+0000\'\u003e10\\/Feb\\/14 13:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1566625 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1566625\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1566625\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add test to verify use of identifiers on the left side of SET clauses in MERGE statements; commit derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13896516_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896516_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 13:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T13:51:12+0000\'\u003e10\\/Feb\\/14 13:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1566625 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1566625  ] \\n\\n   DERBY-3155  : Add test to verify use of identifiers on the left side of SET clauses in MERGE statements; commit derby-3155-22-ad-testIdentifiersOnLeftSideOfSetClauses.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13896647\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13896647&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13896647\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13896647_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896647_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 15:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T15:09:31+0000\'\u003e10\\/Feb\\/14 15:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-23-aa-forbidDerivedColumnLists.diff. This patch forbids the use of derived column lists in MERGE statements.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn a continuing attempt to contain the name resolution problems with MERGE statements, this patch forbids queries like the following:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003emerge into t1_036 r( x )\\nusing t2_036 on r.x = t2_036.a\\nwhen matched then delete;\\n\\nmerge into t1_036\\nusing t2_036 r( x ) on t1_036.a = r.x\\nwhen matched then delete;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eKnut identified some issues with derived column lists in a 2014-02-07 comment. I will log an issue for allowing derived column lists in MERGE statements later on.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml\u003cbr\\/\u003e\\nM       java\\/shared\\/org\\/apache\\/derby\\/shared\\/common\\/reference\\/SQLState.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13896647_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896647_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 15:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T15:09:31+0000\'\u003e10\\/Feb\\/14 15:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-23-aa-forbidDerivedColumnLists.diff. This patch forbids the use of derived column lists in MERGE statements. \\n\\n In a continuing attempt to contain the name resolution problems with MERGE statements, this patch forbids queries like the following: \\n\\n  \\n merge into t1_036 r( x )\\nusing t2_036 on r.x = t2_036.a\\nwhen matched then delete;\\n\\nmerge into t1_036\\nusing t2_036 r( x ) on t1_036.a = r.x\\nwhen matched then delete;\\n \\n  \\n\\n Knut identified some issues with derived column lists in a 2014-02-07 comment. I will log an issue for allowing derived column lists in MERGE statements later on. \\n\\n Touches the following files: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml \\nM       java\\/shared\\/org\\/apache\\/derby\\/shared\\/common\\/reference\\/SQLState.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13896649\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13896649&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13896649\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13896649_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896649_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 15:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T15:10:32+0000\'\u003e10\\/Feb\\/14 15:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1566649 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1566649\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1566649\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Forbid derived column lists in MERGE statements; commit derby-3155-23-aa-forbidDerivedColumnLists.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13896649_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896649_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 15:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T15:10:32+0000\'\u003e10\\/Feb\\/14 15:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1566649 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1566649  ] \\n\\n   DERBY-3155  : Forbid derived column lists in MERGE statements; commit derby-3155-23-aa-forbidDerivedColumnLists.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13896727\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13896727&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13896727\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13896727_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896727_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 16:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T16:19:03+0000\'\u003e10\\/Feb\\/14 16:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-24-aa-supportParameters.diff. This patch adds support for ? parameters in MERGE statements.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch fixes a problem Knut found on 2014-02-07: The state of ? parameters was not being checked at runtime. The problem was that every statement which supports ? parameters needs its own call to setUpAndLinkParameters() in its grammar production. I don\'t know why that call isn\'t factored higher in the grammar. I added a call to setUpAndLinkParameters() to the MERGE statement\'s grammar production.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/sqlgrammar.jj\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13896727_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896727_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 16:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T16:19:03+0000\'\u003e10\\/Feb\\/14 16:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-24-aa-supportParameters.diff. This patch adds support for ? parameters in MERGE statements. \\n\\n This patch fixes a problem Knut found on 2014-02-07: The state of ? parameters was not being checked at runtime. The problem was that every statement which supports ? parameters needs its own call to setUpAndLinkParameters() in its grammar production. I don\'t know why that call isn\'t factored higher in the grammar. I added a call to setUpAndLinkParameters() to the MERGE statement\'s grammar production. \\n\\n Touches the following files: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/sqlgrammar.jj \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13896729\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13896729&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13896729\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13896729_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896729_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 16:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T16:20:11+0000\'\u003e10\\/Feb\\/14 16:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1566673 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1566673\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1566673\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add support for ? parameters to MERGE statements; commit derby-3155-24-aa-supportParameters.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13896729_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13896729_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Feb\\/14 16:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-10T16:20:11+0000\'\u003e10\\/Feb\\/14 16:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1566673 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1566673  ] \\n\\n   DERBY-3155  : Add support for ? parameters to MERGE statements; commit derby-3155-24-aa-supportParameters.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13897816\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13897816&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13897816\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13897816_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13897816_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/14 12:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-11T12:48:01+0000\'\u003e11\\/Feb\\/14 12:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for adding support for ? parameters, Rick. It doesn\'t look like the parameter values are always seen by the MERGE statement, though:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eij&gt; create table t1(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; insert into t2 values 1;\\n1 row inserted\\/updated\\/deleted\\nij&gt; execute \'merge into t1 using t2 on t1.x=t2.x when not matched then insert values (?)\' using \'values 1\';\\nIJ WARNING: Autocommit may close using result set\\n1 row inserted\\/updated\\/deleted\\nij&gt; select * from t1;\\nX          \\n-----------\\nNULL       \\n\\n1 row selected\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI had expected the value 1 rather than NULL to be inserted into T1 here.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13897816_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13897816_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/14 12:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-11T12:48:01+0000\'\u003e11\\/Feb\\/14 12:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for adding support for ? parameters, Rick. It doesn\'t look like the parameter values are always seen by the MERGE statement, though: \\n\\n  \\n ij&gt; create table t1(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; create table t2(x int);\\n0 rows inserted\\/updated\\/deleted\\nij&gt; insert into t2 values 1;\\n1 row inserted\\/updated\\/deleted\\nij&gt; execute \'merge into t1 using t2 on t1.x=t2.x when not matched then insert values (?)\' using \'values 1\';\\nIJ WARNING: Autocommit may close using result set\\n1 row inserted\\/updated\\/deleted\\nij&gt; select * from t1;\\nX          \\n-----------\\nNULL       \\n\\n1 row selected\\n \\n  \\n\\n I had expected the value 1 rather than NULL to be inserted into T1 here.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13898275\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13898275&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13898275\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13898275_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13898275_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/14 20:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-11T20:38:58+0000\'\u003e11\\/Feb\\/14 20:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-25-aa-parametersAsInsertValues.diff. This patch fixes a bug discovered by Knut: ? parameters were not being substituted when used as values in INSERT lists.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe problem was that the INSERT values were being transmogrified when we compiled the dummy SELECT which drives the INSERT action. The fix was to clone the INSERT values so that the SELECT has its own copy.\u003c\\/p\u003e\\n\\n\u003cp\u003eI added a simple test showing correct use of ? values in all search conditions, as INSERT values, and as UPDATE values. The following statement runs correctly in the test case:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e  merge into t1_038\\n  using t2_038 on t2_038.x = t1_038.x * ?\\n  when not matched and t2_038.y = ? then insert values (  t2_038.x, t2_038.y, t2_038.z * ? )\\n  when matched and t2_038.y = ? then delete\\n  when matched and t2_038.y = ? then update set z = t2_038.z * ?\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13898275_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13898275_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/14 20:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-11T20:38:58+0000\'\u003e11\\/Feb\\/14 20:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-25-aa-parametersAsInsertValues.diff. This patch fixes a bug discovered by Knut: ? parameters were not being substituted when used as values in INSERT lists. \\n\\n The problem was that the INSERT values were being transmogrified when we compiled the dummy SELECT which drives the INSERT action. The fix was to clone the INSERT values so that the SELECT has its own copy. \\n\\n I added a simple test showing correct use of ? values in all search conditions, as INSERT values, and as UPDATE values. The following statement runs correctly in the test case: \\n\\n  \\n   merge into t1_038\\n  using t2_038 on t2_038.x = t1_038.x * ?\\n  when not matched and t2_038.y = ? then insert values (  t2_038.x, t2_038.y, t2_038.z * ? )\\n  when matched and t2_038.y = ? then delete\\n  when matched and t2_038.y = ? then update set z = t2_038.z * ?\\n \\n  \\n\\n\\n Touches the following files: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13898276\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13898276&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13898276\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13898276_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13898276_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/14 20:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-11T20:41:09+0000\'\u003e11\\/Feb\\/14 20:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1567368 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1567368\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1567368\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add support for ? parameters as INSERT values in MERGE statements; commit derby-3155-25-aa-parametersAsInsertValues.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13898276_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13898276_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/14 20:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-11T20:41:09+0000\'\u003e11\\/Feb\\/14 20:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1567368 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1567368  ] \\n\\n   DERBY-3155  : Add support for ? parameters as INSERT values in MERGE statements; commit derby-3155-25-aa-parametersAsInsertValues.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13904165\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13904165&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13904165\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13904165_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13904165_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/14 15:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-18T15:45:28+0000\'\u003e18\\/Feb\\/14 15:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-26-aa-copyRowLocationForIndexScans.diff. This patch fixes a compilation problem with a MERGE statement involving a view. Regression tests ran cleanly for me on this patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe problem query, found by Knut, was this:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003ecreate view sr_039( i ) as values 1;\\ncreate table t1_039( x int, y int, z int );\\ncreate unique index idx on t1_039( x, y );\\ninsert into t1_039 values ( 1, 100, 1000 ), ( 2, 200, 2000 );\\n\\nmerge into t1_039\\nusing sr_039 on ( x = 1 )\\nwhen matched then delete;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThe fix involves two changes:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) There was a place in FromBaseTable where a ResultColumnList was being cloned but conglomerate information wasn\'t being propagated from the original list. That just looks like an existing bug to me. However, I don\'t now why we haven\'t tripped over it before.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Once I cleaned that up, I stumbled on another bug: Index probes into base tables weren\'t equipped to hand back the RowLocations needed by the MERGE statement\'s driving left join.\u003c\\/p\u003e\\n\\n\u003cp\u003eAfter fixing these bugs, Knut\'s original test case works. But I\'m not declaring victory yet. I have tried a variation on that original test case and tripped across yet another bug. I think that the fix for that bug deserves its own patch so that we can clearly reconstruct which changes correspond to which problems.\u003c\\/p\u003e\\n\\n\u003cp\u003eHere is the new test case which I\'m going to tackle next. It fails during compilation because a result set number hasn\'t been assigned to the column reference in the matching refinement of the WHEN NOT MATCHED clause:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003ecreate view sr_040( i ) as values 1;\\ncreate table t1_040( x int, y int, z int );\\ncreate unique index idx on t1_040( x, y );\\n\\ninsert into t1_040 values\\n( 1, 100, 1000 ), ( 1, 101, 1000 ), ( 1, 102, 1000 ), ( 1, 103, 1000 ), ( 2, 200, 2000 );\\n\\nmerge into t1_040\\nusing sr_040 on ( x = 1 )\\nwhen matched and y = 101 then delete\\nwhen matched and y = 102 then update set z = -1000\\nwhen not matched and i = 1 then insert values ( -1, 0, 0 );\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe fix for 1).\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/execute\\/ResultSetFactory.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/IndexToBaseRowNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/GenericResultSetFactory.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/IndexRowToBaseRowResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe fix for 2).\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eA new test case to track this improvement.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13904165_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13904165_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/14 15:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-18T15:45:28+0000\'\u003e18\\/Feb\\/14 15:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-26-aa-copyRowLocationForIndexScans.diff. This patch fixes a compilation problem with a MERGE statement involving a view. Regression tests ran cleanly for me on this patch. \\n\\n The problem query, found by Knut, was this: \\n\\n  \\n create view sr_039( i ) as values 1;\\ncreate table t1_039( x int, y int, z int );\\ncreate unique index idx on t1_039( x, y );\\ninsert into t1_039 values ( 1, 100, 1000 ), ( 2, 200, 2000 );\\n\\nmerge into t1_039\\nusing sr_039 on ( x = 1 )\\nwhen matched then delete;\\n \\n  \\n\\n The fix involves two changes: \\n\\n 1) There was a place in FromBaseTable where a ResultColumnList was being cloned but conglomerate information wasn\'t being propagated from the original list. That just looks like an existing bug to me. However, I don\'t now why we haven\'t tripped over it before. \\n\\n 2) Once I cleaned that up, I stumbled on another bug: Index probes into base tables weren\'t equipped to hand back the RowLocations needed by the MERGE statement\'s driving left join. \\n\\n After fixing these bugs, Knut\'s original test case works. But I\'m not declaring victory yet. I have tried a variation on that original test case and tripped across yet another bug. I think that the fix for that bug deserves its own patch so that we can clearly reconstruct which changes correspond to which problems. \\n\\n Here is the new test case which I\'m going to tackle next. It fails during compilation because a result set number hasn\'t been assigned to the column reference in the matching refinement of the WHEN NOT MATCHED clause: \\n\\n  \\n create view sr_040( i ) as values 1;\\ncreate table t1_040( x int, y int, z int );\\ncreate unique index idx on t1_040( x, y );\\n\\ninsert into t1_040 values\\n( 1, 100, 1000 ), ( 1, 101, 1000 ), ( 1, 102, 1000 ), ( 1, 103, 1000 ), ( 2, 200, 2000 );\\n\\nmerge into t1_040\\nusing sr_040 on ( x = 1 )\\nwhen matched and y = 101 then delete\\nwhen matched and y = 102 then update set z = -1000\\nwhen not matched and i = 1 then insert values ( -1, 0, 0 );\\n \\n  \\n\\n Touches the following files: \\n\\n -------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java \\n\\n The fix for 1). \\n\\n -------------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/execute\\/ResultSetFactory.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/IndexToBaseRowNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/GenericResultSetFactory.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/IndexRowToBaseRowResultSet.java \\n\\n The fix for 2). \\n\\n -------------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n A new test case to track this improvement.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13904169\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13904169&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13904169\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13904169_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13904169_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/14 15:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-18T15:47:37+0000\'\u003e18\\/Feb\\/14 15:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1569396 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1569396\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1569396\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Propagate RowLocations out of index probes as necessary for the driving left join of a MERGE statement; commits derby-3155-26-aa-copyRowLocationForIndexScans.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13904169_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13904169_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/14 15:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-18T15:47:37+0000\'\u003e18\\/Feb\\/14 15:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1569396 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1569396  ] \\n\\n   DERBY-3155  : Propagate RowLocations out of index probes as necessary for the driving left join of a MERGE statement; commits derby-3155-26-aa-copyRowLocationForIndexScans.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13904548\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13904548&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13904548\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13904548_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13904548_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/14 20:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-18T20:31:43+0000\'\u003e18\\/Feb\\/14 20:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-27-aa-adjustMatchingRefinements.diff. This patch fixes the compilation problem with a matching refinement clause that referenced a column in a source table which was a view wrapping a values clause.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that the view was flattened but this information was not communicated to the matching refinement clause. The solution was to point the column references in the matching refinement clauses at the row coming out of the driving left join.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis fixes the following problem case:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003ecreate view sr_040( i ) as values ( 1 );\\ncreate table t1_040( x int, y int, z int );\\ncreate unique index idx on t1_040( x, y );\\n\\ninsert into t1_040 values\\n( 1, 100, 1000 ), ( 1, 101, 1000 ), ( 1, 102, 1000 ), ( 1, 103, 1000 ), ( 2, 200, 2000 );\\n\\nmerge into t1_040\\nusing sr_040 on ( x = 1 )\\nwhen matched and y = 101 then delete\\nwhen matched and y = 102 then update set z = -1000\\nwhen not matched and i &gt; 1 then insert values ( -1, i, 0 );\\n\\nselect * from t1_040 order by x, y, z;\\n\\nmerge into t1_040\\nusing sr_040 on ( x = 3 )\\nwhen matched and y = 103 then delete\\nwhen matched and y = 102 then update set z = -10000\\nwhen not matched and i = 1 then insert values ( -1, i, 0 );\\n\\nselect * from t1_040 order by x, y, z;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eBut we\'re still not out of the woods with the original problem case which Knut found. Adding another row to the values view causes us to fail on a missing row:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003ecreate view sr_040( i ) as values ( 1 ), ( 3 );\\ncreate table t1_040( x int, y int, z int );\\ncreate unique index idx on t1_040( x, y );\\n\\ninsert into t1_040 values\\n( 1, 100, 1000 ), ( 1, 101, 1000 ), ( 1, 102, 1000 ), ( 1, 103, 1000 ), ( 2, 200, 2000 );\\n\\nmerge into t1_040\\nusing sr_040 on ( x = 1 )\\nwhen matched and y = 101 then delete\\nwhen matched and y = 102 then update set z = -1000\\nwhen not matched and i &gt; 1 then insert values ( -1, i, 0 );\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThat, again, looks like a different bug which deserves its own separate patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe fix.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe test case.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13904548_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13904548_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/14 20:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-18T20:31:43+0000\'\u003e18\\/Feb\\/14 20:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-27-aa-adjustMatchingRefinements.diff. This patch fixes the compilation problem with a matching refinement clause that referenced a column in a source table which was a view wrapping a values clause. \\n\\n I think that the view was flattened but this information was not communicated to the matching refinement clause. The solution was to point the column references in the matching refinement clauses at the row coming out of the driving left join. \\n\\n This fixes the following problem case: \\n\\n  \\n create view sr_040( i ) as values ( 1 );\\ncreate table t1_040( x int, y int, z int );\\ncreate unique index idx on t1_040( x, y );\\n\\ninsert into t1_040 values\\n( 1, 100, 1000 ), ( 1, 101, 1000 ), ( 1, 102, 1000 ), ( 1, 103, 1000 ), ( 2, 200, 2000 );\\n\\nmerge into t1_040\\nusing sr_040 on ( x = 1 )\\nwhen matched and y = 101 then delete\\nwhen matched and y = 102 then update set z = -1000\\nwhen not matched and i &gt; 1 then insert values ( -1, i, 0 );\\n\\nselect * from t1_040 order by x, y, z;\\n\\nmerge into t1_040\\nusing sr_040 on ( x = 3 )\\nwhen matched and y = 103 then delete\\nwhen matched and y = 102 then update set z = -10000\\nwhen not matched and i = 1 then insert values ( -1, i, 0 );\\n\\nselect * from t1_040 order by x, y, z;\\n \\n  \\n\\n But we\'re still not out of the woods with the original problem case which Knut found. Adding another row to the values view causes us to fail on a missing row: \\n\\n  \\n create view sr_040( i ) as values ( 1 ), ( 3 );\\ncreate table t1_040( x int, y int, z int );\\ncreate unique index idx on t1_040( x, y );\\n\\ninsert into t1_040 values\\n( 1, 100, 1000 ), ( 1, 101, 1000 ), ( 1, 102, 1000 ), ( 1, 103, 1000 ), ( 2, 200, 2000 );\\n\\nmerge into t1_040\\nusing sr_040 on ( x = 1 )\\nwhen matched and y = 101 then delete\\nwhen matched and y = 102 then update set z = -1000\\nwhen not matched and i &gt; 1 then insert values ( -1, i, 0 );\\n \\n  \\n\\n That, again, looks like a different bug which deserves its own separate patch. \\n\\n Touches the following files: \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\n\\n The fix. \\n\\n --------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n The test case.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13904550\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13904550&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13904550\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13904550_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13904550_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/14 20:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-18T20:33:21+0000\'\u003e18\\/Feb\\/14 20:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1569521 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1569521\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1569521\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Point matching refinement clauses into the row returned by the driving left join of the MERGE statement; commit derby-3155-27-aa-adjustMatchingRefinements.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13904550_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13904550_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/14 20:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-18T20:33:21+0000\'\u003e18\\/Feb\\/14 20:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1569521 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1569521  ] \\n\\n   DERBY-3155  : Point matching refinement clauses into the row returned by the driving left join of the MERGE statement; commit derby-3155-27-aa-adjustMatchingRefinements.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13907068\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13907068&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13907068\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13907068_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13907068_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/14 15:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-20T15:36:18+0000\'\u003e20\\/Feb\\/14 15:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-28-aa-cardinalityViolations.diff. This patch addresses the last issue I discussed above: an attempt to delete the same row twice. Tests ran cleanly against this patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe bug arises because I had not implemented the following required behavior of the MERGE statement: The database should raise a cardinality exception if an attempt is made to delete\\/update a target row more than once. See the 2011 SQL Standard, part 2, section 14.12 (merge statement), general rule 6.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe fix is to maintain a BackingStoreHashtable of row locations from touched target rows and to raise an error if a row is touched twice.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will also note this behavior in the functional spec.\u003c\\/p\u003e\\n\\n\u003cp\u003eAffects the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/SQLRef.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThis class needed to override hashCode() so that SQLRefs could be used as hash keys.\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eMaintain a BackingStoreHashtable of row locations of subject rows and raise a cardinality exception if the same row qualifies twice.\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml\u003cbr\\/\u003e\\nM       java\\/shared\\/org\\/apache\\/derby\\/shared\\/common\\/reference\\/SQLState.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNew cardinality violation message.\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTest cases.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13907068_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13907068_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/14 15:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-20T15:36:18+0000\'\u003e20\\/Feb\\/14 15:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-28-aa-cardinalityViolations.diff. This patch addresses the last issue I discussed above: an attempt to delete the same row twice. Tests ran cleanly against this patch. \\n\\n The bug arises because I had not implemented the following required behavior of the MERGE statement: The database should raise a cardinality exception if an attempt is made to delete\\/update a target row more than once. See the 2011 SQL Standard, part 2, section 14.12 (merge statement), general rule 6. \\n\\n The fix is to maintain a BackingStoreHashtable of row locations from touched target rows and to raise an error if a row is touched twice. \\n\\n I will also note this behavior in the functional spec. \\n\\n Affects the following files: \\n\\n -------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/types\\/SQLRef.java \\n\\n This class needed to override hashCode() so that SQLRefs could be used as hash keys. \\n\\n -------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java \\n\\n Maintain a BackingStoreHashtable of row locations of subject rows and raise a cardinality exception if the same row qualifies twice. \\n\\n -------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/loc\\/messages.xml \\nM       java\\/shared\\/org\\/apache\\/derby\\/shared\\/common\\/reference\\/SQLState.java \\n\\n New cardinality violation message. \\n\\n -------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Test cases.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13907071\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13907071&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13907071\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13907071_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13907071_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/14 15:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-20T15:37:52+0000\'\u003e20\\/Feb\\/14 15:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1570230 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1570230\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1570230\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Prevent a MERGE statement from altering the same target row twice; commit derby-3155-28-aa-cardinalityViolations.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13907071_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13907071_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/14 15:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-20T15:37:52+0000\'\u003e20\\/Feb\\/14 15:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1570230 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1570230  ] \\n\\n   DERBY-3155  : Prevent a MERGE statement from altering the same target row twice; commit derby-3155-28-aa-cardinalityViolations.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13907097\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13907097&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13907097\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13907097_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13907097_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/14 15:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-20T15:52:03+0000\'\u003e20\\/Feb\\/14 15:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a fourth rev of the functional spec. This incorporates several changes which have accumulated since August.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13907097_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13907097_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/14 15:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-20T15:52:03+0000\'\u003e20\\/Feb\\/14 15:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a fourth rev of the functional spec. This incorporates several changes which have accumulated since August.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13907483\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13907483&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13907483\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13907483_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13907483_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/14 20:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-20T20:55:16+0000\'\u003e20\\/Feb\\/14 20:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-29-aa-missingSchema.diff. This patch removes some obsolete code which was causing us to see a missing schema error for the following case:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003econnect \'jdbc:derby:memory:db;user=test_dbo;create=true\';\\n\\ncall syscs_util.syscs_create_user( \'TEST_DBO\', \'test_dbopassword\' );\\ncall syscs_util.syscs_create_user( \'RUTH\', \'ruthpassword\' );\\n\\nconnect \'jdbc:derby:memory:db;shutdown=true\';\\n\\nconnect \'jdbc:derby:memory:db;user=test_dbo;password=test_dbopassword\' as dbo;\\n\\ncreate table deleteTable_042\\n(\\n    publicSelectColumn int\\n);\\n\\ncreate table selectTable_042\\n(\\n    selectColumn int\\n);\\n\\ngrant select on  selectTable_042 to public;\\ngrant select on  deleteTable_042 to public;\\ngrant delete on deleteTable_042 to ruth;\\n\\nconnect \'jdbc:derby:memory:db;user=ruth;password=ruthpassword\' as ruth;\\n\\nmerge into test_dbo.deleteTable_042\\nusing test_dbo.selectTable_042\\non publicSelectColumn = selectColumn\\nwhen matched then delete;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13907483_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13907483_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/14 20:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-20T20:55:16+0000\'\u003e20\\/Feb\\/14 20:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-29-aa-missingSchema.diff. This patch removes some obsolete code which was causing us to see a missing schema error for the following case: \\n\\n  \\n connect \'jdbc:derby:memory:db;user=test_dbo;create=true\';\\n\\ncall syscs_util.syscs_create_user( \'TEST_DBO\', \'test_dbopassword\' );\\ncall syscs_util.syscs_create_user( \'RUTH\', \'ruthpassword\' );\\n\\nconnect \'jdbc:derby:memory:db;shutdown=true\';\\n\\nconnect \'jdbc:derby:memory:db;user=test_dbo;password=test_dbopassword\' as dbo;\\n\\ncreate table deleteTable_042\\n(\\n    publicSelectColumn int\\n);\\n\\ncreate table selectTable_042\\n(\\n    selectColumn int\\n);\\n\\ngrant select on  selectTable_042 to public;\\ngrant select on  deleteTable_042 to public;\\ngrant delete on deleteTable_042 to ruth;\\n\\nconnect \'jdbc:derby:memory:db;user=ruth;password=ruthpassword\' as ruth;\\n\\nmerge into test_dbo.deleteTable_042\\nusing test_dbo.selectTable_042\\non publicSelectColumn = selectColumn\\nwhen matched then delete;\\n \\n  \\n\\n\\n Touches the following files: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13907486\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13907486&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13907486\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13907486_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13907486_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/14 20:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-20T20:57:09+0000\'\u003e20\\/Feb\\/14 20:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1570352 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1570352\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1570352\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Remove some obsolete code which was causing a cross-schema MERGE statement to raise a missing schema error: commit derby-3155-29-aa-missingSchema.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13907486_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13907486_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/14 20:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-20T20:57:09+0000\'\u003e20\\/Feb\\/14 20:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1570352 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1570352  ] \\n\\n   DERBY-3155  : Remove some obsolete code which was causing a cross-schema MERGE statement to raise a missing schema error: commit derby-3155-29-aa-missingSchema.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13911883\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13911883&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13911883\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13911883_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13911883_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Feb\\/14 18:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-25T18:52:25+0000\'\u003e25\\/Feb\\/14 18:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-30-ab-moreCorrelationNames.diff. This patch fixes more column resolution problems. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eWorking on this patch has helped me understand a defect (or at least a brittleness) in my approach to implementing the UPDATE action of the MERGE statement. The dummy UPDATE statement I create is one which can not arise via the supported Derby grammar. That is because this UPDATE statement is driven by a SELECT having more than one table. An ordinary Derby UPDATE can be driven by a multi-table SELECT but only if the SELECT is hidden behind a WHERE CURRENT OF clause.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe existing logic takes advantage of an assumption that the driving SELECT only has columns from the table being UPDATEd. In particular, there is some UpdateNode logic (around line 1530) which clears out table identifiers from the UPDATE statement\'s column list. It appears that that logic was added as part of the work on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1043\\\" title=\\\"Invalid column references are not caught in a trigger action statement when the referencing table of the column is the triggered table\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1043\\\"\u003e\u003cdel\u003eDERBY-1043\u003c\\/del\u003e\u003c\\/a\u003e. But without those table identifiers, I can\'t distinguish between columns coming from the source vs. the target table of a MERGE statement.\u003c\\/p\u003e\\n\\n\u003cp\u003eMy original solution to this problem was to skip the logic which clears out table identifiers when I am binding a MERGE statement. That worked for a long time until I started trying to compile UPDATE actions which supplement their column lists with extra columns needed to evaluate constraints, triggers, and generation expressions. I re-instated id-clearing logic in order to make those statements compile.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis revived the ambiguity when the source and target tables had columns with the same name. My solution is to double-down on associating all columns with the source vs. target tables before binding the INSERT\\/UPDATE\\/DELETE actions.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s possible that I will continue to be buried under a pile of column resolution problems. I may need to fall back and re-implement the UPDATE action so that it uses some dummy column list which could be concocted via SQL and then add some substitution logic to map between the dummy column list and the expressions in the SET clauses.\u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, for the moment I\'m doubling down on the current implementation.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/compile\\/TagFilter.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eColumns added to satisfy constraints, triggers, and generation clauses are assocated with the TARGET table. The table-id-clearing logic is re-instated.\u003c\\/p\u003e\\n\\n\u003cp\u003e----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DMLModStatementNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromTable.java\u003c\\/p\u003e\\n\\n\u003cp\u003eMore logic to associate columns with the source or target table.\u003c\\/p\u003e\\n\\n\u003cp\u003e----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromList.java\u003c\\/p\u003e\\n\\n\u003cp\u003eUse the pre-computed association of columns with source\\/target tables to resolve column references.\u003c\\/p\u003e\\n\\n\u003cp\u003e----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ColumnReference.java\u003c\\/p\u003e\\n\\n\u003cp\u003eMinor tweak to improve encapsulation and tracing of this class.\u003c\\/p\u003e\\n\\n\u003cp\u003e----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdditional tests.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13911883_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13911883_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Feb\\/14 18:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-25T18:52:25+0000\'\u003e25\\/Feb\\/14 18:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-30-ab-moreCorrelationNames.diff. This patch fixes more column resolution problems. I am running tests now. \\n\\n Working on this patch has helped me understand a defect (or at least a brittleness) in my approach to implementing the UPDATE action of the MERGE statement. The dummy UPDATE statement I create is one which can not arise via the supported Derby grammar. That is because this UPDATE statement is driven by a SELECT having more than one table. An ordinary Derby UPDATE can be driven by a multi-table SELECT but only if the SELECT is hidden behind a WHERE CURRENT OF clause. \\n\\n The existing logic takes advantage of an assumption that the driving SELECT only has columns from the table being UPDATEd. In particular, there is some UpdateNode logic (around line 1530) which clears out table identifiers from the UPDATE statement\'s column list. It appears that that logic was added as part of the work on   DERBY-1043  . But without those table identifiers, I can\'t distinguish between columns coming from the source vs. the target table of a MERGE statement. \\n\\n My original solution to this problem was to skip the logic which clears out table identifiers when I am binding a MERGE statement. That worked for a long time until I started trying to compile UPDATE actions which supplement their column lists with extra columns needed to evaluate constraints, triggers, and generation expressions. I re-instated id-clearing logic in order to make those statements compile. \\n\\n This revived the ambiguity when the source and target tables had columns with the same name. My solution is to double-down on associating all columns with the source vs. target tables before binding the INSERT\\/UPDATE\\/DELETE actions. \\n\\n It\'s possible that I will continue to be buried under a pile of column resolution problems. I may need to fall back and re-implement the UPDATE action so that it uses some dummy column list which could be concocted via SQL and then add some substitution logic to map between the dummy column list and the expressions in the SET clauses. \\n\\n However, for the moment I\'m doubling down on the current implementation. \\n\\n\\n Touches the following files: \\n\\n ---------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/compile\\/TagFilter.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java \\n\\n Columns added to satisfy constraints, triggers, and generation clauses are assocated with the TARGET table. The table-id-clearing logic is re-instated. \\n\\n ---------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DMLModStatementNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromTable.java \\n\\n More logic to associate columns with the source or target table. \\n\\n ---------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromList.java \\n\\n Use the pre-computed association of columns with source\\/target tables to resolve column references. \\n\\n ---------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ColumnReference.java \\n\\n Minor tweak to improve encapsulation and tracing of this class. \\n\\n ---------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Additional tests.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13911995\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13911995&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13911995\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13911995_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13911995_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Feb\\/14 20:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-25T20:13:01+0000\'\u003e25\\/Feb\\/14 20:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1571808 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1571808\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1571808\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: More improvements to column resolution in MERGE statements; tests passed cleanly for me on derby-3155-30-ab-moreCorrelationNames.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13911995_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13911995_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Feb\\/14 20:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-25T20:13:01+0000\'\u003e25\\/Feb\\/14 20:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1571808 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1571808  ] \\n\\n   DERBY-3155  : More improvements to column resolution in MERGE statements; tests passed cleanly for me on derby-3155-30-ab-moreCorrelationNames.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13914670\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13914670&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13914670\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13914670_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13914670_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Feb\\/14 15:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-27T15:48:46+0000\'\u003e27\\/Feb\\/14 15:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-31-aa-deletePrivs.diff. This patch corrects privilege management for the DELETE actions of MERGE statements. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s my understanding that the user needs the following permissions in order to run a MERGE statement with a DELETE action. This is what the patch attempts to implement and test:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) DELETE permission on the target table.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) For the ON clause and the search condition in the WHEN MATCHED clause\u003c\\/p\u003e\\n\\n\u003cp\u003ea) SELECT permission on all referenced columns\u003cbr\\/\u003e\\nb) EXECUTE permission on all referenced routines\u003cbr\\/\u003e\\nc) USAGE privilege on all referenced types\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/QueryTreeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eMove some privilege setting (for UDTs) from UpdateNode up to QueryTreeNode for use by all nodes.\u003c\\/p\u003e\\n\\n\u003cp\u003e----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java\u003c\\/p\u003e\\n\\n\u003cp\u003eGood code hygiene. Added some braces for a dangling consequence of an if statement.\u003c\\/p\u003e\\n\\n\u003cp\u003e----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DeleteNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTurn off privilege checking at inappropriate moments.\u003c\\/p\u003e\\n\\n\u003cp\u003e----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eA       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/Permission.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/GeneratedColumnsHelper.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/GrantRevokeDDLTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTests.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13914670_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13914670_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Feb\\/14 15:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-27T15:48:46+0000\'\u003e27\\/Feb\\/14 15:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-31-aa-deletePrivs.diff. This patch corrects privilege management for the DELETE actions of MERGE statements. I am running tests now. \\n\\n It\'s my understanding that the user needs the following permissions in order to run a MERGE statement with a DELETE action. This is what the patch attempts to implement and test: \\n\\n 1) DELETE permission on the target table. \\n\\n 2) For the ON clause and the search condition in the WHEN MATCHED clause \\n\\n a) SELECT permission on all referenced columns \\nb) EXECUTE permission on all referenced routines \\nc) USAGE privilege on all referenced types \\n\\n\\n Touches the following files: \\n\\n ---------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/QueryTreeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java \\n\\n Move some privilege setting (for UDTs) from UpdateNode up to QueryTreeNode for use by all nodes. \\n\\n ---------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/FromBaseTable.java \\n\\n Good code hygiene. Added some braces for a dangling consequence of an if statement. \\n\\n ---------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DeleteNode.java \\n\\n Turn off privilege checking at inappropriate moments. \\n\\n ---------------- \\n\\n A       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/Permission.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/GeneratedColumnsHelper.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/GrantRevokeDDLTest.java \\n\\n Tests.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13914792\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13914792&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13914792\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13914792_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13914792_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Feb\\/14 17:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-27T17:50:26+0000\'\u003e27\\/Feb\\/14 17:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1572665 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1572665\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1572665\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Enforce correct privileges for DELETE actions of MERGE statements; tests passed cleanly on derby-3155-31-aa-deletePrivs.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13914792_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13914792_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Feb\\/14 17:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-27T17:50:26+0000\'\u003e27\\/Feb\\/14 17:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1572665 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1572665  ] \\n\\n   DERBY-3155  : Enforce correct privileges for DELETE actions of MERGE statements; tests passed cleanly on derby-3155-31-aa-deletePrivs.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13915803\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13915803&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13915803\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13915803_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13915803_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Feb\\/14 14:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-28T14:02:09+0000\'\u003e28\\/Feb\\/14 14:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-32-aa-newTestFunction.diff. This patch adds another test function for use in testing privileges on user-defined types.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/UDTTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13915803_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13915803_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Feb\\/14 14:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-28T14:02:09+0000\'\u003e28\\/Feb\\/14 14:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-32-aa-newTestFunction.diff. This patch adds another test function for use in testing privileges on user-defined types. \\n\\n Touches the following file: \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/UDTTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13915805\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13915805&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13915805\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13915805_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13915805_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Feb\\/14 14:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-28T14:03:02+0000\'\u003e28\\/Feb\\/14 14:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1572949 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1572949\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1572949\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add a test function to help in testing of udt privileges; commit derby-3155-32-aa-newTestFunction.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13915805_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13915805_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Feb\\/14 14:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-28T14:03:02+0000\'\u003e28\\/Feb\\/14 14:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1572949 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1572949  ] \\n\\n   DERBY-3155  : Add a test function to help in testing of udt privileges; commit derby-3155-32-aa-newTestFunction.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13919485\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13919485&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13919485\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13919485_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13919485_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Mar\\/14 14:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-04T14:57:18+0000\'\u003e04\\/Mar\\/14 14:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-33-ab-insertPrivs.diff. This patch adds privilege checks for the INSERT actions of MERGE statements. I am running tests now.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/CompilerContextImpl.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdds braces around a dangling consequence.\u003c\\/p\u003e\\n\\n\u003cp\u003e------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/InsertNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eChanges to support privilege checks for the INSERT actions of MERGE statements.\u003c\\/p\u003e\\n\\n\u003cp\u003e------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTests.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13919485_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13919485_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Mar\\/14 14:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-04T14:57:18+0000\'\u003e04\\/Mar\\/14 14:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-33-ab-insertPrivs.diff. This patch adds privilege checks for the INSERT actions of MERGE statements. I am running tests now. \\n\\n\\n Touches the following files: \\n\\n ------------ \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/CompilerContextImpl.java \\n\\n Adds braces around a dangling consequence. \\n\\n ------------ \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/InsertNode.java \\n\\n Changes to support privilege checks for the INSERT actions of MERGE statements. \\n\\n ------------ \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Tests.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13919597\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13919597&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13919597\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13919597_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13919597_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Mar\\/14 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-04T16:46:22+0000\'\u003e04\\/Mar\\/14 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1574131 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1574131\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1574131\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add privilege checks for the INSERT actions of MERGE statements; tests passed cleanly on derby-3155-33-ab-insertPrivs.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13919597_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13919597_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Mar\\/14 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-04T16:46:22+0000\'\u003e04\\/Mar\\/14 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1574131 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1574131  ] \\n\\n   DERBY-3155  : Add privilege checks for the INSERT actions of MERGE statements; tests passed cleanly on derby-3155-33-ab-insertPrivs.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13920885\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13920885&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13920885\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13920885_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13920885_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Mar\\/14 14:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-05T14:26:57+0000\'\u003e05\\/Mar\\/14 14:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-34-aa-updatePrivs.diff. This patch adds privilege checking for UPDATE actions of MERGE statements. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdd privilege checks for UPDATE actions.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTests.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13920885_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13920885_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Mar\\/14 14:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-05T14:26:57+0000\'\u003e05\\/Mar\\/14 14:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-34-aa-updatePrivs.diff. This patch adds privilege checking for UPDATE actions of MERGE statements. I am running tests now. \\n\\n Touches the following files: \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/UpdateNode.java \\n\\n Add privilege checks for UPDATE actions. \\n\\n --------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\n\\n Tests.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13921024\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13921024&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13921024\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13921024_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13921024_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Mar\\/14 16:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-05T16:35:58+0000\'\u003e05\\/Mar\\/14 16:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-34-ab-updatePrivs.diff. The previous rev of the patch raised 3 errors in GrantRevokeDDLTest because of canonized wrong results. This revised patch fixes those test cases.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following additional file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/GrantRevokeDDLTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13921024_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13921024_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Mar\\/14 16:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-05T16:35:58+0000\'\u003e05\\/Mar\\/14 16:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-34-ab-updatePrivs.diff. The previous rev of the patch raised 3 errors in GrantRevokeDDLTest because of canonized wrong results. This revised patch fixes those test cases. \\n\\n Touches the following additional file: \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/GrantRevokeDDLTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13921026\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13921026&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13921026\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13921026_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13921026_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Mar\\/14 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-05T16:38:41+0000\'\u003e05\\/Mar\\/14 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1574566 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1574566\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1574566\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add privilege checks for the UPDATE actions of MERGE statements; commit derby-3155-34-ab-updatePrivs.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13921026_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13921026_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Mar\\/14 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-05T16:38:41+0000\'\u003e05\\/Mar\\/14 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1574566 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1574566  ] \\n\\n   DERBY-3155  : Add privilege checks for the UPDATE actions of MERGE statements; commit derby-3155-34-ab-updatePrivs.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13922731\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13922731&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13922731\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13922731_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13922731_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 16:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T16:44:58+0000\'\u003e06\\/Mar\\/14 16:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-35-aa-allPrivsTest.diff. This patch adds a test for privilege checking on a MERGE statement with INSERT, UPDATE, and DELETE clauses.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13922731_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13922731_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 16:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T16:44:58+0000\'\u003e06\\/Mar\\/14 16:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-35-aa-allPrivsTest.diff. This patch adds a test for privilege checking on a MERGE statement with INSERT, UPDATE, and DELETE clauses. \\n\\n Touches the following file: \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13922732\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13922732&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13922732\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13922732_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13922732_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 16:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T16:45:52+0000\'\u003e06\\/Mar\\/14 16:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1574956 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1574956\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1574956\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add a test case for privilege checking on a MERGE statement with all 3 kinds of actions; commit derby-3155-35-aa-allPrivsTest.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13922732_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13922732_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 16:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T16:45:52+0000\'\u003e06\\/Mar\\/14 16:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1574956 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1574956  ] \\n\\n   DERBY-3155  : Add a test case for privilege checking on a MERGE statement with all 3 kinds of actions; commit derby-3155-35-aa-allPrivsTest.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13922975\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13922975&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13922975\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13922975_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13922975_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 19:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T19:55:49+0000\'\u003e06\\/Mar\\/14 19:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-36-aa-lockModeComment.diff. This replaces some commented-out code with a comment saying that there is no need to set a global lock mode for the MERGE statement. The compiler determines individual lock modes for the driving left-join and for each INSERT, UPDATE, DELETE action.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13922975_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13922975_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 19:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T19:55:49+0000\'\u003e06\\/Mar\\/14 19:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-36-aa-lockModeComment.diff. This replaces some commented-out code with a comment saying that there is no need to set a global lock mode for the MERGE statement. The compiler determines individual lock modes for the driving left-join and for each INSERT, UPDATE, DELETE action. \\n\\n Touches the following file: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13922977\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13922977&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13922977\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13922977_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13922977_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 19:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T19:56:44+0000\'\u003e06\\/Mar\\/14 19:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1575026 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1575026\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1575026\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add lock mode comment to master MERGE node; commit derby-3155-36-aa-lockModeComment.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13922977_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13922977_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 19:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T19:56:44+0000\'\u003e06\\/Mar\\/14 19:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1575026 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1575026  ] \\n\\n   DERBY-3155  : Add lock mode comment to master MERGE node; commit derby-3155-36-aa-lockModeComment.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13923017\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13923017&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13923017\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13923017_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13923017_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 20:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T20:35:12+0000\'\u003e06\\/Mar\\/14 20:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-37-aa-printSubNodes.diff. This patch implements the printSubNodes() debug method for MergeNode and MatchingClauseNode().\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DMLModStatementNode.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13923017_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13923017_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 20:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T20:35:12+0000\'\u003e06\\/Mar\\/14 20:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-37-aa-printSubNodes.diff. This patch implements the printSubNodes() debug method for MergeNode and MatchingClauseNode(). \\n\\n Touches the following files: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MatchingClauseNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/DMLModStatementNode.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13923018\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13923018&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13923018\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13923018_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13923018_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 20:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T20:36:11+0000\'\u003e06\\/Mar\\/14 20:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1575032 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1575032\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1575032\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Implement printSubNodes() for MergeNode and MatchingClauseNode; commit derby-3155-37-aa-printSubNodes.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13923018_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13923018_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Mar\\/14 20:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-06T20:36:11+0000\'\u003e06\\/Mar\\/14 20:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1575032 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1575032  ] \\n\\n   DERBY-3155  : Implement printSubNodes() for MergeNode and MatchingClauseNode; commit derby-3155-37-aa-printSubNodes.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13925842\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13925842&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13925842\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13925842_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13925842_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/14 16:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-10T16:12:18+0000\'\u003e10\\/Mar\\/14 16:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-38-aa-datatypes.diff. This patch adds tests for using all datatypes in MERGE statements. I am running tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eThese tests uncovered one bug: We were not able to use XML datatypes in MERGE statements. The driving left-join failed to compile because the compiler thought that the XML types were going to be returned to the client. The solution was to make CursorNode not forbid XML types in its select list when it has been cooked up to support a MERGE statement.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/CursorNode.java\u003cbr\\/\u003e\\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/sqlgrammar.jj\u003c\\/p\u003e\\n\\n\u003cp\u003eAllow XML types in the select lists of the driving left-joins which support MERGE statements.\u003c\\/p\u003e\\n\\n\u003cp\u003e---------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003cbr\\/\u003e\\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/IntArray.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTests for MERGE statements which exercise all Derby datatypes.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13925842_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13925842_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/14 16:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-10T16:12:18+0000\'\u003e10\\/Mar\\/14 16:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-38-aa-datatypes.diff. This patch adds tests for using all datatypes in MERGE statements. I am running tests now. \\n\\n These tests uncovered one bug: We were not able to use XML datatypes in MERGE statements. The driving left-join failed to compile because the compiler thought that the XML types were going to be returned to the client. The solution was to make CursorNode not forbid XML types in its select list when it has been cooked up to support a MERGE statement. \\n\\n\\n Touches the following files: \\n\\n --------------- \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/CursorNode.java \\nM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/sqlgrammar.jj \\n\\n Allow XML types in the select lists of the driving left-joins which support MERGE statements. \\n\\n --------------- \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java \\nM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/IntArray.java \\n\\n Tests for MERGE statements which exercise all Derby datatypes.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13925971\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13925971&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13925971\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13925971_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13925971_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/14 18:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-10T18:04:44+0000\'\u003e10\\/Mar\\/14 18:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1576027 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1576027\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1576027\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add datatype tests for MERGE statement and fix bug involving xml types in MERGE statements; tests passed cleanly on derby-3155-38-aa-datatypes.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13925971_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13925971_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/14 18:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-10T18:04:44+0000\'\u003e10\\/Mar\\/14 18:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1576027 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1576027  ] \\n\\n   DERBY-3155  : Add datatype tests for MERGE statement and fix bug involving xml types in MERGE statements; tests passed cleanly on derby-3155-38-aa-datatypes.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13926056\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13926056&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13926056\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13926056_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13926056_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/14 19:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-10T19:06:29+0000\'\u003e10\\/Mar\\/14 19:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe last commit introduced a dependency on a Java 8 method in MergeStatementTest, and that made the Jenkins build fail. See \u003ca href=\\\"https:\\/\\/builds.apache.org\\/job\\/Derby-trunk\\/2093\\/console\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/builds.apache.org\\/job\\/Derby-trunk\\/2093\\/console\u003c\\/a\u003e. I think you can use Math.min() instead of Integer.min().\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13926056_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13926056_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/14 19:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-10T19:06:29+0000\'\u003e10\\/Mar\\/14 19:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The last commit introduced a dependency on a Java 8 method in MergeStatementTest, and that made the Jenkins build fail. See  https:\\/\\/builds.apache.org\\/job\\/Derby-trunk\\/2093\\/console . I think you can use Math.min() instead of Integer.min().              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13926071\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13926071&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13926071\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13926071_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13926071_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/14 19:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-10T19:20:10+0000\'\u003e10\\/Mar\\/14 19:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for spotting that, Knut. Attaching derby-3155-39-aa-fixBuild.diff. This fixes the build problem. I\'m also introducing a new Blob-making method for my next batch of tests.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have verified that the build fails on Java 7 without this fix, but works with this fix.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13926071_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13926071_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/14 19:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-10T19:20:10+0000\'\u003e10\\/Mar\\/14 19:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for spotting that, Knut. Attaching derby-3155-39-aa-fixBuild.diff. This fixes the build problem. I\'m also introducing a new Blob-making method for my next batch of tests. \\n\\n I have verified that the build fails on Java 7 without this fix, but works with this fix. \\n\\n\\n Touches the following file: \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13926075\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13926075&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13926075\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13926075_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13926075_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/14 19:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-10T19:21:47+0000\'\u003e10\\/Mar\\/14 19:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1576062 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1576062\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1576062\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Fix build problem introduced by derby-3155-38-aa-datatypes.diff; commit derby-3155-39-aa-fixBuild.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13926075_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13926075_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/14 19:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-10T19:21:47+0000\'\u003e10\\/Mar\\/14 19:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1576062 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1576062  ] \\n\\n   DERBY-3155  : Fix build problem introduced by derby-3155-38-aa-datatypes.diff; commit derby-3155-39-aa-fixBuild.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13930467\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13930467&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13930467\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13930467_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13930467_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/14 15:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-11T15:37:31+0000\'\u003e11\\/Mar\\/14 15:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-40-aa-bigLobs.diff. This patch adds some tests for largish lobs.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13930467_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13930467_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/14 15:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-11T15:37:31+0000\'\u003e11\\/Mar\\/14 15:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-40-aa-bigLobs.diff. This patch adds some tests for largish lobs. \\n\\n Touches the following file: \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13930470\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13930470&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13930470\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13930470_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13930470_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/14 15:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-11T15:38:48+0000\'\u003e11\\/Mar\\/14 15:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1576383 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1576383\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1576383\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add tests for largish lobs in MERGE statements; commit derby-3155-40-aa-bigLobs.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13930470_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13930470_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/14 15:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-11T15:38:48+0000\'\u003e11\\/Mar\\/14 15:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1576383 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1576383  ] \\n\\n   DERBY-3155  : Add tests for largish lobs in MERGE statements; commit derby-3155-40-aa-bigLobs.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13930777\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13930777&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13930777\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13930777_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13930777_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/14 18:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-11T18:55:22+0000\'\u003e11\\/Mar\\/14 18:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ei could not tell from quick scan of last commit what size lobs were being tested.  In general I suggest good testing sizes for lobs to be bothe some tests smaller than 32k and some larger than 32k.  This is the magic place where their handling changes in store and some language level caching i think.  And I think 32k is magic for network server as well.   If easy probably good to make it bigger than 96k to get a few pages involved.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13930777_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13930777_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/14 18:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-11T18:55:22+0000\'\u003e11\\/Mar\\/14 18:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    i could not tell from quick scan of last commit what size lobs were being tested.  In general I suggest good testing sizes for lobs to be bothe some tests smaller than 32k and some larger than 32k.  This is the magic place where their handling changes in store and some language level caching i think.  And I think 32k is magic for network server as well.   If easy probably good to make it bigger than 96k to get a few pages involved.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13930789\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13930789&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13930789\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13930789_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13930789_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/14 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-11T19:03:36+0000\'\u003e11\\/Mar\\/14 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for that advice, Mike. The derby-3155-38-aa-datatypes.diff patch tested small lobs (just a handful of bytes) and the derby-3155-40-aa-bigLobs.diff patch tested lobs which were 100K bytes or larger. Thanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13930789_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13930789_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/14 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-11T19:03:36+0000\'\u003e11\\/Mar\\/14 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for that advice, Mike. The derby-3155-38-aa-datatypes.diff patch tested small lobs (just a handful of bytes) and the derby-3155-40-aa-bigLobs.diff patch tested lobs which were 100K bytes or larger. Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13931693\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13931693&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13931693\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13931693_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13931693_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/14 12:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-12T12:28:02+0000\'\u003e12\\/Mar\\/14 12:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-41-aa-nullGeneratedColumns.diff. This patch adds a test for MERGE statements which sometimes populate generated columns with nulls and sometimes don\'t.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13931693_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13931693_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/14 12:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-12T12:28:02+0000\'\u003e12\\/Mar\\/14 12:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-41-aa-nullGeneratedColumns.diff. This patch adds a test for MERGE statements which sometimes populate generated columns with nulls and sometimes don\'t. \\n\\n Touches the following file: \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13931696\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13931696&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13931696\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13931696_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13931696_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/14 12:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-12T12:29:49+0000\'\u003e12\\/Mar\\/14 12:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1576710 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1576710\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1576710\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add a test for MERGE statements which sometimes put nulls into generated columns and sometimes don\'t; commit derby-3155-41-aa-nullGeneratedColumns.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13931696_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13931696_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/14 12:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-12T12:29:49+0000\'\u003e12\\/Mar\\/14 12:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1576710 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1576710  ] \\n\\n   DERBY-3155  : Add a test for MERGE statements which sometimes put nulls into generated columns and sometimes don\'t; commit derby-3155-41-aa-nullGeneratedColumns.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13932323\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13932323&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13932323\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13932323_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13932323_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/14 20:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-12T20:34:52+0000\'\u003e12\\/Mar\\/14 20:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-42-aa-triggersAndGeneratedColumns.diff. This patch adds a test for triggers involving generated columns which are fired by MERGE statements.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13932323_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13932323_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/14 20:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-12T20:34:52+0000\'\u003e12\\/Mar\\/14 20:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-42-aa-triggersAndGeneratedColumns.diff. This patch adds a test for triggers involving generated columns which are fired by MERGE statements. \\n\\n Touches the following file: \\n\\n M       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13932331\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13932331&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13932331\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13932331_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13932331_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/14 20:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-12T20:39:41+0000\'\u003e12\\/Mar\\/14 20:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1576893 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1576893\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1576893\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Add test for MERGE statement which fires triggers involving generated columns; commit derby-3155-42-aa-triggersAndGeneratedColumns.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13932331_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13932331_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/14 20:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-12T20:39:41+0000\'\u003e12\\/Mar\\/14 20:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1576893 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1576893  ] \\n\\n   DERBY-3155  : Add test for MERGE statement which fires triggers involving generated columns; commit derby-3155-42-aa-triggersAndGeneratedColumns.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13935136\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13935136&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13935136\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13935136_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13935136_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Mar\\/14 15:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-14T15:19:25+0000\'\u003e14\\/Mar\\/14 15:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-43-aa-eliminateDuplicateColumnRefs.diff. This patch eliminates redundant copies of columns in the select list of the driving left join. MergeStatementTest runs cleanly with this patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eI tripped across this redundancy while debugging a problem involving lobs. The redundancy shouldn\'t have any noticeable effects for non-lob columns. But for lobs this might be a performance issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe fix is to replace an ArrayList with a HashSet when computing the select list of the driving left join.\u003c\\/p\u003e\\n\\n\u003cp\u003eTouches the following file:\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13935136_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13935136_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Mar\\/14 15:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-14T15:19:25+0000\'\u003e14\\/Mar\\/14 15:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-43-aa-eliminateDuplicateColumnRefs.diff. This patch eliminates redundant copies of columns in the select list of the driving left join. MergeStatementTest runs cleanly with this patch. \\n\\n I tripped across this redundancy while debugging a problem involving lobs. The redundancy shouldn\'t have any noticeable effects for non-lob columns. But for lobs this might be a performance issue. \\n\\n The fix is to replace an ArrayList with a HashSet when computing the select list of the driving left join. \\n\\n Touches the following file: \\n\\n M       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/MergeNode.java              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13935138\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13935138&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13935138\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13935138_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13935138_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Mar\\/14 15:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-14T15:20:45+0000\'\u003e14\\/Mar\\/14 15:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1577566 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\" class=\\\"user-hover\\\" rel=\\\"rhillegas\\\"\u003eRick Hillegas\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1577566\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1577566\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3155\\\" title=\\\"Support for SQL:2003 MERGE statement\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3155\\\"\u003e\u003cdel\u003eDERBY-3155\u003c\\/del\u003e\u003c\\/a\u003e: Eliminate redundant copies of columns in the select list of the driving left join for MERGE statements; commit derby-3155-43-aa-eliminateDuplicateColumnRefs.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13935138_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13935138_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Mar\\/14 15:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-14T15:20:45+0000\'\u003e14\\/Mar\\/14 15:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1577566 from  Rick Hillegas  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1577566  ] \\n\\n   DERBY-3155  : Eliminate redundant copies of columns in the select list of the driving left join for MERGE statements; commit derby-3155-43-aa-eliminateDuplicateColumnRefs.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13938291\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3155?focusedCommentId=13938291&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13938291\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13938291_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13938291_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Mar\\/14 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-17T19:53:10+0000\'\u003e17\\/Mar\\/14 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby-3155-44-aa-lobsInTriggers.diff. This patch materializes LOBs before handing them to the WHEN [ NOT ] MATCHED clauses.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch fixes a bug which surfaced when MERGE statements fired triggers which referenced LOBs. The LOBs could not be read because the scan underneath them had been closed.\u003c\\/p\u003e\\n\\n\u003cp\u003eRight now the MERGE statement has 2 execution phases:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Scan the driving left join and buffer up qualified rows for processing by the WHEN [ NOT ] MATCHED clauses.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Then process each clause in turn, performing an INSERT\\/UPDATE\\/DELETE on the rows buffered up for it.\u003c\\/p\u003e\\n\\n\u003cp\u003eBetween these two steps, we close the driving left join. This means that we can\'t use references to LOBs inside the driving left join. Instead, we have to do our work on LOB values. This may be an inefficient way to handle LOBs, and we may want to optimize this later on. Perhaps we can leave the driving left join open. However, then I think we will run into the problems we\'ve seen with reading the same LOB reference more than once. I do not want to fix those problems as part of implementing MERGE.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTouches the following files:\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/MergeResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eMaterialize LOBs from their references before buffering them up for handling by the WHEN [ NOT ] MATCHED clauses.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------\u003c\\/p\u003e\\n\\n\u003cp\u003eM       java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/MergeStatementTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eTests for MERGE-fired triggers which reference LOBs.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13938291_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13938291_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Mar\\/14 19:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-03-17T19:53:10+0000\'\u003e17\\/Mar\\/14 19:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby-3155-44-a</script>
 </body>
</html>