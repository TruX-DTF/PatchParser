<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|977350d6665f3562d2476b2f4ca53bb9a2822dd9|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"62404e6a1ec7f5\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-3561"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-3561] testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:&lt;2&gt; but was:&lt;5&gt; - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-3561] testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:<2> but was:<5> - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-3561">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-3561" href="/jira/browse/DERBY-3561" id="key-val" rel="12391990">DERBY-3561</a></li>
                </ol>
                <h1 id="summary-val">testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:&lt;2&gt; but was:&lt;5&gt;</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-3561"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-3561/DERBY-3561.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-3561/DERBY-3561.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-3561/DERBY-3561.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-3561/DERBY-3561.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.4.1.3 ">10.4.1.3</span>, <span title="10.5.1.1 build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09">10.5.1.1</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.2.1" title="10.4.2.1 Head of 10.4 branch">10.4.2.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.5.1.1" title="10.5.1.1 build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09">10.5.1.1</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+JMX" title="JMX Management issues for Derby using the JMX framework">JMX</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Test" title="Test ">Test</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12391990-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Regression Test Failure</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>The following test has been failing consistently in the tinderbox runs since about build 636714, unfortunately the run right before this build failed so<br> it may be from that one. <br> first tinderbox failure I could find:<br> <a href="http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/636714-org.apache.derbyTesting.functionTests.suites.All_diff.txt" class="external-link" rel="nofollow">http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/636714-org.apache.derbyTesting.functionTests.suites.All_diff.txt</a><br> most recent as of this report:<br> <a href="http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/639156-org.apache.derbyTesting.functionTests.suites.All_diff.txt" class="external-link" rel="nofollow">http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/639156-org.apache.derbyTesting.functionTests.suites.All_diff.txt</a></p> 
                  <p>There was 1 failure:<br> 1) testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:&lt;2&gt; but was:&lt;5&gt;<br> at org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest.startStopManagement(ManagementMBeanTest.java:86)<br> at org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest.testStartStopManagementFromApplication(ManagementMBeanTest.java:56)<br> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br> at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br> at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br> at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)<br> at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)<br> at junit.extensions.TestSetup$1.protect(TestSetup.java:21)<br> at junit.extensions.TestSetup.run(TestSetup.java:25)<br> at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)<br> at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)<br> at junit.extensions.TestSetup$1.protect(TestSetup.java:21)<br> at junit.extensions.TestSetup.run(TestSetup.java:25)<br> at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)<br> at junit.extensions.TestSetup$1.protect(TestSetup.java:21)<br> at junit.extensions.TestSetup.run(TestSetup.java:25)<br> at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-3561?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-3561?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-3561?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-3561?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12388907" data-issue-id="12391990" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12388907/d3561_classesFix.diff" draggable="true" data-downloadurl="text/x-patch:d3561_classesFix.diff:https://issues.apache.org/jira/secure/attachment/12388907/d3561_classesFix.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12388907/d3561_classesFix.diff" title="Latest  26/Aug/08 13:43 - John H. Embretsen" draggable="true" data-downloadurl="text/x-patch:d3561_classesFix.diff:https://issues.apache.org/jira/secure/attachment/12388907/d3561_classesFix.diff">d3561_classesFix.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-08-26T13:43:03.273Z">26/Aug/08 13:43</time>
                   </dd>
                   <dd class="attachment-size">
                    1.0 kB
                   </dd>
                   <dd class="attachment-author">
                    John H. Embretsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12378806" data-issue-id="12391990" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12378806/d3561_testPolicyFix.diff" draggable="true" data-downloadurl="text/x-patch:d3561_testPolicyFix.diff:https://issues.apache.org/jira/secure/attachment/12378806/d3561_testPolicyFix.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12378806/d3561_testPolicyFix.diff" title="Latest  28/Mar/08 18:32 - John H. Embretsen" draggable="true" data-downloadurl="text/x-patch:d3561_testPolicyFix.diff:https://issues.apache.org/jira/secure/attachment/12378806/d3561_testPolicyFix.diff">d3561_testPolicyFix.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-28T18:32:30.062Z">28/Mar/08 18:32</time>
                   </dd>
                   <dd class="attachment-size">
                    0.9 kB
                   </dd>
                   <dd class="attachment-author">
                    John H. Embretsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12379035" data-issue-id="12391990" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12379035/Derby3561ReproStandalone.java" draggable="true" data-downloadurl="java/*:Derby3561ReproStandalone.java:https://issues.apache.org/jira/secure/attachment/12379035/Derby3561ReproStandalone.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12379035/Derby3561ReproStandalone.java" title="Latest  01/Apr/08 14:34 - John H. Embretsen" draggable="true" data-downloadurl="java/*:Derby3561ReproStandalone.java:https://issues.apache.org/jira/secure/attachment/12379035/Derby3561ReproStandalone.java">Derby3561ReproStandalone.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-04-01T14:34:53.647Z">01/Apr/08 14:34</time>
                   </dd>
                   <dd class="attachment-size">
                    14 kB
                   </dd>
                   <dd class="attachment-author">
                    John H. Embretsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12379034" data-issue-id="12391990" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12379034/Derby3561ReproSuite_notForCommit.diff" draggable="true" data-downloadurl="application/x-subversion-stat:Derby3561ReproSuite_notForCommit.diff:https://issues.apache.org/jira/secure/attachment/12379034/Derby3561ReproSuite_notForCommit.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12379034/Derby3561ReproSuite_notForCommit.diff" title="Latest  01/Apr/08 14:34 - John H. Embretsen" draggable="true" data-downloadurl="application/x-subversion-stat:Derby3561ReproSuite_notForCommit.diff:https://issues.apache.org/jira/secure/attachment/12379034/Derby3561ReproSuite_notForCommit.diff">Derby3561ReproSuite_notForCommit.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-04-01T14:34:53.621Z">01/Apr/08 14:34</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    John H. Embretsen
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12491791_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-4925: AssertionFailedError: DerbyMBeanCount:5 in ManagementMBeanTest.testStartStopManagementFromApplication()"> <a href="/jira/browse/DERBY-4925" data-issue-key="DERBY-4925" class="issue-link link-title">DERBY-4925</a> <span class="link-summary">AssertionFailedError: DerbyMBeanCount:5 in ManagementMBeanTest.testStartStopManagementFromApplication()</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12433427_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-4356: testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:<2> but was:<%>"> <a href="/jira/browse/DERBY-4356" data-issue-key="DERBY-4356" class="issue-link link-title resolution">DERBY-4356</a> <span class="link-summary">testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:&lt;2&gt; but was:&lt;%&gt;</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_johnemb" rel="johnemb" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;John H. Embretsen&quot;,&quot;emailAddress&quot;:&quot;johnemb@gmail.com&quot;,&quot;username&quot;:&quot;johnemb&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="johnemb"></span></span> John H. Embretsen </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_mikem" rel="mikem" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mike Matrigali&quot;,&quot;emailAddress&quot;:&quot;mikem_app@sbcglobal.net&quot;,&quot;username&quot;:&quot;mikem&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mikem"></span></span> Mike Matrigali </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">1</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="20/Mar/08 19:08"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-03-20T19:08:56+0000">20/Mar/08 19:08</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="21/Jan/11 17:51"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2011-01-21T17:51:48+0000">21/Jan/11 17:51</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="27/Aug/08 12:45"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-08-27T12:45:37+0000">27/Aug/08 12:45</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3561?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-3561?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12582686\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12582686&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12582686\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12582686_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582686_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/08 15:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-27T15:20:41+0000\'\u003e27\\/Mar\\/08 15:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am only able to reproduce this failure when running suites.All, or a subset of it, before running the ManagementMBeanTest. Running the management suite by itself does not result in a failure. \u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems to me that when connecting directly to the platform MBean server in the same JVM, there is a set of MBeans from a different Derby system available, as indicated by the extra debugging output I added:\u003c\\/p\u003e\\n\\n\u003cp\u003einitial: org.apache.derby:type=Management\u003cbr\\/\u003e\\ninitial: org.apache.derby:system=c013800d-0118-f0c9-77c9-00004d1fe320,type=Management\u003cbr\\/\u003e\\ninitial: org.apache.derby:jar=derby.jar,system=c013800d-0118-f0c9-9143-00004d1fe320,type=Version\u003cbr\\/\u003e\\ninitial: org.apache.derby:system=c013800d-0118-f0c9-77c9-00004d1fe320,type=JDBC\u003cbr\\/\u003e\\ninitial: org.apache.derby:system=c013800d-0118-f0c9-9143-00004d1fe320,type=JDBC\u003cbr\\/\u003e\\ninitial: org.apache.derby:jar=derbynet.jar,system=c013800d-0118-f0c9-9143-00004d1fe320,type=Version\u003cbr\\/\u003e\\ninitial: org.apache.derby:jar=derby.jar,system=c013800d-0118-f0c9-77c9-00004d1fe320,type=Version\u003cbr\\/\u003e\\ninitial: org.apache.derby:system=c013800d-0118-f0c9-9143-00004d1fe320,type=NetworkServer\u003cbr\\/\u003e\\ninitial: org.apache.derby:system=c013800d-0118-f0c9-9143-00004d1fe320,type=Management\u003cbr\\/\u003e\\nDerbyMBeanCount after no-op startMgmt: 9\u003cbr\\/\u003e\\nDerbyMBeanCount after stop: 5\u003cbr\\/\u003e\\nafter stop: org.apache.derby:type=Management\u003cbr\\/\u003e\\nafter stop: org.apache.derby:jar=derby.jar,system=c013800d-0118-f0c9-77c9-00004d1fe320,type=Version\u003cbr\\/\u003e\\nafter stop: org.apache.derby:system=c013800d-0118-f0c9-77c9-00004d1fe320,type=Management\u003cbr\\/\u003e\\nafter stop: org.apache.derby:system=c013800d-0118-f0c9-77c9-00004d1fe320,type=JDBC\u003cbr\\/\u003e\\nafter stop: org.apache.derby:system=c013800d-0118-f0c9-9143-00004d1fe320,type=Management\u003cbr\\/\u003e\\ntestStartStopManagementFromApplication used 24 ms F\u003c\\/p\u003e\\n\\n\u003cp\u003eI have reduced the number of tests needed to reproduce the failure to a suite consisting of:\u003c\\/p\u003e\\n\\n\u003cp\u003esuite.addTest(org.apache.derbyTesting.functionTests.tests.derbynet.NSinSameJVMTest.suite());\u003cbr\\/\u003e\\nsuite.addTest(org.apache.derbyTesting.functionTests.tests.derbynet.ServerPropertiesTest.suite());\u003cbr\\/\u003e\\nsuite.addTest(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest.suite());\u003c\\/p\u003e\\n\\n\u003cp\u003ein that specific order. Looking closer at those tests might reveal something.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12582686_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582686_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/08 15:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-27T15:20:41+0000\'\u003e27\\/Mar\\/08 15:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am only able to reproduce this failure when running suites.All, or a subset of it, before running the ManagementMBeanTest. Running the management suite by itself does not result in a failure.  \\n\\n It seems to me that when connecting directly to the platform MBean server in the same JVM, there is a set of MBeans from a different Derby system available, as indicated by the extra debugging output I added: \\n\\n initial: org.apache.derby:type=Management \\ninitial: org.apache.derby:system=c013800d-0118-f0c9-77c9-00004d1fe320,type=Management \\ninitial: org.apache.derby:jar=derby.jar,system=c013800d-0118-f0c9-9143-00004d1fe320,type=Version \\ninitial: org.apache.derby:system=c013800d-0118-f0c9-77c9-00004d1fe320,type=JDBC \\ninitial: org.apache.derby:system=c013800d-0118-f0c9-9143-00004d1fe320,type=JDBC \\ninitial: org.apache.derby:jar=derbynet.jar,system=c013800d-0118-f0c9-9143-00004d1fe320,type=Version \\ninitial: org.apache.derby:jar=derby.jar,system=c013800d-0118-f0c9-77c9-00004d1fe320,type=Version \\ninitial: org.apache.derby:system=c013800d-0118-f0c9-9143-00004d1fe320,type=NetworkServer \\ninitial: org.apache.derby:system=c013800d-0118-f0c9-9143-00004d1fe320,type=Management \\nDerbyMBeanCount after no-op startMgmt: 9 \\nDerbyMBeanCount after stop: 5 \\nafter stop: org.apache.derby:type=Management \\nafter stop: org.apache.derby:jar=derby.jar,system=c013800d-0118-f0c9-77c9-00004d1fe320,type=Version \\nafter stop: org.apache.derby:system=c013800d-0118-f0c9-77c9-00004d1fe320,type=Management \\nafter stop: org.apache.derby:system=c013800d-0118-f0c9-77c9-00004d1fe320,type=JDBC \\nafter stop: org.apache.derby:system=c013800d-0118-f0c9-9143-00004d1fe320,type=Management \\ntestStartStopManagementFromApplication used 24 ms F \\n\\n I have reduced the number of tests needed to reproduce the failure to a suite consisting of: \\n\\n suite.addTest(org.apache.derbyTesting.functionTests.tests.derbynet.NSinSameJVMTest.suite()); \\nsuite.addTest(org.apache.derbyTesting.functionTests.tests.derbynet.ServerPropertiesTest.suite()); \\nsuite.addTest(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest.suite()); \\n\\n in that specific order. Looking closer at those tests might reveal something.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583039\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12583039&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583039\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12583039_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583039_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 14:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T14:09:17+0000\'\u003e28\\/Mar\\/08 14:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAssgned this to myself since I am spending some time looking into the issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eAt first I was pussled by the fact that MBeans from two different Derby systems were available at the same time in the same JVM. As far as I know neither NSinSameJVMTest nor ServerPropertiesTest perform any class loading tricks for this to happen.\u003c\\/p\u003e\\n\\n\u003cp\u003eMultiple trial\\/error runs eventually led me to the following clue, which I hope might lead to a solution:\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems that there is only one Derby system active when the test starts, but three MBeans from an old Derby system are still present, as they have not been unregistered from the MBeanServer (I guess the MBeanServer is the same for all test runs in the same JVM). These three MBeans are: JDBC, Management and Version for derby.jar. This might be because the other mbeans (NetworkServer, Version for derbynet.jar) were successfully unregistered as part of a NetworkServerControl.shutdown() call in a previous test.\u003c\\/p\u003e\\n\\n\u003cp\u003eThen I discovered that if I added an \\\"unregister\\\" MBeanPermission for derby.jar in the special security policy file for ServerPropertiesTest (java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/derbynet\\/ServerPropertiesTest.policy), the test does not fail anymore (at least in my minimal test runs).\u003c\\/p\u003e\\n\\n\u003cp\u003eI will do some more testing, but I thought I\'d share my progress so far, in case anyone comes up with any better explanations.\u003cbr\\/\u003e\\nA solution seems to be to add the mentioned MBeanPermission to the special ServerPropertiesTest.policy file, but other suggestions are welcome.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12583039_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583039_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 14:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T14:09:17+0000\'\u003e28\\/Mar\\/08 14:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Assgned this to myself since I am spending some time looking into the issue. \\n\\n At first I was pussled by the fact that MBeans from two different Derby systems were available at the same time in the same JVM. As far as I know neither NSinSameJVMTest nor ServerPropertiesTest perform any class loading tricks for this to happen. \\n\\n Multiple trial\\/error runs eventually led me to the following clue, which I hope might lead to a solution: \\n\\n It seems that there is only one Derby system active when the test starts, but three MBeans from an old Derby system are still present, as they have not been unregistered from the MBeanServer (I guess the MBeanServer is the same for all test runs in the same JVM). These three MBeans are: JDBC, Management and Version for derby.jar. This might be because the other mbeans (NetworkServer, Version for derbynet.jar) were successfully unregistered as part of a NetworkServerControl.shutdown() call in a previous test. \\n\\n Then I discovered that if I added an \\\"unregister\\\" MBeanPermission for derby.jar in the special security policy file for ServerPropertiesTest (java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/derbynet\\/ServerPropertiesTest.policy), the test does not fail anymore (at least in my minimal test runs). \\n\\n I will do some more testing, but I thought I\'d share my progress so far, in case anyone comes up with any better explanations. \\nA solution seems to be to add the mentioned MBeanPermission to the special ServerPropertiesTest.policy file, but other suggestions are welcome.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583131\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12583131&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583131\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12583131_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583131_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 18:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T18:32:30+0000\'\u003e28\\/Mar\\/08 18:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching patch d3561_testPolicyFix.diff which adds the permission\u003c\\/p\u003e\\n\\n\u003cp\u003epermission javax.management.MBeanPermission \\\"org.apache.derby.*#\u003cspan class=\\\"error\\\"\u003e&#91;org.apache.derby:*&#93;\u003c\\/span\u003e\\\",\\\"unregisterMBean\\\"; \u003c\\/p\u003e\\n\\n\u003cp\u003eto the test policy file used by derbynet.ServerPropertiesTest.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have run suites.All with this patch using JDK 1.5, and saw no failures whatsoever.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt would be great if someone else could try the patch in another environment and see if it gets rid of the test failure there as well. Or a committer with sufficient faith in the patch can just commit it \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12583131_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583131_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 18:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T18:32:30+0000\'\u003e28\\/Mar\\/08 18:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching patch d3561_testPolicyFix.diff which adds the permission \\n\\n permission javax.management.MBeanPermission \\\"org.apache.derby.*# &#91;org.apache.derby:*&#93; \\\",\\\"unregisterMBean\\\";  \\n\\n to the test policy file used by derbynet.ServerPropertiesTest. \\n\\n I have run suites.All with this patch using JDK 1.5, and saw no failures whatsoever. \\n\\n It would be great if someone else could try the patch in another environment and see if it gets rid of the test failure there as well. Or a committer with sufficient faith in the patch can just commit it                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583154\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12583154&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583154\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12583154_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583154_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 19:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T19:16:00+0000\'\u003e28\\/Mar\\/08 19:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi John,\u003cbr\\/\u003e\\nDo you know why the tests that need the permission don\'t fail when they don\'t have it? Shouldn\'t they fail when they are not able to unregister the MBeans?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12583154_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583154_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 19:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T19:16:00+0000\'\u003e28\\/Mar\\/08 19:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi John, \\nDo you know why the tests that need the permission don\'t fail when they don\'t have it? Shouldn\'t they fail when they are not able to unregister the MBeans?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583223\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12583223&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583223\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12583223_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583223_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 22:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T22:46:19+0000\'\u003e28\\/Mar\\/08 22:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNo, if I understand your question correctly, the tests that lack the permission (in ServerPropertiesTest) are not aware that there is any JMX or MBeans in play at all, so they should not fail, because they are not testing it. This issue is (as I understand it) a side-effect of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3429\\\" title=\\\"Remove system property derby.system.jmx\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3429\\\"\u003e\u003cdel\u003eDERBY-3429\u003c\\/del\u003e\u003c\\/a\u003e, that the JMX features are enabled by default when using a good enough JVM. The JMX tests themselves use a different server policy (a default one), with all the required permissions, while the ServerPropertiesTest tests use a special policy (for various reasons) that did not include these permissions.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12583223_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583223_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 22:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T22:46:19+0000\'\u003e28\\/Mar\\/08 22:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    No, if I understand your question correctly, the tests that lack the permission (in ServerPropertiesTest) are not aware that there is any JMX or MBeans in play at all, so they should not fail, because they are not testing it. This issue is (as I understand it) a side-effect of   DERBY-3429  , that the JMX features are enabled by default when using a good enough JVM. The JMX tests themselves use a different server policy (a default one), with all the required permissions, while the ServerPropertiesTest tests use a special policy (for various reasons) that did not include these permissions.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583225\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12583225&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583225\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12583225_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583225_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 22:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T22:49:34+0000\'\u003e28\\/Mar\\/08 22:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLet me add that I\'m not entirely on top of all hows an whys wrt. the security manager and JMX, but it seems that any lack of permissions is just silently ignored by default at runtime.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12583225_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583225_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 22:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T22:49:34+0000\'\u003e28\\/Mar\\/08 22:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Let me add that I\'m not entirely on top of all hows an whys wrt. the security manager and JMX, but it seems that any lack of permissions is just silently ignored by default at runtime.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583228\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12583228&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583228\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12583228_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583228_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 23:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T23:05:24+0000\'\u003e28\\/Mar\\/08 23:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDoes this mean that users that use a custom policy file, but don\'t use \u003cbr\\/\u003e\\nJMX, need to change their policy file?\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12583228_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583228_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 23:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T23:05:24+0000\'\u003e28\\/Mar\\/08 23:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Does this mean that users that use a custom policy file, but don\'t use  \\nJMX, need to change their policy file? \\n\\n\\n Kathey \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583271\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12583271&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583271\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12583271_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583271_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Mar\\/08 04:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-29T04:16:05+0000\'\u003e29\\/Mar\\/08 04:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Does this mean that users that use a custom policy file, but don\'t use JMX, need to change their policy file?\u003c\\/p\u003e\\n\\n\u003cp\u003eNo. Derby will not be able to register MBeans and that is not a problem. If registering an Mbean fails then Derby doesn\'t care.\u003cbr\\/\u003e\\nThis allows fine grained control of which MBeans derby will expose.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12583271_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583271_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Mar\\/08 04:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-29T04:16:05+0000\'\u003e29\\/Mar\\/08 04:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Does this mean that users that use a custom policy file, but don\'t use JMX, need to change their policy file? \\n\\n No. Derby will not be able to register MBeans and that is not a problem. If registering an Mbean fails then Derby doesn\'t care. \\nThis allows fine grained control of which MBeans derby will expose.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583300\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12583300&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583300\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12583300_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583300_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Mar\\/08 09:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-29T09:49:26+0000\'\u003e29\\/Mar\\/08 09:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI suspect that the reason those \\\"extra\\\" MBeans were registered in the first place might be that a Derby system was started while using the default security policy (or none at all), and that the policy had changed at shutdown time. I will try to make an effort to understand this a little better next week.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12583300_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583300_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Mar\\/08 09:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-29T09:49:26+0000\'\u003e29\\/Mar\\/08 09:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I suspect that the reason those \\\"extra\\\" MBeans were registered in the first place might be that a Derby system was started while using the default security policy (or none at all), and that the policy had changed at shutdown time. I will try to make an effort to understand this a little better next week.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12584155\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12584155&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12584155\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12584155_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584155_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Apr\\/08 14:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-01T14:34:53+0000\'\u003e01\\/Apr\\/08 14:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have done some more experimenting, and here is a writeup of my current \u003cbr\\/\u003e\\nunderstanding of this issue:\u003c\\/p\u003e\\n\\n\u003cp\u003eAs previously mentioned, I have narrowed down the test suite leading to \u003cbr\\/\u003e\\nthis failure to the following (test order is significant):\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ederbynet.NSinSameJVMTest.suite()\u003c\\/li\u003e\\n\\t\u003cli\u003ederbynet.ServerPropertiesTest.suite()\u003c\\/li\u003e\\n\\t\u003cli\u003emanagement.ManagementMBeanTest.suite()\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI have attached the minimal JUnit test suite (new java testclass) required\u003cbr\\/\u003e\\nto reproduce this failure as a diff file against trunk: \u003cbr\\/\u003e\\nDerby3561ReproSuite_notForCommit.diff (not for commit)\u003c\\/p\u003e\\n\\n\u003cp\u003eSome points to be aware of:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eStarting a Derby system in a 1.5 or 1.6 VM automatically results in\u003cbr\\/\u003e\\n   3 MBeans being registered. (If a security manager is installed,\u003cbr\\/\u003e\\n   sufficient permissions must be granted to Derby). Stopping the Derby\u003cbr\\/\u003e\\n   system means that the entire collection of Derby MBeans will be \u003cbr\\/\u003e\\n   attempted unregistered from the MBean server.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eStarting the Derby Network Server in a 1.5 or 1.6 VM automatically\u003cbr\\/\u003e\\n   results in 2 extra MBeans being registered, specific to the network \u003cbr\\/\u003e\\n   server. (If a security manager is installed, sufficient permissions must\u003cbr\\/\u003e\\n   be granted to Derby). Stopping the network server unregisters these\u003cbr\\/\u003e\\n   MBeans.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eStarting the network server results in starting a Derby system, if such\u003cbr\\/\u003e\\n   a system is not already running in the JVM. Stopping the network server\u003cbr\\/\u003e\\n   using the NetworkServerControl API does \u003cb\u003enot\u003c\\/b\u003e also shut down the Derby\u003cbr\\/\u003e\\n   system (by design, I presume).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eStopping\\/deactivating Derby management using the ManagementMBean means\u003cbr\\/\u003e\\n   that all Derby MBeans that are registered with both the MBean server\u003cbr\\/\u003e\\n   and Derby\'s management service will be unregistered from the MBean \u003cbr\\/\u003e\\n   server, with the exception of any ManagementMBeans (which may be used to\u003cbr\\/\u003e\\n   re-register the other MBeans).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003eThe sequence of events leading to the test failure is:\u003c\\/p\u003e\\n\\n\u003cp\u003e1. NSinSameJVMTest (could also be some other test which does similar things):\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eA clientServer decorator starts a new network server and thus also\u003cbr\\/\u003e\\n       a Derby system (\\\"system A\\\") using the NetworkServerControl API (same \u003cbr\\/\u003e\\n       JVM).\u003c\\/li\u003e\\n\\t\u003cli\u003eSecurity policy used: functionTests\\/util\\/derby_tests.policy\u003c\\/li\u003e\\n\\t\u003cli\u003eIncludes permissions to register and unregister MBeans, etc.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e       ==&gt; 5 MBeans from system A are automatically registered with the \u003cbr\\/\u003e\\n           JVM\'s MBean server. The test doesn\'t know and doesn\'t care.\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe network server is shut down using the same API, and the same\u003cbr\\/\u003e\\n       security policy.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e       ==&gt; 2 MBeans (VersionMBean;derbynet.jar + NetworkServerMBean) from\u003cbr\\/\u003e\\n           system A are automatically unregistered. \u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe remaining 3 MBeans (JDBCMBean + ManagementMBean +\u003cbr\\/\u003e\\n        VersionMBean;derby.jar) are not network server specific and will \u003cbr\\/\u003e\\n        therefore remain registered until the Derby system shuts down, or\u003cbr\\/\u003e\\n        until some manual intervention is performed.\u003cbr\\/\u003e\\n        Neither the test nor the test harness shuts down the Derby system.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e2. ServerPropertiesTest\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eDerby system A is still running...\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eis wrapped in a decorator which changes the security policy from the\u003cbr\\/\u003e\\n       default to a specific one: derbynet\\/ServerPropertiesTest.policy.\u003c\\/li\u003e\\n\\t\u003cli\u003eNo JMX permissions are included in this policy.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e       ==&gt; No new MBeans are registered when the test starts its own network\u003cbr\\/\u003e\\n           servers\\/systems, due to lack of permissions (no exceptions are \u003cbr\\/\u003e\\n           thrown; this is by design). The test is unaware and does not care.\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ettestSetPortPriority() method starts and stops Network Servers, and\u003cbr\\/\u003e\\n       (more importantly) it shuts down the current Derby system (twice)\u003cbr\\/\u003e\\n       during the test (for some static properties to take effect). System A\u003cbr\\/\u003e\\n       has now been shut down.\u003c\\/li\u003e\\n\\t\u003cli\u003eSince the test does not have permissions to unregister any MBeans,\u003cbr\\/\u003e\\n         the three MBeans from system A will remain registered with the\u003cbr\\/\u003e\\n         MBean server. The test doesn\'t know and doesn\'t care.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e3. ManagementMBeanTest\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003etestStartStopManagementFromApplication() test and method\u003cbr\\/\u003e\\n       startStopManagement(ObjectName mbean) is run twice:\u003c\\/li\u003e\\n\\t\u003cli\u003eonce using a direct connection to the platform MBean server in the\u003cbr\\/\u003e\\n         same JVM as the test. This fails.\u003c\\/li\u003e\\n\\t\u003cli\u003eonce using a JMX client connection to a \\\"remote\\\" MBean server \\/\u003cbr\\/\u003e\\n         network server (different JVM). This passes.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ethe decorator for the failing test starts a Derby Network Server in\u003cbr\\/\u003e\\n       the same JVM, to ensure that all MBeans are automatically registered.\u003cbr\\/\u003e\\n       Let\'s call the Derby system being used \\\"system B\\\".\u003c\\/li\u003e\\n\\t\u003cli\u003eThe policy file used is functionTests\\/util\\/derby_tests.policy,\u003cbr\\/\u003e\\n         including permissions to register MBeans etc.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e       ==&gt; 5 MBeans from system B are automatically registered with the \u003cbr\\/\u003e\\n           JVM\'s MBean server. This is what the test expects.\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe test registers an extra MBean: An application controlled\u003cbr\\/\u003e\\n       ManagementMBean, which is used for starting and stopping Derby \u003cbr\\/\u003e\\n       management.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe test counts the number of MBeans in the org.apache.derby domain\u003cbr\\/\u003e\\n       several times.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eAfter stopping management, the test expects to see exactly 2 MBeans:\u003cbr\\/\u003e\\n       The ManagementMBean controlled by the application\\/test, and the \u003cbr\\/\u003e\\n       ManagementMBean that was automatically registered\\/created by Derby.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eHowever, the 3 MBeans from system A still remain registered with the\u003cbr\\/\u003e\\n       MBean server, although these MBeans are not registered with the \u003cbr\\/\u003e\\n       current Derby management service (different system, different \u003cbr\\/\u003e\\n       management service).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe test sees 3 + 2 = 5 MBeans, but expects to see 2. The test fails.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003eUser impact:\u003cbr\\/\u003e\\n------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eIn my opinion, it is not very likely that a user will experience such a\u003cbr\\/\u003e\\nscenario, as it requires modifying (restricting) or installing a security \u003cbr\\/\u003e\\npolicy at runtime and booting and shutting down Derby systems at the right \u003cbr\\/\u003e\\n(wrong) moments.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf a user should run into this, nothing bad can happen as far as I can see.\u003cbr\\/\u003e\\nThe user may observere MBeans belonging to a non-active Derby system, even \u003cbr\\/\u003e\\nif Derby\'s management service is deactivated, but that is basically it. \u003c\\/p\u003e\\n\\n\u003cp\u003eBy using JConsole and a standalone test class (attached) I see that the old \u003cbr\\/\u003e\\nMBeans are available and may be accessed, and most attributes still have the \u003cbr\\/\u003e\\nsame values, although the SystemIdentifier (ManagementMBean) is empty and \u003cbr\\/\u003e\\nManagementActive will always remain false. The startManagement operation of\u003cbr\\/\u003e\\nan old ManagementMBean does not change anything, but it does not report an\u003cbr\\/\u003e\\nerror either.\u003c\\/p\u003e\\n\\n\u003cp\u003eYou can reproduce this outside of JUnit by using the attached class\u003cbr\\/\u003e\\nDerby3561ReproStandalone.java (see code comments).\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eSolutions:\u003cbr\\/\u003e\\n-----------------\u003c\\/p\u003e\\n\\n\u003cp\u003eIf we are concerned about this, an alternative solution could have been for\u003cbr\\/\u003e\\nthe Derby management service to unregister not only MBeans registered with \u003cbr\\/\u003e\\nitself, but also any other MBeans belonging to the derby domain. However, \u003cbr\\/\u003e\\nthis seems to defeat the purpose of the system identifier and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3466\\\" title=\\\"Investigate ability to run multiple Derby systems in same JVM with different sets of MBeans.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3466\\\"\u003e\u003cdel\u003eDERBY-3466\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eBased on this, I believe adding a permission allowing the \u003cbr\\/\u003e\\nServerPropertiesTest to unregister Derby MBeans is a solution that makes \u003cbr\\/\u003e\\nsense in order to get this test to pass. Such a change is implemented by\u003cbr\\/\u003e\\nthe patch d3561_testPolicyFix.diff.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12584155_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584155_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Apr\\/08 14:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-01T14:34:53+0000\'\u003e01\\/Apr\\/08 14:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have done some more experimenting, and here is a writeup of my current  \\nunderstanding of this issue: \\n\\n As previously mentioned, I have narrowed down the test suite leading to  \\nthis failure to the following (test order is significant): \\n\\n \\n\\t derbynet.NSinSameJVMTest.suite() \\n\\t derbynet.ServerPropertiesTest.suite() \\n\\t management.ManagementMBeanTest.suite() \\n \\n\\n\\n I have attached the minimal JUnit test suite (new java testclass) required \\nto reproduce this failure as a diff file against trunk:  \\nDerby3561ReproSuite_notForCommit.diff (not for commit) \\n\\n Some points to be aware of: \\n\\n \\n\\t Starting a Derby system in a 1.5 or 1.6 VM automatically results in \\n   3 MBeans being registered. (If a security manager is installed, \\n   sufficient permissions must be granted to Derby). Stopping the Derby \\n   system means that the entire collection of Derby MBeans will be  \\n   attempted unregistered from the MBean server. \\n \\n\\n\\n \\n\\t Starting the Derby Network Server in a 1.5 or 1.6 VM automatically \\n   results in 2 extra MBeans being registered, specific to the network  \\n   server. (If a security manager is installed, sufficient permissions must \\n   be granted to Derby). Stopping the network server unregisters these \\n   MBeans. \\n \\n\\n\\n \\n\\t Starting the network server results in starting a Derby system, if such \\n   a system is not already running in the JVM. Stopping the network server \\n   using the NetworkServerControl API does  not  also shut down the Derby \\n   system (by design, I presume). \\n \\n\\n\\n \\n\\t Stopping\\/deactivating Derby management using the ManagementMBean means \\n   that all Derby MBeans that are registered with both the MBean server \\n   and Derby\'s management service will be unregistered from the MBean  \\n   server, with the exception of any ManagementMBeans (which may be used to \\n   re-register the other MBeans). \\n \\n\\n\\n\\n The sequence of events leading to the test failure is: \\n\\n 1. NSinSameJVMTest (could also be some other test which does similar things): \\n\\n \\n\\t A clientServer decorator starts a new network server and thus also \\n       a Derby system (\\\"system A\\\") using the NetworkServerControl API (same  \\n       JVM). \\n\\t Security policy used: functionTests\\/util\\/derby_tests.policy \\n\\t Includes permissions to register and unregister MBeans, etc. \\n \\n\\n\\n        ==&gt; 5 MBeans from system A are automatically registered with the  \\n           JVM\'s MBean server. The test doesn\'t know and doesn\'t care. \\n\\n \\n\\t The network server is shut down using the same API, and the same \\n       security policy. \\n \\n\\n\\n        ==&gt; 2 MBeans (VersionMBean;derbynet.jar + NetworkServerMBean) from \\n           system A are automatically unregistered.  \\n\\n \\n\\t The remaining 3 MBeans (JDBCMBean + ManagementMBean + \\n        VersionMBean;derby.jar) are not network server specific and will  \\n        therefore remain registered until the Derby system shuts down, or \\n        until some manual intervention is performed. \\n        Neither the test nor the test harness shuts down the Derby system. \\n \\n\\n\\n 2. ServerPropertiesTest \\n\\n \\n\\t Derby system A is still running... \\n \\n\\n\\n \\n\\t is wrapped in a decorator which changes the security policy from the \\n       default to a specific one: derbynet\\/ServerPropertiesTest.policy. \\n\\t No JMX permissions are included in this policy. \\n \\n\\n\\n        ==&gt; No new MBeans are registered when the test starts its own network \\n           servers\\/systems, due to lack of permissions (no exceptions are  \\n           thrown; this is by design). The test is unaware and does not care. \\n\\n \\n\\t ttestSetPortPriority() method starts and stops Network Servers, and \\n       (more importantly) it shuts down the current Derby system (twice) \\n       during the test (for some static properties to take effect). System A \\n       has now been shut down. \\n\\t Since the test does not have permissions to unregister any MBeans, \\n         the three MBeans from system A will remain registered with the \\n         MBean server. The test doesn\'t know and doesn\'t care. \\n \\n\\n\\n 3. ManagementMBeanTest \\n\\n \\n\\t testStartStopManagementFromApplication() test and method \\n       startStopManagement(ObjectName mbean) is run twice: \\n\\t once using a direct connection to the platform MBean server in the \\n         same JVM as the test. This fails. \\n\\t once using a JMX client connection to a \\\"remote\\\" MBean server \\/ \\n         network server (different JVM). This passes. \\n \\n\\n\\n \\n\\t the decorator for the failing test starts a Derby Network Server in \\n       the same JVM, to ensure that all MBeans are automatically registered. \\n       Let\'s call the Derby system being used \\\"system B\\\". \\n\\t The policy file used is functionTests\\/util\\/derby_tests.policy, \\n         including permissions to register MBeans etc. \\n \\n\\n\\n        ==&gt; 5 MBeans from system B are automatically registered with the  \\n           JVM\'s MBean server. This is what the test expects. \\n\\n \\n\\t The test registers an extra MBean: An application controlled \\n       ManagementMBean, which is used for starting and stopping Derby  \\n       management. \\n \\n\\n\\n \\n\\t The test counts the number of MBeans in the org.apache.derby domain \\n       several times. \\n \\n\\n\\n \\n\\t After stopping management, the test expects to see exactly 2 MBeans: \\n       The ManagementMBean controlled by the application\\/test, and the  \\n       ManagementMBean that was automatically registered\\/created by Derby. \\n \\n\\n\\n \\n\\t However, the 3 MBeans from system A still remain registered with the \\n       MBean server, although these MBeans are not registered with the  \\n       current Derby management service (different system, different  \\n       management service). \\n \\n\\n\\n \\n\\t The test sees 3 + 2 = 5 MBeans, but expects to see 2. The test fails. \\n \\n\\n\\n\\n User impact: \\n------------------ \\n\\n In my opinion, it is not very likely that a user will experience such a \\nscenario, as it requires modifying (restricting) or installing a security  \\npolicy at runtime and booting and shutting down Derby systems at the right  \\n(wrong) moments. \\n\\n If a user should run into this, nothing bad can happen as far as I can see. \\nThe user may observere MBeans belonging to a non-active Derby system, even  \\nif Derby\'s management service is deactivated, but that is basically it.  \\n\\n By using JConsole and a standalone test class (attached) I see that the old  \\nMBeans are available and may be accessed, and most attributes still have the  \\nsame values, although the SystemIdentifier (ManagementMBean) is empty and  \\nManagementActive will always remain false. The startManagement operation of \\nan old ManagementMBean does not change anything, but it does not report an \\nerror either. \\n\\n You can reproduce this outside of JUnit by using the attached class \\nDerby3561ReproStandalone.java (see code comments). \\n\\n\\n Solutions: \\n----------------- \\n\\n If we are concerned about this, an alternative solution could have been for \\nthe Derby management service to unregister not only MBeans registered with  \\nitself, but also any other MBeans belonging to the derby domain. However,  \\nthis seems to defeat the purpose of the system identifier and   DERBY-3466  . \\n\\n Based on this, I believe adding a permission allowing the  \\nServerPropertiesTest to unregister Derby MBeans is a solution that makes  \\nsense in order to get this test to pass. Such a change is implemented by \\nthe patch d3561_testPolicyFix.diff.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12584571\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12584571&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12584571\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12584571_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584571_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Apr\\/08 14:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-02T14:02:20+0000\'\u003e02\\/Apr\\/08 14:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch for fixing this issue by adding a permission to a test policy file is \u003cbr\\/\u003e\\nstill available for review\\/commit.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf some alternative solution is desired, please let me know.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eOne alternative would be to somehow make this specific test more robust \u003cbr\\/\u003e\\nagainst such issues (old MBeans left behind by previous tests\\/systems). \u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, it seems hard to make the test robust without also testing less,\u003cbr\\/\u003e\\ne.g. not caring so much about exactly what is left behind after the\u003cbr\\/\u003e\\n\\\"stopManagement\\\" operation is invoked.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor example, the set of MBeans left registered with the MBean server after\u003cbr\\/\u003e\\ninvoking \\\"stopManagement\\\" may be something like:\u003c\\/p\u003e\\n\\n\u003cp\u003ecurrent:  org.apache.derby:type=Management\u003cbr\\/\u003e\\nold:         org.apache.derby:system=c013800d-0119-0f15-4c02-00006a7eac81,type=Management\u003cbr\\/\u003e\\nold:         org.apache.derby:jar=derby.jar,system=c013800d-0119-0f15-4c02-00006a7eac81,type=Version\u003cbr\\/\u003e\\nold:         org.apache.derby:type=OldDerbySysManagement\u003cbr\\/\u003e\\ncurrent:  org.apache.derby:system=c013800d-0119-0f15-68af-00006a7eac81,type=Management\u003cbr\\/\u003e\\nold:         org.apache.derby:system=c013800d-0119-0f15-4c02-00006a7eac81,type=JDBC\u003c\\/p\u003e\\n\\n\u003cp\u003eThe current test expects the number of MBeans to be 2 (those above marked \u003cbr\\/\u003e\\nwith \\\"current\\\") and that these MBeans have type \\\"Management\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eI suppose we could change the  test so that it expects n - x MBeans, where\u003cbr\\/\u003e\\nn is the number of registered MBeans at test start, and x is the number of\u003cbr\\/\u003e\\nMBeans (belonging to the current Derby system) that we expect to be \u003cbr\\/\u003e\\nunregistered when \\\"stopManagement\\\" is invoked. Currently x = 4.\u003c\\/p\u003e\\n\\n\u003cp\u003eWe could also check that there is no MBean registered with the same system \u003cbr\\/\u003e\\nkey property as the current system, apart from the Derby-registered \u003cbr\\/\u003e\\nManagementMBean itself.\u003c\\/p\u003e\\n\\n\u003cp\u003eNot so elegant, I guess, but probably more robust. I can try to make a \u003cbr\\/\u003e\\npatch for this if it sounds interesting to anyone. For 10.4.1, though, I think this\u003cbr\\/\u003e\\nis overkill (the policy fix should suffice). Such a solution could also be \u003cbr\\/\u003e\\ncombined with the test policy fix.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12584571_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584571_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Apr\\/08 14:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-02T14:02:20+0000\'\u003e02\\/Apr\\/08 14:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch for fixing this issue by adding a permission to a test policy file is  \\nstill available for review\\/commit. \\n\\n If some alternative solution is desired, please let me know. \\n\\n\\n One alternative would be to somehow make this specific test more robust  \\nagainst such issues (old MBeans left behind by previous tests\\/systems).  \\n\\n However, it seems hard to make the test robust without also testing less, \\ne.g. not caring so much about exactly what is left behind after the \\n\\\"stopManagement\\\" operation is invoked. \\n\\n For example, the set of MBeans left registered with the MBean server after \\ninvoking \\\"stopManagement\\\" may be something like: \\n\\n current:  org.apache.derby:type=Management \\nold:         org.apache.derby:system=c013800d-0119-0f15-4c02-00006a7eac81,type=Management \\nold:         org.apache.derby:jar=derby.jar,system=c013800d-0119-0f15-4c02-00006a7eac81,type=Version \\nold:         org.apache.derby:type=OldDerbySysManagement \\ncurrent:  org.apache.derby:system=c013800d-0119-0f15-68af-00006a7eac81,type=Management \\nold:         org.apache.derby:system=c013800d-0119-0f15-4c02-00006a7eac81,type=JDBC \\n\\n The current test expects the number of MBeans to be 2 (those above marked  \\nwith \\\"current\\\") and that these MBeans have type \\\"Management\\\". \\n\\n I suppose we could change the  test so that it expects n - x MBeans, where \\nn is the number of registered MBeans at test start, and x is the number of \\nMBeans (belonging to the current Derby system) that we expect to be  \\nunregistered when \\\"stopManagement\\\" is invoked. Currently x = 4. \\n\\n We could also check that there is no MBean registered with the same system  \\nkey property as the current system, apart from the Derby-registered  \\nManagementMBean itself. \\n\\n Not so elegant, I guess, but probably more robust. I can try to make a  \\npatch for this if it sounds interesting to anyone. For 10.4.1, though, I think this \\nis overkill (the policy fix should suffice). Such a solution could also be  \\ncombined with the test policy fix.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12584999\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12584999&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12584999\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12584999_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584999_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 07:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T07:41:25+0000\'\u003e03\\/Apr\\/08 07:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis seems to fail pretty consistently on the 10.4 branch as well, and will produce some noise in the release candidate test results unless a fix is committed pretty soon. One suggested fix is available as a patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12584999_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584999_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 07:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T07:41:25+0000\'\u003e03\\/Apr\\/08 07:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This seems to fail pretty consistently on the 10.4 branch as well, and will produce some noise in the release candidate test results unless a fix is committed pretty soon. One suggested fix is available as a patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12585034\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12585034&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12585034\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12585034_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12585034_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 10:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T10:05:48+0000\'\u003e03\\/Apr\\/08 10:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI don\'t know enough about this issue to say if it is the best way to fix it, but I checked in the patch to reduce the noise from the test.\u003c\\/p\u003e\\n\\n\u003cp\u003eCommitted to trunk with revision 644248.\u003cbr\\/\u003e\\nCommitted to 10.4 with revision 644250.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12585034_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12585034_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 10:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T10:05:48+0000\'\u003e03\\/Apr\\/08 10:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I don\'t know enough about this issue to say if it is the best way to fix it, but I checked in the patch to reduce the noise from the test. \\n\\n Committed to trunk with revision 644248. \\nCommitted to 10.4 with revision 644250.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12585035\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12585035&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12585035\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"vemund\\\" id=\\\"commentauthor_12585035_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=vemund\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"vemund\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Vemund \\u00D8stgaard\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12585035_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 10:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T10:15:58+0000\'\u003e03\\/Apr\\/08 10:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGood job tracking down the root cause for this, John.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think your patch is a sensible way to get the tests to pass.\u003c\\/p\u003e\\n\\n\u003cp\u003eOn a side note, if tests have certain preconditions to be able to behave as intended, it might be sensible to check for these at the start of the test. So, the test that has been failing could check that there are in fact 0 MBeans registered at the start of the test, and just throw an exception if there aren\'t, since this is obviously a precondition the way the test is written.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"vemund\\\" id=\\\"commentauthor_12585035_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=vemund\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"vemund\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Vemund \\u00D8stgaard\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12585035_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 10:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T10:15:58+0000\'\u003e03\\/Apr\\/08 10:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Good job tracking down the root cause for this, John. \\n\\n I think your patch is a sensible way to get the tests to pass. \\n\\n On a side note, if tests have certain preconditions to be able to behave as intended, it might be sensible to check for these at the start of the test. So, the test that has been failing could check that there are in fact 0 MBeans registered at the start of the test, and just throw an exception if there aren\'t, since this is obviously a precondition the way the test is written. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12585040\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12585040&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12585040\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12585040_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12585040_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 10:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T10:31:07+0000\'\u003e03\\/Apr\\/08 10:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks, Knut. Further test stabilization or perhaps even product changes should be considered if this or similar issues reappear often, but I think this is sufficient for 10.4.1 at least.\u003c\\/p\u003e\\n\\n\u003cp\u003eVemund: We could certainly consider doing something about checking that preconditions are satisfied at test start. Though if preconditions are not as expected and we throw an exception then we would still get the same noise in the test results (for a while, at least). To be able to handle varying preconditions, a bit more logic would have to be added to the test code and\\/or setup (and I think that is too risky to do for 10.4 at this moment).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12585040_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12585040_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 10:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T10:31:07+0000\'\u003e03\\/Apr\\/08 10:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks, Knut. Further test stabilization or perhaps even product changes should be considered if this or similar issues reappear often, but I think this is sufficient for 10.4.1 at least. \\n\\n Vemund: We could certainly consider doing something about checking that preconditions are satisfied at test start. Though if preconditions are not as expected and we throw an exception then we would still get the same noise in the test results (for a while, at least). To be able to handle varying preconditions, a bit more logic would have to be added to the test code and\\/or setup (and I think that is too risky to do for 10.4 at this moment).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12585050\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12585050&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12585050\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12585050_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12585050_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 11:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T11:21:04+0000\'\u003e03\\/Apr\\/08 11:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMarking this issue as fixed, as a fix has been committed to both trunk and 10.4 branch. I intend to close the issue after a couple of days if the failure disappears from daily test reports - further comments\\/suggestions are still welcome, though. \u003cbr\\/\u003e\\nShould probably create a new issue for making the ManagementMBeanTest more robust.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12585050_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12585050_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 11:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T11:21:04+0000\'\u003e03\\/Apr\\/08 11:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Marking this issue as fixed, as a fix has been committed to both trunk and 10.4 branch. I intend to close the issue after a couple of days if the failure disappears from daily test reports - further comments\\/suggestions are still welcome, though.  \\nShould probably create a new issue for making the ManagementMBeanTest more robust.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12585066\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12585066&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12585066\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"vemund\\\" id=\\\"commentauthor_12585066_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=vemund\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"vemund\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Vemund \\u00D8stgaard\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12585066_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 11:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T11:55:34+0000\'\u003e03\\/Apr\\/08 11:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYes, my thoughts on preconditions was mostly in general for all tests. It makes it a bit easier to track down issues if preconditions are verified at the start of a test. It won\'t remove noise, but for a test that fails maybe just once in a while and is difficult to reproduce it would give insight into whether the problem is related to something that happened before or during the test.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think it requires some thought when deciding if a test should throw an exception if something is not as expected at the start of the test, or silently adapt to the change in behavior. It is important not to mask what potentially is a bug, but at the same time you don\'t want unnecessary noise.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"vemund\\\" id=\\\"commentauthor_12585066_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=vemund\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"vemund\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Vemund \\u00D8stgaard\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12585066_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/08 11:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-03T11:55:34+0000\'\u003e03\\/Apr\\/08 11:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yes, my thoughts on preconditions was mostly in general for all tests. It makes it a bit easier to track down issues if preconditions are verified at the start of a test. It won\'t remove noise, but for a test that fails maybe just once in a while and is difficult to reproduce it would give insight into whether the problem is related to something that happened before or during the test. \\n\\n I think it requires some thought when deciding if a test should throw an exception if something is not as expected at the start of the test, or silently adapt to the change in behavior. It is important not to mask what potentially is a bug, but at the same time you don\'t want unnecessary noise.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12625708\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12625708&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12625708\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12625708_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12625708_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/08 12:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-08-26T12:01:55+0000\'\u003e26\\/Aug\\/08 12:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReopening to fix this issue also when running with classes directory in classpath. This issue was recently seen with such a configuration in the 10.4 branch after fixing \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3836\\\" title=\\\"On 10.4 branch JMX tests fail with security exceptions when run against classes \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3836\\\"\u003e\u003cdel\u003eDERBY-3836\u003c\\/del\u003e\u003c\\/a\u003e.\u003cbr\\/\u003e\\nThis issue is no longer seen when running with jars in the classpath.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12625708_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12625708_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/08 12:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-08-26T12:01:55+0000\'\u003e26\\/Aug\\/08 12:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Reopening to fix this issue also when running with classes directory in classpath. This issue was recently seen with such a configuration in the 10.4 branch after fixing   DERBY-3836  . \\nThis issue is no longer seen when running with jars in the classpath.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12625733\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12625733&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12625733\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12625733_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12625733_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/08 13:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-08-26T13:43:03+0000\'\u003e26\\/Aug\\/08 13:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached patch d3561_classesFix.diff which is supposed to fix this issue also when running with classes directory instead of jars in the classpath. The fix is simply to add the same \\\"unregister\\\" permission to the \\\"classes\\\" domain in ServerPropertiesTest.policy as was added to the \\\"derby.jar\\\" domain in revision 644248.\u003c\\/p\u003e\\n\\n\u003cp\u003esuites.All passed cleanly in 10.4 branch (classes and jars), running against trunk now. I intend to commit to trunk and 10.4 shortly, barring any failing test runs.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12625733_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12625733_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Aug\\/08 13:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-08-26T13:43:03+0000\'\u003e26\\/Aug\\/08 13:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached patch d3561_classesFix.diff which is supposed to fix this issue also when running with classes directory instead of jars in the classpath. The fix is simply to add the same \\\"unregister\\\" permission to the \\\"classes\\\" domain in ServerPropertiesTest.policy as was added to the \\\"derby.jar\\\" domain in revision 644248. \\n\\n suites.All passed cleanly in 10.4 branch (classes and jars), running against trunk now. I intend to commit to trunk and 10.4 shortly, barring any failing test runs.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12626094\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12626094&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12626094\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12626094_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12626094_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Aug\\/08 12:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-08-27T12:45:37+0000\'\u003e27\\/Aug\\/08 12:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003esuites.All tests passed successfully with classes and jars on both trunk and 10.4 (JDK 1.5, Solaris 10 x86).\u003c\\/p\u003e\\n\\n\u003cp\u003eCommitted d3561_classesFix.diff as revisions 689460 (trunk) and 689462 (10.4 branch).\u003cbr\\/\u003e\\nHopefully this issue is fully resolved this time.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12626094_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12626094_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Aug\\/08 12:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-08-27T12:45:37+0000\'\u003e27\\/Aug\\/08 12:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    suites.All tests passed successfully with classes and jars on both trunk and 10.4 (JDK 1.5, Solaris 10 x86). \\n\\n Committed d3561_classesFix.diff as revisions 689460 (trunk) and 689462 (10.4 branch). \\nHopefully this issue is fully resolved this time.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12628253\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12628253&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12628253\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12628253_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12628253_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Sep\\/08 06:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-09-04T06:04:51+0000\'\u003e04\\/Sep\\/08 06:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"John H. Embretsen - 04\\/Sep\\/08 06:13\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAdjusted \\\"Fixed in\\\" version. Latest fix for classes policy did not make it into the 10.4.2.0 RC (revision 689064).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12628253_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12628253_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Sep\\/08 06:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-09-04T06:04:51+0000\'\u003e04\\/Sep\\/08 06:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"John H. Embretsen - 04\\/Sep\\/08 06:13\\\"\u003eedited\u003c\\/span\u003e                   Adjusted \\\"Fixed in\\\" version. Latest fix for classes policy did not make it into the 10.4.2.0 RC (revision 689064).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12637077\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12637077&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12637077\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"olesolberg\\\" id=\\\"commentauthor_12637077_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=olesolberg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"olesolberg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ole Solberg\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12637077_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Oct\\/08 11:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-10-06T11:10:13+0000\'\u003e06\\/Oct\\/08 11:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnother variant?:  \u003cbr\\/\u003e\\ntestStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:&lt;4&gt; but was:&lt;6&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/dbtg.thresher.com\\/derby\\/test\\/10.4Branch\\/jvm1.6\\/testing\\/testlog\\/lin\\/701824-suitesAll_diff.txt\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/dbtg.thresher.com\\/derby\\/test\\/10.4Branch\\/jvm1.6\\/testing\\/testlog\\/lin\\/701824-suitesAll_diff.txt\u003c\\/a\u003e\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"olesolberg\\\" id=\\\"commentauthor_12637077_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=olesolberg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"olesolberg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ole Solberg\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12637077_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Oct\\/08 11:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-10-06T11:10:13+0000\'\u003e06\\/Oct\\/08 11:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Another variant?:   \\ntestStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:&lt;4&gt; but was:&lt;6&gt; \\n\\n  http:\\/\\/dbtg.thresher.com\\/derby\\/test\\/10.4Branch\\/jvm1.6\\/testing\\/testlog\\/lin\\/701824-suitesAll_diff.txt  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12740759\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3561?focusedCommentId=12740759&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12740759\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"espinha\\\" id=\\\"commentauthor_12740759_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=espinha\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"espinha\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Tiago R. Espinha\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740759_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 21:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T21:47:59+0000\'\u003e07\\/Aug\\/09 21:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have just seen this issue on the 10.5 branch. Rick seems to have hit it as well as it can be seen on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4344\\\" title=\\\"Track changes needed for 10.5.3 release\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4344\\\"\u003e\u003cdel\u003eDERBY-4344\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eShould we reopen this issue?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"espinha\\\" id=\\\"commentauthor_12740759_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=espinha\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"espinha\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Tiago R. Espinha\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12740759_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/09 21:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-07T21:47:59+0000\'\u003e07\\/Aug\\/09 21:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have just seen this issue on the 10.5 branch. Rick seems to have hit it as well as it can be seen on   DERBY-4344  . \\n\\n Should we reopen this issue?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520239394754"> 
    <input type="hidden" title="jira.request.server.time" value="212"> 
    <input type="hidden" title="jira.request.id" value="523x94390202x1"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="1"> 
    <input type="hidden" title="db.reads.time.in.ms" value="42"> 
    <input type="hidden" title="db.conns.time.in.ms" value="50"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 523x94390202x1
	          REQUEST TIMESTAMP : [05/Mar/2018:08:43:14 +0000]
	               REQUEST TIME : 0.2120
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 1

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=30, elapsedTotal=42703810, elapsedMin=615399, elapsedMax=13776367, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=34, elapsedTotal=50018760, elapsedMin=644716, elapsedMax=13807129, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>