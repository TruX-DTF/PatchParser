<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|1668ec246315c0f7197e4147d96493de2d79bdf7|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"36560f597d45bb\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-4053"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-4053] Network Server's failure to rollback local transactions on shutdown can cause  hang on startup with message java.net.BindException: Address already in use: NET_Bind in derby.log  - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-4053] Network Server's failure to rollback local transactions on shutdown can cause  hang on startup with message java.net.BindException: Address already in use: NET_Bind in derby.log  - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loadingâ€¦
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4053">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-4053" href="/jira/browse/DERBY-4053" id="key-val" rel="12414620">DERBY-4053</a></li>
                </ol>
                <h1 id="summary-val">Network Server's failure to rollback local transactions on shutdown can cause hang on startup with message java.net.BindException: Address already in use: NET_Bind in derby.log </h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4053"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-4053/DERBY-4053.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-4053/DERBY-4053.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-4053/DERBY-4053.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-4053/DERBY-4053.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.5.1.1 build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09">10.5.1.1</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.2.1" title="10.4.2.1 Head of 10.4 branch">10.4.2.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.5.2.0" title="10.5.2.0 10.5.2 Release July 30 2009 (794445) Now deprecated">10.5.2.0</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.6.1.0" title="10.6.1.0 Feature release">10.6.1.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+%22Network+Server%22" title="Network Server ">Network Server</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Test" title="Test ">Test</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12414620-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310050" class="item"> 
                     <div class="wrap"> 
                      <strong title="Urgency" class="name">Urgency:</strong> 
                      <div id="customfield_12310050-val" class="value type-select" data-fieldtype="select" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        Blocker 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Regression Test Failure</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Running suites.All with IBM 1.5 on 10.5.0.0 alpha - (743198) I got a hang in the test run. The last test to run successfully was xtestNestedSavepoints, but I am not sure exactly what test caused the hang. I took a thread dump which I will attach, which showed network server up and running but no ClientThread and a ping attempt blocked.</p> 
                  <p>This hang is very similar to the hang that was seen after the fix attempts for <a href="https://issues.apache.org/jira/browse/DERBY-1465" title="NetworkServerControl.start() should throw an exception and not just  print  exceptions  if the server fails to start" class="issue-link" data-issue-key="DERBY-1465"><del>DERBY-1465</del></a> but that change was backed out so it is not related to that change. It could be that the change for <a href="https://issues.apache.org/jira/browse/DERBY-1465" title="NetworkServerControl.start() should throw an exception and not just  print  exceptions  if the server fails to start" class="issue-link" data-issue-key="DERBY-1465"><del>DERBY-1465</del></a> just made this highly intermittent problem more likely.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-4053?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-4053?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-4053?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-4053?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12400050" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12400050/derby.log" draggable="true" data-downloadurl="text/plain:derby.log:https://issues.apache.org/jira/secure/attachment/12400050/derby.log"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12400050/derby.log" title="Latest  11/Feb/09 22:58 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby.log:https://issues.apache.org/jira/secure/attachment/12400050/derby.log">derby.log</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-02-11T22:58:26.585Z">11/Feb/09 22:58</time>
                   </dd>
                   <dd class="attachment-size">
                    83 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12413462" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12413462/derby-4053_diag_diff.txt" draggable="true" data-downloadurl="text/plain:derby-4053_diag_diff.txt:https://issues.apache.org/jira/secure/attachment/12413462/derby-4053_diag_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12413462/derby-4053_diag_diff.txt" title="Latest  14/Jul/09 18:54 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-4053_diag_diff.txt:https://issues.apache.org/jira/secure/attachment/12413462/derby-4053_diag_diff.txt">derby-4053_diag_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-07-14T18:54:03.916Z">14/Jul/09 18:54</time>
                   </dd>
                   <dd class="attachment-size">
                    0.8 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12413029" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12413029/DERBY4053_patch1_diff_July092009.txt" draggable="true" data-downloadurl="text/plain:DERBY4053_patch1_diff_July092009.txt:https://issues.apache.org/jira/secure/attachment/12413029/DERBY4053_patch1_diff_July092009.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12413029/DERBY4053_patch1_diff_July092009.txt" title="Latest  09/Jul/09 15:35 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4053_patch1_diff_July092009.txt:https://issues.apache.org/jira/secure/attachment/12413029/DERBY4053_patch1_diff_July092009.txt">DERBY4053_patch1_diff_July092009.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-07-09T15:35:02.193Z">09/Jul/09 15:35</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12413141" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12413141/DERBY4053_patch2_diff_July102009.txt" draggable="true" data-downloadurl="text/plain:DERBY4053_patch2_diff_July102009.txt:https://issues.apache.org/jira/secure/attachment/12413141/DERBY4053_patch2_diff_July102009.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12413141/DERBY4053_patch2_diff_July102009.txt" title="Latest  10/Jul/09 17:23 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4053_patch2_diff_July102009.txt:https://issues.apache.org/jira/secure/attachment/12413141/DERBY4053_patch2_diff_July102009.txt">DERBY4053_patch2_diff_July102009.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-07-10T17:23:13.257Z">10/Jul/09 17:23</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12413142" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12413142/DERBY4053_patch2_stat_July102009.txt" draggable="true" data-downloadurl="text/plain:DERBY4053_patch2_stat_July102009.txt:https://issues.apache.org/jira/secure/attachment/12413142/DERBY4053_patch2_stat_July102009.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12413142/DERBY4053_patch2_stat_July102009.txt" title="Latest  10/Jul/09 17:23 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4053_patch2_stat_July102009.txt:https://issues.apache.org/jira/secure/attachment/12413142/DERBY4053_patch2_stat_July102009.txt">DERBY4053_patch2_stat_July102009.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-07-10T17:23:13.284Z">10/Jul/09 17:23</time>
                   </dd>
                   <dd class="attachment-size">
                    0.6 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12413161" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12413161/DERBY4053_patch3_diff_July102009.txt" draggable="true" data-downloadurl="text/plain:DERBY4053_patch3_diff_July102009.txt:https://issues.apache.org/jira/secure/attachment/12413161/DERBY4053_patch3_diff_July102009.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12413161/DERBY4053_patch3_diff_July102009.txt" title="Latest  10/Jul/09 21:52 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4053_patch3_diff_July102009.txt:https://issues.apache.org/jira/secure/attachment/12413161/DERBY4053_patch3_diff_July102009.txt">DERBY4053_patch3_diff_July102009.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-07-10T21:52:03.189Z">10/Jul/09 21:52</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12413162" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12413162/DERBY4053_patch3_stat_July102009.txt" draggable="true" data-downloadurl="text/plain:DERBY4053_patch3_stat_July102009.txt:https://issues.apache.org/jira/secure/attachment/12413162/DERBY4053_patch3_stat_July102009.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12413162/DERBY4053_patch3_stat_July102009.txt" title="Latest  10/Jul/09 21:52 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4053_patch3_stat_July102009.txt:https://issues.apache.org/jira/secure/attachment/12413162/DERBY4053_patch3_stat_July102009.txt">DERBY4053_patch3_stat_July102009.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-07-10T21:52:03.214Z">10/Jul/09 21:52</time>
                   </dd>
                   <dd class="attachment-size">
                    0.6 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12405202" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12405202/derby-4053_repro_dont_commit_diff.txt" draggable="true" data-downloadurl="text/plain:derby-4053_repro_dont_commit_diff.txt:https://issues.apache.org/jira/secure/attachment/12405202/derby-4053_repro_dont_commit_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12405202/derby-4053_repro_dont_commit_diff.txt" title="Latest  10/Apr/09 21:55 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-4053_repro_dont_commit_diff.txt:https://issues.apache.org/jira/secure/attachment/12405202/derby-4053_repro_dont_commit_diff.txt">derby-4053_repro_dont_commit_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-04-10T21:55:45.972Z">10/Apr/09 21:55</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12400051" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12400051/javacore.20090211.123031.4000.0001.txt" draggable="true" data-downloadurl="text/plain:javacore.20090211.123031.4000.0001.txt:https://issues.apache.org/jira/secure/attachment/12400051/javacore.20090211.123031.4000.0001.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12400051/javacore.20090211.123031.4000.0001.txt" title="Latest  11/Feb/09 22:58 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:javacore.20090211.123031.4000.0001.txt:https://issues.apache.org/jira/secure/attachment/12400051/javacore.20090211.123031.4000.0001.txt">javacore.20090211.123031.4000.0001.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-02-11T22:58:26.634Z">11/Feb/09 22:58</time>
                   </dd>
                   <dd class="attachment-size">
                    1.25 MB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12405948" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12405948/javacore-20090420-1735.txt" draggable="true" data-downloadurl="text/plain:javacore-20090420-1735.txt:https://issues.apache.org/jira/secure/attachment/12405948/javacore-20090420-1735.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12405948/javacore-20090420-1735.txt" title="Latest  20/Apr/09 17:35 - Suran Jayathilaka" draggable="true" data-downloadurl="text/plain:javacore-20090420-1735.txt:https://issues.apache.org/jira/secure/attachment/12405948/javacore-20090420-1735.txt">javacore-20090420-1735.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-04-20T17:35:58.025Z">20/Apr/09 17:35</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Suran Jayathilaka
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12413059" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12413059/mamtaDerby4053.java" draggable="true" data-downloadurl="text/plain:mamtaDerby4053.java:https://issues.apache.org/jira/secure/attachment/12413059/mamtaDerby4053.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12413059/mamtaDerby4053.java" title="Latest  09/Jul/09 21:59 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:mamtaDerby4053.java:https://issues.apache.org/jira/secure/attachment/12413059/mamtaDerby4053.java">mamtaDerby4053.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-07-09T21:59:19.657Z">09/Jul/09 21:59</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12400052" data-issue-id="12414620" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12400052/suites.All.out" draggable="true" data-downloadurl="application/octet-stream:suites.All.out:https://issues.apache.org/jira/secure/attachment/12400052/suites.All.out"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12400052/suites.All.out" title="Latest  11/Feb/09 22:58 - Kathey Marsden" draggable="true" data-downloadurl="application/octet-stream:suites.All.out:https://issues.apache.org/jira/secure/attachment/12400052/suites.All.out">suites.All.out</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-02-11T22:58:26.638Z">11/Feb/09 22:58</time>
                   </dd>
                   <dd class="attachment-size">
                    389 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is blocked by">
                   is blocked by
                  </dt> 
                  <dd id="internal-12422507_10032"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-4155: jdbcapi/XATest.java  doesn't seem to be running anywhere"> <a href="/jira/browse/DERBY-4155" data-issue-key="DERBY-4155" class="issue-link link-title resolution">DERBY-4155</a> <span class="link-summary">jdbcapi/XATest.java doesn't seem to be running anywhere</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is duplicated by">
                   is duplicated by
                  </dt> 
                  <dd id="internal-12423504_12310000"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-4180: SQLTransactionRollbackException in XATransactionTest when testing client/server compatibility"> <a href="/jira/browse/DERBY-4180" data-issue-key="DERBY-4180" class="issue-link link-title resolution">DERBY-4180</a> <span class="link-summary">SQLTransactionRollbackException in XATransactionTest when testing client/server compatibility</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12386268_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3319: Logical connections do not check if a transaction is active on close"> <a href="/jira/browse/DERBY-3319" data-issue-key="DERBY-3319" class="issue-link link-title resolution">DERBY-3319</a> <span class="link-summary">Logical connections do not check if a transaction is active on close</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12430250_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-4304: Network Server shutdown should handle exceptions and finish the server shutdown completely"> <a href="/jira/browse/DERBY-4304" data-issue-key="DERBY-4304" class="issue-link link-title resolution">DERBY-4304</a> <span class="link-summary">Network Server shutdown should handle exceptions and finish the server shutdown completely</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_mamtas" rel="mamtas" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mamta A. Satoor&quot;,&quot;emailAddress&quot;:&quot;msatoor@gmail.com&quot;,&quot;username&quot;:&quot;mamtas&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mamtas"></span></span> Mamta A. Satoor </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_kmarsden" rel="kmarsden" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Kathey Marsden&quot;,&quot;emailAddress&quot;:&quot;kmarsdenderby@sbcglobal.net&quot;,&quot;username&quot;:&quot;kmarsden&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="kmarsden"></span></span> Kathey Marsden </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="11/Feb/09 22:28"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2009-02-11T22:28:19+0000">11/Feb/09 22:28</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="31/Aug/09 21:31"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2009-08-31T21:31:33+0000">31/Aug/09 21:31</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="15/Jul/09 17:36"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2009-07-15T17:36:22+0000">15/Jul/09 17:36</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4053?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-4053?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12672818\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12672818&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12672818\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12672818_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12672818_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/09 22:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-02-11T22:58:26+0000\'\u003e11\\/Feb\\/09 22:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached are the derby.log, java core dump at the time of the hang, and the System.out of the run.  This was run on a single CPU machine. Windows XP\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12672818_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12672818_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/09 22:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-02-11T22:58:26+0000\'\u003e11\\/Feb\\/09 22:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached are the derby.log, java core dump at the time of the hang, and the System.out of the run.  This was run on a single CPU machine. Windows XP \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12676372\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12676372&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12676372\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12676372_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12676372_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Feb\\/09 19:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-02-24T19:26:54+0000\'\u003e24\\/Feb\\/09 19:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve seen this also with 10.4 and ibm 1.5, on a machine with 2 cpu, with \'hyperthreading\' switched on. \u003cbr\\/\u003e\\nI\'ll experiment and see if it changes things if I switch off the hyperthreading.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12676372_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12676372_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Feb\\/09 19:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-02-24T19:26:54+0000\'\u003e24\\/Feb\\/09 19:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve seen this also with 10.4 and ibm 1.5, on a machine with 2 cpu, with \'hyperthreading\' switched on.  \\nI\'ll experiment and see if it changes things if I switch off the hyperthreading.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12682759\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12682759&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12682759\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12682759_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12682759_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Mar\\/09 18:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-03-17T18:59:55+0000\'\u003e17\\/Mar\\/09 18:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe frequency of the hangs on the machine where I run 10.4 tests have diminished a lot after I had hyperthreading switched off. With it switched on, it was practically every run, and not in the same test everytime.\u003cbr\\/\u003e\\nHowever, I did see one more recently.\u003cbr\\/\u003e\\nIn addition to the Net-Bind messages in system\\/derby.log, I also got this in the test output, not sure if that was an environment quirk or if it\'s related to the problem:\u003cbr\\/\u003e\\ntestAllDataSources used 313 ms java.net.SocketException: Connection reset\u003cbr\\/\u003e\\n\\tat java.net.SocketInputStream.read(SocketInputStream.java:197)\u003cbr\\/\u003e\\n\\tat java.net.SocketInputStream.read(SocketInputStream.java:116)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.fillReplyBuffer(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.readResult(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.pingWithNoOpen(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.ping(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.drda.NetworkServerControl.ping(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerUp(NetworkServerTestSetup.java:546)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerStart(NetworkServerTestSetup.java:615)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.NetworkServerTestSetup.setUp(NetworkServerTestSetup.java:191)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:18)\u003cbr\\/\u003e\\n\\tat junit.framework.TestResult.runProtected(TestResult.java:124)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.framework.TestResult.runProtected(TestResult.java:124)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.run(TestSuite.java:203)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.framework.TestResult.runProtected(TestResult.java:124)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.run(TestSuite.java:203)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.run(TestSuite.java:203)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\u003cbr\\/\u003e\\n\\tat junit.framework.TestSuite.run(TestSuite.java:203)\u003cbr\\/\u003e\\n\\tat junit.textui.TestRunner.doRun(TestRunner.java:116)\u003cbr\\/\u003e\\n\\tat junit.textui.TestRunner.start(TestRunner.java:172)\u003cbr\\/\u003e\\n\\tat junit.textui.TestRunner.main(TestRunner.java:138)\u003cbr\\/\u003e\\nF.\u003cbr\\/\u003e\\n----------------------\u003cbr\\/\u003e\\nAfter this, there were a couple more fixtures that apparently went ok:\u003cbr\\/\u003e\\n----------------------\u003cbr\\/\u003e\\nconnectionJdbc20 used 2109 ms .\u003cbr\\/\u003e\\nresultsetJdbc20 used 781 ms .\u003cbr\\/\u003e\\nmaxfieldsize used 67593 ms .\u003cbr\\/\u003e\\nSetQueryTimeoutTest used 43750 ms .\u003cbr\\/\u003e\\nrsgetXXXcolumnNames used 125 ms .\u003cbr\\/\u003e\\nsavepointJdbc30_JSR169 used 6594 ms .\u003cbr\\/\u003e\\ntestRelative used 94 ms .\u003cbr\\/\u003e\\nsavepointJdbc30_XA used 6516 ms \u003cbr\\/\u003e\\n----------------------\u003cbr\\/\u003e\\n      And after that, nothing.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12682759_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12682759_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Mar\\/09 18:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-03-17T18:59:55+0000\'\u003e17\\/Mar\\/09 18:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The frequency of the hangs on the machine where I run 10.4 tests have diminished a lot after I had hyperthreading switched off. With it switched on, it was practically every run, and not in the same test everytime. \\nHowever, I did see one more recently. \\nIn addition to the Net-Bind messages in system\\/derby.log, I also got this in the test output, not sure if that was an environment quirk or if it\'s related to the problem: \\ntestAllDataSources used 313 ms java.net.SocketException: Connection reset \\n\\tat java.net.SocketInputStream.read(SocketInputStream.java:197) \\n\\tat java.net.SocketInputStream.read(SocketInputStream.java:116) \\n\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.fillReplyBuffer(Unknown Source) \\n\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.readResult(Unknown Source) \\n\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.pingWithNoOpen(Unknown Source) \\n\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.ping(Unknown Source) \\n\\tat org.apache.derby.drda.NetworkServerControl.ping(Unknown Source) \\n\\tat org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerUp(NetworkServerTestSetup.java:546) \\n\\tat org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerStart(NetworkServerTestSetup.java:615) \\n\\tat org.apache.derbyTesting.junit.NetworkServerTestSetup.setUp(NetworkServerTestSetup.java:191) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:18) \\n\\tat junit.framework.TestResult.runProtected(TestResult.java:124) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.framework.TestResult.runProtected(TestResult.java:124) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:208) \\n\\tat junit.framework.TestSuite.run(TestSuite.java:203) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.framework.TestResult.runProtected(TestResult.java:124) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:208) \\n\\tat junit.framework.TestSuite.run(TestSuite.java:203) \\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:208) \\n\\tat junit.framework.TestSuite.run(TestSuite.java:203) \\n\\tat junit.framework.TestSuite.runTest(TestSuite.java:208) \\n\\tat junit.framework.TestSuite.run(TestSuite.java:203) \\n\\tat junit.textui.TestRunner.doRun(TestRunner.java:116) \\n\\tat junit.textui.TestRunner.start(TestRunner.java:172) \\n\\tat junit.textui.TestRunner.main(TestRunner.java:138) \\nF. \\n---------------------- \\nAfter this, there were a couple more fixtures that apparently went ok: \\n---------------------- \\nconnectionJdbc20 used 2109 ms . \\nresultsetJdbc20 used 781 ms . \\nmaxfieldsize used 67593 ms . \\nSetQueryTimeoutTest used 43750 ms . \\nrsgetXXXcolumnNames used 125 ms . \\nsavepointJdbc30_JSR169 used 6594 ms . \\ntestRelative used 94 ms . \\nsavepointJdbc30_XA used 6516 ms  \\n---------------------- \\n      And after that, nothing.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12697647\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12697647&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12697647\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12697647_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12697647_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Apr\\/09 21:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-09T21:03:12+0000\'\u003e09\\/Apr\\/09 21:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI hit this on the head of trunk  revision 758826 with some minor changes that shouldn\'t affect this.\u003c\\/p\u003e\\n\\n\u003cp\u003ejava version \\\"1.6.0\\\"\u003cbr\\/\u003e\\nJava(TM) SE Runtime Environment (build pwi3260sr3-20081106_07(SR3))\u003cbr\\/\u003e\\nIBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20081105_25433 (JIT enabled, AOT enabled)\u003cbr\\/\u003e\\nJ9VM - 20081105_025433_lHdSMr\u003cbr\\/\u003e\\nJIT  - r9_20081031_1330\u003cbr\\/\u003e\\nGC   - 20081027_AB)\u003cbr\\/\u003e\\nJCL  - 20081106_01\u003c\\/p\u003e\\n\\n\u003cp\u003eThe hang happened  after testDerby3799 used 0 ms\u003c\\/p\u003e\\n\\n\u003cp\u003eAttempts to bring down network server to get my run going again also failed and I had to kill the run and start over.\u003c\\/p\u003e\\n\\n\u003cp\u003elast entry in the log had the tell tale error:\u003cbr\\/\u003e\\n2009-04-09 20:34:58.156 GMT : Could not listen on port 1527 on host 127.0.0.1:\u003cbr\\/\u003e\\n java.net.BindException: Address already in use: JVM_Bind\u003c\\/p\u003e\\n\\n\u003cp\u003eAn exception was thrown during network server startup. DRDA_ListenPort.S:Could not listen on port 1527 on host 127.0.0.1:\u003cbr\\/\u003e\\n java.net.BindException: Address already in use: JVM_Bind\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.lang.reflect.InvocationTargetException\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat sun.reflect.GeneratedMethodAccessor1950.invoke(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.lang.reflect.Method.invoke(Method.java:599)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.jdbc.DRDAServerStarter.run(DRDAServerStarter.java:236)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.lang.Thread.run(Thread.java:735)\u003c\\/p\u003e\\n\\n\u003cp\u003eCaused by: java.lang.Exception: DRDA_ListenPort.S:Could not listen on port 1527 on host 127.0.0.1:\u003cbr\\/\u003e\\n java.net.BindException: Address already in use: JVM_Bind\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessageWork(NetworkServerControlImpl.java:3179)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessage(NetworkServerControlImpl.java:1861)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.drda.NetworkServerControlImpl.blockingStart(NetworkServerControlImpl.java:731)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t... 5 more\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12697647_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12697647_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Apr\\/09 21:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-09T21:03:12+0000\'\u003e09\\/Apr\\/09 21:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I hit this on the head of trunk  revision 758826 with some minor changes that shouldn\'t affect this. \\n\\n java version \\\"1.6.0\\\" \\nJava(TM) SE Runtime Environment (build pwi3260sr3-20081106_07(SR3)) \\nIBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20081105_25433 (JIT enabled, AOT enabled) \\nJ9VM - 20081105_025433_lHdSMr \\nJIT  - r9_20081031_1330 \\nGC   - 20081027_AB) \\nJCL  - 20081106_01 \\n\\n The hang happened  after testDerby3799 used 0 ms \\n\\n Attempts to bring down network server to get my run going again also failed and I had to kill the run and start over. \\n\\n last entry in the log had the tell tale error: \\n2009-04-09 20:34:58.156 GMT : Could not listen on port 1527 on host 127.0.0.1: \\n java.net.BindException: Address already in use: JVM_Bind \\n\\n An exception was thrown during network server startup. DRDA_ListenPort.S:Could not listen on port 1527 on host 127.0.0.1: \\n java.net.BindException: Address already in use: JVM_Bind \\n\\n java.lang.reflect.InvocationTargetException \\n\\n \\tat sun.reflect.GeneratedMethodAccessor1950.invoke(Unknown Source) \\n\\n \\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) \\n\\n \\tat java.lang.reflect.Method.invoke(Method.java:599) \\n\\n \\tat org.apache.derby.iapi.jdbc.DRDAServerStarter.run(DRDAServerStarter.java:236) \\n\\n \\tat java.lang.Thread.run(Thread.java:735) \\n\\n Caused by: java.lang.Exception: DRDA_ListenPort.S:Could not listen on port 1527 on host 127.0.0.1: \\n java.net.BindException: Address already in use: JVM_Bind \\n\\n \\tat org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessageWork(NetworkServerControlImpl.java:3179) \\n\\n \\tat org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessage(NetworkServerControlImpl.java:1861) \\n\\n \\tat org.apache.derby.impl.drda.NetworkServerControlImpl.blockingStart(NetworkServerControlImpl.java:731) \\n\\n \\t... 5 more \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12697995\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12697995&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12697995\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12697995_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12697995_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Apr\\/09 21:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-10T21:55:45+0000\'\u003e10\\/Apr\\/09 21:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Kathey Marsden - 10\\/Apr\\/09 22:14\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI stumbled across a reliable reproduction for this issue when  trying to enable XATest (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4155\\\" title=\\\"jdbcapi\\/XATest.java  doesn&#39;t seem to be running anywhere\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4155\\\"\u003e\u003cdel\u003eDERBY-4155\u003c\\/del\u003e\u003c\\/a\u003e).  To reproduce apply the patch derby-4053_repro_dont_commit_diff.txt and run jdbcapi._ShortSuite.\u003c\\/p\u003e\\n\\n\u003cp\u003e_ShortSuite runs only XATest,DataSourceReferenceTest and J2EEDataSourceTest\u003cbr\\/\u003e\\nThe run gets an invalid reply failure on  testDataSourceReference during a ping and then the hang after testDerby3799.\u003c\\/p\u003e\\n\\n\u003cp\u003eI ran with \u003cbr\\/\u003e\\njava version \\\"1.6.0\\\"\u003cbr\\/\u003e\\nJava(TM) SE Runtime Environment (build pwi3260sr3-20081106_07(SR3))\u003cbr\\/\u003e\\nIBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20081105_25433 (JIT enabled, AOT enabled)\u003cbr\\/\u003e\\nJ9VM - 20081105_025433_lHdSMr\u003cbr\\/\u003e\\nJIT  - r9_20081031_1330\u003cbr\\/\u003e\\nGC   - 20081027_AB)\u003cbr\\/\u003e\\nJCL  - 20081106_01\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12697995_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12697995_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Apr\\/09 21:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-10T21:55:45+0000\'\u003e10\\/Apr\\/09 21:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Kathey Marsden - 10\\/Apr\\/09 22:14\\\"\u003eedited\u003c\\/span\u003e                   I stumbled across a reliable reproduction for this issue when  trying to enable XATest (  DERBY-4155  ).  To reproduce apply the patch derby-4053_repro_dont_commit_diff.txt and run jdbcapi._ShortSuite. \\n\\n _ShortSuite runs only XATest,DataSourceReferenceTest and J2EEDataSourceTest \\nThe run gets an invalid reply failure on  testDataSourceReference during a ping and then the hang after testDerby3799. \\n\\n I ran with  \\njava version \\\"1.6.0\\\" \\nJava(TM) SE Runtime Environment (build pwi3260sr3-20081106_07(SR3)) \\nIBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20081105_25433 (JIT enabled, AOT enabled) \\nJ9VM - 20081105_025433_lHdSMr \\nJIT  - r9_20081031_1330 \\nGC   - 20081027_AB) \\nJCL  - 20081106_01 \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12697998\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12697998&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12697998\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12697998_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12697998_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Apr\\/09 22:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-10T22:04:20+0000\'\u003e10\\/Apr\\/09 22:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt doesn\'t seem to reproduce with the sun jvm\u003cbr\\/\u003e\\njava version \\\"1.6.0_01\\\"\u003cbr\\/\u003e\\nJava(TM) SE Runtime Environment (build 1.6.0_01-b06)\u003cbr\\/\u003e\\nJava HotSpot(TM) Client VM (build 1.6.0_01-b06, mixed mode)\u003c\\/p\u003e\\n\\n\u003cp\u003eI get neither the Invalid Reply, nor the hang.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12697998_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12697998_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Apr\\/09 22:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-10T22:04:20+0000\'\u003e10\\/Apr\\/09 22:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It doesn\'t seem to reproduce with the sun jvm \\njava version \\\"1.6.0_01\\\" \\nJava(TM) SE Runtime Environment (build 1.6.0_01-b06) \\nJava HotSpot(TM) Client VM (build 1.6.0_01-b06, mixed mode) \\n\\n I get neither the Invalid Reply, nor the hang.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12698543\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12698543&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12698543\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12698543_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12698543_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Apr\\/09 20:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-13T20:34:52+0000\'\u003e13\\/Apr\\/09 20:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI tried that repro with the same 1.6 sr3 on my windows machine, sane classes, and sane jars, but it didn\'t  reproduce for me...\u003cbr\\/\u003e\\nclasspath (in case it matters) was: derby.jar;derbytools.jar;derbynet.jar;derbyclient.jar;derbyrun.jar;derbyTesting.jar;junit.jar\u003cbr\\/\u003e\\n(with appropriate paths to the various jars).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12698543_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12698543_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Apr\\/09 20:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-13T20:34:52+0000\'\u003e13\\/Apr\\/09 20:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I tried that repro with the same 1.6 sr3 on my windows machine, sane classes, and sane jars, but it didn\'t  reproduce for me... \\nclasspath (in case it matters) was: derby.jar;derbytools.jar;derbynet.jar;derbyclient.jar;derbyrun.jar;derbyTesting.jar;junit.jar \\n(with appropriate paths to the various jars).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12700873\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12700873&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12700873\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"suranjay\\\" id=\\\"commentauthor_12700873_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=suranjay\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"suranjay\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suran Jayathilaka\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12700873_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/09 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-20T17:32:57+0000\'\u003e20\\/Apr\\/09 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhen testing client\\/server compatibility with 10.5.1.1.-rc2 and 10.4.2.0 I encountered what seems to be a reproduction of this issue. \u003cbr\\/\u003e\\nEnvironment: AMD Phenom II Quad Core CPU, 4GB Ram, Vista 64\u003c\\/p\u003e\\n\\n\u003cp\u003ejava version \\\"1.6.0_10\\\"\u003cbr\\/\u003e\\nJava(TM) SE Runtime Environment (build 1.6.0_10-b33)\u003cbr\\/\u003e\\nJava HotSpot(TM) Client VM (build 11.0-b15, mixed mode, sharing)\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eClient - 10.4.2.0. Jars\u003cbr\\/\u003e\\n-------------------\u003cbr\\/\u003e\\nderbyTesting.jar\u003cbr\\/\u003e\\nderbyClient.jar\u003c\\/p\u003e\\n\\n\u003cp\u003eServer - 10.5.1.1. Jars\u003cbr\\/\u003e\\n-------------------\u003cbr\\/\u003e\\nderby.jar\u003cbr\\/\u003e\\nderbynet.jar\u003cbr\\/\u003e\\nderbytools.jar\u003cbr\\/\u003e\\nderbyLocale*.jar\u003cbr\\/\u003e\\nderbyrun.jar\u003c\\/p\u003e\\n\\n\u003cp\u003eXA40Test.testCallableStatementPoolable fails with the following exception. And then the suite hangs.\u003cbr\\/\u003e\\n-----------------------------------------------------------------------------------------------------\u003cbr\\/\u003e\\ntestPreparedStatementPoolable used 1 ms .\u003cbr\\/\u003e\\ntestCallableStatementPoolable used 2 ms java.lang.Exception: DRDA_InvalidReplyTooShort.S:Invalid reply from network server: Insufficient data.\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessageWork(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessage(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.fillReplyBuffer(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.readResult(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.pingWithNoOpen(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.ping(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.drda.NetworkServerControl.ping(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerUp(NetworkServerTestSetup.java:546)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerStart(NetworkServerTestSetup.java:615)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.setUp(NetworkServerTestSetup.java:191)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:20)\u003cbr\\/\u003e\\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup.run(TestSetup.java:25)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)\u003cbr\\/\u003e\\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup.run(TestSetup.java:25)\u003cbr\\/\u003e\\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)\u003cbr\\/\u003e\\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup.run(TestSetup.java:25)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.runTest(TestSuite.java:230)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.run(TestSuite.java:225)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.runTest(TestSuite.java:230)\u003cbr\\/\u003e\\n        at junit.framework.TestSuite.run(TestSuite.java:225)\u003cbr\\/\u003e\\n        at junit.textui.TestRunner.doRun(TestRunner.java:121)\u003cbr\\/\u003e\\n        at junit.textui.TestRunner.start(TestRunner.java:185)\u003cbr\\/\u003e\\n        at junit.textui.TestRunner.main(TestRunner.java:143)\u003cbr\\/\u003e\\nF.\u003cbr\\/\u003e\\ntestCreateClob used 16 ms .\u003cbr\\/\u003e\\ntestCreateBlob used 9 ms .\u003cbr\\/\u003e\\ntestConnectionIsValid used 674 ms\u003cbr\\/\u003e\\n---------\u003cdel\u003e&lt;hang&gt;\u003c\\/del\u003e---------------------\u003c\\/p\u003e\\n\\n\\n\\n\u003cp\u003eThe log shows the following\u003cbr\\/\u003e\\n--------------------------------------\u003cbr\\/\u003e\\n2009-04-20 16:41:07.264 GMT : Apache Derby Network Server - 10.5.1.1 - (764942) started and ready to accept connections on port 1527\u003cbr\\/\u003e\\n2009-04-20 16:41:10.618 GMT : Invalid reply from network server: Insufficient data.\u003cbr\\/\u003e\\n2009-04-20 16:41:10.618 GMT : Could not listen on port 1527 on host 127.0.0.1:\u003cbr\\/\u003e\\n java.net.BindException: Address already in use: JVM_Bind\u003cbr\\/\u003e\\n2009-04-20 16:41:12.416 GMT : Could not listen on port 1527 on host 127.0.0.1:\u003cbr\\/\u003e\\n java.net.BindException: Address already in use: JVM_Bind\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThis hang occurred both times I ran suites.All and also when I ran jdbc4._Suite alone , always on new test folders.\u003cbr\\/\u003e\\nIn the last instance, attempting to kill the hung test with\u003cbr\\/\u003e\\njava org.apache.derby.drda.NetworkServerControl shutdown\u003cbr\\/\u003e\\nalso hung.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eJavacore file attached.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"suranjay\\\" id=\\\"commentauthor_12700873_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=suranjay\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"suranjay\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suran Jayathilaka\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12700873_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/09 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-20T17:32:57+0000\'\u003e20\\/Apr\\/09 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    When testing client\\/server compatibility with 10.5.1.1.-rc2 and 10.4.2.0 I encountered what seems to be a reproduction of this issue.  \\nEnvironment: AMD Phenom II Quad Core CPU, 4GB Ram, Vista 64 \\n\\n java version \\\"1.6.0_10\\\" \\nJava(TM) SE Runtime Environment (build 1.6.0_10-b33) \\nJava HotSpot(TM) Client VM (build 11.0-b15, mixed mode, sharing) \\n\\n\\n Client - 10.4.2.0. Jars \\n------------------- \\nderbyTesting.jar \\nderbyClient.jar \\n\\n Server - 10.5.1.1. Jars \\n------------------- \\nderby.jar \\nderbynet.jar \\nderbytools.jar \\nderbyLocale*.jar \\nderbyrun.jar \\n\\n XA40Test.testCallableStatementPoolable fails with the following exception. And then the suite hangs. \\n----------------------------------------------------------------------------------------------------- \\ntestPreparedStatementPoolable used 1 ms . \\ntestCallableStatementPoolable used 2 ms java.lang.Exception: DRDA_InvalidReplyTooShort.S:Invalid reply from network server: Insufficient data. \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessageWork(Unknown Source) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessage(Unknown Source) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.fillReplyBuffer(Unknown Source) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.readResult(Unknown Source) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.pingWithNoOpen(Unknown Source) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.ping(Unknown Source) \\n        at org.apache.derby.drda.NetworkServerControl.ping(Unknown Source) \\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerUp(NetworkServerTestSetup.java:546) \\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerStart(NetworkServerTestSetup.java:615) \\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.setUp(NetworkServerTestSetup.java:191) \\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:20) \\n        at junit.framework.TestResult.runProtected(TestResult.java:124) \\n        at junit.extensions.TestSetup.run(TestSetup.java:25) \\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24) \\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:21) \\n        at junit.framework.TestResult.runProtected(TestResult.java:124) \\n        at junit.extensions.TestSetup.run(TestSetup.java:25) \\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24) \\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:21) \\n        at junit.framework.TestResult.runProtected(TestResult.java:124) \\n        at junit.extensions.TestSetup.run(TestSetup.java:25) \\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n        at junit.framework.TestSuite.runTest(TestSuite.java:230) \\n        at junit.framework.TestSuite.run(TestSuite.java:225) \\n        at junit.framework.TestSuite.runTest(TestSuite.java:230) \\n        at junit.framework.TestSuite.run(TestSuite.java:225) \\n        at junit.textui.TestRunner.doRun(TestRunner.java:121) \\n        at junit.textui.TestRunner.start(TestRunner.java:185) \\n        at junit.textui.TestRunner.main(TestRunner.java:143) \\nF. \\ntestCreateClob used 16 ms . \\ntestCreateBlob used 9 ms . \\ntestConnectionIsValid used 674 ms \\n--------- &lt;hang&gt; --------------------- \\n\\n\\n\\n The log shows the following \\n-------------------------------------- \\n2009-04-20 16:41:07.264 GMT : Apache Derby Network Server - 10.5.1.1 - (764942) started and ready to accept connections on port 1527 \\n2009-04-20 16:41:10.618 GMT : Invalid reply from network server: Insufficient data. \\n2009-04-20 16:41:10.618 GMT : Could not listen on port 1527 on host 127.0.0.1: \\n java.net.BindException: Address already in use: JVM_Bind \\n2009-04-20 16:41:12.416 GMT : Could not listen on port 1527 on host 127.0.0.1: \\n java.net.BindException: Address already in use: JVM_Bind \\n\\n\\n This hang occurred both times I ran suites.All and also when I ran jdbc4._Suite alone , always on new test folders. \\nIn the last instance, attempting to kill the hung test with \\njava org.apache.derby.drda.NetworkServerControl shutdown \\nalso hung. \\n\\n\\n Javacore file attached.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12700877\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12700877&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12700877\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"suranjay\\\" id=\\\"commentauthor_12700877_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=suranjay\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"suranjay\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suran Jayathilaka\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12700877_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/09 17:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-20T17:35:58+0000\'\u003e20\\/Apr\\/09 17:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ejavacore  for 10.4Client\\/10.5server compat testing hang. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"suranjay\\\" id=\\\"commentauthor_12700877_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=suranjay\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"suranjay\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suran Jayathilaka\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12700877_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/09 17:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-04-20T17:35:58+0000\'\u003e20\\/Apr\\/09 17:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    javacore  for 10.4Client\\/10.5server compat testing hang.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12718953\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12718953&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12718953\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12718953_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12718953_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/09 19:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-12T19:46:21+0000\'\u003e12\\/Jun\\/09 19:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLooking at the javacore the tests are hung waiting on a ping:\u003cbr\\/\u003e\\n\\\"main\\\" prio=6 tid=0x003e9c00 nid=0x10ac runnable \u003cspan class=\\\"error\\\"\u003e&#91;0x0023f000..0x0023fe28&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n   java.lang.Thread.State: RUNNABLE\u003cbr\\/\u003e\\n        at java.net.SocketInputStream.socketRead0(Native Method)\u003cbr\\/\u003e\\n        at java.net.SocketInputStream.read(SocketInputStream.java:129)\u003cbr\\/\u003e\\n        at java.net.SocketInputStream.read(SocketInputStream.java:90)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.fillReplyBuffer(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.readResult(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.pingWithNoOpen(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.ping(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.drda.NetworkServerControl.ping(Unknown Source)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerUp(NetworkServerTestSetup.java:546)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerStart(NetworkServerTestSetup.java:615)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.setUp(NetworkServerTestSetup.java:191)\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eIf anyone can reproduce this it might be interesting to instrument pingForServerUp to\u003cbr\\/\u003e\\nsee what path it is taking through this code.  Did the while loop go more than once,\u003cbr\\/\u003e\\nwhat are all the variables to the routine, did it hit any of the try\\/catch blocks (some \u003cbr\\/\u003e\\ndon\'t do anything), ...\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems like this setup code should be changed to not wait forever in the ping since\u003cbr\\/\u003e\\nthe tests seem to be able to break the network server and make it not ping.  So maybe some sort of timer thread could be used to make the ping not take forever.  \u003cbr\\/\u003e\\nIt would be best to understand why the ping is taking forever and maybe if we did\u003cbr\\/\u003e\\nnot hang then we could add more diagnostics to this routine to figure why the ping\u003cbr\\/\u003e\\nis not returning.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12718953_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12718953_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/09 19:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-12T19:46:21+0000\'\u003e12\\/Jun\\/09 19:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Looking at the javacore the tests are hung waiting on a ping: \\n\\\"main\\\" prio=6 tid=0x003e9c00 nid=0x10ac runnable  &#91;0x0023f000..0x0023fe28&#93;  \\n   java.lang.Thread.State: RUNNABLE \\n        at java.net.SocketInputStream.socketRead0(Native Method) \\n        at java.net.SocketInputStream.read(SocketInputStream.java:129) \\n        at java.net.SocketInputStream.read(SocketInputStream.java:90) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.fillReplyBuffer(Unknown Source) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.readResult(Unknown Source) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.pingWithNoOpen(Unknown Source) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.ping(Unknown Source) \\n        at org.apache.derby.drda.NetworkServerControl.ping(Unknown Source) \\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerUp(NetworkServerTestSetup.java:546) \\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.pingForServerStart(NetworkServerTestSetup.java:615) \\n        at org.apache.derbyTesting.junit.NetworkServerTestSetup.setUp(NetworkServerTestSetup.java:191) \\n\\n\\n If anyone can reproduce this it might be interesting to instrument pingForServerUp to \\nsee what path it is taking through this code.  Did the while loop go more than once, \\nwhat are all the variables to the routine, did it hit any of the try\\/catch blocks (some  \\ndon\'t do anything), ... \\n\\n It seems like this setup code should be changed to not wait forever in the ping since \\nthe tests seem to be able to break the network server and make it not ping.  So maybe some sort of timer thread could be used to make the ping not take forever.   \\nIt would be best to understand why the ping is taking forever and maybe if we did \\nnot hang then we could add more diagnostics to this routine to figure why the ping \\nis not returning.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12719001\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12719001&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12719001\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12719001_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12719001_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/09 22:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-12T22:18:47+0000\'\u003e12\\/Jun\\/09 22:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMy gut instinct is that this is some sort of shutdown timing problem with all the server side cleanup that starts about line 807 in NetworkServerControlImpl or perhaps a problem with bring it up in the first place.   The key thing  I notice is there is no ClientThread running which normally accepts new requests, but it does not seem the server socket was closed because there is one DRDAConnThread that is blocked on a read and one ping thread blocked on read that would terminate if the server.socket were closed.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt would be interesting to trace when this occurs.\u003cbr\\/\u003e\\n1) calls to shutdown and start\u003cbr\\/\u003e\\n2) Entry into the for (;\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e  loop in ClientThread\u003cbr\\/\u003e\\n3) returns out of the ClientThread loop\u003cbr\\/\u003e\\n4)     Remove the if(!parent.getShudown()) in this code so we always print the IOException if it occurs. Perhaps there is an exception we are not seeing.\u003cbr\\/\u003e\\n if (!parent.getShutdown()) \u003c\\/p\u003e\\n{\\n                            parent.consoleExceptionPrintTrace(ioe);\\n                            if (clientSocket != null)\\n                                clientSocket.close();\\n                        } \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12719001_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12719001_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jun\\/09 22:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-12T22:18:47+0000\'\u003e12\\/Jun\\/09 22:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    My gut instinct is that this is some sort of shutdown timing problem with all the server side cleanup that starts about line 807 in NetworkServerControlImpl or perhaps a problem with bring it up in the first place.   The key thing  I notice is there is no ClientThread running which normally accepts new requests, but it does not seem the server socket was closed because there is one DRDAConnThread that is blocked on a read and one ping thread blocked on read that would terminate if the server.socket were closed. \\n\\n It would be interesting to trace when this occurs. \\n1) calls to shutdown and start \\n2) Entry into the for (;   loop in ClientThread \\n3) returns out of the ClientThread loop \\n4)     Remove the if(!parent.getShudown()) in this code so we always print the IOException if it occurs. Perhaps there is an exception we are not seeing. \\n if (!parent.getShutdown())  \\n{\\n                            parent.consoleExceptionPrintTrace(ioe);\\n                            if (clientSocket != null)\\n                                clientSocket.close();\\n                        }             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12721062\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12721062&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12721062\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12721062_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12721062_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/09 04:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-18T04:51:39+0000\'\u003e18\\/Jun\\/09 04:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI noticed this happened on the IBM 10.4 run last night and  had the DRDA_InvalidReplyTooShort.S:Invalid reply from network server: Insufficient data trace on a ping shortly before the hang.  I looked briefly at how this might occur, that a ping would return insufficient data.\u003c\\/p\u003e\\n\\n\u003cp\u003eA ping would go through this code in DRDAConnThread:\u003cbr\\/\u003e\\nprivate void sessionInitialState()\u003cbr\\/\u003e\\n\\t\\tthrows Exception\u003cbr\\/\u003e\\n\\t{\u003cbr\\/\u003e\\n\\t\\t\\/\\/ process NetworkServerControl commands - if it is not either valid protocol  let the \u003cbr\\/\u003e\\n\\t\\t\\/\\/ DRDA error handling handle it\u003cbr\\/\u003e\\n\\t\\tif (reader.isCmd())\u003cbr\\/\u003e\\n\\t\\t{\u003cbr\\/\u003e\\n\\t\\t\\ttry \u003c\\/p\u003e\\n{\\n\\t\\t\\t\\tserver.processCommands(reader, writer, session);\\n\\t\\t\\t\\t\\/\\/ reset reader and writer\\n\\t\\t\\t\\treader.initialize(this, null);\\n\\t\\t\\t\\twriter.reset(null);\\n\\t\\t\\t\\tcloseSession();\\n\\t\\t\\t}\\n\u003cp\u003e catch (Throwable t) {\u003cbr\\/\u003e\\n\\t\\t\\t\\tif (t instanceof InterruptedException)\u003cbr\\/\u003e\\n\\t\\t\\t\\t\\tthrow (InterruptedException)t;\u003cbr\\/\u003e\\n\\t\\t\\t\\telse\u003c\\/p\u003e\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tserver.consoleExceptionPrintTrace(t);\\n\\t\\t\\t\\t}\\n\u003cp\u003e\\t\\t\\t}\u003c\\/p\u003e\\n\\n\u003cp\u003eIn NetworkServerControlImpl during shutdown we do the following which might interrupt  the thread:\u003cbr\\/\u003e\\n\\tsynchronized (threadList)\u003cbr\\/\u003e\\n\\t\\t{\u003cbr\\/\u003e\\n \\t\\t\\t\\/\\/interupt any connection threads still active\u003cbr\\/\u003e\\n \\t\\t\\tfor (int i = 0; i &lt; threadList.size(); i++)\u003cbr\\/\u003e\\n \\t\\t\\t{\u003cbr\\/\u003e\\n\\t\\t\\t\\tfinal DRDAConnThread threadi = (DRDAConnThread)threadList.get\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/information.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e;\u003c\\/p\u003e\\n\\n\u003cp\u003e \\t\\t\\t\\tthreadi.close();\u003cbr\\/\u003e\\n\\t\\t\\t\\tAccessController.doPrivileged(\u003cbr\\/\u003e\\n\\t\\t\\t\\t\\t\\t\\tnew PrivilegedAction() {\u003cbr\\/\u003e\\n\\t\\t\\t\\t\\t\\t\\t\\tpublic Object run() \u003c\\/p\u003e\\n{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tthreadi.interrupt();\\n\\t\\t\\t\\t\\t\\t\\t\\t\\treturn null;\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\u003cp\u003e\\t\\t\\t\\t\\t\\t\\t});\u003cbr\\/\u003e\\n \\t\\t\\t}\u003cbr\\/\u003e\\n \\t\\t\\tthreadList.clear();\u003cbr\\/\u003e\\n\\t\\t}\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems a kind of abrupt way to shutdown the threads. Would calling threadi() close()  be more appropriate so it could finish what it was doing?  I am also unclear about the state of the cleanup when such an interrupt occurs during the middle of writing a response.\u003c\\/p\u003e\\n\\n\u003cp\u003eTomorrow I will try putting a sleep between the reply header and the OK byte on the ping response and try to shutdown at the same time  to  see if I can get the InvalidReplyTooShort and then see if subsequent connection attempts hang.\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12721062_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12721062_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/09 04:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-18T04:51:39+0000\'\u003e18\\/Jun\\/09 04:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I noticed this happened on the IBM 10.4 run last night and  had the DRDA_InvalidReplyTooShort.S:Invalid reply from network server: Insufficient data trace on a ping shortly before the hang.  I looked briefly at how this might occur, that a ping would return insufficient data. \\n\\n A ping would go through this code in DRDAConnThread: \\nprivate void sessionInitialState() \\n\\t\\tthrows Exception \\n\\t{ \\n\\t\\t\\/\\/ process NetworkServerControl commands - if it is not either valid protocol  let the  \\n\\t\\t\\/\\/ DRDA error handling handle it \\n\\t\\tif (reader.isCmd()) \\n\\t\\t{ \\n\\t\\t\\ttry  \\n{\\n\\t\\t\\t\\tserver.processCommands(reader, writer, session);\\n\\t\\t\\t\\t\\/\\/ reset reader and writer\\n\\t\\t\\t\\treader.initialize(this, null);\\n\\t\\t\\t\\twriter.reset(null);\\n\\t\\t\\t\\tcloseSession();\\n\\t\\t\\t}\\n  catch (Throwable t) { \\n\\t\\t\\t\\tif (t instanceof InterruptedException) \\n\\t\\t\\t\\t\\tthrow (InterruptedException)t; \\n\\t\\t\\t\\telse \\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tserver.consoleExceptionPrintTrace(t);\\n\\t\\t\\t\\t}\\n \\t\\t\\t} \\n\\n In NetworkServerControlImpl during shutdown we do the following which might interrupt  the thread: \\n\\tsynchronized (threadList) \\n\\t\\t{ \\n \\t\\t\\t\\/\\/interupt any connection threads still active \\n \\t\\t\\tfor (int i = 0; i &lt; threadList.size(); i++) \\n \\t\\t\\t{ \\n\\t\\t\\t\\tfinal DRDAConnThread threadi = (DRDAConnThread)threadList.get ; \\n\\n  \\t\\t\\t\\tthreadi.close(); \\n\\t\\t\\t\\tAccessController.doPrivileged( \\n\\t\\t\\t\\t\\t\\t\\tnew PrivilegedAction() { \\n\\t\\t\\t\\t\\t\\t\\t\\tpublic Object run()  \\n{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tthreadi.interrupt();\\n\\t\\t\\t\\t\\t\\t\\t\\t\\treturn null;\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n \\t\\t\\t\\t\\t\\t\\t}); \\n \\t\\t\\t} \\n \\t\\t\\tthreadList.clear(); \\n\\t\\t} \\n\\n It seems a kind of abrupt way to shutdown the threads. Would calling threadi() close()  be more appropriate so it could finish what it was doing?  I am also unclear about the state of the cleanup when such an interrupt occurs during the middle of writing a response. \\n\\n Tomorrow I will try putting a sleep between the reply header and the OK byte on the ping response and try to shutdown at the same time  to  see if I can get the InvalidReplyTooShort and then see if subsequent connection attempts hang. \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12725630\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12725630&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12725630\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12725630_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12725630_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jun\\/09 13:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-30T13:59:13+0000\'\u003e30\\/Jun\\/09 13:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBased on Kathey\'s suggestion, I tried putting sleep in the Network Server code right in the middle of ping protocol handshake.\u003c\\/p\u003e\\n\\n\u003cp\u003eFollowing is what happens for ping on the server side (in NetworkServerControlImpl)\u003cbr\\/\u003e\\nprivate void sendOK(DDMWriter writer) throws Exception \u003cbr\\/\u003e\\n{ \u003cbr\\/\u003e\\n      writeCommandReplyHeader(writer); \u003cbr\\/\u003e\\n      writer.writeByte(OK); \u003cbr\\/\u003e\\n      writer.flush(); \u003cbr\\/\u003e\\n} \u003cbr\\/\u003e\\nI have copied the sendOK code inline where the ping is handled in NetworkServerControlImpl.processCommands(). Additionally, I changed that copied code to have the server sleep after writing the header but before sending the ok to the ping client as shown below.\u003cbr\\/\u003e\\n      writeCommandReplyHeader(writer);\u003cbr\\/\u003e\\n      writer.flush();\u003cbr\\/\u003e\\n      System.out.println(\\\"before going to sleep\\\");\u003cbr\\/\u003e\\n      Thread.sleep(10000);\u003cbr\\/\u003e\\n      System.out.println(\\\"after sleep\\\");\u003cbr\\/\u003e\\n      writer.writeByte(OK);\u003cbr\\/\u003e\\n      System.out.println(\\\"after sending OK\\\");\u003cbr\\/\u003e\\n      writer.flush();\u003cbr\\/\u003e\\n      System.out.println(\\\"after flushing OK\\\");\u003cbr\\/\u003e\\nWith the code changes above, I thought I would be able to reproduce the bug if I tried shutting down server while the server was still sleeping during ping handshake (ie before the ping protocol handshake is all finished). What I found was that the server shutdown properly, ping client got expected Invalid reply from network server: Insufficient data. We thought that if we tried bringing the server back up and tried ping on the new server session, it will hang because of the earlier insufficient data but that didn\'t happen. A hang here would have probably duplicated the intermittent hang behavior that we see when the nightly tests are running.\u003c\\/p\u003e\\n\\n\u003cp\u003eLittle more info on exact steps for the test case above\u003cbr\\/\u003e\\nWindow 1 : Start the server\u003cbr\\/\u003e\\n\\tjava org.apache.derby.drda.NetworkServerControl -noSecurityManager start -p 1639\u003cbr\\/\u003e\\nWindow 2 : ping the server (this put the server in the sleep mode)\u003cbr\\/\u003e\\n\\tjava org.apache.derby.drda.NetworkServerControl ping -p 1639\u003cbr\\/\u003e\\nWindow 3: while server is sleeping, send shutdown request\u003cbr\\/\u003e\\n\\tjava org.apache.derby.drda.NetworkServerControl shutdown -p 1639\u003c\\/p\u003e\\n\\n\u003cp\u003eAfter spending more time on the experiment above, found that the ping client was getting\u003cbr\\/\u003e\\ninsufficient data because of the \\\"writer.flush()\\\" which I added right before \u003cbr\\/\u003e\\nThread.sleep(...). This happened both with Sun and IBM jvms(1.6 versions). once I took the \u003cbr\\/\u003e\\nadditional writer.flush() out, the ping client ran successfully and there was no insufficient\u003cbr\\/\u003e\\ndata error.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe goal here is to get a consistently (small) reproducible test case which will make debugging the problem easier but have not been to cause the ping to run into insufficient data in a small repro yet. Will brainstorm more but in the meantime, if anyone has any ideas\u003cbr\\/\u003e\\non what may be causing the insufficient data error, I can pursue those.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12725630_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12725630_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jun\\/09 13:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-30T13:59:13+0000\'\u003e30\\/Jun\\/09 13:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Based on Kathey\'s suggestion, I tried putting sleep in the Network Server code right in the middle of ping protocol handshake. \\n\\n Following is what happens for ping on the server side (in NetworkServerControlImpl) \\nprivate void sendOK(DDMWriter writer) throws Exception  \\n{  \\n      writeCommandReplyHeader(writer);  \\n      writer.writeByte(OK);  \\n      writer.flush();  \\n}  \\nI have copied the sendOK code inline where the ping is handled in NetworkServerControlImpl.processCommands(). Additionally, I changed that copied code to have the server sleep after writing the header but before sending the ok to the ping client as shown below. \\n      writeCommandReplyHeader(writer); \\n      writer.flush(); \\n      System.out.println(\\\"before going to sleep\\\"); \\n      Thread.sleep(10000); \\n      System.out.println(\\\"after sleep\\\"); \\n      writer.writeByte(OK); \\n      System.out.println(\\\"after sending OK\\\"); \\n      writer.flush(); \\n      System.out.println(\\\"after flushing OK\\\"); \\nWith the code changes above, I thought I would be able to reproduce the bug if I tried shutting down server while the server was still sleeping during ping handshake (ie before the ping protocol handshake is all finished). What I found was that the server shutdown properly, ping client got expected Invalid reply from network server: Insufficient data. We thought that if we tried bringing the server back up and tried ping on the new server session, it will hang because of the earlier insufficient data but that didn\'t happen. A hang here would have probably duplicated the intermittent hang behavior that we see when the nightly tests are running. \\n\\n Little more info on exact steps for the test case above \\nWindow 1 : Start the server \\n\\tjava org.apache.derby.drda.NetworkServerControl -noSecurityManager start -p 1639 \\nWindow 2 : ping the server (this put the server in the sleep mode) \\n\\tjava org.apache.derby.drda.NetworkServerControl ping -p 1639 \\nWindow 3: while server is sleeping, send shutdown request \\n\\tjava org.apache.derby.drda.NetworkServerControl shutdown -p 1639 \\n\\n After spending more time on the experiment above, found that the ping client was getting \\ninsufficient data because of the \\\"writer.flush()\\\" which I added right before  \\nThread.sleep(...). This happened both with Sun and IBM jvms(1.6 versions). once I took the  \\nadditional writer.flush() out, the ping client ran successfully and there was no insufficient \\ndata error. \\n\\n The goal here is to get a consistently (small) reproducible test case which will make debugging the problem easier but have not been to cause the ping to run into insufficient data in a small repro yet. Will brainstorm more but in the meantime, if anyone has any ideas \\non what may be causing the insufficient data error, I can pursue those.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12726172\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12726172&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12726172\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12726172_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12726172_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jul\\/09 18:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-01T18:34:35+0000\'\u003e01\\/Jul\\/09 18:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWanted to post some progress on this issue\u003cbr\\/\u003e\\n1)First of all, I don\'t need to run the entire suite anymore to run into hang problem. Just running the jdbc4 suite is enough to repro the problem. that is saving tons of time with reproducing the bug on my machine when running with 10.5 server jars and 10.4 client jars\u003cbr\\/\u003e\\n2)jdbc4 suite is consistently hanging in jdbc4.ConnectionMethodsTest\u003cbr\\/\u003e\\n3)The problem is not really with the test that is hung, rather it is the previous test jdbc4.UnsupportedVetter\u003cbr\\/\u003e\\n4)After lonts and lots of printlns in the network server code, it appears the problem might be that XA connections may not be cleaning up properly and hence the server can\'t shutdown successfully. But ofcourse as this jira shows, we do not handle that case properly. This leads into server not getting shutdown when the junit test is expecting it to be shutdown. The next test when it tries to bring the server up can\'t do that successfully.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe next step is to come up with a XA test case to repro the improper cleanup of XA connection.\u003c\\/p\u003e\\n\\n\u003cp\u003eFollowing is the stack trace that I have added into my codeline showing XA connection not closing properly\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.sql.SQLException: Cannot close a connection while a transaction is still active.\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:87)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:103)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:167)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.EmbedConnection.newSQLExceptionEmbedConnection.java:2948)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.EmbedConnection.checkForTransactionInProgress(EmbedConnection.java:1806)\u003cbr\\/\u003e\\n        at org.apache.derby.jdbc.EmbedPooledConnection.checkCloseEmbedPooledConnection.java:459)\u003cbr\\/\u003e\\n        at org.apache.derby.jdbc.EmbedXAConnection.checkCloseEmbedXAConnection.java:152)\u003cbr\\/\u003e\\n        at org.apache.derby.iapi.jdbc.BrokeredConnection.close(BrokeredConnection.java:169)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.Database.close(Database.java:362)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.Session.close(Session.java:115)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.blockingStart(NetworkServerControlImpl.java:838)\u003cbr\\/\u003e\\n        at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)\u003cbr\\/\u003e\\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\u003cbr\\/\u003e\\n        at java.lang.reflect.Method.invoke(Method.java:599)\u003cbr\\/\u003e\\n        at org.apache.derby.iapi.jdbc.DRDAServerStarter.run(DRDAServerStarter.java:236)\u003cbr\\/\u003e\\n        at java.lang.Thread.run(Thread.java:735)\u003cbr\\/\u003e\\nCaused by: java.sql.SQLException: Cannot close a connection while a transaction is still active.\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:73)\u003cbr\\/\u003e\\n        ... 16 more\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12726172_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12726172_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jul\\/09 18:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-01T18:34:35+0000\'\u003e01\\/Jul\\/09 18:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Wanted to post some progress on this issue \\n1)First of all, I don\'t need to run the entire suite anymore to run into hang problem. Just running the jdbc4 suite is enough to repro the problem. that is saving tons of time with reproducing the bug on my machine when running with 10.5 server jars and 10.4 client jars \\n2)jdbc4 suite is consistently hanging in jdbc4.ConnectionMethodsTest \\n3)The problem is not really with the test that is hung, rather it is the previous test jdbc4.UnsupportedVetter \\n4)After lonts and lots of printlns in the network server code, it appears the problem might be that XA connections may not be cleaning up properly and hence the server can\'t shutdown successfully. But ofcourse as this jira shows, we do not handle that case properly. This leads into server not getting shutdown when the junit test is expecting it to be shutdown. The next test when it tries to bring the server up can\'t do that successfully. \\n\\n The next step is to come up with a XA test case to repro the improper cleanup of XA connection. \\n\\n Following is the stack trace that I have added into my codeline showing XA connection not closing properly \\n\\n java.sql.SQLException: Cannot close a connection while a transaction is still active. \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95) \\n        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:87) \\n        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:103) \\n        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:167) \\n        at org.apache.derby.impl.jdbc.EmbedConnection.newSQLExceptionEmbedConnection.java:2948) \\n        at org.apache.derby.impl.jdbc.EmbedConnection.checkForTransactionInProgress(EmbedConnection.java:1806) \\n        at org.apache.derby.jdbc.EmbedPooledConnection.checkCloseEmbedPooledConnection.java:459) \\n        at org.apache.derby.jdbc.EmbedXAConnection.checkCloseEmbedXAConnection.java:152) \\n        at org.apache.derby.iapi.jdbc.BrokeredConnection.close(BrokeredConnection.java:169) \\n        at org.apache.derby.impl.drda.Database.close(Database.java:362) \\n        at org.apache.derby.impl.drda.Session.close(Session.java:115) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.blockingStart(NetworkServerControlImpl.java:838) \\n        at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source) \\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) \\n        at java.lang.reflect.Method.invoke(Method.java:599) \\n        at org.apache.derby.iapi.jdbc.DRDAServerStarter.run(DRDAServerStarter.java:236) \\n        at java.lang.Thread.run(Thread.java:735) \\nCaused by: java.sql.SQLException: Cannot close a connection while a transaction is still active. \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119) \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:73) \\n        ... 16 more              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12726225\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12726225&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12726225\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12726225_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12726225_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jul\\/09 20:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-01T20:56:27+0000\'\u003e01\\/Jul\\/09 20:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3319\\\" title=\\\"Logical connections do not check if a transaction is active on close\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3319\\\"\u003e\u003cdel\u003eDERBY-3319\u003c\\/del\u003e\u003c\\/a\u003e fix I think this is much more likely to occur at a user site.  Marking Urgent to try to get it into the 10.5.2 release.\u003c\\/p\u003e\\n\\n\u003cp\u003eI actually would have thought this would be a regression associated with 10.5 after \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3319\\\" title=\\\"Logical connections do not check if a transaction is active on close\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3319\\\"\u003e\u003cdel\u003eDERBY-3319\u003c\\/del\u003e\u003c\\/a\u003e, but Myrna has reported the problem on 10.4 as well.  If it is a regression, it should probably move to BLOCKER.\u003cbr\\/\u003e\\nThank you Mamta for tracking down this issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eI see three  parts to the fix:\u003cbr\\/\u003e\\n1) Do a better job of cleaning up XA Connections.  For local transactions we can rollback, but we need to be more careful to do the right thing if a global transaction is in progress.  We cannot simply rollback a prepared transaction.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Make sure an exception during shutdown processing does not prevent the remaining shutdown tasks, like closing the server socket from occurring.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) Make sure any exceptions that occur in shutdown processing are reported to the console.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12726225_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12726225_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jul\\/09 20:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-01T20:56:27+0000\'\u003e01\\/Jul\\/09 20:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    With the   DERBY-3319   fix I think this is much more likely to occur at a user site.  Marking Urgent to try to get it into the 10.5.2 release. \\n\\n I actually would have thought this would be a regression associated with 10.5 after   DERBY-3319  , but Myrna has reported the problem on 10.4 as well.  If it is a regression, it should probably move to BLOCKER. \\nThank you Mamta for tracking down this issue. \\n\\n I see three  parts to the fix: \\n1) Do a better job of cleaning up XA Connections.  For local transactions we can rollback, but we need to be more careful to do the right thing if a global transaction is in progress.  We cannot simply rollback a prepared transaction. \\n\\n 2) Make sure an exception during shutdown processing does not prevent the remaining shutdown tasks, like closing the server socket from occurring. \\n\\n 3) Make sure any exceptions that occur in shutdown processing are reported to the console.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12726251\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12726251&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12726251\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12726251_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12726251_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jul\\/09 22:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-01T22:41:00+0000\'\u003e01\\/Jul\\/09 22:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTaking this from memory... I thought XA wasn\'t supposed to be affected by \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3319\\\" title=\\\"Logical connections do not check if a transaction is active on close\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3319\\\"\u003e\u003cdel\u003eDERBY-3319\u003c\\/del\u003e\u003c\\/a\u003e. See my comment dated 07\\/Jul\\/08 01:57 AM on that issue. Or perhaps it was just global XA transactions that weren\'t affected by it. Will have to check later.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12726251_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12726251_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jul\\/09 22:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-01T22:41:00+0000\'\u003e01\\/Jul\\/09 22:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Taking this from memory... I thought XA wasn\'t supposed to be affected by   DERBY-3319  . See my comment dated 07\\/Jul\\/08 01:57 AM on that issue. Or perhaps it was just global XA transactions that weren\'t affected by it. Will have to check later.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12726413\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12726413&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12726413\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12726413_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12726413_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jul\\/09 09:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-02T09:51:34+0000\'\u003e02\\/Jul\\/09 09:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI checked the code, and connections associated with a global XA transaction can still be closed without being committed or rolled back first. Local XA connections will fail if they are attempted closed while they have uncommitted operations.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12726413_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12726413_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jul\\/09 09:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-02T09:51:34+0000\'\u003e02\\/Jul\\/09 09:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I checked the code, and connections associated with a global XA transaction can still be closed without being committed or rolled back first. Local XA connections will fail if they are attempted closed while they have uncommitted operations.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12726437\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12726437&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12726437\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12726437_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12726437_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jul\\/09 11:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-02T11:30:53+0000\'\u003e02\\/Jul\\/09 11:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis code in impl.drda.Database.close() probably needs to be changed to check if the connection is a global XA transaction, and not only that it\'s XA:\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\t\\tif ((conn != null) &amp;&amp; !conn.isClosed())\u003cbr\\/\u003e\\n\\t\\t\\t{\u003cbr\\/\u003e\\n\\t\\t\\t\\tif (! forXA)\u003c\\/p\u003e\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tconn.rollback();\\n\\t\\t\\t\\t}\\n\u003cp\u003e\\t\\t\\t\\tconn.close();\\t\\t\\t\\t\\t\u003cbr\\/\u003e\\n\\t\\t\\t}\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12726437_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12726437_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jul\\/09 11:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-02T11:30:53+0000\'\u003e02\\/Jul\\/09 11:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This code in impl.drda.Database.close() probably needs to be changed to check if the connection is a global XA transaction, and not only that it\'s XA: \\n\\n \\t\\t\\tif ((conn != null) &amp;&amp; !conn.isClosed()) \\n\\t\\t\\t{ \\n\\t\\t\\t\\tif (! forXA) \\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tconn.rollback();\\n\\t\\t\\t\\t}\\n \\t\\t\\t\\tconn.close();\\t\\t\\t\\t\\t \\n\\t\\t\\t}              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12727536\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12727536&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12727536\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12727536_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12727536_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/09 14:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-06T14:00:27+0000\'\u003e06\\/Jul\\/09 14:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think that sounds fine for item #1 in my list above. Perhaps we need a new method in the EngineConnection interface (inLocalTransaction()) to determine the transaction state?  Then we also need to take care of the other two items I listed above so we don\'t have problems in the future with errors in shutdown causing this kind of difficult to track down problem.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12727536_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12727536_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/09 14:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-06T14:00:27+0000\'\u003e06\\/Jul\\/09 14:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think that sounds fine for item #1 in my list above. Perhaps we need a new method in the EngineConnection interface (inLocalTransaction()) to determine the transaction state?  Then we also need to take care of the other two items I listed above so we don\'t have problems in the future with errors in shutdown causing this kind of difficult to track down problem. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12728768\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12728768&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12728768\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12728768_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12728768_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/09 16:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-08T16:30:39+0000\'\u003e08\\/Jul\\/09 16:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eChanging to blocker urgency for 10.5.2 at least for the XA hang. The other parts of the fix (proper handling of all exceptions that occur on shutdown and log to console when they occur) could be handled post 10.5.2 with a follow-up issue.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12728768_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12728768_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/09 16:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-08T16:30:39+0000\'\u003e08\\/Jul\\/09 16:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Changing to blocker urgency for 10.5.2 at least for the XA hang. The other parts of the fix (proper handling of all exceptions that occur on shutdown and log to console when they occur) could be handled post 10.5.2 with a follow-up issue. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729074\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729074&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729074\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12729074_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729074_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 06:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T06:54:37+0000\'\u003e09\\/Jul\\/09 06:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ll try to fix the XA hang along the lines suggested above.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12729074_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729074_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 06:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T06:54:37+0000\'\u003e09\\/Jul\\/09 06:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ll try to fix the XA hang along the lines suggested above.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729079\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729079&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729079\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12729079_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729079_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 07:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T07:22:33+0000\'\u003e09\\/Jul\\/09 07:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOops. Just noticed that Kathey had sent a mail to derby-dev asking Mamta to fix this. Unassigning so that I don\'t block the issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12729079_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729079_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 07:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T07:22:33+0000\'\u003e09\\/Jul\\/09 07:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Oops. Just noticed that Kathey had sent a mail to derby-dev asking Mamta to fix this. Unassigning so that I don\'t block the issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729297\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729297&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729297\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729297_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729297_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 15:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T15:35:02+0000\'\u003e09\\/Jul\\/09 15:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis patch DERBY4053_patch1_diff_July092009.txt is not yet intended for checkin. \u003c\\/p\u003e\\n\\n\u003cp\u003eI thought this patch should fix the XA cleanup issue where we were not differentiating between global XA vs local XA transaction and hence not roling back local XA transaction before trying to close the connection. \u003c\\/p\u003e\\n\\n\u003cp\u003eUnless my code changes are wrong, it appears though that all the XA tests in jdbc4 suite are non-global XA transactions. Is that right? The reason I ask is, I had printlns in all the implementations of the new method isInGlobalTransaction and they all always return false. I was expecting following method in EmbedXAConnection.java to return true sometimes because we are dealing with global XA transaction.\u003cbr\\/\u003e\\nIndex: java\\/engine\\/org\\/apache\\/derby\\/jdbc\\/EmbedXAConnection.java\u003cbr\\/\u003e\\n===================================================================\u003cbr\\/\u003e\\n&#8212; java\\/engine\\/org\\/apache\\/derby\\/jdbc\\/EmbedXAConnection.java    (revision 792143\u003cbr\\/\u003e\\n)\u003cbr\\/\u003e\\n+++ java\\/engine\\/org\\/apache\\/derby\\/jdbc\\/EmbedXAConnection.java    (working copy)\u003cbr\\/\u003e\\n@@ -22,6 +22,7 @@\u003cbr\\/\u003e\\n package org.apache.derby.jdbc;\u003c\\/p\u003e\\n\\n\u003cp\u003e import org.apache.derby.impl.jdbc.Util;\u003cbr\\/\u003e\\n+import org.apache.derby.iapi.jdbc.BrokeredConnectionControl;\u003cbr\\/\u003e\\n import org.apache.derby.iapi.jdbc.EngineConnection;\u003cbr\\/\u003e\\n import org.apache.derby.iapi.jdbc.ResourceAdapter;\u003c\\/p\u003e\\n\\n\u003cp\u003e@@ -53,6 +54,11 @@\u003cbr\\/\u003e\\n                 xaRes = new EmbedXAResource (this, ra);\u003cbr\\/\u003e\\n        }\u003c\\/p\u003e\\n\\n\u003cp\u003e+    \\/** @see BrokeredConnectionControl#isInGlobalTransaction() *\\/\u003cbr\\/\u003e\\n+    public boolean isInGlobalTransaction() \u003c\\/p\u003e\\n{\\n+       return isGlobal();\\n+    }\\n\u003cp\u003e+\u003cbr\\/\u003e\\n     \\/**\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eCheck if this connection is part of a global XA transaction.\u003cbr\\/\u003e\\n      *\u003cbr\\/\u003e\\nCan someone review this patch for me? There are not many comments yet. I will put those soon.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI am right now also trying to work on a standalone repro case  which will reproduce our theory of local XA transaction not getting rolled back before connection.close and hence the server shutdown does not happen correctly causing next server start to hang. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729297_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729297_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 15:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T15:35:02+0000\'\u003e09\\/Jul\\/09 15:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This patch DERBY4053_patch1_diff_July092009.txt is not yet intended for checkin.  \\n\\n I thought this patch should fix the XA cleanup issue where we were not differentiating between global XA vs local XA transaction and hence not roling back local XA transaction before trying to close the connection.  \\n\\n Unless my code changes are wrong, it appears though that all the XA tests in jdbc4 suite are non-global XA transactions. Is that right? The reason I ask is, I had printlns in all the implementations of the new method isInGlobalTransaction and they all always return false. I was expecting following method in EmbedXAConnection.java to return true sometimes because we are dealing with global XA transaction. \\nIndex: java\\/engine\\/org\\/apache\\/derby\\/jdbc\\/EmbedXAConnection.java \\n=================================================================== \\n&#8212; java\\/engine\\/org\\/apache\\/derby\\/jdbc\\/EmbedXAConnection.java    (revision 792143 \\n) \\n+++ java\\/engine\\/org\\/apache\\/derby\\/jdbc\\/EmbedXAConnection.java    (working copy) \\n@@ -22,6 +22,7 @@ \\n package org.apache.derby.jdbc; \\n\\n  import org.apache.derby.impl.jdbc.Util; \\n+import org.apache.derby.iapi.jdbc.BrokeredConnectionControl; \\n import org.apache.derby.iapi.jdbc.EngineConnection; \\n import org.apache.derby.iapi.jdbc.ResourceAdapter; \\n\\n @@ -53,6 +54,11 @@ \\n                 xaRes = new EmbedXAResource (this, ra); \\n        } \\n\\n +    \\/** @see BrokeredConnectionControl#isInGlobalTransaction() *\\/ \\n+    public boolean isInGlobalTransaction()  \\n{\\n+       return isGlobal();\\n+    }\\n + \\n     \\/** \\n \\n\\t Check if this connection is part of a global XA transaction. \\n      * \\nCan someone review this patch for me? There are not many comments yet. I will put those soon. \\n \\n\\n\\n I am right now also trying to work on a standalone repro case  which will reproduce our theory of local XA transaction not getting rolled back before connection.close and hence the server shutdown does not happen correctly causing next server start to hang.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729312\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729312&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729312\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12729312_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729312_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 16:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T16:20:41+0000\'\u003e09\\/Jul\\/09 16:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mamta,\u003c\\/p\u003e\\n\\n\u003cp\u003eI took a look at DERBY4053_patch1_diff_July092009.txt.  On visual inspection it seems like it should do what we want.\u003cbr\\/\u003e\\nThere is an import of BrokeredConnectionControl in EmbedConnection which should be removed.  \u003c\\/p\u003e\\n\\n\u003cp\u003eIn your mail to derby-dev, you said \\\"Despite the\u003cbr\\/\u003e\\nchange, I still get the hang. \\\"  Do you still get the InvalidReply? If you put the try\\/catch block around the shutdown operations, do you still see an exception?\u003c\\/p\u003e\\n\\n\u003cp\u003eI did some grepping on the tests in jdbc4 and I think you are right that they only use local transactions.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12729312_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729312_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 16:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T16:20:41+0000\'\u003e09\\/Jul\\/09 16:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mamta, \\n\\n I took a look at DERBY4053_patch1_diff_July092009.txt.  On visual inspection it seems like it should do what we want. \\nThere is an import of BrokeredConnectionControl in EmbedConnection which should be removed.   \\n\\n In your mail to derby-dev, you said \\\"Despite the \\nchange, I still get the hang. \\\"  Do you still get the InvalidReply? If you put the try\\/catch block around the shutdown operations, do you still see an exception? \\n\\n I did some grepping on the tests in jdbc4 and I think you are right that they only use local transactions.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729330\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729330&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729330\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729330_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729330_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T17:08:01+0000\'\u003e09\\/Jul\\/09 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSorry, I wasn\'t completely awake when i posted on derby-dev that \\\"Despite the change, I still get the hang\\\". With my changes, I do not see the hang in jdbc4 suite.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729330_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729330_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T17:08:01+0000\'\u003e09\\/Jul\\/09 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Sorry, I wasn\'t completely awake when i posted on derby-dev that \\\"Despite the change, I still get the hang\\\". With my changes, I do not see the hang in jdbc4 suite.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729334\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729334&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729334\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12729334_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729334_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 17:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T17:15:30+0000\'\u003e09\\/Jul\\/09 17:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAhh, good news.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12729334_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729334_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 17:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T17:15:30+0000\'\u003e09\\/Jul\\/09 17:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ahh, good news.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729427\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729427&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729427\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729427_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729427_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 21:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T21:54:15+0000\'\u003e09\\/Jul\\/09 21:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 09\\/Jul\\/09 21:56\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have a standalone repro of the problem which demonstrates the problem with local XA transaction. I am copying the comments from the program to descibe what it is doing. Next, I will add a test like this in our regression suite and put more comments in the Derby code changes.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\/**\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eThis test does following\u003c\\/li\u003e\\n\\t\u003cli\u003e1)Start the network server\u003c\\/li\u003e\\n\\t\u003cli\u003e2)Start a local xa transaction\u003c\\/li\u003e\\n\\t\u003cli\u003e3)Do not commit the local XA transaction\u003c\\/li\u003e\\n\\t\u003cli\u003e4)Shutdown the network server\u003c\\/li\u003e\\n\\t\u003cli\u003e5)Start the server again\u003c\\/li\u003e\\n\\t\u003cli\u003e\u003c\\/li\u003e\\n\\t\u003cli\u003eBefore the fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4053\\\" title=\\\"Network Server&#39;s failure to rollback local transactions on shutdown can cause  hang on startup with message java.net.BindException: Address already in use: NET_Bind in derby.log \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4053\\\"\u003e\u003cdel\u003eDERBY-4053\u003c\\/del\u003e\u003c\\/a\u003e went in, step 4) would not shutdown the\u003c\\/li\u003e\\n\\t\u003cli\u003eserver properly because of the pending local XA transaction. During the\u003c\\/li\u003e\\n\\t\u003cli\u003eserver shutdown, we try to close all the open connections and close on\u003c\\/li\u003e\\n\\t\u003cli\u003ethe XA connection results into an exception because there is still a\u003c\\/li\u003e\\n\\t\u003cli\u003epending transaction. That exception is not handled by the server and\u003c\\/li\u003e\\n\\t\u003cli\u003ebecause of that, all the code necessary to shutdown the server is not\u003c\\/li\u003e\\n\\t\u003cli\u003eexecuted. The next time around, step 5), when we try to bring up the\u003c\\/li\u003e\\n\\t\u003cli\u003eserver again, it ends up hanging\u003c\\/li\u003e\\n\\t\u003cli\u003e2009-07-09 21:21:28.828 GMT : Invalid reply from network server: Insufficient data.\u003c\\/li\u003e\\n\\t\u003cli\u003e2009-07-09 21:21:28.843 GMT : Could not listen on port 1527 on host 127.0.0.1: java.net.BindException: Address already in use: JVM_Bind\u003c\\/li\u003e\\n\\t\u003cli\u003e\u003c\\/li\u003e\\n\\t\u003cli\u003eThe patch attached to the jira makes sure that before calling close on\u003c\\/li\u003e\\n\\t\u003cli\u003elocal XA transaction, we first rollback any transaction active on the\u003c\\/li\u003e\\n\\t\u003cli\u003econnection. We should also work on server shutdown code to handle the\u003c\\/li\u003e\\n\\t\u003cli\u003eexceptions better so that it does not stop half way.\u003c\\/li\u003e\\n\\t\u003cli\u003e\u003cp\u003e *\\/\u003c\\/p\u003e\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729427_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729427_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 21:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T21:54:15+0000\'\u003e09\\/Jul\\/09 21:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 09\\/Jul\\/09 21:56\\\"\u003eedited\u003c\\/span\u003e                   I have a standalone repro of the problem which demonstrates the problem with local XA transaction. I am copying the comments from the program to descibe what it is doing. Next, I will add a test like this in our regression suite and put more comments in the Derby code changes. \\n\\n \\/** \\n \\n\\t This test does following \\n\\t 1)Start the network server \\n\\t 2)Start a local xa transaction \\n\\t 3)Do not commit the local XA transaction \\n\\t 4)Shutdown the network server \\n\\t 5)Start the server again \\n\\t  \\n\\t Before the fix for   DERBY-4053   went in, step 4) would not shutdown the \\n\\t server properly because of the pending local XA transaction. During the \\n\\t server shutdown, we try to close all the open connections and close on \\n\\t the XA connection results into an exception because there is still a \\n\\t pending transaction. That exception is not handled by the server and \\n\\t because of that, all the code necessary to shutdown the server is not \\n\\t executed. The next time around, step 5), when we try to bring up the \\n\\t server again, it ends up hanging \\n\\t 2009-07-09 21:21:28.828 GMT : Invalid reply from network server: Insufficient data. \\n\\t 2009-07-09 21:21:28.843 GMT : Could not listen on port 1527 on host 127.0.0.1: java.net.BindException: Address already in use: JVM_Bind \\n\\t  \\n\\t The patch attached to the jira makes sure that before calling close on \\n\\t local XA transaction, we first rollback any transaction active on the \\n\\t connection. We should also work on server shutdown code to handle the \\n\\t exceptions better so that it does not stop half way. \\n\\t   *\\/  \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729428\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729428&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729428\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729428_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729428_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 21:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T21:59:19+0000\'\u003e09\\/Jul\\/09 21:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRecopying the standalone repro with correct name this time around.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729428_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729428_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/09 21:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-09T21:59:19+0000\'\u003e09\\/Jul\\/09 21:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Recopying the standalone repro with correct name this time around.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729731\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729731&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729731\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729731_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729731_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 17:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T17:23:13+0000\'\u003e10\\/Jul\\/09 17:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching the patch DERBY4053_patch2_diff_July102009.txt which is ready for commit. I have added a new test which will not hang anymore because of the pending local XA transaction. If there are no comments on the patch, I will plan on committing it early next week. I will also go ahead and enter new jira entry for doing a better job of handling the exception during server shutdown.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729731_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729731_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 17:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T17:23:13+0000\'\u003e10\\/Jul\\/09 17:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching the patch DERBY4053_patch2_diff_July102009.txt which is ready for commit. I have added a new test which will not hang anymore because of the pending local XA transaction. If there are no comments on the patch, I will plan on committing it early next week. I will also go ahead and enter new jira entry for doing a better job of handling the exception during server shutdown.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729738\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729738&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729738\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12729738_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729738_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 17:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T17:34:26+0000\'\u003e10\\/Jul\\/09 17:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you Mamta for your continued work on this issue. I didn\'t apply the patch but just looked at the diff and have the following comments. In EmbedConnection we have:\u003cbr\\/\u003e\\nimport org.apache.derby.iapi.jdbc.BrokeredConnectionControl;\u003cbr\\/\u003e\\nwhich I don\'t think is needed.\u003c\\/p\u003e\\n\\n\u003cp\u003eand a small typo in the test \\\"why\\\" instead of \\\"while\\\"\u003cbr\\/\u003e\\nbring the server down why the local xa transaction is still active\u003c\\/p\u003e\\n\\n\u003cp\u003eI wonder if it would be cleaner instead of:\u003cbr\\/\u003e\\nClientXADataSource ds = new ClientXADataSource();\u003cbr\\/\u003e\\n+        ds.setPortNumber(TestConfiguration.getCurrent().getPort());\u003cbr\\/\u003e\\n+    \\tds.setDatabaseName(\\\"wombat\\\");\u003cbr\\/\u003e\\n+    \\tds.setCreateDatabase(\\\"create\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003eto use J2EEDataSource.getXADataSource()\u003c\\/p\u003e\\n\\n\u003cp\u003eDo you think you can check this into 10.5 on  Monday so we get a nightly run before I make the RC on Tuesday?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12729738_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729738_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 17:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T17:34:26+0000\'\u003e10\\/Jul\\/09 17:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you Mamta for your continued work on this issue. I didn\'t apply the patch but just looked at the diff and have the following comments. In EmbedConnection we have: \\nimport org.apache.derby.iapi.jdbc.BrokeredConnectionControl; \\nwhich I don\'t think is needed. \\n\\n and a small typo in the test \\\"why\\\" instead of \\\"while\\\" \\nbring the server down why the local xa transaction is still active \\n\\n I wonder if it would be cleaner instead of: \\nClientXADataSource ds = new ClientXADataSource(); \\n+        ds.setPortNumber(TestConfiguration.getCurrent().getPort()); \\n+    \\tds.setDatabaseName(\\\"wombat\\\"); \\n+    \\tds.setCreateDatabase(\\\"create\\\"); \\n\\n to use J2EEDataSource.getXADataSource() \\n\\n Do you think you can check this into 10.5 on  Monday so we get a nightly run before I make the RC on Tuesday?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729749\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729749&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729749\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729749_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729749_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 18:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T18:08:56+0000\'\u003e10\\/Jul\\/09 18:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for looking at the patch, Kathey. I will work on your comments and go ahead and commit the patch. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729749_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729749_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 18:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T18:08:56+0000\'\u003e10\\/Jul\\/09 18:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for looking at the patch, Kathey. I will work on your comments and go ahead and commit the patch.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729790\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729790&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729790\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12729790_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729790_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 19:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T19:41:11+0000\'\u003e10\\/Jul\\/09 19:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMamta, could you also run jdbcapi.XATest with your patch. It hasn\'t been enabled (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4155\\\" title=\\\"jdbcapi\\/XATest.java  doesn&#39;t seem to be running anywhere\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4155\\\"\u003e\u003cdel\u003eDERBY-4155\u003c\\/del\u003e\u003c\\/a\u003e) because it sometimes hung when run in a suite because of this issue.   You will need to sync up to run it because I just checked in a fix to the test to make it run cleanly.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12729790_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729790_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 19:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T19:41:11+0000\'\u003e10\\/Jul\\/09 19:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mamta, could you also run jdbcapi.XATest with your patch. It hasn\'t been enabled (  DERBY-4155  ) because it sometimes hung when run in a suite because of this issue.   You will need to sync up to run it because I just checked in a fix to the test to make it run cleanly. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729806\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729806&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729806\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729806_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729806_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 20:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T20:40:21+0000\'\u003e10\\/Jul\\/09 20:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey, when I ran the XATest, it failed\u003cbr\\/\u003e\\n$ java junit.textui.TestRunner org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest\u003cbr\\/\u003e\\n.....EE\u003cbr\\/\u003e\\nTime: 10.031\u003cbr\\/\u003e\\nThere were 2 errors:\u003cbr\\/\u003e\\n1) XATest:embeddedjava.sql.SQLException: The conglomerate (-1) requested does not exist.\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:201)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:391)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2201)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:81)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1323)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:625)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(EmbedStatement.java:175)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.JDBC.dropSchema(JDBC.java:323)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.removeObjects(CleanDatabaseTestSetup.java:231)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.cleanDatabase(CleanDatabaseTestSetup.java:164)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.tearDown(CleanDatabaseTestSetup.java:151)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:20)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\nCaused by: java.sql.SQLException: The conglomerate (-1) requested does not exist.\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)\u003cbr\\/\u003e\\n        ... 21 more\u003cbr\\/\u003e\\nCaused by: ERROR XSAI2: The conglomerate (-1) requested does not exist.\u003cbr\\/\u003e\\n        at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:286)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.store.access.RAMTransaction.findExistingConglomerate(RAMTransaction.java:399)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.store.access.RAMTransaction.openConglomerate(RAMTransaction.java:1308)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.isSchemaReferenced(DataDictionaryImpl.java:2310)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.isSchemaEmpty(DataDictionaryImpl.java:2245)\u003cbr\\/\u003e\\n        at org.apache.derby.iapi.sql.dictionary.SchemaDescriptor.drop(SchemaDescriptor.java:419)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.sql.execute.DropSchemaConstantAction.executeConstantAction(DropSchemaConstantAction.java:99)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.sql.execute.MiscResultSet.open(MiscResultSet.java:64)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:416)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:297)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1235)\u003cbr\\/\u003e\\n        ... 15 more\u003cbr\\/\u003e\\n2) XATest:clientjava.sql.SQLException: The conglomerate (-1) requested does notexist.\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:96)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:358)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.Statement.executeUpdate(Statement.java:509)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.JDBC.dropSchema(JDBC.java:323)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.removeObjects(CleanDatabaseTestSetup.java:231)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.cleanDatabase(CleanDatabaseTestSetup.java:164)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.setUp(CleanDatabaseTestSetup.java:109)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:18)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\nCaused by: org.apache.derby.client.am.SqlException: The conglomerate (-1) requested does not exist.\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.Statement.completeSqlca(Statement.java:1833)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.Statement.completeExecuteImmediate(Statement.java:1421)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.NetStatementReply.parseEXCSQLIMMreply(NetStatementReply.java:208)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.NetStatementReply.readExecuteImmediate(NetStatementReply.java:59)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.StatementReply.readExecuteImmediate(StatementReply.java:45)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.NetStatement.readExecuteImmediate_(NetStatement.java:128)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.Statement.readExecuteImmediate(Statement.java:1417)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.Statement.flowExecute(Statement.java:2120)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.Statement.executeUpdateX(Statement.java:514)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.Statement.executeUpdate(Statement.java:500)\u003cbr\\/\u003e\\n        ... 22 more\u003c\\/p\u003e\\n\\n\u003cp\u003eFAILURES!!!\u003cbr\\/\u003e\\nTests run: 5,  Failures: 0,  Errors: 2\u003c\\/p\u003e\\n\\n\u003cp\u003e$\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729806_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729806_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 20:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T20:40:21+0000\'\u003e10\\/Jul\\/09 20:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey, when I ran the XATest, it failed \\n$ java junit.textui.TestRunner org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest \\n.....EE \\nTime: 10.031 \\nThere were 2 errors: \\n1) XATest:embeddedjava.sql.SQLException: The conglomerate (-1) requested does not exist. \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95) \\n        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:201) \\n        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:391) \\n        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346) \\n        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2201) \\n        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:81) \\n        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1323) \\n        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:625) \\n        at org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(EmbedStatement.java:175) \\n        at org.apache.derbyTesting.junit.JDBC.dropSchema(JDBC.java:323) \\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.removeObjects(CleanDatabaseTestSetup.java:231) \\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.cleanDatabase(CleanDatabaseTestSetup.java:164) \\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.tearDown(CleanDatabaseTestSetup.java:151) \\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:20) \\n        at junit.extensions.TestSetup.run(TestSetup.java:23) \\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\nCaused by: java.sql.SQLException: The conglomerate (-1) requested does not exist. \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119) \\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70) \\n        ... 21 more \\nCaused by: ERROR XSAI2: The conglomerate (-1) requested does not exist. \\n        at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:286) \\n        at org.apache.derby.impl.store.access.RAMTransaction.findExistingConglomerate(RAMTransaction.java:399) \\n        at org.apache.derby.impl.store.access.RAMTransaction.openConglomerate(RAMTransaction.java:1308) \\n        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.isSchemaReferenced(DataDictionaryImpl.java:2310) \\n        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.isSchemaEmpty(DataDictionaryImpl.java:2245) \\n        at org.apache.derby.iapi.sql.dictionary.SchemaDescriptor.drop(SchemaDescriptor.java:419) \\n        at org.apache.derby.impl.sql.execute.DropSchemaConstantAction.executeConstantAction(DropSchemaConstantAction.java:99) \\n        at org.apache.derby.impl.sql.execute.MiscResultSet.open(MiscResultSet.java:64) \\n        at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:416) \\n        at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:297) \\n        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1235) \\n        ... 15 more \\n2) XATest:clientjava.sql.SQLException: The conglomerate (-1) requested does notexist. \\n        at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:96) \\n        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:358) \\n        at org.apache.derby.client.am.Statement.executeUpdate(Statement.java:509) \\n        at org.apache.derbyTesting.junit.JDBC.dropSchema(JDBC.java:323) \\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.removeObjects(CleanDatabaseTestSetup.java:231) \\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.cleanDatabase(CleanDatabaseTestSetup.java:164) \\n        at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.setUp(CleanDatabaseTestSetup.java:109) \\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:18) \\n        at junit.extensions.TestSetup.run(TestSetup.java:23) \\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n        at junit.extensions.TestSetup.run(TestSetup.java:23) \\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n        at junit.extensions.TestSetup.run(TestSetup.java:23) \\nCaused by: org.apache.derby.client.am.SqlException: The conglomerate (-1) requested does not exist. \\n        at org.apache.derby.client.am.Statement.completeSqlca(Statement.java:1833) \\n        at org.apache.derby.client.am.Statement.completeExecuteImmediate(Statement.java:1421) \\n        at org.apache.derby.client.net.NetStatementReply.parseEXCSQLIMMreply(NetStatementReply.java:208) \\n        at org.apache.derby.client.net.NetStatementReply.readExecuteImmediate(NetStatementReply.java:59) \\n        at org.apache.derby.client.net.StatementReply.readExecuteImmediate(StatementReply.java:45) \\n        at org.apache.derby.client.net.NetStatement.readExecuteImmediate_(NetStatement.java:128) \\n        at org.apache.derby.client.am.Statement.readExecuteImmediate(Statement.java:1417) \\n        at org.apache.derby.client.am.Statement.flowExecute(Statement.java:2120) \\n        at org.apache.derby.client.am.Statement.executeUpdateX(Statement.java:514) \\n        at org.apache.derby.client.am.Statement.executeUpdate(Statement.java:500) \\n        ... 22 more \\n\\n FAILURES!!! \\nTests run: 5,  Failures: 0,  Errors: 2 \\n\\n $              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729853\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729853&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729853\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729853_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729853_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 21:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T21:50:52+0000\'\u003e10\\/Jul\\/09 21:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eStrange, but I am not able to reproduce the conglomerate does not exist error any more. Not sure why i got it. I cleaned up the test dir and reran the tests and XATest runs fine after that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729853_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729853_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 21:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T21:50:52+0000\'\u003e10\\/Jul\\/09 21:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Strange, but I am not able to reproduce the conglomerate does not exist error any more. Not sure why i got it. I cleaned up the test dir and reran the tests and XATest runs fine after that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729854\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729854&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729854\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729854_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729854_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 21:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T21:52:03+0000\'\u003e10\\/Jul\\/09 21:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePosting an updated patch DERBY4053_patch3_diff_July102009.txt. It has changes suggested by Kathey on the previous patch. I will run the entire junit suite and derbyall. This is on trunk.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12729854_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729854_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 21:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T21:52:03+0000\'\u003e10\\/Jul\\/09 21:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Posting an updated patch DERBY4053_patch3_diff_July102009.txt. It has changes suggested by Kathey on the previous patch. I will run the entire junit suite and derbyall. This is on trunk.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12729857\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12729857&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12729857\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12729857_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729857_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 21:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T21:58:29+0000\'\u003e10\\/Jul\\/09 21:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mamta,\u003c\\/p\u003e\\n\\n\u003cp\u003eShort story is I don\'t think this is because of your change and if you start with a clean directory the test should pass.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think maybe you got this because you did not clean up your test  directory after synching up the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-712\\\" title=\\\"Support for sequences\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-712\\\"\u003e\u003cdel\u003eDERBY-712\u003c\\/del\u003e\u003c\\/a\u003e changes.  If I create a schema with the 10.6.0.0.791528 build (before \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-712\\\" title=\\\"Support for sequences\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-712\\\"\u003e\u003cdel\u003eDERBY-712\u003c\\/del\u003e\u003c\\/a\u003e)  and then try to drop it with a build after the change I get the same error.\u003cbr\\/\u003e\\nij&gt; drop schema myschema restrict;\u003cbr\\/\u003e\\nERROR XSAI2: The conglomerate (-1) requested does not exist.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think this is to be expected. Suran could you confirm that all 10.6 databases made before the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-712\\\" title=\\\"Support for sequences\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-712\\\"\u003e\u003cdel\u003eDERBY-712\u003c\\/del\u003e\u003c\\/a\u003e patch are expected to be unusable?\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12729857_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12729857_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/09 21:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-10T21:58:29+0000\'\u003e10\\/Jul\\/09 21:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mamta, \\n\\n Short story is I don\'t think this is because of your change and if you start with a clean directory the test should pass. \\n\\n I think maybe you got this because you did not clean up your test  directory after synching up the   DERBY-712   changes.  If I create a schema with the 10.6.0.0.791528 build (before   DERBY-712  )  and then try to drop it with a build after the change I get the same error. \\nij&gt; drop schema myschema restrict; \\nERROR XSAI2: The conglomerate (-1) requested does not exist. \\n\\n I think this is to be expected. Suran could you confirm that all 10.6 databases made before the   DERBY-712   patch are expected to be unusable? \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730018\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730018&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730018\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12730018_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730018_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/09 21:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-11T21:49:53+0000\'\u003e11\\/Jul\\/09 21:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for doing this, Mamta. Patch #3 looks fine to me, except some nits like mixing tabs and spaces on the same line and trailing blanks. It would also be good if the comment in Database.close() explained why and not only what the code does. Thanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12730018_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730018_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/09 21:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-11T21:49:53+0000\'\u003e11\\/Jul\\/09 21:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for doing this, Mamta. Patch #3 looks fine to me, except some nits like mixing tabs and spaces on the same line and trailing blanks. It would also be good if the comment in Database.close() explained why and not only what the code does. Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730093\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730093&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730093\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"suranjay\\\" id=\\\"commentauthor_12730093_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=suranjay\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"suranjay\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suran Jayathilaka\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730093_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/09 15:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-12T15:02:18+0000\'\u003e12\\/Jul\\/09 15:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith reference to \u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-712?focusedCommentId=12728739&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12728739\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-712?focusedCommentId=12728739&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12728739\u003c\\/a\u003e\u003cbr\\/\u003e\\nI think it\'s safe to say 1.6 databases from before the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-712\\\" title=\\\"Support for sequences\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-712\\\"\u003e\u003cdel\u003eDERBY-712\u003c\\/del\u003e\u003c\\/a\u003e changes will now be unusable.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"suranjay\\\" id=\\\"commentauthor_12730093_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=suranjay\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"suranjay\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suran Jayathilaka\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730093_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/09 15:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-12T15:02:18+0000\'\u003e12\\/Jul\\/09 15:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    With reference to  \\n http:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-712?focusedCommentId=12728739&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12728739  \\nI think it\'s safe to say 1.6 databases from before the   DERBY-712   changes will now be unusable.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730126\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730126&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730126\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730126_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730126_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/09 18:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-12T18:25:10+0000\'\u003e12\\/Jul\\/09 18:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKnut, thanks for looking at the patch. I will add comments to Database.close() for the code changes that I have made. As for mixing tabs and spaces, maybe someone can help me with that. I am using eclipse and it must be adding the tabs automatically because when I start a new codeline, it puts me automatically on what appears to be right place on that line to right the code. Maybe I need to change some settings. \u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, I ran derball and junit and they all ran fine. After adding the comments, I will go ahead and check in the changes into trunk and then work on merging it to 10.5 codeline.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730126_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730126_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/09 18:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-12T18:25:10+0000\'\u003e12\\/Jul\\/09 18:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Knut, thanks for looking at the patch. I will add comments to Database.close() for the code changes that I have made. As for mixing tabs and spaces, maybe someone can help me with that. I am using eclipse and it must be adding the tabs automatically because when I start a new codeline, it puts me automatically on what appears to be right place on that line to right the code. Maybe I need to change some settings.  \\n\\n Also, I ran derball and junit and they all ran fine. After adding the comments, I will go ahead and check in the changes into trunk and then work on merging it to 10.5 codeline.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730352\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730352&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730352\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730352_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730352_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 13:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T13:58:04+0000\'\u003e13\\/Jul\\/09 13:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted changes to trunk with revision 793588 and with commit comments\u003cbr\\/\u003e\\n**************\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4053\\\" title=\\\"Network Server&#39;s failure to rollback local transactions on shutdown can cause  hang on startup with message java.net.BindException: Address already in use: NET_Bind in derby.log \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4053\\\"\u003e\u003cdel\u003eDERBY-4053\u003c\\/del\u003e\u003c\\/a\u003e The local XA connections were not getting rollback during Database close and\u003cbr\\/\u003e\\nthis resulted into exception at connection close if the connection object had any pending\u003cbr\\/\u003e\\ntransaction. Made changes so that all the connections(except global XA connections) will \u003cbr\\/\u003e\\nhave their transactions rolled back before those connections are closed.\u003cbr\\/\u003e\\n**************\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, I think have taken care of space and tab mixing. Will work on migrating this to 10.5\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730352_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730352_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 13:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T13:58:04+0000\'\u003e13\\/Jul\\/09 13:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed changes to trunk with revision 793588 and with commit comments \\n************** \\n  DERBY-4053   The local XA connections were not getting rollback during Database close and \\nthis resulted into exception at connection close if the connection object had any pending \\ntransaction. Made changes so that all the connections(except global XA connections) will  \\nhave their transactions rolled back before those connections are closed. \\n************** \\n\\n Also, I think have taken care of space and tab mixing. Will work on migrating this to 10.5              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730428\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730428&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730428\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12730428_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730428_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 17:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T17:56:15+0000\'\u003e13\\/Jul\\/09 17:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Mamta for the fix.  I still can\'t quite figure why this would occur on 10.4.   \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3319\\\" title=\\\"Logical connections do not check if a transaction is active on close\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3319\\\"\u003e\u003cdel\u003eDERBY-3319\u003c\\/del\u003e\u003c\\/a\u003e wasn\'t fixed there. Does anyone have any theories?  Perhaps the 10.4 issue is some other problem during shutdown that will be exposed\\/resolved once we properly handle and log exceptions during shutdown.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12730428_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730428_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 17:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T17:56:15+0000\'\u003e13\\/Jul\\/09 17:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Mamta for the fix.  I still can\'t quite figure why this would occur on 10.4.     DERBY-3319   wasn\'t fixed there. Does anyone have any theories?  Perhaps the 10.4 issue is some other problem during shutdown that will be exposed\\/resolved once we properly handle and log exceptions during shutdown.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730443\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730443&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730443\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730443_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730443_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 18:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T18:17:14+0000\'\u003e13\\/Jul\\/09 18:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4304\\\" title=\\\"Network Server shutdown should handle exceptions and finish the server shutdown completely\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4304\\\"\u003e\u003cdel\u003eDERBY-4304\u003c\\/del\u003e\u003c\\/a\u003e for \u003cbr\\/\u003e\\n1) Make sure an exception during shutdown processing does not prevent the remaining shutdown tasks, like closing the server socket from occurring. \u003cbr\\/\u003e\\n2) Make sure any exceptions that occur in shutdown processing are reported to the console. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730443_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730443_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 18:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T18:17:14+0000\'\u003e13\\/Jul\\/09 18:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created   DERBY-4304   for  \\n1) Make sure an exception during shutdown processing does not prevent the remaining shutdown tasks, like closing the server socket from occurring.  \\n2) Make sure any exceptions that occur in shutdown processing are reported to the console.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730505\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730505&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730505\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730505_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730505_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 20:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T20:44:20+0000\'\u003e13\\/Jul\\/09 20:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis is my second time running junit suite on 10.5 codeline after merging the changes into 10.5 and both times I am running into problems with upgrade tests. Not sure if there is a known issue with running upgrade tests on 10.5.  I see quite a different errors. Wish had run the junit tests in text runner rather than gui runner. But here are couple failures\u003cbr\\/\u003e\\ntestOldVersion:Old minor(driver): expected&lt;1&gt; but was &lt;5&gt;\u003cbr\\/\u003e\\ntestGrantRevokeStatements(...Changes10_2)Unexpected SQL state expected &lt;..X01&gt; but was &lt;..Z60&gt;\u003cbr\\/\u003e\\ntestDatabaseOwnerChange(..10_3)AUTHORIZATIONID not valid for SYSIBM expected:&lt;DBA&gt; but was &lt;APP&gt;\u003cbr\\/\u003e\\n....\u003c\\/p\u003e\\n\\n\u003cp\u003eDoes anyone have the cycle to merge my trunk patch to 10.5 codeline and see if the tests run fine on their machine?\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the meantime, I will run the derbyall on merged 10.5 and see how that goes\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730505_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730505_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 20:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T20:44:20+0000\'\u003e13\\/Jul\\/09 20:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This is my second time running junit suite on 10.5 codeline after merging the changes into 10.5 and both times I am running into problems with upgrade tests. Not sure if there is a known issue with running upgrade tests on 10.5.  I see quite a different errors. Wish had run the junit tests in text runner rather than gui runner. But here are couple failures \\ntestOldVersion:Old minor(driver): expected&lt;1&gt; but was &lt;5&gt; \\ntestGrantRevokeStatements(...Changes10_2)Unexpected SQL state expected &lt;..X01&gt; but was &lt;..Z60&gt; \\ntestDatabaseOwnerChange(..10_3)AUTHORIZATIONID not valid for SYSIBM expected:&lt;DBA&gt; but was &lt;APP&gt; \\n.... \\n\\n Does anyone have the cycle to merge my trunk patch to 10.5 codeline and see if the tests run fine on their machine? \\n\\n In the meantime, I will run the derbyall on merged 10.5 and see how that goes              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730541\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730541&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730541\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12730541_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730541_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 21:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T21:54:59+0000\'\u003e13\\/Jul\\/09 21:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mamta, I have a test run going now but will test your patch as soon as that is done.  I have never seen these failures before but I don\'t think upgrade tests run for network server at all so think probably this is not related to your change.  I\'ll let you know how my run goes.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12730541_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730541_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 21:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T21:54:59+0000\'\u003e13\\/Jul\\/09 21:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mamta, I have a test run going now but will test your patch as soon as that is done.  I have never seen these failures before but I don\'t think upgrade tests run for network server at all so think probably this is not related to your change.  I\'ll let you know how my run goes.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730564\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730564&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730564\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730564_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730564_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 22:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T22:38:52+0000\'\u003e13\\/Jul\\/09 22:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ederbyall ran fine out my machine with intermittent failure (I had seen this failure on trunk too. forgot to mention it)\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003e\\n\\t\\t\\t\u003cul\u003e\\n\\t\\t\\t\\t\u003cli\u003e\\n\\t\\t\\t\\t\u003cul\u003e\\n\\t\\t\\t\\t\\t\u003cli\u003e\\n\\t\\t\\t\\t\\t\u003cul\u003e\\n\\t\\t\\t\\t\\t\\t\u003cli\u003e\\n\\t\\t\\t\\t\\t\\t\u003cul\u003e\\n\\t\\t\\t\\t\\t\\t\\t\u003cli\u003e\\n\\t\\t\\t\\t\\t\\t\\t\u003cul\u003e\\n\\t\\t\\t\\t\\t\\t\\t\\t\u003cli\u003e\\n\\t\\t\\t\\t\\t\\t\\t\\t\u003cul\u003e\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\u003cli\u003eDiff file derbyall\\/storeall\\/storeunit\\/T_RawStoreFactory.diff\u003c\\/li\u003e\\n\\t\\t\\t\\t\\t\\t\\t\\t\u003c\\/ul\u003e\\n\\t\\t\\t\\t\\t\\t\\t\\t\u003c\\/li\u003e\\n\\t\\t\\t\\t\\t\\t\\t\u003c\\/ul\u003e\\n\\t\\t\\t\\t\\t\\t\\t\u003c\\/li\u003e\\n\\t\\t\\t\\t\\t\\t\u003c\\/ul\u003e\\n\\t\\t\\t\\t\\t\\t\u003c\\/li\u003e\\n\\t\\t\\t\\t\\t\u003c\\/ul\u003e\\n\\t\\t\\t\\t\\t\u003c\\/li\u003e\\n\\t\\t\\t\\t\u003c\\/ul\u003e\\n\\t\\t\\t\\t\u003c\\/li\u003e\\n\\t\\t\\t\u003c\\/ul\u003e\\n\\t\\t\\t\u003c\\/li\u003e\\n\\t\\t\\t\u003cli\u003eStart: T_RawStoreFactory jdk1.6.0 storeall:storeunit 2009-07-13 14:34:14 ***\u003cbr\\/\u003e\\n2 del\u003cbr\\/\u003e\\n&lt; &#8211; Unit Test T_RawStoreFactory finished\u003cbr\\/\u003e\\n2 add\u003cbr\\/\u003e\\n&gt; Shutting down due to unit test failure.\u003cbr\\/\u003e\\nTest Failed.\u003c\\/li\u003e\\n\\t\\t\\t\u003cli\u003eEnd:   T_RawStoreFactory jdk1.6.0 storeall:storeunit 2009-07-13 14:34:31 ***\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730564_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730564_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 22:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T22:38:52+0000\'\u003e13\\/Jul\\/09 22:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    derbyall ran fine out my machine with intermittent failure (I had seen this failure on trunk too. forgot to mention it) \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t \\n\\t\\t\\t \\n\\t\\t\\t\\t \\n\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t\\t\\t\\t Diff file derbyall\\/storeall\\/storeunit\\/T_RawStoreFactory.diff \\n\\t\\t\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t\\t \\n\\t\\t\\t\\t \\n\\t\\t\\t\\t \\n\\t\\t\\t \\n\\t\\t\\t \\n\\t\\t\\t Start: T_RawStoreFactory jdk1.6.0 storeall:storeunit 2009-07-13 14:34:14 *** \\n2 del \\n&lt; &#8211; Unit Test T_RawStoreFactory finished \\n2 add \\n&gt; Shutting down due to unit test failure. \\nTest Failed. \\n\\t\\t\\t End:   T_RawStoreFactory jdk1.6.0 storeall:storeunit 2009-07-13 14:34:31 *** \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730573\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730573&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730573\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12730573_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730573_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 22:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T22:55:03+0000\'\u003e13\\/Jul\\/09 22:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThat\'s like \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2635\\\" title=\\\"intermittent failure in T_RawStoreFactory unit test\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2635\\\"\u003e\u003cdel\u003eDERBY-2635\u003c\\/del\u003e\u003c\\/a\u003e (which is closed)...But I think it\'s important to check on derby.log with this test.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12730573_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730573_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 22:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T22:55:03+0000\'\u003e13\\/Jul\\/09 22:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    That\'s like   DERBY-2635   (which is closed)...But I think it\'s important to check on derby.log with this test.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730575\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730575&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730575\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12730575_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730575_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 23:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T23:02:21+0000\'\u003e13\\/Jul\\/09 23:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eor \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3993\\\" title=\\\"With IBM 1.6 T_RawStoreFactory fails with There should be 0 observers, but we still have 1 observers on Win 2K\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3993\\\"\u003e\u003cdel\u003eDERBY-3993\u003c\\/del\u003e\u003c\\/a\u003e I have seen the test fail with the signature you describe but it has the observers error in derby.log.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12730575_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730575_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 23:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T23:02:21+0000\'\u003e13\\/Jul\\/09 23:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    or   DERBY-3993   I have seen the test fail with the signature you describe but it has the observers error in derby.log.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730586\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730586&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730586\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730586_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730586_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 23:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T23:23:32+0000\'\u003e13\\/Jul\\/09 23:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI looked through derby.log and see that it has observers error in derby.log\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;main&#93;\u003c\\/span\u003e FAIL - org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED There should be 0 observers, but we still have 1 observers.\u003cbr\\/\u003e\\norg.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED There should be 0 observers, but we still have 1 observers.\u003cbr\\/\u003e\\n\\tat org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:162)\u003cbr\\/\u003e\\n\\tat org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:147)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.xact.Xact.doComplete(Xact.java:1969)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.xact.Xact.preComplete(Xact.java:1925)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.xact.Xact.prepareCommit(Xact.java:769)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:882)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:679)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.store.T_Util.t_commit(T_Util.java:840)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.TC001(T_RawStoreFactory.java:7310)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTempTests(T_RawStoreFactory.java:417)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTestSet(T_RawStoreFactory.java:248)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.harness.T_MultiIterations.runTests(T_MultiIterations.java:95)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.harness.T_MultiThreadedIterations.runTests(T_MultiThreadedIterations.java:92)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.harness.T_Generic.Execute(T_Generic.java:118)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runATest(BasicUnitTestManager.java:184)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runTests(BasicUnitTestManager.java:246)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:93)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.FileMonitor.&lt;init&gt;(FileMonitor.java:60)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730586_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730586_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/09 23:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-13T23:23:32+0000\'\u003e13\\/Jul\\/09 23:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I looked through derby.log and see that it has observers error in derby.log \\n &#91;main&#93;  FAIL - org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED There should be 0 observers, but we still have 1 observers. \\norg.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED There should be 0 observers, but we still have 1 observers. \\n\\tat org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:162) \\n\\tat org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:147) \\n\\tat org.apache.derby.impl.store.raw.xact.Xact.doComplete(Xact.java:1969) \\n\\tat org.apache.derby.impl.store.raw.xact.Xact.preComplete(Xact.java:1925) \\n\\tat org.apache.derby.impl.store.raw.xact.Xact.prepareCommit(Xact.java:769) \\n\\tat org.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:882) \\n\\tat org.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:679) \\n\\tat org.apache.derbyTesting.unitTests.store.T_Util.t_commit(T_Util.java:840) \\n\\tat org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.TC001(T_RawStoreFactory.java:7310) \\n\\tat org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTempTests(T_RawStoreFactory.java:417) \\n\\tat org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTestSet(T_RawStoreFactory.java:248) \\n\\tat org.apache.derbyTesting.unitTests.harness.T_MultiIterations.runTests(T_MultiIterations.java:95) \\n\\tat org.apache.derbyTesting.unitTests.harness.T_MultiThreadedIterations.runTests(T_MultiThreadedIterations.java:92) \\n\\tat org.apache.derbyTesting.unitTests.harness.T_Generic.Execute(T_Generic.java:118) \\n\\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runATest(BasicUnitTestManager.java:184) \\n\\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runTests(BasicUnitTestManager.java:246) \\n\\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:93) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997) \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429) \\n\\tat org.apache.derby.impl.services.monitor.FileMonitor.&lt;init&gt;(FileMonitor.java:60) \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289) \\n\\tat org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730654\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730654&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730654\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12730654_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730654_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 02:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T02:39:41+0000\'\u003e14\\/Jul\\/09 02:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mamta,\u003c\\/p\u003e\\n\\n\u003cp\u003eI got no failures on 10.5 with suites.All after merging this change to the branch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12730654_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730654_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 02:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T02:39:41+0000\'\u003e14\\/Jul\\/09 02:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mamta, \\n\\n I got no failures on 10.5 with suites.All after merging this change to the branch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730839\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730839&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730839\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730839_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730839_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 13:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T13:38:11+0000\'\u003e14\\/Jul\\/09 13:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for running the tests, Kathey. Appreciate it. Will go ahead and commit the changes into 10.5\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730839_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730839_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 13:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T13:38:11+0000\'\u003e14\\/Jul\\/09 13:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for running the tests, Kathey. Appreciate it. Will go ahead and commit the changes into 10.5              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730842\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730842&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730842\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730842_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730842_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 13:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T13:41:48+0000\'\u003e14\\/Jul\\/09 13:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMigrated into 10.5 with revision 793900.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12730842_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730842_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 13:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T13:41:48+0000\'\u003e14\\/Jul\\/09 13:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Migrated into 10.5 with revision 793900.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12730941\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12730941&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12730941\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12730941_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730941_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 16:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T16:18:35+0000\'\u003e14\\/Jul\\/09 16:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBad news: On trunk, I updated to get Mamta\'s change and ran tests with 2 other changes. First I applied Tiago\'s patch for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4292\\\" title=\\\"creation of FileInputStream in org.apache.derby.impl.tools.ij.Main not wrapped in privilege  block which can cause problems running under SecurityManager\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4292\\\"\u003e\u003cdel\u003eDERBY-4292\u003c\\/del\u003e\u003c\\/a\u003e.  Second I tried to enable XATest.   I ran suites.All and hit \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4053\\\" title=\\\"Network Server&#39;s failure to rollback local transactions on shutdown can cause  hang on startup with message java.net.BindException: Address already in use: NET_Bind in derby.log \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4053\\\"\u003e\u003cdel\u003eDERBY-4053\u003c\\/del\u003e\u003c\\/a\u003e.  I think it was the addition of XATest that did it, not Tiago\'s change because the initial InvalidReply came during XATest.  I will catch and print any exception in shutdown and rerun and hopefully will hit it again and we can see what the issue is now that local transactions are rolling back.\u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12730941_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12730941_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 16:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T16:18:35+0000\'\u003e14\\/Jul\\/09 16:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bad news: On trunk, I updated to get Mamta\'s change and ran tests with 2 other changes. First I applied Tiago\'s patch for   DERBY-4292  .  Second I tried to enable XATest.   I ran suites.All and hit   DERBY-4053  .  I think it was the addition of XATest that did it, not Tiago\'s change because the initial InvalidReply came during XATest.  I will catch and print any exception in shutdown and rerun and hopefully will hit it again and we can see what the issue is now that local transactions are rolling back. \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12731047\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12731047&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12731047\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12731047_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12731047_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 18:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T18:54:03+0000\'\u003e14\\/Jul\\/09 18:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTiago offered to try to reproduce as well.   Attached is the patch that prints out any exceptions during shutdown. This is not for commit.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12731047_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12731047_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 18:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T18:54:03+0000\'\u003e14\\/Jul\\/09 18:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Tiago offered to try to reproduce as well.   Attached is the patch that prints out any exceptions during shutdown. This is not for commit.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12731152\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12731152&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12731152\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12731152_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12731152_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 21:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T21:58:32+0000\'\u003e14\\/Jul\\/09 21:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith the diag patch, XATest, and the change to check unordered results for checkXATransactionView, and running jdbcapi._Suite  I can reproduce the error on shutdown described here: \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4155?focusedCommentId=12731086&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12731086\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4155?focusedCommentId=12731086&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12731086\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003efollowed later by an InvalidReply and the hang with bind exception in the derby.log\u003c\\/p\u003e\\n\\n\\n\\n\u003cp\u003eI also see the following issue shutting down  which does not cause problems restarting the server because the JMX cleanup comes after serverSocket.close()\u003cbr\\/\u003e\\ntestSystemShutdown used 406 ms java.lang.NullPointerException\u003cbr\\/\u003e\\n        at org.apache.derby.impl.services.jmx.JMXManagementService.unregisterMBean(JMXManagementService.java:286)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.services.jmx.JMXManagementService.unregisterMBean(JMXManagementService.java:277)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.blockingStart(NetworkServerControlImpl.java:864)\u003cbr\\/\u003e\\n        at sun.reflect.GeneratedMethodAccessor596.invoke(Unknown Source)\u003cbr\\/\u003e\\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\u003cbr\\/\u003e\\n        at java.lang.reflect.Method.invoke(Method.java:599)\u003cbr\\/\u003e\\n        at org.apache.derby.iapi.jdbc.DRDAServerStarter.run(DRDAServerStarter.java:236)\u003cbr\\/\u003e\\n        at java.lang.Thread.run(Thread.java:735)\u003cbr\\/\u003e\\n.\u003cbr\\/\u003e\\ntestPoolDS used 5234 ms .\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eIn general ur failure to report and handle errors on shutdown has been masking other issues.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think we should proceed as follows:\u003cbr\\/\u003e\\n1) Change the title of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4053\\\" title=\\\"Network Server&#39;s failure to rollback local transactions on shutdown can cause  hang on startup with message java.net.BindException: Address already in use: NET_Bind in derby.log \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4053\\\"\u003e\u003cdel\u003eDERBY-4053\u003c\\/del\u003e\u003c\\/a\u003e to: Network Server does not rollback local transactions on XAConnections  on shutdown causing hang on restart with message java.net.BindException: Address already in use: NET_Bind in derby.log \u003c\\/p\u003e\\n\\n\u003cp\u003e2) File two new issues described above.\u003c\\/p\u003e\\n\\n\u003cp\u003e3)Continue work on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4304\\\" title=\\\"Network Server shutdown should handle exceptions and finish the server shutdown completely\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4304\\\"\u003e\u003cdel\u003eDERBY-4304\u003c\\/del\u003e\u003c\\/a\u003e to expose additonal issues and eliminate the bind error on other circumstances.\u003c\\/p\u003e\\n\\n\u003cp\u003e4) Add the unordered result set check as part of the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4155\\\" title=\\\"jdbcapi\\/XATest.java  doesn&#39;t seem to be running anywhere\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4155\\\"\u003e\u003cdel\u003eDERBY-4155\u003c\\/del\u003e\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eI don\'t think these tasks should hold up 10.5.2\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12731152_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12731152_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/09 21:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-14T21:58:32+0000\'\u003e14\\/Jul\\/09 21:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    With the diag patch, XATest, and the change to check unordered results for checkXATransactionView, and running jdbcapi._Suite  I can reproduce the error on shutdown described here:  https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4155?focusedCommentId=12731086&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12731086  \\n\\n followed later by an InvalidReply and the hang with bind exception in the derby.log \\n\\n\\n\\n I also see the following issue shutting down  which does not cause problems restarting the server because the JMX cleanup comes after serverSocket.close() \\ntestSystemShutdown used 406 ms java.lang.NullPointerException \\n        at org.apache.derby.impl.services.jmx.JMXManagementService.unregisterMBean(JMXManagementService.java:286) \\n        at org.apache.derby.impl.services.jmx.JMXManagementService.unregisterMBean(JMXManagementService.java:277) \\n        at org.apache.derby.impl.drda.NetworkServerControlImpl.blockingStart(NetworkServerControlImpl.java:864) \\n        at sun.reflect.GeneratedMethodAccessor596.invoke(Unknown Source) \\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) \\n        at java.lang.reflect.Method.invoke(Method.java:599) \\n        at org.apache.derby.iapi.jdbc.DRDAServerStarter.run(DRDAServerStarter.java:236) \\n        at java.lang.Thread.run(Thread.java:735) \\n. \\ntestPoolDS used 5234 ms . \\n\\n\\n In general ur failure to report and handle errors on shutdown has been masking other issues. \\n\\n I think we should proceed as follows: \\n1) Change the title of   DERBY-4053   to: Network Server does not rollback local transactions on XAConnections  on shutdown causing hang on restart with message java.net.BindException: Address already in use: NET_Bind in derby.log  \\n\\n 2) File two new issues described above. \\n\\n 3)Continue work on   DERBY-4304   to expose additonal issues and eliminate the bind error on other circumstances. \\n\\n 4) Add the unordered result set check as part of the   DERBY-4155   \\n\\n\\n I don\'t think these tasks should hold up 10.5.2 \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12731580\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12731580&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12731580\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12731580_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12731580_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jul\\/09 17:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-15T17:36:22+0000\'\u003e15\\/Jul\\/09 17:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eVerified fix in 10.5 and trunk. There were other issues on shutdown identified that may cause a similar symptom, but those will be logged separately.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12731580_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12731580_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jul\\/09 17:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-15T17:36:22+0000\'\u003e15\\/Jul\\/09 17:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Verified fix in 10.5 and trunk. There were other issues on shutdown identified that may cause a similar symptom, but those will be logged separately.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12749632\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4053?focusedCommentId=12749632&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12749632\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12749632_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12749632_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Aug\\/09 21:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-31T21:31:33+0000\'\u003e31\\/Aug\\/09 21:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBackported chages to 10.4 and 10.3 codelines\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12749632_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12749632_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Aug\\/09 21:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-08-31T21:31:33+0000\'\u003e31\\/Aug\\/09 21:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Backported chages to 10.4 and 10.3 codelines              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520239643670"> 
    <input type="hidden" title="jira.request.server.time" value="314"> 
    <input type="hidden" title="jira.request.id" value="527x94399015x3"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="3"> 
    <input type="hidden" title="db.reads.time.in.ms" value="47"> 
    <input type="hidden" title="db.conns.time.in.ms" value="53"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 527x94399015x3
	          REQUEST TIMESTAMP : [05/Mar/2018:08:47:23 +0000]
	               REQUEST TIME : 0.3140
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 3

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=35, elapsedTotal=47296419, elapsedMin=398395, elapsedMax=11100862, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=39, elapsedTotal=53147774, elapsedMin=418551, elapsedMax=11195812, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>